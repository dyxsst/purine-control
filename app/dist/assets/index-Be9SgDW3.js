(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var vd={exports:{}},Cr={};var Kg;function ME(){if(Kg)return Cr;Kg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return Cr.Fragment=e,Cr.jsx=i,Cr.jsxs=i,Cr}var Qg;function wE(){return Qg||(Qg=1,vd.exports=ME()),vd.exports}var E=wE(),_d={exports:{}},he={};var Xg;function RE(){if(Xg)return he;Xg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function R(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}R.prototype.isReactComponent={},R.prototype.setState=function(x,F){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,F,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function D(){}D.prototype=R.prototype;function P(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}var J=P.prototype=new D;J.constructor=P,M(J,R.prototype),J.isPureReactComponent=!0;var B=Array.isArray;function W(){}var Q={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function ee(x,F,G){var j=G.ref;return{$$typeof:t,type:x,key:F,ref:j!==void 0?j:null,props:G}}function le(x,F){return ee(x.type,F,x.props)}function pe(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function oe(x){var F={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(G){return F[G]})}var be=/\/+/g;function Ye(x,F){return typeof x=="object"&&x!==null&&x.key!=null?oe(""+x.key):F.toString(36)}function Qe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(W,W):(x.status="pending",x.then(function(F){x.status==="pending"&&(x.status="fulfilled",x.value=F)},function(F){x.status==="pending"&&(x.status="rejected",x.reason=F)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function H(x,F,G,j,fe){var me=typeof x;(me==="undefined"||me==="boolean")&&(x=null);var Re=!1;if(x===null)Re=!0;else switch(me){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(x.$$typeof){case t:case e:Re=!0;break;case y:return Re=x._init,H(Re(x._payload),F,G,j,fe)}}if(Re)return fe=fe(x),Re=j===""?"."+Ye(x,0):j,B(fe)?(G="",Re!=null&&(G=Re.replace(be,"$&/")+"/"),H(fe,F,G,"",function(Gi){return Gi})):fe!=null&&(pe(fe)&&(fe=le(fe,G+(fe.key==null||x&&x.key===fe.key?"":(""+fe.key).replace(be,"$&/")+"/")+Re)),F.push(fe)),1;Re=0;var ht=j===""?".":j+":";if(B(x))for(var Je=0;Je<x.length;Je++)j=x[Je],me=ht+Ye(j,Je),Re+=H(j,F,G,me,fe);else if(Je=C(x),typeof Je=="function")for(x=Je.call(x),Je=0;!(j=x.next()).done;)j=j.value,me=ht+Ye(j,Je++),Re+=H(j,F,G,me,fe);else if(me==="object"){if(typeof x.then=="function")return H(Qe(x),F,G,j,fe);throw F=String(x),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Re}function Z(x,F,G){if(x==null)return x;var j=[],fe=0;return H(x,j,"","",function(me){return F.call(G,me,fe++)}),j}function ie(x){if(x._status===-1){var F=x._result;F=F(),F.then(function(G){(x._status===0||x._status===-1)&&(x._status=1,x._result=G)},function(G){(x._status===0||x._status===-1)&&(x._status=2,x._result=G)}),x._status===-1&&(x._status=0,x._result=F)}if(x._status===1)return x._result.default;throw x._result}var X=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},ce={map:Z,forEach:function(x,F,G){Z(x,function(){F.apply(this,arguments)},G)},count:function(x){var F=0;return Z(x,function(){F++}),F},toArray:function(x){return Z(x,function(F){return F})||[]},only:function(x){if(!pe(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return he.Activity=_,he.Children=ce,he.Component=R,he.Fragment=i,he.Profiler=r,he.PureComponent=P,he.StrictMode=o,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,he.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Q.H.useMemoCache(x)}},he.cache=function(x){return function(){return x.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(x,F,G){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var j=M({},x.props),fe=x.key;if(F!=null)for(me in F.key!==void 0&&(fe=""+F.key),F)!re.call(F,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&F.ref===void 0||(j[me]=F[me]);var me=arguments.length-2;if(me===1)j.children=G;else if(1<me){for(var Re=Array(me),ht=0;ht<me;ht++)Re[ht]=arguments[ht+2];j.children=Re}return ee(x.type,fe,j)},he.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},he.createElement=function(x,F,G){var j,fe={},me=null;if(F!=null)for(j in F.key!==void 0&&(me=""+F.key),F)re.call(F,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(fe[j]=F[j]);var Re=arguments.length-2;if(Re===1)fe.children=G;else if(1<Re){for(var ht=Array(Re),Je=0;Je<Re;Je++)ht[Je]=arguments[Je+2];fe.children=ht}if(x&&x.defaultProps)for(j in Re=x.defaultProps,Re)fe[j]===void 0&&(fe[j]=Re[j]);return ee(x,me,fe)},he.createRef=function(){return{current:null}},he.forwardRef=function(x){return{$$typeof:d,render:x}},he.isValidElement=pe,he.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:ie}},he.memo=function(x,F){return{$$typeof:h,type:x,compare:F===void 0?null:F}},he.startTransition=function(x){var F=Q.T,G={};Q.T=G;try{var j=x(),fe=Q.S;fe!==null&&fe(G,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(W,X)}catch(me){X(me)}finally{F!==null&&G.types!==null&&(F.types=G.types),Q.T=F}},he.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},he.use=function(x){return Q.H.use(x)},he.useActionState=function(x,F,G){return Q.H.useActionState(x,F,G)},he.useCallback=function(x,F){return Q.H.useCallback(x,F)},he.useContext=function(x){return Q.H.useContext(x)},he.useDebugValue=function(){},he.useDeferredValue=function(x,F){return Q.H.useDeferredValue(x,F)},he.useEffect=function(x,F){return Q.H.useEffect(x,F)},he.useEffectEvent=function(x){return Q.H.useEffectEvent(x)},he.useId=function(){return Q.H.useId()},he.useImperativeHandle=function(x,F,G){return Q.H.useImperativeHandle(x,F,G)},he.useInsertionEffect=function(x,F){return Q.H.useInsertionEffect(x,F)},he.useLayoutEffect=function(x,F){return Q.H.useLayoutEffect(x,F)},he.useMemo=function(x,F){return Q.H.useMemo(x,F)},he.useOptimistic=function(x,F){return Q.H.useOptimistic(x,F)},he.useReducer=function(x,F,G){return Q.H.useReducer(x,F,G)},he.useRef=function(x){return Q.H.useRef(x)},he.useState=function(x){return Q.H.useState(x)},he.useSyncExternalStore=function(x,F,G){return Q.H.useSyncExternalStore(x,F,G)},he.useTransition=function(){return Q.H.useTransition()},he.version="19.2.0",he}var Zg;function Cf(){return Zg||(Zg=1,_d.exports=RE()),_d.exports}var U=Cf(),Td={exports:{}},Ar={},Sd={exports:{}},Ed={};var Wg;function NE(){return Wg||(Wg=1,(function(t){function e(H,Z){var ie=H.length;H.push(Z);e:for(;0<ie;){var X=ie-1>>>1,ce=H[X];if(0<r(ce,Z))H[X]=Z,H[ie]=ce,ie=X;else break e}}function i(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var Z=H[0],ie=H.pop();if(ie!==Z){H[0]=ie;e:for(var X=0,ce=H.length,x=ce>>>1;X<x;){var F=2*(X+1)-1,G=H[F],j=F+1,fe=H[j];if(0>r(G,ie))j<ce&&0>r(fe,G)?(H[X]=fe,H[j]=ie,X=j):(H[X]=G,H[F]=ie,X=F);else if(j<ce&&0>r(fe,ie))H[X]=fe,H[j]=ie,X=j;else break e}}return Z}function r(H,Z){var ie=H.sortIndex-Z.sortIndex;return ie!==0?ie:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],h=[],y=1,_=null,T=3,C=!1,b=!1,M=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function J(H){for(var Z=i(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=H)o(h),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=i(h)}}function B(H){if(M=!1,J(H),!b)if(i(p)!==null)b=!0,W||(W=!0,oe());else{var Z=i(h);Z!==null&&Qe(B,Z.startTime-H)}}var W=!1,Q=-1,re=5,ee=-1;function le(){return w?!0:!(t.unstable_now()-ee<re)}function pe(){if(w=!1,W){var H=t.unstable_now();ee=H;var Z=!0;try{e:{b=!1,M&&(M=!1,D(Q),Q=-1),C=!0;var ie=T;try{t:{for(J(H),_=i(p);_!==null&&!(_.expirationTime>H&&le());){var X=_.callback;if(typeof X=="function"){_.callback=null,T=_.priorityLevel;var ce=X(_.expirationTime<=H);if(H=t.unstable_now(),typeof ce=="function"){_.callback=ce,J(H),Z=!0;break t}_===i(p)&&o(p),J(H)}else o(p);_=i(p)}if(_!==null)Z=!0;else{var x=i(h);x!==null&&Qe(B,x.startTime-H),Z=!1}}break e}finally{_=null,T=ie,C=!1}Z=void 0}}finally{Z?oe():W=!1}}}var oe;if(typeof P=="function")oe=function(){P(pe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Ye=be.port2;be.port1.onmessage=pe,oe=function(){Ye.postMessage(null)}}else oe=function(){R(pe,0)};function Qe(H,Z){Q=R(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(H){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var ie=T;T=Z;try{return H()}finally{T=ie}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=T;T=H;try{return Z()}finally{T=ie}},t.unstable_scheduleCallback=function(H,Z,ie){var X=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?X+ie:X):ie=X,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ie+ce,H={id:y++,callback:Z,priorityLevel:H,startTime:ie,expirationTime:ce,sortIndex:-1},ie>X?(H.sortIndex=ie,e(h,H),i(p)===null&&H===i(h)&&(M?(D(Q),Q=-1):M=!0,Qe(B,ie-X))):(H.sortIndex=ce,e(p,H),b||C||(b=!0,W||(W=!0,oe()))),H},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(H){var Z=T;return function(){var ie=T;T=Z;try{return H.apply(this,arguments)}finally{T=ie}}}})(Ed)),Ed}var jg;function xE(){return jg||(jg=1,Sd.exports=NE()),Sd.exports}var Cd={exports:{}},At={};var ey;function IE(){if(ey)return At;ey=1;var t=Cf();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,At.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,y)},At.flushSync=function(p){var h=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=h,o.p=y,o.d.f()}},At.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(p,h))},At.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},At.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?o.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:C}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},At.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(p)},At.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},At.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=d(h.as,h.crossOrigin);o.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(p)},At.requestFormReset=function(p){o.d.r(p)},At.unstable_batchedUpdates=function(p,h){return p(h)},At.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},At.useFormStatus=function(){return c.H.useHostTransitionStatus()},At.version="19.2.0",At}var ty;function DE(){if(ty)return Cd.exports;ty=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cd.exports=IE(),Cd.exports}var ny;function UE(){if(ny)return Ar;ny=1;var t=xE(),e=Cf(),i=DE();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var a=n,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var S=!1,A=g.child;A;){if(A===a){S=!0,a=g,u=v;break}if(A===u){S=!0,u=g,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,u=g;break}if(A===u){S=!0,u=v,a=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=pe&&n[pe]||n["@@iterator"],typeof n=="function"?n:null)}var be=Symbol.for("react.client.reference");function Ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===be?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case ee:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case P:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Q:return s=n.displayName||null,s!==null?s:Ye(n.type)||"Memo";case re:s=n._payload,n=n._init;try{return Ye(n(s))}catch{}}return null}var Qe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},X=[],ce=-1;function x(n){return{current:n}}function F(n){0>ce||(n.current=X[ce],X[ce]=null,ce--)}function G(n,s){ce++,X[ce]=n.current,n.current=s}var j=x(null),fe=x(null),me=x(null),Re=x(null);function ht(n,s){switch(G(me,s),G(fe,n),G(j,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?yg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=yg(s),n=vg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(j),G(j,n)}function Je(){F(j),F(fe),F(me)}function Gi(n){n.memoizedState!==null&&G(Re,n);var s=j.current,a=vg(s,n.type);s!==a&&(G(fe,n),G(j,a))}function go(n){fe.current===n&&(F(j),F(fe)),Re.current===n&&(F(Re),_r._currentValue=ie)}var yo,Wr;function ai(n){if(yo===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);yo=s&&s[1]||"",Wr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yo+n+Wr}var Rs=!1;function Ns(n,s){if(!n||Rs)return"";Rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(z){var q=z}Reflect.construct(n,[],Y)}else{try{Y.call()}catch(z){q=z}n.call(Y.prototype)}}else{try{throw Error()}catch(z){q=z}(Y=n())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(z){if(z&&q&&typeof z.stack=="string")return[z.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],A=v[1];if(S&&A){var N=S.split(`
`),O=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===O.length)for(u=N.length-1,g=O.length-1;1<=u&&0<=g&&N[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==O[g]){var V=`
`+N[u].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=u&&0<=g);break}}}finally{Rs=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ai(a):""}function tt(n,s){switch(n.tag){case 26:case 27:case 5:return ai(n.type);case 16:return ai("Lazy");case 13:return n.child!==s&&s!==null?ai("Suspense Fallback"):ai("Suspense");case 19:return ai("SuspenseList");case 0:case 15:return Ns(n.type,!1);case 11:return Ns(n.type.render,!1);case 1:return Ns(n.type,!0);case 31:return ai("Activity");default:return""}}function xs(n){try{var s="",a=null;do s+=tt(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jr=Object.prototype.hasOwnProperty,Vt=t.unstable_scheduleCallback,Is=t.unstable_cancelCallback,tu=t.unstable_shouldYield,ea=t.unstable_requestPaint,Mt=t.unstable_now,ta=t.unstable_getCurrentPriorityLevel,Ds=t.unstable_ImmediatePriority,na=t.unstable_UserBlockingPriority,vo=t.unstable_NormalPriority,nu=t.unstable_LowPriority,ia=t.unstable_IdlePriority,iu=t.log,oa=t.unstable_setDisableYieldValue,Hi=null,wt=null;function Tn(n){if(typeof iu=="function"&&oa(n),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Hi,n)}catch{}}var Rt=Math.clz32?Math.clz32:ru,ou=Math.log,su=Math.LN2;function ru(n){return n>>>=0,n===0?32:31-(ou(n)/su|0)|0}var _o=256,Us=262144,To=4194304;function K(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function de(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?g=K(u):(S&=A,S!==0?g=K(S):a||(a=A&~n,a!==0&&(g=K(a))))):(A=u&~v,A!==0?g=K(A):S!==0?g=K(S):a||(a=u&~n,a!==0&&(g=K(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function ve(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ge(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(){var n=To;return To<<=1,(To&62914560)===0&&(To=4194304),n}function Ct(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Nn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zi(n,s,a,u,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,N=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var V=31-Rt(a),Y=1<<V;A[V]=0,N[V]=-1;var q=O[V];if(q!==null)for(O[V]=null,V=0;V<q.length;V++){var z=q[V];z!==null&&(z.lane&=-536870913)}a&=~Y}u!==0&&sa(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function sa(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Rt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Sn(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-Rt(a),g=1<<u;g&s|n[u]&s&&(n[u]|=s),a&=~g}}function Vi(n,s){var a=s&-s;return a=(a&42)!==0?1:au(a),(a&(n.suspendedLanes|s))!==0?0:a}function au(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function lu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nh(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:zg(n.type))}function ih(n,s){var a=Z.p;try{return Z.p=n,s()}finally{Z.p=a}}var li=Math.random().toString(36).slice(2),pt="__reactFiber$"+li,It="__reactProps$"+li,So="__reactContainer$"+li,uu="__reactEvents$"+li,mT="__reactListeners$"+li,gT="__reactHandles$"+li,oh="__reactResources$"+li,Ps="__reactMarker$"+li;function cu(n){delete n[pt],delete n[It],delete n[uu],delete n[mT],delete n[gT]}function Eo(n){var s=n[pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[So]||a[pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=bg(n);n!==null;){if(a=n[pt])return a;n=bg(n)}return s}n=a,a=n.parentNode}return null}function Co(n){if(n=n[pt]||n[So]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ls(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function Ao(n){var s=n[oh];return s||(s=n[oh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ut(n){n[Ps]=!0}var sh=new Set,rh={};function Bi(n,s){bo(n,s),bo(n+"Capture",s)}function bo(n,s){for(rh[n]=s,n=0;n<s.length;n++)sh.add(s[n])}var yT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ah={},lh={};function vT(n){return jr.call(lh,n)?!0:jr.call(ah,n)?!1:yT.test(n)?lh[n]=!0:(ah[n]=!0,!1)}function ra(n,s,a){if(vT(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function aa(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function xn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function Wt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function uh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _T(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function du(n){if(!n._valueTracker){var s=uh(n)?"checked":"value";n._valueTracker=_T(n,s,""+n[s])}}function ch(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=uh(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function la(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var TT=/[\n"\\]/g;function jt(n){return n.replace(TT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fu(n,s,a,u,g,v,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Wt(s)):n.value!==""+Wt(s)&&(n.value=""+Wt(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?hu(n,S,Wt(s)):a!=null?hu(n,S,Wt(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Wt(A):n.removeAttribute("name")}function dh(n,s,a,u,g,v,S,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){du(n);return}a=a!=null?""+Wt(a):"",s=s!=null?""+Wt(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),du(n)}function hu(n,s,a){s==="number"&&la(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Mo(n,s,a,u){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Wt(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function fh(n,s,a){if(s!=null&&(s=""+Wt(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Wt(a):""}function hh(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(Qe(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Wt(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),du(n)}function wo(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ST=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ph(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||ST.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function mh(n,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&ph(n,g,u)}else for(var v in s)s.hasOwnProperty(v)&&ph(n,v,s[v])}function pu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ET=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(n){return CT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function In(){}var mu=null;function gu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ro=null,No=null;function gh(n){var s=Co(n);if(s&&(n=s.stateNode)){var a=n[It]||null;e:switch(n=s.stateNode,s.type){case"input":if(fu(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var g=u[It]||null;if(!g)throw Error(o(90));fu(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&ch(u)}break e;case"textarea":fh(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Mo(n,!!a.multiple,s,!1)}}}var yu=!1;function yh(n,s,a){if(yu)return n(s,a);yu=!0;try{var u=n(s);return u}finally{if(yu=!1,(Ro!==null||No!==null)&&(Xa(),Ro&&(s=Ro,n=No,No=Ro=null,gh(s),n)))for(s=0;s<n.length;s++)gh(n[s])}}function ks(n,s){var a=n.stateNode;if(a===null)return null;var u=a[It]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(Dn)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){vu=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{vu=!1}var ui=null,_u=null,ca=null;function vh(){if(ca)return ca;var n,s=_u,a=s.length,u,g="value"in ui?ui.value:ui.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&s[a-u]===g[v-u];u++);return ca=g.slice(n,1<u?1-u:void 0)}function da(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function fa(){return!0}function _h(){return!1}function Dt(n){function s(a,u,g,v,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fa:_h,this.isPropagationStopped=_h,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),s}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Dt(Fi),qs=_({},Fi,{view:0,detail:0}),AT=Dt(qs),Tu,Su,Gs,pa=_({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gs&&(Gs&&n.type==="mousemove"?(Tu=n.screenX-Gs.screenX,Su=n.screenY-Gs.screenY):Su=Tu=0,Gs=n),Tu)},movementY:function(n){return"movementY"in n?n.movementY:Su}}),Th=Dt(pa),bT=_({},pa,{dataTransfer:0}),MT=Dt(bT),wT=_({},qs,{relatedTarget:0}),Eu=Dt(wT),RT=_({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),NT=Dt(RT),xT=_({},Fi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),IT=Dt(xT),DT=_({},Fi,{data:0}),Sh=Dt(DT),UT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=LT[n])?!!s[n]:!1}function Cu(){return kT}var OT=_({},qs,{key:function(n){if(n.key){var s=UT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=da(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?PT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cu,charCode:function(n){return n.type==="keypress"?da(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?da(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qT=Dt(OT),GT=_({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=Dt(GT),HT=_({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cu}),zT=Dt(HT),VT=_({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),BT=Dt(VT),FT=_({},pa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$T=Dt(FT),YT=_({},Fi,{newState:0,oldState:0}),JT=Dt(YT),KT=[9,13,27,32],Au=Dn&&"CompositionEvent"in window,Hs=null;Dn&&"documentMode"in document&&(Hs=document.documentMode);var QT=Dn&&"TextEvent"in window&&!Hs,Ch=Dn&&(!Au||Hs&&8<Hs&&11>=Hs),Ah=" ",bh=!1;function Mh(n,s){switch(n){case"keyup":return KT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xo=!1;function XT(n,s){switch(n){case"compositionend":return wh(s);case"keypress":return s.which!==32?null:(bh=!0,Ah);case"textInput":return n=s.data,n===Ah&&bh?null:n;default:return null}}function ZT(n,s){if(xo)return n==="compositionend"||!Au&&Mh(n,s)?(n=vh(),ca=_u=ui=null,xo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ch&&s.locale!=="ko"?null:s.data;default:return null}}var WT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!WT[n.type]:s==="textarea"}function Nh(n,s,a,u){Ro?No?No.push(u):No=[u]:Ro=u,s=il(s,"onChange"),0<s.length&&(a=new ha("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var zs=null,Vs=null;function jT(n){dg(n,0)}function ma(n){var s=Ls(n);if(ch(s))return n}function xh(n,s){if(n==="change")return s}var Ih=!1;if(Dn){var bu;if(Dn){var Mu="oninput"in document;if(!Mu){var Dh=document.createElement("div");Dh.setAttribute("oninput","return;"),Mu=typeof Dh.oninput=="function"}bu=Mu}else bu=!1;Ih=bu&&(!document.documentMode||9<document.documentMode)}function Uh(){zs&&(zs.detachEvent("onpropertychange",Ph),Vs=zs=null)}function Ph(n){if(n.propertyName==="value"&&ma(Vs)){var s=[];Nh(s,Vs,n,gu(n)),yh(jT,s)}}function eS(n,s,a){n==="focusin"?(Uh(),zs=s,Vs=a,zs.attachEvent("onpropertychange",Ph)):n==="focusout"&&Uh()}function tS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ma(Vs)}function nS(n,s){if(n==="click")return ma(s)}function iS(n,s){if(n==="input"||n==="change")return ma(s)}function oS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Bt=typeof Object.is=="function"?Object.is:oS;function Bs(n,s){if(Bt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!jr.call(s,g)||!Bt(n[g],s[g]))return!1}return!0}function Lh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kh(n,s){var a=Lh(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lh(a)}}function Oh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Oh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function qh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=la(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=la(n.document)}return s}function wu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var sS=Dn&&"documentMode"in document&&11>=document.documentMode,Io=null,Ru=null,Fs=null,Nu=!1;function Gh(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nu||Io==null||Io!==la(u)||(u=Io,"selectionStart"in u&&wu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fs&&Bs(Fs,u)||(Fs=u,u=il(Ru,"onSelect"),0<u.length&&(s=new ha("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=Io)))}function $i(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Do={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},xu={},Hh={};Dn&&(Hh=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Yi(n){if(xu[n])return xu[n];if(!Do[n])return n;var s=Do[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Hh)return xu[n]=s[a];return n}var zh=Yi("animationend"),Vh=Yi("animationiteration"),Bh=Yi("animationstart"),rS=Yi("transitionrun"),aS=Yi("transitionstart"),lS=Yi("transitioncancel"),Fh=Yi("transitionend"),$h=new Map,Iu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Iu.push("scrollEnd");function fn(n,s){$h.set(n,s),Bi(s,[n])}var ga=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},en=[],Uo=0,Du=0;function ya(){for(var n=Uo,s=Du=Uo=0;s<n;){var a=en[s];en[s++]=null;var u=en[s];en[s++]=null;var g=en[s];en[s++]=null;var v=en[s];if(en[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&Yh(a,g,v)}}function va(n,s,a,u){en[Uo++]=n,en[Uo++]=s,en[Uo++]=a,en[Uo++]=u,Du|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Uu(n,s,a,u){return va(n,s,a,u),_a(n)}function Ji(n,s){return va(n,null,null,s),_a(n)}function Yh(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-Rt(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function _a(n){if(50<fr)throw fr=0,Vc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Po={};function uS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(n,s,a,u){return new uS(n,s,a,u)}function Pu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Un(n,s){var a=n.alternate;return a===null?(a=Ft(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Jh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ta(n,s,a,u,g,v){var S=0;if(u=n,typeof n=="function")Pu(n)&&(S=1);else if(typeof n=="string")S=pE(n,a,j.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ee:return n=Ft(31,a,s,g),n.elementType=ee,n.lanes=v,n;case M:return Ki(a.children,g,v,s);case w:S=8,g|=24;break;case R:return n=Ft(12,a,s,g|2),n.elementType=R,n.lanes=v,n;case B:return n=Ft(13,a,s,g),n.elementType=B,n.lanes=v,n;case W:return n=Ft(19,a,s,g),n.elementType=W,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:S=10;break e;case D:S=9;break e;case J:S=11;break e;case Q:S=14;break e;case re:S=16,u=null;break e}S=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=Ft(S,a,s,g),s.elementType=n,s.type=u,s.lanes=v,s}function Ki(n,s,a,u){return n=Ft(7,n,u,s),n.lanes=a,n}function Lu(n,s,a){return n=Ft(6,n,null,s),n.lanes=a,n}function Kh(n){var s=Ft(18,null,null,0);return s.stateNode=n,s}function ku(n,s,a){return s=Ft(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Qh=new WeakMap;function tn(n,s){if(typeof n=="object"&&n!==null){var a=Qh.get(n);return a!==void 0?a:(s={value:n,source:s,stack:xs(s)},Qh.set(n,s),s)}return{value:n,source:s,stack:xs(s)}}var Lo=[],ko=0,Sa=null,$s=0,nn=[],on=0,ci=null,En=1,Cn="";function Pn(n,s){Lo[ko++]=$s,Lo[ko++]=Sa,Sa=n,$s=s}function Xh(n,s,a){nn[on++]=En,nn[on++]=Cn,nn[on++]=ci,ci=n;var u=En;n=Cn;var g=32-Rt(u)-1;u&=~(1<<g),a+=1;var v=32-Rt(s)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,En=1<<32-Rt(s)+g|a<<g|u,Cn=v+n}else En=1<<v|a<<g|u,Cn=n}function Ou(n){n.return!==null&&(Pn(n,1),Xh(n,1,0))}function qu(n){for(;n===Sa;)Sa=Lo[--ko],Lo[ko]=null,$s=Lo[--ko],Lo[ko]=null;for(;n===ci;)ci=nn[--on],nn[on]=null,Cn=nn[--on],nn[on]=null,En=nn[--on],nn[on]=null}function Zh(n,s){nn[on++]=En,nn[on++]=Cn,nn[on++]=ci,En=s.id,Cn=s.overflow,ci=n}var mt=null,He=null,Me=!1,di=null,sn=!1,Gu=Error(o(519));function fi(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ys(tn(s,n)),Gu}function Wh(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[pt]=n,s[It]=u,a){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(a=0;a<pr.length;a++)Te(pr[a],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),dh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),hh(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||mg(s.textContent,a)?(u.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),u.onScroll!=null&&Te("scroll",s),u.onScrollEnd!=null&&Te("scrollend",s),u.onClick!=null&&(s.onclick=In),s=!0):s=!1,s||fi(n,!0)}function jh(n){for(mt=n.return;mt;)switch(mt.tag){case 5:case 31:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:mt=mt.return}}function Oo(n){if(n!==mt)return!1;if(!Me)return jh(n),Me=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||id(n.type,n.memoizedProps)),a=!a),a&&He&&fi(n),jh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));He=Ag(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));He=Ag(n)}else s===27?(s=He,Mi(n.type)?(n=ld,ld=null,He=n):He=s):He=mt?an(n.stateNode.nextSibling):null;return!0}function Qi(){He=mt=null,Me=!1}function Hu(){var n=di;return n!==null&&(kt===null?kt=n:kt.push.apply(kt,n),di=null),n}function Ys(n){di===null?di=[n]:di.push(n)}var zu=x(null),Xi=null,Ln=null;function hi(n,s,a){G(zu,s._currentValue),s._currentValue=a}function kn(n){n._currentValue=zu.current,F(zu)}function Vu(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Bu(n,s,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=g;for(var N=0;N<s.length;N++)if(A.context===s[N]){v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Vu(v.return,a,n),u||(S=null);break e}v=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),Vu(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function qo(n,s,a,u){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;Bt(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===Re.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(_r):n=[_r])}g=g.return}n!==null&&Bu(s,n,a,u),s.flags|=262144}function Ea(n){for(n=n.firstContext;n!==null;){if(!Bt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Zi(n){Xi=n,Ln=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function gt(n){return ep(Xi,n)}function Ca(n,s){return Xi===null&&Zi(n),ep(n,s)}function ep(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ln===null){if(n===null)throw Error(o(308));Ln=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ln=Ln.next=s;return a}var cS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},dS=t.unstable_scheduleCallback,fS=t.unstable_NormalPriority,nt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fu(){return{controller:new cS,data:new Map,refCount:0}}function Js(n){n.refCount--,n.refCount===0&&dS(fS,function(){n.controller.abort()})}var Ks=null,$u=0,Go=0,Ho=null;function hS(n,s){if(Ks===null){var a=Ks=[];$u=0,Go=Kc(),Ho={status:"pending",value:void 0,then:function(u){a.push(u)}}}return $u++,s.then(tp,tp),s}function tp(){if(--$u===0&&Ks!==null){Ho!==null&&(Ho.status="fulfilled");var n=Ks;Ks=null,Go=0,Ho=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function pS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var np=H.S;H.S=function(n,s){Gm=Mt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hS(n,s),np!==null&&np(n,s)};var Wi=x(null);function Yu(){var n=Wi.current;return n!==null?n:qe.pooledCache}function Aa(n,s){s===null?G(Wi,Wi.current):G(Wi,s.pool)}function ip(){var n=Yu();return n===null?null:{parent:nt._currentValue,pool:n}}var zo=Error(o(460)),Ju=Error(o(474)),ba=Error(o(542)),Ma={then:function(){}};function op(n){return n=n.status,n==="fulfilled"||n==="rejected"}function sp(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(In,In),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ap(n),n;default:if(typeof s.status=="string")s.then(In,In);else{if(n=qe,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ap(n),n}throw eo=s,zo}}function ji(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(eo=a,zo):a}}var eo=null;function rp(){if(eo===null)throw Error(o(459));var n=eo;return eo=null,n}function ap(n){if(n===zo||n===ba)throw Error(o(483))}var Vo=null,Qs=0;function wa(n){var s=Qs;return Qs+=1,Vo===null&&(Vo=[]),sp(Vo,n,s)}function Xs(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Ra(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function lp(n){function s(L,I){if(n){var k=L.deletions;k===null?(L.deletions=[I],L.flags|=16):k.push(I)}}function a(L,I){if(!n)return null;for(;I!==null;)s(L,I),I=I.sibling;return null}function u(L){for(var I=new Map;L!==null;)L.key!==null?I.set(L.key,L):I.set(L.index,L),L=L.sibling;return I}function g(L,I){return L=Un(L,I),L.index=0,L.sibling=null,L}function v(L,I,k){return L.index=k,n?(k=L.alternate,k!==null?(k=k.index,k<I?(L.flags|=67108866,I):k):(L.flags|=67108866,I)):(L.flags|=1048576,I)}function S(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,I,k,$){return I===null||I.tag!==6?(I=Lu(k,L.mode,$),I.return=L,I):(I=g(I,k),I.return=L,I)}function N(L,I,k,$){var ae=k.type;return ae===M?V(L,I,k.props.children,$,k.key):I!==null&&(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===re&&ji(ae)===I.type)?(I=g(I,k.props),Xs(I,k),I.return=L,I):(I=Ta(k.type,k.key,k.props,null,L.mode,$),Xs(I,k),I.return=L,I)}function O(L,I,k,$){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=ku(k,L.mode,$),I.return=L,I):(I=g(I,k.children||[]),I.return=L,I)}function V(L,I,k,$,ae){return I===null||I.tag!==7?(I=Ki(k,L.mode,$,ae),I.return=L,I):(I=g(I,k),I.return=L,I)}function Y(L,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Lu(""+I,L.mode,k),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case C:return k=Ta(I.type,I.key,I.props,null,L.mode,k),Xs(k,I),k.return=L,k;case b:return I=ku(I,L.mode,k),I.return=L,I;case re:return I=ji(I),Y(L,I,k)}if(Qe(I)||oe(I))return I=Ki(I,L.mode,k,null),I.return=L,I;if(typeof I.then=="function")return Y(L,wa(I),k);if(I.$$typeof===P)return Y(L,Ca(L,I),k);Ra(L,I)}return null}function q(L,I,k,$){var ae=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ae!==null?null:A(L,I,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===ae?N(L,I,k,$):null;case b:return k.key===ae?O(L,I,k,$):null;case re:return k=ji(k),q(L,I,k,$)}if(Qe(k)||oe(k))return ae!==null?null:V(L,I,k,$,null);if(typeof k.then=="function")return q(L,I,wa(k),$);if(k.$$typeof===P)return q(L,I,Ca(L,k),$);Ra(L,k)}return null}function z(L,I,k,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(k)||null,A(I,L,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return L=L.get($.key===null?k:$.key)||null,N(I,L,$,ae);case b:return L=L.get($.key===null?k:$.key)||null,O(I,L,$,ae);case re:return $=ji($),z(L,I,k,$,ae)}if(Qe($)||oe($))return L=L.get(k)||null,V(I,L,$,ae,null);if(typeof $.then=="function")return z(L,I,k,wa($),ae);if($.$$typeof===P)return z(L,I,k,Ca(I,$),ae);Ra(I,$)}return null}function ne(L,I,k,$){for(var ae=null,Ne=null,se=I,ye=I=0,Ce=null;se!==null&&ye<k.length;ye++){se.index>ye?(Ce=se,se=null):Ce=se.sibling;var xe=q(L,se,k[ye],$);if(xe===null){se===null&&(se=Ce);break}n&&se&&xe.alternate===null&&s(L,se),I=v(xe,I,ye),Ne===null?ae=xe:Ne.sibling=xe,Ne=xe,se=Ce}if(ye===k.length)return a(L,se),Me&&Pn(L,ye),ae;if(se===null){for(;ye<k.length;ye++)se=Y(L,k[ye],$),se!==null&&(I=v(se,I,ye),Ne===null?ae=se:Ne.sibling=se,Ne=se);return Me&&Pn(L,ye),ae}for(se=u(se);ye<k.length;ye++)Ce=z(se,L,ye,k[ye],$),Ce!==null&&(n&&Ce.alternate!==null&&se.delete(Ce.key===null?ye:Ce.key),I=v(Ce,I,ye),Ne===null?ae=Ce:Ne.sibling=Ce,Ne=Ce);return n&&se.forEach(function(Ii){return s(L,Ii)}),Me&&Pn(L,ye),ae}function ue(L,I,k,$){if(k==null)throw Error(o(151));for(var ae=null,Ne=null,se=I,ye=I=0,Ce=null,xe=k.next();se!==null&&!xe.done;ye++,xe=k.next()){se.index>ye?(Ce=se,se=null):Ce=se.sibling;var Ii=q(L,se,xe.value,$);if(Ii===null){se===null&&(se=Ce);break}n&&se&&Ii.alternate===null&&s(L,se),I=v(Ii,I,ye),Ne===null?ae=Ii:Ne.sibling=Ii,Ne=Ii,se=Ce}if(xe.done)return a(L,se),Me&&Pn(L,ye),ae;if(se===null){for(;!xe.done;ye++,xe=k.next())xe=Y(L,xe.value,$),xe!==null&&(I=v(xe,I,ye),Ne===null?ae=xe:Ne.sibling=xe,Ne=xe);return Me&&Pn(L,ye),ae}for(se=u(se);!xe.done;ye++,xe=k.next())xe=z(se,L,ye,xe.value,$),xe!==null&&(n&&xe.alternate!==null&&se.delete(xe.key===null?ye:xe.key),I=v(xe,I,ye),Ne===null?ae=xe:Ne.sibling=xe,Ne=xe);return n&&se.forEach(function(bE){return s(L,bE)}),Me&&Pn(L,ye),ae}function Oe(L,I,k,$){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:e:{for(var ae=k.key;I!==null;){if(I.key===ae){if(ae=k.type,ae===M){if(I.tag===7){a(L,I.sibling),$=g(I,k.props.children),$.return=L,L=$;break e}}else if(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===re&&ji(ae)===I.type){a(L,I.sibling),$=g(I,k.props),Xs($,k),$.return=L,L=$;break e}a(L,I);break}else s(L,I);I=I.sibling}k.type===M?($=Ki(k.props.children,L.mode,$,k.key),$.return=L,L=$):($=Ta(k.type,k.key,k.props,null,L.mode,$),Xs($,k),$.return=L,L=$)}return S(L);case b:e:{for(ae=k.key;I!==null;){if(I.key===ae)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){a(L,I.sibling),$=g(I,k.children||[]),$.return=L,L=$;break e}else{a(L,I);break}else s(L,I);I=I.sibling}$=ku(k,L.mode,$),$.return=L,L=$}return S(L);case re:return k=ji(k),Oe(L,I,k,$)}if(Qe(k))return ne(L,I,k,$);if(oe(k)){if(ae=oe(k),typeof ae!="function")throw Error(o(150));return k=ae.call(k),ue(L,I,k,$)}if(typeof k.then=="function")return Oe(L,I,wa(k),$);if(k.$$typeof===P)return Oe(L,I,Ca(L,k),$);Ra(L,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,I!==null&&I.tag===6?(a(L,I.sibling),$=g(I,k),$.return=L,L=$):(a(L,I),$=Lu(k,L.mode,$),$.return=L,L=$),S(L)):a(L,I)}return function(L,I,k,$){try{Qs=0;var ae=Oe(L,I,k,$);return Vo=null,ae}catch(se){if(se===zo||se===ba)throw se;var Ne=Ft(29,se,null,L.mode);return Ne.lanes=$,Ne.return=L,Ne}finally{}}}var to=lp(!0),up=lp(!1),pi=!1;function Ku(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function mi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gi(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=_a(n),Yh(n,null,a),s}return va(n,u,s,a),_a(n)}function Zs(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Sn(n,a)}}function Xu(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Zu=!1;function Ws(){if(Zu){var n=Ho;if(n!==null)throw n}}function js(n,s,a,u){Zu=!1;var g=n.updateQueue;pi=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,O=N.next;N.next=null,S===null?v=O:S.next=O,S=N;var V=n.alternate;V!==null&&(V=V.updateQueue,A=V.lastBaseUpdate,A!==S&&(A===null?V.firstBaseUpdate=O:A.next=O,V.lastBaseUpdate=N))}if(v!==null){var Y=g.baseState;S=0,V=O=N=null,A=v;do{var q=A.lane&-536870913,z=q!==A.lane;if(z?(Ee&q)===q:(u&q)===q){q!==0&&q===Go&&(Zu=!0),V!==null&&(V=V.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ne=n,ue=A;q=s;var Oe=a;switch(ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){Y=ne.call(Oe,Y,q);break e}Y=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ue.payload,q=typeof ne=="function"?ne.call(Oe,Y,q):ne,q==null)break e;Y=_({},Y,q);break e;case 2:pi=!0}}q=A.callback,q!==null&&(n.flags|=64,z&&(n.flags|=8192),z=g.callbacks,z===null?g.callbacks=[q]:z.push(q))}else z={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},V===null?(O=V=z,N=Y):V=V.next=z,S|=q;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;z=A,A=z.next,z.next=null,g.lastBaseUpdate=z,g.shared.pending=null}}while(!0);V===null&&(N=Y),g.baseState=N,g.firstBaseUpdate=O,g.lastBaseUpdate=V,v===null&&(g.shared.lanes=0),Si|=S,n.lanes=S,n.memoizedState=Y}}function cp(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function dp(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)cp(a[n],s)}var Bo=x(null),Na=x(0);function fp(n,s){n=$n,G(Na,n),G(Bo,s),$n=n|s.baseLanes}function Wu(){G(Na,$n),G(Bo,Bo.current)}function ju(){$n=Na.current,F(Bo),F(Na)}var $t=x(null),rn=null;function yi(n){var s=n.alternate;G(We,We.current&1),G($t,n),rn===null&&(s===null||Bo.current!==null||s.memoizedState!==null)&&(rn=n)}function ec(n){G(We,We.current),G($t,n),rn===null&&(rn=n)}function hp(n){n.tag===22?(G(We,We.current),G($t,n),rn===null&&(rn=n)):vi()}function vi(){G(We,We.current),G($t,$t.current)}function Yt(n){F($t),rn===n&&(rn=null),F(We)}var We=x(0);function xa(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||rd(a)||ad(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var On=0,ge=null,Le=null,it=null,Ia=!1,Fo=!1,no=!1,Da=0,er=0,$o=null,mS=0;function Xe(){throw Error(o(321))}function tc(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Bt(n[a],s[a]))return!1;return!0}function nc(n,s,a,u,g,v){return On=v,ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?Xp:yc,no=!1,v=a(u,g),no=!1,Fo&&(v=mp(s,a,u,g)),pp(n),v}function pp(n){H.H=ir;var s=Le!==null&&Le.next!==null;if(On=0,it=Le=ge=null,Ia=!1,er=0,$o=null,s)throw Error(o(300));n===null||ot||(n=n.dependencies,n!==null&&Ea(n)&&(ot=!0))}function mp(n,s,a,u){ge=n;var g=0;do{if(Fo&&($o=null),er=0,Fo=!1,25<=g)throw Error(o(301));if(g+=1,it=Le=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=Zp,v=s(a,u)}while(Fo);return v}function gS(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?tr(s):s,n=n.useState()[0],(Le!==null?Le.memoizedState:null)!==n&&(ge.flags|=1024),s}function ic(){var n=Da!==0;return Da=0,n}function oc(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function sc(n){if(Ia){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ia=!1}On=0,it=Le=ge=null,Fo=!1,er=Da=0,$o=null}function Nt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ge.memoizedState=it=n:it=it.next=n,it}function je(){if(Le===null){var n=ge.alternate;n=n!==null?n.memoizedState:null}else n=Le.next;var s=it===null?ge.memoizedState:it.next;if(s!==null)it=s,Le=n;else{if(n===null)throw ge.alternate===null?Error(o(467)):Error(o(310));Le=n,n={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},it===null?ge.memoizedState=it=n:it=it.next=n}return it}function Ua(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tr(n){var s=er;return er+=1,$o===null&&($o=[]),n=sp($o,n,s),s=ge,(it===null?s.memoizedState:it.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Xp:yc),n}function Pa(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return tr(n);if(n.$$typeof===P)return gt(n)}throw Error(o(438,String(n)))}function rc(n){var s=null,a=ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=ge.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ua(),ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=le;return s.index++,a}function qn(n,s){return typeof s=="function"?s(n):s}function La(n){var s=je();return ac(s,Le,n)}function ac(n,s,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var A=S=null,N=null,O=s,V=!1;do{var Y=O.lane&-536870913;if(Y!==O.lane?(Ee&Y)===Y:(On&Y)===Y){var q=O.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),Y===Go&&(V=!0);else if((On&q)===q){O=O.next,q===Go&&(V=!0);continue}else Y={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=Y,S=v):N=N.next=Y,ge.lanes|=q,Si|=q;Y=O.action,no&&a(v,Y),v=O.hasEagerState?O.eagerState:a(v,Y)}else q={lane:Y,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=q,S=v):N=N.next=q,ge.lanes|=Y,Si|=Y;O=O.next}while(O!==null&&O!==s);if(N===null?S=v:N.next=A,!Bt(v,n.memoizedState)&&(ot=!0,V&&(a=Ho,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=N,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function lc(n){var s=je(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);Bt(v,s.memoizedState)||(ot=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function gp(n,s,a){var u=ge,g=je(),v=Me;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!Bt((Le||g).memoizedState,a);if(S&&(g.memoizedState=a,ot=!0),g=g.queue,dc(_p.bind(null,u,g,n),[n]),g.getSnapshot!==s||S||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,Yo(9,{destroy:void 0},vp.bind(null,u,g,a,s),null),qe===null)throw Error(o(349));v||(On&127)!==0||yp(u,s,a)}return a}function yp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ge.updateQueue,s===null?(s=Ua(),ge.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function vp(n,s,a,u){s.value=a,s.getSnapshot=u,Tp(s)&&Sp(n)}function _p(n,s,a){return a(function(){Tp(s)&&Sp(n)})}function Tp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Bt(n,a)}catch{return!0}}function Sp(n){var s=Ji(n,2);s!==null&&Ot(s,n,2)}function uc(n){var s=Nt();if(typeof n=="function"){var a=n;if(n=a(),no){Tn(!0);try{a()}finally{Tn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},s}function Ep(n,s,a,u){return n.baseState=a,ac(n,Le,typeof u=="function"?u:qn)}function yS(n,s,a,u,g){if(qa(n))throw Error(o(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};H.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,Cp(s,v)):(v.next=a.next,s.pending=a.next=v)}}function Cp(n,s){var a=s.action,u=s.payload,g=n.state;if(s.isTransition){var v=H.T,S={};H.T=S;try{var A=a(g,u),N=H.S;N!==null&&N(S,A),Ap(n,s,A)}catch(O){cc(n,s,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),H.T=v}}else try{v=a(g,u),Ap(n,s,v)}catch(O){cc(n,s,O)}}function Ap(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){bp(n,s,u)},function(u){return cc(n,s,u)}):bp(n,s,a)}function bp(n,s,a){s.status="fulfilled",s.value=a,Mp(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,Cp(n,a)))}function cc(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Mp(s),s=s.next;while(s!==u)}n.action=null}function Mp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function wp(n,s){return s}function Rp(n,s){if(Me){var a=qe.formState;if(a!==null){e:{var u=ge;if(Me){if(He){t:{for(var g=He,v=sn;g.nodeType!==8;){if(!v){g=null;break t}if(g=an(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){He=an(g.nextSibling),u=g.data==="F!";break e}}fi(u)}u=!1}u&&(s=a[0])}}return a=Nt(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:s},a.queue=u,a=Jp.bind(null,ge,u),u.dispatch=a,u=uc(!1),v=gc.bind(null,ge,!1,u.queue),u=Nt(),g={state:s,dispatch:null,action:n,pending:null},u.queue=g,a=yS.bind(null,ge,g,v,a),g.dispatch=a,u.memoizedState=n,[s,a,!1]}function Np(n){var s=je();return xp(s,Le,n)}function xp(n,s,a){if(s=ac(n,s,wp)[0],n=La(qn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=tr(s)}catch(S){throw S===zo?ba:S}else u=s;s=je();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(ge.flags|=2048,Yo(9,{destroy:void 0},vS.bind(null,g,a),null)),[u,v,n]}function vS(n,s){n.action=s}function Ip(n){var s=je(),a=Le;if(a!==null)return xp(s,a,n);je(),s=s.memoizedState,a=je();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Yo(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=ge.updateQueue,s===null&&(s=Ua(),ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function Dp(){return je().memoizedState}function ka(n,s,a,u){var g=Nt();ge.flags|=n,g.memoizedState=Yo(1|s,{destroy:void 0},a,u===void 0?null:u)}function Oa(n,s,a,u){var g=je();u=u===void 0?null:u;var v=g.memoizedState.inst;Le!==null&&u!==null&&tc(u,Le.memoizedState.deps)?g.memoizedState=Yo(s,v,a,u):(ge.flags|=n,g.memoizedState=Yo(1|s,v,a,u))}function Up(n,s){ka(8390656,8,n,s)}function dc(n,s){Oa(2048,8,n,s)}function _S(n){ge.flags|=4;var s=ge.updateQueue;if(s===null)s=Ua(),ge.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Pp(n){var s=je().memoizedState;return _S({ref:s,nextImpl:n}),function(){if((De&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Lp(n,s){return Oa(4,2,n,s)}function kp(n,s){return Oa(4,4,n,s)}function Op(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function qp(n,s,a){a=a!=null?a.concat([n]):null,Oa(4,4,Op.bind(null,s,n),a)}function fc(){}function Gp(n,s){var a=je();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&tc(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Hp(n,s){var a=je();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&tc(s,u[1]))return u[0];if(u=n(),no){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[u,s],u}function hc(n,s,a){return a===void 0||(On&1073741824)!==0&&(Ee&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=zm(),ge.lanes|=n,Si|=n,a)}function zp(n,s,a,u){return Bt(a,s)?a:Bo.current!==null?(n=hc(n,a,u),Bt(n,s)||(ot=!0),n):(On&42)===0||(On&1073741824)!==0&&(Ee&261930)===0?(ot=!0,n.memoizedState=a):(n=zm(),ge.lanes|=n,Si|=n,s)}function Vp(n,s,a,u,g){var v=Z.p;Z.p=v!==0&&8>v?v:8;var S=H.T,A={};H.T=A,gc(n,!1,s,a);try{var N=g(),O=H.S;if(O!==null&&O(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var V=pS(N,u);nr(n,s,V,Qt(n))}else nr(n,s,u,Qt(n))}catch(Y){nr(n,s,{then:function(){},status:"rejected",reason:Y},Qt())}finally{Z.p=v,S!==null&&A.types!==null&&(S.types=A.types),H.T=S}}function TS(){}function pc(n,s,a,u){if(n.tag!==5)throw Error(o(476));var g=Bp(n).queue;Vp(n,g,s,ie,a===null?TS:function(){return Fp(n),a(u)})}function Bp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:ie},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Fp(n){var s=Bp(n);s.next===null&&(s=n.alternate.memoizedState),nr(n,s.next.queue,{},Qt())}function mc(){return gt(_r)}function $p(){return je().memoizedState}function Yp(){return je().memoizedState}function SS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Qt();n=mi(a);var u=gi(s,n,a);u!==null&&(Ot(u,s,a),Zs(u,s,a)),s={cache:Fu()},n.payload=s;return}s=s.return}}function ES(n,s,a){var u=Qt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},qa(n)?Kp(s,a):(a=Uu(n,s,a,u),a!==null&&(Ot(a,n,u),Qp(a,s,u)))}function Jp(n,s,a){var u=Qt();nr(n,s,a,u)}function nr(n,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(qa(n))Kp(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,A=v(S,a);if(g.hasEagerState=!0,g.eagerState=A,Bt(A,S))return va(n,s,g,0),qe===null&&ya(),!1}catch{}finally{}if(a=Uu(n,s,g,u),a!==null)return Ot(a,n,u),Qp(a,s,u),!0}return!1}function gc(n,s,a,u){if(u={lane:2,revertLane:Kc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qa(n)){if(s)throw Error(o(479))}else s=Uu(n,a,u,2),s!==null&&Ot(s,n,2)}function qa(n){var s=n.alternate;return n===ge||s!==null&&s===ge}function Kp(n,s){Fo=Ia=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Qp(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Sn(n,a)}}var ir={readContext:gt,use:Pa,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};ir.useEffectEvent=Xe;var Xp={readContext:gt,use:Pa,useCallback:function(n,s){return Nt().memoizedState=[n,s===void 0?null:s],n},useContext:gt,useEffect:Up,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,ka(4194308,4,Op.bind(null,s,n),a)},useLayoutEffect:function(n,s){return ka(4194308,4,n,s)},useInsertionEffect:function(n,s){ka(4,2,n,s)},useMemo:function(n,s){var a=Nt();s=s===void 0?null:s;var u=n();if(no){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=Nt();if(a!==void 0){var g=a(s);if(no){Tn(!0);try{a(s)}finally{Tn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=ES.bind(null,ge,n),[u.memoizedState,n]},useRef:function(n){var s=Nt();return n={current:n},s.memoizedState=n},useState:function(n){n=uc(n);var s=n.queue,a=Jp.bind(null,ge,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:fc,useDeferredValue:function(n,s){var a=Nt();return hc(a,n,s)},useTransition:function(){var n=uc(!1);return n=Vp.bind(null,ge,n.queue,!0,!1),Nt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=ge,g=Nt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),qe===null)throw Error(o(349));(Ee&127)!==0||yp(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,Up(_p.bind(null,u,v,n),[n]),u.flags|=2048,Yo(9,{destroy:void 0},vp.bind(null,u,v,a,s),null),a},useId:function(){var n=Nt(),s=qe.identifierPrefix;if(Me){var a=Cn,u=En;a=(u&~(1<<32-Rt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Da++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=mS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:mc,useFormState:Rp,useActionState:Rp,useOptimistic:function(n){var s=Nt();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=gc.bind(null,ge,!0,a),a.dispatch=s,[n,s]},useMemoCache:rc,useCacheRefresh:function(){return Nt().memoizedState=SS.bind(null,ge)},useEffectEvent:function(n){var s=Nt(),a={impl:n};return s.memoizedState=a,function(){if((De&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},yc={readContext:gt,use:Pa,useCallback:Gp,useContext:gt,useEffect:dc,useImperativeHandle:qp,useInsertionEffect:Lp,useLayoutEffect:kp,useMemo:Hp,useReducer:La,useRef:Dp,useState:function(){return La(qn)},useDebugValue:fc,useDeferredValue:function(n,s){var a=je();return zp(a,Le.memoizedState,n,s)},useTransition:function(){var n=La(qn)[0],s=je().memoizedState;return[typeof n=="boolean"?n:tr(n),s]},useSyncExternalStore:gp,useId:$p,useHostTransitionStatus:mc,useFormState:Np,useActionState:Np,useOptimistic:function(n,s){var a=je();return Ep(a,Le,n,s)},useMemoCache:rc,useCacheRefresh:Yp};yc.useEffectEvent=Pp;var Zp={readContext:gt,use:Pa,useCallback:Gp,useContext:gt,useEffect:dc,useImperativeHandle:qp,useInsertionEffect:Lp,useLayoutEffect:kp,useMemo:Hp,useReducer:lc,useRef:Dp,useState:function(){return lc(qn)},useDebugValue:fc,useDeferredValue:function(n,s){var a=je();return Le===null?hc(a,n,s):zp(a,Le.memoizedState,n,s)},useTransition:function(){var n=lc(qn)[0],s=je().memoizedState;return[typeof n=="boolean"?n:tr(n),s]},useSyncExternalStore:gp,useId:$p,useHostTransitionStatus:mc,useFormState:Ip,useActionState:Ip,useOptimistic:function(n,s){var a=je();return Le!==null?Ep(a,Le,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:rc,useCacheRefresh:Yp};Zp.useEffectEvent=Pp;function vc(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var _c={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Qt(),g=mi(u);g.payload=s,a!=null&&(g.callback=a),s=gi(n,g,u),s!==null&&(Ot(s,n,u),Zs(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Qt(),g=mi(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=gi(n,g,u),s!==null&&(Ot(s,n,u),Zs(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Qt(),u=mi(a);u.tag=2,s!=null&&(u.callback=s),s=gi(n,u,a),s!==null&&(Ot(s,n,a),Zs(s,n,a))}};function Wp(n,s,a,u,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,S):s.prototype&&s.prototype.isPureReactComponent?!Bs(a,u)||!Bs(g,v):!0}function jp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&_c.enqueueReplaceState(s,s.state,null)}function io(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function em(n){ga(n)}function tm(n){console.error(n)}function nm(n){ga(n)}function Ga(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function im(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Tc(n,s,a){return a=mi(a),a.tag=3,a.payload={element:null},a.callback=function(){Ga(n,s)},a}function om(n){return n=mi(n),n.tag=3,n}function sm(n,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){im(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){im(s,a,u),typeof g!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function CS(n,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&qo(s,a,g,!0),a=$t.current,a!==null){switch(a.tag){case 31:case 13:return rn===null?Za():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Ma?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),$c(n,u,g)),!1;case 22:return a.flags|=65536,u===Ma?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),$c(n,u,g)),!1}throw Error(o(435,a.tag))}return $c(n,u,g),Za(),!1}if(Me)return s=$t.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Gu&&(n=Error(o(422),{cause:u}),Ys(tn(n,a)))):(u!==Gu&&(s=Error(o(423),{cause:u}),Ys(tn(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=tn(u,a),g=Tc(n.stateNode,u,g),Xu(n,g),Ze!==4&&(Ze=2)),!1;var v=Error(o(520),{cause:u});if(v=tn(v,a),dr===null?dr=[v]:dr.push(v),Ze!==4&&(Ze=2),s===null)return!0;u=tn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=Tc(a.stateNode,u,n),Xu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ei===null||!Ei.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=om(g),sm(g,n,a,u),Xu(a,g),!1}a=a.return}while(a!==null);return!1}var Sc=Error(o(461)),ot=!1;function yt(n,s,a,u){s.child=n===null?up(s,null,a,u):to(s,n.child,a,u)}function rm(n,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return Zi(s),u=nc(n,s,a,S,v,g),A=ic(),n!==null&&!ot?(oc(n,s,g),Gn(n,s,g)):(Me&&A&&Ou(s),s.flags|=1,yt(n,s,u,g),s.child)}function am(n,s,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!Pu(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,lm(n,s,v,u,g)):(n=Ta(a.type,null,u,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Nc(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Bs,a(S,u)&&n.ref===s.ref)return Gn(n,s,g)}return s.flags|=1,n=Un(v,u),n.ref=s.ref,n.return=s,s.child=n}function lm(n,s,a,u,g){if(n!==null){var v=n.memoizedProps;if(Bs(v,u)&&n.ref===s.ref)if(ot=!1,s.pendingProps=u=v,Nc(n,g))(n.flags&131072)!==0&&(ot=!0);else return s.lanes=n.lanes,Gn(n,s,g)}return Ec(n,s,a,u,g)}function um(n,s,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=s.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return cm(n,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Aa(s,v!==null?v.cachePool:null),v!==null?fp(s,v):Wu(),hp(s);else return u=s.lanes=536870912,cm(n,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(Aa(s,v.cachePool),fp(s,v),vi(),s.memoizedState=null):(n!==null&&Aa(s,null),Wu(),vi());return yt(n,s,g,a),s.child}function or(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function cm(n,s,a,u,g){var v=Yu();return v=v===null?null:{parent:nt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&Aa(s,null),Wu(),hp(s),n!==null&&qo(n,s,u,!0),s.childLanes=g,null}function Ha(n,s){return s=Va({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function dm(n,s,a){return to(s,n.child,null,a),n=Ha(s,s.pendingProps),n.flags|=2,Yt(s),s.memoizedState=null,n}function AS(n,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(u.mode==="hidden")return n=Ha(s,u),s.lanes=536870912,or(null,n);if(ec(s),(n=He)?(n=Cg(n,sn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ci!==null?{id:En,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=Kh(n),a.return=s,s.child=a,mt=s,He=null)):n=null,n===null)throw fi(s);return s.lanes=536870912,null}return Ha(s,u)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if(ec(s),g)if(s.flags&256)s.flags&=-257,s=dm(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(ot||qo(n,s,a,!1),g=(a&n.childLanes)!==0,ot||g){if(u=qe,u!==null&&(S=Vi(u,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,Ji(n,S),Ot(u,n,S),Sc;Za(),s=dm(n,s,a)}else n=v.treeContext,He=an(S.nextSibling),mt=s,Me=!0,di=null,sn=!1,n!==null&&Zh(s,n),s=Ha(s,u),s.flags|=4096;return s}return n=Un(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function za(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Ec(n,s,a,u,g){return Zi(s),a=nc(n,s,a,u,void 0,g),u=ic(),n!==null&&!ot?(oc(n,s,g),Gn(n,s,g)):(Me&&u&&Ou(s),s.flags|=1,yt(n,s,a,g),s.child)}function fm(n,s,a,u,g,v){return Zi(s),s.updateQueue=null,a=mp(s,u,a,g),pp(n),u=ic(),n!==null&&!ot?(oc(n,s,v),Gn(n,s,v)):(Me&&u&&Ou(s),s.flags|=1,yt(n,s,a,v),s.child)}function hm(n,s,a,u,g){if(Zi(s),s.stateNode===null){var v=Po,S=a.contextType;typeof S=="object"&&S!==null&&(v=gt(S)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=_c,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Ku(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?gt(S):Po,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(vc(s,a,S,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&_c.enqueueReplaceState(v,v.state,null),js(s,u,v,g),Ws(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){v=s.stateNode;var A=s.memoizedProps,N=io(a,A);v.props=N;var O=v.context,V=a.contextType;S=Po,typeof V=="object"&&V!==null&&(S=gt(V));var Y=a.getDerivedStateFromProps;V=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,V||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||O!==S)&&jp(s,v,u,S),pi=!1;var q=s.memoizedState;v.state=q,js(s,u,v,g),Ws(),O=s.memoizedState,A||q!==O||pi?(typeof Y=="function"&&(vc(s,a,Y,u),O=s.memoizedState),(N=pi||Wp(s,a,N,u,q,O,S))?(V||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=S,u=N):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Qu(n,s),S=s.memoizedProps,V=io(a,S),v.props=V,Y=s.pendingProps,q=v.context,O=a.contextType,N=Po,typeof O=="object"&&O!==null&&(N=gt(O)),A=a.getDerivedStateFromProps,(O=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||q!==N)&&jp(s,v,u,N),pi=!1,q=s.memoizedState,v.state=q,js(s,u,v,g),Ws();var z=s.memoizedState;S!==Y||q!==z||pi||n!==null&&n.dependencies!==null&&Ea(n.dependencies)?(typeof A=="function"&&(vc(s,a,A,u),z=s.memoizedState),(V=pi||Wp(s,a,V,u,q,z,N)||n!==null&&n.dependencies!==null&&Ea(n.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,z,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,z,N)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=z),v.props=u,v.state=z,v.context=N,u=V):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),u=!1)}return v=u,za(n,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&u?(s.child=to(s,n.child,null,g),s.child=to(s,null,a,g)):yt(n,s,a,g),s.memoizedState=v.state,n=s.child):n=Gn(n,s,g),n}function pm(n,s,a,u){return Qi(),s.flags|=256,yt(n,s,a,u),s.child}var Cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ac(n){return{baseLanes:n,cachePool:ip()}}function bc(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Kt),n}function mm(n,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(We.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(g?yi(s):vi(),(n=He)?(n=Cg(n,sn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ci!==null?{id:En,overflow:Cn}:null,retryLane:536870912,hydrationErrors:null},a=Kh(n),a.return=s,s.child=a,mt=s,He=null)):n=null,n===null)throw fi(s);return ad(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(vi(),g=s.mode,A=Va({mode:"hidden",children:A},g),u=Ki(u,g,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=Ac(a),u.childLanes=bc(n,S,a),s.memoizedState=Cc,or(null,u)):(yi(s),Mc(s,A))}var N=n.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(v)s.flags&256?(yi(s),s.flags&=-257,s=wc(n,s,a)):s.memoizedState!==null?(vi(),s.child=n.child,s.flags|=128,s=null):(vi(),A=u.fallback,g=s.mode,u=Va({mode:"visible",children:u.children},g),A=Ki(A,g,a,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,to(s,n.child,null,a),u=s.child,u.memoizedState=Ac(a),u.childLanes=bc(n,S,a),s.memoizedState=Cc,s=or(null,u));else if(yi(s),ad(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(o(419)),u.stack="",u.digest=S,Ys({value:u,source:null,stack:null}),s=wc(n,s,a)}else if(ot||qo(n,s,a,!1),S=(a&n.childLanes)!==0,ot||S){if(S=qe,S!==null&&(u=Vi(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Ji(n,u),Ot(S,n,u),Sc;rd(A)||Za(),s=wc(n,s,a)}else rd(A)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,He=an(A.nextSibling),mt=s,Me=!0,di=null,sn=!1,n!==null&&Zh(s,n),s=Mc(s,u.children),s.flags|=4096);return s}return g?(vi(),A=u.fallback,g=s.mode,N=n.child,O=N.sibling,u=Un(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,O!==null?A=Un(O,A):(A=Ki(A,g,a,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,or(null,u),u=s.child,A=n.child.memoizedState,A===null?A=Ac(a):(g=A.cachePool,g!==null?(N=nt._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=ip(),A={baseLanes:A.baseLanes|a,cachePool:g}),u.memoizedState=A,u.childLanes=bc(n,S,a),s.memoizedState=Cc,or(n.child,u)):(yi(s),a=n.child,n=a.sibling,a=Un(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function Mc(n,s){return s=Va({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Va(n,s){return n=Ft(22,n,null,s),n.lanes=0,n}function wc(n,s,a){return to(s,n.child,null,a),n=Mc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function gm(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Vu(n.return,s,a)}function Rc(n,s,a,u,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function ym(n,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=We.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,G(We,S),yt(n,s,u,a),u=Me?$s:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gm(n,a,s);else if(n.tag===19)gm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&xa(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Rc(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&xa(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Rc(s,!0,a,null,v,u);break;case"together":Rc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Gn(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Si|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(qo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,a=Un(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Un(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Nc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ea(n)))}function bS(n,s,a){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),hi(s,nt,n.memoizedState.cache),Qi();break;case 27:case 5:Gi(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:hi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ec(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(yi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?mm(n,s,a):(yi(s),n=Gn(n,s,a),n!==null?n.sibling:null);yi(s);break;case 19:var g=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(qo(n,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return ym(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(We,We.current),u)break;return null;case 22:return s.lanes=0,um(n,s,a,s.pendingProps);case 24:hi(s,nt,n.memoizedState.cache)}return Gn(n,s,a)}function vm(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)ot=!0;else{if(!Nc(n,a)&&(s.flags&128)===0)return ot=!1,bS(n,s,a);ot=(n.flags&131072)!==0}else ot=!1,Me&&(s.flags&1048576)!==0&&Xh(s,$s,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=ji(s.elementType),s.type=n,typeof n=="function")Pu(n)?(u=io(n,u),s.tag=1,s=hm(null,s,n,u,a)):(s.tag=0,s=Ec(null,s,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===J){s.tag=11,s=rm(null,s,n,u,a);break e}else if(g===Q){s.tag=14,s=am(null,s,n,u,a);break e}}throw s=Ye(n)||n,Error(o(306,s,""))}}return s;case 0:return Ec(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=io(u,s.pendingProps),hm(n,s,u,g,a);case 3:e:{if(ht(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,Qu(n,s),js(s,u,null,a);var S=s.memoizedState;if(u=S.cache,hi(s,nt,u),u!==v.cache&&Bu(s,[nt],a,!0),Ws(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=pm(n,s,u,a);break e}else if(u!==g){g=tn(Error(o(424)),s),Ys(g),s=pm(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(He=an(n.firstChild),mt=s,Me=!0,di=null,sn=!0,a=up(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qi(),u===g){s=Gn(n,s,a);break e}yt(n,s,u,a)}s=s.child}return s;case 26:return za(n,s),n===null?(a=Ng(s.type,null,s.pendingProps,null))?s.memoizedState=a:Me||(a=s.type,n=s.pendingProps,u=ol(me.current).createElement(a),u[pt]=s,u[It]=n,vt(u,a,n),ut(u),s.stateNode=u):s.memoizedState=Ng(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Gi(s),n===null&&Me&&(u=s.stateNode=Mg(s.type,s.pendingProps,me.current),mt=s,sn=!0,g=He,Mi(s.type)?(ld=g,He=an(u.firstChild)):He=g),yt(n,s,s.pendingProps.children,a),za(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((g=u=He)&&(u=tE(u,s.type,s.pendingProps,sn),u!==null?(s.stateNode=u,mt=s,He=an(u.firstChild),sn=!1,g=!0):g=!1),g||fi(s)),Gi(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,u=v.children,id(g,v)?u=null:S!==null&&id(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=nc(n,s,gS,null,null,a),_r._currentValue=g),za(n,s),yt(n,s,u,a),s.child;case 6:return n===null&&Me&&((n=a=He)&&(a=nE(a,s.pendingProps,sn),a!==null?(s.stateNode=a,mt=s,He=null,n=!0):n=!1),n||fi(s)),null;case 13:return mm(n,s,a);case 4:return ht(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=to(s,null,u,a):yt(n,s,u,a),s.child;case 11:return rm(n,s,s.type,s.pendingProps,a);case 7:return yt(n,s,s.pendingProps,a),s.child;case 8:return yt(n,s,s.pendingProps.children,a),s.child;case 12:return yt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,hi(s,s.type,u.value),yt(n,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Zi(s),g=gt(g),u=u(g),s.flags|=1,yt(n,s,u,a),s.child;case 14:return am(n,s,s.type,s.pendingProps,a);case 15:return lm(n,s,s.type,s.pendingProps,a);case 19:return ym(n,s,a);case 31:return AS(n,s,a);case 22:return um(n,s,a,s.pendingProps);case 24:return Zi(s),u=gt(nt),n===null?(g=Yu(),g===null&&(g=qe,v=Fu(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},Ku(s),hi(s,nt,g)):((n.lanes&a)!==0&&(Qu(n,s),js(s,null,null,a),Ws()),g=n.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),hi(s,nt,u)):(u=v.cache,hi(s,nt,u),u!==g.cache&&Bu(s,[nt],a,!0))),yt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Hn(n){n.flags|=4}function xc(n,s,a,u,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if($m())n.flags|=8192;else throw eo=Ma,Ju}else n.flags&=-16777217}function _m(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Pg(s))if($m())n.flags|=8192;else throw eo=Ma,Ju}function Ba(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Et():536870912,n.lanes|=s,Xo|=s)}function sr(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ze(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function MS(n,s,a){var u=s.pendingProps;switch(qu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(s),null;case 1:return ze(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),kn(nt),Je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Oo(s)?Hn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Hu())),ze(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(Hn(s),v!==null?(ze(s),_m(s,v)):(ze(s),xc(s,g,null,u,a))):v?v!==n.memoizedState?(Hn(s),ze(s),_m(s,v)):(ze(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Hn(s),ze(s),xc(s,g,n,u,a)),null;case 27:if(go(s),a=me.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}n=j.current,Oo(s)?Wh(s):(n=Mg(g,u,a),s.stateNode=n,Hn(s))}return ze(s),null;case 5:if(go(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}if(v=j.current,Oo(s))Wh(s);else{var S=ol(me.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[pt]=s,v[It]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(vt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hn(s)}}return ze(s),xc(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Hn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=me.current,Oo(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,g=mt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[pt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||mg(n.nodeValue,a)),n||fi(s,!0)}else n=ol(n).createTextNode(u),n[pt]=s,s.stateNode=n}return ze(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=Oo(s),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[pt]=s}else Qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),n=!1}else a=Hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Yt(s),s):(Yt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ze(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Oo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[pt]=s}else Qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),g=!1}else g=Hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Yt(s),s):(Yt(s),null)}return Yt(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Ba(s,s.updateQueue),ze(s),null);case 4:return Je(),n===null&&Wc(s.stateNode.containerInfo),ze(s),null;case 10:return kn(s.type),ze(s),null;case 19:if(F(We),u=s.memoizedState,u===null)return ze(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)sr(u,!1);else{if(Ze!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=xa(n),v!==null){for(s.flags|=128,sr(u,!1),n=v.updateQueue,s.updateQueue=n,Ba(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Jh(a,n),a=a.sibling;return G(We,We.current&1|2),Me&&Pn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Mt()>Ka&&(s.flags|=128,g=!0,sr(u,!1),s.lanes=4194304)}else{if(!g)if(n=xa(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Ba(s,n),sr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Me)return ze(s),null}else 2*Mt()-u.renderingStartTime>Ka&&a!==536870912&&(s.flags|=128,g=!0,sr(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(n=u.last,n!==null?n.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Mt(),n.sibling=null,a=We.current,G(We,g?a&1|2:a&1),Me&&Pn(s,u.treeForkCount),n):(ze(s),null);case 22:case 23:return Yt(s),ju(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ze(s),s.subtreeFlags&6&&(s.flags|=8192)):ze(s),a=s.updateQueue,a!==null&&Ba(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&F(Wi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),kn(nt),ze(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function wS(n,s){switch(qu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return kn(nt),Je(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return go(s),null;case 31:if(s.memoizedState!==null){if(Yt(s),s.alternate===null)throw Error(o(340));Qi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Yt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Qi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return F(We),null;case 4:return Je(),null;case 10:return kn(s.type),null;case 22:case 23:return Yt(s),ju(),n!==null&&F(Wi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return kn(nt),null;case 25:return null;default:return null}}function Tm(n,s){switch(qu(s),s.tag){case 3:kn(nt),Je();break;case 26:case 27:case 5:go(s);break;case 4:Je();break;case 31:s.memoizedState!==null&&Yt(s);break;case 13:Yt(s);break;case 19:F(We);break;case 10:kn(s.type);break;case 22:case 23:Yt(s),ju(),n!==null&&F(Wi);break;case 24:kn(nt)}}function rr(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,S=a.inst;u=v(),S.destroy=u}a=a.next}while(a!==g)}}catch(A){Pe(s,s.return,A)}}function _i(n,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var N=a,O=A;try{O()}catch(V){Pe(g,N,V)}}}u=u.next}while(u!==v)}}catch(V){Pe(s,s.return,V)}}function Sm(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{dp(s,a)}catch(u){Pe(n,n.return,u)}}}function Em(n,s,a){a.props=io(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Pe(n,s,u)}}function ar(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Pe(n,s,g)}}function An(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Pe(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Pe(n,s,g)}else a.current=null}function Cm(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Pe(n,n.return,g)}}function Ic(n,s,a){try{var u=n.stateNode;QS(u,n.type,a,s),u[It]=s}catch(g){Pe(n,n.return,g)}}function Am(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Mi(n.type)||n.tag===4}function Dc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Am(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Mi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Uc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=In));else if(u!==4&&(u===27&&Mi(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Uc(n,s,a),n=n.sibling;n!==null;)Uc(n,s,a),n=n.sibling}function Fa(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&Mi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Fa(n,s,a),n=n.sibling;n!==null;)Fa(n,s,a),n=n.sibling}function bm(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);vt(s,u,a),s[pt]=n,s[It]=a}catch(v){Pe(n,n.return,v)}}var zn=!1,st=!1,Pc=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,ct=null;function RS(n,s){if(n=n.containerInfo,td=dl,n=qh(n),wu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,N=-1,O=0,V=0,Y=n,q=null;t:for(;;){for(var z;Y!==a||g!==0&&Y.nodeType!==3||(A=S+g),Y!==v||u!==0&&Y.nodeType!==3||(N=S+u),Y.nodeType===3&&(S+=Y.nodeValue.length),(z=Y.firstChild)!==null;)q=Y,Y=z;for(;;){if(Y===n)break t;if(q===a&&++O===g&&(A=S),q===v&&++V===u&&(N=S),(z=Y.nextSibling)!==null)break;Y=q,q=Y.parentNode}Y=z}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(nd={focusedElem:n,selectionRange:a},dl=!1,ct=s;ct!==null;)if(s=ct,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ct=n;else for(;ct!==null;){switch(s=ct,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ne=io(a.type,g);n=u.getSnapshotBeforeUpdate(ne,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(ue){Pe(a,a.return,ue)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)sd(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,ct=n;break}ct=s.return}}function wm(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Bn(n,a),u&4&&rr(5,a);break;case 1:if(Bn(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){Pe(a,a.return,S)}else{var g=io(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Pe(a,a.return,S)}}u&64&&Sm(a),u&512&&ar(a,a.return);break;case 3:if(Bn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{dp(n,s)}catch(S){Pe(a,a.return,S)}}break;case 27:s===null&&u&4&&bm(a);case 26:case 5:Bn(n,a),s===null&&u&4&&Cm(a),u&512&&ar(a,a.return);break;case 12:Bn(n,a);break;case 31:Bn(n,a),u&4&&xm(n,a);break;case 13:Bn(n,a),u&4&&Im(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=OS.bind(null,a),iE(n,a))));break;case 22:if(u=a.memoizedState!==null||zn,!u){s=s!==null&&s.memoizedState!==null||st,g=zn;var v=st;zn=u,(st=s)&&!v?Fn(n,a,(a.subtreeFlags&8772)!==0):Bn(n,a),zn=g,st=v}break;case 30:break;default:Bn(n,a)}}function Rm(n){var s=n.alternate;s!==null&&(n.alternate=null,Rm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&cu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Fe=null,Ut=!1;function Vn(n,s,a){for(a=a.child;a!==null;)Nm(n,s,a),a=a.sibling}function Nm(n,s,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Hi,a)}catch{}switch(a.tag){case 26:st||An(a,s),Vn(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:st||An(a,s);var u=Fe,g=Ut;Mi(a.type)&&(Fe=a.stateNode,Ut=!1),Vn(n,s,a),gr(a.stateNode),Fe=u,Ut=g;break;case 5:st||An(a,s);case 6:if(u=Fe,g=Ut,Fe=null,Vn(n,s,a),Fe=u,Ut=g,Fe!==null)if(Ut)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(a.stateNode)}catch(v){Pe(a,s,v)}else try{Fe.removeChild(a.stateNode)}catch(v){Pe(a,s,v)}break;case 18:Fe!==null&&(Ut?(n=Fe,Sg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),os(n)):Sg(Fe,a.stateNode));break;case 4:u=Fe,g=Ut,Fe=a.stateNode.containerInfo,Ut=!0,Vn(n,s,a),Fe=u,Ut=g;break;case 0:case 11:case 14:case 15:_i(2,a,s),st||_i(4,a,s),Vn(n,s,a);break;case 1:st||(An(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Em(a,s,u)),Vn(n,s,a);break;case 21:Vn(n,s,a);break;case 22:st=(u=st)||a.memoizedState!==null,Vn(n,s,a),st=u;break;default:Vn(n,s,a)}}function xm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{os(n)}catch(a){Pe(s,s.return,a)}}}function Im(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{os(n)}catch(a){Pe(s,s.return,a)}}function NS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Mm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Mm),s;default:throw Error(o(435,n.tag))}}function $a(n,s){var a=NS(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=qS.bind(null,n,u);u.then(g,g)}})}function Pt(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Mi(A.type)){Fe=A.stateNode,Ut=!1;break e}break;case 5:Fe=A.stateNode,Ut=!1;break e;case 3:case 4:Fe=A.stateNode.containerInfo,Ut=!0;break e}A=A.return}if(Fe===null)throw Error(o(160));Nm(v,S,g),Fe=null,Ut=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Dm(s,n),s=s.sibling}var hn=null;function Dm(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pt(s,n),Lt(n),u&4&&(_i(3,n,n.return),rr(3,n),_i(5,n,n.return));break;case 1:Pt(s,n),Lt(n),u&512&&(st||a===null||An(a,a.return)),u&64&&zn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=hn;if(Pt(s,n),Lt(n),u&512&&(st||a===null||An(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ps]||v[pt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),vt(v,u,a),v[pt]=n,ut(v),u=v;break e;case"link":var S=Dg("link","href",g).get(u+(a.href||""));if(S){for(var A=0;A<S.length;A++)if(v=S[A],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;case"meta":if(S=Dg("meta","content",g).get(u+(a.content||""))){for(A=0;A<S.length;A++)if(v=S[A],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[pt]=n,ut(v),u=v}n.stateNode=u}else Ug(g,n.type,n.stateNode);else n.stateNode=Ig(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?Ug(g,n.type,n.stateNode):Ig(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ic(n,n.memoizedProps,a.memoizedProps)}break;case 27:Pt(s,n),Lt(n),u&512&&(st||a===null||An(a,a.return)),a!==null&&u&4&&Ic(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Pt(s,n),Lt(n),u&512&&(st||a===null||An(a,a.return)),n.flags&32){g=n.stateNode;try{wo(g,"")}catch(ne){Pe(n,n.return,ne)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Ic(n,g,a!==null?a.memoizedProps:g)),u&1024&&(Pc=!0);break;case 6:if(Pt(s,n),Lt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ne){Pe(n,n.return,ne)}}break;case 3:if(al=null,g=hn,hn=sl(s.containerInfo),Pt(s,n),hn=g,Lt(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{os(s.containerInfo)}catch(ne){Pe(n,n.return,ne)}Pc&&(Pc=!1,Um(n));break;case 4:u=hn,hn=sl(n.stateNode.containerInfo),Pt(s,n),Lt(n),hn=u;break;case 12:Pt(s,n),Lt(n);break;case 31:Pt(s,n),Lt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,$a(n,u)));break;case 13:Pt(s,n),Lt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ja=Mt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,$a(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,O=zn,V=st;if(zn=O||g,st=V||N,Pt(s,n),st=V,zn=O,Lt(n),u&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||N||zn||st||oo(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(v=N.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=N.stateNode;var Y=N.memoizedProps.style,q=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ne){Pe(N,N.return,ne)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ne){Pe(N,N.return,ne)}}}else if(s.tag===18){if(a===null){N=s;try{var z=N.stateNode;g?Eg(z,!0):Eg(N.stateNode,!1)}catch(ne){Pe(N,N.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,$a(n,a))));break;case 19:Pt(s,n),Lt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,$a(n,u)));break;case 30:break;case 21:break;default:Pt(s,n),Lt(n)}}function Lt(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(Am(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=Dc(n);Fa(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(wo(S,""),a.flags&=-33);var A=Dc(n);Fa(n,A,S);break;case 3:case 4:var N=a.stateNode.containerInfo,O=Dc(n);Uc(n,O,N);break;default:throw Error(o(161))}}catch(V){Pe(n,n.return,V)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Um(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Um(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Bn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)wm(n,s.alternate,s),s=s.sibling}function oo(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:_i(4,s,s.return),oo(s);break;case 1:An(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Em(s,s.return,a),oo(s);break;case 27:gr(s.stateNode);case 26:case 5:An(s,s.return),oo(s);break;case 22:s.memoizedState===null&&oo(s);break;case 30:oo(s);break;default:oo(s)}n=n.sibling}}function Fn(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:Fn(g,v,a),rr(4,v);break;case 1:if(Fn(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Pe(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)cp(N[g],A)}catch(O){Pe(u,u.return,O)}}a&&S&64&&Sm(v),ar(v,v.return);break;case 27:bm(v);case 26:case 5:Fn(g,v,a),a&&u===null&&S&4&&Cm(v),ar(v,v.return);break;case 12:Fn(g,v,a);break;case 31:Fn(g,v,a),a&&S&4&&xm(g,v);break;case 13:Fn(g,v,a),a&&S&4&&Im(g,v);break;case 22:v.memoizedState===null&&Fn(g,v,a),ar(v,v.return);break;case 30:break;default:Fn(g,v,a)}s=s.sibling}}function Lc(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Js(a))}function kc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Js(n))}function pn(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Pm(n,s,a,u),s=s.sibling}function Pm(n,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:pn(n,s,a,u),g&2048&&rr(9,s);break;case 1:pn(n,s,a,u);break;case 3:pn(n,s,a,u),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Js(n)));break;case 12:if(g&2048){pn(n,s,a,u),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,A=v.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Pe(s,s.return,N)}}else pn(n,s,a,u);break;case 31:pn(n,s,a,u);break;case 13:pn(n,s,a,u);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?pn(n,s,a,u):lr(n,s):v._visibility&2?pn(n,s,a,u):(v._visibility|=2,Jo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Lc(S,s);break;case 24:pn(n,s,a,u),g&2048&&kc(s.alternate,s);break;default:pn(n,s,a,u)}}function Jo(n,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,A=a,N=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Jo(v,S,A,N,g),rr(8,S);break;case 23:break;case 22:var V=S.stateNode;S.memoizedState!==null?V._visibility&2?Jo(v,S,A,N,g):lr(v,S):(V._visibility|=2,Jo(v,S,A,N,g)),g&&O&2048&&Lc(S.alternate,S);break;case 24:Jo(v,S,A,N,g),g&&O&2048&&kc(S.alternate,S);break;default:Jo(v,S,A,N,g)}s=s.sibling}}function lr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,g=u.flags;switch(u.tag){case 22:lr(a,u),g&2048&&Lc(u.alternate,u);break;case 24:lr(a,u),g&2048&&kc(u.alternate,u);break;default:lr(a,u)}s=s.sibling}}var ur=8192;function Ko(n,s,a){if(n.subtreeFlags&ur)for(n=n.child;n!==null;)Lm(n,s,a),n=n.sibling}function Lm(n,s,a){switch(n.tag){case 26:Ko(n,s,a),n.flags&ur&&n.memoizedState!==null&&mE(a,hn,n.memoizedState,n.memoizedProps);break;case 5:Ko(n,s,a);break;case 3:case 4:var u=hn;hn=sl(n.stateNode.containerInfo),Ko(n,s,a),hn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=ur,ur=16777216,Ko(n,s,a),ur=u):Ko(n,s,a));break;default:Ko(n,s,a)}}function km(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function cr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ct=u,qm(u,n)}km(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Om(n),n=n.sibling}function Om(n){switch(n.tag){case 0:case 11:case 15:cr(n),n.flags&2048&&_i(9,n,n.return);break;case 3:cr(n);break;case 12:cr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ya(n)):cr(n);break;default:cr(n)}}function Ya(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ct=u,qm(u,n)}km(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:_i(8,s,s.return),Ya(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ya(s));break;default:Ya(s)}n=n.sibling}}function qm(n,s){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:_i(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Js(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ct=u;else e:for(a=n;ct!==null;){u=ct;var g=u.sibling,v=u.return;if(Rm(u),u===a){ct=null;break e}if(g!==null){g.return=v,ct=g;break e}ct=v}}}var xS={getCacheForType:function(n){var s=gt(nt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return gt(nt).controller.signal}},IS=typeof WeakMap=="function"?WeakMap:Map,De=0,qe=null,_e=null,Ee=0,Ue=0,Jt=null,Ti=!1,Qo=!1,Oc=!1,$n=0,Ze=0,Si=0,so=0,qc=0,Kt=0,Xo=0,dr=null,kt=null,Gc=!1,Ja=0,Gm=0,Ka=1/0,Qa=null,Ei=null,at=0,Ci=null,Zo=null,Yn=0,Hc=0,zc=null,Hm=null,fr=0,Vc=null;function Qt(){return(De&2)!==0&&Ee!==0?Ee&-Ee:H.T!==null?Kc():nh()}function zm(){if(Kt===0)if((Ee&536870912)===0||Me){var n=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),Kt=n}else Kt=536870912;return n=$t.current,n!==null&&(n.flags|=32),Kt}function Ot(n,s,a){(n===qe&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)&&(Wo(n,0),Ai(n,Ee,Kt,!1)),Nn(n,a),((De&2)===0||n!==qe)&&(n===qe&&((De&2)===0&&(so|=a),Ze===4&&Ai(n,Ee,Kt,!1)),bn(n))}function Vm(n,s,a){if((De&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||ve(n,s),g=u?PS(n,s):Fc(n,s,!0),v=u;do{if(g===0){Qo&&!u&&Ai(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!DS(a)){g=Fc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=n;g=dr;var N=A.current.memoizedState.isDehydrated;if(N&&(Wo(A,S).flags|=256),S=Fc(A,S,!1),S!==2){if(Oc&&!N){A.errorRecoveryDisabledLanes|=v,so|=v,g=4;break e}v=kt,kt=g,v!==null&&(kt===null?kt=v:kt.push.apply(kt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Wo(n,0),Ai(n,s,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ai(u,s,Kt,!Ti);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Ja+300-Mt(),10<g)){if(Ai(u,s,Kt,!Ti),de(u,0,!0)!==0)break e;Yn=s,u.timeoutHandle=_g(Bm.bind(null,u,a,kt,Qa,Gc,s,Kt,so,Xo,Ti,v,"Throttled",-0,0),g);break e}Bm(u,a,kt,Qa,Gc,s,Kt,so,Xo,Ti,v,null,-0,0)}}break}while(!0);bn(n)}function Bm(n,s,a,u,g,v,S,A,N,O,V,Y,q,z){if(n.timeoutHandle=-1,Y=s.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:In},Lm(s,v,Y);var ne=(v&62914560)===v?Ja-Mt():(v&4194048)===v?Gm-Mt():0;if(ne=gE(Y,ne),ne!==null){Yn=v,n.cancelPendingCommit=ne(Zm.bind(null,n,s,v,a,u,g,S,A,N,V,Y,null,q,z)),Ai(n,v,S,!O);return}}Zm(n,s,v,a,u,g,S,A,N)}function DS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!Bt(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ai(n,s,a,u){s&=~qc,s&=~so,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var g=s;0<g;){var v=31-Rt(g),S=1<<v;u[v]=-1,g&=~S}a!==0&&sa(n,a,s)}function Xa(){return(De&6)===0?(hr(0),!1):!0}function Bc(){if(_e!==null){if(Ue===0)var n=_e.return;else n=_e,Ln=Xi=null,sc(n),Vo=null,Qs=0,n=_e;for(;n!==null;)Tm(n.alternate,n),n=n.return;_e=null}}function Wo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,WS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Yn=0,Bc(),qe=n,_e=a=Un(n.current,null),Ee=s,Ue=0,Jt=null,Ti=!1,Qo=ve(n,s),Oc=!1,Xo=Kt=qc=so=Si=Ze=0,kt=dr=null,Gc=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var g=31-Rt(u),v=1<<g;s|=n[g],u&=~v}return $n=s,ya(),a}function Fm(n,s){ge=null,H.H=ir,s===zo||s===ba?(s=rp(),Ue=3):s===Ju?(s=rp(),Ue=4):Ue=s===Sc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,_e===null&&(Ze=1,Ga(n,tn(s,n.current)))}function $m(){var n=$t.current;return n===null?!0:(Ee&4194048)===Ee?rn===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?n===rn:!1}function Ym(){var n=H.H;return H.H=ir,n===null?ir:n}function Jm(){var n=H.A;return H.A=xS,n}function Za(){Ze=4,Ti||(Ee&4194048)!==Ee&&$t.current!==null||(Qo=!0),(Si&134217727)===0&&(so&134217727)===0||qe===null||Ai(qe,Ee,Kt,!1)}function Fc(n,s,a){var u=De;De|=2;var g=Ym(),v=Jm();(qe!==n||Ee!==s)&&(Qa=null,Wo(n,s)),s=!1;var S=Ze;e:do try{if(Ue!==0&&_e!==null){var A=_e,N=Jt;switch(Ue){case 8:Bc(),S=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(s=!0);var O=Ue;if(Ue=0,Jt=null,jo(n,A,N,O),a&&Qo){S=0;break e}break;default:O=Ue,Ue=0,Jt=null,jo(n,A,N,O)}}US(),S=Ze;break}catch(V){Fm(n,V)}while(!0);return s&&n.shellSuspendCounter++,Ln=Xi=null,De=u,H.H=g,H.A=v,_e===null&&(qe=null,Ee=0,ya()),S}function US(){for(;_e!==null;)Km(_e)}function PS(n,s){var a=De;De|=2;var u=Ym(),g=Jm();qe!==n||Ee!==s?(Qa=null,Ka=Mt()+500,Wo(n,s)):Qo=ve(n,s);e:do try{if(Ue!==0&&_e!==null){s=_e;var v=Jt;t:switch(Ue){case 1:Ue=0,Jt=null,jo(n,s,v,1);break;case 2:case 9:if(op(v)){Ue=0,Jt=null,Qm(s);break}s=function(){Ue!==2&&Ue!==9||qe!==n||(Ue=7),bn(n)},v.then(s,s);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:op(v)?(Ue=0,Jt=null,Qm(s)):(Ue=0,Jt=null,jo(n,s,v,7));break;case 5:var S=null;switch(_e.tag){case 26:S=_e.memoizedState;case 5:case 27:var A=_e;if(S?Pg(S):A.stateNode.complete){Ue=0,Jt=null;var N=A.sibling;if(N!==null)_e=N;else{var O=A.return;O!==null?(_e=O,Wa(O)):_e=null}break t}}Ue=0,Jt=null,jo(n,s,v,5);break;case 6:Ue=0,Jt=null,jo(n,s,v,6);break;case 8:Bc(),Ze=6;break e;default:throw Error(o(462))}}LS();break}catch(V){Fm(n,V)}while(!0);return Ln=Xi=null,H.H=u,H.A=g,De=a,_e!==null?0:(qe=null,Ee=0,ya(),Ze)}function LS(){for(;_e!==null&&!tu();)Km(_e)}function Km(n){var s=vm(n.alternate,n,$n);n.memoizedProps=n.pendingProps,s===null?Wa(n):_e=s}function Qm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=fm(a,s,s.pendingProps,s.type,void 0,Ee);break;case 11:s=fm(a,s,s.pendingProps,s.type.render,s.ref,Ee);break;case 5:sc(s);default:Tm(a,s),s=_e=Jh(s,$n),s=vm(a,s,$n)}n.memoizedProps=n.pendingProps,s===null?Wa(n):_e=s}function jo(n,s,a,u){Ln=Xi=null,sc(s),Vo=null,Qs=0;var g=s.return;try{if(CS(n,g,s,a,Ee)){Ze=1,Ga(n,tn(a,n.current)),_e=null;return}}catch(v){if(g!==null)throw _e=g,v;Ze=1,Ga(n,tn(a,n.current)),_e=null;return}s.flags&32768?(Me||u===1?n=!0:Qo||(Ee&536870912)!==0?n=!1:(Ti=n=!0,(u===2||u===9||u===3||u===6)&&(u=$t.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xm(s,n)):Wa(s)}function Wa(n){var s=n;do{if((s.flags&32768)!==0){Xm(s,Ti);return}n=s.return;var a=MS(s.alternate,s,$n);if(a!==null){_e=a;return}if(s=s.sibling,s!==null){_e=s;return}_e=s=n}while(s!==null);Ze===0&&(Ze=5)}function Xm(n,s){do{var a=wS(n.alternate,n);if(a!==null){a.flags&=32767,_e=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){_e=n;return}_e=n=a}while(n!==null);Ze=6,_e=null}function Zm(n,s,a,u,g,v,S,A,N){n.cancelPendingCommit=null;do ja();while(at!==0);if((De&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Du,zi(n,a,v,S,A,N),n===qe&&(_e=qe=null,Ee=0),Zo=s,Ci=n,Yn=a,Hc=v,zc=g,Hm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,GS(vo,function(){return ng(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,g=Z.p,Z.p=2,S=De,De|=4;try{RS(n,s,a)}finally{De=S,Z.p=g,H.T=u}}at=1,Wm(),jm(),eg()}}function Wm(){if(at===1){at=0;var n=Ci,s=Zo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var g=De;De|=4;try{Dm(s,n);var v=nd,S=qh(n.containerInfo),A=v.focusedElem,N=v.selectionRange;if(S!==A&&A&&A.ownerDocument&&Oh(A.ownerDocument.documentElement,A)){if(N!==null&&wu(A)){var O=N.start,V=N.end;if(V===void 0&&(V=O),"selectionStart"in A)A.selectionStart=O,A.selectionEnd=Math.min(V,A.value.length);else{var Y=A.ownerDocument||document,q=Y&&Y.defaultView||window;if(q.getSelection){var z=q.getSelection(),ne=A.textContent.length,ue=Math.min(N.start,ne),Oe=N.end===void 0?ue:Math.min(N.end,ne);!z.extend&&ue>Oe&&(S=Oe,Oe=ue,ue=S);var L=kh(A,ue),I=kh(A,Oe);if(L&&I&&(z.rangeCount!==1||z.anchorNode!==L.node||z.anchorOffset!==L.offset||z.focusNode!==I.node||z.focusOffset!==I.offset)){var k=Y.createRange();k.setStart(L.node,L.offset),z.removeAllRanges(),ue>Oe?(z.addRange(k),z.extend(I.node,I.offset)):(k.setEnd(I.node,I.offset),z.addRange(k))}}}}for(Y=[],z=A;z=z.parentNode;)z.nodeType===1&&Y.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Y.length;A++){var $=Y[A];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}dl=!!td,nd=td=null}finally{De=g,Z.p=u,H.T=a}}n.current=s,at=2}}function jm(){if(at===2){at=0;var n=Ci,s=Zo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var g=De;De|=4;try{wm(n,s.alternate,s)}finally{De=g,Z.p=u,H.T=a}}at=3}}function eg(){if(at===4||at===3){at=0,ea();var n=Ci,s=Zo,a=Yn,u=Hm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?at=5:(at=0,Zo=Ci=null,tg(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ei=null),lu(a),s=s.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Hi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,g=Z.p,Z.p=2,H.T=null;try{for(var v=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];v(A.value,{componentStack:A.stack})}}finally{H.T=s,Z.p=g}}(Yn&3)!==0&&ja(),bn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===Vc?fr++:(fr=0,Vc=n):fr=0,hr(0)}}function tg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Js(s)))}function ja(){return Wm(),jm(),eg(),ng()}function ng(){if(at!==5)return!1;var n=Ci,s=Hc;Hc=0;var a=lu(Yn),u=H.T,g=Z.p;try{Z.p=32>a?32:a,H.T=null,a=zc,zc=null;var v=Ci,S=Yn;if(at=0,Zo=Ci=null,Yn=0,(De&6)!==0)throw Error(o(331));var A=De;if(De|=4,Om(v.current),Pm(v,v.current,S,a),De=A,hr(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Hi,v)}catch{}return!0}finally{Z.p=g,H.T=u,tg(n,s)}}function ig(n,s,a){s=tn(a,s),s=Tc(n.stateNode,s,2),n=gi(n,s,2),n!==null&&(Nn(n,2),bn(n))}function Pe(n,s,a){if(n.tag===3)ig(n,n,a);else for(;s!==null;){if(s.tag===3){ig(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ei===null||!Ei.has(u))){n=tn(a,n),a=om(2),u=gi(s,a,2),u!==null&&(sm(a,u,s,n),Nn(u,2),bn(u));break}}s=s.return}}function $c(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new IS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Oc=!0,g.add(a),n=kS.bind(null,n,s,a),s.then(n,n))}function kS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,qe===n&&(Ee&a)===a&&(Ze===4||Ze===3&&(Ee&62914560)===Ee&&300>Mt()-Ja?(De&2)===0&&Wo(n,0):qc|=a,Xo===Ee&&(Xo=0)),bn(n)}function og(n,s){s===0&&(s=Et()),n=Ji(n,s),n!==null&&(Nn(n,s),bn(n))}function OS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),og(n,a)}function qS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),og(n,a)}function GS(n,s){return Vt(n,s)}var el=null,es=null,Yc=!1,tl=!1,Jc=!1,bi=0;function bn(n){n!==es&&n.next===null&&(es===null?el=es=n:es=es.next=n),tl=!0,Yc||(Yc=!0,zS())}function hr(n,s){if(!Jc&&tl){Jc=!0;do for(var a=!1,u=el;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-Rt(42|n)+1)-1,v&=g&~(S&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,lg(u,v))}else v=Ee,v=de(u,u===qe?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||ve(u,v)||(a=!0,lg(u,v));u=u.next}while(a);Jc=!1}}function HS(){sg()}function sg(){tl=Yc=!1;var n=0;bi!==0&&ZS()&&(n=bi);for(var s=Mt(),a=null,u=el;u!==null;){var g=u.next,v=rg(u,s);v===0?(u.next=null,a===null?el=g:a.next=g,g===null&&(es=a)):(a=u,(n!==0||(v&3)!==0)&&(tl=!0)),u=g}at!==0&&at!==5||hr(n),bi!==0&&(bi=0)}function rg(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-Rt(v),A=1<<S,N=g[S];N===-1?((A&a)===0||(A&u)!==0)&&(g[S]=Ge(A,s)):N<=s&&(n.expiredLanes|=A),v&=~A}if(s=qe,a=Ee,a=de(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Is(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ve(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Is(u),lu(a)){case 2:case 8:a=na;break;case 32:a=vo;break;case 268435456:a=ia;break;default:a=vo}return u=ag.bind(null,n),a=Vt(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Is(u),n.callbackPriority=2,n.callbackNode=null,2}function ag(n,s){if(at!==0&&at!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ja()&&n.callbackNode!==a)return null;var u=Ee;return u=de(n,n===qe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Vm(n,u,s),rg(n,Mt()),n.callbackNode!=null&&n.callbackNode===a?ag.bind(null,n):null)}function lg(n,s){if(ja())return null;Vm(n,s,!0)}function zS(){jS(function(){(De&6)!==0?Vt(Ds,HS):sg()})}function Kc(){if(bi===0){var n=Go;n===0&&(n=_o,_o<<=1,(_o&261888)===0&&(_o=256)),bi=n}return bi}function ug(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ua(""+n)}function cg(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function VS(n,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=ug((g[It]||null).action),S=u.submitter;S&&(s=(s=S[It]||null)?ug(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var A=new ha("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(bi!==0){var N=S?cg(g,S):new FormData(g);pc(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(A.preventDefault(),N=S?cg(g,S):new FormData(g),pc(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var Qc=0;Qc<Iu.length;Qc++){var Xc=Iu[Qc],BS=Xc.toLowerCase(),FS=Xc[0].toUpperCase()+Xc.slice(1);fn(BS,"on"+FS)}fn(zh,"onAnimationEnd"),fn(Vh,"onAnimationIteration"),fn(Bh,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(rS,"onTransitionRun"),fn(aS,"onTransitionStart"),fn(lS,"onTransitionCancel"),fn(Fh,"onTransitionEnd"),bo("onMouseEnter",["mouseout","mouseover"]),bo("onMouseLeave",["mouseout","mouseover"]),bo("onPointerEnter",["pointerout","pointerover"]),bo("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$S=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pr));function dg(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],N=A.instance,O=A.currentTarget;if(A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(V){ga(V)}g.currentTarget=null,v=N}else for(S=0;S<u.length;S++){if(A=u[S],N=A.instance,O=A.currentTarget,A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(V){ga(V)}g.currentTarget=null,v=N}}}}function Te(n,s){var a=s[uu];a===void 0&&(a=s[uu]=new Set);var u=n+"__bubble";a.has(u)||(fg(s,n,2,!1),a.add(u))}function Zc(n,s,a){var u=0;s&&(u|=4),fg(a,n,u,s)}var nl="_reactListening"+Math.random().toString(36).slice(2);function Wc(n){if(!n[nl]){n[nl]=!0,sh.forEach(function(a){a!=="selectionchange"&&($S.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[nl]||(s[nl]=!0,Zc("selectionchange",!1,s))}}function fg(n,s,a,u){switch(zg(s)){case 2:var g=_E;break;case 8:g=TE;break;default:g=hd}a=g.bind(null,s,a,n),g=void 0,!vu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function jc(n,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=Eo(A),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=v=S;continue e}A=A.parentNode}}u=u.return}yh(function(){var O=v,V=gu(a),Y=[];e:{var q=$h.get(n);if(q!==void 0){var z=ha,ne=n;switch(n){case"keypress":if(da(a)===0)break e;case"keydown":case"keyup":z=qT;break;case"focusin":ne="focus",z=Eu;break;case"focusout":ne="blur",z=Eu;break;case"beforeblur":case"afterblur":z=Eu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=MT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=zT;break;case zh:case Vh:case Bh:z=NT;break;case Fh:z=BT;break;case"scroll":case"scrollend":z=AT;break;case"wheel":z=$T;break;case"copy":case"cut":case"paste":z=IT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Eh;break;case"toggle":case"beforetoggle":z=JT}var ue=(s&4)!==0,Oe=!ue&&(n==="scroll"||n==="scrollend"),L=ue?q!==null?q+"Capture":null:q;ue=[];for(var I=O,k;I!==null;){var $=I;if(k=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||k===null||L===null||($=ks(I,L),$!=null&&ue.push(mr(I,$,k))),Oe)break;I=I.return}0<ue.length&&(q=new z(q,ne,null,a,V),Y.push({event:q,listeners:ue}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",z=n==="mouseout"||n==="pointerout",q&&a!==mu&&(ne=a.relatedTarget||a.fromElement)&&(Eo(ne)||ne[So]))break e;if((z||q)&&(q=V.window===V?V:(q=V.ownerDocument)?q.defaultView||q.parentWindow:window,z?(ne=a.relatedTarget||a.toElement,z=O,ne=ne?Eo(ne):null,ne!==null&&(Oe=l(ne),ue=ne.tag,ne!==Oe||ue!==5&&ue!==27&&ue!==6)&&(ne=null)):(z=null,ne=O),z!==ne)){if(ue=Th,$="onMouseLeave",L="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ue=Eh,$="onPointerLeave",L="onPointerEnter",I="pointer"),Oe=z==null?q:Ls(z),k=ne==null?q:Ls(ne),q=new ue($,I+"leave",z,a,V),q.target=Oe,q.relatedTarget=k,$=null,Eo(V)===O&&(ue=new ue(L,I+"enter",ne,a,V),ue.target=k,ue.relatedTarget=Oe,$=ue),Oe=$,z&&ne)t:{for(ue=YS,L=z,I=ne,k=0,$=L;$;$=ue($))k++;$=0;for(var ae=I;ae;ae=ue(ae))$++;for(;0<k-$;)L=ue(L),k--;for(;0<$-k;)I=ue(I),$--;for(;k--;){if(L===I||I!==null&&L===I.alternate){ue=L;break t}L=ue(L),I=ue(I)}ue=null}else ue=null;z!==null&&hg(Y,q,z,ue,!1),ne!==null&&Oe!==null&&hg(Y,Oe,ne,ue,!0)}}e:{if(q=O?Ls(O):window,z=q.nodeName&&q.nodeName.toLowerCase(),z==="select"||z==="input"&&q.type==="file")var Ne=xh;else if(Rh(q))if(Ih)Ne=iS;else{Ne=tS;var se=eS}else z=q.nodeName,!z||z.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&pu(O.elementType)&&(Ne=xh):Ne=nS;if(Ne&&(Ne=Ne(n,O))){Nh(Y,Ne,a,V);break e}se&&se(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&hu(q,"number",q.value)}switch(se=O?Ls(O):window,n){case"focusin":(Rh(se)||se.contentEditable==="true")&&(Io=se,Ru=O,Fs=null);break;case"focusout":Fs=Ru=Io=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,Gh(Y,a,V);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Gh(Y,a,V)}var ye;if(Au)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else xo?Mh(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ch&&a.locale!=="ko"&&(xo||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&xo&&(ye=vh()):(ui=V,_u="value"in ui?ui.value:ui.textContent,xo=!0)),se=il(O,Ce),0<se.length&&(Ce=new Sh(Ce,n,null,a,V),Y.push({event:Ce,listeners:se}),ye?Ce.data=ye:(ye=wh(a),ye!==null&&(Ce.data=ye)))),(ye=QT?XT(n,a):ZT(n,a))&&(Ce=il(O,"onBeforeInput"),0<Ce.length&&(se=new Sh("onBeforeInput","beforeinput",null,a,V),Y.push({event:se,listeners:Ce}),se.data=ye)),VS(Y,n,O,a,V)}dg(Y,s)})}function mr(n,s,a){return{instance:n,listener:s,currentTarget:a}}function il(n,s){for(var a=s+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ks(n,a),g!=null&&u.unshift(mr(n,g,v)),g=ks(n,s),g!=null&&u.push(mr(n,g,v))),n.tag===3)return u;n=n.return}return[]}function YS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function hg(n,s,a,u,g){for(var v=s._reactName,S=[];a!==null&&a!==u;){var A=a,N=A.alternate,O=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||O===null||(N=O,g?(O=ks(a,v),O!=null&&S.unshift(mr(a,O,N))):g||(O=ks(a,v),O!=null&&S.push(mr(a,O,N)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var JS=/\r\n?/g,KS=/\u0000|\uFFFD/g;function pg(n){return(typeof n=="string"?n:""+n).replace(JS,`
`).replace(KS,"")}function mg(n,s){return s=pg(s),pg(n)===s}function ke(n,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||wo(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&wo(n,""+u);break;case"className":aa(n,"class",u);break;case"tabIndex":aa(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":aa(n,a,u);break;case"style":mh(n,u,v);break;case"data":if(s!=="object"){aa(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=ua(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&ke(n,s,"name",g.name,g,null),ke(n,s,"formEncType",g.formEncType,g,null),ke(n,s,"formMethod",g.formMethod,g,null),ke(n,s,"formTarget",g.formTarget,g,null)):(ke(n,s,"encType",g.encType,g,null),ke(n,s,"method",g.method,g,null),ke(n,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=ua(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=In);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=ua(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Te("beforetoggle",n),Te("toggle",n),ra(n,"popover",u);break;case"xlinkActuate":xn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ra(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ET.get(a)||a,ra(n,a,u))}}function ed(n,s,a,u,g,v){switch(a){case"style":mh(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?wo(n,u):(typeof u=="number"||typeof u=="bigint")&&wo(n,""+u);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"onClick":u!=null&&(n.onclick=In);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rh.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[It]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):ra(n,a,u)}}}function vt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ke(n,s,v,S,a,null)}}g&&ke(n,s,"srcSet",a.srcSet,a,null),u&&ke(n,s,"src",a.src,a,null);return;case"input":Te("invalid",n);var A=v=S=g=null,N=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var V=a[u];if(V!=null)switch(u){case"name":g=V;break;case"type":S=V;break;case"checked":N=V;break;case"defaultChecked":O=V;break;case"value":v=V;break;case"defaultValue":A=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,s));break;default:ke(n,s,u,V,a,null)}}dh(n,v,A,N,O,S,g,!1);return;case"select":Te("invalid",n),u=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(A=a[g],A!=null))switch(g){case"value":v=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:ke(n,s,g,A,a,null)}s=v,a=S,n.multiple=!!u,s!=null?Mo(n,!!u,s,!1):a!=null&&Mo(n,!!u,a,!0);return;case"textarea":Te("invalid",n),v=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(A=a[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:ke(n,s,S,A,a,null)}hh(n,u,g,v);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ke(n,s,N,u,a,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(u=0;u<pr.length;u++)Te(pr[u],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ke(n,s,O,u,a,null)}return;default:if(pu(s)){for(V in a)a.hasOwnProperty(V)&&(u=a[V],u!==void 0&&ed(n,s,V,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&ke(n,s,A,u,a,null))}function QS(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,A=null,N=null,O=null,V=null;for(z in a){var Y=a[z];if(a.hasOwnProperty(z)&&Y!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":N=Y;default:u.hasOwnProperty(z)||ke(n,s,z,null,u,Y)}}for(var q in u){var z=u[q];if(Y=a[q],u.hasOwnProperty(q)&&(z!=null||Y!=null))switch(q){case"type":v=z;break;case"name":g=z;break;case"checked":O=z;break;case"defaultChecked":V=z;break;case"value":S=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:z!==Y&&ke(n,s,q,z,u,Y)}}fu(n,S,A,N,O,V,v,g);return;case"select":z=S=A=q=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":z=N;default:u.hasOwnProperty(v)||ke(n,s,v,null,u,N)}for(g in u)if(v=u[g],N=a[g],u.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":q=v;break;case"defaultValue":A=v;break;case"multiple":S=v;default:v!==N&&ke(n,s,g,v,u,N)}s=A,a=S,u=z,q!=null?Mo(n,!!a,q,!1):!!u!=!!a&&(s!=null?Mo(n,!!a,s,!0):Mo(n,!!a,a?[]:"",!1));return;case"textarea":z=q=null;for(A in a)if(g=a[A],a.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ke(n,s,A,null,u,g)}for(S in u)if(g=u[S],v=a[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":q=g;break;case"defaultValue":z=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&ke(n,s,S,g,u,v)}fh(n,q,z);return;case"option":for(var ne in a)if(q=a[ne],a.hasOwnProperty(ne)&&q!=null&&!u.hasOwnProperty(ne))switch(ne){case"selected":n.selected=!1;break;default:ke(n,s,ne,null,u,q)}for(N in u)if(q=u[N],z=a[N],u.hasOwnProperty(N)&&q!==z&&(q!=null||z!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ke(n,s,N,q,u,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)q=a[ue],a.hasOwnProperty(ue)&&q!=null&&!u.hasOwnProperty(ue)&&ke(n,s,ue,null,u,q);for(O in u)if(q=u[O],z=a[O],u.hasOwnProperty(O)&&q!==z&&(q!=null||z!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:ke(n,s,O,q,u,z)}return;default:if(pu(s)){for(var Oe in a)q=a[Oe],a.hasOwnProperty(Oe)&&q!==void 0&&!u.hasOwnProperty(Oe)&&ed(n,s,Oe,void 0,u,q);for(V in u)q=u[V],z=a[V],!u.hasOwnProperty(V)||q===z||q===void 0&&z===void 0||ed(n,s,V,q,u,z);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!u.hasOwnProperty(L)&&ke(n,s,L,null,u,q);for(Y in u)q=u[Y],z=a[Y],!u.hasOwnProperty(Y)||q===z||q==null&&z==null||ke(n,s,Y,q,u,z)}function gg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,S=g.initiatorType,A=g.duration;if(v&&A&&gg(S)){for(S=0,A=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],O=N.startTime;if(O>A)break;var V=N.transferSize,Y=N.initiatorType;V&&gg(Y)&&(N=N.responseEnd,S+=V*(N<A?1:(A-O)/(N-O)))}if(--u,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var td=null,nd=null;function ol(n){return n.nodeType===9?n:n.ownerDocument}function yg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function id(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var od=null;function ZS(){var n=window.event;return n&&n.type==="popstate"?n===od?!1:(od=n,!0):(od=null,!1)}var _g=typeof setTimeout=="function"?setTimeout:void 0,WS=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(n){return Tg.resolve(null).then(n).catch(eE)}:_g;function eE(n){setTimeout(function(){throw n})}function Mi(n){return n==="head"}function Sg(n,s){var a=s,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),os(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")gr(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,gr(a);for(var v=a.firstChild;v;){var S=v.nextSibling,A=v.nodeName;v[Ps]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&gr(n.ownerDocument.body);a=g}while(a);os(s)}function Eg(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function sd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sd(a),cu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function tE(n,s,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ps])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=an(n.nextSibling),n===null)break}return null}function nE(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=an(n.nextSibling),n===null))return null;return n}function Cg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=an(n.nextSibling),n===null))return null;return n}function rd(n){return n.data==="$?"||n.data==="$~"}function ad(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function iE(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function an(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ld=null;function Ag(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return an(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function bg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Mg(n,s,a){switch(s=ol(a),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function gr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);cu(n)}var ln=new Map,wg=new Set;function sl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Jn=Z.d;Z.d={f:oE,r:sE,D:rE,C:aE,L:lE,m:uE,X:dE,S:cE,M:fE};function oE(){var n=Jn.f(),s=Xa();return n||s}function sE(n){var s=Co(n);s!==null&&s.tag===5&&s.type==="form"?Fp(s):Jn.r(n)}var ts=typeof document>"u"?null:document;function Rg(n,s,a){var u=ts;if(u&&typeof s=="string"&&s){var g=jt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),wg.has(g)||(wg.add(g),n={rel:n,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),vt(s,"link",n),ut(s),u.head.appendChild(s)))}}function rE(n){Jn.D(n),Rg("dns-prefetch",n,null)}function aE(n,s){Jn.C(n,s),Rg("preconnect",n,s)}function lE(n,s,a){Jn.L(n,s,a);var u=ts;if(u&&n&&s){var g='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+jt(a.imageSizes)+'"]')):g+='[href="'+jt(n)+'"]';var v=g;switch(s){case"style":v=ns(n);break;case"script":v=is(n)}ln.has(v)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),ln.set(v,n),u.querySelector(g)!==null||s==="style"&&u.querySelector(yr(v))||s==="script"&&u.querySelector(vr(v))||(s=u.createElement("link"),vt(s,"link",n),ut(s),u.head.appendChild(s)))}}function uE(n,s){Jn.m(n,s);var a=ts;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=is(n)}if(!ln.has(v)&&(n=_({rel:"modulepreload",href:n},s),ln.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vr(v)))return}u=a.createElement("link"),vt(u,"link",n),ut(u),a.head.appendChild(u)}}}function cE(n,s,a){Jn.S(n,s,a);var u=ts;if(u&&n){var g=Ao(u).hoistableStyles,v=ns(n);s=s||"default";var S=g.get(v);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(yr(v)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=ln.get(v))&&ud(n,a);var N=S=u.createElement("link");ut(N),vt(N,"link",n),N._p=new Promise(function(O,V){N.onload=O,N.onerror=V}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,rl(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(v,S)}}}function dE(n,s){Jn.X(n,s);var a=ts;if(a&&n){var u=Ao(a).hoistableScripts,g=is(n),v=u.get(g);v||(v=a.querySelector(vr(g)),v||(n=_({src:n,async:!0},s),(s=ln.get(g))&&cd(n,s),v=a.createElement("script"),ut(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function fE(n,s){Jn.M(n,s);var a=ts;if(a&&n){var u=Ao(a).hoistableScripts,g=is(n),v=u.get(g);v||(v=a.querySelector(vr(g)),v||(n=_({src:n,async:!0,type:"module"},s),(s=ln.get(g))&&cd(n,s),v=a.createElement("script"),ut(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Ng(n,s,a,u){var g=(g=me.current)?sl(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ns(a.href),a=Ao(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ns(a.href);var v=Ao(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(yr(n)))&&!v._p&&(S.instance=v,S.state.loading=5),ln.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ln.set(n,a),v||hE(g,n,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=is(a),a=Ao(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function ns(n){return'href="'+jt(n)+'"'}function yr(n){return'link[rel="stylesheet"]['+n+"]"}function xg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function hE(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),vt(s,"link",a),ut(s),n.head.appendChild(s))}function is(n){return'[src="'+jt(n)+'"]'}function vr(n){return"script[async]"+n}function Ig(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+jt(a.href)+'"]');if(u)return s.instance=u,ut(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ut(u),vt(u,"style",g),rl(u,a.precedence,n),s.instance=u;case"stylesheet":g=ns(a.href);var v=n.querySelector(yr(g));if(v)return s.state.loading|=4,s.instance=v,ut(v),v;u=xg(a),(g=ln.get(g))&&ud(u,g),v=(n.ownerDocument||n).createElement("link"),ut(v);var S=v;return S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),s.state.loading|=4,rl(v,a.precedence,n),s.instance=v;case"script":return v=is(a.src),(g=n.querySelector(vr(v)))?(s.instance=g,ut(g),g):(u=a,(g=ln.get(v))&&(u=_({},a),cd(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),ut(g),vt(g,"link",u),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,rl(u,a.precedence,n));return s.instance}function rl(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)v=A;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function ud(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function cd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var al=null;function Dg(n,s,a){if(al===null){var u=new Map,g=al=new Map;g.set(a,u)}else g=al,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[Ps]||v[pt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var A=u.get(S);A?A.push(v):u.set(S,[v])}}return u}function Ug(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function pE(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Pg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function mE(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=ns(u.href),v=s.querySelector(yr(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=ll.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,ut(v);return}v=s.ownerDocument||s,u=xg(u),(g=ln.get(g))&&ud(u,g),v=v.createElement("link"),ut(v);var S=v;S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=ll.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var dd=0;function gE(n,s){return n.stylesheets&&n.count===0&&cl(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&cl(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&dd===0&&(dd=62500*XS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&cl(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>dd?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ul=null;function cl(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ul=new Map,s.forEach(yE,n),ul=null,ll.call(n))}function yE(n,s){if(!(s.state.loading&4)){var a=ul.get(n);if(a)var u=a.get(null);else{a=new Map,ul.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||u,v===u&&a.set(null,g),a.set(S,g),this.count++,u=ll.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var _r={$$typeof:P,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function vE(n,s,a,u,g,v,S,A,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ct(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ct(0),this.hiddenUpdates=Ct(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Lg(n,s,a,u,g,v,S,A,N,O,V,Y){return n=new vE(n,s,a,S,N,O,V,Y,A),s=1,v===!0&&(s|=24),v=Ft(3,null,null,s),n.current=v,v.stateNode=n,s=Fu(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},Ku(v),n}function kg(n){return n?(n=Po,n):Po}function Og(n,s,a,u,g,v){g=kg(g),u.context===null?u.context=g:u.pendingContext=g,u=mi(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=gi(n,u,s),a!==null&&(Ot(a,n,s),Zs(a,n,s))}function qg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function fd(n,s){qg(n,s),(n=n.alternate)&&qg(n,s)}function Gg(n){if(n.tag===13||n.tag===31){var s=Ji(n,67108864);s!==null&&Ot(s,n,67108864),fd(n,67108864)}}function Hg(n){if(n.tag===13||n.tag===31){var s=Qt();s=au(s);var a=Ji(n,s);a!==null&&Ot(a,n,s),fd(n,s)}}var dl=!0;function _E(n,s,a,u){var g=H.T;H.T=null;var v=Z.p;try{Z.p=2,hd(n,s,a,u)}finally{Z.p=v,H.T=g}}function TE(n,s,a,u){var g=H.T;H.T=null;var v=Z.p;try{Z.p=8,hd(n,s,a,u)}finally{Z.p=v,H.T=g}}function hd(n,s,a,u){if(dl){var g=pd(u);if(g===null)jc(n,s,u,fl,a),Vg(n,u);else if(EE(g,n,s,a,u))u.stopPropagation();else if(Vg(n,u),s&4&&-1<SE.indexOf(n)){for(;g!==null;){var v=Co(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=K(v.pendingLanes);if(S!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var N=1<<31-Rt(S);A.entanglements[1]|=N,S&=~N}bn(v),(De&6)===0&&(Ka=Mt()+500,hr(0))}}break;case 31:case 13:A=Ji(v,2),A!==null&&Ot(A,v,2),Xa(),fd(v,2)}if(v=pd(u),v===null&&jc(n,s,u,fl,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else jc(n,s,u,null,a)}}function pd(n){return n=gu(n),md(n)}var fl=null;function md(n){if(fl=null,n=Eo(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return fl=n,null}function zg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ta()){case Ds:return 2;case na:return 8;case vo:case nu:return 32;case ia:return 268435456;default:return 32}default:return 32}}var gd=!1,wi=null,Ri=null,Ni=null,Tr=new Map,Sr=new Map,xi=[],SE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vg(n,s){switch(n){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Tr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(s.pointerId)}}function Er(n,s,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Co(s),s!==null&&Gg(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function EE(n,s,a,u,g){switch(s){case"focusin":return wi=Er(wi,n,s,a,u,g),!0;case"dragenter":return Ri=Er(Ri,n,s,a,u,g),!0;case"mouseover":return Ni=Er(Ni,n,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return Tr.set(v,Er(Tr.get(v)||null,n,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,Sr.set(v,Er(Sr.get(v)||null,n,s,a,u,g)),!0}return!1}function Bg(n){var s=Eo(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,ih(n.priority,function(){Hg(a)});return}}else if(s===31){if(s=d(a),s!==null){n.blockedOn=s,ih(n.priority,function(){Hg(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=pd(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);mu=u,a.target.dispatchEvent(u),mu=null}else return s=Co(a),s!==null&&Gg(s),n.blockedOn=a,!1;s.shift()}return!0}function Fg(n,s,a){hl(n)&&a.delete(s)}function CE(){gd=!1,wi!==null&&hl(wi)&&(wi=null),Ri!==null&&hl(Ri)&&(Ri=null),Ni!==null&&hl(Ni)&&(Ni=null),Tr.forEach(Fg),Sr.forEach(Fg)}function pl(n,s){n.blockedOn===s&&(n.blockedOn=null,gd||(gd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CE)))}var ml=null;function $g(n){ml!==n&&(ml=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ml===n&&(ml=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],g=n[s+2];if(typeof u!="function"){if(md(u||a)===null)continue;break}var v=Co(a);v!==null&&(n.splice(s,3),s-=3,pc(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function os(n){function s(N){return pl(N,n)}wi!==null&&pl(wi,n),Ri!==null&&pl(Ri,n),Ni!==null&&pl(Ni,n),Tr.forEach(s),Sr.forEach(s);for(var a=0;a<xi.length;a++){var u=xi[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<xi.length&&(a=xi[0],a.blockedOn===null);)Bg(a),a.blockedOn===null&&xi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],S=g[It]||null;if(typeof v=="function")S||$g(a);else if(S){var A=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[It]||null)A=S.formAction;else if(md(g)!==null)continue}else A=S.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),$g(a)}}}function Yg(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function yd(n){this._internalRoot=n}gl.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Qt();Og(a,u,n,s,null,null)},gl.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Og(n.current,2,null,n,null,null),Xa(),s[So]=null}};function gl(n){this._internalRoot=n}gl.prototype.unstable_scheduleHydration=function(n){if(n){var s=nh();n={blockedOn:null,target:n,priority:s};for(var a=0;a<xi.length&&s!==0&&s<xi[a].priority;a++);xi.splice(a,0,n),a===0&&Bg(n)}};var Jg=e.version;if(Jg!=="19.2.0")throw Error(o(527,Jg,"19.2.0"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var AE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{Hi=yl.inject(AE),wt=yl}catch{}}return Ar.createRoot=function(n,s){if(!r(n))throw Error(o(299));var a=!1,u="",g=em,v=tm,S=nm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Lg(n,1,!1,null,null,a,u,null,g,v,S,Yg),n[So]=s.current,Wc(n),new yd(s)},Ar.hydrateRoot=function(n,s,a){if(!r(n))throw Error(o(299));var u=!1,g="",v=em,S=tm,A=nm,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=Lg(n,1,!0,s,a??null,u,g,N,v,S,A,Yg),s.context=kg(null),a=s.current,u=Qt(),u=au(u),g=mi(u),g.callback=null,gi(a,g,u),a=u,s.current.lanes=a,Nn(s,a),bn(s),n[So]=s.current,Wc(n),new gl(s)},Ar.version="19.2.0",Ar}var iy;function PE(){if(iy)return Td.exports;iy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Td.exports=UE(),Td.exports}var LE=PE();var oy="popstate";function kE(t={}){function e(o,r){let{pathname:l,search:c,hash:d}=o.location;return Ld("",{pathname:l,search:c,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(o,r){return typeof r=="string"?r:Br(r)}return qE(e,i,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OE(){return Math.random().toString(36).substring(2,10)}function sy(t,e){return{usr:t.state,key:t.key,idx:e}}function Ld(t,e,i=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ts(e):e,state:i,key:e&&e.key||o||OE()}}function Br({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Ts(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function qE(t,e,i,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,d="POP",p=null,h=y();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function y(){return(c.state||{idx:null}).idx}function _(){d="POP";let w=y(),R=w==null?null:w-h;h=w,p&&p({action:d,location:M.location,delta:R})}function T(w,R){d="PUSH";let D=Ld(M.location,w,R);h=y()+1;let P=sy(D,h),J=M.createHref(D);try{c.pushState(P,"",J)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(J)}l&&p&&p({action:d,location:M.location,delta:1})}function C(w,R){d="REPLACE";let D=Ld(M.location,w,R);h=y();let P=sy(D,h),J=M.createHref(D);c.replaceState(P,"",J),l&&p&&p({action:d,location:M.location,delta:0})}function b(w){return GE(w)}let M={get action(){return d},get location(){return t(r,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(oy,_),p=w,()=>{r.removeEventListener(oy,_),p=null}},createHref(w){return e(r,w)},createURL:b,encodeLocation(w){let R=b(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:C,go(w){return c.go(w)}};return M}function GE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(i,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:Br(t);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function R0(t,e,i="/"){return HE(t,e,i,!1)}function HE(t,e,i,o){let r=typeof e=="string"?Ts(e):e,l=ti(r.pathname||"/",i);if(l==null)return null;let c=N0(t);zE(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let h=WE(l);d=XE(c[p],h,o)}return d}function N0(t,e=[],i=[],o="",r=!1){let l=(c,d,p=r,h)=>{let y={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Ke(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=jn([o,y.relativePath]),T=i.concat(y);c.children&&c.children.length>0&&(Ke(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),N0(c.children,e,T,_,p)),!(c.path==null&&!c.index)&&e.push({path:_,score:KE(_,c.index),routesMeta:T})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of x0(c.path))l(c,d,!0,p)}),e}function x0(t){let e=t.split("/");if(e.length===0)return[];let[i,...o]=e,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=x0(o.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),r&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function zE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:QE(e.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var VE=/^:[\w-]+$/,BE=3,FE=2,$E=1,YE=10,JE=-2,ry=t=>t==="*";function KE(t,e){let i=t.split("/"),o=i.length;return i.some(ry)&&(o+=JE),e&&(o+=FE),i.filter(r=>!ry(r)).reduce((r,l)=>r+(VE.test(l)?BE:l===""?$E:YE),o)}function QE(t,e){return t.length===e.length&&t.slice(0,-1).every((o,r)=>o===e[r])?t[t.length-1]-e[e.length-1]:0}function XE(t,e,i=!1){let{routesMeta:o}=t,r={},l="/",c=[];for(let d=0;d<o.length;++d){let p=o[d],h=d===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=Dl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),T=p.route;if(!_&&h&&i&&!o[o.length-1].route.index&&(_=Dl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:jn([l,_.pathname]),pathnameBase:iC(jn([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=jn([l,_.pathnameBase]))}return c}function Dl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,o]=ZE(t.path,t.caseSensitive,t.end),r=e.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:o.reduce((h,{paramName:y,isOptional:_},T)=>{if(y==="*"){let b=d[T]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const C=d[T];return _&&!C?h[y]=void 0:h[y]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function ZE(t,e=!1,i=!0){dn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(o.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function WE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ti(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,o=t.charAt(i);return o&&o!=="/"?null:t.slice(i)||"/"}var jE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eC=t=>jE.test(t);function tC(t,e="/"){let{pathname:i,search:o="",hash:r=""}=typeof t=="string"?Ts(t):t,l;if(i)if(eC(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),dn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=ay(i.substring(1),"/"):l=ay(i,e)}else l=e;return{pathname:l,search:oC(o),hash:sC(r)}}function ay(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function Ad(t,e,i,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nC(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function I0(t){let e=nC(t);return e.map((i,o)=>o===e.length-1?i.pathname:i.pathnameBase)}function D0(t,e,i,o=!1){let r;typeof t=="string"?r=Ts(t):(r={...t},Ke(!r.pathname||!r.pathname.includes("?"),Ad("?","pathname","search",r)),Ke(!r.pathname||!r.pathname.includes("#"),Ad("#","pathname","hash",r)),Ke(!r.search||!r.search.includes("#"),Ad("#","search","hash",r)));let l=t===""||r.pathname==="",c=l?"/":r.pathname,d;if(c==null)d=i;else{let _=e.length-1;if(!o&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}d=_>=0?e[_]:"/"}let p=tC(r,d),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var jn=t=>t.join("/").replace(/\/\/+/g,"/"),iC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var U0=["POST","PUT","PATCH","DELETE"];new Set(U0);var aC=["GET",...U0];new Set(aC);var Ss=U.createContext(null);Ss.displayName="DataRouter";var $l=U.createContext(null);$l.displayName="DataRouterState";U.createContext(!1);var P0=U.createContext({isTransitioning:!1});P0.displayName="ViewTransition";var lC=U.createContext(new Map);lC.displayName="Fetchers";var uC=U.createContext(null);uC.displayName="Await";var Rn=U.createContext(null);Rn.displayName="Navigation";var $r=U.createContext(null);$r.displayName="Location";var oi=U.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Af=U.createContext(null);Af.displayName="RouteError";function cC(t,{relative:e}={}){Ke(Yr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=U.useContext(Rn),{hash:r,pathname:l,search:c}=Jr(t,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:jn([i,l])),o.createHref({pathname:d,search:c,hash:r})}function Yr(){return U.useContext($r)!=null}function Oi(){return Ke(Yr(),"useLocation() may be used only in the context of a <Router> component."),U.useContext($r).location}var L0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k0(t){U.useContext(Rn).static||U.useLayoutEffect(t)}function Yl(){let{isDataRoute:t}=U.useContext(oi);return t?CC():dC()}function dC(){Ke(Yr(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(Ss),{basename:e,navigator:i}=U.useContext(Rn),{matches:o}=U.useContext(oi),{pathname:r}=Oi(),l=JSON.stringify(I0(o)),c=U.useRef(!1);return k0(()=>{c.current=!0}),U.useCallback((p,h={})=>{if(dn(c.current,L0),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=D0(p,JSON.parse(l),r,h.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:jn([e,y.pathname])),(h.replace?i.replace:i.push)(y,h.state,h)},[e,i,l,r,t])}U.createContext(null);function Jr(t,{relative:e}={}){let{matches:i}=U.useContext(oi),{pathname:o}=Oi(),r=JSON.stringify(I0(i));return U.useMemo(()=>D0(t,JSON.parse(r),o,e==="path"),[t,r,o,e])}function fC(t,e){return O0(t,e)}function O0(t,e,i,o,r){Ke(Yr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(Rn),{matches:c}=U.useContext(oi),d=c[c.length-1],p=d?d.params:{},h=d?d.pathname:"/",y=d?d.pathnameBase:"/",_=d&&d.route;{let D=_&&_.path||"";q0(h,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let T=Oi(),C;if(e){let D=typeof e=="string"?Ts(e):e;Ke(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),C=D}else C=T;let b=C.pathname||"/",M=b;if(y!=="/"){let D=y.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=R0(t,{pathname:M});dn(_||w!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),dn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=yC(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:jn([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:jn([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,i,o,r);return e&&R?U.createElement($r.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},R):R}function hC(){let t=EC(),e=rC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),i?U.createElement("pre",{style:r},i):null,c)}var pC=U.createElement(hC,null),mC=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?U.createElement(oi.Provider,{value:this.props.routeContext},U.createElement(Af.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gC({routeContext:t,match:e,children:i}){let o=U.useContext(Ss);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(oi.Provider,{value:t},i)}function yC(t,e=[],i=null,o=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Ke(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:T,errors:C}=i,b=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!C||C[_.route.id]===void 0);if(_.route.lazy||b){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&o?(y,_)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,T)=>{let C,b=!1,M=null,w=null;i&&(C=c&&_.route.id?c[_.route.id]:void 0,M=_.route.errorElement||pC,d&&(p<0&&T===0?(q0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):p===T&&(b=!0,w=_.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),D=()=>{let P;return C?P=M:b?P=w:_.route.Component?P=U.createElement(_.route.Component,null):_.route.element?P=_.route.element:P=y,U.createElement(gC,{match:_,routeContext:{outlet:y,matches:R,isDataRoute:i!=null},children:P})};return i&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?U.createElement(mC,{location:i.location,revalidation:i.revalidation,component:M,error:C,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:h}):D()},null)}function bf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(t){let e=U.useContext(Ss);return Ke(e,bf(t)),e}function _C(t){let e=U.useContext($l);return Ke(e,bf(t)),e}function TC(t){let e=U.useContext(oi);return Ke(e,bf(t)),e}function Mf(t){let e=TC(t),i=e.matches[e.matches.length-1];return Ke(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function SC(){return Mf("useRouteId")}function EC(){let t=U.useContext(Af),e=_C("useRouteError"),i=Mf("useRouteError");return t!==void 0?t:e.errors?.[i]}function CC(){let{router:t}=vC("useNavigate"),e=Mf("useNavigate"),i=U.useRef(!1);return k0(()=>{i.current=!0}),U.useCallback(async(r,l={})=>{dn(i.current,L0),i.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var ly={};function q0(t,e,i){!e&&!ly[t]&&(ly[t]=!0,dn(!1,i))}U.memo(AC);function AC({routes:t,future:e,state:i,unstable_onError:o}){return O0(t,void 0,i,o,e)}function ss(t){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bC({basename:t="/",children:e=null,location:i,navigationType:o="POP",navigator:r,static:l=!1}){Ke(!Yr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=U.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=Ts(i));let{pathname:p="/",search:h="",hash:y="",state:_=null,key:T="default"}=i,C=U.useMemo(()=>{let b=ti(p,c);return b==null?null:{location:{pathname:b,search:h,hash:y,state:_,key:T},navigationType:o}},[c,p,h,y,_,T,o]);return dn(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:U.createElement(Rn.Provider,{value:d},U.createElement($r.Provider,{children:e,value:C}))}function MC({children:t,location:e}){return fC(kd(t),e)}function kd(t,e=[]){let i=[];return U.Children.forEach(t,(o,r)=>{if(!U.isValidElement(o))return;let l=[...e,r];if(o.type===U.Fragment){i.push.apply(i,kd(o.props.children,l));return}Ke(o.type===ss,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=kd(o.props.children,l)),i.push(c)}),i}var Cl="get",Al="application/x-www-form-urlencoded";function Jl(t){return t!=null&&typeof t.tagName=="string"}function wC(t){return Jl(t)&&t.tagName.toLowerCase()==="button"}function RC(t){return Jl(t)&&t.tagName.toLowerCase()==="form"}function NC(t){return Jl(t)&&t.tagName.toLowerCase()==="input"}function xC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IC(t,e){return t.button===0&&(!e||e==="_self")&&!xC(t)}function Od(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let o=t[i];return e.concat(Array.isArray(o)?o.map(r=>[i,r]):[[i,o]])},[]))}function DC(t,e){let i=Od(t);return e&&e.forEach((o,r)=>{i.has(r)||e.getAll(r).forEach(l=>{i.append(r,l)})}),i}var vl=null;function UC(){if(vl===null)try{new FormData(document.createElement("form"),0),vl=!1}catch{vl=!0}return vl}var PC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bd(t){return t!=null&&!PC.has(t)?(dn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Al}"`),null):t}function LC(t,e){let i,o,r,l,c;if(RC(t)){let d=t.getAttribute("action");o=d?ti(d,e):null,i=t.getAttribute("method")||Cl,r=bd(t.getAttribute("enctype"))||Al,l=new FormData(t)}else if(wC(t)||NC(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(o=p?ti(p,e):null,i=t.getAttribute("formmethod")||d.getAttribute("method")||Cl,r=bd(t.getAttribute("formenctype"))||bd(d.getAttribute("enctype"))||Al,l=new FormData(d,t),!UC()){let{name:h,type:y,value:_}=t;if(y==="image"){let T=h?`${h}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else h&&l.append(h,_)}}else{if(Jl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Cl,o=null,r=Al,c=t}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kC(t,e,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return o.pathname==="/"?o.pathname=`_root.${i}`:e&&ti(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function OC(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GC(t,e,i){let o=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await OC(l,i);return c.links?c.links():[]}return[]}));return BC(o.flat(1).filter(qC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function uy(t,e,i,o,r,l){let c=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,d=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>c(p,h)||d(p,h)):l==="data"?e.filter((p,h)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,h)||d(p,h))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function HC(t,e,{includeHydrateFallback:i}={}){return zC(t.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function zC(t){return[...new Set(t)]}function VC(t){let e={},i=Object.keys(t).sort();for(let o of i)e[o]=t[o];return e}function BC(t,e){let i=new Set;return new Set(e),t.reduce((o,r)=>{let l=JSON.stringify(VC(r));return i.has(l)||(i.add(l),o.push({key:l,link:r})),o},[])}function G0(){let t=U.useContext(Ss);return wf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function FC(){let t=U.useContext($l);return wf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Rf=U.createContext(void 0);Rf.displayName="FrameworkContext";function H0(){let t=U.useContext(Rf);return wf(t,"You must render this element inside a <HydratedRouter> element"),t}function $C(t,e){let i=U.useContext(Rf),[o,r]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:_}=e,T=U.useRef(null);U.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let M=R=>{R.forEach(D=>{c(D.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return T.current&&w.observe(T.current),()=>{w.disconnect()}}},[t]),U.useEffect(()=>{if(o){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[o]);let C=()=>{r(!0)},b=()=>{r(!1),c(!1)};return i?t!=="intent"?[l,T,{}]:[l,T,{onFocus:br(d,C),onBlur:br(p,b),onMouseEnter:br(h,C),onMouseLeave:br(y,b),onTouchStart:br(_,C)}]:[!1,T,{}]}function br(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function YC({page:t,...e}){let{router:i}=G0(),o=U.useMemo(()=>R0(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?U.createElement(KC,{page:t,matches:o,...e}):null}function JC(t){let{manifest:e,routeModules:i}=H0(),[o,r]=U.useState([]);return U.useEffect(()=>{let l=!1;return GC(t,e,i).then(c=>{l||r(c)}),()=>{l=!0}},[t,e,i]),o}function KC({page:t,matches:e,...i}){let o=Oi(),{manifest:r,routeModules:l}=H0(),{basename:c}=G0(),{loaderData:d,matches:p}=FC(),h=U.useMemo(()=>uy(t,e,p,r,o,"data"),[t,e,p,r,o]),y=U.useMemo(()=>uy(t,e,p,r,o,"assets"),[t,e,p,r,o]),_=U.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let b=new Set,M=!1;if(e.forEach(R=>{let D=r.routes[R.route.id];!D||!D.hasLoader||(!h.some(P=>P.route.id===R.route.id)&&R.route.id in d&&l[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:b.add(R.route.id))}),b.size===0)return[];let w=kC(t,c,"data");return M&&b.size>0&&w.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,d,o,r,h,e,t,l]),T=U.useMemo(()=>HC(y,r),[y,r]),C=JC(y);return U.createElement(U.Fragment,null,_.map(b=>U.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),T.map(b=>U.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),C.map(({key:b,link:M})=>U.createElement("link",{key:b,nonce:i.nonce,...M})))}function QC(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var z0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{z0&&(window.__reactRouterVersion="7.9.6")}catch{}function XC({basename:t,children:e,window:i}){let o=U.useRef();o.current==null&&(o.current=kE({window:i,v5Compat:!0}));let r=o.current,[l,c]=U.useState({action:r.action,location:r.location}),d=U.useCallback(p=>{U.startTransition(()=>c(p))},[c]);return U.useLayoutEffect(()=>r.listen(d),[r,d]),U.createElement(bC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B0=U.forwardRef(function({onClick:e,discover:i="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:d,target:p,to:h,preventScrollReset:y,viewTransition:_,...T},C){let{basename:b}=U.useContext(Rn),M=typeof h=="string"&&V0.test(h),w,R=!1;if(typeof h=="string"&&M&&(w=h,z0))try{let ee=new URL(window.location.href),le=h.startsWith("//")?new URL(ee.protocol+h):new URL(h),pe=ti(le.pathname,b);le.origin===ee.origin&&pe!=null?h=pe+le.search+le.hash:R=!0}catch{dn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=cC(h,{relative:r}),[P,J,B]=$C(o,T),W=jC(h,{replace:c,state:d,target:p,preventScrollReset:y,relative:r,viewTransition:_});function Q(ee){e&&e(ee),ee.defaultPrevented||W(ee)}let re=U.createElement("a",{...T,...B,href:w||D,onClick:R||l?e:Q,ref:QC(C,J),target:p,"data-discover":!M&&i==="render"?"true":void 0});return P&&!M?U.createElement(U.Fragment,null,re,U.createElement(YC,{page:D})):re});B0.displayName="Link";var F0=U.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:d,children:p,...h},y){let _=Jr(c,{relative:h.relative}),T=Oi(),C=U.useContext($l),{navigator:b,basename:M}=U.useContext(Rn),w=C!=null&&sA(_)&&d===!0,R=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,D=T.pathname,P=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(D=D.toLowerCase(),P=P?P.toLowerCase():null,R=R.toLowerCase()),P&&M&&(P=ti(P,M)||P);const J=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=D===R||!r&&D.startsWith(R)&&D.charAt(J)==="/",W=P!=null&&(P===R||!r&&P.startsWith(R)&&P.charAt(R.length)==="/"),Q={isActive:B,isPending:W,isTransitioning:w},re=B?e:void 0,ee;typeof o=="function"?ee=o(Q):ee=[o,B?"active":null,W?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let le=typeof l=="function"?l(Q):l;return U.createElement(B0,{...h,"aria-current":re,className:ee,ref:y,style:le,to:c,viewTransition:d},typeof p=="function"?p(Q):p)});F0.displayName="NavLink";var ZC=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:o,replace:r,state:l,method:c=Cl,action:d,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:_,...T},C)=>{let b=iA(),M=oA(d,{relative:h}),w=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&V0.test(d),D=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let J=P.nativeEvent.submitter,B=J?.getAttribute("formmethod")||c;b(J||P.currentTarget,{fetcherKey:e,method:B,navigate:i,replace:r,state:l,relative:h,preventScrollReset:y,viewTransition:_})};return U.createElement("form",{ref:C,method:w,action:M,onSubmit:o?p:D,...T,"data-discover":!R&&t==="render"?"true":void 0})});ZC.displayName="Form";function WC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $0(t){let e=U.useContext(Ss);return Ke(e,WC(t)),e}function jC(t,{target:e,replace:i,state:o,preventScrollReset:r,relative:l,viewTransition:c}={}){let d=Yl(),p=Oi(),h=Jr(t,{relative:l});return U.useCallback(y=>{if(IC(y,e)){y.preventDefault();let _=i!==void 0?i:Br(p)===Br(h);d(t,{replace:_,state:o,preventScrollReset:r,relative:l,viewTransition:c})}},[p,d,h,i,o,e,t,r,l,c])}function eA(t){dn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(Od(t)),i=U.useRef(!1),o=Oi(),r=U.useMemo(()=>DC(o.search,i.current?null:e.current),[o.search]),l=Yl(),c=U.useCallback((d,p)=>{const h=Od(typeof d=="function"?d(new URLSearchParams(r)):d);i.current=!0,l("?"+h,p)},[l,r]);return[r,c]}var tA=0,nA=()=>`__${String(++tA)}__`;function iA(){let{router:t}=$0("useSubmit"),{basename:e}=U.useContext(Rn),i=SC();return U.useCallback(async(o,r={})=>{let{action:l,method:c,encType:d,formData:p,body:h}=LC(o,e);if(r.navigate===!1){let y=r.fetcherKey||nA();await t.fetch(y,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,i])}function oA(t,{relative:e}={}){let{basename:i}=U.useContext(Rn),o=U.useContext(oi);Ke(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...Jr(t||".",{relative:e})},c=Oi();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(_=>_).forEach(_=>d.append("index",_));let y=d.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:jn([i,l.pathname])),Br(l)}function sA(t,{relative:e}={}){let i=U.useContext(P0);Ke(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=$0("useViewTransitionState"),r=Jr(t,{relative:e});if(!i.isTransitioning)return!1;let l=ti(i.currentLocation.pathname,o)||i.currentLocation.pathname,c=ti(i.nextLocation.pathname,o)||i.nextLocation.pathname;return Dl(r.pathname,c)!=null||Dl(r.pathname,l)!=null}function Tt(t){if(typeof t=="number")return(Math.abs(t*2654435761)>>>0).toString(16);if(typeof t=="boolean")return t?"1":"0";if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string"){let e=2166136261;for(let i=0;i<t.length;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e=e>>>0;return e.toString(16)}if(Array.isArray(t)){let e=2166136261;for(let i=0;i<t.length;i++){e^=(i+1)*2654435761;const o=Tt(t[i]);for(let r=0;r<o.length;r++)e^=o.charCodeAt(r),e*=16777619,e=e>>>0}return e.toString(16)}if(typeof t=="object"){let e=2166136261;const i=Object.keys(t).sort();for(let o=0;o<i.length;o++){const r=i[o],l=Tt(r);e^=parseInt(l,16),e*=16777619,e=e>>>0;const c=Tt(t[r]);e^=parseInt(c,16),e*=16777619,e=e>>>0}return e.toString(16)}return Tt(String(t))}const et={Remove:"remove",Replace:"replace",Add:"add"},Y0=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),rA=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),bl=Symbol.iterator,Zt={mutable:"mutable",immutable:"immutable"},Nf={};function Pr(t,e){return t instanceof Map?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function cy(t,e){if(e in t){let i=Reflect.getPrototypeOf(t);for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,e);if(o)return o;i=Reflect.getPrototypeOf(i)}}}function xf(t){return Object.getPrototypeOf(t)===Set.prototype}function If(t){return Object.getPrototypeOf(t)===Map.prototype}function Xt(t){var e;return(e=t.copy)!==null&&e!==void 0?e:t.original}function Pi(t){return!!Ae(t)}function Ae(t){return typeof t!="object"?null:t?.[Y0]}function Df(t){var e;const i=Ae(t);return i?(e=i.copy)!==null&&e!==void 0?e:i.original:t}function yn(t,e){if(!t||typeof t!="object")return!1;let i;return Object.getPrototypeOf(t)===Object.prototype||Array.isArray(t)||t instanceof Map||t instanceof Set||!!e?.mark&&((i=e.mark(t,Zt))===Zt.immutable||typeof i=="function")}function J0(t,e=[]){if(Object.hasOwnProperty.call(t,"key")){const i=t.parent.copy,o=Ae(ni(i,t.key));if(o!==null&&o?.original!==t.original)return null;const r=t.parent.type===3,l=r?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(r&&i.size>l||Pr(i,l)))return null;e.push(l)}if(t.parent)return J0(t.parent,e);e.reverse();try{aA(t.copy,e)}catch{return null}return e}function po(t){return Array.isArray(t)?1:t instanceof Map?2:t instanceof Set?3:0}function ni(t,e){return po(t)===2?t.get(e):t[e]}function Kr(t,e,i){po(t)===2?t.set(e,i):t[e]=i}function Md(t,e){const i=Ae(t);return(i?Xt(i):t)[e]}function ei(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function qd(t){if(t)for(;t.finalities.revoke.length>0;)t.finalities.revoke.pop()()}function fo(t,e){return e?t:[""].concat(t).map(i=>{const o=`${i}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function aA(t,e){for(let i=0;i<e.length-1;i+=1){const o=e[i];if(t=ni(po(t)===3?Array.from(t):t,o),typeof t!="object")throw new Error(`Cannot resolve patch at '${e.join("/")}'.`)}return t}function lA(t){const e=Object.create(Object.getPrototypeOf(t));return Reflect.ownKeys(t).forEach(i=>{let o=Reflect.getOwnPropertyDescriptor(t,i);if(o.enumerable&&o.configurable&&o.writable){e[i]=t[i];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]}),Reflect.defineProperty(e,i,o)}),e}const uA=Object.prototype.propertyIsEnumerable;function K0(t,e){let i;if(Array.isArray(t))return Array.prototype.concat.call(t);if(t instanceof Set){if(!xf(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t.values())}return Set.prototype.difference?Set.prototype.difference.call(t,new Set):new Set(t.values())}else if(t instanceof Map){if(!If(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t)}return new Map(t)}else if(e?.mark&&(i=e.mark(t,Zt),i!==void 0)&&i!==Zt.mutable){if(i===Zt.immutable)return lA(t);if(typeof i=="function"){if(e.enablePatches||e.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return i()}throw new Error(`Unsupported mark result: ${i}`)}else if(typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype){const o={};return Object.keys(t).forEach(r=>{o[r]=t[r]}),Object.getOwnPropertySymbols(t).forEach(r=>{uA.call(t,r)&&(o[r]=t[r])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function xt(t){t.copy||(t.copy=K0(t.original,t.options))}function Nr(t){if(!yn(t))return Df(t);if(Array.isArray(t))return t.map(Nr);if(t instanceof Map){const i=Array.from(t.entries()).map(([o,r])=>[o,Nr(r)]);if(!If(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Map(i)}if(t instanceof Set){const i=Array.from(t).map(Nr);if(!xf(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Set(i)}const e=Object.create(Object.getPrototypeOf(t));for(const i in t)e[i]=Nr(t[i]);return e}function Ml(t){return Pi(t)?Nr(t):t}function wn(t){var e;t.assignedMap=(e=t.assignedMap)!==null&&e!==void 0?e:new Map,t.operated||(t.operated=!0,t.parent&&wn(t.parent))}function dy(){throw new Error("Cannot modify frozen object")}function rs(t,e,i,o,r){{i=i??new WeakMap,o=o??[],r=r??[];const c=i.has(t)?i.get(t):t;if(o.length>0){const d=o.indexOf(c);if(c&&typeof c=="object"&&d!==-1)throw o[0]===c?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${r.slice(0,d).map((p,h)=>{if(typeof p=="symbol")return`[${p.toString()}]`;const y=o[h];return typeof p=="object"&&(y instanceof Map||y instanceof Set)?Array.from(y.keys()).indexOf(p):p}).join("/")}`);o.push(c),r.push(e)}else o.push(c)}if(Object.isFrozen(t)||Pi(t)){o.pop(),r.pop();return}switch(po(t)){case 2:for(const[d,p]of t)rs(d,d,i,o,r),rs(p,d,i,o,r);t.set=t.clear=t.delete=dy;break;case 3:for(const d of t)rs(d,d,i,o,r);t.add=t.clear=t.delete=dy;break;case 1:Object.freeze(t);let c=0;for(const d of t)rs(d,c,i,o,r),c+=1;break;default:Object.freeze(t),Object.keys(t).forEach(d=>{const p=t[d];rs(p,d,i,o,r)})}o.pop(),r.pop()}function Uf(t,e){const i=po(t);if(i===0)Reflect.ownKeys(t).forEach(o=>{e(o,t[o],t)});else if(i===1){let o=0;for(const r of t)e(o,r,t),o+=1}else t.forEach((o,r)=>e(r,o,t))}function Q0(t,e,i){if(Pi(t)||!yn(t,i)||e.has(t)||Object.isFrozen(t))return;const o=t instanceof Set,r=o?new Map:void 0;if(e.add(t),Uf(t,(l,c)=>{var d;if(Pi(c)){const p=Ae(c);xt(p);const h=!((d=p.assignedMap)===null||d===void 0)&&d.size||p.operated?p.copy:p.original;Kr(o?r:t,l,h)}else Q0(c,e,i)}),r){const l=t,c=Array.from(l);l.clear(),c.forEach(d=>{l.add(r.has(d)?r.get(d):d)})}}function cA(t,e){const i=t.type===3?t.setMap:t.copy;t.finalities.revoke.length>1&&t.assignedMap.get(e)&&i&&Q0(ni(i,e),t.finalities.handledSet,t.options)}function Gd(t){t.type===3&&t.copy&&(t.copy.clear(),t.setMap.forEach(e=>{t.copy.add(Df(e))}))}function Hd(t,e,i,o){if(t.operated&&t.assignedMap&&t.assignedMap.size>0&&!t.finalized){if(i&&o){const l=J0(t);l&&e(t,l,i,o)}t.finalized=!0}}function Pf(t,e,i,o){const r=Ae(i);r&&(r.callbacks||(r.callbacks=[]),r.callbacks.push((l,c)=>{var d;const p=t.type===3?t.setMap:t.copy;if(ei(ni(p,e),i)){let h=r.original;r.copy&&(h=r.copy),Gd(t),Hd(t,o,l,c),t.options.enableAutoFreeze&&(t.options.updatedValues=(d=t.options.updatedValues)!==null&&d!==void 0?d:new WeakMap,t.options.updatedValues.set(h,r.original)),Kr(p,e,h)}}),t.options.enableAutoFreeze&&r.finalities!==t.finalities&&(t.options.enableAutoFreeze=!1)),yn(i,t.options)&&t.finalities.draft.push(()=>{const l=t.type===3?t.setMap:t.copy;ei(ni(l,e),i)&&cA(t,e)})}function dA(t,e,i,o,r){let{original:l,assignedMap:c,options:d}=t,p=t.copy;p.length<l.length&&([l,p]=[p,l],[i,o]=[o,i]);for(let h=0;h<l.length;h+=1)if(c.get(h.toString())&&p[h]!==l[h]){const y=e.concat([h]),_=fo(y,r);i.push({op:et.Replace,path:_,value:Ml(p[h])}),o.push({op:et.Replace,path:_,value:Ml(l[h])})}for(let h=l.length;h<p.length;h+=1){const y=e.concat([h]),_=fo(y,r);i.push({op:et.Add,path:_,value:Ml(p[h])})}if(l.length<p.length){const{arrayLengthAssignment:h=!0}=d.enablePatches;if(h){const y=e.concat(["length"]),_=fo(y,r);o.push({op:et.Replace,path:_,value:l.length})}else for(let y=p.length;l.length<y;y-=1){const _=e.concat([y-1]),T=fo(_,r);o.push({op:et.Remove,path:T})}}}function fA({original:t,copy:e,assignedMap:i},o,r,l,c){i.forEach((d,p)=>{const h=ni(t,p),y=Ml(ni(e,p)),_=d?Pr(t,p)?et.Replace:et.Add:et.Remove;if(ei(h,y)&&_===et.Replace)return;const T=o.concat(p),C=fo(T,c);r.push(_===et.Remove?{op:_,path:C}:{op:_,path:C,value:y}),l.push(_===et.Add?{op:et.Remove,path:C}:_===et.Remove?{op:et.Add,path:C,value:h}:{op:et.Replace,path:C,value:h})})}function hA({original:t,copy:e},i,o,r,l){let c=0;t.forEach(d=>{if(!e.has(d)){const p=i.concat([c]),h=fo(p,l);o.push({op:et.Remove,path:h,value:d}),r.unshift({op:et.Add,path:h,value:d})}c+=1}),c=0,e.forEach(d=>{if(!t.has(d)){const p=i.concat([c]),h=fo(p,l);o.push({op:et.Add,path:h,value:d}),r.unshift({op:et.Remove,path:h,value:d})}c+=1})}function Fr(t,e,i,o){const{pathAsArray:r=!0}=t.options.enablePatches;switch(t.type){case 0:case 2:return fA(t,e,i,o,r);case 1:return dA(t,e,i,o,r);case 3:return hA(t,e,i,o,r)}}const Ul=(t,e,i=!1)=>{if(typeof t=="object"&&t!==null&&(!yn(t,e)||i))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},zd={get size(){return Xt(Ae(this)).size},has(t){return Xt(Ae(this)).has(t)},set(t,e){const i=Ae(this),o=Xt(i);return(!o.has(t)||!ei(o.get(t),e))&&(xt(i),wn(i),i.assignedMap.set(t,!0),i.copy.set(t,e),Pf(i,t,e,Fr)),this},delete(t){if(!this.has(t))return!1;const e=Ae(this);return xt(e),wn(e),e.original.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.copy.delete(t),!0},clear(){const t=Ae(this);if(this.size){xt(t),wn(t),t.assignedMap=new Map;for(const[e]of t.original)t.assignedMap.set(e,!1);t.copy.clear()}},forEach(t,e){const i=Ae(this);Xt(i).forEach((o,r)=>{t.call(e,this.get(r),r,this)})},get(t){var e,i;const o=Ae(this),r=Xt(o).get(t),l=((i=(e=o.options).mark)===null||i===void 0?void 0:i.call(e,r,Zt))===Zt.mutable;if(o.options.strict&&Ul(r,o.options,l),l||o.finalized||!yn(r,o.options)||r!==o.original.get(t))return r;const c=Nf.createDraft({original:r,parentDraft:o,key:t,finalities:o.finalities,options:o.options});return xt(o),o.copy.set(t,c),c},keys(){return Xt(Ae(this)).keys()},values(){const t=this.keys();return{[bl]:()=>this.values(),next:()=>{const e=t.next();return e.done?e:{done:!1,value:this.get(e.value)}}}},entries(){const t=this.keys();return{[bl]:()=>this.entries(),next:()=>{const e=t.next();if(e.done)return e;const i=this.get(e.value);return{done:!1,value:[e.value,i]}}}},[bl](){return this.entries()}},pA=Reflect.ownKeys(zd),fy=(t,e,{isValuesIterator:i})=>()=>{var o,r;const l=e.next();if(l.done)return l;const c=l.value;let d=t.setMap.get(c);const p=Ae(d),h=((r=(o=t.options).mark)===null||r===void 0?void 0:r.call(o,d,Zt))===Zt.mutable;if(t.options.strict&&Ul(c,t.options,h),!h&&!p&&yn(c,t.options)&&!t.finalized&&t.original.has(c)){const y=Nf.createDraft({original:c,parentDraft:t,key:c,finalities:t.finalities,options:t.options});t.setMap.set(c,y),d=y}else p&&(d=p.proxy);return{done:!1,value:i?d:[d,d]}},Pl={get size(){return Ae(this).setMap.size},has(t){const e=Ae(this);if(e.setMap.has(t))return!0;xt(e);const i=Ae(t);return!!(i&&e.setMap.has(i.original))},add(t){const e=Ae(this);return this.has(t)||(xt(e),wn(e),e.assignedMap.set(t,!0),e.setMap.set(t,t),Pf(e,t,t,Fr)),this},delete(t){if(!this.has(t))return!1;const e=Ae(this);xt(e),wn(e);const i=Ae(t);return i&&e.setMap.has(i.original)?(e.assignedMap.set(i.original,!1),e.setMap.delete(i.original)):(!i&&e.setMap.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.setMap.delete(t))},clear(){if(!this.size)return;const t=Ae(this);xt(t),wn(t);for(const e of t.original)t.assignedMap.set(e,!1);t.setMap.clear()},values(){const t=Ae(this);xt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:fy(t,e,{isValuesIterator:!0})}},entries(){const t=Ae(this);xt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:fy(t,e,{isValuesIterator:!1})}},keys(){return this.values()},[bl](){return this.values()},forEach(t,e){const i=this.values();let o=i.next();for(;!o.done;)t.call(e,o.value,o.value,this),o=i.next()}};Set.prototype.difference&&Object.assign(Pl,{intersection(t){return Set.prototype.intersection.call(new Set(this.values()),t)},union(t){return Set.prototype.union.call(new Set(this.values()),t)},difference(t){return Set.prototype.difference.call(new Set(this.values()),t)},symmetricDifference(t){return Set.prototype.symmetricDifference.call(new Set(this.values()),t)},isSubsetOf(t){return Set.prototype.isSubsetOf.call(new Set(this.values()),t)},isSupersetOf(t){return Set.prototype.isSupersetOf.call(new Set(this.values()),t)},isDisjointFrom(t){return Set.prototype.isDisjointFrom.call(new Set(this.values()),t)}});const mA=Reflect.ownKeys(Pl),X0={get(t,e,i){var o,r;const l=(o=t.copy)===null||o===void 0?void 0:o[e];if(l&&t.finalities.draftsCache.has(l))return l;if(e===Y0)return t;let c;if(t.options.mark){const h=e==="size"&&(t.original instanceof Map||t.original instanceof Set)?Reflect.get(t.original,e):Reflect.get(t.original,e,i);if(c=t.options.mark(h,Zt),c===Zt.mutable)return t.options.strict&&Ul(h,t.options,!0),h}const d=Xt(t);if(d instanceof Map&&pA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(zd,"size").get.call(t.proxy):zd[e].bind(t.proxy);if(d instanceof Set&&mA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Pl,"size").get.call(t.proxy):Pl[e].bind(t.proxy);if(!Pr(d,e)){const h=cy(d,e);return h?"value"in h?h.value:(r=h.get)===null||r===void 0?void 0:r.call(t.proxy):void 0}const p=d[e];if(t.options.strict&&Ul(p,t.options),t.finalized||!yn(p,t.options))return p;if(p===Md(t.original,e)){if(xt(t),t.copy[e]=Lf({original:t.original[e],parentDraft:t,key:t.type===1?Number(e):e,finalities:t.finalities,options:t.options}),typeof c=="function"){const h=Ae(t.copy[e]);return xt(h),wn(h),h.copy}return t.copy[e]}return Pi(p)&&t.finalities.draftsCache.add(p),p},set(t,e,i){var o;if(t.type===3||t.type===2)throw new Error("Map/Set draft does not support any property assignment.");let r;if(t.type===1&&e!=="length"&&!(Number.isInteger(r=Number(e))&&r>=0&&(e===0||r===0||String(r)===String(e))))throw new Error("Only supports setting array indices and the 'length' property.");const l=cy(Xt(t),e);if(l?.set)return l.set.call(t.proxy,i),!0;const c=Md(Xt(t),e),d=Ae(c);return d&&ei(d.original,i)?(t.copy[e]=i,t.assignedMap=(o=t.assignedMap)!==null&&o!==void 0?o:new Map,t.assignedMap.set(e,!1),!0):(ei(i,c)&&(i!==void 0||Pr(t.original,e))||(xt(t),wn(t),Pr(t.original,e)&&ei(i,t.original[e])?t.assignedMap.delete(e):t.assignedMap.set(e,!0),t.copy[e]=i,Pf(t,e,i,Fr)),!0)},has(t,e){return e in Xt(t)},ownKeys(t){return Reflect.ownKeys(Xt(t))},getOwnPropertyDescriptor(t,e){const i=Xt(t),o=Reflect.getOwnPropertyDescriptor(i,e);return o&&{writable:!0,configurable:t.type!==1||e!=="length",enumerable:o.enumerable,value:i[e]}},getPrototypeOf(t){return Reflect.getPrototypeOf(t.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(t,e){var i;return t.type===1?X0.set.call(this,t,e,void 0,t.proxy):(Md(t.original,e)!==void 0||e in t.original?(xt(t),wn(t),t.assignedMap.set(e,!1)):(t.assignedMap=(i=t.assignedMap)!==null&&i!==void 0?i:new Map,t.assignedMap.delete(e)),t.copy&&delete t.copy[e],!0)}};function Lf(t){const{original:e,parentDraft:i,key:o,finalities:r,options:l}=t,c=po(e),d={type:c,finalized:!1,parent:i,original:e,copy:null,proxy:null,finalities:r,options:l,setMap:c===3?new Map(e.entries()):void 0};(o||"key"in t)&&(d.key=o);const{proxy:p,revoke:h}=Proxy.revocable(c===1?Object.assign([],d):d,X0);if(r.revoke.push(h),d.proxy=p,i){const y=i;y.finalities.draft.push((_,T)=>{var C,b;const M=Ae(p);let w=y.type===3?y.setMap:y.copy;const R=ni(w,o),D=Ae(R);if(D){let P=D.original;D.operated&&(P=Df(R)),Gd(D),Hd(D,Fr,_,T),y.options.enableAutoFreeze&&(y.options.updatedValues=(C=y.options.updatedValues)!==null&&C!==void 0?C:new WeakMap,y.options.updatedValues.set(P,D.original)),Kr(w,o,P)}(b=M.callbacks)===null||b===void 0||b.forEach(P=>{P(_,T)})})}else{const y=Ae(p);y.finalities.draft.push((_,T)=>{Gd(y),Hd(y,Fr,_,T)})}return p}Nf.createDraft=Lf;function gA(t,e,i,o,r){var l;const c=Ae(t),d=(l=c?.original)!==null&&l!==void 0?l:t,p=!!e.length;if(c?.operated)for(;c.finalities.draft.length>0;)c.finalities.draft.pop()(i,o);const h=p?e[0]:c?c.operated?c.copy:c.original:t;return c&&qd(c),r&&rs(h,h,c?.options.updatedValues),[h,i&&p?[{op:et.Replace,path:[],value:e[0]}]:i,o&&p?[{op:et.Replace,path:[],value:d}]:o]}function yA(t,e){var i;const o={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let r,l;e.enablePatches&&(r=[],l=[]);const d=((i=e.mark)===null||i===void 0?void 0:i.call(e,t,Zt))===Zt.mutable||!yn(t,e)?t:Lf({original:t,parentDraft:null,finalities:o,options:e});return[d,(p=[])=>{const[h,y,_]=gA(d,p,r,l,e.enableAutoFreeze);return e.enablePatches?[h,y,_]:h}]}function Vd(t){const{rootDraft:e,value:i,useRawReturn:o=!1,isRoot:r=!0}=t;Uf(i,(l,c,d)=>{const p=Ae(c);if(p&&e&&p.finalities===e.finalities){t.isContainDraft=!0;const h=p.original;if(d instanceof Set){const y=Array.from(d);d.clear(),y.forEach(_=>d.add(l===_?h:_))}else Kr(d,l,h)}else typeof c=="object"&&c!==null&&(t.value=c,t.isRoot=!1,Vd(t))}),r&&(t.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function Z0(t){var e;const i=Ae(t);if(!yn(t,i?.options))return t;const o=po(t);if(i&&!i.operated)return i.original;let r;function l(){r=o===2?If(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):o===3?Array.from(i.setMap.values()):K0(t,i?.options)}if(i){i.finalized=!0;try{l()}finally{i.finalized=!1}}else r=t;if(Uf(r,(c,d)=>{if(i&&ei(ni(i.original,c),d))return;const p=Z0(d);p!==d&&(r===t&&l(),Kr(r,c,p))}),o===3){const c=(e=i?.original)!==null&&e!==void 0?e:r;return xf(c)?new Set(r):new(Object.getPrototypeOf(c)).constructor(r)}return r}function hy(t){if(!Pi(t))throw new Error(`current() is only used for Draft, parameter: ${t}`);return Z0(t)}const vA=t=>function e(i,o,r){var l,c,d;if(typeof i=="function"&&typeof o!="function")return function(B,...W){return e(B,Q=>i.call(this,Q,...W),o)};const p=i,h=o;let y=r;if(typeof o!="function"&&(y=o),y!==void 0&&Object.prototype.toString.call(y)!=="[object Object]")throw new Error(`Invalid options: ${y}, 'options' should be an object.`);y=Object.assign(Object.assign({},t),y);const _=Pi(p)?hy(p):p,T=Array.isArray(y.mark)?((B,W)=>{for(const Q of y.mark){if(typeof Q!="function")throw new Error(`Invalid mark: ${Q}, 'mark' should be a function.`);const re=Q(B,W);if(re)return re}}):y.mark,C=(l=y.enablePatches)!==null&&l!==void 0?l:!1,b=(c=y.strict)!==null&&c!==void 0?c:!1,w={enableAutoFreeze:(d=y.enableAutoFreeze)!==null&&d!==void 0?d:!1,mark:T,strict:b,enablePatches:C};if(!yn(_,w)&&typeof _=="object"&&_!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[R,D]=yA(_,w);if(typeof o!="function"){if(!yn(_,w))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[R,D]}let P;try{P=h(R)}catch(B){throw qd(Ae(R)),B}const J=B=>{const W=Ae(R);if(!Pi(B)){if(B!==void 0&&!ei(B,R)&&W?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const re=B?.[rA];if(re){const ee=re[0];return w.strict&&typeof B=="object"&&B!==null&&Vd({rootDraft:W,value:B,useRawReturn:!0}),D([ee])}if(B!==void 0)return typeof B=="object"&&B!==null&&Vd({rootDraft:W,value:B}),D([B])}if(B===R||B===void 0)return D([]);const Q=Ae(B);if(w===Q.options){if(Q.operated)throw new Error("Cannot return a modified child draft.");return D([hy(B)])}return D([B])};return P instanceof Promise?P.then(J,B=>{throw qd(Ae(R)),B}):J(P)},Ll=vA();Object.prototype.constructor.toString();function W0(t,e){const i=Object.keys(t),o=Object.keys(e);return i.length===o.length&&Object.keys(t).every(r=>e.hasOwnProperty(r))}function py(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(i=>e.hasOwnProperty(i)&&t[i]===e[i])}function wl(t,e){return typeof t!="object"||typeof e!="object"||t===null||e===null?t===e:W0(t,e)?Object.keys(t).every(i=>wl(t[i],e[i])):!1}function kf(t){if(!xr(t))return t;const e={};for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=o);return e}function j0(t,e){if(!xr(t)||!xr(e))return e;const i=Object.assign({},t);for(const o of Object.keys(e)){if(e[o]===void 0)continue;if(e[o]===null){delete i[o];continue}const r=xr(t[o])&&xr(e[o]);i[o]=r?j0(t[o],e[o]):e[o]}return i}function xr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function _A(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let l=0;l<e.length-1;l++){const c=e[l];(!(c in o)||typeof o[c]!="object")&&(o[c]=typeof e[l+1]=="number"?[]:{}),o=o[c]}const r=e[e.length-1];Array.isArray(o)&&typeof r=="number"?o.splice(r,0,i):o[r]=i}function my(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let r=0;r<e.length-1;r++){const l=e[r];(!(l in o)||typeof o[l]!="object")&&(o[l]=typeof e[r+1]=="number"?[]:{}),o=o[l]}o[e[e.length-1]]=i}function e_(t,e){if(!t||e.length===0)return;const[i,...o]=e;if(i in t){if(o.length===0){Array.isArray(t)?t.splice(i,1):delete t[i];return}e_(t[i],o),TA(t[i])&&delete t[i]}}function TA(t){return t&&Object.keys(t).length===0}const gy=/ZULU|YEKT|YEKST|YAPT|YAKT|YAKST|XJT|WGT|WGST|WFT|WETDST|WET|WDT|WAT|WAST|WAKT|WADT|VUT|VOLT|VLAT|VLAST|VET|UZT|UZST|UYT|UYST|UTC|UT|ULAT|ULAST|UCT|TVT|TRUT|TOT|TMT|TKT|TJT|TFT|TAHT|SGT|SCT|SAST|SADT|RET|PYT|PYST|PWT|PST|PONT|PMST|PMDT|PKT|PKST|PHT|PGT|PETT|PETST|PET|PDT|OMST|OMSST|NZT|NZST|NZDT|NUT|NST|NPT|NOVT|NOVST|NFT|NDT|MYT|MVT|MUT|MUST|MST|MSK|MSD|MPT|MMT|MHT|MEZ|METDST|MET|MESZ|MEST|MDT|MAWT|MART|MAGT|MAGST|LKT|LINT|LIGT|LHST|LHDT|KST|KRAT|KRAST|KOST|KGT|KGST|KDT|JST|JAYT|IST|IRT|IRKT|IRKST|IOT|IDT|ICT|HST|HKT|GYT|GMT|GILT|GFT|GET|GEST|GAMT|GALT|FNT|FNST|FKT|FKST|FJT|FJST|FET|EST|EGT|EGST|EETDST|EET|EEST|EDT|EAT|EAST|EASST|DDUT|DAVT|CXT|CST|COT|CLT|CLST|CKT|CHUT|CHAST|CHADT|CETDST|CET|CEST|CDT|CCT|CAST|CADT|BTT|BST|BRT|BRST|BRA|BOT|BORT|BNT|BDT|BDST|AZT|AZST|AZOT|AZOST|AWST|AWSST|AST|ART|ARST|ANAT|ANAST|AMT|AMST|ALMT|ALMST|AKST|AKDT|AFT|AEST|AESST|AEDT|ADT|ACWST|ACT|ACST|ACSST|ACDT$/,SA={ZULU:0,YEKT:18e3,YEKST:21600,YAPT:36e3,YAKT:32400,YAKST:32400,XJT:21600,WGT:-10800,WGST:-7200,WFT:43200,WETDST:3600,WET:0,WDT:32400,WAT:3600,WAST:25200,WAKT:43200,WADT:28800,VUT:39600,VOLT:10800,VLAT:36e3,VLAST:36e3,VET:-14400,UZT:18e3,UZST:21600,UYT:-10800,UYST:-7200,UTC:0,UT:0,ULAT:28800,ULAST:32400,UCT:0,TVT:43200,TRUT:36e3,TOT:46800,TMT:18e3,TKT:46800,TJT:18e3,TFT:18e3,TAHT:-36e3,SGT:28800,SCT:14400,SAST:7200,SADT:37800,RET:14400,PYT:-14400,PYST:-10800,PWT:32400,PST:-28800,PONT:39600,PMST:-10800,PMDT:-7200,PKT:18e3,PKST:21600,PHT:28800,PGT:36e3,PETT:43200,PETST:43200,PET:-18e3,PDT:-25200,OMST:21600,OMSST:21600,NZT:43200,NZST:43200,NZDT:46800,NUT:-39600,NST:-12600,NPT:20700,NOVT:25200,NOVST:25200,NFT:-12600,NDT:-9e3,MYT:28800,MVT:18e3,MUT:14400,MUST:18e3,MST:-25200,MSK:10800,MSD:14400,MPT:36e3,MMT:23400,MHT:43200,MEZ:3600,METDST:7200,MET:3600,MESZ:7200,MEST:7200,MDT:-21600,MAWT:18e3,MART:-34200,MAGT:39600,MAGST:39600,LKT:19800,LINT:50400,LIGT:36e3,LHST:37800,LHDT:37800,KST:32400,KRAT:25200,KRAST:25200,KOST:39600,KGT:21600,KGST:21600,KDT:36e3,JST:32400,JAYT:32400,IST:7200,IRT:12600,IRKT:28800,IRKST:28800,IOT:21600,IDT:10800,ICT:25200,HST:-36e3,HKT:28800,GYT:-14400,GMT:0,GILT:43200,GFT:-10800,GET:14400,GEST:14400,GAMT:-32400,GALT:-21600,FNT:-7200,FNST:-3600,FKT:-10800,FKST:-10800,FJT:43200,FJST:46800,FET:10800,EST:-18e3,EGT:-3600,EGST:0,EETDST:10800,EET:7200,EEST:10800,EDT:-14400,EAT:10800,EAST:-21600,EASST:-21600,DDUT:36e3,DAVT:25200,CXT:25200,CST:-21600,COT:-18e3,CLT:-14400,CLST:-10800,CKT:-36e3,CHUT:36e3,CHAST:45900,CHADT:49500,CETDST:7200,CET:3600,CEST:7200,CDT:-18e3,CCT:28800,CAST:34200,CADT:37800,BTT:21600,BST:3600,BRT:-10800,BRST:-7200,BRA:-10800,BOT:-14400,BORT:28800,BNT:28800,BDT:21600,BDST:7200,AZT:14400,AZST:14400,AZOT:-3600,AZOST:0,AWST:28800,AWSST:32400,AST:-14400,ART:-10800,ARST:-10800,ANAT:43200,ANAST:43200,AMT:-14400,AMST:14400,ALMT:21600,ALMST:25200,AKST:-32400,AKDT:-28800,AFT:16200,AEST:36e3,AESST:39600,AEDT:39600,ADT:-10800,ACWST:31500,ACT:-18e3,ACST:34200,ACSST:37800,ACDT:37800};function EA(t){return new Date(t)}function CA(t){return new Date(t+"Z")}const AA=/^(\d+)[\./-](\d+)[\./-](\d+)$/;function bA(t){const e=t.match(AA);if(!e)return null;const[i,o,r,l]=e;return o<=0||r<=0||l<=0?null:o>999?new Date(Date.UTC(o,r-1,l,0,0,0,0)):new Date(Date.UTC(l,o-1,r,0,0,0,0))}function MA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function wA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function RA(t){return new Date(t)}function NA(t){const e=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!t.match(e))throw new Error(`Unable to parse \`${t}\` as a date.`);const o=new Date(t+" UTC");return new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0,0))}function xA(t){const e=/^(.+T.+)([+-])(\d{2})$/,i=t.match(e);if(i){const[,o,r,l]=i,c=`${o}${r}${l}:00`;return new Date(c)}return null}function IA(t){const[e,i]=t.split(", "),[o,r,l]=e.split("/").map(Number),c=i.match(/(\d{1,2}):(\d{2}):(\d{2}) (AM|PM)/);if(!c)throw new Error(`Unable to parse time from: ${t}`);let[,d,p,h,y]=c;return d=Number(d),p=Number(p),h=Number(h),y==="PM"&&d!==12?d+=12:y==="AM"&&d===12&&(d=0),new Date(Date.UTC(l,o-1,r,d,p,h))}function DA(t){switch(t){case"epoch":return new Date(0);case"infinity":case"-infinity":case"today":case"tomorrow":case"yesterday":return null}}function UA(t){const e=t.match(gy);if(!e)return null;const[i]=e,o=SA[i],r=new Date(t.replace(gy,"Z"));return new Date(r.getTime()-o*1e3)}const PA=[bA,wA,NA,IA,RA,CA,xA,MA,EA,DA,UA];function LA(t,e){try{const i=t(e);return i instanceof Date&&!isNaN(i.getTime())?i:null}catch{return null}}function Bd(t){for(const e of PA){const i=LA(e,t);if(i)return i}return null}function kA(t){try{const e=JSON.parse(t);return typeof e=="string"?Bd(e):null}catch{return null}}function Kl(t){if(t!==void 0){if(t===null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Bd(t)||kA(t)||Bd(t.trim());if(!e)throw new Error(`Unable to parse \`${t}\` as a date.`);return e}else if(typeof t=="number")return new Date(t);throw new Error(`Invalid date value \`${t}\`. Expected a date, number, or string, got type ${typeof t}.`)}}function OA(t){return t.cardinality==="one"}function Of(t){return t["value-type"]==="ref"}function qf(t){return t["value-type"]==="blob"}function Es(t,e){return t[e]}function Cs(t,e){return e.reduce((i,o)=>i&&i.get(o),t)}function gn(t,e){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.delete(e[0]);return}const[i,...o]=e;t.has(i)&&gn(t.get(i),o)}function Gt(t,e,i){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.set(e[0],i);return}const[o,...r]=e;let l=t.get(o);l||(l=new Map,t.set(o,l)),Gt(l,r,i)}function t_(t,e,i){const o=new Map,r=new Map,l=new Map;for(const c of e){let[d,p,h,y]=c;const _=Es(t,p);if(!_){console.warn("no such attr",d,t);continue}_["checked-data-type"]==="date"&&i&&(h=Kl(h),c[2]=h),Of(_)&&Gt(l,[h,p,d],c),Gt(o,[d,p,h],c),Gt(r,[p,d,h],c)}return{eav:o,aev:r,vae:l}}function n_(t){const e=new Map,i=new Map,o=new Map,r=new Map;for(const l of Object.values(t)){const c=l["forward-identity"],[d,p,h]=c,y=l["reverse-identity"];if(Gt(o,[p,h],l),qf(l)&&Gt(e,[p,h],l),l["primary?"]&&Gt(i,[p],l),y){const[_,T,C]=y;Gt(r,[T,C],l)}}return{blobAttrs:e,primaryKeys:i,forwardIdents:o,revIdents:r}}function i_(t){return{__type:t.__type,attrs:t.attrs,triples:Ht(t.eav,3),cardinalityInference:t.cardinalityInference,linkIndex:t.linkIndex,useDateObjects:t.useDateObjects}}function o_(t){return Rl(t.attrs,t.triples,t.cardinalityInference,t.linkIndex,t.useDateObjects)}function qA(t,e){return Cs(t.eav,[e])!==void 0}function Gf(t){t.attrIndexes=n_(t.attrs)}function Rl(t,e,i,o,r){const l=t_(t,e,r);return l.useDateObjects=r,l.attrs=t,l.attrIndexes=n_(t),l.cardinalityInference=i,l.linkIndex=o,l.__type="store",l}function Qr(t,e){var i,o;let r;if(Array.isArray(e[0])){const[c,d]=e[0],p=t.aev.get(c);if(!p)return null;r=(i=Ht(p,2).find(y=>y[2]===d))===null||i===void 0?void 0:i[0]}else r=e[0];if(!r)return null;const l=e[2];if(Array.isArray(l)&&l.length===2&&t.aev.get(l[0])){const[c,d]=l,p=t.aev.get(c);if(!p)return null;const y=(o=Ht(p,2).find(M=>M[2]===d))===null||o===void 0?void 0:o[0];if(!y)return null;const[_,T,C,...b]=e;return[r,T,y,...b]}else{const[c,...d]=e;return[r,...d]}}function s_(t,e){const i=Qr(t,e);if(!i)return;const[o,r,l]=i,c=Es(t.attrs,r);c&&(gn(t.eav,[o,r,l]),gn(t.aev,[r,o,l]),Of(c)&&gn(t.vae,[l,r,o]))}let GA=0;function r_(t,e,i){const[o,r,l]=i;let c;const d=Cs(t.ea,[o,r,l]);return d&&(c=d[3]),c||Date.now()*10+GA++}function a_(t,e){var i;const o=Qr(t,e);if(!o)return;let[r,l,c]=o;const d=Es(t.attrs,l);if(!d)return;d["checked-data-type"]==="date"&&t.useDateObjects&&(c=Kl(c));const p=Cs(t.eav,[r,l,c]),h=(i=p?.[3])!==null&&i!==void 0?i:r_(t,d,o),y=[r,l,c,h];OA(d)?(Gt(t.eav,[r,l],new Map([[c,y]])),Gt(t.aev,[l,r],new Map([[c,y]]))):(Gt(t.eav,[r,l,c],y),Gt(t.aev,[l,r,c],y)),Of(d)&&Gt(t.vae,[c,l,r],y)}function HA(t,e){var i;const o=Qr(t,e);if(!o)return;const[r,l,c]=o,d=Es(t.attrs,l);if(!d)return;if(!qf(d))throw new Error("merge operation is not supported for links");const p=Cs(t.eav,[r,l]);if(!p)return;const h=(i=p.values().next())===null||i===void 0?void 0:i.value;if(!h)return;const y=h[2],_=j0(y,c),T=[r,l,_,r_(t,d,h)];Gt(t.eav,[r,l],new Map([[_,T]]))}function Fd(t,e){var i,o;const[r,l]=e,c=Qr(t,[r]);if(!c)return;const[d]=c,p=t.eav.get(d);if(p){for(const y of p.keys()){const _=t.attrs[y];_&&_["on-delete-reverse"]==="cascade"&&Ht(p.get(y),1).forEach(([T,C,b])=>{var M;return Fd(t,[b,(M=_["reverse-identity"])===null||M===void 0?void 0:M[1]])}),(!l||!_||((i=_["forward-identity"])===null||i===void 0?void 0:i[1])===l)&&(gn(t.aev,[y,d]),gn(t.eav,[d,y]))}p.size===0&&gn(t.eav,[d])}const h=t.vae.get(d)&&Ht(t.vae.get(d),2);h&&h.forEach(y=>{var _,T,C;const[b,M,w]=y,R=t.attrs[M];(!l||!R||((_=R["reverse-identity"])===null||_===void 0?void 0:_[1])===l)&&(gn(t.eav,[b,M,w]),gn(t.aev,[M,b,w]),gn(t.vae,[w,M,b])),R&&R["on-delete"]==="cascade"&&((T=R["reverse-identity"])===null||T===void 0?void 0:T[1])===l&&Fd(t,[b,(C=R["forward-identity"])===null||C===void 0?void 0:C[1]])}),((o=t.vae.get(d))===null||o===void 0?void 0:o.size)===0&&gn(t.vae,[d])}function l_(t,e){const i=t_(t.attrs,e,t.useDateObjects);Object.keys(i).forEach(o=>{t[o]=i[o]})}function zA(t,[e]){t.attrs[e.id]=e,Gf(t)}function u_(t){return Ht(t.eav,3)}function VA(t,[e]){if(!t.attrs[e])return;const i=u_(t).filter(([o,r])=>r!==e);delete t.attrs[e],Gf(t),l_(t,i)}function BA(t,[e]){const i=t.attrs[e.id];i&&(t.attrs[e.id]=Object.assign(Object.assign({},i),e),Gf(t),l_(t,u_(t)))}function FA(t,e){const[i,...o]=e;switch(i){case"add-triple":a_(t,o);break;case"deep-merge-triple":HA(t,o);break;case"retract-triple":s_(t,o);break;case"delete-entity":Fd(t,o);break;case"add-attr":zA(t,o);break;case"delete-attr":VA(t,o);break;case"update-attr":BA(t,o);break;case"restore-attr":break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${i}`)}}function Ht(t,e,i=[]){if(!t||e===0)return i;if(e===1){for(const o of t.values())i.push(o);return i}for(const o of t.values())Ht(o,e-1,i);return i}function _l(t,e,i){var o,r;const l=[];if(i?.hasOwnProperty("$not")){for(const d of e.keys())i.$not!==d&&l.push(e.get(d));return l}if(i?.hasOwnProperty("$isNull")){const{attrId:d,isNull:p,reverse:h}=i.$isNull;if(h)for(const y of e.keys()){const _=t.vae.get(y),T=!_||((o=_.get(d))===null||o===void 0?void 0:o.get(null))||!_.get(d);(p?T:!T)&&l.push(e.get(y))}else{const y=t.aev.get(d);for(const _ of e.keys()){const T=!y||((r=y.get(_))===null||r===void 0?void 0:r.get(null))||!y.get(_);(p?T:!T)&&l.push(e.get(_))}}return l}if(i?.$comparator)return Ht(e,1).filter(i.$op);const c=i.in||i.$in||[i];for(const d of c){const p=e.get(d);p&&l.push(p)}return l}function $A(t,e,i){let o="";return t!==void 0&&(o+="e"),e!==void 0&&(o+="a"),i!==void 0&&(o+="v"),o}function YA(t,[e,i,o]){var r,l;switch($A(e,i,o)){case"e":{const d=t.eav.get(e);return Ht(d,2)}case"ea":{const d=(r=t.eav.get(e))===null||r===void 0?void 0:r.get(i);return Ht(d,1)}case"eav":{const d=(l=t.eav.get(e))===null||l===void 0?void 0:l.get(i);return d?_l(t,d,o):[]}case"ev":{const d=t.eav.get(e);if(!d)return[];const p=[];for(const h of d.values())p.push(..._l(t,h,o));return p}case"a":{const d=t.aev.get(i);return Ht(d,2)}case"av":{const d=t.aev.get(i);if(!d)return[];const p=[];for(const h of d.values())p.push(..._l(t,h,o));return p}case"v":{const d=[];for(const p of t.eav.values())for(const h of p.values())d.push(..._l(t,h,o));return d}default:return Ht(t.eav,3)}}function JA(t,e,i){var o;const r={};for(const[l,c]of e.entries()){const d=(o=t.eav.get(i))===null||o===void 0?void 0:o.get(c.id),p=Ht(d,1);for(const h of p)r[l]=h[2]}return r}function Li(t,e,i){var o;return(o=t.attrIndexes.forwardIdents.get(e))===null||o===void 0?void 0:o.get(i)}function c_(t,e,i){var o;return(o=t.attrIndexes.revIdents.get(e))===null||o===void 0?void 0:o.get(i)}function KA(t,e){return t.attrIndexes.blobAttrs.get(e)}function d_(t,e){var i;const o=t.attrIndexes.primaryKeys.get(e);return o||((i=t.attrIndexes.forwardIdents.get(e))===null||i===void 0?void 0:i.get("id"))}function QA(t,e){const i=Qr(t,e);if(!i)return;const[o,r,l]=i;if(Es(t.attrs,r))return Cs(t.eav,[o,r])}function XA(t,e){const i=e.filter(([o,r,l,c,d])=>{if(o!=="add-triple"&&o!=="deep-merge-triple")return!0;const p=d?.mode;if(p!=="create"&&p!=="update")return!0;let h=!1;const y=Es(t.attrs,l);if(y){const _=d_(t,y["forward-identity"][1]);h=!!QA(t,[r,_.id,r])}return!(p==="create"&&h||p==="update"&&!h)});return Ll(t,o=>{i.forEach(r=>{FA(o,r)})})}function ZA(t){return typeof t=="string"&&t.startsWith("?")}function WA(t,e,i){if(i.hasOwnProperty(t)){const o=i[t];return f_(o,e,i)}return Object.assign(Object.assign({},i),{[t]:e})}function yy(t,e,i){return t===e?i:null}function jA(t){switch(typeof t){case"string":return t.startsWith("?")?WA:yy;default:return yy}}const eb=["in","$in","$not","$isNull","$comparator"];function tb(t){for(const e of eb)if(t.hasOwnProperty(e))return!0;return!1}function f_(t,e,i){return i?typeof t=="object"?tb(t)?i:null:jA(t)(t,e,i):null}function nb(t,e,i){return t.reduce((o,r,l)=>{const c=e[l];return f_(r,c,o)},i)}function ib(t,e,i){return rb(t,e,i).map(o=>nb(e,o,i)).filter(o=>o)}function ob(t,e,i){return e.or?e.or.patterns.flatMap(o=>$d(t,o,i)):e.and?e.and.patterns.reduce((o,r)=>$d(t,r,o),i):i.flatMap(o=>ib(t,e,o))}function $d(t,e,i=[{}]){return e.reduce((o,r)=>ob(t,r,o),i)}function Hf(t,e){return Array.isArray(e)?e.map(i=>Hf(t,i)):ZA(e)?t[e]:e}function sb(t,{find:e,where:i}){return $d(t,i).map(r=>Hf(r,e))}function rb(t,e,i){return YA(t,Hf(i,e))}const ab=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ys(t){return typeof t=="string"&&ab.test(t)}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function lb(t,e=0){return(_t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]).toLowerCase()}let wd;const ub=new Uint8Array(16);function cb(){if(!wd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wd=crypto.getRandomValues.bind(crypto)}return wd(ub)}const db=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vy={randomUUID:db};function fb(t,e,i){if(vy.randomUUID&&!t)return vy.randomUUID();t=t||{};const o=t.random??t.rng?.()??cb();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,lb(o)}function _y(t){const e=t.replace(/-/g,""),i=[];for(let o=0;o<e.length;o+=2)i.push(parseInt(e.substring(o,o+2),16));return i}function hb(t,e){for(let i=0;i<t.length;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}function pb(t,e){return hb(_y(t),_y(e))}function ft(){return fb()}function mb(t,e){return t.localeCompare(e)}function gb(){let t=mb;if(typeof Intl=="object"&&Intl.hasOwnProperty("Collator"))try{t=Intl.Collator("en-US").compare}catch{}return t}const yb=gb();let vb=0;function Lr(t){return Ql(`_${t}`,vb++)}function Ql(t,e){return`?${t}-${e}`}class vs extends Error{constructor(e){super(e),this.name="AttrNotFoundError"}}function _b(t,e){const i=d_(t,e);if(!i)throw new vs(`Could not find id attr for ${e}`);return i}function Ty(t,e,i,o){return[Tb(t,e,i,o)]}function Tb(t,e,i,o){return[t(i,o),_b(e,i).id,t(i,o),t("time",o)]}function Sb(t,e,i){return t.map(o=>o===e?i:o)}function h_(t,e,i,o,r){const l=Li(e,i,r),c=c_(e,i,r),d=l||c;if(!d)throw new vs(`Could not find attr for ${[i,r]}`);if(d["value-type"]!=="ref")throw new Error(`Attr ${d.id} is not a ref`);const[p,h]=d["forward-identity"],[y,_]=d["reverse-identity"],T=o+1,C=l?[t(h,o),d.id,t(_,T),Lr("time")]:[t(h,T),d.id,t(_,o),Lr("time")];return[l?_:h,T,C,d,!!l]}function Sy(t,e){if(typeof e!="string")return function(c){return!1};const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),r=new RegExp(`^${o}$`,t?void 0:"i");return function(c){return typeof c!="string"?!1:r.test(c)}}function Eb(t,e){if(typeof e!="object"||e.hasOwnProperty("$in")||e.hasOwnProperty("in"))return e;const i=t["checked-data-type"]==="date";if(e.hasOwnProperty("$gt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>new Date(e.$gt)}:function(r){return r[2]>e.$gt}};if(e.hasOwnProperty("$gte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>=new Date(e.$gte)}:function(r){return r[2]>=e.$gte}};if(e.hasOwnProperty("$lt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<new Date(e.$lt)}:function(r){return r[2]<e.$lt}};if(e.hasOwnProperty("$lte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<=new Date(e.$lte)}:function(r){return r[2]<=e.$lte}};if(e.hasOwnProperty("$like")){const o=Sy(!0,e.$like);return{$comparator:!0,$op:function(l){return o(l[2])}}}if(e.hasOwnProperty("$ilike")){const o=Sy(!1,e.$ilike);return{$comparator:!0,$op:function(l){return o(l[2])}}}return e}function Cb(t,e,i,o,r,l){const c=Li(e,i,r),d=c_(e,i,r),p=c||d;if(!p)throw new vs(`No attr for etype = ${i} label = ${r}`);if(l?.hasOwnProperty("$isNull")){const h=Li(e,i,"id");if(!h)throw new vs(`No attr for etype = ${i} label = id`);return[t(i,o),h.id,{$isNull:{attrId:p.id,isNull:l.$isNull,reverse:!c}},Lr("time")]}return c?[t(i,o),p.id,Eb(p,l),Lr("time")]:[l,p.id,t(i,o),Lr("time")]}function Ab(t,e,i,o,r){const[l,c,d]=r.reduce((p,h)=>{const[y,_,T]=p,[C,b,M]=h_(t,e,y,_,h);return[C,b,[...T,M]]},[i,o,[]]);return[l,c,d]}function Yd(t,e,i,o,r,l){const c=r.slice(0,r.length-1),d=r[r.length-1],[p,h,y]=Ab(t,e,i,o,c),_=Cb(t,e,p,h,d,l);return y.concat([_])}function bb(t,e){return e?[e].concat(t):t}function Mb([t,e]){return t==="or"&&Array.isArray(e)}function wb([t,e]){return t==="and"&&Array.isArray(e)}function Rb(t,e,i){return(o,r)=>{const l=t(o,r);return e==l?l:`${l}-${i}`}}function Ey(t,e,i,o,r,l){const c=t(o,r),d=l.map((p,h)=>{const y=Rb(t,c,h);return p_(y,i,o,r,p)});return{[e]:{patterns:d,joinSym:c}}}function Nb(t){const e=[];for(let i=1;i<=t.length;i++)e.push(t.slice(0,i));return e}function Cy(t,e,i,o,r){return Nb(r).map(l=>Yd(t,e,i,o,l,{$isNull:!0}))}function p_(t,e,i,o,r){return Object.entries(r).flatMap(([l,c])=>{if(Mb([l,c]))return Ey(t,"or",e,i,o,c);if(wb([l,c]))return Ey(t,"and",e,i,o,c);if(l==="$entityIdStartsWith")return[];const d=l.split(".");if(c?.hasOwnProperty("$ne")&&(c=Object.assign(Object.assign({},c),{$not:c.$ne}),delete c.$ne),c?.hasOwnProperty("$not")){const p=Yd(t,e,i,o,d,c),h=Cy(t,e,i,o,d);return[{or:{patterns:[p,...h],joinSym:t(i,o)}}]}return c?.hasOwnProperty("$isNull")&&c.$isNull===!0&&d.length>1?[{or:{patterns:Cy(t,e,i,o,d),joinSym:t(i,o)}}]:Yd(t,e,i,o,d,c)})}function xb(t,e,i,o){const r=Ql;return o?p_(r,t,e,i,o).concat(Ty(r,t,e,i)):Ty(r,t,e,i)}function Ib(t,e,i){return[t(e,i),t("time",i)]}function Db(t,e,i,o,r,l){const[c,d,p,h,y]=h_(t,e,i,o,r),_=Sb(p,t(i,o),l);return[c,d,_,h,y]}function Ub(t,e,{etype:i,level:o,form:r},l){const c=Object.keys(r).filter(d=>d!=="$");return c.length?Object.entries(l).map(function([p,h]){return c.map(function(T){var C,b,M;const w=!!(e.cardinalityInference&&(!((M=(b=(C=e.linkIndex)===null||C===void 0?void 0:C[i])===null||b===void 0?void 0:b[T])===null||M===void 0)&&M.isSingular));try{const[R,D,P]=Db(t,e,i,o,T,p),J=g_(e,{etype:R,level:D,form:r[T],join:P}),B=w?J[0]:J;return{[T]:B}}catch(R){if(R instanceof vs)return{[T]:w?void 0:[]};throw R}}).reduce(function(T,C){return Object.assign(Object.assign({},T),C)},h)}):Object.values(l)}function Pb(t,e,i){return i==="string"?yb(t,e):t>e?1:-1}function Ir(t,e,i,o,r){return e===o||e==null&&o==null?pb(t,i):o==null?1:e==null?-1:Pb(e,o,r)}function kl([t,e],[i,o],r){return Ir(t,e,i,o,r)}function Jd(t){return t==null?t:new Date(t).getTime()}function Lb(t,e,i,o){var r;const[l,c,d,p]=t,h=i==="desc"?1:-1;if(((r=e["forward-identity"])===null||r===void 0?void 0:r[2])==="id")return kl(o,[l,p],null)===h;const[y,_]=o,T=e["checked-data-type"],C=T==="date"?Jd(_):_,b=T==="date"?Jd(d):d;return kl([y,C],[l,b],T)===h}function kb(t,e){const i=e[1];return t.attrs[i]}function Ob(t,e,i){const o=Object.keys(i)[0];return Li(t,e,o)}function qb(t,e,i,o){if(i)return kb(t,i);if(o)return Ob(t,e,o)}function Gb(t,e,i){var o,r;if(!Array.isArray(i.fields))return KA(t,e);const l=new Map;for(const c of i.fields){const d=Li(t,e,c),p=(o=d?.["forward-identity"])===null||o===void 0?void 0:o[2];p&&qf(d)&&l.set(p,d)}if(!l.has("id")){const c=Li(t,e,"id"),d=(r=c?.["forward-identity"])===null||r===void 0?void 0:r[2];d&&l.set(d,c)}return l}function Hb(t,{etype:e,pageInfo:i,dq:o,form:r}){var l,c;const d=(l=r?.$)===null||l===void 0?void 0:l.order,p=m_(r),h=zb(r);let y=sb(t,o);const _=i?.["start-cursor"],T=qb(t,e,_,d);if(T&&((c=T?.["forward-identity"])===null||c===void 0?void 0:c[2])!=="id"){const M=T["checked-data-type"]==="date",w=T.id;y=y.map(([R])=>{var D,P,J,B,W;let Q=(W=(B=(J=(P=(D=t.eav.get(R))===null||D===void 0?void 0:D.get(w))===null||P===void 0?void 0:P.values())===null||J===void 0?void 0:J.next())===null||B===void 0?void 0:B.value)===null||W===void 0?void 0:W[2];return M&&(Q=Jd(Q)),[R,Q]})}y.sort(h==="asc"?function(w,R){return kl(w,R,T?.["checked-data-type"])}:function(w,R){return kl(R,w,T?.["checked-data-type"])});let C={};const b=Gb(t,e,o);for(const M of y){const[w]=M;if(C[w]||!p&&_&&T&&Lb(_,T,h,M))continue;const R=JA(t,b,w);R&&(C[w]=R)}return C}function zb(t){var e;const i=(e=t.$)===null||e===void 0?void 0:e.order;return i&&i[Object.keys(i)[0]]||"asc"}function m_(t){var e,i,o;const r=(e=t.$)===null||e===void 0?void 0:e.offset,l=(i=t.$)===null||i===void 0?void 0:i.before,c=(o=t.$)===null||o===void 0?void 0:o.after;return!r&&!l&&!c}function Vb(t,{etype:e,level:i,form:o,join:r,pageInfo:l}){var c,d,p,h,y;if(!m_(o)&&(!l||!l["start-cursor"]))return[];const _=bb(xb(t,e,i,(c=o.$)===null||c===void 0?void 0:c.where),r),T=Ib(Ql,e,i),C=(d=o.$)===null||d===void 0?void 0:d.fields,b=Hb(t,{etype:e,pageInfo:l,form:o,dq:{where:_,find:T,fields:C}}),M=((p=o.$)===null||p===void 0?void 0:p.limit)||((h=o.$)===null||h===void 0?void 0:h.first)||((y=o.$)===null||y===void 0?void 0:y.last);if(M!=null){i>0&&console.warn("WARNING: Limits in child queries are only run client-side. Data returned from the server will not have a limit.");const w=Object.entries(b);return w.length<=M?b:Object.fromEntries(w.slice(0,M))}return b}function Bb(t,e){try{return Vb(t,e)}catch(i){if(i instanceof vs)return{};throw i}}function g_(t,e){const i=Bb(t,e);return Ub(Ql,t,e,i)}function Fb(t){const e={};for(const[i,o]of Object.entries(t))e[i]={startCursor:o["start-cursor"],endCursor:o["end-cursor"],hasNextPage:o["has-next-page?"],hasPreviousPage:o["has-previous-page?"]};return e}function y_({store:t,pageInfo:e,aggregate:i},o){const l={data:Object.keys(o).reduce(function(d,p){return i?.[p]||p==="$$ruleParams"||(d[p]=g_(t,{etype:p,form:o[p],level:0,pageInfo:e?.[p]})),d},{})};return e&&(l.pageInfo=Fb(e)),i&&(l.aggregate=i),l}function $b(){const e={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(e))}const Yb=$b();function Kd(t,e,i){const o={__etype:t,__ops:i};return new Proxy(o,{get:(r,l)=>{if(l==="__ops")return i;if(l==="__etype")return t;if(Yb.has(l))return(c,d)=>Kd(t,e,[...i,d?[l,t,e,c,d]:[l,t,e,c]])}})}function Ol(t){return t.startsWith("lookup__")}function v_(t){const[e,i,...o]=t.split("__");return[i,JSON.parse(o.join("__"))]}function Jb(t){return new Proxy({__etype:t},{get(e,i){if(i==="__etype")return t;const o=i;return Ol(o)?Kd(t,v_(o),[]):Kd(t,o,[])}})}function zf(){return new Proxy({},{get(t,e){return Jb(e)}})}zf();function Kb(t){return t.__ops}function Qb(t,e){const{attrIdMap:i,refSwapAttrIds:o}=t,r=[];for(const c of e){const d=i[c];if(d)r.push(d);else if(Array.isArray(c)&&c.length==2&&i[c[0]]){const[p,h]=c;r.push([i[p],h])}else r.push(c)}const[l]=e;if((l==="add-triple"||l==="retract-triple")&&o.has(e[2])){const c=r[1];r[1]=r[3],r[3]=c}return r}function St(t,e,i){return Object.values(t).find(o=>{const[r,l,c]=o["forward-identity"];return l===e&&c===i})}function ho(t,e,i){return Object.values(t).find(o=>{const r=o["reverse-identity"];if(!r)return!1;const[l,c,d]=r;return c===e&&d===i})}function Xb(t){if(Array.isArray(t))return t;const e=Object.entries(t);if(e.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return e[0]}function Qd(t,e,i){return i.indexOf(".")!==-1&&!St(t,e,i)}function Xd(t){const[e,i,...o]=t.split(".");if(o.length>0||i!=="id")throw new Error(`${t} is not a valid lookup attribute.`);return e}function Zb(t,e,i){if(!Qd(t,e,i))return St(t,e,i);const o=Xd(i),r=St(t,e,o)||ho(t,e,o);if(r&&r["value-type"]!=="ref")throw new Error(`${i} does not reference a valid link attribute.`);return r}function Zd(t){return typeof t=="string"&&!Ol(t)?null:typeof t=="string"&&Ol(t)?v_(t):Xb(t)}function zt(t,e,i){const o=Zd(i);if(o===null)return i;const[r,l]=o,c=Zb(t,e,r);if(!c||!c["unique?"])throw new Error(`${r} is not a unique attribute.`);return[c.id,l]}function __(t,e,i,o){const r=zt(t,e,i);return Array.isArray(r)?[["add-triple",r,St(t,e,"id").id,r]].concat(o):o}function Wb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=St(t,e,l),h=ho(t,e,l);return d.map(y=>p?["add-triple",zt(t,e,i),p.id,zt(t,p["reverse-identity"][1],y)]:["add-triple",zt(t,h["forward-identity"][1],y),h.id,zt(t,e,i)])});return __(t,e,i,r)}function jb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=St(t,e,l),h=ho(t,e,l);return d.map(y=>p?["retract-triple",zt(t,e,i),p.id,zt(t,p["reverse-identity"][1],y)]:["retract-triple",zt(t,h["forward-identity"][1],y),h.id,zt(t,e,i)])});return __(t,e,i,r)}function eM(t,e,i){if(Array.isArray(i)){const[o,r]=i;for(const l of t||[]){const c=l?.aev.get(o);if(c){for(const[d,p,h]of Ht(c,2))if(h===r)return!0}}}else for(const o of t||[]){const r=o?.eav.get(i);if(r){for(const l of r.keys())if(o.attrs[l]["forward-identity"][1]==e)return!0}}return!1}function T_({stores:t,attrs:e},[i,o,r,l]){return l?.upsert===!1?{mode:"update"}:l?.upsert===!0?null:eM(t,i,o)?{mode:"update"}:null}function tM(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=kf(c),h=zt(o,r,l);return[["id",h]].concat(Object.entries(p)).map(([_,T])=>{const C=St(o,r,_);return C["checked-data-type"]==="date"&&t.useDateObjects&&(T=Kl(T)),["add-triple",h,C.id,T,{mode:"create"}]})}function nM(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=kf(c),h=zt(o,r,l),y=T_(t,[r,h,c,d]);return[["id",h]].concat(Object.entries(p)).map(([T,C])=>{const b=St(o,r,T);return b["checked-data-type"]==="date"&&t.useDateObjects&&(C=Kl(C)),["add-triple",h,b.id,C,...y?[y]:[]]})}function iM({attrs:t},[e,i]){return[["delete-entity",zt(t,e,i),e]]}function oM(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=kf(c),h=zt(o,r,l),y=T_(t,[r,h,c,d]),_=Object.entries(p).map(([C,b])=>{const M=St(o,r,C);return["deep-merge-triple",h,M.id,b,...y?[y]:[]]});return[["add-triple",h,St(o,r,"id").id,h,...y?[y]:[]]].concat(_)}function sM({attrs:t},[e,i,o]){return[["rule-params",zt(t,e,i),e,o]]}function rM(t){const[e,i,o,r,l]=t;if(!r)return t;const c=Object.assign({},r);return delete c.id,[e,i,o,c,...l?[l]:[]]}function aM(t,e){const[i,...o]=rM(e);switch(i){case"merge":return oM(t,o);case"create":return tM(t,o);case"update":return nM(t,o);case"link":return Wb(t,o);case"unlink":return jb(t,o);case"delete":return iM(t,o);case"ruleParams":return sM(t,o);default:throw new Error(`unsupported action ${i}`)}}function lM(t){switch(t){case"string":case"date":case"boolean":case"number":return t;default:return}}function uM(t,e,i){var o,r;const l=(r=(o=t.entities[e])===null||o===void 0?void 0:o.attrs)===null||r===void 0?void 0:r[i];if(i==="id")return null;if(!l)throw new Error(`${e}.${i} does not exist in your schema`);const{unique:c,indexed:d}=l?.config,p=lM(l?.valueType);return{"index?":d,"unique?":c,"checked-data-type":p}}function Tl(t,e,i,o){const r=t?uM(t,e,i):null,l=ft(),d=[ft(),e,i];return Object.assign(Object.assign({id:l,"forward-identity":d,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}function cM(t,e,i){return Object.values(t.links).find(r=>r.forward.on===e&&r.forward.label===i||r.reverse.on===e&&r.reverse.label===i)}function dM(t,e,i){const o=cM(t,e,i);if(!o)throw new Error(`Couldn't find the link ${e}.${i} in your schema`);const{forward:r,reverse:l}=o;return{"forward-identity":[ft(),r.on,r.label],"reverse-identity":[ft(),l.on,l.label],cardinality:r.has==="one"?"one":"many","unique?":l.has==="one","on-delete":r.onDelete,"on-delete-reverse":l.onDelete}}function Ay(t,e,i,o){const r=t?dM(t,e,i):null,l=ft(),c=[ft(),e,i],d=[ft(),i,e];return Object.assign(Object.assign({id:l,"forward-identity":c,"reverse-identity":d,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}const fM=new Set(["create","update","merge","link","unlink"]),hM=new Set(["link","unlink"]),pM=new Set(["create","update","merge"]),mM=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Wd={"unique?":!0,"index?":!0},gM=Object.assign(Object.assign({},Wd),{cardinality:"one"});function yM(t){const e=[],[i,o,r,l]=t;if(!mM.has(i))return e;const c=Zd(r);if(c&&e.push({etype:o,lookupPair:c}),i==="link")for(const[d,p]of Object.entries(l)){const h=Array.isArray(p)?p:[p];for(const y of h){const _=Zd(y);_&&e.push({etype:o,lookupPair:_,linkLabel:d})}}return e}function vM({attrs:t,schema:e},i){var o,r;const[l,c,d]=[new Set,Object.assign({},t),[]];function p(_){c[_.id]=_,d.push(["add-attr",_]),l.add(_.id)}function h(_){_?.isUnsynced&&!l.has(_.id)&&(d.push(["add-attr",_]),l.add(_.id))}function y(_,T){const C=St(c,_,T),b=ho(c,_,T);h(C),h(b),!C&&!b&&p(Ay(e,_,T,gM))}for(const _ of i)for(const{etype:T,lookupPair:C,linkLabel:b}of yM(_)){const M=C[0];if(b){y(T,b);const w=St(c,T,b),R=ho(c,T,b);h(w),h(R);const D=((o=w?.["reverse-identity"])===null||o===void 0?void 0:o[1])||((r=R?.["forward-identity"])===null||r===void 0?void 0:r[1])||b;if(Qd(c,D,M))y(D,Xd(M));else{const P=St(c,D,M);P||p(Tl(e,D,M,Wd)),h(P)}}else if(Qd(c,T,M))y(T,Xd(M));else{const w=St(c,T,M);w||p(Tl(e,T,M,Wd)),h(w)}}for(const _ of i){const[T,C,b,M]=_;if(fM.has(T)){const w=St(c,C,"id");h(w),w||p(Tl(e,C,"id",{"unique?":!0}));for(const R of Object.keys(M)){const D=St(c,C,R);if(h(D),pM.has(T)&&(D||p(Tl(e,C,R,R==="id"?{"unique?":!0}:null))),hM.has(T)){const P=ho(c,C,R);!D&&!P&&p(Ay(e,C,R)),h(P)}}}}return[c,d]}function _M(t,e){const o=(Array.isArray(e)?e:[e]).flatMap(p=>Kb(p)),[r,l]=vM(t,o),c=Object.assign(Object.assign({},t),{attrs:r}),d=o.flatMap(p=>aM(c,p));return[...l,...d]}var Mn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function by(t,e){typeof requestIdleCallback>"u"?t():requestIdleCallback(t,{timeout:e})}const kr="__meta";class TM{constructor(e,i){}}class jd{constructor(e){var i,o;this._subs=[],this._nextSave=null,this._nextGc=null,this._pendingSaveKeys=new Set,this._loadedKeys=new Set,this._version=0,this._meta={isLoading:!0,onLoadCbs:[],value:null,error:null,attempts:0},this._persister=e.persister,this._merge=e.merge,this.serialize=e.serialize,this.parse=e.parse,this._objectSize=e.objectSize,this._log=e.logger,this._saveThrottleMs=(i=e.saveThrottleMs)!==null&&i!==void 0?i:100,this._idleCallbackMaxWaitMs=(o=e.idleCallbackMaxWaitMs)!==null&&o!==void 0?o:1e3,this._gcOpts=e.gc,this.currentValue={},this._loadedKeys=new Set,this._loadingKeys={},this._initMeta(),e.preloadEntryCount&&this._preloadEntries(e.preloadEntryCount)}_initMeta(){return Mn(this,void 0,void 0,function*(){var e,i,o;this._meta.loadingPromise&&(yield this._meta.loadingPromise);try{const r=this._persister.getItem(kr);this._meta.loadingPromise=r;const l=yield r;this._meta.isLoading=!1,this._meta.error=null,this._meta.loadingPromise=null,this._meta.attempts=0;const c=(i=(e=this._meta.value)===null||e===void 0?void 0:e.objects)!==null&&i!==void 0?i:{},d=l??{},p=(o=d.objects)!==null&&o!==void 0?o:{};this._meta.value=Object.assign(Object.assign({},d),{objects:Object.assign(Object.assign({},c),p)})}catch(r){this._meta.error=r,this._meta.attempts++,this._meta.loadingPromise=null}})}_getMeta(){return Mn(this,void 0,void 0,function*(){return this._meta.value?this._meta.value:this._meta.loadingPromise?(yield this._meta.loadingPromise,this._meta.value):(this._initMeta(),yield this._meta.loadingPromise,this._meta.value)})}_refreshMeta(){return Mn(this,void 0,void 0,function*(){return yield this._initMeta(),this._meta.value})}_preloadEntries(e){return Mn(this,void 0,void 0,function*(){const i=yield this.waitForMetaToLoad();if(!i)return;const o=Object.entries(i.objects);o.sort(([r,l],[c,d])=>d.updatedAt-l.updatedAt);for(const[r]of o.slice(0,e))this._loadKey(r)})}_getFromStorage(e){return Mn(this,void 0,void 0,function*(){try{const i=yield this._persister.getItem(e);return i&&this.parse(e,i)}catch(i){return console.error(`Unable to read from storage for key=${e}`,i),null}})}waitForKeyToLoad(e){return Mn(this,void 0,void 0,function*(){return this._loadedKeys.has(e)?this.currentValue[e]:(yield this._loadingKeys[e]||this._loadKey(e),this.currentValue[e])})}waitForMetaToLoad(){return Mn(this,void 0,void 0,function*(){return this._getMeta()})}unloadKey(e){this._loadedKeys.delete(e),delete this._loadingKeys[e],delete this.currentValue[e]}_loadKey(e){return Mn(this,void 0,void 0,function*(){if(this._loadedKeys.has(e)||e in this._loadingKeys)return;const i=this._getFromStorage(e);this._loadingKeys[e]=i;const o=yield i;if(delete this._loadingKeys[e],this._loadedKeys.add(e),o){const r=this._merge(e,o,this.currentValue[e]);r&&(this.currentValue[e]=r)}this.onKeyLoaded&&this.onKeyLoaded(e)})}_writeToStorage(e){var i,o;const r=[],l=e?.skipGc;if(this._meta.isLoading){const C=new Promise((b,M)=>{var w;setTimeout(()=>this._enqueuePersist(e?Object.assign(Object.assign({},e),{attempts:(e.attempts||0)+1}):{attempts:1}).then(b).catch(M),10+((w=e?.attempts)!==null&&w!==void 0?w:0)*1e3)});return r.push(C),Promise.all(r).then(b=>b.reduce((M,w)=>M+w,0))}const c=this._meta.value;if(!c)return Promise.resolve(0);const d=[],p=[];for(const C of this._pendingSaveKeys)C in this.currentValue?p.push(C):(d.push(C),delete c.objects[C]);for(const C of d){const b=this._persister.removeItem(C);r.push(b.then(()=>1)),this._loadedKeys.delete(C),this._pendingSaveKeys.delete(C)}const h=[],y=[[kr,c]],_=(i=c.objects)!==null&&i!==void 0?i:{};c.objects=_;for(const C of p)if(this._loadedKeys.has(C)){const b=this.serialize(C,this.currentValue[C]);y.push([C,b]);const M=this._objectSize(b),w=(o=_[C])!==null&&o!==void 0?o:{createdAt:Date.now(),updatedAt:Date.now(),size:M};w.updatedAt=Date.now(),w.size=M,_[C]=w,this._pendingSaveKeys.delete(C)}else h.push(C);const T=this._persister.multiSet(y);r.push(T.then(()=>1));for(const C of h){const b=this._loadKey(C).then(()=>this._enqueuePersist(e));r.push(b)}return l||this.gc(),Promise.all(r).then(C=>C.reduce((b,M)=>b+M,0))}flush(){return Mn(this,void 0,void 0,function*(){return this._nextSave?(clearTimeout(this._nextSave),this._nextSave=null,this._writeToStorage()):void 0})}_gc(){return Mn(this,void 0,void 0,function*(){if(!this._gcOpts)return;const e=new Set(yield this._persister.getAllKeys());e.delete(kr);const i=new Set(Object.keys(this.currentValue));for(const T of Object.keys(this._loadingKeys))i.add(T);for(const T of this._loadedKeys)i.add(T);const o=yield this._refreshMeta();if(!o){this._log.info("Could not gc because we were not able to load meta");return}const r=[],l={gcOpts:this._gcOpts,keys:e,sacredKeys:i,removed:[],metaRemoved:[],removedMissingCount:0,removedOldCount:0,removedThresholdCount:0,removedSizeCount:0};for(const T of e)i.has(T)||T in o.objects||(this._log.info("Lost track of key in meta",T),r.push(this._persister.removeItem(T)),l.removed.push(T),l.removedMissingCount++);const c=Date.now();for(const[T,C]of Object.entries(o.objects))!i.has(T)&&C.updatedAt<c-this._gcOpts.maxAgeMs&&(r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedOldCount++);const d=Object.entries(o.objects);d.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const p=d.filter(([T])=>!i.has(T));if(d.length>this._gcOpts.maxEntries)for(const[T]of p.slice(0,d.length-this._gcOpts.maxEntries))r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedThresholdCount++;const h=Object.entries(o.objects);h.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const y=h.filter(([T])=>!i.has(T));let _=h.reduce((T,[C,b])=>T+b.size,0);for(;_>0&&_>this._gcOpts.maxSize&&y.length;){const[[T,C]]=y.splice(0,1);_-=C.size,r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedSizeCount++}for(const T of Object.keys(o.objects))!e.has(T)&&!i.has(T)&&delete o.objects[T];return(l.removed.length||l.metaRemoved.length)&&r.push(this._enqueuePersist({skipGc:!0})),this._log.info("Completed GC",l),yield Promise.all(r),l})}gc(){this._nextGc||(this._nextGc=setTimeout(()=>{by(()=>{this._nextGc=null,this._gc()},30*1e3)},1e3*60+Math.random()*500))}_enqueuePersist(e){return new Promise((i,o)=>{if(this._nextSave){i(0);return}this._nextSave=setTimeout(()=>{by(()=>{this._nextSave=null,this._writeToStorage(e).then(i).catch(o)},this._idleCallbackMaxWaitMs)},this._saveThrottleMs)})}version(){return this._version}updateInPlace(e){this._version++;const[i,o]=Ll(this.currentValue,e,{enablePatches:!0});for(const r of o){const l=r.path[0];l&&typeof l=="string"&&(this._pendingSaveKeys.add(l),this._loadedKeys.has(l)||this._loadKey(l))}for(const r of Object.keys(i))if(!i[r])debugger;this.currentValue=i,this._enqueuePersist();for(const r of this._subs)r(this.currentValue);return i}subscribe(e){return this._subs.push(e),e(this.currentValue),()=>{this._subs=this._subs.filter(i=>i!==e)}}}var Zn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const SM=6,EM=["kv","querySubs","syncSubs"];function CM(t){return function(i){console.error("Error in IndexedDB event",{source:t,event:i})}}function AM(t){return Zn(this,void 0,void 0,function*(){return new Promise(e=>{const i=indexedDB.open(t);i.onerror=o=>{e(null)},i.onsuccess=o=>{const l=o.target.result;e(l)},i.onupgradeneeded=o=>{var r;(r=o.target.transaction)===null||r===void 0||r.abort(),e(null)}})})}function bM(t,e,i){return Zn(this,void 0,void 0,function*(){const o=typeof e=="string"?JSON.parse(e):e;if(!o)return;const r=new Set;return new Promise((l,c)=>{var d,p,h,y;const _={};for(const[b,M]of Object.entries(o)){const w=typeof M=="string"?JSON.parse(M):M;if(w.lastAccessed){const D={createdAt:w.lastAccessed,updatedAt:w.lastAccessed,size:(y=(h=(p=(d=w.result)===null||d===void 0?void 0:d.store)===null||p===void 0?void 0:p.triples)===null||h===void 0?void 0:h.length)!==null&&y!==void 0?y:0};_[b]=D}const R=i.put(w,b);r.add(R)}const T={objects:_},C=i.put(T,kr);r.add(C);for(const b of r)b.onsuccess=()=>{r.delete(b),r.size===0&&l()},b.onerror=M=>{c(M)}})})}function My(t,e,i){return Zn(this,void 0,void 0,function*(){const o=i.put(e,t);return new Promise((r,l)=>{o.onsuccess=()=>r(),o.onerror=c=>l(c)})})}function MM(t,e){return Zn(this,void 0,void 0,function*(){const i=yield AM(`instant_${t}_5`);if(!i)return;const o=yield new Promise((y,_)=>{const b=i.transaction(["kv"],"readonly").objectStore("kv").openCursor();b.onerror=w=>{_(w)};const M=[];b.onsuccess=()=>{const w=b.result;if(w){const R=w.key,D=w.value;M.push([R,D]),w.continue()}else y(M)},b.onerror=w=>{_(w)}}),r=e.transaction(["kv","querySubs"],"readwrite"),l=r.objectStore("kv"),c=r.objectStore("querySubs"),d=[],p={objects:{}};for(const[y,_]of o)switch(y){case"querySubs":{const T=bM(y,_,c);d.push(T);break}default:{const T=My(y,_,l);d.push(T);const C={createdAt:Date.now(),updatedAt:Date.now(),size:0};p.objects[y]=C;break}}const h=My(kr,p,l);d.push(h),yield Promise.all(d),yield new Promise((y,_)=>{r.oncomplete=T=>y(T),r.onerror=T=>_(T),r.onabort=T=>_(T)})})}const wy=new Map;class S_ extends TM{constructor(e,i){super(e,i),this.dbName=`instant_${e}_${SM}`,this._storeName=i,this._appId=e,this._dbPromise=this._init()}_init(){return new Promise((e,i)=>{let o=!1;const r=indexedDB.open(this.dbName,1);r.onerror=l=>{i(l)},r.onsuccess=l=>{const d=l.target.result;if(o){const p=MM(this._appId,d).catch(h=>{CM("Error upgrading store from version 5 to 6.")(h)});wy.set(this.dbName,p),p.then(()=>e(d)).catch(()=>e(d))}else{const p=wy.get(this.dbName);p?p.then(()=>e(d)).catch(()=>e(d)):e(d)}},r.onupgradeneeded=l=>{o=!0,this._upgradeStore(l)}})}_upgradeStore(e){const o=e.target.result;for(const r of EM)o.objectStoreNames.contains(r)||o.createObjectStore(r)}getItem(e){return Zn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readonly").objectStore(this._storeName).get(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{d.result?o(d.result):o(null)}})})}setItem(e,i){return Zn(this,void 0,void 0,function*(){const o=yield this._dbPromise;return new Promise((r,l)=>{const p=o.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(i,e);p.onerror=h=>{l(h)},p.onsuccess=h=>{r()}})})}multiSet(e){return Zn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const l=i.transaction([this._storeName],"readwrite"),c=l.objectStore(this._storeName),d=new Set;for(const[p,h]of e){const y=c.put(h,p);d.add(y)}for(const p of d)p.onerror=h=>{l.abort(),r(h)},p.onsuccess=h=>{d.delete(p),d.size===0&&o()}})})}removeItem(e){return Zn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readwrite").objectStore(this._storeName).delete(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{o()}})})}getAllKeys(){return Zn(this,void 0,void 0,function*(){const e=yield this._dbPromise;return new Promise((i,o)=>{const c=e.transaction([this._storeName],"readonly").objectStore(this._storeName).getAllKeys();c.onerror=d=>{o(d)},c.onsuccess=d=>{i(c.result.filter(p=>typeof p=="string"))}})})}}var wM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class E_{static getIsOnline(){return wM(this,void 0,void 0,function*(){return navigator.onLine})}static listen(e){const i=()=>{e(!0)},o=()=>{e(!1)};return addEventListener("online",i),addEventListener("offline",o),()=>{removeEventListener("online",i),removeEventListener("offline",o)}}}class _s extends Error{constructor(e,i){super(e),this.hint=i;const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,_s),this.name="InstantError"}get[Symbol.toStringTag](){return"InstantError"}}var RM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class Xl extends _s{constructor(e){var i;const o=((i=e.body)===null||i===void 0?void 0:i.message)||`API Error (${e.status})`;super(o,e.body.hint);const r=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,Xl),this.name="InstantAPIError",this.status=e.status,this.body=e.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function vn(t,e){return RM(this,void 0,void 0,function*(){const i=yield fetch(t,e),o=yield i.json();return i.status===200?Promise.resolve(o):Promise.reject(new Xl({status:i.status,body:o}))})}var As=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function NM({apiURI:t,appId:e,email:i}){return vn(`${t}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":e,email:i})})}function xM(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i,email:o,code:r,refreshToken:l}){return yield vn(`${e}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object.assign({"app-id":i,email:o,code:r},l?{"refresh-token":l}:{}))})})}function IM(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield vn(`${e}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i,"refresh-token":o})})})}function DM(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i}){return yield vn(`${e}/runtime/auth/sign_in_guest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i})})})}function Ry(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i,code:o,codeVerifier:r,refreshToken:l}){return yield vn(`${e}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,code:o,code_verifier:r,refresh_token:l})})})}function UM(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i,nonce:o,idToken:r,clientName:l,refreshToken:c}){return yield vn(`${e}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,nonce:o,id_token:r,client_name:l,refresh_token:c})})})}function PM(t){return As(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield vn(`${e}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,refresh_token:o})})})}var Xr=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function LM(t){return Xr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,file:r,refreshToken:l,contentType:c,contentDisposition:d}){const p={app_id:i,path:o,authorization:`Bearer ${l}`,"content-type":c||r.type};return d&&(p["content-disposition"]=d),yield vn(`${e}/storage/upload`,{method:"PUT",headers:p,body:r})})}function kM(t){return Xr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield vn(`${e}/storage/files?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}function OM(t){return Xr(this,arguments,void 0,function*({apiURI:e,appId:i,fileName:o,refreshToken:r,metadata:l={}}){const{data:c}=yield vn(`${e}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({app_id:i,filename:o})});return c})}function qM(t,e){return Xr(this,void 0,void 0,function*(){return(yield fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok})}function GM(t){return Xr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield vn(`${e}/storage/signed-download-url?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}let Vf=!1,C_=!1,A_=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(Vf=!!window.localStorage.getItem("devBackend"),C_=!!window.localStorage.getItem("__instantLogging"),A_=!!window.localStorage.getItem("__devtoolLocalDash"));function Ny(t,e){if(!e)return t;const i={};return e.forEach(o=>{i[o]=t[o]}),i}function HM(t,e,i){var o,r;const l={peers:{}};if(e&&"user"in e?e.user:!0){const d=Ny((o=t.user)!==null&&o!==void 0?o:{},e?.keys);l.user=Object.assign(Object.assign({},d),{peerId:i})}for(const d of Object.keys((r=t.peers)!==null&&r!==void 0?r:{})){const p=e?.peers===void 0,h=Array.isArray(e?.peers)&&e?.peers.includes(d);if(p||h){const y=Ny(t.peers[d],e?.keys);l.peers[d]=Object.assign(Object.assign({},y),{peerId:d})}}return l}function zM(t,e){if(t.isLoading!==e.isLoading||t.error!==e.error||(t.user||e.user)&&(!t.user||!e.user||!py(t.user,e.user))||!W0(t.peers,e.peers))return!0;for(const o of Object.keys(t.peers))if(!py(t.peers[o],e.peers[o]))return!0;return!1}class xy{constructor(){this.promise=new Promise((e,i)=>{this._resolve=e,this._reject=i})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function b_(t,e=[]){t.forEach(i=>{const{data:o}=i,{"datalog-result":r}=o,{"join-rows":l}=r;for(const c of l)for(const d of c)e.push(d);b_(i["child-nodes"],e)})}function Iy(t){const e=[];return b_(t,e),e}function Dy(t){return Object.values(t.links).reduce((e,i)=>{var o,r,l,c;return(o=e[l=i.forward.on])!==null&&o!==void 0||(e[l]={}),e[i.forward.on][i.forward.label]={isForward:!0,isSingular:i.forward.has==="one",link:i},(r=e[c=i.reverse.on])!==null&&r!==void 0||(e[c]={}),e[i.reverse.on][i.reverse.label]={isForward:!1,isSingular:i.reverse.has==="one",link:i},e},{})}const Bf="v0.22.73";function VM(t,e){return{info:t?(...i)=>console.info(...i,e()):()=>{},debug:t?(...i)=>console.debug(...i,e()):()=>{},error:t?(...i)=>console.error(...i,e()):()=>{}}}class Wn{constructor(e,i,o,r={indexed:!1,unique:!1}){this.valueType=e,this.required=i,this.isIndexed=o,this.config=r,this.metadata={}}clientRequired(){return new Wn(this.valueType,!1,this.isIndexed,this.config)}optional(){return new Wn(this.valueType,!1,this.isIndexed,this.config)}unique(){return new Wn(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new Wn(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class Be extends Error{constructor(e,i){const o=i?`At path '${i}': ${e}`:e;super(o),this.name="QueryValidationError"}}const Uy=["where","order","limit","last","first","offset","after","before","fields","aggregate"],BM=t=>t.valueType||"unknown",M_=(t,e,i=!1)=>{if(i||t==null)return!0;switch(e){case"string":return typeof t=="string";case"number":return typeof t=="number"&&!isNaN(t);case"boolean":return typeof t=="boolean";case"date":return t instanceof Date||typeof t=="string"||typeof t=="number";default:return!0}},FM=(t,e,i,o,r,l,c)=>{const d=l.valueType==="json",p=(h,y,_)=>{if(!M_(_,y,d))throw new Be(`Invalid value for operator '${h}' on attribute '${o}' in entity '${r}'. Expected ${y}, but received: ${typeof _}`,c)};switch(t){case"in":case"$in":if(!Array.isArray(e))throw new Be(`Operator '${t}' for attribute '${o}' in entity '${r}' must be an array, but received: ${typeof e}`,c);for(const h of e)p(t,i,h);break;case"$not":case"$ne":case"$gt":case"$lt":case"$gte":case"$lte":p(t,i,e);break;case"$like":case"$ilike":if(p(t,"string",e),t==="$ilike"&&!l.isIndexed)throw new Be(`Operator '${t}' can only be used with indexed attributes, but '${o}' in entity '${r}' is not indexed`,c);break;case"$isNull":p(t,"boolean",e);break;default:throw new Be(`Unknown operator '${t}' for attribute '${o}' in entity '${r}'`,c)}},fs=(t,e,i,o,r)=>{const l=BM(i),c=i.valueType==="json";if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(c)return;const p=t;for(const[h,y]of Object.entries(p))FM(h,y,l,e,o,i,`${r}.${h}`)}else if(!M_(t,l,c))throw new Be(`Invalid value for attribute '${e}' in entity '${o}'. Expected ${l}, but received: ${typeof t}`,r)},$M=(t,e,i,o,r)=>{const l=t.split(".");if(l.length<2)throw new Be(`Invalid dot notation path '${t}'. Must contain at least one dot.`,r);let c=i;for(let y=0;y<l.length-1;y++){const _=l[y],T=o.entities[c];if(!T)throw new Be(`Entity '${c}' does not exist in schema while traversing dot notation path '${t}'.`,r);const C=T.links[_];if(!C){const b=Object.keys(T.links);throw new Be(`Link '${_}' does not exist on entity '${c}' in dot notation path '${t}'. Available links: ${b.length>0?b.join(", "):"none"}`,r)}c=C.entityName}const d=l[l.length-1],p=o.entities[c];if(!p)throw new Be(`Target entity '${c}' does not exist in schema for dot notation path '${t}'.`,r);if(d==="id"){if(typeof e=="string"&&!ys(e))throw new Be(`Invalid value for id field in entity '${c}'. Expected a UUID, but received: ${e}`,r);fs(e,t,new Wn("string",!1,!0),i,r);return}const h=p.attrs[d];if(Object.keys(p.links).includes(d)){if(typeof e=="string"&&!ys(e))throw new Be(`Invalid value for link '${d}' in entity '${c}'. Expected a UUID, but received: ${e}`,r);fs(e,t,new Wn("string",!1,!0),i,r);return}if(!h){const y=Object.keys(p.attrs);throw new Be(`Attribute '${d}' does not exist on entity '${c}' in dot notation path '${t}'. Available attributes: ${y.length>0?y.join(", ")+", id":"id"}`,r)}fs(e,t,h,i,r)},w_=(t,e,i,o)=>{for(const[r,l]of Object.entries(t)){if(r==="or"||r==="and"){if(Array.isArray(l))for(const h of l)typeof h=="object"&&h!==null&&w_(h,e,i,`${o}.${r}[${h}]`);continue}if(r==="id"){fs(l,"id",new Wn("string",!1,!0),e,`${o}.id`);continue}if(r.includes(".")){$M(r,l,e,i,`${o}.${r}`);continue}const c=i.entities[e];if(!c)continue;const d=c.attrs[r],p=c.links[r];if(!d&&!p){const h=Object.keys(c.attrs),y=Object.keys(c.links);throw new Be(`Attribute or link '${r}' does not exist on entity '${e}'. Available attributes: ${h.length>0?h.join(", "):"none"}. Available links: ${y.length>0?y.join(", "):"none"}`,`${o}.${r}`)}if(d)fs(l,r,d,e,`${o}.${r}`);else if(p){if(typeof l=="string"&&!ys(l))throw new Be(`Invalid value for link '${r}' in entity '${e}'. Expected a UUID, but received: ${l}`,`${o}.${r}`);const h=new Wn("string",!1,!0);fs(l,r,h,e,`${o}.${r}`)}}},YM=(t,e,i,o,r=0)=>{for(const c of Object.keys(t))if(!Uy.includes(c))throw new Be(`Invalid query parameter '${c}' in $ object. Valid parameters are: ${Uy.join(", ")}. Found: ${c}`,o);const l=["offset","before","after","first","last"];for(const c of l)if(t[c]!==void 0&&r>0)throw new Be(`'${c}' can only be used on top-level namespaces. It cannot be used in nested queries.`,o);if(t.where&&i){if(typeof t.where!="object"||t.where===null)throw new Be(`'where' clause must be an object in entity '${e}', but received: ${typeof t.where}`,o?`${o}.where`:void 0);w_(t.where,e,i,o?`${o}.where`:"where")}},R_=(t,e,i,o,r=0)=>{var l;if(!t||typeof t!="object")throw new Be(`Query part for entity '${e}' must be an object, but received: ${typeof t}`,o);for(const c of Object.keys(t))if(c!=="$"){if(i&&!(c in i.entities[e].links)){const p=Object.keys(i.entities[e].links);throw new Be(`Link '${c}' does not exist on entity '${e}'. Available links: ${p.length>0?p.join(", "):"none"}`,`${o}.${c}`)}const d=t[c];if(typeof d=="object"&&d!==null){const p=(l=i?.entities[e].links[c])===null||l===void 0?void 0:l.entityName;p&&R_(d,p,i,`${o}.${c}`,r+1)}}else{const d=t[c];if(typeof d!="object"||d===null)throw new Be(`Query parameter '$' must be an object in entity '${e}', but received: ${typeof d}`,`${o}.$`);YM(d,e,i,`${o}.$`,r)}},Py=(t,e)=>{if(typeof t!="object"||t===null)throw new Be(`Query must be an object, but received: ${typeof t}${t===null?" (null)":""}`);if(Array.isArray(t))throw new Be(`Query must be an object, but received: ${typeof t}`);const i=t;for(const o of Object.keys(i)){if(Array.isArray(t[o]))throw new Be(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(typeof o!="string")throw new Be(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(o!=="$$ruleParams"){if(e&&!e.entities[o]){const r=Object.keys(e.entities);throw new Be(`Entity '${o}' does not exist in schema. Available entities: ${r.length>0?r.join(", "):"none"}`,o)}R_(i[o],o,e,o,0)}}},Ly=t=>typeof t!="string"?!1:Ol(t)?!0:ys(t);class un extends Error{constructor(e){super(e),this.name="TransactionValidationError"}}const N_=t=>t.length>0?t.join(", "):"none",JM=(t,e)=>new un(`Entity '${t}' does not exist in schema. Available entities: ${N_(e)}`),ky={string:t=>typeof t=="string",number:t=>typeof t=="number"&&!isNaN(t),boolean:t=>typeof t=="boolean",date:t=>t instanceof Date||typeof t=="string"||typeof t=="number",json:()=>!0},KM=(t,e)=>{var i,o;return t==null?!0:(o=(i=ky[e.valueType])===null||i===void 0?void 0:i.call(ky,t))!==null&&o!==void 0?o:!1},x_=(t,e)=>{const i=e.entities[t];if(!i)throw JM(t,Object.keys(e.entities));return i},Rd=(t,e,i)=>{const o=x_(t,i);if(typeof e!="object"||e===null)throw new un(`Arguments for data operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(r==="id")continue;const c=o.attrs[r];if(c&&!KM(l,c))throw new un(`Invalid value for attribute '${r}' in entity '${t}'. Expected ${c.valueType}, but received: ${typeof l}`)}},Oy=(t,e,i)=>{const o=x_(t,i);if(typeof e!="object"||e===null)throw new un(`Arguments for link operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(!o.links[r]){const d=Object.keys(o.links);throw new un(`Link '${r}' does not exist on entity '${t}'. Available links: ${N_(d)}`)}if(l!=null){if(Array.isArray(l)){for(const d of l)if(!Ly(d))throw new un(`Invalid entity ID in link '${r}' for entity '${t}'. Expected a UUID or a lookup, but received: ${d}`)}else if(!Ly(l))throw new un(`Invalid UUID in link '${r}' for entity '${t}'. Expected a UUID, but received: ${l}`)}}},QM={create:Rd,update:Rd,merge:Rd,link:Oy,unlink:Oy,delete:()=>{}},XM=(t,e)=>{if(!e)return;const[i,o,r,l]=t;if(!Array.isArray(r)&&!ys(r))throw new un(`Invalid id for entity '${o}'. Expected a UUID, but received: ${r}`);if(typeof o!="string")throw new un(`Entity name must be a string, but received: ${typeof o}`);const c=QM[i];c&&l!==void 0&&c(o,l,e)},ZM=(t,e)=>{const i=Array.isArray(t)?t:[t];for(const o of i){if(!o||typeof o!="object")throw new un(`Transaction chunk must be an object, but received: ${typeof o}`);if(!Array.isArray(o.__ops))throw new un(`Transaction chunk must have __ops array, but received: ${typeof o.__ops}`);for(const r of o.__ops){if(!Array.isArray(r))throw new un(`Transaction operation must be an array, but received: ${typeof r}`);XM(r,e)}}};var qy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};let I_=0;class Gy{constructor(e){this.type="ws",this.id=`${this.type}_${I_++}`,this.conn=new WebSocket(e),this.conn.onopen=i=>{this.onopen&&this.onopen({target:this})},this.conn.onmessage=i=>{this.onmessage&&this.onmessage({target:this,message:JSON.parse(i.data.toString())})},this.conn.onclose=i=>{this.onclose&&this.onclose({target:this})},this.conn.onerror=i=>{this.onerror&&this.onerror({target:this})}}close(){this.conn.close()}isOpen(){var e;return this.conn.readyState===((e=WebSocket.OPEN)!==null&&e!==void 0?e:1)}isConnecting(){var e;return this.conn.readyState===((e=WebSocket.CONNECTING)!==null&&e!==void 0?e:0)}send(e){return this.conn.send(JSON.stringify(e))}}class WM{constructor(e,i){this.type="sse",this.initParams=null,this.sendQueue=[],this.closeFired=!1,this.sseInitTimeout=void 0,this.id=`${this.type}_${I_++}`,this.url=i,this.ES=e,this.conn=new e(i),this.sseInitTimeout=setTimeout(()=>{this.initParams||this.handleError()},1e4),this.conn.onmessage=o=>{const r=JSON.parse(o.data);if(r.op==="sse-init"){this.initParams={machineId:r["machine-id"],sessionId:r["session-id"],sseToken:r["sse-token"]},this.onopen&&this.onopen({target:this}),clearTimeout(this.sseInitTimeout);return}this.onmessage&&this.onmessage({target:this,message:r})},this.conn.onerror=o=>{this.handleError()}}handleError(){try{this.onerror&&this.onerror({target:this})}finally{this.handleClose()}}handleClose(){this.conn.close(),this.onclose&&!this.closeFired&&(this.closeFired=!0,this.onclose({target:this}))}postMessages(e){return qy(this,void 0,void 0,function*(){var i,o,r;try{(yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machine_id:(i=this.initParams)===null||i===void 0?void 0:i.machineId,session_id:(o=this.initParams)===null||o===void 0?void 0:o.sessionId,sse_token:(r=this.initParams)===null||r===void 0?void 0:r.sseToken,messages:e})})).ok||this.handleError()}catch{this.handleError()}})}flushQueue(){return qy(this,void 0,void 0,function*(){if(this.sendPromise||!this.sendQueue.length)return;const e=this.sendQueue;this.sendQueue=[];const i=this.postMessages(e);this.sendPromise=i,i.then(()=>{this.sendPromise=null,this.flushQueue()})})}send(e){if(!this.isOpen()||!this.initParams)throw this.isConnecting()?new Error("Failed to execute 'send' on 'EventSource': Still in CONNECTING state."):this.conn.readyState===this.ES.CLOSED?new Error("EventSource is already in CLOSING or CLOSED state."):new Error("EventSource is in invalid state.");this.sendQueue.push(e),this.flushQueue()}isOpen(){return this.conn.readyState===this.ES.OPEN&&this.initParams!==null}isConnecting(){return this.conn.readyState===this.ES.CONNECTING||this.conn.readyState===this.ES.OPEN&&this.initParams===null}close(){this.handleClose()}}var Hy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function jM(t,e){const i=t.values;if(i)for(const o of i.entities||[])o.store.useDateObjects=e,o.store.attrs=i.attrs,o.store=o_(o.store);return t}function ew(t,e){var i,o;if(!((i=e.values)===null||i===void 0)&&i.entities){const r=[];for(const l of(o=e.values)===null||o===void 0?void 0:o.entities){const c=i_(l.store);delete c.attrs,r.push(Object.assign(Object.assign({},l),{store:c}))}return Object.assign(Object.assign({},e),{values:Object.assign(Object.assign({},e.values),{entities:r})})}else return e}function tw(t,e,i){var o,r;const l=(o=e?.state)===null||o===void 0?void 0:o.txId,c=(r=i?.state)===null||r===void 0?void 0:r.txId;return l&&(!c||l>c)?e:c&&(!l||c>l)?i:e||i}function Nd(t,e){return y_({store:e,pageInfo:null,aggregate:null},t.query).data[t.table][0]}function zy(t,e,i){var o;const r=(o=Li(e,t.table,"id"))===null||o===void 0?void 0:o.id;if(!r)return-1;const l=Cs(e.eav,[i,r,i]);return l?l[3]:-1}function Vy(t,e){for(const{action:i,triple:o}of e)switch(i){case"added":a_(t,o);break;case"removed":s_(t,o);break}}function nw(t,e){var i,o,r,l;const c={};for(const{action:d,triple:p}of e){const[h,y,_]=p,T=(o=(i=t.attrs[y])===null||i===void 0?void 0:i["forward-identity"])===null||o===void 0?void 0:o[2];if(!T)continue;const C=(r=c[h])!==null&&r!==void 0?r:{};c[h]=C;const b=(l=C[T])!==null&&l!==void 0?l:{};switch(C[T]=b,d){case"added":b.newValue=_;break;case"removed":b.oldValue===void 0&&(b.oldValue=_);break}}for(const d of Object.keys(c)){const{oldValue:p,newValue:h}=c[d];p===h&&delete c[d]}return c}function Sl(t,e){return{[t.table]:e.map(i=>i.entity)}}function iw(t,e){var i;if(t.orderFieldType)return t.orderFieldType;const o=t.orderField==="serverCreatedAt"?"number":(i=Li(e([]),t.table,t.orderField))===null||i===void 0?void 0:i["checked-data-type"];return t.orderFieldType=o,o}function ow(t,e,i){const o=e;if(t.orderField==="serverCreatedAt"){i.sort(t.orderDirection==="asc"?function(c,d){return Ir(c.entity.id,c.serverCreatedAt,d.entity.id,d.serverCreatedAt,o)}:function(c,d){return Ir(d.entity.id,d.serverCreatedAt,c.entity.id,c.serverCreatedAt,o)});return}const r=t.orderField;i.sort(t.orderDirection==="asc"?function(c,d){return Ir(c.entity.id,c.entity[r],d.entity.id,d.entity[r],o)}:function(c,d){return Ir(d.entity.id,d.entity[r],c.entity.id,c.entity[r],o)})}var ro;(function(t){t.InitialSyncBatch="InitialSyncBatch",t.InitialSyncComplete="InitialSyncComplete",t.LoadFromStorage="LoadFromStorage",t.SyncTransaction="SyncTransaction",t.Error="Error"})(ro||(ro={}));class sw{constructor(e,i,o,r,l){this.callbacks={},this.idToHash={},this.trySend=e,this.config=o,this.log=r,this.createStore=l,this.subs=new jd({persister:i,merge:tw,serialize:ew,parse:(c,d)=>jM(d,this.config.useDateObjects),objectSize:c=>{var d;return((d=c.values)===null||d===void 0?void 0:d.entities.length)||0},logger:r,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}})}beforeUnload(){this.subs.flush()}subscribe(e,i){const o=Tt(e);return this.callbacks[o]=this.callbacks[o]||[],this.callbacks[o].push(i),this.initSubscription(e,o,i),r=>{this.unsubscribe(o,i,r?.keepSubscription)}}unsubscribe(e,i,o){const r=(this.callbacks[e]||[]).filter(l=>l!==i);if(this.callbacks[e]=r,!r.length){delete this.callbacks[e];const l=this.subs.currentValue[e];l?.state&&this.clearSubscriptionData(l.state.subscriptionId,!!o),o||this.subs.updateInPlace(c=>{delete c[e]})}}sendStart(e){this.trySend(ft(),{op:"start-sync",q:e})}sendResync(e,i,o){this.idToHash[i.subscriptionId]=e.hash,this.trySend(i.subscriptionId,{op:"resync-table","subscription-id":i.subscriptionId,"tx-id":o,token:i.token})}sendRemove(e,i){this.trySend(ft(),{op:"remove-sync","subscription-id":e.subscriptionId,"keep-subscription":i})}initSubscription(e,i,o){return Hy(this,void 0,void 0,function*(){var r,l,c,d;yield this.subs.waitForKeyToLoad(i);const p=this.subs.currentValue[i];if(p&&p.state&&p.state.txId){this.sendResync(p,p.state,p.state.txId),!((r=p.values)===null||r===void 0)&&r.entities&&o&&o({type:ro.LoadFromStorage,data:Sl(p,(l=p.values)===null||l===void 0?void 0:l.entities)});return}const h=Object.keys(e)[0],y=((d=(c=e[h])===null||c===void 0?void 0:c.$)===null||d===void 0?void 0:d.order)||{serverCreatedAt:"asc"},[_,T]=Object.entries(y)[0];this.subs.updateInPlace(C=>{C[i]={query:e,hash:i,table:h,orderDirection:T,orderField:_,createdAt:Date.now(),updatedAt:Date.now()}}),this.sendStart(e)})}flushPending(){return Hy(this,void 0,void 0,function*(){for(const e of Object.keys(this.callbacks)){yield this.subs.waitForKeyToLoad(e);const i=this.subs.currentValue[e];i?yield this.initSubscription(i.query,i.hash):this.log.error("Missing sub for hash in flushPending",e)}})}onStartSyncOk(e){const i=e["subscription-id"],o=e.q,r=Tt(o);this.idToHash[i]=r,this.subs.updateInPlace(l=>{const c=l[r];if(!c)return this.log.error("Missing sub for hash",r,"subscription-id",i,"query",o),l;c.state={subscriptionId:i,token:e.token}})}notifyCbs(e,i){for(const o of this.callbacks[e]||[])o(i)}onSyncLoadBatch(e){var i;const o=e["subscription-id"],r=e["join-rows"],l=this.idToHash[o];if(!l){this.log.error("Missing hash for subscription",e);return}const c=[],d=this.subs.currentValue[l];if(!d){this.log.error("Missing sub for hash",l,e);return}const p=(i=d.values)!==null&&i!==void 0?i:{entities:[],attrs:this.createStore([]).attrs};d.values=p;const h=p.entities;for(const y of r){const _=this.createStore(y);p.attrs=_.attrs;const T=Nd(d,_);h.push({store:_,entity:T,serverCreatedAt:zy(d,_,T.id)}),c.push(T)}this.subs.updateInPlace(y=>{y[l]=d,y[l].updatedAt=Date.now()}),d.values&&this.notifyCbs(l,{type:ro.InitialSyncBatch,data:Sl(d,d.values.entities),batch:c})}onSyncInitFinish(e){var i;const o=e["subscription-id"],r=this.idToHash[o];if(!r){this.log.error("Missing hash for subscription",e);return}this.subs.updateInPlace(c=>{const d=c[r];if(!d){this.log.error("Missing sub for hash",r,e);return}const p=d.state;if(!p)return this.log.error("Sub never set init, missing result",d,e),c;p.txId=e["tx-id"],d.updatedAt=Date.now()});const l=this.subs.currentValue[r];l&&this.notifyCbs(r,{type:ro.InitialSyncComplete,data:Sl(l,((i=l.values)===null||i===void 0?void 0:i.entities)||[])})}onSyncUpdateTriples(e){var i,o,r;const l=e["subscription-id"],c=this.idToHash[l];if(!c){this.log.error("Missing hash for subscription",e);return}const d=this.subs.currentValue[c];if(!d){this.log.error("Missing sub for hash",c,e);return}const p=d.state;if(!p){this.log.error("Missing state for sub",d,e);return}for(const h of e.txes){if(p.txId&&p.txId>=h["tx-id"])continue;p.txId=h["tx-id"];const y=[],_={};for(const D of h.changes){const P=(i=_[D.triple[0]])!==null&&i!==void 0?i:[];_[D.triple[0]]=P,P.push(D)}const T=(o=d.values)!==null&&o!==void 0?o:{entities:[],attrs:this.createStore([]).attrs},C=T.entities;d.values=T;const b=[];e:for(const[D,P]of Object.entries(_))for(let J=0;J<C.length;J++){const B=C[J];if(qA(B.store,D)){Vy(B.store,P);const W=Nd(d,B.store),Q=nw(B.store,P)[D];W?(b.push({oldEntity:B.entity,newEntity:W,changedFields:Q||{}}),B.entity=W):y.push(J),delete _[D];continue e}}const M=[];for(const[D,P]of Object.entries(_)){const J=this.createStore([]);T.attrs=J.attrs,Vy(J,P);const B=Nd(d,J);if(!B){this.log.error("No entity found after applying change",{sub:d,changes:P,store:J});continue}C.push({store:J,entity:B,serverCreatedAt:zy(d,J,B.id)}),M.push(B)}const w=[];for(const D of y.sort().reverse())w.push(C[D].entity),C.splice(D,1);const R=iw(d,this.createStore);ow(d,R,C),this.notifyCbs(c,{type:ro.SyncTransaction,data:Sl(d,(r=d.values)===null||r===void 0?void 0:r.entities),added:M,removed:w,updated:b})}this.subs.updateInPlace(h=>{h[c]=d,h[c].updatedAt=Date.now()})}clearSubscriptionData(e,i){const o=this.idToHash[e];if(o){delete this.idToHash[e];const r=this.subs.currentValue[o];if(r.state&&this.sendRemove(r.state,i),i?this.subs.unloadKey(o):this.subs.updateInPlace(l=>{delete l[o]}),r)return r}}onStartSyncError(e){const i=Tt(e["original-event"].q),o={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa.",status:e.status,type:e.type,hint:e.hint},r=Object.keys(e["original-event"].q)[0];this.notifyCbs(i,{type:ro.Error,data:{[r]:[]},error:o})}onResyncError(e){const i=e["original-event"]["subscription-id"],o=this.clearSubscriptionData(i,!1);o&&this.initSubscription(o.query,o.hash)}}var rt=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})},rw=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i};const Kn={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},aw=3e4,lw=3e4,uw=200,cw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},xd="_instant_oauth_redirect",Mr="currentUser";function dw({transportType:t,appId:e,apiURI:i,wsURI:o,EventSourceImpl:r}){if(!r)return new Gy(`${o}?app_id=${e}`);switch(t){case"ws":return new Gy(`${o}?app_id=${e}`);case"sse":return new WM(r,`${i}/runtime/sse?app_id=${e}`);default:throw new Error("Unknown transport type "+t)}}function fw(){return typeof window<"u"||typeof chrome<"u"}const By={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function hw(t,e){var i;const o=typeof t=="string"?JSON.parse(t):t;if(!((i=o?.result)===null||i===void 0)&&i.store){const r=o.result.store;o.result.store=o_(Object.assign(Object.assign({},r),{useDateObjects:e}))}return o}function pw(t,e){var i;const o=Object.assign({},e);return!((i=e.result)===null||i===void 0)&&i.store&&(o.result=Object.assign(Object.assign({},e.result),{store:i_(e.result.store)})),o}function mw(t,e){switch(t){case"pendingMutations":return new Map(typeof e=="string"?JSON.parse(e):e);default:return e}}function gw(t,e){switch(t){case"pendingMutations":return[...e.entries()];default:return e}}function yw(t,e,i){const o=e?.result,r=i?.result;return o&&!r&&i&&(i.result=o),i||e}function Fy(t){return[...t].sort((e,i)=>{const[o,r]=e,[l,c]=i,d=r.order||0,p=c.order||0;return d==p?o<l?-1:o>l?1:0:d-p})}class vw{constructor(e,i=S_,o=E_,r,l){var c,d,p;if(this._isOnline=!0,this._isShutdown=!1,this.status=Kn.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._transportType="ws",this._wsOk=null,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._inFlightMutationEventIds=new Set,this._onMergeKv=(h,y,_)=>{var T,C;switch(h){case"pendingMutations":{const b=(T=y?.entries())!==null&&T!==void 0?T:[],M=(C=_?.entries())!==null&&C!==void 0?C:[],w=new Map([...b,...M]);return(y?this._rewriteMutationsSorted(this.attrs,y):[]).forEach(([D,P])=>{var J;!(!((J=_?.pendingMutations)===null||J===void 0)&&J.has(D))&&!P["tx-id"]&&this._sendMutation(D,P)}),w}default:return _||y}},this.getPreviousResult=h=>{const y=Tt(h);return this.dataForQuery(y)},this.notifyOne=h=>{var y,_;const T=(y=this.queryCbs[h])!==null&&y!==void 0?y:[],C=(_=this._dataForQueryCache[h])===null||_===void 0?void 0:_.data,b=this.dataForQuery(h);b&&(wl(b,C)||T.forEach(M=>M.cb(b)))},this.notifyOneQueryOnce=h=>{var y;const _=(y=this.queryOnceDfds[h])!==null&&y!==void 0?y:[],T=this.dataForQuery(h);_.forEach(C=>{this._completeQueryOnce(C.q,h,C.dfd),C.dfd.resolve(T)})},this.notifyQueryError=(h,y)=>{(this.queryCbs[h]||[]).forEach(T=>T.cb({error:y}))},this.pushTx=h=>{this.config.disableValidation||ZM(h,this.config.schema);try{const y=_M({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(_=>{var T;return(T=_?.result)===null||T===void 0?void 0:T.store}),useDateObjects:this.config.useDateObjects},h);return this.pushOps(y)}catch(y){return this.pushOps([],y)}},this.pushOps=(h,y)=>{const _=ft(),T=[...this._pendingMutations().values()],C=Math.max(0,...T.map(w=>w.order||0))+1,b={op:"transact","tx-steps":h,created:Date.now(),error:y,order:C};this._updatePendingMutations(w=>{w.set(_,b)});const M=new xy;return this.mutationDeferredStore.set(_,M),this._sendMutation(_,b),this.notifyAll(),M.promise},this._transportOnOpen=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][open]",y.id,"skip; this is no longer the current transport");return}this._log.info("[socket][open]",this._transport.id),this._setStatus(Kn.OPENED),this.getCurrentUser().then(_=>{var T;this._trySend(ft(),{op:"init","app-id":this.config.appId,"refresh-token":(T=_.user)===null||T===void 0?void 0:T.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(_=>{this._log.error("[socket][error]",y.id,_)})},this._transportOnMessage=h=>{const y=h.target,_=h.message;if(this._transport!==y){this._log.info("[socket][message]",y.id,_,"skip; this is no longer the current transport");return}!this._wsOk&&y.type==="ws"&&(this._wsOk=!0),this._transportType="ws",this._handleReceive(y.id,h.message)},this._transportOnError=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][error]",y.id,"skip; this is no longer the current transport");return}this._log.error("[socket][error]",y.id,h)},this._scheduleReconnect=()=>{!this._wsOk&&this._transportType!=="sse"&&(this._transportType="sse",this._reconnectTimeoutMs=0),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",this._transport.id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this._transportOnClose=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][close]",y.id,"skip; this is no longer the current transport");return}this._setStatus(Kn.CLOSED);for(const _ of Object.values(this._rooms))_.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",y.id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",y.id,"schedule reconnect, ms =",this._reconnectTimeoutMs),this._scheduleReconnect()},this._EventSource=l,this.config=Object.assign(Object.assign({},cw),e),this.queryCacheLimit=(c=this.config.queryCacheLimit)!==null&&c!==void 0?c:10,this._pendingTxCleanupTimeout=(d=this.config.pendingTxCleanupTimeout)!==null&&d!==void 0?d:lw,this._pendingMutationCleanupThreshold=(p=this.config.pendingMutationCleanupThreshold)!==null&&p!==void 0?p:uw,this._log=VM(e.verbose||Vf||C_,()=>this._reactorStats()),this.versions=Object.assign(Object.assign({},r||{}),{"@instantdb/core":Bf}),this.config.schema&&(this._linkIndex=Dy(this.config.schema)),!!fw()){if(!e.appId)throw new Error("Instant must be initialized with an appId.");if(!ys(e.appId))throw new Error(`Instant must be initialized with a valid appId. \`${e.appId}\` is not a valid uuid.`);typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",h=>rt(this,void 0,void 0,function*(){var y;try{if(((y=h.data)===null||y===void 0?void 0:y.type)==="auth"){const _=yield this.getCurrentUser();this.updateUser(_.user)}}catch(_){this._log.error("[error] handle broadcast channel",_)}}))),this._initStorage(i),this._syncTable=new sw(this._trySendAuthed.bind(this),new i(this.config.appId,"syncSubs"),{useDateObjects:this.config.useDateObjects},this._log,h=>Rl(this.attrs,h,this.config.enableCardinalityInference,this._linkIndex,this.config.useDateObjects)),this._oauthCallbackResponse=this._oauthLoginInit(),this.getCurrentUser(),o.getIsOnline().then(h=>{this._isOnline=h,this._startSocket(),o.listen(y=>{y!==this._isOnline&&(this._log.info("[network] online =",y),this._isOnline=y,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Kn.CLOSED),this._setStatus(Kn.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload))}}updateSchema(e){this.config=Object.assign(Object.assign({},this.config),{schema:e,cardinalityInference:!!e}),this._linkIndex=e?Dy(this.config.schema):null}_reactorStats(){return{inFlightMutationCount:this._inFlightMutationEventIds.size,pendingMutationCount:this._pendingMutations().size,transportType:this._transportType}}_onQuerySubLoaded(e){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyOne(e))}_initStorage(e){this.querySubs=new jd({persister:new e(this.config.appId,"querySubs"),merge:yw,serialize:pw,parse:(i,o)=>hw(o,this.config.useDateObjects),objectSize:i=>{var o,r,l,c;return(c=(l=(r=(o=i.result)===null||o===void 0?void 0:o.store)===null||r===void 0?void 0:r.triples)===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},logger:this._log,preloadEntryCount:10,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}}),this.querySubs.onKeyLoaded=i=>this._onQuerySubLoaded(i),this.kv=new jd({persister:new e(this.config.appId,"kv"),merge:this._onMergeKv,serialize:gw,parse:mw,objectSize:()=>0,logger:this._log,saveThrottleMs:100,idleCallbackMaxWaitMs:100,gc:null}),this.kv.onKeyLoaded=i=>{i==="pendingMutations"&&this.notifyAll()},this.kv.waitForKeyToLoad("pendingMutations"),this.kv.waitForKeyToLoad(Mr),this._beforeUnloadCbs.push(()=>{this.kv.flush(),this.querySubs.flush()})}_beforeUnload(){for(const e of this._beforeUnloadCbs)e();this._syncTable.beforeUnload()}_finishTransaction(e,i,o){const r=this.mutationDeferredStore.get(i);this.mutationDeferredStore.delete(i);const l=e!=="error"&&e!=="timeout";if(!r&&!l&&console.error("Mutation failed",Object.assign({status:e,eventId:i},o)),!!r)if(l)r.resolve({status:e,eventId:i});else if(o?.type){const{status:c}=o,d=rw(o,["status"]);r.reject(new Xl({body:d,status:c??0}))}else r.reject(new _s(o?.message||"Unknown error",o?.hint))}_setStatus(e,i){this.status=e,this._errorMessage=i,this.notifyConnectionStatusSubs(e)}_flushEnqueuedRoomData(e){var i,o;const r=(o=(i=this._presence[e])===null||i===void 0?void 0:i.result)===null||o===void 0?void 0:o.user,l=this._broadcastQueue[e];if(this._broadcastQueue[e]=[],r&&this._trySetPresence(e,r),l)for(const c of l){const{topic:d,roomType:p,data:h}=c;this._tryBroadcast(e,p,d,h)}}_handleReceive(e,i){var o,r,l,c,d,p;const h=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(By[i.op]||this._log.info("[receive]",e,i.op,i),i.op){case"init-ok":{this._setStatus(Kn.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(i.attrs),this._flushPendingMessages(),this._sessionId=i["session-id"];for(const T of Object.keys(this._rooms)){const C=(r=(o=this._presence[T])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.user;this._tryJoinRoom(T,C)}break}case"add-query-exists":{this.notifyOneQueryOnce(Tt(i.q));break}case"add-query-ok":{const{q:T,result:C}=i,b=Tt(T);if(!this._hasQueryListeners()&&!this.querySubs.currentValue[b])break;const M=(c=(l=C?.[0])===null||l===void 0?void 0:l.data)===null||c===void 0?void 0:c["page-info"],w=(p=(d=C?.[0])===null||d===void 0?void 0:d.data)===null||p===void 0?void 0:p.aggregate,R=Iy(C),D=Rl(this.attrs,R,h,this._linkIndex,this.config.useDateObjects);this.querySubs.updateInPlace(P=>{if(!P[b]){this._log.info("Missing value in querySubs",{hash:b,q:T});return}P[b].result={store:D,pageInfo:M,aggregate:w,processedTxId:i["processed-tx-id"]}}),this._cleanupPendingMutationsQueries(),this.notifyOne(b),this.notifyOneQueryOnce(b),this._cleanupPendingMutationsTimeout();break}case"start-sync-ok":{this._syncTable.onStartSyncOk(i);break}case"sync-load-batch":{this._syncTable.onSyncLoadBatch(i);break}case"sync-init-finish":{this._syncTable.onSyncInitFinish(i);break}case"sync-update-triples":{this._syncTable.onSyncUpdateTriples(i);break}case"refresh-ok":{const{computations:T,attrs:C}=i,b=i["processed-tx-id"];C&&this._setAttrs(C),this._cleanupPendingMutationsTimeout();const M=this._rewriteMutations(this.attrs,this._pendingMutations(),b);M!==this._pendingMutations()&&this.kv.updateInPlace(D=>{D.pendingMutations=M});const w=Fy(M.entries()),R=T.map(D=>{var P,J,B,W;const Q=D["instaql-query"],re=D["instaql-result"],ee=Tt(Q),le=Iy(re),pe=Rl(this.attrs,le,h,this._linkIndex,this.config.useDateObjects),oe=this._applyOptimisticUpdates(pe,w,b),be=(J=(P=re?.[0])===null||P===void 0?void 0:P.data)===null||J===void 0?void 0:J["page-info"],Ye=(W=(B=re?.[0])===null||B===void 0?void 0:B.data)===null||W===void 0?void 0:W.aggregate;return{q:Q,hash:ee,store:oe,pageInfo:be,aggregate:Ye}});R.forEach(({hash:D,q:P,store:J,pageInfo:B,aggregate:W})=>{this.querySubs.updateInPlace(Q=>{if(!Q[D]){this._log.error("Missing value in querySubs",{hash:D,q:P});return}Q[D].result={store:J,pageInfo:B,aggregate:W,processedTxId:b}})}),this._cleanupPendingMutationsQueries(),R.forEach(({hash:D})=>{this.notifyOne(D)});break}case"transact-ok":{const{"client-event-id":T,"tx-id":C}=i;this._inFlightMutationEventIds.delete(T);const M=this._rewriteMutations(this.attrs,this._pendingMutations()).get(T);if(!M)break;this._updatePendingMutations(R=>{R.set(T,Object.assign(Object.assign({},R.get(T)),{"tx-id":C,confirmed:Date.now()}))});const w=M["tx-steps"].filter(([R,...D])=>R==="add-attr").map(([R,D])=>D).concat(Object.values(this.attrs));this._setAttrs(w),this._finishTransaction("synced",T),this._cleanupPendingMutationsTimeout();break}case"patch-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._patchPresencePeers(T,i.edits),this._notifyPresenceSubs(T);break}case"refresh-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._setPresencePeers(T,i.data),this._notifyPresenceSubs(T);break}case"server-broadcast":{const T=i["room-id"],C=i.topic;this._trySetRoomConnected(T,!0),this._notifyBroadcastSubs(T,C,i);break}case"join-room-ok":{const T=i["room-id"];if(!this._rooms[T]){this._roomsPendingLeave[T]&&(this._tryLeaveRoom(T),delete this._roomsPendingLeave[T]);break}this._trySetRoomConnected(T,!0),this._flushEnqueuedRoomData(T);break}case"leave-room-ok":{const T=i["room-id"];this._trySetRoomConnected(T,!1);break}case"join-room-error":const y=i["room-id"],_=this._rooms[y];_&&(_.error=i.error),this._notifyPresenceSubs(y);break;case"error":this._handleReceiveError(i);break;default:this._log.info("Uknown op",i.op,i);break}}_pendingMutations(){var e;return(e=this.kv.currentValue.pendingMutations)!==null&&e!==void 0?e:new Map}_updatePendingMutations(e){this.kv.updateInPlace(i=>{var o;const r=(o=i.pendingMutations)!==null&&o!==void 0?o:new Map;i.pendingMutations=r,e(r)})}_handleMutationError(e,i,o){const r=this._pendingMutations().get(i);if(r&&(e!=="timeout"||!r["tx-id"])){this._updatePendingMutations(c=>(c.delete(i),c)),this._inFlightMutationEventIds.delete(i);const l={message:o.message,hint:o.hint};this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(l),this._finishTransaction(e,i,o)}}_handleReceiveError(e){var i,o,r,l,c,d,p;console.log("error",e);const h=e["client-event-id"];this._inFlightMutationEventIds.delete(h);const y=this._pendingMutations().get(h),_={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(e.hint&&(_.hint=e.hint),y){this._handleMutationError("error",h,e);return}if(!((i=e["original-event"])===null||i===void 0)&&i.hasOwnProperty("q")&&((o=e["original-event"])===null||o===void 0?void 0:o.op)==="add-query"){const b=(r=e["original-event"])===null||r===void 0?void 0:r.q,M=Tt(b);this.notifyQueryError(Tt(b),_),this.notifyQueryOnceError(b,M,h,_);return}if(((l=e["original-event"])===null||l===void 0?void 0:l.op)==="init"){if(e.type==="record-not-found"&&((c=e.hint)===null||c===void 0?void 0:c["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Kn.ERRORED,_),this.notifyAll();return}if(((d=e["original-event"])===null||d===void 0?void 0:d.op)==="resync-table"){this._syncTable.onResyncError(e);return}if(((p=e["original-event"])===null||p===void 0?void 0:p.op)==="start-sync"){this._syncTable.onStartSyncError(e);return}const C=Object.assign({},e);delete C.message,delete C.hint,console.error(e.message,C),e.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,e.hint)}notifyQueryOnceError(e,i,o,r){var l;const c=(l=this.queryOnceDfds[i])===null||l===void 0?void 0:l.find(d=>d.eventId===o);c&&(c.dfd.reject(r),this._completeQueryOnce(e,i,c.dfd))}_setAttrs(e){this.attrs=e.reduce((i,o)=>(i[o.id]=o,i),{}),this.notifyAttrsSubs()}_startQuerySub(e,i){const o=ft();return this.querySubs.updateInPlace(r=>{r[i]=r[i]||{q:e,result:null,eventId:o},r[i].lastAccessed=Date.now()}),this._trySendAuthed(o,{op:"add-query",q:e}),o}subscribeTable(e,i){return this._syncTable.subscribe(e,i)}subscribeQuery(e,i,o){var r;this.config.disableValidation||Py(e,this.config.schema),o&&"ruleParams"in o&&(e=Object.assign({$$ruleParams:o.ruleParams},e));const l=Tt(e),c=this.getPreviousResult(e);return c&&i(c),this.queryCbs[l]=(r=this.queryCbs[l])!==null&&r!==void 0?r:[],this.queryCbs[l].push({q:e,cb:i}),this._startQuerySub(e,l),()=>{this._unsubQuery(e,l,i)}}queryOnce(e,i){var o;this.config.disableValidation||Py(e,this.config.schema),i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const r=new xy;if(!this._isOnline)return r.reject(new Error("We can't run `queryOnce`, because the device is offline.")),r.promise;if(!this.querySubs)return r.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),r.promise;const l=Tt(e),c=this._startQuerySub(e,l);return this.queryOnceDfds[l]=(o=this.queryOnceDfds[l])!==null&&o!==void 0?o:[],this.queryOnceDfds[l].push({q:e,dfd:r,eventId:c}),setTimeout(()=>r.reject(new Error("Query timed out")),aw),r.promise}_completeQueryOnce(e,i,o){this.queryOnceDfds[i]&&(this.queryOnceDfds[i]=this.queryOnceDfds[i].filter(r=>r.dfd!==o),this._cleanupQuery(e,i))}_unsubQuery(e,i,o){this.queryCbs[i]&&(this.queryCbs[i]=this.queryCbs[i].filter(r=>r.cb!==o),this._cleanupQuery(e,i))}_hasQueryListeners(e){var i,o;return!!(!((i=this.queryCbs[e])===null||i===void 0)&&i.length||!((o=this.queryOnceDfds[e])===null||o===void 0)&&o.length)}_cleanupQuery(e,i){this._hasQueryListeners(i)||(delete this.queryCbs[i],delete this.queryOnceDfds[i],delete this._dataForQueryCache[i],this.querySubs.unloadKey(i),this._trySendAuthed(ft(),{op:"remove-query",q:e}))}_rewriteMutations(e,i,o){if(!e)return i;if(!i)return new Map;const r=y=>{const[_,T,C]=y["forward-identity"];return St(e,T,C)},l=y=>{const[_,T,C]=y["forward-identity"];return ho(e,T,C)},c={attrIdMap:{},refSwapAttrIds:new Set};let d=!1;const p=(y,_)=>{const T=[];for(const C of y){const[b]=C;if(b==="add-attr"){const[w,R]=C,D=r(R);if(D&&R.id!==D.id){c.attrIdMap[R.id]=D.id,d=!0;continue}if(R["value-type"]==="ref"){const P=l(R);if(P){c.attrIdMap[R.id]=P.id,c.refSwapAttrIds.add(R.id),d=!0;continue}}}if(o&&_&&o>=_&&b==="add-attr"||b==="update-attr"||b==="delete-attr"){d=!0;continue}const M=d?Qb(c,C):C;T.push(M)}return d?T:y},h=new Map;for(const[y,_]of i.entries())h.set(y,Object.assign(Object.assign({},_),{"tx-steps":p(_["tx-steps"],_["tx-id"])}));return d?h:i}_rewriteMutationsSorted(e,i){return Fy(this._rewriteMutations(e,i).entries())}optimisticAttrs(){var e;const i=[...this._pendingMutations().values()].flatMap(d=>d["tx-steps"]),o=new Set(i.filter(([d,p])=>d==="delete-attr").map(([d,p])=>p)),r=[];for(const[d,p]of i)if(d==="add-attr")r.push(p);else if(d==="update-attr"&&p.id&&(!((e=this.attrs)===null||e===void 0)&&e[p.id])){const h=Object.assign(Object.assign({},this.attrs[p.id]),p);r.push(h)}const l=[...Object.values(this.attrs||{}),...r].filter(d=>!o.has(d.id));return Object.fromEntries(l.map(d=>[d.id,d]))}dataForQuery(e){const i=this._errorMessage;if(i)return{error:i};if(!this.querySubs||!this.kv.currentValue.pendingMutations)return;const o=this.querySubs.version(),r=this.querySubs.currentValue,l=this.kv.version(),c=this._pendingMutations(),{q:d,result:p}=r[e]||{};if(!p)return;const h=this._dataForQueryCache[e];if(h&&o===h.querySubVersion&&l===h.pendingMutationsVersion)return h.data;const{store:y,pageInfo:_,aggregate:T,processedTxId:C}=p,b=this._rewriteMutationsSorted(y.attrs,c),M=this._applyOptimisticUpdates(y,b,C),w=y_({store:M,pageInfo:_,aggregate:T},d);return this._dataForQueryCache[e]={querySubVersion:o,pendingMutationsVersion:l,data:w},w}_applyOptimisticUpdates(e,i,o){for(const[r,l]of i)(!l["tx-id"]||o&&l["tx-id"]>o)&&(e=XA(e,l["tx-steps"]));return e}notifyAll(){Object.keys(this.queryCbs).forEach(e=>{this.querySubs.waitForKeyToLoad(e).then(()=>this.notifyOne(e)).catch(()=>this.notifyOne(e))})}loadedNotifyAll(){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyAll()).catch(()=>this.notifyAll())}shutdown(){var e;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(e=this._transport)===null||e===void 0||e.close()}_sendMutation(e,i){if(i.error){this._handleMutationError("error",e,{message:i.error.message});return}if(this.status!==Kn.AUTHENTICATED){this._finishTransaction("enqueued",e);return}const o=Math.max(6e3,Math.min(this._inFlightMutationEventIds.size+1,this._pendingMutations().size+1)*6e3);this._isOnline?(this._trySend(e,i),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",e,{message:"transaction timed out"})},o)):this._finishTransaction("enqueued",e)}_flushPendingMessages(){Object.keys(this.queryCbs).map(r=>this.querySubs.currentValue[r]).filter(r=>r).forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),this._rewriteMutationsSorted(this.attrs,this._pendingMutations()).forEach(([r,l])=>{l["tx-id"]||this._sendMutation(r,l)}),this._syncTable.flushPending()}_cleanupPendingMutationsQueries(){let e=Number.MAX_SAFE_INTEGER;for(const{result:i}of Object.values(this.querySubs.currentValue))i?.processedTxId&&(e=Math.min(e,i?.processedTxId));this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r["tx-id"]&&r["tx-id"]<=e&&i.delete(o)})}_cleanupPendingMutationsTimeout(){if(this._pendingMutations().size<this._pendingMutationCleanupThreshold)return;const e=Date.now();this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r.confirmed&&r.confirmed+this._pendingTxCleanupTimeout<e&&i.delete(o)})}_trySendAuthed(...e){this.status===Kn.AUTHENTICATED&&this._trySend(...e)}_trySend(e,i,o){if(this._transport.isOpen()){switch(By[i.op]||this._log.info("[send]",this._transport.id,i.op,i),i.op){case"transact":{this._inFlightMutationEventIds.add(e);break}case"init":this._inFlightMutationEventIds.clear()}this._transport.send(Object.assign({"client-event-id":e},i))}}_startSocket(){if(this._wsOk=null,this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._transport&&this._transport.isConnecting()){this._log.info("[socket][start]",this._transport.id,"maintained as current transport, we were still in a connecting state");return}const e=this._transport;this._transport=dw({transportType:this._transportType,appId:this.config.appId,apiURI:this.config.apiURI,wsURI:this.config.websocketURI,EventSourceImpl:this._EventSource}),this._transport.onopen=this._transportOnOpen,this._transport.onmessage=this._transportOnMessage,this._transport.onclose=this._transportOnClose,this._transport.onerror=this._transportOnError,this._log.info("[socket][start]",this._transport.id),e?.isOpen()&&(this._log.info("[socket][start]",this._transport.id,"close previous transport id = ",e.id),e.close())}getLocalId(e){return rt(this,void 0,void 0,function*(){const i=`localToken_${e}`;if(this.kv.currentValue[i])return this.kv.currentValue[i];const o=yield this.kv.waitForKeyToLoad(i);if(o)return o;const r=ft();return this.kv.updateInPlace(l=>{l[i]||(l[i]=r)}),yield this.kv.waitForKeyToLoad(i)})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const e=new URL(window.location.href);if(e.searchParams.get(xd)){const i=e.toString();e.searchParams.delete(xd),e.searchParams.delete("code"),e.searchParams.delete("error");const o=e.pathname+(e.searchParams.size?"?"+e.searchParams:"")+e.hash;if(history.replaceState(history.state,"",o),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let r=!1;const l=c=>{var d;r||(r=!0,navigation.removeEventListener("navigate",l),!c.userInitiated&&c.navigationType==="replace"&&((d=c.destination)===null||d===void 0?void 0:d.url)===i&&history.replaceState(history.state,"",o))};navigation.addEventListener("navigate",l)}}}_oauthLoginInit(){return rt(this,void 0,void 0,function*(){var e,i,o,r;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const l=new URLSearchParams(window.location.search);if(!l.get(xd))return null;const c=l.get("error");if(c)return this._replaceUrlAfterOAuth(),{error:{message:c}};const d=l.get("code");if(!d)return null;this._replaceUrlAfterOAuth();try{const p=yield this._getCurrentUser(),h=p?.type==="guest",{user:y}=yield Ry({apiURI:this.config.apiURI,appId:this.config.appId,code:d,refreshToken:h?p.refresh_token:void 0});return this.setCurrentUser(y),null}catch(p){return((e=p?.body)===null||e===void 0?void 0:e.type)==="record-not-found"&&((o=(i=p?.body)===null||i===void 0?void 0:i.hint)===null||o===void 0?void 0:o["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((r=p?.body)===null||r===void 0?void 0:r.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return rt(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(e){return this.mutationErrorCbs.push(e),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(i=>i!==e)}}subscribeAuth(e){this.authCbs.push(e);const i=this._currentUserCached;i.isLoading||e(this._currentUserCached);let o=!1;return this.getCurrentUser().then(r=>{o||wl(r,i)||e(r)}),()=>{o=!0,this.authCbs=this.authCbs.filter(r=>r!==e)}}getAuth(){return rt(this,void 0,void 0,function*(){const{user:e,error:i}=yield this.getCurrentUser();if(i)throw new _s("Could not get current user: "+i.message);return e})}subscribeConnectionStatus(e){return this.connectionStatusCbs.push(e),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(i=>i!==e)}}subscribeAttrs(e){return this.attrsCbs.push(e),this.attrs&&e(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(i=>i!==e)}}notifyAuthSubs(e){this.authCbs.forEach(i=>i(e))}notifyMutationErrorSubs(e){this.mutationErrorCbs.forEach(i=>i(e))}notifyAttrsSubs(){if(!this.attrs)return;const e=this.optimisticAttrs();this.attrsCbs.forEach(i=>i(e))}notifyConnectionStatusSubs(e){this.connectionStatusCbs.forEach(i=>i(e))}setCurrentUser(e){return rt(this,void 0,void 0,function*(){this.kv.updateInPlace(i=>{i[Mr]=e}),yield this.kv.waitForKeyToLoad(Mr)})}getCurrentUserCached(){return this._currentUserCached}_getCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(Mr);return typeof e=="string"?JSON.parse(e):e})}getCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this._waitForOAuthCallbackResponse();if(e?.error){const i={error:e.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}try{const o={user:yield this._getCurrentUser(),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}catch(i){return{user:void 0,isLoading:!1,error:{message:i?.message||"Error loading user"}}}})}_hasCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(Mr);return typeof e=="string"?JSON.parse(e)!=null:e!=null})}changeCurrentUser(e){return rt(this,void 0,void 0,function*(){var i;const{user:o}=yield this.getCurrentUser();if(!wl(o,e)){yield this.setCurrentUser(e),this.updateUser(e);try{(i=this._broadcastChannel)===null||i===void 0||i.postMessage({type:"auth"})}catch(r){console.error("Error posting message to broadcast channel",r)}}})}updateUser(e){const i={error:void 0,user:e};this._currentUserCached=Object.assign({isLoading:!1},i),this._dataForQueryCache={},this.querySubs.updateInPlace(o=>{Object.keys(o).forEach(r=>{delete o[r].result})}),this._reconnectTimeoutMs=0,this._transport.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(i)}sendMagicCode({email:e}){return NM({apiURI:this.config.apiURI,appId:this.config.appId,email:e})}signInWithMagicCode(e){return rt(this,arguments,void 0,function*({email:i,code:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield xM({apiURI:this.config.apiURI,appId:this.config.appId,email:i,code:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}signInWithCustomToken(e){return rt(this,void 0,void 0,function*(){const i=yield IM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:e});return yield this.changeCurrentUser(i.user),i})}signInAsGuest(){return rt(this,void 0,void 0,function*(){const e=yield DM({apiURI:this.config.apiURI,appId:this.config.appId});return yield this.changeCurrentUser(e.user),e})}potentiallyInvalidateToken(e,i){var o;const r=(o=e?.user)===null||o===void 0?void 0:o.refresh_token;if(!r)return;if(i.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}PM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:r}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(c=>{})}signOut(e){return rt(this,void 0,void 0,function*(){const i=yield this.getCurrentUser();this.potentiallyInvalidateToken(i,e),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:e,redirectURL:i}){const{apiURI:o,appId:r}=this.config;return`${o}/runtime/oauth/start?app_id=${r}&client_name=${e}&redirect_uri=${i}`}exchangeCodeForToken(e){return rt(this,arguments,void 0,function*({code:i,codeVerifier:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield Ry({apiURI:this.config.apiURI,appId:this.config.appId,code:i,codeVerifier:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}issuerURI(){const{apiURI:e,appId:i}=this.config;return`${e}/runtime/${i}`}signInWithIdToken(e){return rt(this,arguments,void 0,function*({idToken:i,clientName:o,nonce:r}){var l;const c=yield this.getCurrentUser(),d=(l=c?.user)===null||l===void 0?void 0:l.refresh_token,p=yield UM({apiURI:this.config.apiURI,appId:this.config.appId,idToken:i,clientName:o,nonce:r,refreshToken:d});return yield this.changeCurrentUser(p.user),p})}joinRoom(e,i){let o=!1;this._rooms[e]||(o=!0,this._rooms[e]={isConnected:!1,error:void 0}),this._presence[e]=this._presence[e]||{};const r=this._presence[e].result;return i&&!r&&(this._presence[e].result=this._presence[e].result||{},this._presence[e].result.user=i,this._notifyPresenceSubs(e)),o&&this._tryJoinRoom(e,i),()=>{this._cleanupRoom(e)}}_cleanupRoom(e){var i,o,r,l;if(!(!((o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0)&&o.length)&&!Object.keys((r=this._broadcastSubs[e])!==null&&r!==void 0?r:{}).length){const c=(l=this._rooms[e])===null||l===void 0?void 0:l.isConnected;delete this._rooms[e],delete this._presence[e],delete this._broadcastSubs[e],c?this._tryLeaveRoom(e):this._roomsPendingLeave[e]=!0}}getPresence(e,i,o={}){const r=this._rooms[i],l=this._presence[i];return!r||!l||!l.result?null:Object.assign(Object.assign({},HM(l.result,o,this._sessionId)),{isLoading:!r.isConnected,error:r.error})}publishPresence(e,i,o){const r=this._rooms[i],l=this._presence[i];if(!r||!l)return;l.result=l.result||{};const c=Object.assign(Object.assign({},l.result.user),o);l.result.user=c,r.isConnected&&(this._trySetPresence(i,c),this._notifyPresenceSubs(i))}_trySetPresence(e,i){this._trySendAuthed(ft(),{op:"set-presence","room-id":e,data:i})}_tryJoinRoom(e,i){this._trySendAuthed(ft(),{op:"join-room","room-id":e,data:i}),delete this._roomsPendingLeave[e]}_tryLeaveRoom(e){this._trySendAuthed(ft(),{op:"leave-room","room-id":e})}_trySetRoomConnected(e,i){const o=this._rooms[e];o&&(o.isConnected=i)}subscribePresence(e,i,o,r){const l=this.joinRoom(i,o.initialPresence||o.initialData),c=Object.assign(Object.assign({},o),{roomId:i,cb:r,prev:null});return this._presence[i]=this._presence[i]||{},this._presence[i].handlers=this._presence[i].handlers||[],this._presence[i].handlers.push(c),this._notifyPresenceSub(i,c),()=>{var d,p,h;this._presence[i].handlers=(h=(p=(d=this._presence[i])===null||d===void 0?void 0:d.handlers)===null||p===void 0?void 0:p.filter(y=>y!==c))!==null&&h!==void 0?h:[],l()}}_notifyPresenceSubs(e){var i,o;(o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0||o.forEach(r=>{this._notifyPresenceSub(e,r)})}_notifyPresenceSub(e,i){const o=this.getPresence("",e,i);o&&(i.prev&&!zM(o,i.prev)||(i.prev=o,i.cb(o)))}_patchPresencePeers(e,i){var o,r,l;const c=((r=(o=this._presence[e])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.peers)||{};let d=Object.fromEntries(Object.entries(c).map(([h,y])=>[h,{data:y}]));(l=this._presence[e])===null||l===void 0||l.result;const p=Ll(d,h=>{for(let[y,_,T]of i)switch(_){case"+":_A(h,y,T);break;case"r":my(h,y,T);break;case"-":e_(h,y);break}delete h[this._sessionId]});this._setPresencePeers(e,p)}_setPresencePeers(e,i){const o=Object.assign({},i);delete o[this._sessionId];const r=Object.fromEntries(Object.entries(o).map(([l,c])=>[l,c.data]));this._presence=Ll(this._presence,l=>{my(l,[e,"result","peers"],r)})}publishTopic({roomType:e,roomId:i,topic:o,data:r}){var l;const c=this._rooms[i];if(c){if(!c.isConnected){this._broadcastQueue[i]=(l=this._broadcastQueue[i])!==null&&l!==void 0?l:[],this._broadcastQueue[i].push({topic:o,roomType:e,data:r});return}this._tryBroadcast(i,e,o,r)}}_tryBroadcast(e,i,o,r){this._trySendAuthed(ft(),{op:"client-broadcast","room-id":e,roomType:i,topic:o,data:r})}subscribeTopic(e,i,o){const r=this.joinRoom(e);return this._broadcastSubs[e]=this._broadcastSubs[e]||{},this._broadcastSubs[e][i]=this._broadcastSubs[e][i]||[],this._broadcastSubs[e][i].push(o),this._presence[e]=this._presence[e]||{},()=>{this._broadcastSubs[e][i]=this._broadcastSubs[e][i].filter(l=>l!==o),this._broadcastSubs[e][i].length||delete this._broadcastSubs[e][i],r()}}_notifyBroadcastSubs(e,i,o){var r,l,c;(c=(l=(r=this._broadcastSubs)===null||r===void 0?void 0:r[e])===null||l===void 0?void 0:l[i])===null||c===void 0||c.forEach(d=>{var p,h,y,_,T,C;const b=(p=o.data)===null||p===void 0?void 0:p.data,M=o.data["peer-id"]===this._sessionId?(y=(h=this._presence[e])===null||h===void 0?void 0:h.result)===null||y===void 0?void 0:y.user:(C=(T=(_=this._presence[e])===null||_===void 0?void 0:_.result)===null||T===void 0?void 0:T.peers)===null||C===void 0?void 0:C[o.data["peer-id"]];return d(b,M)})}uploadFile(e,i,o){return rt(this,void 0,void 0,function*(){var r;const l=yield this.getCurrentUser(),c=(r=l?.user)===null||r===void 0?void 0:r.refresh_token;return LM(Object.assign(Object.assign({},o),{apiURI:this.config.apiURI,appId:this.config.appId,path:e,file:i,refreshToken:c}))})}deleteFile(e){return rt(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield kM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}upload(e,i){return rt(this,void 0,void 0,function*(){var o;const r=yield this.getCurrentUser(),l=(o=r?.user)===null||o===void 0?void 0:o.refresh_token,c=e||i.name,d=yield OM({apiURI:this.config.apiURI,appId:this.config.appId,fileName:c,refreshToken:l});return yield qM(d,i)})}getDownloadUrl(e){return rt(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield GM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}}let El;function _w(t,e){El?.dispose();const i=bw(e),o=Ew(e,d),r=Sw(Tw(t));function l(y){var _;y.source===r.element.contentWindow&&((_=y.data)===null||_===void 0?void 0:_.type)==="close"&&i.isVisible()&&d()}function c(y){const _=y.shiftKey&&y.ctrlKey&&y.key==="0",T=y.key==="Escape"||y.key==="Esc";(_||T&&i.isVisible())&&d()}function d(){i.isVisible()?i.element.style.display="none":(i.element.style.display="block",i.element.contains(r.element)||i.element.appendChild(r.element))}function p(){i.element.remove(),o.element.remove(),removeEventListener("keydown",c),removeEventListener("message",l)}function h(){document.body.appendChild(i.element),document.body.appendChild(o.element),addEventListener("keydown",c),addEventListener("message",l),El={dispose:p}}return h()}function Tw(t){return`${Vf||A_?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${t}`}function Sw(t){const e=document.createElement("iframe");return e.src=t,e.className="instant-devtool-iframe",Object.assign(e.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:e}}function Ew(t,e){const i=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,o=document.createElement("button");return o.innerHTML=i,o.className="instant-devtool-toggler",Object.assign(o.style,Object.assign(Object.assign({position:"fixed"},Cw(t.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),o.addEventListener("click",e),{element:o}}function Cw(t){switch(t){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function Aw(t){switch(t){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function bw(t){const e=document.createElement("div");Object.assign(e.style,Object.assign(Object.assign({position:"fixed"},Aw(t.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),e.style.display="none",e.className="instant-devtool-container";function i(){return e.style.display!=="none"}return{element:e,isVisible:i}}const Mw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function ww(){var t;return globalThis.__instantDbSchemaHashStore=(t=globalThis.__instantDbSchemaHashStore)!==null&&t!==void 0?t:new WeakMap,globalThis.__instantDbSchemaHashStore}function Rw(){var t;return globalThis.__instantDbStore=(t=globalThis.__instantDbStore)!==null&&t!==void 0?t:{},globalThis.__instantDbStore}function ef(t){const e=t.__adminToken;return t.appId+"_"+(t.websocketURI||"default_ws_uri")+"_"+(t.apiURI||"default_api_uri")+"_"+(e||"client_only")+"_"+t.useDateObjects}const tf=Rw(),$y=ww();class Nw{constructor(e){this.db=e,this.sendMagicCode=i=>this.db.sendMagicCode(i),this.signInWithMagicCode=i=>this.db.signInWithMagicCode(i),this.signInWithToken=i=>this.db.signInWithCustomToken(i),this.signInAsGuest=()=>this.db.signInAsGuest(),this.createAuthorizationURL=i=>this.db.createAuthorizationURL(i),this.signInWithIdToken=i=>this.db.signInWithIdToken(i),this.exchangeOAuthCode=i=>this.db.exchangeCodeForToken(i),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(i={invalidateToken:!0})=>this.db.signOut(i)}}class xw{constructor(e){this.db=e,this.uploadFile=(i,o,r={})=>this.db.uploadFile(i,o,r),this.delete=i=>this.db.deleteFile(i),this.upload=(i,o)=>this.db.upload(i,o),this.put=this.upload,this.getDownloadUrl=i=>this.db.getDownloadUrl(i)}}function Iw(t){return JSON.parse(JSON.stringify(t))}class Dw{constructor(e){this.tx=zf(),this._reactor=e,this.auth=new Nw(this._reactor),this.storage=new xw(this._reactor)}transact(e){return this._reactor.pushTx(e)}getLocalId(e){return this._reactor.getLocalId(e)}subscribeQuery(e,i,o){return this._reactor.subscribeQuery(e,i,o)}subscribeAuth(e){return this._reactor.subscribeAuth(e)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(e){return this._reactor.subscribeConnectionStatus(e)}joinRoom(e="_defaultRoomType",i="_defaultRoomId",o){return{leaveRoom:this._reactor.joinRoom(i,o?.initialPresence),subscribeTopic:(l,c)=>this._reactor.subscribeTopic(i,l,c),subscribePresence:(l,c)=>this._reactor.subscribePresence(e,i,l,c),publishTopic:(l,c)=>this._reactor.publishTopic({roomType:e,roomId:i,topic:l,data:c}),publishPresence:l=>this._reactor.publishPresence(e,i,l),getPresence:l=>this._reactor.getPresence(e,i,l)}}shutdown(){delete tf[ef(this._reactor.config)],this._reactor.shutdown()}queryOnce(e,i){return this._reactor.queryOnce(e,i)}_syncTableExperimental(e,i){return this._reactor.subscribeTable(e,i)}}function Yy(t){if(!t)return"0";const e=$y.get(t);if(e)return e;const i=Tt(t);return $y.set(t,i),i}function Uw(t,e){return Yy(t._reactor.config.schema)!==Yy(e)}function Pw(t,e,i,o,r){const l=tf[ef(t)];if(l)return Uw(l,t.schema)&&l._reactor.updateSchema(t.schema),l;const c=new vw(Object.assign(Object.assign(Object.assign({},Mw),t),{cardinalityInference:!!t.schema}),e||S_,i||E_,Object.assign(Object.assign({},o||{}),{"@instantdb/core":Bf}),r),d=new Dw(c);return tf[ef(t)]=d,Lw(t.appId,t.devtool),d}function Lw(t,e){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof e=="boolean"&&!e)return;const i=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof e=="object"?e:{});i.allowedHosts.includes(window.location.hostname)&&_w(t,i)}const kw={isLoading:!0,data:void 0,pageInfo:void 0,error:void 0};function Jy(t){return Object.assign({isLoading:!t,data:void 0,pageInfo:void 0,error:void 0},t||{})}function Ow(t,e,i){e&&i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const o=e?Iw(e):null,r=Tt(o),l=U.useRef(Jy(t._reactor.getPreviousResult(o))),c=U.useCallback(p=>(l.current=Jy(t._reactor.getPreviousResult(o)),o?t.subscribeQuery(o,y=>{l.current=Object.assign({isLoading:!y,data:void 0,pageInfo:void 0,error:void 0},y),p()}):()=>{}),[r]);return{state:U.useSyncExternalStore(c,()=>l.current,()=>kw),query:o}}function qw(){const t=U.useRef(null);U.useEffect(()=>{i()},[]);function e(o,r){clearTimeout(t.current),t.current=setTimeout(r,o)}function i(){clearTimeout(t.current)}return{set:e,clear:i}}const Gw=1e3;function Hw(t,e,i){const o=U.useRef(i);o.current=i,U.useEffect(()=>t.core._reactor.subscribeTopic(t.id,e,(l,c)=>{o.current(l,c)}),[t.id,e])}function zw(t,e){return U.useEffect(()=>t.core._reactor.joinRoom(t.id),[t.id]),U.useCallback(o=>{t.core._reactor.publishTopic({roomType:t.type,roomId:t.id,topic:e,data:o})},[t.id,e])}function Vw(t,e={}){var i,o;const[r,l]=U.useState(()=>{var p;return(p=t.core._reactor.getPresence(t.type,t.id,e))!==null&&p!==void 0?p:{peers:{},isLoading:!0}});U.useEffect(()=>t.core._reactor.subscribePresence(t.type,t.id,e,h=>{l(h)}),[t.id,e.user,(i=e.peers)===null||i===void 0?void 0:i.join(),(o=e.keys)===null||o===void 0?void 0:o.join()]);const c=U.useCallback(p=>{t.core._reactor.publishPresence(t.type,t.id,p)},[t.type,t.id]);return U.useMemo(()=>Object.assign(Object.assign({},r),{publishPresence:c}),[r,c])}function Bw(t,e,i){U.useEffect(()=>t.core._reactor.joinRoom(t.id,e),[t.id]),U.useEffect(()=>t.core._reactor.publishPresence(t.type,t.id,e),[t.type,t.id,i??JSON.stringify(e)])}function Fw(t,e,i={}){const o=qw(),r=ao.usePresence(t,{keys:[e]}),l=U.useMemo(()=>{var y;const _=t._core._reactor.getPresence(t.type,t.id);return i?.writeOnly?[]:Object.values((y=_?.peers)!==null&&y!==void 0?y:{}).filter(T=>T[e]===!0)},[i?.writeOnly,r]),c=U.useCallback(y=>{var _;t.core._reactor.publishPresence(t.type,t.id,{[e]:y}),y&&(i?.timeout===null||i?.timeout===0||o.set((_=i?.timeout)!==null&&_!==void 0?_:Gw,()=>{t.core._reactor.publishPresence(t.type,t.id,{[e]:null})}))},[t.type,t.id,e,i?.timeout,o]),d=U.useCallback(y=>{const T=!(i?.stopOnEnter&&y.key==="Enter");c(T)},[i.stopOnEnter,c]),p=U.useCallback(()=>{c(!1)},[c]),h=U.useMemo(()=>({onKeyDown:d,onBlur:p}),[d,p]);return{active:l,setActive:c,inputProps:h}}const ao={useTopicEffect:Hw,usePublishTopic:zw,usePresence:Vw,useSyncPresence:Bw,useTypingIndicator:Fw};class $w{constructor(e,i,o){this.useTopicEffect=(r,l)=>{ao.useTopicEffect(this,r,l)},this.usePublishTopic=r=>ao.usePublishTopic(this,r),this.usePresence=(r={})=>ao.usePresence(this,r),this.useSyncPresence=(r,l)=>ao.useSyncPresence(this,r,l),this.useTypingIndicator=(r,l={})=>ao.useTypingIndicator(this,r,l),this.core=e,this._core=this.core,this.type=i,this.id=o}}var Yw=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const Jw={isLoading:!0,user:void 0,error:void 0};class Kw{constructor(e,i){this.tx=zf(),this.getLocalId=o=>this.core.getLocalId(o),this.useLocalId=o=>{const[r,l]=U.useState(null);return U.useEffect(()=>{Yw(this,void 0,void 0,function*(){const d=yield this.getLocalId(o);l(d)})},[o]),r},this.rooms=ao,this.transact=o=>this.core.transact(o),this.useQuery=(o,r)=>Ow(this.core,o,r).state,this.useAuth=()=>{const o=U.useRef(this.core._reactor._currentUserCached),r=U.useCallback(c=>this.core.subscribeAuth(p=>{o.current=Object.assign({isLoading:!1},p),c()}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>Jw)},this.useUser=()=>{const{user:o}=this.useAuth();if(!o)throw new _s("useUser must be used within an auth-protected route");return o},this.useConnectionStatus=()=>{const o=U.useRef(this.core._reactor.status),r=U.useCallback(c=>this.core.subscribeConnectionStatus(p=>{p!==o.current&&(o.current=p,c())}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>"connecting")},this.queryOnce=(o,r)=>this.core.queryOnce(o,r),this.SignedIn=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||!r.user?null:E.jsx(E.Fragment,{children:o})},this.SignedOut=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||r.user?null:E.jsx(E.Fragment,{children:o})},this.core=Pw(e,this.constructor.Storage,this.constructor.NetworkListener,i,this.constructor.EventSourceImpl),this._core=this.core,this.auth=this.core.auth,this.storage=this.core.storage}room(e="_defaultRoomType",i="_defaultRoomId"){return new $w(this.core,e,i)}getAuth(){return this.core.getAuth()}}class Ky extends Error{constructor(e,i){super(e),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function Id(t){}function Qw(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Id,onError:i=Id,onRetry:o=Id,onComment:r}=t;let l="",c=!0,d,p="",h="";function y(M){const w=c?M.replace(/^\xEF\xBB\xBF/,""):M,[R,D]=Xw(`${l}${w}`);for(const P of R)_(P);l=D,c=!1}function _(M){if(M===""){C();return}if(M.startsWith(":")){r&&r(M.slice(M.startsWith(": ")?2:1));return}const w=M.indexOf(":");if(w!==-1){const R=M.slice(0,w),D=M[w+1]===" "?2:1,P=M.slice(w+D);T(R,P,M);return}T(M,"",M)}function T(M,w,R){switch(M){case"event":h=w;break;case"data":p=`${p}${w}
`;break;case"id":d=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?o(parseInt(w,10)):i(new Ky(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:R}));break;default:i(new Ky(`Unknown field "${M.length>20?`${M.slice(0,20)}`:M}"`,{type:"unknown-field",field:M,value:w,line:R}));break}}function C(){p.length>0&&e({id:d,event:h||void 0,data:p.endsWith(`
`)?p.slice(0,-1):p}),d=void 0,p="",h=""}function b(M={}){l&&M.consume&&_(l),c=!0,d=void 0,p="",h="",l=""}return{feed:y,reset:b}}function Xw(t){const e=[];let i="",o=0;for(;o<t.length;){const r=t.indexOf("\r",o),l=t.indexOf(`
`,o);let c=-1;if(r!==-1&&l!==-1?c=Math.min(r,l):r!==-1?r===t.length-1?c=-1:c=r:l!==-1&&(c=l),c===-1){i=t.slice(o);break}else{const d=t.slice(o,c);e.push(d),o=c+1,t[o-1]==="\r"&&t[o]===`
`&&o++}}return[e,i]}class Qy extends Event{constructor(e,i){var o,r;super(e),this.code=(o=i?.code)!=null?o:void 0,this.message=(r=i?.message)!=null?r:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,i,o){return o(Xy(this),i)}[Symbol.for("Deno.customInspect")](e,i){return e(Xy(this),i)}}function Zw(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function nf(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(nf).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${nf(t.cause)}`:t.message:`${t}`}function Xy(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var D_=t=>{throw TypeError(t)},Ff=(t,e,i)=>e.has(t)||D_("Cannot "+i),Se=(t,e,i)=>(Ff(t,e,"read from private field"),i?i.call(t):e.get(t)),lt=(t,e,i)=>e.has(t)?D_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),$e=(t,e,i,o)=>(Ff(t,e,"write to private field"),e.set(t,i),i),Xn=(t,e,i)=>(Ff(t,e,"access private method"),i),qt,lo,as,Nl,ql,Or,cs,qr,Di,ls,hs,us,Dr,mn,of,sf,rf,Zy,af,lf,Ur,uf,cf;class Gr extends EventTarget{constructor(e,i){var o,r;super(),lt(this,mn),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,lt(this,qt),lt(this,lo),lt(this,as),lt(this,Nl),lt(this,ql),lt(this,Or),lt(this,cs),lt(this,qr,null),lt(this,Di),lt(this,ls),lt(this,hs,null),lt(this,us,null),lt(this,Dr,null),lt(this,sf,async l=>{var c;Se(this,ls).reset();const{body:d,redirected:p,status:h,headers:y}=l;if(h===204){Xn(this,mn,Ur).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(p?$e(this,as,new URL(l.url)):$e(this,as,void 0),h!==200){Xn(this,mn,Ur).call(this,`Non-200 status code (${h})`,h);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){Xn(this,mn,Ur).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(Se(this,qt)===this.CLOSED)return;$e(this,qt,this.OPEN);const _=new Event("open");if((c=Se(this,Dr))==null||c.call(this,_),this.dispatchEvent(_),typeof d!="object"||!d||!("getReader"in d)){Xn(this,mn,Ur).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const T=new TextDecoder,C=d.getReader();let b=!0;do{const{done:M,value:w}=await C.read();w&&Se(this,ls).feed(T.decode(w,{stream:!M})),M&&(b=!1,Se(this,ls).reset(),Xn(this,mn,uf).call(this))}while(b)}),lt(this,rf,l=>{$e(this,Di,void 0),!(l.name==="AbortError"||l.type==="aborted")&&Xn(this,mn,uf).call(this,nf(l))}),lt(this,af,l=>{typeof l.id=="string"&&$e(this,qr,l.id);const c=new MessageEvent(l.event||"message",{data:l.data,origin:Se(this,as)?Se(this,as).origin:Se(this,lo).origin,lastEventId:l.id||""});Se(this,us)&&(!l.event||l.event==="message")&&Se(this,us).call(this,c),this.dispatchEvent(c)}),lt(this,lf,l=>{$e(this,Or,l)}),lt(this,cf,()=>{$e(this,cs,void 0),Se(this,qt)===this.CONNECTING&&Xn(this,mn,of).call(this)});try{if(e instanceof URL)$e(this,lo,e);else if(typeof e=="string")$e(this,lo,new URL(e,Ww()));else throw new Error("Invalid URL")}catch{throw Zw("An invalid or illegal string was specified")}$e(this,ls,Qw({onEvent:Se(this,af),onRetry:Se(this,lf)})),$e(this,qt,this.CONNECTING),$e(this,Or,3e3),$e(this,ql,(o=i?.fetch)!=null?o:globalThis.fetch),$e(this,Nl,(r=i?.withCredentials)!=null?r:!1),Xn(this,mn,of).call(this)}get readyState(){return Se(this,qt)}get url(){return Se(this,lo).href}get withCredentials(){return Se(this,Nl)}get onerror(){return Se(this,hs)}set onerror(e){$e(this,hs,e)}get onmessage(){return Se(this,us)}set onmessage(e){$e(this,us,e)}get onopen(){return Se(this,Dr)}set onopen(e){$e(this,Dr,e)}addEventListener(e,i,o){const r=i;super.addEventListener(e,r,o)}removeEventListener(e,i,o){const r=i;super.removeEventListener(e,r,o)}close(){Se(this,cs)&&clearTimeout(Se(this,cs)),Se(this,qt)!==this.CLOSED&&(Se(this,Di)&&Se(this,Di).abort(),$e(this,qt,this.CLOSED),$e(this,Di,void 0))}}qt=new WeakMap,lo=new WeakMap,as=new WeakMap,Nl=new WeakMap,ql=new WeakMap,Or=new WeakMap,cs=new WeakMap,qr=new WeakMap,Di=new WeakMap,ls=new WeakMap,hs=new WeakMap,us=new WeakMap,Dr=new WeakMap,mn=new WeakSet,of=function(){$e(this,qt,this.CONNECTING),$e(this,Di,new AbortController),Se(this,ql)(Se(this,lo),Xn(this,mn,Zy).call(this)).then(Se(this,sf)).catch(Se(this,rf))},sf=new WeakMap,rf=new WeakMap,Zy=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Se(this,qr)?{"Last-Event-ID":Se(this,qr)}:void 0},cache:"no-store",signal:(t=Se(this,Di))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},af=new WeakMap,lf=new WeakMap,Ur=function(t,e){var i;Se(this,qt)!==this.CLOSED&&$e(this,qt,this.CLOSED);const o=new Qy("error",{code:e,message:t});(i=Se(this,hs))==null||i.call(this,o),this.dispatchEvent(o)},uf=function(t,e){var i;if(Se(this,qt)===this.CLOSED)return;$e(this,qt,this.CONNECTING);const o=new Qy("error",{code:e,message:t});(i=Se(this,hs))==null||i.call(this,o),this.dispatchEvent(o),$e(this,cs,setTimeout(Se(this,cf),Se(this,Or)))},cf=new WeakMap,Gr.CONNECTING=0,Gr.OPEN=1,Gr.CLOSED=2;Object.defineProperty(Gr,Symbol.for("eventsource.supports-fetch-override"),{value:!0,writable:!1,configurable:!1,enumerable:!1});function Ww(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}class U_ extends Kw{}U_.EventSourceImpl=Gr;function jw(t){return new U_(t,{"@instantdb/react":Bf})}const eR="fb13a3d0-35ab-493b-9aa6-64a77363fe93",we=jw({appId:eR}),df={calories_min:1600,calories_max:2e3,purines_min:0,purines_max:400,protein_target:50,carbs_target:250,fat_target:65,fiber_target:25,sodium_max:2300,sugar_max:50,hydration_target:2e3},tR={calories:{icon:"",unit:"kcal",label:"Calories"},purines:{icon:"",unit:"mg",label:"Purines"},protein:{icon:"",unit:"g",label:"Protein"},carbs:{icon:"",unit:"g",label:"Carbs"},fat:{icon:"",unit:"g",label:"Fat"},fiber:{icon:"",unit:"g",label:"Fiber"},sodium:{icon:"",unit:"mg",label:"Sodium"},sugar:{icon:"",unit:"g",label:"Sugar"},hydration:{icon:"",unit:"ml",label:"Water"}};function nR(t,e,i,o){const r=10*t+6.25*e-5*i;return o==="male"?r+5:r-161}const iR={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};function oR(t,e,i,o,r){const l=nR(t,e,i,o),c=iR[r]||1.55;return Math.round(l*c)}function sR(t=[]){return t.includes("kidney_disease")?150:t.includes("gout")?200:400}function rR(t,e){const i=t*30;return Math.round(i+({sedentary:0,light:200,moderate:400,active:600,very_active:800}[e]||0))}function aR(t){const{weight_kg:e,height_cm:i,age:o,sex:r,activity_level:l,dietary_conditions:c=[]}=t,d=oR(e,i,o,r,l),p=sR(c),h=rR(e,l),_=Math.round(e*({sedentary:.8,light:.9,moderate:1,active:1.2,very_active:1.4}[l]||1));let T=.5;c.includes("diabetes")&&(T=.4);const C=Math.round(d*T/4),b=Math.round(d*.275/9);let M=r==="female"?25:38;o>50&&(M=r==="female"?21:30);let w=2300;c.includes("kidney_disease")&&(w=1500);let R=r==="female"?25:36;return(c.includes("diabetes")||c.includes("gout"))&&(R=Math.round(R*.6)),{calories_min:Math.round(d*.85),calories_max:d,purines_min:0,purines_max:p,protein_target:_,carbs_target:C,fat_target:b,fiber_target:M,sodium_max:w,sugar_max:R,hydration_target:h}}function lR(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`}function Wy(){return lR(new Date)}function uR(t){t=t.replace(/^#/,"");const e=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255,r=Math.max(e,i,o),l=Math.min(e,i,o);let c,d,p=(r+l)/2;if(r===l)c=d=0;else{const h=r-l;switch(d=p>.5?h/(2-r-l):h/(r+l),r){case e:c=((i-o)/h+(i<o?6:0))/6;break;case i:c=((o-e)/h+2)/6;break;case o:c=((e-i)/h+4)/6;break}}return{h:Math.round(c*360),s:Math.round(d*100),l:Math.round(p*100)}}function dt(t,e,i){e/=100,i/=100;const o=(1-Math.abs(2*i-1))*e,r=o*(1-Math.abs(t/60%2-1)),l=i-o/2;let c=0,d=0,p=0;return 0<=t&&t<60?(c=o,d=r,p=0):60<=t&&t<120?(c=r,d=o,p=0):120<=t&&t<180?(c=0,d=o,p=r):180<=t&&t<240?(c=0,d=r,p=o):240<=t&&t<300?(c=r,d=0,p=o):300<=t&&t<360&&(c=o,d=0,p=r),c=Math.round((c+l)*255).toString(16).padStart(2,"0"),d=Math.round((d+l)*255).toString(16).padStart(2,"0"),p=Math.round((p+l)*255).toString(16).padStart(2,"0"),`#${c}${d}${p}`}function uo(t,e=!1){const i=uR(t);return e?{primary:t,primaryLight:dt(i.h,i.s*.8,Math.min(i.l+15,80)),primaryDark:dt(i.h,i.s,Math.max(i.l-15,20)),background:dt(i.h,i.s*.2,12),surface:dt(i.h,i.s*.15,18),surfaceVariant:dt(i.h,i.s*.2,25),secondary:dt((i.h+180)%360,i.s*.7,60),text:dt(i.h,i.s*.1,95),textSecondary:dt(i.h,i.s*.15,70),border:dt(i.h,i.s*.2,30),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}:{primary:t,primaryLight:dt(i.h,i.s*.6,Math.min(i.l+20,90)),primaryDark:dt(i.h,i.s,Math.max(i.l-20,30)),background:dt(i.h,i.s*.3,97),surface:dt(i.h,i.s*.1,100),surfaceVariant:dt(i.h,i.s*.2,95),secondary:dt((i.h+180)%360,i.s*.7,i.l),text:dt(i.h,i.s*.5,15),textSecondary:dt(i.h,i.s*.3,40),border:dt(i.h,i.s*.2,85),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}}const Hr={emerald:{name:"Emerald Dragon",description:"Bright, cheerful, default",seedColor:"#66BB6A",isDark:!1},midnight:{name:"Midnight Dragon",description:"Sleek, easy on eyes",seedColor:"#7B2CBF",isDark:!0},crystal:{name:"Crystal Dragon",description:"High contrast, accessible",seedColor:"#2196F3",isDark:!1}};function co(t){const e=document.documentElement;Object.entries(t).forEach(([i,o])=>{const r=`--color-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`;e.style.setProperty(r,o)})}function cR(t,e,i){return t>i?"danger":t>i*.8||e&&t<e*.8?"warning":"success"}const P_=U.createContext(null),wr={id:"local-user",name:"Dragon Keeper",profile:{sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]},thresholds:df,theme:{preset:"emerald",seed_color_hex:"#66BB6A"},badges:[],stats:{total_meals_logged:0,current_streak_days:0,longest_streak_days:0,meals_saved_to_stash:0}};function dR({children:t}){const[e,i]=U.useState(null),[o,r]=U.useState(!0),[l,c]=U.useState(!1),{isLoading:d,error:p,data:h}=we.useQuery({users:{}});U.useEffect(()=>{if(!d){if(h?.users&&h.users.length>0){const M=h.users[0];if(i({...wr,...M,profile:{...wr.profile,...M.profile},thresholds:{...wr.thresholds,...M.thresholds},theme:{...wr.theme,...M.theme}}),c(!0),M.theme?.preset){const w=Hr[M.theme.preset];if(w){const R=uo(w.seedColor,w.isDark);co(R)}else if(M.theme.seed_color_hex){const R=uo(M.theme.seed_color_hex,!1);co(R)}}}else{i(wr),c(!1);const M=Hr.emerald,w=uo(M.seedColor,M.isDark);co(w)}r(!1)}},[d,h]);const b={user:e,isLoading:o||d,isAuthenticated:l,error:p,updateProfile:async M=>{const w={...e,profile:{...e.profile,...M}};i(w),e.id&&e.id!=="local-user"&&await we.transact([we.tx.users[e.id].update({profile:w.profile})])},updateThresholds:async M=>{const w={...e,thresholds:{...e.thresholds,...M}};i(w),e.id&&e.id!=="local-user"&&await we.transact([we.tx.users[e.id].update({thresholds:w.thresholds})])},updateTheme:async(M,w=null)=>{const R={preset:M,seed_color_hex:w||e.theme.seed_color_hex},D={...e,theme:R};if(i(D),M==="custom"&&w){const P=uo(w,!1);co(P)}else{const P=Hr[M];if(P){const J=uo(P.seedColor,P.isDark);co(J)}}e.id&&e.id!=="local-user"&&await we.transact([we.tx.users[e.id].update({theme:R})])},saveUser:async(M=null)=>{const w=M||e;if(e.id==="local-user"){const R=crypto.randomUUID(),D={...w,id:R};return await we.transact([we.tx.users[R].update({id:R,name:D.name,profile:D.profile,thresholds:D.thresholds,theme:D.theme,badges:D.badges||[],stats:D.stats||{},created_at:Date.now()})]),i(D),c(!0),R}else return await we.transact([we.tx.users[e.id].update({name:w.name,profile:w.profile,thresholds:w.thresholds,theme:w.theme,updated_at:Date.now()})]),e.id},setUser:i};return E.jsx(P_.Provider,{value:b,children:t})}function Zr(){const t=U.useContext(P_);if(!t)throw new Error("useUser must be used within a UserProvider");return t}const fR=[{path:"/",icon:"",label:"Diary"},{path:"/charts",icon:"",label:"Scroll"},{path:"/oracle",icon:"",label:"Oracle"},{path:"/settings",icon:"",label:"Lair"}];function hR(){return E.jsx("nav",{className:"nav-bar",children:fR.map(t=>E.jsxs(F0,{to:t.path,className:({isActive:e})=>`nav-item ${e?"active":""}`,children:[E.jsx("span",{className:"nav-icon",children:t.icon}),E.jsx("span",{className:"nav-label",children:t.label})]},t.path))})}function ki({title:t,subtitle:e,action:i,showBack:o,onBack:r}){return E.jsx("header",{className:"header",children:E.jsxs("div",{className:"header-content",children:[o&&E.jsx("button",{className:"header-back",onClick:r,"aria-label":"Go back",children:""}),E.jsxs("div",{className:"header-title-group",children:[E.jsxs("h1",{className:"header-title",children:[E.jsx("span",{className:"header-dragon",children:""})," ",t]}),e&&E.jsx("p",{className:"header-subtitle",children:e})]}),i&&E.jsx("div",{className:"header-action",children:i})]})})}function Qn({nutrient:t,value:e,target:i,min:o=0,max:r,showLabel:l=!0,compact:c=!1}){const d=tR[t]||{icon:"",unit:"",label:t},p=r||i,h=Math.min(e/p*100,100),y=cR(e,o,p);return E.jsxs("div",{className:`nutrient-progress ${c?"compact":""}`,children:[l&&E.jsxs("div",{className:"nutrient-header",children:[E.jsxs("span",{className:"nutrient-label",children:[E.jsx("span",{className:"nutrient-icon",children:d.icon}),E.jsx("span",{className:"nutrient-name",children:d.label})]}),E.jsxs("span",{className:"nutrient-value",children:[E.jsx("span",{className:"current",children:Math.round(e)}),E.jsx("span",{className:"separator",children:"/"}),E.jsx("span",{className:"target",children:Math.round(p)}),E.jsx("span",{className:"unit",children:d.unit})]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${y}`,style:{width:`${h}%`}})}),!c&&E.jsxs("div",{className:"nutrient-footer",children:[E.jsxs("span",{className:`status-indicator ${y}`,children:[y==="success"&&"",y==="warning"&&"",y==="danger"&&""]}),E.jsxs("span",{className:"percentage",children:[Math.round(h),"%"]})]})]})}const jy={curious:{emoji:"",animation:"sniff",message:"Your dragon is looking for food..."},happy:{emoji:"",animation:"bounce",message:"Your dragon is happy!"},satisfied:{emoji:"",animation:"pulse",message:"Your dragon is satisfied and content."},stuffed:{emoji:"",animation:"wobble",message:"Your dragon ate too much!"},sick:{emoji:"",animation:"shake",message:"Your dragon isn't feeling well..."},celebrating:{emoji:"",animation:"celebrate",message:"Your dragon is celebrating! "},hoarding:{emoji:"",animation:"hoard",message:"Saved to your dragon's hoard!"}};function Gl({state:t="happy",showMessage:e=!0,size:i="medium"}){const o=jy[t]||jy.happy;return E.jsxs("div",{className:`ember-mascot ${i}`,children:[E.jsxs("div",{className:`ember-emoji ${o.animation}`,children:[o.emoji,t==="sick"&&E.jsx("span",{className:"ember-effect",children:""}),t==="celebrating"&&E.jsx("span",{className:"ember-effect",children:""}),t==="happy"&&E.jsx("span",{className:"ember-effect",children:""})]}),e&&E.jsx("p",{className:"ember-message",children:o.message})]})}function pR(t,e){if(!t||!e)return"curious";const i=t.calories/e.calories_max,o=t.purines/e.purines_max;return o>1?"sick":i>1?"stuffed":o>.8||i>.8?"satisfied":t.calories===0?"curious":"happy"}const ff=()=>{const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`},ev={breakfast:1,lunch:2,dinner:3,snack:4,hydration:5};function L_(t=null){const{user:e}=Zr(),i=e?.id,o=t?{meals:{$:{where:{user_id:i,date:t}}}}:{meals:{$:{where:{user_id:i}}}},{isLoading:r,error:l,data:c}=we.useQuery(i?o:null),d=c?.meals||[];return{meals:U.useMemo(()=>[...d].sort((C,b)=>{const M=ev[C.meal_type]||99,w=ev[b.meal_type]||99;return M-w}),[d]),isLoading:r,error:l,addMeal:async C=>{if(!i)return null;const b=crypto.randomUUID(),M={id:b,user_id:i,date:C.date||ff(),timestamp:Date.now(),meal_type:C.meal_type||"snack",meal_name:C.meal_name||"Unnamed Meal",ingredients:C.ingredients||[],total_nutrients:C.total_nutrients||{},hydration_ml:C.hydration_ml||0,image_urls:C.image_urls||[],analysis_method:C.analysis_method||"manual"};return await we.transact([we.tx.meals[b].update(M)]),b},updateMeal:async(C,b)=>{await we.transact([we.tx.meals[C].update({...b,updated_at:Date.now()})])},deleteMeal:async C=>{await we.transact([we.tx.meals[C].delete()])},getDailyTotals:(C=t||ff())=>d.filter(w=>w.date===C).reduce((w,R)=>(R.total_nutrients&&Object.keys(R.total_nutrients).forEach(D=>{w[D]=(w[D]||0)+(R.total_nutrients[D]||0)}),w.hydration=(w.hydration||0)+(R.hydration_ml||0),w),{})}}function k_(t=ff()){const{user:e}=Zr(),i=e?.id,{isLoading:o,data:r}=we.useQuery(i?{hydration:{$:{where:{user_id:i,date:t}}}}:null),c=(r?.hydration||[])[0],d=c?.amount_ml||0,p=async y=>{if(i)if(c)await we.transact([we.tx.hydration[c.id].update({amount_ml:Math.max(0,y),updated_at:Date.now()})]);else{const _=crypto.randomUUID();await we.transact([we.tx.hydration[_].update({id:_,user_id:i,date:t,amount_ml:Math.max(0,y),created_at:Date.now(),updated_at:Date.now()})])}};return{totalHydration:d,isLoading:o,setHydration:p,adjustHydration:async y=>{if(!i)return;const _=Math.max(0,d+y);await p(_)}}}function $f(){const{user:t}=Zr(),e=t?.id,{isLoading:i,error:o,data:r}=we.useQuery(e?{customItems:{$:{where:{user_id:e}}}}:null),l=r?.customItems||[],c=l.filter(T=>T.type==="meal"),d=l.filter(T=>T.type==="ingredient"),p=l.filter(T=>T.type==="container");return{savedMeals:c,customIngredients:d,bottles:p,items:l,isLoading:i,error:o,addToStash:async T=>{if(!e)return null;const C=crypto.randomUUID();return await we.transact([we.tx.customItems[C].update({id:C,user_id:e,type:T.type,name:T.name,icon:T.icon||null,ingredients:T.ingredients||[],total_nutrients:T.total_nutrients||{},capacity_ml:T.capacity_ml||0,use_count:T.use_count||0,created_at:Date.now()})]),C},removeFromStash:async T=>{await we.transact([we.tx.customItems[T].delete()])},updateStashItem:async(T,C)=>{await we.transact([we.tx.customItems[T].update({...C,updated_at:Date.now()})])}}}function mR(){const{isLoading:t,data:e}=we.useQuery({ingredientLibrary:{}}),i=e?.ingredientLibrary||[];return{ingredients:i,isLoading:t,lookupIngredient:c=>{const d=tv(c);return i.find(p=>p.normalized_name===d)},addIngredient:async c=>{const d=tv(c.name);return await we.transact([we.tx.ingredientLibrary[d].update({normalized_name:d,display_name:c.name,nutrients_per_100g:c.nutrients_per_100g,use_count:1,last_used:Date.now(),source:c.source||"manual"})]),d},recordUsage:async c=>{const d=i.find(p=>p.normalized_name===c);d&&await we.transact([we.tx.ingredientLibrary[c].update({use_count:(d.use_count||0)+1,last_used:Date.now()})])}}}function tv(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}let gR,yR;function vR(){return{geminiUrl:gR,vertexUrl:yR}}function _R(t,e,i,o){var r,l;if(!t?.baseUrl){const c=vR();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class si{}function te(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(i))t[d]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];m(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),i)):i}else return i}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function TR(t,e){for(const[i,o]of Object.entries(e)){const r=i.split("."),l=o.split("."),c=new Set;let d=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}hf(t,r,l,0,c)}}function hf(t,e,i,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])hf(p,e,i,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of d)p[h]=c[h];for(const[h,y]of Object.entries(p)){const _=[];for(const T of i.slice(o))T==="*"?_.push(h):_.push(T);m(c,_,y)}for(const h of d)delete c[h]}}else{const c=t;l in c&&hf(c[l],e,i,o+1,r)}}function Yf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function SR(t){const e={},i=f(t,["operationName"]);i!=null&&m(e,["operationName"],i);const o=f(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function ER(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],AR(c)),e}function CR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],bR(c)),e}function AR(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>MR(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function bR(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>wR(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function MR(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],UR(i)),e}function wR(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],PR(i)),e}function RR(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function NR(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function xR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],IR(c)),e}function IR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function O_(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],DR(c)),e}function DR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function UR(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Yf(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function PR(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Yf(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}var nv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nv||(nv={}));var iv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(iv||(iv={}));var ov;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ov||(ov={}));var Ui;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ui||(Ui={}));var sv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(sv||(sv={}));var rv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rv||(rv={}));var av;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(av||(av={}));var lv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(lv||(lv={}));var uv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(uv||(uv={}));var cv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(cv||(cv={}));var dv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dv||(dv={}));var fv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(fv||(fv={}));var hv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(hv||(hv={}));var pv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(pv||(pv={}));var mv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(mv||(mv={}));var gv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gv||(gv={}));var yv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(yv||(yv={}));var vv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(vv||(vv={}));var _v;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_v||(_v={}));var Hl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Hl||(Hl={}));var Tv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Tv||(Tv={}));var Sv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Sv||(Sv={}));var Ev;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ev||(Ev={}));var pf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pf||(pf={}));var Cv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Cv||(Cv={}));var Av;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Av||(Av={}));var bv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(bv||(bv={}));var Mv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Mv||(Mv={}));var wv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wv||(wv={}));var Rv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Rv||(Rv={}));var Nv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Nv||(Nv={}));var xv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xv||(xv={}));var Iv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Iv||(Iv={}));var Dv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Dv||(Dv={}));var Uv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Uv||(Uv={}));var Pv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Pv||(Pv={}));var Lv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Lv||(Lv={}));var kv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kv||(kv={}));var Ov;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ov||(Ov={}));var qv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(qv||(qv={}));var Gv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Gv||(Gv={}));var Hv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Hv||(Hv={}));var zv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(zv||(zv={}));var Vv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Vv||(Vv={}));var Bv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Bv||(Bv={}));var Fv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Fv||(Fv={}));var $v;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})($v||($v={}));var Yv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Yv||(Yv={}));var Jv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Jv||(Jv={}));var Kv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Kv||(Kv={}));var Qv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Qv||(Qv={}));var Xv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xv||(Xv={}));var Zv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zv||(Zv={}));var Wv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Wv||(Wv={}));var ds;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ds||(ds={}));class mf{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rr{get text(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const T of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,b]of Object.entries(T))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(C);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,C]of Object.entries(_))T!=="inlineData"&&(C!==null||C!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class jv{}class e0{}class LR{}class kR{}class OR{}class qR{}class t0{}class n0{}class i0{}class GR{}class zl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new zl;let r;const l=e;return i?r=CR(l):r=ER(l),Object.assign(o,r),o}}class o0{}class s0{}class r0{}class HR{}class zR{}class VR{}class Jf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Jf,l=xR(e);return Object.assign(o,l),o}}class BR{}class FR{}class $R{}class a0{}class YR{get text(){var e,i,o;let r="",l=!1;const c=[];for(const d of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,o;let r="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class JR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Kf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Kf,l=O_(e);return Object.assign(o,l),o}}function Ie(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function q_(t,e){const i=Ie(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function G_(t){return Array.isArray(t)?t.map(e=>Vl(e)):[Vl(t)]}function Vl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function H_(t){const e=Vl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function z_(t){const e=Vl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function l0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function V_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>l0(e)):[l0(t)]}function gf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function u0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function c0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bt(t){if(t==null)throw new Error("ContentUnion is required");return gf(t)?t:{role:"user",parts:V_(t)}}function Qf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=bt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=bt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>bt(i)):[bt(e)]}function cn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(u0(t)||c0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bt(t)]}const e=[],i=[],o=gf(t[0]);for(const r of t){const l=gf(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(u0(r)||c0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||e.push({role:"user",parts:V_(i)}),e}function KR(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(Ui).includes(i[0].toUpperCase())?i[0].toUpperCase():Ui.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(Ui).includes(o.toUpperCase())?o.toUpperCase():Ui.TYPE_UNSPECIFIED})}}function ps(t){const e={},i=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&KR(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Ui).includes(d.toUpperCase())?d.toUpperCase():Ui.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ps(d);else if(o.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(ps(h))}e[c]=p}else if(r.includes(c)){const p={};for(const[h,y]of Object.entries(d))p[h]=ps(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Xf(t){return ps(t)}function Zf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Wf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function bs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ps(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ps(e.response));return t}function Ms(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function QR(t,e,i,o=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function ri(t,e){if(typeof e!="string")throw new Error("name must be a string");return QR(t,e,"cachedContents")}function B_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qi(t){return Yf(t)}function XR(t){return t!=null&&typeof t=="object"&&"name"in t}function ZR(t){return t!=null&&typeof t=="object"&&"video"in t}function WR(t){return t!=null&&typeof t=="object"&&"uri"in t}function F_(t){var e;let i;if(XR(t)&&(i=t.name),!(WR(t)&&(i=t.uri,i===void 0))&&!(ZR(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function $_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Y_(t){for(const e of["models","tunedModels","publisherModels"])if(jR(t,e))return t[e];return[]}function jR(t,e){return t!==null&&typeof t=="object"&&e in t}function eN(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function tN(t,e={}){const i=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=eN(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function J_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function nN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function K_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ws(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Q_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function iN(t){const e={},i=f(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ON(c))),m(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function oN(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function sN(t){const e={},i=f(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xl(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&m(e,["state"],Q_(r));const l=f(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const d=f(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],iN(K_(h))),e}function yf(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["state"]);r!=null&&m(e,["state"],Q_(r));const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["createTime"]);c!=null&&m(e,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(t,["model"]);y!=null&&m(e,["model"],y);const _=f(t,["inputConfig"]);_!=null&&m(e,["src"],rN(_));const T=f(t,["outputConfig"]);T!=null&&m(e,["dest"],oN(K_(T)));const C=f(t,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function rN(t){const e={},i=f(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function aN(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&m(i,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>kN(t,c))),m(i,["requests","requests"],l)}return i}function lN(t){const e={},i=f(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uN(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function cN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function dN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function fN(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],hN(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function hN(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function X_(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>FN(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function pN(t,e){const i={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function mN(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],sN(nN(r))),i}function d0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],aN(t,J_(t,r)));const l=f(e,["config"]);return l!=null&&pN(l,i),i}function gN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],Ie(t,o));const r=f(e,["src"]);r!=null&&m(i,["inputConfig"],lN(J_(t,r)));const l=f(e,["config"]);return l!=null&&mN(l,i),i}function yN(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),i}function vN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],bN(t,r));const l=f(e,["config"]);return l!=null&&yN(l,i),i}function _N(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function TN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function SN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function EN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function CN(t,e){const i={},o=f(e,["contents"]);if(o!=null){let l=Qf(t,o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(m(i,["_self"],AN(r,i)),TR(i,{"requests[].*":"requests[].request.*"})),i}function AN(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function bN(t,e){const i={},o=f(e,["fileName"]);o!=null&&m(i,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&m(i,["requests"],CN(t,r)),i}function MN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function wN(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RN(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function NN(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],X_(bt(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Xf(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(e,["safetySettings"]);if(i!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(be=>$N(be))),m(i,["safetySettings"],oe)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let oe=Ms(J);Array.isArray(oe)&&(oe=oe.map(be=>JN(bs(be)))),m(i,["tools"],oe)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],YN(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);i!==void 0&&W!=null&&m(i,["cachedContent"],ri(t,W));const Q=f(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const re=f(e,["mediaResolution"]);re!=null&&m(o,["mediaResolution"],re);const ee=f(e,["speechConfig"]);if(ee!=null&&m(o,["speechConfig"],Zf(ee)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=f(e,["thinkingConfig"]);le!=null&&m(o,["thinkingConfig"],le);const pe=f(e,["imageConfig"]);return pe!=null&&m(o,["imageConfig"],LN(pe)),o}function xN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>fN(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function IN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function DN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ws(t,o)),i}function UN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function PN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function LN(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["request","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let d=cn(r);Array.isArray(d)&&(d=d.map(p=>X_(p))),m(i,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(e,["config"]);return c!=null&&m(i,["request","generationConfig"],NN(t,c,f(i,["request"],{}))),i}function ON(t){const e={},i=f(t,["response"]);i!=null&&m(e,["response"],xN(i));const o=f(t,["error"]);return o!=null&&m(e,["error"],o),e}function qN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function GN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function HN(t){const e={},i=f(t,["config"]);return i!=null&&qN(i,e),e}function zN(t){const e={},i=f(t,["config"]);return i!=null&&GN(i,e),e}function VN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>xl(c))),m(e,["batchJobs"],l)}return e}function BN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>yf(c))),m(e,["batchJobs"],l)}return e}function FN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],MN(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],wN(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],uN(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function $N(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function YN(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],RN(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function JN(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],UN(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],PN(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var ii;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ii||(ii={}));class mo{constructor(e,i,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,r)}init(e,i,o){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class KN extends si{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new mo(ii.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=d0(this.apiClient,e),o=i._url,r=te("{model}:batchGenerateContent",o),d=i.batch.inputConfig.requests,p=d.requests,h=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const C=_.request;C.systemInstruction=T,_.request=C}h.push(_)}return d.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=gN(this.apiClient,e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>yf(y))}else{const h=d0(this.apiClient,e);return d=te("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>xl(y))}}async createEmbeddingsInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vN(this.apiClient,e);return l=te("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>xl(p))}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=DN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>yf(y))}else{const h=IN(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>xl(y))}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=dN(this.apiClient,e);c=te("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=cN(this.apiClient,e);c=te("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=zN(e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=BN(y),T=new a0;return Object.assign(T,_),T})}else{const h=HN(e);return d=te("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=VN(y),T=new a0;return Object.assign(T,_),T})}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=TN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>EN(y))}else{const h=_N(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>SN(y))}}}function QN(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function f0(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>vx(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function XN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=cn(c);Array.isArray(y)&&(y=y.map(_=>f0(_))),m(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],f0(bt(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>Tx(_))),m(e,["tools"],y)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],_x(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function ZN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=cn(c);Array.isArray(_)&&(_=_.map(T=>T)),m(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],bt(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>Sx(T))),m(e,["tools"],_)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function WN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],q_(t,o));const r=f(e,["config"]);return r!=null&&XN(r,i),i}function jN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],q_(t,o));const r=f(e,["config"]);return r!=null&&ZN(r,i),i}function ex(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ri(t,o)),i}function tx(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ri(t,o)),i}function nx(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function ix(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function ox(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function sx(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rx(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ax(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function lx(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ri(t,o)),i}function ux(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ri(t,o)),i}function cx(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function dx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function fx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function hx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function px(t){const e={},i=f(t,["config"]);return i!=null&&fx(i,e),e}function mx(t){const e={},i=f(t,["config"]);return i!=null&&hx(i,e),e}function gx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function yx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function vx(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],ox(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],sx(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],QN(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function _x(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],rx(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function Tx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],cx(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],dx(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Sx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>ax(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Ex(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function Cx(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function Ax(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],ri(t,o));const r=f(e,["config"]);return r!=null&&Ex(r,i),i}function bx(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],ri(t,o));const r=f(e,["config"]);return r!=null&&Cx(r,i),i}class Mx extends si{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new mo(ii.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=jN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=WN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=ux(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=lx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=ix(y),T=new s0;return Object.assign(T,_),T})}else{const h=ex(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=nx(y),T=new s0;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=bx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=Ax(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=mx(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=yx(y),T=new r0;return Object.assign(T,_),T})}else{const h=px(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=gx(y),T=new r0;return Object.assign(T,_),T})}}}function h0(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(t){return this instanceof Ve?(this.v=t,this):new Ve(t)}function ms(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(C){return function(b){return Promise.resolve(b).then(C,_)}}function d(C,b){o[C]&&(r[C]=function(M){return new Promise(function(w,R){l.push([C,M,w,R])>1||p(C,M)})},b&&(r[C]=b(r[C])))}function p(C,b){try{h(o[C](b))}catch(M){T(l[0][3],M)}}function h(C){C.value instanceof Ve?Promise.resolve(C.value.v).then(y,_):T(l[0][2],C)}function y(C){p("next",C)}function _(C){p("throw",C)}function T(C,b){C(b),l.shift(),l.length&&p(l[0][0],l[0][1])}}function zr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof h0=="function"?h0(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(d,p){c=t[l](c),r(d,p,c.done,c.value)})}}function r(l,c,d,p){Promise.resolve(p).then(function(h){l({value:h,done:d})},c)}}function wx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Z_(i)}function Z_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function p0(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<i&&t[o].role==="model";)r.push(t[o]),l&&!Z_(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Nx{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new xx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xx{constructor(e,i,o,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Rx(l)}async sendMessage(e){var i;await this.sendPromise;const o=bt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await r,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(d=y.slice(_))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(o,C,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const o=bt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?p0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,r;return ms(this,arguments,function*(){var c,d,p,h;const y=[];try{for(var _=!0,T=zr(e),C;C=yield Ve(T.next()),c=C.done,!c;_=!0){h=C.value,_=!1;const b=h;if(wx(b)){const M=(r=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;M!==void 0&&y.push(M)}yield yield Ve(b)}}catch(b){d={error:b}}finally{try{!_&&!c&&(p=T.return)&&(yield Ve(p.call(T)))}finally{if(d)throw d.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...p0(o)):this.history.push(e),this.history.push(...r)}}class Zl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zl.prototype)}}function Ix(t){const e={},i=f(t,["file"]);return i!=null&&m(e,["file"],i),e}function Dx(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Ux(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],F_(i)),e}function Px(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Lx(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],F_(i)),e}function kx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function Ox(t){const e={},i=f(t,["config"]);return i!=null&&kx(i,e),e}function qx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}class Gx extends si{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new mo(ii.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ox(e);return l=te("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=qx(p),y=new BR;return Object.assign(y,h),y})}}async createInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ix(e);return l=te("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Dx(p),y=new FR;return Object.assign(y,h),y})}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Lx(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ux(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Px(p),y=new $R;return Object.assign(y,h),y})}}}function Il(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Hx(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>nI(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function zx(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Vx(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bx(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function Fx(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],W_(D));const P=f(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const W=f(t,["topK"]);W!=null&&m(e,["topK"],W);const Q=f(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $x(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function Yx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Jx(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Wf(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Hx(bt(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let W=Ms(M);Array.isArray(W)&&(W=W.map(Q=>oI(bs(Q)))),m(e,["setup","tools"],W)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],iI(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Kx(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],Fx(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],W_(Wf(_)));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],bt(b));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let W=Ms(M);Array.isArray(W)&&(W=W.map(Q=>sI(bs(Q)))),m(e,["setup","tools"],W)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Qx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ie(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],Jx(r,i)),i}function Xx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ie(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],Kx(r,i)),i}function Zx(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function Wx(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function jx(t){const e={},i=f(t,["media"]);if(i!=null){let h=G_(i);Array.isArray(h)&&(h=h.map(y=>Il(y))),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],Il(z_(o)));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],Il(H_(l)));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function eI(t){const e={},i=f(t,["media"]);if(i!=null){let h=G_(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],z_(o));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],H_(l));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function tI(t){const e={},i=f(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const o=f(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],rI(c));const d=f(t,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function nI(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],zx(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],Vx(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Il(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function iI(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function W_(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function oI(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],$x(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],Yx(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function sI(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>Bx(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function rI(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const o=f(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const d=f(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["promptTokensDetails"],C)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["cacheTokensDetails"],C)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["responseTokensDetails"],C)}const _=f(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["toolUsePromptTokensDetails"],C)}const T=f(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function aI(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function lI(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],uI(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function uI(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function cI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let l=cn(r);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function dI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["tokensInfo"],r)}return e}function fI(t){const e={},i=f(t,["values"]);i!=null&&m(e,["values"],i);const o=f(t,["statistics"]);return o!=null&&m(e,["statistics"],hI(o)),e}function hI(t){const e={},i=f(t,["truncated"]);i!=null&&m(e,["truncated"],i);const o=f(t,["token_count"]);return o!=null&&m(e,["tokenCount"],o),e}function Wl(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>ED(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function pI(t){const e={},i=f(t,["controlType"]);i!=null&&m(e,["controlType"],i);const o=f(t,["enableControlImageComputation"]);return o!=null&&m(e,["computeControl"],o),e}function mI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gI(t,e){const i={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],bt(o));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>iT(d))),m(e,["tools"],c)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],aD(l)),i}function yI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let c=cn(r);Array.isArray(c)&&(c=c.map(d=>Wl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&mI(l),i}function vI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let c=cn(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&gI(l,i),i}function _I(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);o!=null&&m(e,["totalTokens"],o);const r=f(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function TI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);return o!=null&&m(e,["totalTokens"],o),e}function SI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ie(t,o)),i}function EI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ie(t,o)),i}function CI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function AI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const P=f(t,["baseSteps"]);return e!==void 0&&P!=null&&m(e,["parameters","editConfig","baseSteps"],P),i}function MI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>RD(p))),m(i,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&bI(c,i),i}function wI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>jl(l))),m(e,["generatedImages"],r)}return e}function RI(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function NI(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["instances[]","task_type"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),i}function xI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let d=Qf(t,r);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&RI(l,i);const c=f(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Ie(t,c)),i}function II(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let c=Qf(t,r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&NI(l,i),i}function DI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function UI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>fI(c))),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function PI(t){const e={},i=f(t,["endpoint"]);i!=null&&m(e,["name"],i);const o=f(t,["deployedModelId"]);return o!=null&&m(e,["deployedModelId"],o),e}function LI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function kI(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OI(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qI(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function GI(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Wl(bt(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Xf(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(e,["safetySettings"]);if(i!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(be=>ND(be))),m(i,["safetySettings"],oe)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let oe=Ms(J);Array.isArray(oe)&&(oe=oe.map(be=>kD(bs(be)))),m(i,["tools"],oe)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],LD(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);i!==void 0&&W!=null&&m(i,["cachedContent"],ri(t,W));const Q=f(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const re=f(e,["mediaResolution"]);re!=null&&m(o,["mediaResolution"],re);const ee=f(e,["speechConfig"]);if(ee!=null&&m(o,["speechConfig"],Zf(ee)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=f(e,["thinkingConfig"]);le!=null&&m(o,["thinkingConfig"],le);const pe=f(e,["imageConfig"]);return pe!=null&&m(o,["imageConfig"],fD(pe)),o}function HI(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],bt(r));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Xf(R));const D=f(e,["responseJsonSchema"]);D!=null&&m(o,["responseJsonSchema"],D);const P=f(e,["routingConfig"]);P!=null&&m(o,["routingConfig"],P);const J=f(e,["modelSelectionConfig"]);J!=null&&m(o,["modelConfig"],J);const B=f(e,["safetySettings"]);if(i!==void 0&&B!=null){let H=B;Array.isArray(H)&&(H=H.map(Z=>Z)),m(i,["safetySettings"],H)}const W=f(e,["tools"]);if(i!==void 0&&W!=null){let H=Ms(W);Array.isArray(H)&&(H=H.map(Z=>iT(bs(Z)))),m(i,["tools"],H)}const Q=f(e,["toolConfig"]);i!==void 0&&Q!=null&&m(i,["toolConfig"],Q);const re=f(e,["labels"]);i!==void 0&&re!=null&&m(i,["labels"],re);const ee=f(e,["cachedContent"]);i!==void 0&&ee!=null&&m(i,["cachedContent"],ri(t,ee));const le=f(e,["responseModalities"]);le!=null&&m(o,["responseModalities"],le);const pe=f(e,["mediaResolution"]);pe!=null&&m(o,["mediaResolution"],pe);const oe=f(e,["speechConfig"]);oe!=null&&m(o,["speechConfig"],nT(Zf(oe)));const be=f(e,["audioTimestamp"]);be!=null&&m(o,["audioTimestamp"],be);const Ye=f(e,["thinkingConfig"]);Ye!=null&&m(o,["thinkingConfig"],Ye);const Qe=f(e,["imageConfig"]);return Qe!=null&&m(o,["imageConfig"],hD(Qe)),o}function m0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let c=cn(r);Array.isArray(c)&&(c=c.map(d=>Wl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],GI(t,l,i)),i}function g0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["contents"]);if(r!=null){let c=cn(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],HI(t,l,i)),i}function y0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>lI(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function v0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const l=f(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const d=f(t,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function zI(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=f(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=f(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(t,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function VI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const P=f(t,["enhancePrompt"]);return e!==void 0&&P!=null&&m(e,["parameters","enhancePrompt"],P),i}function BI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&zI(l,i),i}function FI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&VI(l,i),i}function $I(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>iD(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],eT(r)),e}function YI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jl(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],tT(r)),e}function JI(t,e){const i={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=f(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],eu(y));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>QD(C))),m(e,["instances[0]","referenceImages"],T)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function KI(t,e){const i={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=f(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const d=f(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const T=f(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const b=f(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const M=f(t,["lastFrame"]);e!==void 0&&M!=null&&m(e,["instances[0]","lastFrame"],_n(M));const w=f(t,["referenceImages"]);if(e!==void 0&&w!=null){let P=w;Array.isArray(P)&&(P=P.map(J=>XD(J))),m(e,["instances[0]","referenceImages"],P)}const R=f(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],KD(R));const D=f(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function QI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],jI(c)),e}function XI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],eD(c)),e}function ZI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],eu(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],oT(c));const d=f(e,["source"]);d!=null&&tD(d,i);const p=f(e,["config"]);return p!=null&&JI(p,i),i}function WI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],_n(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],sT(c));const d=f(e,["source"]);d!=null&&nD(d,i);const p=f(e,["config"]);return p!=null&&KI(p,i),i}function jI(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>sD(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function eD(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>rD(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function tD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],eu(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],oT(l)),i}function nD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_n(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],sT(l)),i}function iD(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],pD(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],eT(r)),e}function jl(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],j_(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);r!=null&&m(e,["safetyAttributes"],tT(r));const l=f(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function oD(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["mask"],j_(i));const o=f(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["labels"],r)}return e}function sD(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],YD(i)),e}function rD(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],JD(i)),e}function aD(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],nT(D));const P=f(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const W=f(t,["topK"]);W!=null&&m(e,["topK"],W);const Q=f(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lD(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ie(t,o)),i}function uD(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ie(t,o)),i}function cD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function dD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function fD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);o!=null&&m(e,["imageSize"],o);const r=f(t,["outputMimeType"]);r!=null&&m(e,["imageOutputOptions","mimeType"],r);const l=f(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function pD(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],qi(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function j_(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],qi(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function eu(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],qi(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function _n(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],qi(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function mD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],$_(t,d)),o}function gD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],$_(t,d)),o}function yD(t,e){const i={},o=f(e,["config"]);return o!=null&&mD(t,o,i),i}function vD(t,e){const i={},o=f(e,["config"]);return o!=null&&gD(t,o,i),i}function _D(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=Y_(r);Array.isArray(l)&&(l=l.map(c=>vf(c))),m(e,["models"],l)}return e}function TD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=Y_(r);Array.isArray(l)&&(l=l.map(c=>_f(c))),m(e,["models"],l)}return e}function SD(t){const e={},i=f(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const o=f(t,["segmentationClasses"]);o!=null&&m(e,["maskClasses"],o);const r=f(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function vf(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["version"]);l!=null&&m(e,["version"],l);const c=f(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],OD(c));const d=f(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=f(t,["temperature"]);y!=null&&m(e,["temperature"],y);const _=f(t,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const T=f(t,["topP"]);T!=null&&m(e,["topP"],T);const C=f(t,["topK"]);C!=null&&m(e,["topK"],C);const b=f(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function _f(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["versionId"]);l!=null&&m(e,["version"],l);const c=f(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>PI(T))),m(e,["endpoints"],_)}const d=f(t,["labels"]);d!=null&&m(e,["labels"],d);const p=f(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],qD(p));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=f(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["checkpoints"],_)}return e}function ED(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],LI(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],kI(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],aI(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function CD(t){const e={},i=f(t,["productImage"]);return i!=null&&m(e,["image"],_n(i)),e}function AD(t,e){const i={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const T=f(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const C=f(t,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),i}function bD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["source"]);r!=null&&wD(r,i);const l=f(e,["config"]);return l!=null&&AD(l,i),i}function MD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>jl(r))),m(e,["generatedImages"],o)}return e}function wD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],_n(r));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>CD(d))),m(e,["instances[0]","productImages"],c)}return i}function RD(t){const e={},i=f(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],_n(i));const o=f(t,["referenceId"]);o!=null&&m(e,["referenceId"],o);const r=f(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const l=f(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],SD(l));const c=f(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],pI(c));const d=f(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function eT(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function tT(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function ND(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function xD(t){const e={},i=f(t,["image"]);return i!=null&&m(e,["image"],_n(i)),e}function ID(t,e){const i={},o=f(t,["mode"]);e!==void 0&&o!=null&&m(e,["parameters","mode"],o);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function DD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["source"]);r!=null&&PD(r,i);const l=f(e,["config"]);return l!=null&&ID(l,i),i}function UD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>oD(r))),m(e,["generatedMasks"],o)}return e}function PD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_n(r));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],xD(l)),i}function nT(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function LD(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],OI(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function kD(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],cD(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],dD(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function iT(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>qI(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function OD(t){const e={},i=f(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function qD(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function GD(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function HD(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function zD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","name"],Ie(t,o));const r=f(e,["config"]);return r!=null&&GD(r,i),i}function VD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["config"]);return r!=null&&HD(r,i),i}function BD(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const C=f(t,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),i}function FD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ie(t,o));const r=f(e,["image"]);r!=null&&m(i,["instances[0]","image"],_n(r));const l=f(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&BD(c,i),i}function $D(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>jl(l))),m(e,["generatedImages"],r)}return e}function YD(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],qi(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function JD(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],qi(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function KD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["_self"],_n(i));const o=f(t,["maskMode"]);return o!=null&&m(e,["maskMode"],o),e}function QD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],eu(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function XD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],_n(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function oT(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["encodedVideo"],qi(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function sT(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["bytesBase64Encoded"],qi(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}const ZD="Content-Type",WD="X-Server-Timeout",jD="User-Agent",Tf="x-goog-api-client",e1="1.30.0",t1=`google-genai-sdk/${e1}`,n1="v1beta1",i1="v1beta",_0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class o1{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:n1,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:i1,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const r=[this.getRequestUrlInternal(i)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const d=setTimeout(()=>l.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&s1(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await T0(r),new mf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await T0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return ms(this,arguments,function*(){const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield Ve(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),C=T.status,b=T.code,M=`got status: ${C}. ${JSON.stringify(_)}`;if(b>=400&&b<600)throw new Zl({message:M,status:b})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let y=c.match(_0);for(;y;){const _=y[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ve(new mf(T)),c=c.slice(y[0].length),y=c.match(_0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=t1+" "+this.clientOptions.userAgentExtra;return e[jD]=i,e[Tf]=i,e[ZD]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(WD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const p={file:r},h=this.getFileName(e),y=te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,p,i?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var r;const l=this.clientOptions.uploader,c=await l.stat(i),d=String(c.size),p=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o?.customMetadata&&(_.customMetadata=o.customMetadata),o?.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const T=await this.fetchUploadUrl(h,d,p,y,_,o?.httpOptions);return l.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,r,l,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function T0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw i>=400&&i<600?new Zl({message:r,status:i}):new Error(r)}}function s1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const r=o(i,e);t.body=JSON.stringify(r)}const r1="mcp_used/unknown";let a1=!1;function rT(t){for(const e of t)if(l1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return a1}function aT(t){var e;const i=(e=t[Tf])!==null&&e!==void 0?e:"";t[Tf]=(i+` ${r1}`).trimStart()}function l1(t){return t!==null&&typeof t=="object"&&t instanceof jf}function u1(t,e=100){return ms(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield Ve(t.listTools({cursor:o}));for(const c of l.tools)yield yield Ve(c),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class jf{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new jf(e,i)}async initialize(){var e,i,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var d=!0,p=(i=void 0,zr(u1(y))),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){i={error:_}}finally{try{!d&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),tN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}async function c1(t,e,i){const o=new JR;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(o,r),e(o)}class d1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=p1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(P=>{h=P}),_=e.callbacks,T=function(){h({})},C=this.apiClient,b={onopen:T,onmessage:P=>{c1(C,_.onmessage,P)},onerror:(i=_?.onerror)!==null&&i!==void 0?i:function(P){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(P){}},M=this.webSocketFactory.create(p,h1(c),b);M.connect(),await y;const D={setup:{model:Ie(this.apiClient,e.model)}};return M.send(JSON.stringify(D)),new f1(M,this.apiClient)}}class f1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Wx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Zx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ds.PLAY)}pause(){this.sendPlaybackControl(ds.PAUSE)}stop(){this.sendPlaybackControl(ds.STOP)}resetContext(){this.sendPlaybackControl(ds.RESET_CONTEXT)}close(){this.conn.close()}}function h1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function p1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const m1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function g1(t,e,i){const o=new YR;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=tI(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class y1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new d1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&rT(e.config.tools)&&aT(_);const T=S1(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const ee=this.apiClient.getApiKey();let le="BidiGenerateContent",pe="key";ee?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",pe="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${le}?${pe}=${ee}`}let C=()=>{};const b=new Promise(ee=>{C=ee}),M=e.callbacks,w=function(){var ee;(ee=M?.onopen)===null||ee===void 0||ee.call(M),C({})},R=this.apiClient,D={onopen:w,onmessage:ee=>{g1(R,M.onmessage,ee)},onerror:(i=M?.onerror)!==null&&i!==void 0?i:function(ee){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(ee){}},P=this.webSocketFactory.create(y,T1(T),D);P.connect(),await b;let J=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const ee=this.apiClient.getProject(),le=this.apiClient.getLocation();J=`projects/${ee}/locations/${le}/`+J}let B={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hl.AUDIO]}:e.config.responseModalities=[Hl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],Q=[];for(const ee of W)if(this.isCallableTool(ee)){const le=ee;Q.push(await le.tool())}else Q.push(ee);Q.length>0&&(e.config.tools=Q);const re={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=Xx(this.apiClient,re):B=Qx(this.apiClient,re),delete B.config,P.send(JSON.stringify(B)),new _1(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const v1={turnComplete:!0};class _1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=cn(i.turns),e.isVertexAI()||(o=o.map(r=>Wl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(m1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},v1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:eI(e)}:i={realtimeInput:jx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function T1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function S1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const S0=10;function E0(t){var e,i,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(gs(c)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function gs(t){return"callTool"in t&&typeof t.callTool=="function"}function E1(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>gs(r)))!==null&&o!==void 0?o:!1}function C0(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(gs(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function A0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class C1 extends si{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,r,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!E1(i)||E0(i.config))return await this.generateContentInternal(p);const h=C0(i);if(h.length>0){const M=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let y,_;const T=cn(p.contents),C=(l=(r=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:S0;let b=0;for(;b<C&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const M=y.candidates[0].content,w=[];for(const R of(d=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(gs(R)){const P=await R.callTool(y.functionCalls);w.push(...P)}b++,_={role:"user",parts:w},p.contents=cn(p.contents),p.contents.push(M),p.contents.push(_),A0(p.config)&&(T.push(M),T.push(_))}return A0(p.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async i=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(i),E0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=C0(i);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=i?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((r=p?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=p?.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new mo(ii.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var o,r,l,c,d,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(d=i.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>gs(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&rT(e.config.tools)){const p=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),aT(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var i,o,r;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(gs(c)){const d=c,p=await d.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var i,o,r;const l=(r=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:S0;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,y,_){var T,C;return ms(this,arguments,function*(){for(var b,M,w,R;d<l;){c&&(d++,c=!1);const B=yield Ve(h.processParamsMaybeAddMcpUsage(_)),W=yield Ve(h.generateContentStreamInternal(B)),Q=[],re=[];try{for(var D=!0,P=(M=void 0,zr(W)),J;J=yield Ve(P.next()),b=J.done,!b;D=!0){R=J.value,D=!1;const ee=R;if(yield yield Ve(ee),ee.candidates&&(!((T=ee.candidates[0])===null||T===void 0)&&T.content)){re.push(ee.candidates[0].content);for(const le of(C=ee.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(d<l&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(le.functionCall.name)){const pe=yield Ve(y.get(le.functionCall.name).callTool([le.functionCall]));Q.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(ee){M={error:ee}}finally{try{!D&&!b&&(w=P.return)&&(yield Ve(w.call(P)))}finally{if(M)throw M.error}}if(Q.length>0){c=!0;const ee=new Rr;ee.candidates=[{content:{role:"user",parts:Q}}],yield yield Ve(ee);const le=[];le.push(...re),le.push({role:"user",parts:Q});const pe=cn(_.contents).concat(le);_.contents=pe}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=g0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=v0(y),T=new Rr;return Object.assign(T,_),T})}else{const h=m0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=y0(y),T=new Rr;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=g0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return ms(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=zr(_),D;D=yield Ve(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=v0(yield Ve(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Rr;Object.assign(B,J),yield yield Ve(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Ve(b.call(R)))}finally{if(C)throw C.error}}})})}else{const h=m0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return ms(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=zr(_),D;D=yield Ve(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=y0(yield Ve(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Rr;Object.assign(B,J),yield yield Ve(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Ve(b.call(R)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=II(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=UI(y),T=new jv;return Object.assign(T,_),T})}else{const h=xI(this.apiClient,e);return d=te("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=DI(y),T=new jv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=FI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=YI(y),T=new e0;return Object.assign(T,_),T})}else{const h=BI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=$I(y),T=new e0;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=MI(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=wI(p),y=new LR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=FD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=$D(p),y=new kR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=bD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=MD(p),y=new OR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=DD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=UD(p),y=new qR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=uD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>_f(y))}else{const h=lD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>vf(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=vD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=TD(y),T=new t0;return Object.assign(T,_),T})}else{const h=yD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=_D(y),T=new t0;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=VD(this.apiClient,e);return d=te("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>_f(y))}else{const h=zD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>vf(y))}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=EI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=AI(y),T=new n0;return Object.assign(T,_),T})}else{const h=SI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=CI(y),T=new n0;return Object.assign(T,_),T})}}async countTokens(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=vI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=TI(y),T=new i0;return Object.assign(T,_),T})}else{const h=yI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=_I(y),T=new i0;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=cI(this.apiClient,e);return l=te("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=dI(p),y=new GR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=WI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=XI(y),T=new zl;return Object.assign(T,_),T})}else{const h=ZI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=QI(y),T=new zl;return Object.assign(T,_),T})}}}class A1 extends si{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=NR(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=RR(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=SR(e);return l=te("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function b1(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function M1(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>L1(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function w1(t,e,i){const o={},r=f(e,["expireTime"]);i!==void 0&&r!=null&&m(i,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=f(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const d=f(e,["liveConnectConstraints"]);i!==void 0&&d!=null&&m(i,["bidiGenerateContentSetup"],P1(t,d));const p=f(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),o}function R1(t,e){const i={},o=f(e,["config"]);return o!=null&&m(i,["config"],w1(t,o,i)),i}function N1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function x1(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function D1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function U1(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Wf(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],M1(bt(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let W=Ms(M);Array.isArray(W)&&(W=W.map(Q=>O1(bs(Q)))),m(e,["setup","tools"],W)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],k1(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function P1(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ie(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],U1(r,i)),i}function L1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],N1(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],x1(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],b1(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function k1(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function O1(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],I1(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],D1(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function q1(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function G1(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=q1(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class H1 extends si{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=R1(this.apiClient,e);l=te("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=G1(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}function z1(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),i}function V1(t){const e={},i=f(t,["config"]);return i!=null&&z1(i,e),e}function B1(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function F1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&B1(o,e),e}function $1(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Y1(t,e){const i={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),i}function J1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],Q1(c)),e}function K1(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&Y1(r,e),e}function Q1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function X1(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function Z1(t){const e={},i=f(t,["config"]);return i!=null&&X1(i,e),e}function W1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function j1(t,e){const i={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function eU(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["config"]);return o!=null&&j1(o,e),e}function tU(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function nU(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function iU(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&nU(o,e),e}function oU(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function sU(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function rU(t){const e={},i=f(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const o=f(t,["config"]);return o!=null&&sU(o,e),e}function aU(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}class lU extends si{constructor(e){super(),this.apiClient=e,this.list=async i=>new mo(ii.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oU(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iU(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rU(e);return l=te("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=aU(p),y=new HR;return Object.assign(y,h),y})}}}class uU extends si{constructor(e,i=new lU(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new mo(ii.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=V1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$1(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=F1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Z1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=W1(p),y=new zR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eU(e);return l=te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=tU(p),y=new VR;return Object.assign(y,h),y})}}async importFile(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=K1(e);return l=te("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=J1(p),y=new Jf;return Object.assign(y,h),y})}}}function cU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function dU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function fU(t,e,i){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function hU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec"],b0(C))}else if(r==="PREFERENCE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec"],b0(C))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let d=f(i,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(p==="PREFERENCE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(y==="PREFERENCE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function pU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&bU(l);const c=f(t,["config"]);return c!=null&&fU(c,i),i}function mU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&MU(l,i,e);const c=f(t,["config"]);return c!=null&&hU(c,i,e),i}function gU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function yU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function vU(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function _U(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function TU(t,e){const i={},o=f(t,["config"]);return o!=null&&vU(o,i),i}function SU(t,e){const i={},o=f(t,["config"]);return o!=null&&_U(o,i),i}function EU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>lT(d))),m(i,["tuningJobs"],c)}return i}function CU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Sf(d))),m(i,["tuningJobs"],c)}return i}function AU(t,e){const i={},o=f(t,["name"]);o!=null&&m(i,["model"],o);const r=f(t,["name"]);return r!=null&&m(i,["endpoint"],r),i}function bU(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(i,["examples","examples"],r)}return i}function MU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function lT(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],B_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["tuningTask","startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["description"]);y!=null&&m(i,["description"],y);const _=f(t,["baseModel"]);_!=null&&m(i,["baseModel"],_);const T=f(t,["_self"]);return T!=null&&m(i,["tunedModel"],AU(T)),i}function Sf(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],B_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["error"]);y!=null&&m(i,["error"],y);const _=f(t,["description"]);_!=null&&m(i,["description"],_);const T=f(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const C=f(t,["tunedModel"]);C!=null&&m(i,["tunedModel"],C);const b=f(t,["preTunedModel"]);b!=null&&m(i,["preTunedModel"],b);const M=f(t,["supervisedTuningSpec"]);M!=null&&m(i,["supervisedTuningSpec"],M);const w=f(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const R=f(t,["tuningDataStats"]);R!=null&&m(i,["tuningDataStats"],R);const D=f(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const P=f(t,["partnerModelTuningSpec"]);P!=null&&m(i,["partnerModelTuningSpec"],P);const J=f(t,["customBaseModel"]);J!=null&&m(i,["customBaseModel"],J);const B=f(t,["experiment"]);B!=null&&m(i,["experiment"],B);const W=f(t,["labels"]);W!=null&&m(i,["labels"],W);const Q=f(t,["outputUri"]);Q!=null&&m(i,["outputUri"],Q);const re=f(t,["pipelineJob"]);re!=null&&m(i,["pipelineJob"],re);const ee=f(t,["serviceAccount"]);ee!=null&&m(i,["serviceAccount"],ee);const le=f(t,["tunedModelDisplayName"]);le!=null&&m(i,["tunedModelDisplayName"],le);const pe=f(t,["veoTuningSpec"]);return pe!=null&&m(i,["veoTuningSpec"],pe),i}function wU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(t,["done"]);c!=null&&m(i,["done"],c);const d=f(t,["error"]);return d!=null&&m(i,["error"],d),i}function b0(t,e){const i={},o=f(t,["gcsUri"]);o!=null&&m(i,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&m(i,["validationDatasetUri"],r),i}class RU extends si{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new mo(ii.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:pf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=yU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>Sf(y))}else{const h=gU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>lT(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=SU(e);return d=te("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=CU(y),T=new o0;return Object.assign(T,_),T})}else{const h=TU(e);return d=te("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=EU(y),T=new o0;return Object.assign(T,_),T})}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=dU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=cU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=mU(e,e);return l=te("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>Sf(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pU(e);return l=te("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>wU(p))}}}class NU{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xU=1024*1024*8,IU=3,DU=1e3,UU=2,Bl="x-goog-upload-status";async function PU(t,e,i){var o;const r=await uT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Bl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function LU(t,e,i){var o;const r=await uT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Bl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=O_(l),d=new Kf;return Object.assign(d,c),d}async function uT(t,e,i){var o,r;let l=0,c=0,d=new mf(new Response),p="upload";for(l=t.size;c<l;){const h=Math.min(xU,l-c),y=t.slice(c,c+h);c+h>=l&&(p+=", finalize");let _=0,T=DU;for(;_<IU&&(d=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[Bl]));)_++,await OU(T),T=T*UU;if(c+=h,((r=d?.headers)===null||r===void 0?void 0:r[Bl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function kU(t){return{size:t.size,type:t.type}}function OU(t){return new Promise(e=>setTimeout(e,t))}class qU{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PU(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LU(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kU(e)}}class GU{create(e,i,o){return new HU(e,i,o)}}class HU{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const M0="x-goog-api-key";class zU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(M0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(M0,this.apiKey)}}}const VU="gl-node/";class cT{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=_R(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new zU(this.apiKey);this.apiClient=new o1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:VU+"web",uploader:new qU,downloader:new NU}),this.models=new C1(this.apiClient),this.live=new y1(this.apiClient,r,new GU),this.batches=new KN(this.apiClient),this.chats=new Nx(this.models,this.apiClient),this.caches=new Mx(this.apiClient),this.files=new Gx(this.apiClient),this.operations=new A1(this.apiClient),this.authTokens=new H1(this.apiClient),this.tunings=new RU(this.apiClient),this.fileSearchStores=new uU(this.apiClient)}}let Vr=null;function BU(t){localStorage.setItem("gemini_api_key",t),Vr=new cT({apiKey:t})}function dT(){return localStorage.getItem("gemini_api_key")}function Ef(){return!!dT()}function FU(){Vr=null,localStorage.removeItem("gemini_api_key")}function eh(){if(!Vr){const t=dT();if(!t)throw new Error("Gemini API key not set. Add your key in Settings.");Vr=new cT({apiKey:t})}return Vr}function th(t){return t.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim()}async function $U(t,e=[]){const i=eh(),o=e&&e.length>0,r=t&&t.trim().length>0;let l="";r&&o?l=`The user provided a text description AND ${e.length} image(s). Use ALL information together - the text gives context, images show the actual food and/or nutrition labels.`:o?l=`The user provided ${e.length} image(s) of their meal. These may include food photos and/or nutrition labels.`:l="The user provided a text description of their meal.";const c=`Analyze this meal and provide complete nutritional breakdown.

${l}

${r?`Text description: "${t}"`:""}

Instructions:
- If you see a NUTRITION LABEL in any image, use those EXACT values for that product
- If you see FOOD in an image, identify items and estimate portions
- Combine information from text AND images to build the complete meal
- If text mentions something not visible in images, include it anyway

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece",
      "grams": number,
      "nutrients": {
        "calories": number,
        "purines": number,
        "protein": number,
        "carbs": number,
        "fat": number,
        "fiber": number,
        "sodium": number,
        "sugar": number
      }
    }
  ],
  "total_nutrients": {
    "calories": number,
    "purines": number,
    "protein": number,
    "carbs": number,
    "fat": number,
    "fiber": number,
    "sodium": number,
    "sugar": number
  }
}

Rules:
- Make reasonable portion estimates if not specified (e.g., "an egg" = 50g, "a glass of juice" = 250ml)
- "grams" is the converted weight in grams for the specified quantity
- "nutrients" are the values for THAT ingredient's quantity (not per 100g)
- "total_nutrients" is the sum of all ingredients
- Use USDA database for calories, protein, carbs, fat, fiber, sodium, sugar
- All values: calories=kcal, purines/sodium=mg, all others=grams

CRITICAL - Purine Values (mg per 100g, from medical literature):
VERY HIGH (300-800+): organ meats (liver 550, kidney 700), sardines 480, anchovies 410, herring 380, mackerel 350
HIGH (150-300): beef 130, pork 145, lamb 180, chicken thigh 175, turkey 150, shrimp 150, mussels 200, scallops 180
MODERATE (50-150): chicken breast 100, salmon 120, tuna 120, lentils 130, beans 75, spinach 70, mushrooms 60, asparagus 55
LOW (10-50): eggs 5, milk 0, cheese 10, bread 25, rice 25, pasta 50, potatoes 15, most vegetables 10-20, fruits 5-15
VERY LOW (0-10): garlic 5, onion 5, olive oil 0, butter 0, sugar 0, honey 0

Calculate purines by: (grams / 100)  purine_per_100g
Example: 2 cups penne (280g cooked)  50mg/100g = 140mg purines (NOT 336mg)
Example: 2 cloves garlic (6g)  5mg/100g = 0.3mg purines (NOT 25mg)`;try{const d=[{text:c}];if(o)for(const y of e)d.push({inlineData:{data:y.base64,mimeType:y.mimeType||"image/jpeg"}});const h=(await i.models.generateContent({model:"gemini-2.5-flash",contents:d})).text;return JSON.parse(th(h))}catch(d){throw console.error("Failed to analyze meal:",d),new Error(`Failed to analyze meal: ${d.message}`)}}async function YU(t){const e=eh(),i=`Parse this meal description into structured ingredient data:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece"
    }
  ]
}

Rules:
- Make reasonable portion estimates if not specified
- Convert to metric units when possible
- If ambiguous, choose the most common interpretation`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(th(r))}catch(o){throw console.error("Failed to parse meal:",o),new Error(`Failed to parse meal: ${o.message}`)}}async function JU(t){const e=eh(),i=`Estimate complete nutritional information per 100g for this ingredient:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "calories": number,
  "purines": number,
  "protein": number,
  "carbs": number,
  "fat": number,
  "fiber": number,
  "sodium": number,
  "sugar": number
}

All values in standard units:
- calories: kcal
- purines: mg (CRITICAL - see reference below)
- all others: grams (g) except sodium (mg)

Use USDA database for calories, protein, carbs, fat, fiber, sodium, sugar.

PURINE REFERENCE VALUES (mg per 100g, from medical literature):
VERY HIGH (300-800+): organ meats (liver 550, kidney 700), sardines 480, anchovies 410, herring 380
HIGH (150-300): beef 130, pork 145, chicken thigh 175, shrimp 150, mussels 200
MODERATE (50-150): chicken breast 100, salmon 120, lentils 130, beans 75, mushrooms 60
LOW (10-50): eggs 5, cheese 10, bread 25, rice 25, pasta 50, potatoes 15, most vegetables 10-20
VERY LOW (0-10): garlic 5, onion 5, olive oil 0, butter 0, milk 0, fruits 5-15`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(th(r))}catch(o){throw console.error("Failed to get nutrition:",o),new Error(`Failed to get nutrition data: ${o.message}`)}}async function fT(t,e=[],i=null){const o=await $U(t,e),r=o.ingredients.map(l=>{const c=l.grams||100,d=100/c,p=Fl(l.nutrients,d);return i&&i({name:l.name,nutrients_per_100g:p,source:"ai"}),{name:l.name,normalized_name:hT(l.name),quantity:l.quantity,unit:l.unit,grams:c,nutrients_per_100g:p,nutrients_per_unit:l.nutrients}});return{meal_name:o.meal_name,ingredients:r,total_nutrients:o.total_nutrients}}async function KU(t,e=[],i=null){if(!i)return fT(t,e);const{lookup:o,add:r,recordUsage:l}=i,c=await YU(t),d=[],p=[],h=[];for(const _ of c.ingredients){const T=hT(_.name),C=o?o(T):null;C&&C.nutrients_per_100g?(h.push({..._,normalizedName:T,cached:C}),l&&l(T)):p.push({..._,normalizedName:T})}if(p.length>0)for(const _ of p)try{const T=await JU(_.name),C=Dd(_.quantity,_.unit),b=C/100,M=Fl(T,b);d.push({name:_.name,normalized_name:_.normalizedName,quantity:_.quantity,unit:_.unit,grams:C,nutrients_per_100g:T,nutrients_per_unit:M}),r&&r({name:_.name,nutrients_per_100g:T,source:"ai"})}catch(T){console.error(`Failed to get nutrition for ${_.name}:`,T),d.push({name:_.name,normalized_name:_.normalizedName,quantity:_.quantity,unit:_.unit,grams:Dd(_.quantity,_.unit),nutrients_per_100g:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},nutrients_per_unit:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0}})}for(const _ of h){const T=Dd(_.quantity,_.unit),C=T/100,b=Fl(_.cached.nutrients_per_100g,C);d.push({name:_.name,normalized_name:_.normalizedName,quantity:_.quantity,unit:_.unit,grams:T,nutrients_per_100g:_.cached.nutrients_per_100g,nutrients_per_unit:b})}const y=pT(d);return{meal_name:c.meal_name,ingredients:d,total_nutrients:y,cache_stats:{hits:h.length,misses:p.length}}}function hT(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}const QU={g:1,gram:1,grams:1,kg:1e3,oz:28.35,ounce:28.35,ounces:28.35,lb:453.6,pound:453.6,pounds:453.6,cup:240,cups:240,tbsp:15,tablespoon:15,tablespoons:15,tsp:5,teaspoon:5,teaspoons:5,ml:1,slice:30,slices:30,piece:50,pieces:50};function Dd(t,e){const i=e.toLowerCase().trim(),o=QU[i]||1;return t*o}function Fl(t,e){const i={};return Object.keys(t).forEach(o=>{i[o]=Math.round(t[o]*e*10)/10}),i}function w0(t,e){const i=t.quantity||1,o=e/i,r=(t.grams||100)*o;return{...t,quantity:e,grams:r,nutrients_per_unit:Fl(t.nutrients_per_unit||{},o)}}function pT(t){return t.reduce((e,i)=>(Object.keys(i.nutrients_per_unit).forEach(o=>{e[o]=(e[o]||0)+i.nutrients_per_unit[o]}),e),{})}const XU=t=>new Promise((e,i)=>{const o=new FileReader;o.onload=()=>{const r=o.result.split(",")[1];e({base64:r,mimeType:t.type||"image/jpeg",preview:o.result,name:t.name})},o.onerror=i,o.readAsDataURL(t)}),Ud=[{key:"breakfast",icon:"",label:"Brekkie"},{key:"lunch",icon:"",label:"Lunch"},{key:"dinner",icon:"",label:"Dinner"},{key:"snack",icon:"",label:"Snack"}],Pd=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},ZU=t=>{const e=[];for(let i=-3;i<=3;i++){const o=new Date(t);o.setDate(o.getDate()+i),e.push({date:o,dateKey:Pd(o),dayName:o.toLocaleDateString("en-US",{weekday:"short"}).charAt(0),dayNum:o.getDate(),isToday:Pd(o)===Pd(new Date)})}return e};function WU(){const{user:t,isLoading:e}=Zr(),[i,o]=U.useState(Wy()),[r,l]=U.useState(new Date),[c,d]=U.useState("breakfast"),[p,h]=U.useState(""),[y,_]=U.useState(!1),[T,C]=U.useState(!1),[b,M]=U.useState(null),[w,R]=U.useState([]),D=U.useRef(null),P=U.useRef(null),[J,B]=U.useState(null),[W,Q]=U.useState(""),[re,ee]=U.useState("snack"),[le,pe]=U.useState(""),[oe,be]=U.useState(null),[Ye,Qe]=U.useState(""),[H,Z]=U.useState(null),[ie,X]=U.useState({}),{meals:ce,isLoading:x,addMeal:F,updateMeal:G,deleteMeal:j,getDailyTotals:fe}=L_(i),{totalHydration:me,adjustHydration:Re,isLoading:ht}=k_(i),{addToStash:Je,bottles:Gi}=$f(),{lookupIngredient:go,addIngredient:yo,recordUsage:Wr}=mR(),Rs=[...[{id:"quick-250",name:"+250ml",capacity_ml:250,icon:null},{id:"quick-500",name:"+500ml",capacity_ml:500,icon:null}],...Gi],Ns=ZU(r),tt=t?.thresholds||{},xs=ce.filter(K=>K.meal_type!=="hydration"),Vt={...fe(i)},Is=pR(Vt,tt),tu=e||x||ht,ea=async K=>{await Re(K)},Mt=K=>{o(K)},ta=K=>{const de=new Date(r);de.setDate(de.getDate()+(K==="next"?7:-7)),l(de)},Ds=async K=>{const de=Array.from(K.target.files||[]);if(de.length!==0){try{const ve=await Promise.all(de.map(XU));R(Ge=>[...Ge,...ve])}catch(ve){console.error("Failed to read image:",ve),M("Failed to read image. Please try again.")}K.target.value=""}},na=K=>{R(de=>de.filter((ve,Ge)=>Ge!==K))},vo=async K=>{K.preventDefault();const de=p.trim().length>0,ve=w.length>0;if(!(!de&&!ve)){if(M(null),!Ef()){await F({date:i,meal_type:c,meal_name:de?p:"Meal with photos",ingredients:[],total_nutrients:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},hydration_ml:0,analysis_method:"manual"}),h(""),R([]);return}C(!0);try{const Ge=w.map(Sn=>({base64:Sn.base64,mimeType:Sn.mimeType}));let Et,Ct,Nn,zi;if(ve){const Sn=await fT(p,Ge,yo);Et=Sn.meal_name,Ct=Sn.ingredients,Nn=Sn.total_nutrients,zi={hits:0,misses:Ct.length}}else{const Vi=await KU(p,[],{lookup:go,add:yo,recordUsage:Wr});Et=Vi.meal_name,Ct=Vi.ingredients,Nn=Vi.total_nutrients,zi=Vi.cache_stats,zi&&console.log(` Ingredient cache: ${zi.hits} hits, ${zi.misses} AI calls`)}const sa={date:i,meal_type:c,meal_name:Et,description:p,ingredients:Ct,total_nutrients:Nn,hydration_ml:0,analysis_method:ve?"ai-vision":"ai",image_count:w.length};await F(sa),h(""),R([])}catch(Ge){console.error("AI parsing failed:",Ge),M(Ge.message||"Failed to analyze meal. Try again or check your API key.")}finally{C(!1)}}},nu=async K=>{confirm("Delete this meal?")&&await j(K)},ia=K=>{B(K),Q(K.meal_name),ee(K.meal_type),pe(K.date)},iu=async()=>{J&&(await G(J.id,{meal_name:W,meal_type:re,date:le}),B(null))},oa=()=>{B(null),Q(""),ee("snack"),pe("")},Hi=K=>{be(K),Qe(Wy())},wt=async()=>{if(!oe||!Ye)return;const K={date:Ye,meal_type:oe.meal_type,meal_name:oe.meal_name,description:oe.description,ingredients:oe.ingredients,total_nutrients:oe.total_nutrients,hydration_ml:0,analysis_method:"copy"};await F(K),be(null),alert(`Meal copied to ${Ye}! `)},Tn=K=>{Z({mealId:K.id,originalIngredients:K.ingredients,ingredients:[...K.ingredients]}),X({})},Rt=(K,de)=>{const ve=parseFloat(de)||0;X(Ge=>({...Ge,[K]:ve}))},ou=async()=>{if(!H)return;const K=H.ingredients.map((ve,Ge)=>ie[Ge]!==void 0&&ie[Ge]!==ve.quantity?w0(ve,ie[Ge]):ve),de=pT(K);await G(H.mealId,{ingredients:K,total_nutrients:de}),Z(null),X({})},su=async K=>{if(!H)return;const de=H.ingredients.filter((Et,Ct)=>Ct!==K);Z(Et=>({...Et,ingredients:de}));const ve={...ie};delete ve[K];const Ge={};Object.keys(ve).forEach(Et=>{const Ct=parseInt(Et);Ct>K?Ge[Ct-1]=ve[Et]:Ge[Ct]=ve[Et]}),X(Ge)},ru=()=>{Z(null),X({})},_o=async K=>{await Je({type:"meal",name:K.meal_name,ingredients:K.ingredients||[],total_nutrients:K.total_nutrients||{},use_count:0}),alert(`"${K.meal_name}" saved to your Dragon's Hoard! `)},To=(K=>{const[de,ve,Ge]=K.split("-").map(Number);return new Date(de,ve-1,Ge)})(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});return tu?E.jsxs("div",{className:"page diary-page",children:[E.jsx(ki,{title:"Dragon Keeper",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Waking up the dragon..."})]})]}):E.jsxs("div",{className:"page diary-page",children:[E.jsx(ki,{title:"Dragon Keeper",subtitle:`Feeding log for ${To}`}),E.jsxs("div",{className:"calendar-ribbon card",children:[E.jsx("button",{className:"cal-nav",onClick:()=>ta("prev"),"aria-label":"Previous week",children:""}),E.jsx("div",{className:"cal-days",children:Ns.map(K=>{const de=K.dateKey===i;return E.jsxs("button",{className:`cal-day ${de?"active":""} ${K.isToday?"today":""}`,onClick:()=>Mt(K.dateKey),children:[E.jsx("span",{className:"cal-day-name",children:K.dayName}),E.jsx("span",{className:"cal-day-num",children:K.dayNum}),K.isToday&&E.jsx("span",{className:"cal-day-indicator",children:""})]},K.dateKey)})}),E.jsx("button",{className:"cal-nav",onClick:()=>ta("next"),"aria-label":"Next week",children:""})]}),E.jsx("div",{className:"meal-type-selector",children:Ud.map(K=>E.jsxs("button",{className:`meal-type-btn ${c===K.key?"active":""}`,onClick:()=>d(K.key),children:[E.jsx("span",{className:"meal-icon",children:K.icon}),E.jsx("span",{className:"meal-label",children:K.label})]},K.key))}),E.jsxs("form",{className:"meal-input-section card",onSubmit:vo,children:[E.jsx("label",{className:"input-label",children:"What did your dragon eat? "}),E.jsx("div",{className:"input-row",children:E.jsx("input",{type:"text",placeholder:w.length>0?"Add context or just tap Log It!":"e.g., grilled chicken with rice...",value:p,onChange:K=>h(K.target.value),disabled:T})}),w.length>0&&E.jsx("div",{className:"attached-images",children:w.map((K,de)=>E.jsxs("div",{className:"attached-image",children:[E.jsx("img",{src:K.preview,alt:`Attached ${de+1}`}),E.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>na(de),"aria-label":"Remove image",children:""})]},de))}),b&&E.jsx("div",{className:"ai-error",children:E.jsxs("span",{children:[" ",b]})}),E.jsx("input",{type:"file",ref:D,accept:"image/*",capture:"environment",onChange:Ds,style:{display:"none"}}),E.jsx("input",{type:"file",ref:P,accept:"image/*",multiple:!0,onChange:Ds,style:{display:"none"}}),E.jsxs("div",{className:"input-actions",children:[E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,onClick:()=>D.current?.click(),title:"Take a photo",children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,onClick:()=>P.current?.click(),title:"Choose from gallery",children:""}),E.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:T||!p.trim()&&w.length===0,children:T?E.jsx(E.Fragment,{children:" Analyzing..."}):E.jsx(E.Fragment,{children:"Log It! "})})]}),!Ef()&&E.jsx("p",{className:"no-api-hint text-muted text-sm",children:" Set up AI in Settings  Dragon's Intelligence to auto-analyze meals!"})]}),E.jsxs("div",{className:"hydration-section card",children:[E.jsxs("div",{className:"hydration-header",children:[E.jsx("span",{className:"hydration-title",children:" Dragon's Hydration"}),E.jsxs("span",{className:"hydration-value",children:[me,"/",tt.hydration_target||2e3,"ml"]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${me>=(tt.hydration_target||2e3)?"success":"warning"}`,style:{width:`${Math.min(me/(tt.hydration_target||2e3)*100,100)}%`}})}),E.jsxs("div",{className:"hydration-buttons",children:[E.jsx("button",{className:"btn btn-secondary btn-danger-outline",onClick:()=>ea(-250),children:"250"}),Rs.map(K=>E.jsxs("button",{className:"btn btn-secondary",onClick:()=>ea(K.capacity_ml),children:[K.icon||"",K.icon?" ":"",K.name||`+${K.capacity_ml}ml`]},K.id))]})]}),E.jsxs("section",{className:"meals-section",children:[E.jsx("h2",{className:"section-title",children:"Today's Feast"}),xs.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx(Gl,{state:"curious"}),E.jsx("p",{children:"No meals logged yet today!"}),E.jsx("p",{className:"text-muted",children:"Feed your dragon to get started."})]}):E.jsx("div",{className:"meals-list",children:xs.map(K=>E.jsxs("div",{className:"meal-card card",children:[E.jsxs("div",{className:"meal-header",children:[E.jsx("span",{className:"meal-type-badge",children:Ud.find(de=>de.key===K.meal_type)?.icon||""}),E.jsx("h3",{className:"meal-name",children:K.meal_name})]}),K.ingredients&&K.ingredients.length>0&&E.jsx("div",{className:"meal-ingredients-section",children:H?.mealId===K.id?E.jsxs("div",{className:"ingredients-edit-mode",children:[E.jsx("ul",{className:"meal-ingredients editing",children:H.ingredients.map((de,ve)=>{const Ge=ie[ve]!==void 0?ie[ve]:de.quantity,Et=ie[ve]!==void 0?w0(de,ie[ve]):de;return E.jsxs("li",{className:"ingredient-edit-row",children:[E.jsxs("span",{className:"ing-name",children:[" ",de.name]}),E.jsx("input",{type:"number",className:"ing-qty-input",value:Ge,onChange:Ct=>Rt(ve,Ct.target.value),min:"0",step:"0.1"}),E.jsx("span",{className:"ing-unit",children:de.unit}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(Et.nutrients_per_unit?.calories||0),"  ",Math.round(Et.nutrients_per_unit?.purines||0)]}),E.jsx("button",{className:"btn-icon btn-delete-ing",onClick:()=>su(ve),title:"Remove ingredient",children:""})]},ve)})}),E.jsxs("div",{className:"ingredient-edit-actions",children:[E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:ru,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary btn-sm",onClick:ou,children:" Save Changes"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("ul",{className:"meal-ingredients",children:K.ingredients.map((de,ve)=>E.jsxs("li",{children:[E.jsxs("span",{className:"ing-name",children:[" ",de.name]}),E.jsxs("span",{className:"ing-qty",children:["(",de.quantity||"?",de.unit||"g",")"]}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(de.nutrients_per_unit?.calories||0),"  ",Math.round(de.nutrients_per_unit?.purines||0)]})]},ve))}),E.jsx("button",{type:"button",className:"btn btn-secondary btn-sm btn-edit-ingredients",onClick:de=>{de.preventDefault(),de.stopPropagation(),Tn(K)},children:" Edit quantities"})]})}),E.jsxs("div",{className:"meal-nutrients meal-totals",children:[E.jsx("span",{className:"total-label",children:"Total:"}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.calories||0)," cal"]}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.purines||0),"mg"]})]}),E.jsxs("div",{className:"meal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>ia(K),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>Hi(K),children:" Copy"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>nu(K.id),children:""}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>_o(K),children:" Stash"})]})]},K.id))})]}),E.jsxs("section",{className:"daily-status card",children:[E.jsxs("div",{className:"status-header",onClick:()=>_(!y),children:[E.jsx("h3",{children:" Dragon's Daily Status"}),E.jsx(Gl,{state:Is,showMessage:!1,size:"small"}),E.jsx("span",{className:"toggle-hint",children:y?"":""})]}),E.jsx(Qn,{nutrient:"calories",value:Vt.calories||0,target:tt.calories_max||2e3,min:tt.calories_min||1500,max:tt.calories_max||2e3}),E.jsx(Qn,{nutrient:"purines",value:Vt.purines||0,target:tt.purines_max||400,max:tt.purines_max||400}),y&&E.jsxs("div",{className:"all-nutrients animate-fade-in",children:[E.jsx(Qn,{nutrient:"protein",value:Vt.protein||0,target:tt.protein_target||60,compact:!0}),E.jsx(Qn,{nutrient:"carbs",value:Vt.carbs||0,target:tt.carbs_target||250,compact:!0}),E.jsx(Qn,{nutrient:"fat",value:Vt.fat||0,target:tt.fat_target||65,compact:!0}),E.jsx(Qn,{nutrient:"fiber",value:Vt.fiber||0,target:tt.fiber_target||30,compact:!0}),E.jsx(Qn,{nutrient:"sodium",value:Vt.sodium||0,target:tt.sodium_max||2300,max:tt.sodium_max||2300,compact:!0}),E.jsx(Qn,{nutrient:"sugar",value:Vt.sugar||0,target:tt.sugar_max||50,max:tt.sugar_max||50,compact:!0}),E.jsx(Qn,{nutrient:"hydration",value:me,target:tt.hydration_target||2e3,compact:!0})]})]}),J&&E.jsx("div",{className:"modal-overlay",onClick:oa,children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Edit Meal"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Name"}),E.jsx("input",{type:"text",value:W,onChange:K=>Q(K.target.value),placeholder:"e.g., Grilled Chicken"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Type"}),E.jsx("select",{value:re,onChange:K=>ee(K.target.value),children:Ud.map(K=>E.jsxs("option",{value:K.key,children:[K.icon," ",K.label]},K.key))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Date (move to different day)"}),E.jsx("input",{type:"date",value:le,onChange:K=>pe(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:oa,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:iu,children:" Save"})]})]})}),oe&&E.jsx("div",{className:"modal-overlay",onClick:()=>be(null),children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Copy Meal"}),E.jsxs("p",{children:['Copy "',oe.meal_name,'" to another date:']}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Target Date"}),E.jsx("input",{type:"date",value:Ye,onChange:K=>Qe(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>be(null),children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:wt,children:" Copy Meal"})]})]})})]})}function jU(){return E.jsxs("div",{className:"page charts-page",children:[E.jsx(ki,{title:"Dragon's Scroll",subtitle:"View your nutrition history"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Gl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon's Scroll will show beautiful charts of your nutrition history."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" View by week, month, or custom range"}),E.jsx("li",{children:" Daily, weekly, or monthly grouping"}),E.jsx("li",{children:" Filter by nutrient type"}),E.jsx("li",{children:" Export your data"})]})]})]})}function eP(){return E.jsxs("div",{className:"page oracle-page",children:[E.jsx(ki,{title:"Dragon Oracle",subtitle:"Get meal recommendations"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Gl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon Oracle will suggest meals based on your remaining nutrition budget."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" Familiar meals you love"}),E.jsx("li",{children:" Twisted versions of favorites"}),E.jsx("li",{children:" Wild new adventures"}),E.jsx("li",{children:" AI-powered recommendations"})]})]})]})}function tP(){const t=Yl(),{user:e,isLoading:i,updateProfile:o,updateThresholds:r,updateTheme:l,saveUser:c}=Zr(),{savedMeals:d,bottles:p}=$f(),[h,y]=U.useState({name:"Dragon Keeper",sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]}),[_,T]=U.useState(df),[C,b]=U.useState("emerald"),[M,w]=U.useState("#66BB6A"),[R,D]=U.useState(!1),[P,J]=U.useState(!1),[B,W]=U.useState(""),[Q,re]=U.useState(!1),[ee,le]=U.useState(Ef()?"saved":"none");U.useEffect(()=>{e&&(y({name:e.name||"Dragon Keeper",...e.profile}),T(e.thresholds||df),b(e.theme?.preset||"emerald"),w(e.theme?.seed_color_hex||"#66BB6A"))},[e]);const pe=()=>{const X=aR(h);T(X),J(!0)},oe=(X,ce)=>{T(x=>({...x,[X]:Number(ce)})),J(!0)},be=X=>{y(ce=>({...ce,...X})),J(!0)},Ye=async X=>{b(X);const ce=Hr[X],x=uo(ce.seedColor,ce.isDark);co(x),await l(X,ce.seedColor)},Qe=async X=>{w(X),b("custom");const ce=uo(X,!1);co(ce),await l("custom",X)},H=()=>{B.trim()&&(BU(B.trim()),le("saved"),W(""),re(!1),alert("AI API key saved! Your dragon can now analyze meals. "))},Z=()=>{confirm("Remove your AI API key? Your dragon won't be able to analyze meals.")&&(FU(),le("none"),W(""))},ie=async()=>{const X={...e,name:h.name,profile:{sex:h.sex,age:h.age,weight_kg:h.weight_kg,height_cm:h.height_cm,activity_level:h.activity_level,dietary_conditions:h.dietary_conditions},thresholds:_};await o(X.profile),await r(_),await c(X),J(!1),alert("Dragon's settings saved! ")};return i?E.jsxs("div",{className:"page settings-page",children:[E.jsx(ki,{title:"Dragon's Lair",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the lair..."})]})]}):E.jsxs("div",{className:"page settings-page",children:[E.jsx(ki,{title:"Dragon's Lair",subtitle:"Configure your dragon's needs"}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Keeper's Profile"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:h.name,onChange:X=>be({name:X.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Sex"}),E.jsxs("select",{value:h.sex,onChange:X=>be({sex:X.target.value}),children:[E.jsx("option",{value:"male",children:"Male"}),E.jsx("option",{value:"female",children:"Female"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Age"}),E.jsx("input",{type:"number",value:h.age,onChange:X=>be({age:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Weight (kg)"}),E.jsx("input",{type:"number",value:h.weight_kg,onChange:X=>be({weight_kg:parseInt(X.target.value)})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Height (cm)"}),E.jsx("input",{type:"number",value:h.height_cm,onChange:X=>be({height_cm:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Activity Level"}),E.jsxs("select",{value:h.activity_level,onChange:X=>be({activity_level:X.target.value}),children:[E.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),E.jsx("option",{value:"light",children:"Light (1-3 days/week)"}),E.jsx("option",{value:"moderate",children:"Moderate (3-5 days/week)"}),E.jsx("option",{value:"active",children:"Active (6-7 days/week)"}),E.jsx("option",{value:"very_active",children:"Very Active (intense daily)"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Dietary Conditions"}),E.jsx("div",{className:"checkbox-group",children:["gout","diabetes","kidney_disease","vegetarian","vegan"].map(X=>E.jsxs("label",{className:"checkbox-label",children:[E.jsx("input",{type:"checkbox",checked:h.dietary_conditions?.includes(X)||!1,onChange:ce=>{const x=ce.target.checked?[...h.dietary_conditions||[],X]:(h.dietary_conditions||[]).filter(F=>F!==X);be({dietary_conditions:x})}}),E.jsx("span",{children:X.replace("_"," ")})]},X))})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:pe,children:"Calculate Dragon's Needs "}),P&&E.jsx("button",{className:"btn btn-primary w-full mt-sm",onClick:ie,children:" Save All Changes"})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Hoard"}),E.jsx("p",{className:"text-muted",children:"Manage your saved meals and custom bottles."}),E.jsxs("div",{className:"stash-buttons",children:[E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash"),children:[" Saved Meals (",d?.length||0,")"]}),E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash?tab=bottles"),children:[" Custom Bottles (",p?.length||0,")"]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsxs("div",{className:"section-header-row",children:[E.jsx("h2",{className:"section-title",children:" Nutrition Thresholds"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>D(!R),children:R?"Done":"Edit"})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Calories"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.calories_min,onChange:X=>oe("calories_min",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"-"}),E.jsx("input",{type:"number",value:_.calories_max,onChange:X=>oe("calories_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"kcal"})]}):E.jsxs("span",{className:"threshold-value",children:[_.calories_min," - ",_.calories_max," kcal"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Purines"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.purines_max,onChange:X=>oe("purines_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.purines_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Protein"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.protein_target,onChange:X=>oe("protein_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.protein_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Carbs"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.carbs_target,onChange:X=>oe("carbs_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.carbs_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fat"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fat_target,onChange:X=>oe("fat_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fat_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fiber"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fiber_target,onChange:X=>oe("fiber_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fiber_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sodium"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sodium_max,onChange:X=>oe("sodium_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sodium_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sugar"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sugar_max,onChange:X=>oe("sugar_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sugar_max," g max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Hydration"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.hydration_target,onChange:X=>oe("hydration_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"ml target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.hydration_target," ml target"]})]}),R&&E.jsx("p",{className:"text-muted text-center mt-sm",children:`Tip: Use "Calculate Dragon's Needs" to auto-fill based on your profile.`})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Scale Theme"}),E.jsx("div",{className:"theme-presets",children:Object.entries(Hr).map(([X,ce])=>E.jsxs("button",{className:`theme-preset ${C===X?"active":""}`,onClick:()=>Ye(X),style:{"--preset-color":ce.seedColor},children:[E.jsx("span",{className:"preset-swatch",style:{background:ce.seedColor}}),E.jsx("span",{className:"preset-name",children:ce.name}),E.jsx("span",{className:"preset-desc",children:ce.description})]},X))}),E.jsxs("div",{className:"custom-color-section",children:[E.jsx("label",{children:"Custom Dragon Scale Color"}),E.jsxs("div",{className:"color-picker-row",children:[E.jsx("input",{type:"color",value:M,onChange:X=>Qe(X.target.value),className:"color-picker"}),E.jsx("input",{type:"text",value:M,onChange:X=>Qe(X.target.value),className:"color-input",placeholder:"#66BB6A"})]})]}),E.jsxs("div",{className:"theme-preview card",children:[E.jsx("p",{className:"preview-label",children:"Preview"}),E.jsxs("div",{className:"preview-content",children:[E.jsx("div",{className:"preview-text",children:"Sample text"}),E.jsx("button",{className:"btn btn-primary",children:"Button"}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress-bar-fill success",style:{width:"60%"}})})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Statistics"}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.total_meals_logged||0}),E.jsx("span",{className:"stat-label",children:"Meals logged"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.current_streak_days||0}),E.jsx("span",{className:"stat-label",children:"Day streak "})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:(d?.length||0)+(p?.length||0)}),E.jsx("span",{className:"stat-label",children:"In hoard"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.badges?.length||0}),E.jsx("span",{className:"stat-label",children:"Badges"})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Intelligence"}),E.jsx("p",{className:"text-muted mb-md",children:"Connect your dragon to Google's AI to automatically analyze meals from text descriptions or photos."}),ee==="saved"?E.jsxs("div",{className:"api-key-status",children:[E.jsx("div",{className:"status-badge success",children:E.jsx("span",{children:" AI Connected"})}),E.jsx("p",{className:"text-muted text-sm mt-sm",children:"Your dragon can analyze meals. Key stored locally on this device."}),E.jsx("button",{className:"btn btn-secondary btn-danger-outline mt-sm",onClick:Z,children:" Remove API Key"})]}):E.jsxs("div",{className:"api-key-form",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Google AI Studio API Key"}),E.jsxs("div",{className:"input-with-toggle",children:[E.jsx("input",{type:Q?"text":"password",value:B,onChange:X=>W(X.target.value),placeholder:"AIza...",className:"api-key-input"}),E.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>re(!Q),children:Q?"":""})]}),E.jsxs("p",{className:"input-help",children:["Get your free key at"," ",E.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio "})]})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:H,disabled:!B.trim(),children:" Save API Key"})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" About"}),E.jsxs("p",{className:"text-center text-muted",children:["Purine Control v1.0.0",E.jsx("br",{}),`"The Dragon Keeper's Nutrition Tracker"`]}),E.jsx("p",{className:"text-center text-muted mt-md",children:"Made with  for your dragon"})]})]})}const nP=[{id:"default-1",name:"Water Glass",capacity_ml:250,icon:"",type:"container"},{id:"default-2",name:"Water Bottle",capacity_ml:500,icon:"",type:"container"},{id:"default-3",name:"Dragon Chalice",capacity_ml:750,icon:"",type:"container"}],iP=[{key:"meals",label:" Saved Meals",icon:""},{key:"bottles",label:" Bottles",icon:""}],oP=["","","","","","","",""];function sP(){const t=Yl(),[e,i]=eA(),o=e.get("tab")||"meals",[r,l]=U.useState(o),[c,d]=U.useState(""),[p,h]=U.useState(!1),[y,_]=U.useState(null),[T,C]=U.useState(""),[b,M]=U.useState(""),[w,R]=U.useState(250),[D,P]=U.useState({calories:0,purines:0,protein:0,carbs:0,fat:0}),{savedMeals:J,bottles:B,isLoading:W,addToStash:Q,removeFromStash:re,updateStashItem:ee}=$f(),{adjustHydration:le}=k_(),{addMeal:pe}=L_(),oe=[...nP,...B],be=G=>{l(G),i({tab:G})},Ye=async G=>{const j=G.capacity_ml||G.amount_ml;await le(j),alert(`Added ${j}ml to hydration! `)},Qe=async G=>{await pe({meal_type:"snack",meal_name:G.name,ingredients:G.ingredients||[],total_nutrients:G.total_nutrients||{}}),G.id&&!G.id.startsWith("default-")&&await ee(G.id,{use_count:(G.use_count||0)+1}),alert(`${G.name} added to diary! `),t("/")},H=async G=>{confirm("Remove this item from your hoard?")&&await re(G)},Z=()=>{C(""),M(""),R(250),P({calories:0,purines:0,protein:0,carbs:0,fat:0}),_(null),h(!1)},ie=()=>{Z(),h(!0)},X=G=>{_(G),C(G.name||""),M(G.icon||""),R(G.capacity_ml||G.amount_ml||250),P(G.nutrients||G.total_nutrients||{calories:0,purines:0,protein:0,carbs:0,fat:0}),h(!0)},ce=async()=>{if(!T.trim()){alert("Please enter a name");return}const G=y?.id?.startsWith("default-");if(y&&!G){const j={name:T};r==="bottles"&&(j.icon=b,j.capacity_ml=w),await ee(y.id,j),alert("Item updated! ")}else{const j=r==="meals"?"meal":"container",fe={type:j,name:T,icon:b,capacity_ml:j==="container"?w:void 0,ingredients:j==="meal"?y?.ingredients||[]:void 0,total_nutrients:j==="meal"?D:void 0,use_count:0};await Q(fe),alert(G?"Custom bottle created! ":"Added to your hoard! ")}Z()},x=J.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase())),F=oe.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase()));return W?E.jsxs("div",{className:"page stash-page",children:[E.jsx(ki,{title:"Dragon's Hoard",subtitle:"Loading...",showBack:!0,onBack:()=>t("/settings")}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the hoard..."})]})]}):E.jsxs("div",{className:"page stash-page",children:[E.jsx(ki,{title:"Dragon's Hoard",subtitle:"Your saved meals and custom ingredients",showBack:!0,onBack:()=>t("/settings")}),E.jsx("div",{className:"stash-tabs",children:iP.map(G=>E.jsx("button",{className:`stash-tab ${r===G.key?"active":""}`,onClick:()=>be(G.key),children:G.label},G.key))}),E.jsx("div",{className:"stash-search",children:E.jsx("input",{type:"text",placeholder:`Search ${r==="meals"?"meals":"ingredients"}...`,value:c,onChange:G=>d(G.target.value)})}),r==="meals"&&E.jsxs("section",{className:"stash-content",children:[x.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No saved meals yet!"}),E.jsx("p",{className:"text-muted",children:"Save meals from your diary to reuse them."})]}):E.jsx("div",{className:"stash-list",children:x.map(G=>E.jsxs("div",{className:"stash-item card",children:[E.jsxs("div",{className:"stash-item-header",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"use-count",children:["Used ",G.use_count||0,"x"]})]}),E.jsx("p",{className:"stash-item-ingredients",children:Array.isArray(G.ingredients)?G.ingredients.map(j=>typeof j=="string"?j:j.name).join(", "):"No ingredients"}),E.jsxs("div",{className:"stash-item-nutrients",children:[E.jsxs("span",{children:[" ",G.total_nutrients?.calories||0," cal"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.purines||0,"mg"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.protein||0,"g"]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Qe(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>H(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ie,children:" Create New Meal"})]}),r==="bottles"&&E.jsxs("section",{className:"stash-content",children:[E.jsx("p",{className:"text-muted",children:"Custom hydration containers for quick logging."}),F.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No custom bottles yet!"}),E.jsx("p",{className:"text-muted",children:"Add your favorite containers."})]}):E.jsx("div",{className:"stash-list",children:F.map(G=>E.jsxs("div",{className:"stash-item card bottle-item",children:[E.jsxs("div",{className:"bottle-info",children:[E.jsx("span",{className:"bottle-icon",children:G.icon||""}),E.jsxs("div",{className:"bottle-details",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"bottle-amount",children:[G.capacity_ml||G.amount_ml," ml"]})]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Ye(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:""}),!G.id.startsWith("default-")&&E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>H(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ie,children:" Add Custom Bottle"})]}),p&&E.jsx("div",{className:"modal-overlay",onClick:Z,children:E.jsxs("div",{className:"modal-content card",onClick:G=>G.stopPropagation(),children:[E.jsxs("h2",{children:[y?" Edit":" Create"," ",r==="meals"?"Meal":r==="ingredients"?"Ingredient":"Bottle"]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:T,onChange:G=>C(G.target.value),placeholder:`e.g., ${r==="meals"?"Chicken Salad":r==="ingredients"?"Olive Oil":"Sports Bottle"}`})]}),r==="bottles"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Icon"}),E.jsx("div",{className:"icon-picker",children:oP.map(G=>E.jsx("button",{type:"button",className:`icon-btn ${b===G?"active":""}`,onClick:()=>M(G),children:G},G))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Capacity (ml)"}),E.jsx("input",{type:"number",value:w,onChange:G=>R(parseInt(G.target.value)||0),min:"0",step:"50"})]})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:Z,children:"Cancel"}),E.jsxs("button",{className:"btn btn-primary",onClick:ce,children:[" ",y?"Update":"Save"]})]})]})})]})}function rP(){return E.jsx(dR,{children:E.jsx(XC,{basename:"/purine-control",children:E.jsxs("div",{className:"app",children:[E.jsxs(MC,{children:[E.jsx(ss,{path:"/",element:E.jsx(WU,{})}),E.jsx(ss,{path:"/charts",element:E.jsx(jU,{})}),E.jsx(ss,{path:"/oracle",element:E.jsx(eP,{})}),E.jsx(ss,{path:"/settings",element:E.jsx(tP,{})}),E.jsx(ss,{path:"/stash",element:E.jsx(sP,{})})]}),E.jsx(hR,{})]})})})}LE.createRoot(document.getElementById("root")).render(E.jsx(U.StrictMode,{children:E.jsx(rP,{})}));
