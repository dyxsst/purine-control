(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var jc={exports:{}},fr={};var Ug;function vE(){if(Ug)return fr;Ug=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return fr.Fragment=e,fr.jsx=i,fr.jsxs=i,fr}var Pg;function _E(){return Pg||(Pg=1,jc.exports=vE()),jc.exports}var C=_E(),ef={exports:{}},de={};var Lg;function TE(){if(Lg)return de;Lg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function R(x,Y,q){this.props=x,this.context=Y,this.refs=w,this.updater=q||b}R.prototype.isReactComponent={},R.prototype.setState=function(x,Y){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,Y,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function D(){}D.prototype=R.prototype;function U(x,Y,q){this.props=x,this.context=Y,this.refs=w,this.updater=q||b}var J=U.prototype=new D;J.constructor=U,M(J,R.prototype),J.isPureReactComponent=!0;var B=Array.isArray;function X(){}var K={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function j(x,Y,q){var W=q.ref;return{$$typeof:t,type:x,key:Y,ref:W!==void 0?W:null,props:q}}function ue(x,Y){return j(x.type,Y,x.props)}function me(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function re(x){var Y={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(q){return Y[q]})}var Ae=/\/+/g;function We(x,Y){return typeof x=="object"&&x!==null&&x.key!=null?re(""+x.key):Y.toString(36)}function Ke(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(X,X):(x.status="pending",x.then(function(Y){x.status==="pending"&&(x.status="fulfilled",x.value=Y)},function(Y){x.status==="pending"&&(x.status="rejected",x.reason=Y)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function V(x,Y,q,W,fe){var ge=typeof x;(ge==="undefined"||ge==="boolean")&&(x=null);var be=!1;if(x===null)be=!0;else switch(ge){case"bigint":case"string":case"number":be=!0;break;case"object":switch(x.$$typeof){case t:case e:be=!0;break;case y:return be=x._init,V(be(x._payload),Y,q,W,fe)}}if(be)return fe=fe(x),be=W===""?"."+We(x,0):W,B(fe)?(q="",be!=null&&(q=be.replace(Ae,"$&/")+"/"),V(fe,Y,q,"",function(Di){return Di})):fe!=null&&(me(fe)&&(fe=ue(fe,q+(fe.key==null||x&&x.key===fe.key?"":(""+fe.key).replace(Ae,"$&/")+"/")+be)),Y.push(fe)),1;be=0;var rt=W===""?".":W+":";if(B(x))for(var Be=0;Be<x.length;Be++)W=x[Be],ge=rt+We(W,Be),be+=V(W,Y,q,ge,fe);else if(Be=E(x),typeof Be=="function")for(x=Be.call(x),Be=0;!(W=x.next()).done;)W=W.value,ge=rt+We(W,Be++),be+=V(W,Y,q,ge,fe);else if(ge==="object"){if(typeof x.then=="function")return V(Ke(x),Y,q,W,fe);throw Y=String(x),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return be}function Z(x,Y,q){if(x==null)return x;var W=[],fe=0;return V(x,W,"","",function(ge){return Y.call(q,ge,fe++)}),W}function ae(x){if(x._status===-1){var Y=x._result;Y=Y(),Y.then(function(q){(x._status===0||x._status===-1)&&(x._status=1,x._result=q)},function(q){(x._status===0||x._status===-1)&&(x._status=2,x._result=q)}),x._status===-1&&(x._status=0,x._result=Y)}if(x._status===1)return x._result.default;throw x._result}var Q=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},ne={map:Z,forEach:function(x,Y,q){Z(x,function(){Y.apply(this,arguments)},q)},count:function(x){var Y=0;return Z(x,function(){Y++}),Y},toArray:function(x){return Z(x,function(Y){return Y})||[]},only:function(x){if(!me(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return de.Activity=_,de.Children=ne,de.Component=R,de.Fragment=i,de.Profiler=r,de.PureComponent=U,de.StrictMode=o,de.Suspense=p,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,de.__COMPILER_RUNTIME={__proto__:null,c:function(x){return K.H.useMemoCache(x)}},de.cache=function(x){return function(){return x.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(x,Y,q){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var W=M({},x.props),fe=x.key;if(Y!=null)for(ge in Y.key!==void 0&&(fe=""+Y.key),Y)!se.call(Y,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&Y.ref===void 0||(W[ge]=Y[ge]);var ge=arguments.length-2;if(ge===1)W.children=q;else if(1<ge){for(var be=Array(ge),rt=0;rt<ge;rt++)be[rt]=arguments[rt+2];W.children=be}return j(x.type,fe,W)},de.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},de.createElement=function(x,Y,q){var W,fe={},ge=null;if(Y!=null)for(W in Y.key!==void 0&&(ge=""+Y.key),Y)se.call(Y,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(fe[W]=Y[W]);var be=arguments.length-2;if(be===1)fe.children=q;else if(1<be){for(var rt=Array(be),Be=0;Be<be;Be++)rt[Be]=arguments[Be+2];fe.children=rt}if(x&&x.defaultProps)for(W in be=x.defaultProps,be)fe[W]===void 0&&(fe[W]=be[W]);return j(x,ge,fe)},de.createRef=function(){return{current:null}},de.forwardRef=function(x){return{$$typeof:f,render:x}},de.isValidElement=me,de.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:ae}},de.memo=function(x,Y){return{$$typeof:h,type:x,compare:Y===void 0?null:Y}},de.startTransition=function(x){var Y=K.T,q={};K.T=q;try{var W=x(),fe=K.S;fe!==null&&fe(q,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(X,Q)}catch(ge){Q(ge)}finally{Y!==null&&q.types!==null&&(Y.types=q.types),K.T=Y}},de.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},de.use=function(x){return K.H.use(x)},de.useActionState=function(x,Y,q){return K.H.useActionState(x,Y,q)},de.useCallback=function(x,Y){return K.H.useCallback(x,Y)},de.useContext=function(x){return K.H.useContext(x)},de.useDebugValue=function(){},de.useDeferredValue=function(x,Y){return K.H.useDeferredValue(x,Y)},de.useEffect=function(x,Y){return K.H.useEffect(x,Y)},de.useEffectEvent=function(x){return K.H.useEffectEvent(x)},de.useId=function(){return K.H.useId()},de.useImperativeHandle=function(x,Y,q){return K.H.useImperativeHandle(x,Y,q)},de.useInsertionEffect=function(x,Y){return K.H.useInsertionEffect(x,Y)},de.useLayoutEffect=function(x,Y){return K.H.useLayoutEffect(x,Y)},de.useMemo=function(x,Y){return K.H.useMemo(x,Y)},de.useOptimistic=function(x,Y){return K.H.useOptimistic(x,Y)},de.useReducer=function(x,Y,q){return K.H.useReducer(x,Y,q)},de.useRef=function(x){return K.H.useRef(x)},de.useState=function(x){return K.H.useState(x)},de.useSyncExternalStore=function(x,Y,q){return K.H.useSyncExternalStore(x,Y,q)},de.useTransition=function(){return K.H.useTransition()},de.version="19.2.0",de}var kg;function id(){return kg||(kg=1,ef.exports=TE()),ef.exports}var L=id(),tf={exports:{}},dr={},nf={exports:{}},of={};var Og;function SE(){return Og||(Og=1,(function(t){function e(V,Z){var ae=V.length;V.push(Z);e:for(;0<ae;){var Q=ae-1>>>1,ne=V[Q];if(0<r(ne,Z))V[Q]=Z,V[ae]=ne,ae=Q;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var Z=V[0],ae=V.pop();if(ae!==Z){V[0]=ae;e:for(var Q=0,ne=V.length,x=ne>>>1;Q<x;){var Y=2*(Q+1)-1,q=V[Y],W=Y+1,fe=V[W];if(0>r(q,ae))W<ne&&0>r(fe,q)?(V[Q]=fe,V[W]=ae,Q=W):(V[Q]=q,V[Y]=ae,Q=Y);else if(W<ne&&0>r(fe,ae))V[Q]=fe,V[W]=ae,Q=W;else break e}}return Z}function r(V,Z){var ae=V.sortIndex-Z.sortIndex;return ae!==0?ae:V.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],h=[],y=1,_=null,T=3,E=!1,b=!1,M=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function J(V){for(var Z=i(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=V)o(h),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=i(h)}}function B(V){if(M=!1,J(V),!b)if(i(p)!==null)b=!0,X||(X=!0,re());else{var Z=i(h);Z!==null&&Ke(B,Z.startTime-V)}}var X=!1,K=-1,se=5,j=-1;function ue(){return w?!0:!(t.unstable_now()-j<se)}function me(){if(w=!1,X){var V=t.unstable_now();j=V;var Z=!0;try{e:{b=!1,M&&(M=!1,D(K),K=-1),E=!0;var ae=T;try{t:{for(J(V),_=i(p);_!==null&&!(_.expirationTime>V&&ue());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,T=_.priorityLevel;var ne=Q(_.expirationTime<=V);if(V=t.unstable_now(),typeof ne=="function"){_.callback=ne,J(V),Z=!0;break t}_===i(p)&&o(p),J(V)}else o(p);_=i(p)}if(_!==null)Z=!0;else{var x=i(h);x!==null&&Ke(B,x.startTime-V),Z=!1}}break e}finally{_=null,T=ae,E=!1}Z=void 0}}finally{Z?re():X=!1}}}var re;if(typeof U=="function")re=function(){U(me)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,We=Ae.port2;Ae.port1.onmessage=me,re=function(){We.postMessage(null)}}else re=function(){R(me,0)};function Ke(V,Z){K=R(function(){V(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var ae=T;T=Z;try{return V()}finally{T=ae}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ae=T;T=V;try{return Z()}finally{T=ae}},t.unstable_scheduleCallback=function(V,Z,ae){var Q=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Q+ae:Q):ae=Q,V){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ae+ne,V={id:y++,callback:Z,priorityLevel:V,startTime:ae,expirationTime:ne,sortIndex:-1},ae>Q?(V.sortIndex=ae,e(h,V),i(p)===null&&V===i(h)&&(M?(D(K),K=-1):M=!0,Ke(B,ae-Q))):(V.sortIndex=ne,e(p,V),b||E||(b=!0,X||(X=!0,re()))),V},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(V){var Z=T;return function(){var ae=T;T=Z;try{return V.apply(this,arguments)}finally{T=ae}}}})(of)),of}var qg;function EE(){return qg||(qg=1,nf.exports=SE()),nf.exports}var sf={exports:{}},_t={};var Gg;function CE(){if(Gg)return _t;Gg=1;var t=id();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,_t.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,y)},_t.flushSync=function(p){var h=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=h,o.p=y,o.d.f()}},_t.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(p,h))},_t.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},_t.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?o.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_t.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=f(h.as,h.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(p)},_t.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_t.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=f(h.as,h.crossOrigin);o.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(p)},_t.requestFormReset=function(p){o.d.r(p)},_t.unstable_batchedUpdates=function(p,h){return p(h)},_t.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.2.0",_t}var Hg;function AE(){if(Hg)return sf.exports;Hg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sf.exports=CE(),sf.exports}var Vg;function bE(){if(Vg)return dr;Vg=1;var t=EE(),e=id(),i=AE();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var a=n,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var S=!1,A=g.child;A;){if(A===a){S=!0,a=g,u=v;break}if(A===u){S=!0,u=g,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,u=g;break}if(A===u){S=!0,u=v,a=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function re(n){return n===null||typeof n!="object"?null:(n=me&&n[me]||n["@@iterator"],typeof n=="function"?n:null)}var Ae=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case X:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case U:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case K:return s=n.displayName||null,s!==null?s:We(n.type)||"Memo";case se:s=n._payload,n=n._init;try{return We(n(s))}catch{}}return null}var Ke=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Q=[],ne=-1;function x(n){return{current:n}}function Y(n){0>ne||(n.current=Q[ne],Q[ne]=null,ne--)}function q(n,s){ne++,Q[ne]=n.current,n.current=s}var W=x(null),fe=x(null),ge=x(null),be=x(null);function rt(n,s){switch(q(ge,s),q(fe,n),q(W,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?ng(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=ng(s),n=ig(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(W),q(W,n)}function Be(){Y(W),Y(fe),Y(ge)}function Di(n){n.memoizedState!==null&&q(be,n);var s=W.current,a=ig(s,n.type);s!==a&&(q(fe,n),q(W,a))}function ro(n){fe.current===n&&(Y(W),Y(fe)),be.current===n&&(Y(be),ar._currentValue=ae)}var gs,ys;function Sn(n){if(gs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);gs=s&&s[1]||"",ys=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gs+n+ys}var Hr=!1;function vs(n,s){if(!n||Hr)return"";Hr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var G=H}Reflect.construct(n,[],$)}else{try{$.call()}catch(H){G=H}n.call($.prototype)}}else{try{throw Error()}catch(H){G=H}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&G&&typeof H.stack=="string")return[H.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],A=v[1];if(S&&A){var N=S.split(`
`),O=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===O.length)for(u=N.length-1,g=O.length-1;1<=u&&0<=g&&N[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==O[g]){var z=`
`+N[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=g);break}}}finally{Hr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Sn(a):""}function te(n,s){switch(n.tag){case 26:case 27:case 5:return Sn(n.type);case 16:return Sn("Lazy");case 13:return n.child!==s&&s!==null?Sn("Suspense Fallback"):Sn("Suspense");case 19:return Sn("SuspenseList");case 0:case 15:return vs(n.type,!1);case 11:return vs(n.type.render,!1);case 1:return vs(n.type,!0);case 31:return Sn("Activity");default:return""}}function Ye(n){try{var s="",a=null;do s+=te(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var En=Object.prototype.hasOwnProperty,ao=t.unstable_scheduleCallback,Hl=t.unstable_cancelCallback,X_=t.unstable_shouldYield,Z_=t.unstable_requestPaint,Pt=t.unstable_now,W_=t.unstable_getCurrentPriorityLevel,Pd=t.unstable_ImmediatePriority,Ld=t.unstable_UserBlockingPriority,Vr=t.unstable_NormalPriority,j_=t.unstable_LowPriority,kd=t.unstable_IdlePriority,eT=t.log,tT=t.unstable_setDisableYieldValue,_s=null,Lt=null;function ei(n){if(typeof eT=="function"&&tT(n),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(_s,n)}catch{}}var kt=Math.clz32?Math.clz32:oT,nT=Math.log,iT=Math.LN2;function oT(n){return n>>>=0,n===0?32:31-(nT(n)/iT|0)|0}var zr=256,Br=262144,Fr=4194304;function Ui(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Yr(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?g=Ui(u):(S&=A,S!==0?g=Ui(S):a||(a=A&~n,a!==0&&(g=Ui(a))))):(A=u&~v,A!==0?g=Ui(A):S!==0?g=Ui(S):a||(a=u&~n,a!==0&&(g=Ui(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function Ts(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function sT(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Od(){var n=Fr;return Fr<<=1,(Fr&62914560)===0&&(Fr=4194304),n}function Vl(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ss(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function rT(n,s,a,u,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,N=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var z=31-kt(a),$=1<<z;A[z]=0,N[z]=-1;var G=O[z];if(G!==null)for(O[z]=null,z=0;z<G.length;z++){var H=G[z];H!==null&&(H.lane&=-536870913)}a&=~$}u!==0&&qd(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function qd(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-kt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Gd(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-kt(a),g=1<<u;g&s|n[u]&s&&(n[u]|=s),a&=~g}}function Hd(n,s){var a=s&-s;return a=(a&42)!==0?1:zl(a),(a&(n.suspendedLanes|s))!==0?0:a}function zl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Vd(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:Mg(n.type))}function zd(n,s){var a=Z.p;try{return Z.p=n,s()}finally{Z.p=a}}var ti=Math.random().toString(36).slice(2),ft="__reactFiber$"+ti,Ct="__reactProps$"+ti,lo="__reactContainer$"+ti,Fl="__reactEvents$"+ti,aT="__reactListeners$"+ti,lT="__reactHandles$"+ti,Bd="__reactResources$"+ti,Es="__reactMarker$"+ti;function Yl(n){delete n[ft],delete n[Ct],delete n[Fl],delete n[aT],delete n[lT]}function uo(n){var s=n[ft];if(s)return s;for(var a=n.parentNode;a;){if(s=a[lo]||a[ft]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=cg(n);n!==null;){if(a=n[ft])return a;n=cg(n)}return s}n=a,a=n.parentNode}return null}function co(n){if(n=n[ft]||n[lo]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Cs(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function fo(n){var s=n[Bd];return s||(s=n[Bd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function at(n){n[Es]=!0}var Fd=new Set,Yd={};function Pi(n,s){ho(n,s),ho(n+"Capture",s)}function ho(n,s){for(Yd[n]=s,n=0;n<s.length;n++)Fd.add(s[n])}var uT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$d={},Jd={};function cT(n){return En.call(Jd,n)?!0:En.call($d,n)?!1:uT.test(n)?Jd[n]=!0:($d[n]=!0,!1)}function $r(n,s,a){if(cT(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Jr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Cn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function $t(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Kd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fT(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $l(n){if(!n._valueTracker){var s=Kd(n)?"checked":"value";n._valueTracker=fT(n,s,""+n[s])}}function Qd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=Kd(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function Kr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var dT=/[\n"\\]/g;function Jt(n){return n.replace(dT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Jl(n,s,a,u,g,v,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+$t(s)):n.value!==""+$t(s)&&(n.value=""+$t(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?Kl(n,S,$t(s)):a!=null?Kl(n,S,$t(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+$t(A):n.removeAttribute("name")}function Xd(n,s,a,u,g,v,S,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){$l(n);return}a=a!=null?""+$t(a):"",s=s!=null?""+$t(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),$l(n)}function Kl(n,s,a){s==="number"&&Kr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function po(n,s,a,u){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+$t(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Zd(n,s,a){if(s!=null&&(s=""+$t(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+$t(a):""}function Wd(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(Ke(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=$t(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),$l(n)}function mo(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var hT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jd(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||hT.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function eh(n,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&jd(n,g,u)}else for(var v in s)s.hasOwnProperty(v)&&jd(n,v,s[v])}function Ql(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(n){return mT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function An(){}var Xl=null;function Zl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var go=null,yo=null;function th(n){var s=co(n);if(s&&(n=s.stateNode)){var a=n[Ct]||null;e:switch(n=s.stateNode,s.type){case"input":if(Jl(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var g=u[Ct]||null;if(!g)throw Error(o(90));Jl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&Qd(u)}break e;case"textarea":Zd(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&po(n,!!a.multiple,s,!1)}}}var Wl=!1;function nh(n,s,a){if(Wl)return n(s,a);Wl=!0;try{var u=n(s);return u}finally{if(Wl=!1,(go!==null||yo!==null)&&(ka(),go&&(s=go,n=yo,yo=go=null,th(s),n)))for(s=0;s<n.length;s++)th(n[s])}}function As(n,s){var a=n.stateNode;if(a===null)return null;var u=a[Ct]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=!1;if(bn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){jl=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{jl=!1}var ni=null,eu=null,Xr=null;function ih(){if(Xr)return Xr;var n,s=eu,a=s.length,u,g="value"in ni?ni.value:ni.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&s[a-u]===g[v-u];u++);return Xr=g.slice(n,1<u?1-u:void 0)}function Zr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Wr(){return!0}function oh(){return!1}function At(n){function s(a,u,g,v,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Wr:oh,this.isPropagationStopped=oh,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),s}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=At(Li),Ms=_({},Li,{view:0,detail:0}),gT=At(Ms),tu,nu,ws,ea=_({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ws&&(ws&&n.type==="mousemove"?(tu=n.screenX-ws.screenX,nu=n.screenY-ws.screenY):nu=tu=0,ws=n),tu)},movementY:function(n){return"movementY"in n?n.movementY:nu}}),sh=At(ea),yT=_({},ea,{dataTransfer:0}),vT=At(yT),_T=_({},Ms,{relatedTarget:0}),iu=At(_T),TT=_({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),ST=At(TT),ET=_({},Li,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),CT=At(ET),AT=_({},Li,{data:0}),rh=At(AT),bT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RT(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=wT[n])?!!s[n]:!1}function ou(){return RT}var NT=_({},Ms,{key:function(n){if(n.key){var s=bT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Zr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?MT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(n){return n.type==="keypress"?Zr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),xT=At(NT),IT=_({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ah=At(IT),DT=_({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),UT=At(DT),PT=_({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=At(PT),kT=_({},ea,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),OT=At(kT),qT=_({},Li,{newState:0,oldState:0}),GT=At(qT),HT=[9,13,27,32],su=bn&&"CompositionEvent"in window,Rs=null;bn&&"documentMode"in document&&(Rs=document.documentMode);var VT=bn&&"TextEvent"in window&&!Rs,lh=bn&&(!su||Rs&&8<Rs&&11>=Rs),uh=" ",ch=!1;function fh(n,s){switch(n){case"keyup":return HT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vo=!1;function zT(n,s){switch(n){case"compositionend":return dh(s);case"keypress":return s.which!==32?null:(ch=!0,uh);case"textInput":return n=s.data,n===uh&&ch?null:n;default:return null}}function BT(n,s){if(vo)return n==="compositionend"||!su&&fh(n,s)?(n=ih(),Xr=eu=ni=null,vo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lh&&s.locale!=="ko"?null:s.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!FT[n.type]:s==="textarea"}function ph(n,s,a,u){go?yo?yo.push(u):yo=[u]:go=u,s=Ba(s,"onChange"),0<s.length&&(a=new jr("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Ns=null,xs=null;function YT(n){Xm(n,0)}function ta(n){var s=Cs(n);if(Qd(s))return n}function mh(n,s){if(n==="change")return s}var gh=!1;if(bn){var ru;if(bn){var au="oninput"in document;if(!au){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),au=typeof yh.oninput=="function"}ru=au}else ru=!1;gh=ru&&(!document.documentMode||9<document.documentMode)}function vh(){Ns&&(Ns.detachEvent("onpropertychange",_h),xs=Ns=null)}function _h(n){if(n.propertyName==="value"&&ta(xs)){var s=[];ph(s,xs,n,Zl(n)),nh(YT,s)}}function $T(n,s,a){n==="focusin"?(vh(),Ns=s,xs=a,Ns.attachEvent("onpropertychange",_h)):n==="focusout"&&vh()}function JT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ta(xs)}function KT(n,s){if(n==="click")return ta(s)}function QT(n,s){if(n==="input"||n==="change")return ta(s)}function XT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ot=typeof Object.is=="function"?Object.is:XT;function Is(n,s){if(Ot(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!En.call(s,g)||!Ot(n[g],s[g]))return!1}return!0}function Th(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sh(n,s){var a=Th(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Th(a)}}function Eh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Eh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ch(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Kr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Kr(n.document)}return s}function lu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ZT=bn&&"documentMode"in document&&11>=document.documentMode,_o=null,uu=null,Ds=null,cu=!1;function Ah(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cu||_o==null||_o!==Kr(u)||(u=_o,"selectionStart"in u&&lu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ds&&Is(Ds,u)||(Ds=u,u=Ba(uu,"onSelect"),0<u.length&&(s=new jr("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=_o)))}function ki(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var To={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},fu={},bh={};bn&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Oi(n){if(fu[n])return fu[n];if(!To[n])return n;var s=To[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in bh)return fu[n]=s[a];return n}var Mh=Oi("animationend"),wh=Oi("animationiteration"),Rh=Oi("animationstart"),WT=Oi("transitionrun"),jT=Oi("transitionstart"),eS=Oi("transitioncancel"),Nh=Oi("transitionend"),xh=new Map,du="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");du.push("scrollEnd");function rn(n,s){xh.set(n,s),Pi(s,[n])}var na=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Kt=[],So=0,hu=0;function ia(){for(var n=So,s=hu=So=0;s<n;){var a=Kt[s];Kt[s++]=null;var u=Kt[s];Kt[s++]=null;var g=Kt[s];Kt[s++]=null;var v=Kt[s];if(Kt[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&Ih(a,g,v)}}function oa(n,s,a,u){Kt[So++]=n,Kt[So++]=s,Kt[So++]=a,Kt[So++]=u,hu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function pu(n,s,a,u){return oa(n,s,a,u),sa(n)}function qi(n,s){return oa(n,null,null,s),sa(n)}function Ih(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-kt(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function sa(n){if(50<er)throw er=0,Cc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Eo={};function tS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(n,s,a,u){return new tS(n,s,a,u)}function mu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mn(n,s){var a=n.alternate;return a===null?(a=qt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Dh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ra(n,s,a,u,g,v){var S=0;if(u=n,typeof n=="function")mu(n)&&(S=1);else if(typeof n=="string")S=rE(n,a,W.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=qt(31,a,s,g),n.elementType=j,n.lanes=v,n;case M:return Gi(a.children,g,v,s);case w:S=8,g|=24;break;case R:return n=qt(12,a,s,g|2),n.elementType=R,n.lanes=v,n;case B:return n=qt(13,a,s,g),n.elementType=B,n.lanes=v,n;case X:return n=qt(19,a,s,g),n.elementType=X,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case D:S=9;break e;case J:S=11;break e;case K:S=14;break e;case se:S=16,u=null;break e}S=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=qt(S,a,s,g),s.elementType=n,s.type=u,s.lanes=v,s}function Gi(n,s,a,u){return n=qt(7,n,u,s),n.lanes=a,n}function gu(n,s,a){return n=qt(6,n,null,s),n.lanes=a,n}function Uh(n){var s=qt(18,null,null,0);return s.stateNode=n,s}function yu(n,s,a){return s=qt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ph=new WeakMap;function Qt(n,s){if(typeof n=="object"&&n!==null){var a=Ph.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Ye(s)},Ph.set(n,s),s)}return{value:n,source:s,stack:Ye(s)}}var Co=[],Ao=0,aa=null,Us=0,Xt=[],Zt=0,ii=null,pn=1,mn="";function wn(n,s){Co[Ao++]=Us,Co[Ao++]=aa,aa=n,Us=s}function Lh(n,s,a){Xt[Zt++]=pn,Xt[Zt++]=mn,Xt[Zt++]=ii,ii=n;var u=pn;n=mn;var g=32-kt(u)-1;u&=~(1<<g),a+=1;var v=32-kt(s)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,pn=1<<32-kt(s)+g|a<<g|u,mn=v+n}else pn=1<<v|a<<g|u,mn=n}function vu(n){n.return!==null&&(wn(n,1),Lh(n,1,0))}function _u(n){for(;n===aa;)aa=Co[--Ao],Co[Ao]=null,Us=Co[--Ao],Co[Ao]=null;for(;n===ii;)ii=Xt[--Zt],Xt[Zt]=null,mn=Xt[--Zt],Xt[Zt]=null,pn=Xt[--Zt],Xt[Zt]=null}function kh(n,s){Xt[Zt++]=pn,Xt[Zt++]=mn,Xt[Zt++]=ii,pn=s.id,mn=s.overflow,ii=n}var dt=null,Oe=null,Ce=!1,oi=null,Wt=!1,Tu=Error(o(519));function si(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ps(Qt(s,n)),Tu}function Oh(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[ft]=n,s[Ct]=u,a){case"dialog":ve("cancel",s),ve("close",s);break;case"iframe":case"object":case"embed":ve("load",s);break;case"video":case"audio":for(a=0;a<nr.length;a++)ve(nr[a],s);break;case"source":ve("error",s);break;case"img":case"image":case"link":ve("error",s),ve("load",s);break;case"details":ve("toggle",s);break;case"input":ve("invalid",s),Xd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ve("invalid",s);break;case"textarea":ve("invalid",s),Wd(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||eg(s.textContent,a)?(u.popover!=null&&(ve("beforetoggle",s),ve("toggle",s)),u.onScroll!=null&&ve("scroll",s),u.onScrollEnd!=null&&ve("scrollend",s),u.onClick!=null&&(s.onclick=An),s=!0):s=!1,s||si(n,!0)}function qh(n){for(dt=n.return;dt;)switch(dt.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:dt=dt.return}}function bo(n){if(n!==dt)return!1;if(!Ce)return qh(n),Ce=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||qc(n.type,n.memoizedProps)),a=!a),a&&Oe&&si(n),qh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Oe=ug(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Oe=ug(n)}else s===27?(s=Oe,_i(n.type)?(n=Bc,Bc=null,Oe=n):Oe=s):Oe=dt?en(n.stateNode.nextSibling):null;return!0}function Hi(){Oe=dt=null,Ce=!1}function Su(){var n=oi;return n!==null&&(Rt===null?Rt=n:Rt.push.apply(Rt,n),oi=null),n}function Ps(n){oi===null?oi=[n]:oi.push(n)}var Eu=x(null),Vi=null,Rn=null;function ri(n,s,a){q(Eu,s._currentValue),s._currentValue=a}function Nn(n){n._currentValue=Eu.current,Y(Eu)}function Cu(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Au(n,s,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=g;for(var N=0;N<s.length;N++)if(A.context===s[N]){v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Cu(v.return,a,n),u||(S=null);break e}v=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),Cu(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Mo(n,s,a,u){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;Ot(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===be.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(ar):n=[ar])}g=g.return}n!==null&&Au(s,n,a,u),s.flags|=262144}function la(n){for(n=n.firstContext;n!==null;){if(!Ot(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zi(n){Vi=n,Rn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ht(n){return Gh(Vi,n)}function ua(n,s){return Vi===null&&zi(n),Gh(n,s)}function Gh(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Rn===null){if(n===null)throw Error(o(308));Rn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Rn=Rn.next=s;return a}var nS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},iS=t.unstable_scheduleCallback,oS=t.unstable_NormalPriority,je={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bu(){return{controller:new nS,data:new Map,refCount:0}}function Ls(n){n.refCount--,n.refCount===0&&iS(oS,function(){n.controller.abort()})}var ks=null,Mu=0,wo=0,Ro=null;function sS(n,s){if(ks===null){var a=ks=[];Mu=0,wo=Nc(),Ro={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Mu++,s.then(Hh,Hh),s}function Hh(){if(--Mu===0&&ks!==null){Ro!==null&&(Ro.status="fulfilled");var n=ks;ks=null,wo=0,Ro=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function rS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Vh=V.S;V.S=function(n,s){Am=Pt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&sS(n,s),Vh!==null&&Vh(n,s)};var Bi=x(null);function wu(){var n=Bi.current;return n!==null?n:ke.pooledCache}function ca(n,s){s===null?q(Bi,Bi.current):q(Bi,s.pool)}function zh(){var n=wu();return n===null?null:{parent:je._currentValue,pool:n}}var No=Error(o(460)),Ru=Error(o(474)),fa=Error(o(542)),da={then:function(){}};function Bh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Fh(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(An,An),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,$h(n),n;default:if(typeof s.status=="string")s.then(An,An);else{if(n=ke,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,$h(n),n}throw Yi=s,No}}function Fi(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Yi=a,No):a}}var Yi=null;function Yh(){if(Yi===null)throw Error(o(459));var n=Yi;return Yi=null,n}function $h(n){if(n===No||n===fa)throw Error(o(483))}var xo=null,Os=0;function ha(n){var s=Os;return Os+=1,xo===null&&(xo=[]),Fh(xo,n,s)}function qs(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function pa(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Jh(n){function s(P,I){if(n){var k=P.deletions;k===null?(P.deletions=[I],P.flags|=16):k.push(I)}}function a(P,I){if(!n)return null;for(;I!==null;)s(P,I),I=I.sibling;return null}function u(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function g(P,I){return P=Mn(P,I),P.index=0,P.sibling=null,P}function v(P,I,k){return P.index=k,n?(k=P.alternate,k!==null?(k=k.index,k<I?(P.flags|=67108866,I):k):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function S(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function A(P,I,k,F){return I===null||I.tag!==6?(I=gu(k,P.mode,F),I.return=P,I):(I=g(I,k),I.return=P,I)}function N(P,I,k,F){var le=k.type;return le===M?z(P,I,k.props.children,F,k.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===se&&Fi(le)===I.type)?(I=g(I,k.props),qs(I,k),I.return=P,I):(I=ra(k.type,k.key,k.props,null,P.mode,F),qs(I,k),I.return=P,I)}function O(P,I,k,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=yu(k,P.mode,F),I.return=P,I):(I=g(I,k.children||[]),I.return=P,I)}function z(P,I,k,F,le){return I===null||I.tag!==7?(I=Gi(k,P.mode,F,le),I.return=P,I):(I=g(I,k),I.return=P,I)}function $(P,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=gu(""+I,P.mode,k),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return k=ra(I.type,I.key,I.props,null,P.mode,k),qs(k,I),k.return=P,k;case b:return I=yu(I,P.mode,k),I.return=P,I;case se:return I=Fi(I),$(P,I,k)}if(Ke(I)||re(I))return I=Gi(I,P.mode,k,null),I.return=P,I;if(typeof I.then=="function")return $(P,ha(I),k);if(I.$$typeof===U)return $(P,ua(P,I),k);pa(P,I)}return null}function G(P,I,k,F){var le=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return le!==null?null:A(P,I,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return k.key===le?N(P,I,k,F):null;case b:return k.key===le?O(P,I,k,F):null;case se:return k=Fi(k),G(P,I,k,F)}if(Ke(k)||re(k))return le!==null?null:z(P,I,k,F,null);if(typeof k.then=="function")return G(P,I,ha(k),F);if(k.$$typeof===U)return G(P,I,ua(P,k),F);pa(P,k)}return null}function H(P,I,k,F,le){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return P=P.get(k)||null,A(I,P,""+F,le);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return P=P.get(F.key===null?k:F.key)||null,N(I,P,F,le);case b:return P=P.get(F.key===null?k:F.key)||null,O(I,P,F,le);case se:return F=Fi(F),H(P,I,k,F,le)}if(Ke(F)||re(F))return P=P.get(k)||null,z(I,P,F,le,null);if(typeof F.then=="function")return H(P,I,k,ha(F),le);if(F.$$typeof===U)return H(P,I,k,ua(I,F),le);pa(I,F)}return null}function ie(P,I,k,F){for(var le=null,Me=null,oe=I,pe=I=0,Se=null;oe!==null&&pe<k.length;pe++){oe.index>pe?(Se=oe,oe=null):Se=oe.sibling;var we=G(P,oe,k[pe],F);if(we===null){oe===null&&(oe=Se);break}n&&oe&&we.alternate===null&&s(P,oe),I=v(we,I,pe),Me===null?le=we:Me.sibling=we,Me=we,oe=Se}if(pe===k.length)return a(P,oe),Ce&&wn(P,pe),le;if(oe===null){for(;pe<k.length;pe++)oe=$(P,k[pe],F),oe!==null&&(I=v(oe,I,pe),Me===null?le=oe:Me.sibling=oe,Me=oe);return Ce&&wn(P,pe),le}for(oe=u(oe);pe<k.length;pe++)Se=H(oe,P,pe,k[pe],F),Se!==null&&(n&&Se.alternate!==null&&oe.delete(Se.key===null?pe:Se.key),I=v(Se,I,pe),Me===null?le=Se:Me.sibling=Se,Me=Se);return n&&oe.forEach(function(Ai){return s(P,Ai)}),Ce&&wn(P,pe),le}function ce(P,I,k,F){if(k==null)throw Error(o(151));for(var le=null,Me=null,oe=I,pe=I=0,Se=null,we=k.next();oe!==null&&!we.done;pe++,we=k.next()){oe.index>pe?(Se=oe,oe=null):Se=oe.sibling;var Ai=G(P,oe,we.value,F);if(Ai===null){oe===null&&(oe=Se);break}n&&oe&&Ai.alternate===null&&s(P,oe),I=v(Ai,I,pe),Me===null?le=Ai:Me.sibling=Ai,Me=Ai,oe=Se}if(we.done)return a(P,oe),Ce&&wn(P,pe),le;if(oe===null){for(;!we.done;pe++,we=k.next())we=$(P,we.value,F),we!==null&&(I=v(we,I,pe),Me===null?le=we:Me.sibling=we,Me=we);return Ce&&wn(P,pe),le}for(oe=u(oe);!we.done;pe++,we=k.next())we=H(oe,P,pe,we.value,F),we!==null&&(n&&we.alternate!==null&&oe.delete(we.key===null?pe:we.key),I=v(we,I,pe),Me===null?le=we:Me.sibling=we,Me=we);return n&&oe.forEach(function(yE){return s(P,yE)}),Ce&&wn(P,pe),le}function Le(P,I,k,F){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case E:e:{for(var le=k.key;I!==null;){if(I.key===le){if(le=k.type,le===M){if(I.tag===7){a(P,I.sibling),F=g(I,k.props.children),F.return=P,P=F;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===se&&Fi(le)===I.type){a(P,I.sibling),F=g(I,k.props),qs(F,k),F.return=P,P=F;break e}a(P,I);break}else s(P,I);I=I.sibling}k.type===M?(F=Gi(k.props.children,P.mode,F,k.key),F.return=P,P=F):(F=ra(k.type,k.key,k.props,null,P.mode,F),qs(F,k),F.return=P,P=F)}return S(P);case b:e:{for(le=k.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){a(P,I.sibling),F=g(I,k.children||[]),F.return=P,P=F;break e}else{a(P,I);break}else s(P,I);I=I.sibling}F=yu(k,P.mode,F),F.return=P,P=F}return S(P);case se:return k=Fi(k),Le(P,I,k,F)}if(Ke(k))return ie(P,I,k,F);if(re(k)){if(le=re(k),typeof le!="function")throw Error(o(150));return k=le.call(k),ce(P,I,k,F)}if(typeof k.then=="function")return Le(P,I,ha(k),F);if(k.$$typeof===U)return Le(P,I,ua(P,k),F);pa(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,I!==null&&I.tag===6?(a(P,I.sibling),F=g(I,k),F.return=P,P=F):(a(P,I),F=gu(k,P.mode,F),F.return=P,P=F),S(P)):a(P,I)}return function(P,I,k,F){try{Os=0;var le=Le(P,I,k,F);return xo=null,le}catch(oe){if(oe===No||oe===fa)throw oe;var Me=qt(29,oe,null,P.mode);return Me.lanes=F,Me.return=P,Me}finally{}}}var $i=Jh(!0),Kh=Jh(!1),ai=!1;function Nu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ui(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ne&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=sa(n),Ih(n,null,a),s}return oa(n,u,s,a),sa(n)}function Gs(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Gd(n,a)}}function Iu(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Du=!1;function Hs(){if(Du){var n=Ro;if(n!==null)throw n}}function Vs(n,s,a,u){Du=!1;var g=n.updateQueue;ai=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,O=N.next;N.next=null,S===null?v=O:S.next=O,S=N;var z=n.alternate;z!==null&&(z=z.updateQueue,A=z.lastBaseUpdate,A!==S&&(A===null?z.firstBaseUpdate=O:A.next=O,z.lastBaseUpdate=N))}if(v!==null){var $=g.baseState;S=0,z=O=N=null,A=v;do{var G=A.lane&-536870913,H=G!==A.lane;if(H?(Te&G)===G:(u&G)===G){G!==0&&G===wo&&(Du=!0),z!==null&&(z=z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ie=n,ce=A;G=s;var Le=a;switch(ce.tag){case 1:if(ie=ce.payload,typeof ie=="function"){$=ie.call(Le,$,G);break e}$=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ce.payload,G=typeof ie=="function"?ie.call(Le,$,G):ie,G==null)break e;$=_({},$,G);break e;case 2:ai=!0}}G=A.callback,G!==null&&(n.flags|=64,H&&(n.flags|=8192),H=g.callbacks,H===null?g.callbacks=[G]:H.push(G))}else H={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},z===null?(O=z=H,N=$):z=z.next=H,S|=G;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;H=A,A=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);z===null&&(N=$),g.baseState=N,g.firstBaseUpdate=O,g.lastBaseUpdate=z,v===null&&(g.shared.lanes=0),pi|=S,n.lanes=S,n.memoizedState=$}}function Qh(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function Xh(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Qh(a[n],s)}var Io=x(null),ma=x(0);function Zh(n,s){n=qn,q(ma,n),q(Io,s),qn=n|s.baseLanes}function Uu(){q(ma,qn),q(Io,Io.current)}function Pu(){qn=ma.current,Y(Io),Y(ma)}var Gt=x(null),jt=null;function ci(n){var s=n.alternate;q(Qe,Qe.current&1),q(Gt,n),jt===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(jt=n)}function Lu(n){q(Qe,Qe.current),q(Gt,n),jt===null&&(jt=n)}function Wh(n){n.tag===22?(q(Qe,Qe.current),q(Gt,n),jt===null&&(jt=n)):fi()}function fi(){q(Qe,Qe.current),q(Gt,Gt.current)}function Ht(n){Y(Gt),jt===n&&(jt=null),Y(Qe)}var Qe=x(0);function ga(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vc(a)||zc(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xn=0,he=null,Ue=null,et=null,ya=!1,Do=!1,Ji=!1,va=0,zs=0,Uo=null,aS=0;function $e(){throw Error(o(321))}function ku(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Ot(n[a],s[a]))return!1;return!0}function Ou(n,s,a,u,g,v){return xn=v,he=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?Lp:Wu,Ji=!1,v=a(u,g),Ji=!1,Do&&(v=ep(s,a,u,g)),jh(n),v}function jh(n){V.H=Ys;var s=Ue!==null&&Ue.next!==null;if(xn=0,et=Ue=he=null,ya=!1,zs=0,Uo=null,s)throw Error(o(300));n===null||tt||(n=n.dependencies,n!==null&&la(n)&&(tt=!0))}function ep(n,s,a,u){he=n;var g=0;do{if(Do&&(Uo=null),zs=0,Do=!1,25<=g)throw Error(o(301));if(g+=1,et=Ue=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}V.H=kp,v=s(a,u)}while(Do);return v}function lS(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?Bs(s):s,n=n.useState()[0],(Ue!==null?Ue.memoizedState:null)!==n&&(he.flags|=1024),s}function qu(){var n=va!==0;return va=0,n}function Gu(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Hu(n){if(ya){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ya=!1}xn=0,et=Ue=he=null,Do=!1,zs=va=0,Uo=null}function St(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?he.memoizedState=et=n:et=et.next=n,et}function Xe(){if(Ue===null){var n=he.alternate;n=n!==null?n.memoizedState:null}else n=Ue.next;var s=et===null?he.memoizedState:et.next;if(s!==null)et=s,Ue=n;else{if(n===null)throw he.alternate===null?Error(o(467)):Error(o(310));Ue=n,n={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},et===null?he.memoizedState=et=n:et=et.next=n}return et}function _a(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bs(n){var s=zs;return zs+=1,Uo===null&&(Uo=[]),n=Fh(Uo,n,s),s=he,(et===null?s.memoizedState:et.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Lp:Wu),n}function Ta(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Bs(n);if(n.$$typeof===U)return ht(n)}throw Error(o(438,String(n)))}function Vu(n){var s=null,a=he.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=he.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=_a(),he.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=ue;return s.index++,a}function In(n,s){return typeof s=="function"?s(n):s}function Sa(n){var s=Xe();return zu(s,Ue,n)}function zu(n,s,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var A=S=null,N=null,O=s,z=!1;do{var $=O.lane&-536870913;if($!==O.lane?(Te&$)===$:(xn&$)===$){var G=O.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===wo&&(z=!0);else if((xn&G)===G){O=O.next,G===wo&&(z=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=$,S=v):N=N.next=$,he.lanes|=G,pi|=G;$=O.action,Ji&&a(v,$),v=O.hasEagerState?O.eagerState:a(v,$)}else G={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=G,S=v):N=N.next=G,he.lanes|=$,pi|=$;O=O.next}while(O!==null&&O!==s);if(N===null?S=v:N.next=A,!Ot(v,n.memoizedState)&&(tt=!0,z&&(a=Ro,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=N,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Bu(n){var s=Xe(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);Ot(v,s.memoizedState)||(tt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function tp(n,s,a){var u=he,g=Xe(),v=Ce;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!Ot((Ue||g).memoizedState,a);if(S&&(g.memoizedState=a,tt=!0),g=g.queue,$u(op.bind(null,u,g,n),[n]),g.getSnapshot!==s||S||et!==null&&et.memoizedState.tag&1){if(u.flags|=2048,Po(9,{destroy:void 0},ip.bind(null,u,g,a,s),null),ke===null)throw Error(o(349));v||(xn&127)!==0||np(u,s,a)}return a}function np(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=he.updateQueue,s===null?(s=_a(),he.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ip(n,s,a,u){s.value=a,s.getSnapshot=u,sp(s)&&rp(n)}function op(n,s,a){return a(function(){sp(s)&&rp(n)})}function sp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Ot(n,a)}catch{return!0}}function rp(n){var s=qi(n,2);s!==null&&Nt(s,n,2)}function Fu(n){var s=St();if(typeof n=="function"){var a=n;if(n=a(),Ji){ei(!0);try{a()}finally{ei(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:n},s}function ap(n,s,a,u){return n.baseState=a,zu(n,Ue,typeof u=="function"?u:In)}function uS(n,s,a,u,g){if(Aa(n))throw Error(o(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};V.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,lp(s,v)):(v.next=a.next,s.pending=a.next=v)}}function lp(n,s){var a=s.action,u=s.payload,g=n.state;if(s.isTransition){var v=V.T,S={};V.T=S;try{var A=a(g,u),N=V.S;N!==null&&N(S,A),up(n,s,A)}catch(O){Yu(n,s,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),V.T=v}}else try{v=a(g,u),up(n,s,v)}catch(O){Yu(n,s,O)}}function up(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){cp(n,s,u)},function(u){return Yu(n,s,u)}):cp(n,s,a)}function cp(n,s,a){s.status="fulfilled",s.value=a,fp(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,lp(n,a)))}function Yu(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,fp(s),s=s.next;while(s!==u)}n.action=null}function fp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function dp(n,s){return s}function hp(n,s){if(Ce){var a=ke.formState;if(a!==null){e:{var u=he;if(Ce){if(Oe){t:{for(var g=Oe,v=Wt;g.nodeType!==8;){if(!v){g=null;break t}if(g=en(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Oe=en(g.nextSibling),u=g.data==="F!";break e}}si(u)}u=!1}u&&(s=a[0])}}return a=St(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:s},a.queue=u,a=Dp.bind(null,he,u),u.dispatch=a,u=Fu(!1),v=Zu.bind(null,he,!1,u.queue),u=St(),g={state:s,dispatch:null,action:n,pending:null},u.queue=g,a=uS.bind(null,he,g,v,a),g.dispatch=a,u.memoizedState=n,[s,a,!1]}function pp(n){var s=Xe();return mp(s,Ue,n)}function mp(n,s,a){if(s=zu(n,s,dp)[0],n=Sa(In)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Bs(s)}catch(S){throw S===No?fa:S}else u=s;s=Xe();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(he.flags|=2048,Po(9,{destroy:void 0},cS.bind(null,g,a),null)),[u,v,n]}function cS(n,s){n.action=s}function gp(n){var s=Xe(),a=Ue;if(a!==null)return mp(s,a,n);Xe(),s=s.memoizedState,a=Xe();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Po(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=he.updateQueue,s===null&&(s=_a(),he.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function yp(){return Xe().memoizedState}function Ea(n,s,a,u){var g=St();he.flags|=n,g.memoizedState=Po(1|s,{destroy:void 0},a,u===void 0?null:u)}function Ca(n,s,a,u){var g=Xe();u=u===void 0?null:u;var v=g.memoizedState.inst;Ue!==null&&u!==null&&ku(u,Ue.memoizedState.deps)?g.memoizedState=Po(s,v,a,u):(he.flags|=n,g.memoizedState=Po(1|s,v,a,u))}function vp(n,s){Ea(8390656,8,n,s)}function $u(n,s){Ca(2048,8,n,s)}function fS(n){he.flags|=4;var s=he.updateQueue;if(s===null)s=_a(),he.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function _p(n){var s=Xe().memoizedState;return fS({ref:s,nextImpl:n}),function(){if((Ne&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Tp(n,s){return Ca(4,2,n,s)}function Sp(n,s){return Ca(4,4,n,s)}function Ep(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cp(n,s,a){a=a!=null?a.concat([n]):null,Ca(4,4,Ep.bind(null,s,n),a)}function Ju(){}function Ap(n,s){var a=Xe();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&ku(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function bp(n,s){var a=Xe();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&ku(s,u[1]))return u[0];if(u=n(),Ji){ei(!0);try{n()}finally{ei(!1)}}return a.memoizedState=[u,s],u}function Ku(n,s,a){return a===void 0||(xn&1073741824)!==0&&(Te&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Mm(),he.lanes|=n,pi|=n,a)}function Mp(n,s,a,u){return Ot(a,s)?a:Io.current!==null?(n=Ku(n,a,u),Ot(n,s)||(tt=!0),n):(xn&42)===0||(xn&1073741824)!==0&&(Te&261930)===0?(tt=!0,n.memoizedState=a):(n=Mm(),he.lanes|=n,pi|=n,s)}function wp(n,s,a,u,g){var v=Z.p;Z.p=v!==0&&8>v?v:8;var S=V.T,A={};V.T=A,Zu(n,!1,s,a);try{var N=g(),O=V.S;if(O!==null&&O(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=rS(N,u);Fs(n,s,z,Bt(n))}else Fs(n,s,u,Bt(n))}catch($){Fs(n,s,{then:function(){},status:"rejected",reason:$},Bt())}finally{Z.p=v,S!==null&&A.types!==null&&(S.types=A.types),V.T=S}}function dS(){}function Qu(n,s,a,u){if(n.tag!==5)throw Error(o(476));var g=Rp(n).queue;wp(n,g,s,ae,a===null?dS:function(){return Np(n),a(u)})}function Rp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:ae},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Np(n){var s=Rp(n);s.next===null&&(s=n.alternate.memoizedState),Fs(n,s.next.queue,{},Bt())}function Xu(){return ht(ar)}function xp(){return Xe().memoizedState}function Ip(){return Xe().memoizedState}function hS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Bt();n=li(a);var u=ui(s,n,a);u!==null&&(Nt(u,s,a),Gs(u,s,a)),s={cache:bu()},n.payload=s;return}s=s.return}}function pS(n,s,a){var u=Bt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Aa(n)?Up(s,a):(a=pu(n,s,a,u),a!==null&&(Nt(a,n,u),Pp(a,s,u)))}function Dp(n,s,a){var u=Bt();Fs(n,s,a,u)}function Fs(n,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Aa(n))Up(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,A=v(S,a);if(g.hasEagerState=!0,g.eagerState=A,Ot(A,S))return oa(n,s,g,0),ke===null&&ia(),!1}catch{}finally{}if(a=pu(n,s,g,u),a!==null)return Nt(a,n,u),Pp(a,s,u),!0}return!1}function Zu(n,s,a,u){if(u={lane:2,revertLane:Nc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Aa(n)){if(s)throw Error(o(479))}else s=pu(n,a,u,2),s!==null&&Nt(s,n,2)}function Aa(n){var s=n.alternate;return n===he||s!==null&&s===he}function Up(n,s){Do=ya=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Pp(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Gd(n,a)}}var Ys={readContext:ht,use:Ta,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e};Ys.useEffectEvent=$e;var Lp={readContext:ht,use:Ta,useCallback:function(n,s){return St().memoizedState=[n,s===void 0?null:s],n},useContext:ht,useEffect:vp,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Ea(4194308,4,Ep.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ea(4194308,4,n,s)},useInsertionEffect:function(n,s){Ea(4,2,n,s)},useMemo:function(n,s){var a=St();s=s===void 0?null:s;var u=n();if(Ji){ei(!0);try{n()}finally{ei(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=St();if(a!==void 0){var g=a(s);if(Ji){ei(!0);try{a(s)}finally{ei(!1)}}}else g=s;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=pS.bind(null,he,n),[u.memoizedState,n]},useRef:function(n){var s=St();return n={current:n},s.memoizedState=n},useState:function(n){n=Fu(n);var s=n.queue,a=Dp.bind(null,he,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Ju,useDeferredValue:function(n,s){var a=St();return Ku(a,n,s)},useTransition:function(){var n=Fu(!1);return n=wp.bind(null,he,n.queue,!0,!1),St().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=he,g=St();if(Ce){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),ke===null)throw Error(o(349));(Te&127)!==0||np(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,vp(op.bind(null,u,v,n),[n]),u.flags|=2048,Po(9,{destroy:void 0},ip.bind(null,u,v,a,s),null),a},useId:function(){var n=St(),s=ke.identifierPrefix;if(Ce){var a=mn,u=pn;a=(u&~(1<<32-kt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=va++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=aS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Xu,useFormState:hp,useActionState:hp,useOptimistic:function(n){var s=St();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Zu.bind(null,he,!0,a),a.dispatch=s,[n,s]},useMemoCache:Vu,useCacheRefresh:function(){return St().memoizedState=hS.bind(null,he)},useEffectEvent:function(n){var s=St(),a={impl:n};return s.memoizedState=a,function(){if((Ne&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Wu={readContext:ht,use:Ta,useCallback:Ap,useContext:ht,useEffect:$u,useImperativeHandle:Cp,useInsertionEffect:Tp,useLayoutEffect:Sp,useMemo:bp,useReducer:Sa,useRef:yp,useState:function(){return Sa(In)},useDebugValue:Ju,useDeferredValue:function(n,s){var a=Xe();return Mp(a,Ue.memoizedState,n,s)},useTransition:function(){var n=Sa(In)[0],s=Xe().memoizedState;return[typeof n=="boolean"?n:Bs(n),s]},useSyncExternalStore:tp,useId:xp,useHostTransitionStatus:Xu,useFormState:pp,useActionState:pp,useOptimistic:function(n,s){var a=Xe();return ap(a,Ue,n,s)},useMemoCache:Vu,useCacheRefresh:Ip};Wu.useEffectEvent=_p;var kp={readContext:ht,use:Ta,useCallback:Ap,useContext:ht,useEffect:$u,useImperativeHandle:Cp,useInsertionEffect:Tp,useLayoutEffect:Sp,useMemo:bp,useReducer:Bu,useRef:yp,useState:function(){return Bu(In)},useDebugValue:Ju,useDeferredValue:function(n,s){var a=Xe();return Ue===null?Ku(a,n,s):Mp(a,Ue.memoizedState,n,s)},useTransition:function(){var n=Bu(In)[0],s=Xe().memoizedState;return[typeof n=="boolean"?n:Bs(n),s]},useSyncExternalStore:tp,useId:xp,useHostTransitionStatus:Xu,useFormState:gp,useActionState:gp,useOptimistic:function(n,s){var a=Xe();return Ue!==null?ap(a,Ue,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Vu,useCacheRefresh:Ip};kp.useEffectEvent=_p;function ju(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ec={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Bt(),g=li(u);g.payload=s,a!=null&&(g.callback=a),s=ui(n,g,u),s!==null&&(Nt(s,n,u),Gs(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Bt(),g=li(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ui(n,g,u),s!==null&&(Nt(s,n,u),Gs(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Bt(),u=li(a);u.tag=2,s!=null&&(u.callback=s),s=ui(n,u,a),s!==null&&(Nt(s,n,a),Gs(s,n,a))}};function Op(n,s,a,u,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,S):s.prototype&&s.prototype.isPureReactComponent?!Is(a,u)||!Is(g,v):!0}function qp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&ec.enqueueReplaceState(s,s.state,null)}function Ki(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function Gp(n){na(n)}function Hp(n){console.error(n)}function Vp(n){na(n)}function ba(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function zp(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function tc(n,s,a){return a=li(a),a.tag=3,a.payload={element:null},a.callback=function(){ba(n,s)},a}function Bp(n){return n=li(n),n.tag=3,n}function Fp(n,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){zp(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){zp(s,a,u),typeof g!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function mS(n,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Mo(s,a,g,!0),a=Gt.current,a!==null){switch(a.tag){case 31:case 13:return jt===null?Oa():a.alternate===null&&Je===0&&(Je=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===da?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Mc(n,u,g)),!1;case 22:return a.flags|=65536,u===da?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Mc(n,u,g)),!1}throw Error(o(435,a.tag))}return Mc(n,u,g),Oa(),!1}if(Ce)return s=Gt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Tu&&(n=Error(o(422),{cause:u}),Ps(Qt(n,a)))):(u!==Tu&&(s=Error(o(423),{cause:u}),Ps(Qt(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Qt(u,a),g=tc(n.stateNode,u,g),Iu(n,g),Je!==4&&(Je=2)),!1;var v=Error(o(520),{cause:u});if(v=Qt(v,a),js===null?js=[v]:js.push(v),Je!==4&&(Je=2),s===null)return!0;u=Qt(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=tc(a.stateNode,u,n),Iu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(mi===null||!mi.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Bp(g),Fp(g,n,a,u),Iu(a,g),!1}a=a.return}while(a!==null);return!1}var nc=Error(o(461)),tt=!1;function pt(n,s,a,u){s.child=n===null?Kh(s,null,a,u):$i(s,n.child,a,u)}function Yp(n,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return zi(s),u=Ou(n,s,a,S,v,g),A=qu(),n!==null&&!tt?(Gu(n,s,g),Dn(n,s,g)):(Ce&&A&&vu(s),s.flags|=1,pt(n,s,u,g),s.child)}function $p(n,s,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!mu(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,Jp(n,s,v,u,g)):(n=ra(a.type,null,u,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!cc(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Is,a(S,u)&&n.ref===s.ref)return Dn(n,s,g)}return s.flags|=1,n=Mn(v,u),n.ref=s.ref,n.return=s,s.child=n}function Jp(n,s,a,u,g){if(n!==null){var v=n.memoizedProps;if(Is(v,u)&&n.ref===s.ref)if(tt=!1,s.pendingProps=u=v,cc(n,g))(n.flags&131072)!==0&&(tt=!0);else return s.lanes=n.lanes,Dn(n,s,g)}return ic(n,s,a,u,g)}function Kp(n,s,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=s.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return Qp(n,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ca(s,v!==null?v.cachePool:null),v!==null?Zh(s,v):Uu(),Wh(s);else return u=s.lanes=536870912,Qp(n,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(ca(s,v.cachePool),Zh(s,v),fi(),s.memoizedState=null):(n!==null&&ca(s,null),Uu(),fi());return pt(n,s,g,a),s.child}function $s(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Qp(n,s,a,u,g){var v=wu();return v=v===null?null:{parent:je._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&ca(s,null),Uu(),Wh(s),n!==null&&Mo(n,s,u,!0),s.childLanes=g,null}function Ma(n,s){return s=Ra({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Xp(n,s,a){return $i(s,n.child,null,a),n=Ma(s,s.pendingProps),n.flags|=2,Ht(s),s.memoizedState=null,n}function gS(n,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ce){if(u.mode==="hidden")return n=Ma(s,u),s.lanes=536870912,$s(null,n);if(Lu(s),(n=Oe)?(n=lg(n,Wt),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ii!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=Uh(n),a.return=s,s.child=a,dt=s,Oe=null)):n=null,n===null)throw si(s);return s.lanes=536870912,null}return Ma(s,u)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if(Lu(s),g)if(s.flags&256)s.flags&=-257,s=Xp(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(tt||Mo(n,s,a,!1),g=(a&n.childLanes)!==0,tt||g){if(u=ke,u!==null&&(S=Hd(u,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,qi(n,S),Nt(u,n,S),nc;Oa(),s=Xp(n,s,a)}else n=v.treeContext,Oe=en(S.nextSibling),dt=s,Ce=!0,oi=null,Wt=!1,n!==null&&kh(s,n),s=Ma(s,u),s.flags|=4096;return s}return n=Mn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function wa(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function ic(n,s,a,u,g){return zi(s),a=Ou(n,s,a,u,void 0,g),u=qu(),n!==null&&!tt?(Gu(n,s,g),Dn(n,s,g)):(Ce&&u&&vu(s),s.flags|=1,pt(n,s,a,g),s.child)}function Zp(n,s,a,u,g,v){return zi(s),s.updateQueue=null,a=ep(s,u,a,g),jh(n),u=qu(),n!==null&&!tt?(Gu(n,s,v),Dn(n,s,v)):(Ce&&u&&vu(s),s.flags|=1,pt(n,s,a,v),s.child)}function Wp(n,s,a,u,g){if(zi(s),s.stateNode===null){var v=Eo,S=a.contextType;typeof S=="object"&&S!==null&&(v=ht(S)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ec,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Nu(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?ht(S):Eo,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ju(s,a,S,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&ec.enqueueReplaceState(v,v.state,null),Vs(s,u,v,g),Hs(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){v=s.stateNode;var A=s.memoizedProps,N=Ki(a,A);v.props=N;var O=v.context,z=a.contextType;S=Eo,typeof z=="object"&&z!==null&&(S=ht(z));var $=a.getDerivedStateFromProps;z=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||O!==S)&&qp(s,v,u,S),ai=!1;var G=s.memoizedState;v.state=G,Vs(s,u,v,g),Hs(),O=s.memoizedState,A||G!==O||ai?(typeof $=="function"&&(ju(s,a,$,u),O=s.memoizedState),(N=ai||Op(s,a,N,u,G,O,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=S,u=N):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,xu(n,s),S=s.memoizedProps,z=Ki(a,S),v.props=z,$=s.pendingProps,G=v.context,O=a.contextType,N=Eo,typeof O=="object"&&O!==null&&(N=ht(O)),A=a.getDerivedStateFromProps,(O=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||G!==N)&&qp(s,v,u,N),ai=!1,G=s.memoizedState,v.state=G,Vs(s,u,v,g),Hs();var H=s.memoizedState;S!==$||G!==H||ai||n!==null&&n.dependencies!==null&&la(n.dependencies)?(typeof A=="function"&&(ju(s,a,A,u),H=s.memoizedState),(z=ai||Op(s,a,z,u,G,H,N)||n!==null&&n.dependencies!==null&&la(n.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,H,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,H,N)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),v.props=u,v.state=H,v.context=N,u=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return v=u,wa(n,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&u?(s.child=$i(s,n.child,null,g),s.child=$i(s,null,a,g)):pt(n,s,a,g),s.memoizedState=v.state,n=s.child):n=Dn(n,s,g),n}function jp(n,s,a,u){return Hi(),s.flags|=256,pt(n,s,a,u),s.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sc(n){return{baseLanes:n,cachePool:zh()}}function rc(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=zt),n}function em(n,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(Qe.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ce){if(g?ci(s):fi(),(n=Oe)?(n=lg(n,Wt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ii!==null?{id:pn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},a=Uh(n),a.return=s,s.child=a,dt=s,Oe=null)):n=null,n===null)throw si(s);return zc(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(fi(),g=s.mode,A=Ra({mode:"hidden",children:A},g),u=Gi(u,g,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=sc(a),u.childLanes=rc(n,S,a),s.memoizedState=oc,$s(null,u)):(ci(s),ac(s,A))}var N=n.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(v)s.flags&256?(ci(s),s.flags&=-257,s=lc(n,s,a)):s.memoizedState!==null?(fi(),s.child=n.child,s.flags|=128,s=null):(fi(),A=u.fallback,g=s.mode,u=Ra({mode:"visible",children:u.children},g),A=Gi(A,g,a,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,$i(s,n.child,null,a),u=s.child,u.memoizedState=sc(a),u.childLanes=rc(n,S,a),s.memoizedState=oc,s=$s(null,u));else if(ci(s),zc(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(o(419)),u.stack="",u.digest=S,Ps({value:u,source:null,stack:null}),s=lc(n,s,a)}else if(tt||Mo(n,s,a,!1),S=(a&n.childLanes)!==0,tt||S){if(S=ke,S!==null&&(u=Hd(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,qi(n,u),Nt(S,n,u),nc;Vc(A)||Oa(),s=lc(n,s,a)}else Vc(A)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,Oe=en(A.nextSibling),dt=s,Ce=!0,oi=null,Wt=!1,n!==null&&kh(s,n),s=ac(s,u.children),s.flags|=4096);return s}return g?(fi(),A=u.fallback,g=s.mode,N=n.child,O=N.sibling,u=Mn(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,O!==null?A=Mn(O,A):(A=Gi(A,g,a,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,$s(null,u),u=s.child,A=n.child.memoizedState,A===null?A=sc(a):(g=A.cachePool,g!==null?(N=je._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=zh(),A={baseLanes:A.baseLanes|a,cachePool:g}),u.memoizedState=A,u.childLanes=rc(n,S,a),s.memoizedState=oc,$s(n.child,u)):(ci(s),a=n.child,n=a.sibling,a=Mn(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function ac(n,s){return s=Ra({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ra(n,s){return n=qt(22,n,null,s),n.lanes=0,n}function lc(n,s,a){return $i(s,n.child,null,a),n=ac(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tm(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Cu(n.return,s,a)}function uc(n,s,a,u,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function nm(n,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=Qe.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,q(Qe,S),pt(n,s,u,a),u=Ce?Us:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tm(n,a,s);else if(n.tag===19)tm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&ga(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),uc(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&ga(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}uc(s,!0,a,null,v,u);break;case"together":uc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Dn(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),pi|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Mo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,a=Mn(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Mn(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function cc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&la(n)))}function yS(n,s,a){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),ri(s,je,n.memoizedState.cache),Hi();break;case 27:case 5:Di(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Lu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ci(s),s.flags|=128,null):(a&s.child.childLanes)!==0?em(n,s,a):(ci(s),n=Dn(n,s,a),n!==null?n.sibling:null);ci(s);break;case 19:var g=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Mo(n,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return nm(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),q(Qe,Qe.current),u)break;return null;case 22:return s.lanes=0,Kp(n,s,a,s.pendingProps);case 24:ri(s,je,n.memoizedState.cache)}return Dn(n,s,a)}function im(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)tt=!0;else{if(!cc(n,a)&&(s.flags&128)===0)return tt=!1,yS(n,s,a);tt=(n.flags&131072)!==0}else tt=!1,Ce&&(s.flags&1048576)!==0&&Lh(s,Us,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Fi(s.elementType),s.type=n,typeof n=="function")mu(n)?(u=Ki(n,u),s.tag=1,s=Wp(null,s,n,u,a)):(s.tag=0,s=ic(null,s,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===J){s.tag=11,s=Yp(null,s,n,u,a);break e}else if(g===K){s.tag=14,s=$p(null,s,n,u,a);break e}}throw s=We(n)||n,Error(o(306,s,""))}}return s;case 0:return ic(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Ki(u,s.pendingProps),Wp(n,s,u,g,a);case 3:e:{if(rt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,xu(n,s),Vs(s,u,null,a);var S=s.memoizedState;if(u=S.cache,ri(s,je,u),u!==v.cache&&Au(s,[je],a,!0),Hs(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=jp(n,s,u,a);break e}else if(u!==g){g=Qt(Error(o(424)),s),Ps(g),s=jp(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Oe=en(n.firstChild),dt=s,Ce=!0,oi=null,Wt=!0,a=Kh(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hi(),u===g){s=Dn(n,s,a);break e}pt(n,s,u,a)}s=s.child}return s;case 26:return wa(n,s),n===null?(a=pg(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ce||(a=s.type,n=s.pendingProps,u=Fa(ge.current).createElement(a),u[ft]=s,u[Ct]=n,mt(u,a,n),at(u),s.stateNode=u):s.memoizedState=pg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Di(s),n===null&&Ce&&(u=s.stateNode=fg(s.type,s.pendingProps,ge.current),dt=s,Wt=!0,g=Oe,_i(s.type)?(Bc=g,Oe=en(u.firstChild)):Oe=g),pt(n,s,s.pendingProps.children,a),wa(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ce&&((g=u=Oe)&&(u=JS(u,s.type,s.pendingProps,Wt),u!==null?(s.stateNode=u,dt=s,Oe=en(u.firstChild),Wt=!1,g=!0):g=!1),g||si(s)),Di(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,u=v.children,qc(g,v)?u=null:S!==null&&qc(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Ou(n,s,lS,null,null,a),ar._currentValue=g),wa(n,s),pt(n,s,u,a),s.child;case 6:return n===null&&Ce&&((n=a=Oe)&&(a=KS(a,s.pendingProps,Wt),a!==null?(s.stateNode=a,dt=s,Oe=null,n=!0):n=!1),n||si(s)),null;case 13:return em(n,s,a);case 4:return rt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=$i(s,null,u,a):pt(n,s,u,a),s.child;case 11:return Yp(n,s,s.type,s.pendingProps,a);case 7:return pt(n,s,s.pendingProps,a),s.child;case 8:return pt(n,s,s.pendingProps.children,a),s.child;case 12:return pt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,ri(s,s.type,u.value),pt(n,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,zi(s),g=ht(g),u=u(g),s.flags|=1,pt(n,s,u,a),s.child;case 14:return $p(n,s,s.type,s.pendingProps,a);case 15:return Jp(n,s,s.type,s.pendingProps,a);case 19:return nm(n,s,a);case 31:return gS(n,s,a);case 22:return Kp(n,s,a,s.pendingProps);case 24:return zi(s),u=ht(je),n===null?(g=wu(),g===null&&(g=ke,v=bu(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},Nu(s),ri(s,je,g)):((n.lanes&a)!==0&&(xu(n,s),Vs(s,null,null,a),Hs()),g=n.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ri(s,je,u)):(u=v.cache,ri(s,je,u),u!==g.cache&&Au(s,[je],a,!0))),pt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Un(n){n.flags|=4}function fc(n,s,a,u,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(xm())n.flags|=8192;else throw Yi=da,Ru}else n.flags&=-16777217}function om(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!_g(s))if(xm())n.flags|=8192;else throw Yi=da,Ru}function Na(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Od():536870912,n.lanes|=s,qo|=s)}function Js(n,s){if(!Ce)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function qe(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function vS(n,s,a){var u=s.pendingProps;switch(_u(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Nn(je),Be(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(bo(s)?Un(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Su())),qe(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(Un(s),v!==null?(qe(s),om(s,v)):(qe(s),fc(s,g,null,u,a))):v?v!==n.memoizedState?(Un(s),qe(s),om(s,v)):(qe(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Un(s),qe(s),fc(s,g,n,u,a)),null;case 27:if(ro(s),a=ge.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Un(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return qe(s),null}n=W.current,bo(s)?Oh(s):(n=fg(g,u,a),s.stateNode=n,Un(s))}return qe(s),null;case 5:if(ro(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Un(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return qe(s),null}if(v=W.current,bo(s))Oh(s);else{var S=Fa(ge.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[ft]=s,v[Ct]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(mt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Un(s)}}return qe(s),fc(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Un(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=ge.current,bo(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,g=dt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[ft]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||eg(n.nodeValue,a)),n||si(s,!0)}else n=Fa(n).createTextNode(u),n[ft]=s,s.stateNode=n}return qe(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=bo(s),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[ft]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),n=!1}else a=Su(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Ht(s),s):(Ht(s),null);if((s.flags&128)!==0)throw Error(o(558))}return qe(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=bo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[ft]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),g=!1}else g=Su(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Ht(s),s):(Ht(s),null)}return Ht(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Na(s,s.updateQueue),qe(s),null);case 4:return Be(),n===null&&Uc(s.stateNode.containerInfo),qe(s),null;case 10:return Nn(s.type),qe(s),null;case 19:if(Y(Qe),u=s.memoizedState,u===null)return qe(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)Js(u,!1);else{if(Je!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=ga(n),v!==null){for(s.flags|=128,Js(u,!1),n=v.updateQueue,s.updateQueue=n,Na(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Dh(a,n),a=a.sibling;return q(Qe,Qe.current&1|2),Ce&&wn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Pt()>Pa&&(s.flags|=128,g=!0,Js(u,!1),s.lanes=4194304)}else{if(!g)if(n=ga(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Na(s,n),Js(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Ce)return qe(s),null}else 2*Pt()-u.renderingStartTime>Pa&&a!==536870912&&(s.flags|=128,g=!0,Js(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(n=u.last,n!==null?n.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Pt(),n.sibling=null,a=Qe.current,q(Qe,g?a&1|2:a&1),Ce&&wn(s,u.treeForkCount),n):(qe(s),null);case 22:case 23:return Ht(s),Pu(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),a=s.updateQueue,a!==null&&Na(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&Y(Bi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Nn(je),qe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function _S(n,s){switch(_u(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Nn(je),Be(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ro(s),null;case 31:if(s.memoizedState!==null){if(Ht(s),s.alternate===null)throw Error(o(340));Hi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ht(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Hi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Y(Qe),null;case 4:return Be(),null;case 10:return Nn(s.type),null;case 22:case 23:return Ht(s),Pu(),n!==null&&Y(Bi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Nn(je),null;case 25:return null;default:return null}}function sm(n,s){switch(_u(s),s.tag){case 3:Nn(je),Be();break;case 26:case 27:case 5:ro(s);break;case 4:Be();break;case 31:s.memoizedState!==null&&Ht(s);break;case 13:Ht(s);break;case 19:Y(Qe);break;case 10:Nn(s.type);break;case 22:case 23:Ht(s),Pu(),n!==null&&Y(Bi);break;case 24:Nn(je)}}function Ks(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,S=a.inst;u=v(),S.destroy=u}a=a.next}while(a!==g)}}catch(A){De(s,s.return,A)}}function di(n,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var N=a,O=A;try{O()}catch(z){De(g,N,z)}}}u=u.next}while(u!==v)}}catch(z){De(s,s.return,z)}}function rm(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Xh(s,a)}catch(u){De(n,n.return,u)}}}function am(n,s,a){a.props=Ki(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){De(n,s,u)}}function Qs(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){De(n,s,g)}}function gn(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){De(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){De(n,s,g)}else a.current=null}function lm(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){De(n,n.return,g)}}function dc(n,s,a){try{var u=n.stateNode;VS(u,n.type,a,s),u[Ct]=s}catch(g){De(n,n.return,g)}}function um(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&_i(n.type)||n.tag===4}function hc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||um(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&_i(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=An));else if(u!==4&&(u===27&&_i(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(pc(n,s,a),n=n.sibling;n!==null;)pc(n,s,a),n=n.sibling}function xa(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&_i(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(xa(n,s,a),n=n.sibling;n!==null;)xa(n,s,a),n=n.sibling}function cm(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);mt(s,u,a),s[ft]=n,s[Ct]=a}catch(v){De(n,n.return,v)}}var Pn=!1,nt=!1,mc=!1,fm=typeof WeakSet=="function"?WeakSet:Set,lt=null;function TS(n,s){if(n=n.containerInfo,kc=Za,n=Ch(n),lu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,N=-1,O=0,z=0,$=n,G=null;t:for(;;){for(var H;$!==a||g!==0&&$.nodeType!==3||(A=S+g),$!==v||u!==0&&$.nodeType!==3||(N=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(H=$.firstChild)!==null;)G=$,$=H;for(;;){if($===n)break t;if(G===a&&++O===g&&(A=S),G===v&&++z===u&&(N=S),(H=$.nextSibling)!==null)break;$=G,G=$.parentNode}$=H}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Oc={focusedElem:n,selectionRange:a},Za=!1,lt=s;lt!==null;)if(s=lt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,lt=n;else for(;lt!==null;){switch(s=lt,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ie=Ki(a.type,g);n=u.getSnapshotBeforeUpdate(ie,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(ce){De(a,a.return,ce)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Hc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,lt=n;break}lt=s.return}}function dm(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:kn(n,a),u&4&&Ks(5,a);break;case 1:if(kn(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){De(a,a.return,S)}else{var g=Ki(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){De(a,a.return,S)}}u&64&&rm(a),u&512&&Qs(a,a.return);break;case 3:if(kn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Xh(n,s)}catch(S){De(a,a.return,S)}}break;case 27:s===null&&u&4&&cm(a);case 26:case 5:kn(n,a),s===null&&u&4&&lm(a),u&512&&Qs(a,a.return);break;case 12:kn(n,a);break;case 31:kn(n,a),u&4&&mm(n,a);break;case 13:kn(n,a),u&4&&gm(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=NS.bind(null,a),QS(n,a))));break;case 22:if(u=a.memoizedState!==null||Pn,!u){s=s!==null&&s.memoizedState!==null||nt,g=Pn;var v=nt;Pn=u,(nt=s)&&!v?On(n,a,(a.subtreeFlags&8772)!==0):kn(n,a),Pn=g,nt=v}break;case 30:break;default:kn(n,a)}}function hm(n){var s=n.alternate;s!==null&&(n.alternate=null,hm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Yl(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ve=null,bt=!1;function Ln(n,s,a){for(a=a.child;a!==null;)pm(n,s,a),a=a.sibling}function pm(n,s,a){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(_s,a)}catch{}switch(a.tag){case 26:nt||gn(a,s),Ln(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nt||gn(a,s);var u=Ve,g=bt;_i(a.type)&&(Ve=a.stateNode,bt=!1),Ln(n,s,a),or(a.stateNode),Ve=u,bt=g;break;case 5:nt||gn(a,s);case 6:if(u=Ve,g=bt,Ve=null,Ln(n,s,a),Ve=u,bt=g,Ve!==null)if(bt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(v){De(a,s,v)}else try{Ve.removeChild(a.stateNode)}catch(v){De(a,s,v)}break;case 18:Ve!==null&&(bt?(n=Ve,rg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),$o(n)):rg(Ve,a.stateNode));break;case 4:u=Ve,g=bt,Ve=a.stateNode.containerInfo,bt=!0,Ln(n,s,a),Ve=u,bt=g;break;case 0:case 11:case 14:case 15:di(2,a,s),nt||di(4,a,s),Ln(n,s,a);break;case 1:nt||(gn(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&am(a,s,u)),Ln(n,s,a);break;case 21:Ln(n,s,a);break;case 22:nt=(u=nt)||a.memoizedState!==null,Ln(n,s,a),nt=u;break;default:Ln(n,s,a)}}function mm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{$o(n)}catch(a){De(s,s.return,a)}}}function gm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{$o(n)}catch(a){De(s,s.return,a)}}function SS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new fm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new fm),s;default:throw Error(o(435,n.tag))}}function Ia(n,s){var a=SS(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=xS.bind(null,n,u);u.then(g,g)}})}function Mt(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(_i(A.type)){Ve=A.stateNode,bt=!1;break e}break;case 5:Ve=A.stateNode,bt=!1;break e;case 3:case 4:Ve=A.stateNode.containerInfo,bt=!0;break e}A=A.return}if(Ve===null)throw Error(o(160));pm(v,S,g),Ve=null,bt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ym(s,n),s=s.sibling}var an=null;function ym(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Mt(s,n),wt(n),u&4&&(di(3,n,n.return),Ks(3,n),di(5,n,n.return));break;case 1:Mt(s,n),wt(n),u&512&&(nt||a===null||gn(a,a.return)),u&64&&Pn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=an;if(Mt(s,n),wt(n),u&512&&(nt||a===null||gn(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Es]||v[ft]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),mt(v,u,a),v[ft]=n,at(v),u=v;break e;case"link":var S=yg("link","href",g).get(u+(a.href||""));if(S){for(var A=0;A<S.length;A++)if(v=S[A],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(A,1);break t}}v=g.createElement(u),mt(v,u,a),g.head.appendChild(v);break;case"meta":if(S=yg("meta","content",g).get(u+(a.content||""))){for(A=0;A<S.length;A++)if(v=S[A],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(A,1);break t}}v=g.createElement(u),mt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[ft]=n,at(v),u=v}n.stateNode=u}else vg(g,n.type,n.stateNode);else n.stateNode=gg(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?vg(g,n.type,n.stateNode):gg(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&dc(n,n.memoizedProps,a.memoizedProps)}break;case 27:Mt(s,n),wt(n),u&512&&(nt||a===null||gn(a,a.return)),a!==null&&u&4&&dc(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Mt(s,n),wt(n),u&512&&(nt||a===null||gn(a,a.return)),n.flags&32){g=n.stateNode;try{mo(g,"")}catch(ie){De(n,n.return,ie)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,dc(n,g,a!==null?a.memoizedProps:g)),u&1024&&(mc=!0);break;case 6:if(Mt(s,n),wt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ie){De(n,n.return,ie)}}break;case 3:if(Ja=null,g=an,an=Ya(s.containerInfo),Mt(s,n),an=g,wt(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$o(s.containerInfo)}catch(ie){De(n,n.return,ie)}mc&&(mc=!1,vm(n));break;case 4:u=an,an=Ya(n.stateNode.containerInfo),Mt(s,n),wt(n),an=u;break;case 12:Mt(s,n),wt(n);break;case 31:Mt(s,n),wt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ia(n,u)));break;case 13:Mt(s,n),wt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ua=Pt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ia(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,O=Pn,z=nt;if(Pn=O||g,nt=z||N,Mt(s,n),nt=z,Pn=O,wt(n),u&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||N||Pn||nt||Qi(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(v=N.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=N.stateNode;var $=N.memoizedProps.style,G=$!=null&&$.hasOwnProperty("display")?$.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ie){De(N,N.return,ie)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ie){De(N,N.return,ie)}}}else if(s.tag===18){if(a===null){N=s;try{var H=N.stateNode;g?ag(H,!0):ag(N.stateNode,!1)}catch(ie){De(N,N.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ia(n,a))));break;case 19:Mt(s,n),wt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ia(n,u)));break;case 30:break;case 21:break;default:Mt(s,n),wt(n)}}function wt(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(um(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=hc(n);xa(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(mo(S,""),a.flags&=-33);var A=hc(n);xa(n,A,S);break;case 3:case 4:var N=a.stateNode.containerInfo,O=hc(n);pc(n,O,N);break;default:throw Error(o(161))}}catch(z){De(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function vm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;vm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function kn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dm(n,s.alternate,s),s=s.sibling}function Qi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:di(4,s,s.return),Qi(s);break;case 1:gn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&am(s,s.return,a),Qi(s);break;case 27:or(s.stateNode);case 26:case 5:gn(s,s.return),Qi(s);break;case 22:s.memoizedState===null&&Qi(s);break;case 30:Qi(s);break;default:Qi(s)}n=n.sibling}}function On(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:On(g,v,a),Ks(4,v);break;case 1:if(On(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){De(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)Qh(N[g],A)}catch(O){De(u,u.return,O)}}a&&S&64&&rm(v),Qs(v,v.return);break;case 27:cm(v);case 26:case 5:On(g,v,a),a&&u===null&&S&4&&lm(v),Qs(v,v.return);break;case 12:On(g,v,a);break;case 31:On(g,v,a),a&&S&4&&mm(g,v);break;case 13:On(g,v,a),a&&S&4&&gm(g,v);break;case 22:v.memoizedState===null&&On(g,v,a),Qs(v,v.return);break;case 30:break;default:On(g,v,a)}s=s.sibling}}function gc(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ls(a))}function yc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ls(n))}function ln(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_m(n,s,a,u),s=s.sibling}function _m(n,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ln(n,s,a,u),g&2048&&Ks(9,s);break;case 1:ln(n,s,a,u);break;case 3:ln(n,s,a,u),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ls(n)));break;case 12:if(g&2048){ln(n,s,a,u),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,A=v.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){De(s,s.return,N)}}else ln(n,s,a,u);break;case 31:ln(n,s,a,u);break;case 13:ln(n,s,a,u);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?ln(n,s,a,u):Xs(n,s):v._visibility&2?ln(n,s,a,u):(v._visibility|=2,Lo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&gc(S,s);break;case 24:ln(n,s,a,u),g&2048&&yc(s.alternate,s);break;default:ln(n,s,a,u)}}function Lo(n,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,A=a,N=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Lo(v,S,A,N,g),Ks(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Lo(v,S,A,N,g):Xs(v,S):(z._visibility|=2,Lo(v,S,A,N,g)),g&&O&2048&&gc(S.alternate,S);break;case 24:Lo(v,S,A,N,g),g&&O&2048&&yc(S.alternate,S);break;default:Lo(v,S,A,N,g)}s=s.sibling}}function Xs(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,g=u.flags;switch(u.tag){case 22:Xs(a,u),g&2048&&gc(u.alternate,u);break;case 24:Xs(a,u),g&2048&&yc(u.alternate,u);break;default:Xs(a,u)}s=s.sibling}}var Zs=8192;function ko(n,s,a){if(n.subtreeFlags&Zs)for(n=n.child;n!==null;)Tm(n,s,a),n=n.sibling}function Tm(n,s,a){switch(n.tag){case 26:ko(n,s,a),n.flags&Zs&&n.memoizedState!==null&&aE(a,an,n.memoizedState,n.memoizedProps);break;case 5:ko(n,s,a);break;case 3:case 4:var u=an;an=Ya(n.stateNode.containerInfo),ko(n,s,a),an=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Zs,Zs=16777216,ko(n,s,a),Zs=u):ko(n,s,a));break;default:ko(n,s,a)}}function Sm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ws(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];lt=u,Cm(u,n)}Sm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Em(n),n=n.sibling}function Em(n){switch(n.tag){case 0:case 11:case 15:Ws(n),n.flags&2048&&di(9,n,n.return);break;case 3:Ws(n);break;case 12:Ws(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Da(n)):Ws(n);break;default:Ws(n)}}function Da(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];lt=u,Cm(u,n)}Sm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:di(8,s,s.return),Da(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Da(s));break;default:Da(s)}n=n.sibling}}function Cm(n,s){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:di(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ls(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,lt=u;else e:for(a=n;lt!==null;){u=lt;var g=u.sibling,v=u.return;if(hm(u),u===a){lt=null;break e}if(g!==null){g.return=v,lt=g;break e}lt=v}}}var ES={getCacheForType:function(n){var s=ht(je),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return ht(je).controller.signal}},CS=typeof WeakMap=="function"?WeakMap:Map,Ne=0,ke=null,ye=null,Te=0,Ie=0,Vt=null,hi=!1,Oo=!1,vc=!1,qn=0,Je=0,pi=0,Xi=0,_c=0,zt=0,qo=0,js=null,Rt=null,Tc=!1,Ua=0,Am=0,Pa=1/0,La=null,mi=null,ot=0,gi=null,Go=null,Gn=0,Sc=0,Ec=null,bm=null,er=0,Cc=null;function Bt(){return(Ne&2)!==0&&Te!==0?Te&-Te:V.T!==null?Nc():Vd()}function Mm(){if(zt===0)if((Te&536870912)===0||Ce){var n=Br;Br<<=1,(Br&3932160)===0&&(Br=262144),zt=n}else zt=536870912;return n=Gt.current,n!==null&&(n.flags|=32),zt}function Nt(n,s,a){(n===ke&&(Ie===2||Ie===9)||n.cancelPendingCommit!==null)&&(Ho(n,0),yi(n,Te,zt,!1)),Ss(n,a),((Ne&2)===0||n!==ke)&&(n===ke&&((Ne&2)===0&&(Xi|=a),Je===4&&yi(n,Te,zt,!1)),yn(n))}function wm(n,s,a){if((Ne&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Ts(n,s),g=u?MS(n,s):bc(n,s,!0),v=u;do{if(g===0){Oo&&!u&&yi(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!AS(a)){g=bc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=n;g=js;var N=A.current.memoizedState.isDehydrated;if(N&&(Ho(A,S).flags|=256),S=bc(A,S,!1),S!==2){if(vc&&!N){A.errorRecoveryDisabledLanes|=v,Xi|=v,g=4;break e}v=Rt,Rt=g,v!==null&&(Rt===null?Rt=v:Rt.push.apply(Rt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Ho(n,0),yi(n,s,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:yi(u,s,zt,!hi);break e;case 2:Rt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Ua+300-Pt(),10<g)){if(yi(u,s,zt,!hi),Yr(u,0,!0)!==0)break e;Gn=s,u.timeoutHandle=og(Rm.bind(null,u,a,Rt,La,Tc,s,zt,Xi,qo,hi,v,"Throttled",-0,0),g);break e}Rm(u,a,Rt,La,Tc,s,zt,Xi,qo,hi,v,null,-0,0)}}break}while(!0);yn(n)}function Rm(n,s,a,u,g,v,S,A,N,O,z,$,G,H){if(n.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},Tm(s,v,$);var ie=(v&62914560)===v?Ua-Pt():(v&4194048)===v?Am-Pt():0;if(ie=lE($,ie),ie!==null){Gn=v,n.cancelPendingCommit=ie(km.bind(null,n,s,v,a,u,g,S,A,N,z,$,null,G,H)),yi(n,v,S,!O);return}}km(n,s,v,a,u,g,S,A,N)}function AS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!Ot(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(n,s,a,u){s&=~_c,s&=~Xi,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var g=s;0<g;){var v=31-kt(g),S=1<<v;u[v]=-1,g&=~S}a!==0&&qd(n,a,s)}function ka(){return(Ne&6)===0?(tr(0),!1):!0}function Ac(){if(ye!==null){if(Ie===0)var n=ye.return;else n=ye,Rn=Vi=null,Hu(n),xo=null,Os=0,n=ye;for(;n!==null;)sm(n.alternate,n),n=n.return;ye=null}}function Ho(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,FS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Gn=0,Ac(),ke=n,ye=a=Mn(n.current,null),Te=s,Ie=0,Vt=null,hi=!1,Oo=Ts(n,s),vc=!1,qo=zt=_c=Xi=pi=Je=0,Rt=js=null,Tc=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var g=31-kt(u),v=1<<g;s|=n[g],u&=~v}return qn=s,ia(),a}function Nm(n,s){he=null,V.H=Ys,s===No||s===fa?(s=Yh(),Ie=3):s===Ru?(s=Yh(),Ie=4):Ie=s===nc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vt=s,ye===null&&(Je=1,ba(n,Qt(s,n.current)))}function xm(){var n=Gt.current;return n===null?!0:(Te&4194048)===Te?jt===null:(Te&62914560)===Te||(Te&536870912)!==0?n===jt:!1}function Im(){var n=V.H;return V.H=Ys,n===null?Ys:n}function Dm(){var n=V.A;return V.A=ES,n}function Oa(){Je=4,hi||(Te&4194048)!==Te&&Gt.current!==null||(Oo=!0),(pi&134217727)===0&&(Xi&134217727)===0||ke===null||yi(ke,Te,zt,!1)}function bc(n,s,a){var u=Ne;Ne|=2;var g=Im(),v=Dm();(ke!==n||Te!==s)&&(La=null,Ho(n,s)),s=!1;var S=Je;e:do try{if(Ie!==0&&ye!==null){var A=ye,N=Vt;switch(Ie){case 8:Ac(),S=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(s=!0);var O=Ie;if(Ie=0,Vt=null,Vo(n,A,N,O),a&&Oo){S=0;break e}break;default:O=Ie,Ie=0,Vt=null,Vo(n,A,N,O)}}bS(),S=Je;break}catch(z){Nm(n,z)}while(!0);return s&&n.shellSuspendCounter++,Rn=Vi=null,Ne=u,V.H=g,V.A=v,ye===null&&(ke=null,Te=0,ia()),S}function bS(){for(;ye!==null;)Um(ye)}function MS(n,s){var a=Ne;Ne|=2;var u=Im(),g=Dm();ke!==n||Te!==s?(La=null,Pa=Pt()+500,Ho(n,s)):Oo=Ts(n,s);e:do try{if(Ie!==0&&ye!==null){s=ye;var v=Vt;t:switch(Ie){case 1:Ie=0,Vt=null,Vo(n,s,v,1);break;case 2:case 9:if(Bh(v)){Ie=0,Vt=null,Pm(s);break}s=function(){Ie!==2&&Ie!==9||ke!==n||(Ie=7),yn(n)},v.then(s,s);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Bh(v)?(Ie=0,Vt=null,Pm(s)):(Ie=0,Vt=null,Vo(n,s,v,7));break;case 5:var S=null;switch(ye.tag){case 26:S=ye.memoizedState;case 5:case 27:var A=ye;if(S?_g(S):A.stateNode.complete){Ie=0,Vt=null;var N=A.sibling;if(N!==null)ye=N;else{var O=A.return;O!==null?(ye=O,qa(O)):ye=null}break t}}Ie=0,Vt=null,Vo(n,s,v,5);break;case 6:Ie=0,Vt=null,Vo(n,s,v,6);break;case 8:Ac(),Je=6;break e;default:throw Error(o(462))}}wS();break}catch(z){Nm(n,z)}while(!0);return Rn=Vi=null,V.H=u,V.A=g,Ne=a,ye!==null?0:(ke=null,Te=0,ia(),Je)}function wS(){for(;ye!==null&&!X_();)Um(ye)}function Um(n){var s=im(n.alternate,n,qn);n.memoizedProps=n.pendingProps,s===null?qa(n):ye=s}function Pm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Zp(a,s,s.pendingProps,s.type,void 0,Te);break;case 11:s=Zp(a,s,s.pendingProps,s.type.render,s.ref,Te);break;case 5:Hu(s);default:sm(a,s),s=ye=Dh(s,qn),s=im(a,s,qn)}n.memoizedProps=n.pendingProps,s===null?qa(n):ye=s}function Vo(n,s,a,u){Rn=Vi=null,Hu(s),xo=null,Os=0;var g=s.return;try{if(mS(n,g,s,a,Te)){Je=1,ba(n,Qt(a,n.current)),ye=null;return}}catch(v){if(g!==null)throw ye=g,v;Je=1,ba(n,Qt(a,n.current)),ye=null;return}s.flags&32768?(Ce||u===1?n=!0:Oo||(Te&536870912)!==0?n=!1:(hi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Lm(s,n)):qa(s)}function qa(n){var s=n;do{if((s.flags&32768)!==0){Lm(s,hi);return}n=s.return;var a=vS(s.alternate,s,qn);if(a!==null){ye=a;return}if(s=s.sibling,s!==null){ye=s;return}ye=s=n}while(s!==null);Je===0&&(Je=5)}function Lm(n,s){do{var a=_S(n.alternate,n);if(a!==null){a.flags&=32767,ye=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ye=n;return}ye=n=a}while(n!==null);Je=6,ye=null}function km(n,s,a,u,g,v,S,A,N){n.cancelPendingCommit=null;do Ga();while(ot!==0);if((Ne&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=hu,rT(n,a,v,S,A,N),n===ke&&(ye=ke=null,Te=0),Go=s,gi=n,Gn=a,Sc=v,Ec=g,bm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,IS(Vr,function(){return Vm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,g=Z.p,Z.p=2,S=Ne,Ne|=4;try{TS(n,s,a)}finally{Ne=S,Z.p=g,V.T=u}}ot=1,Om(),qm(),Gm()}}function Om(){if(ot===1){ot=0;var n=gi,s=Go,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var u=Z.p;Z.p=2;var g=Ne;Ne|=4;try{ym(s,n);var v=Oc,S=Ch(n.containerInfo),A=v.focusedElem,N=v.selectionRange;if(S!==A&&A&&A.ownerDocument&&Eh(A.ownerDocument.documentElement,A)){if(N!==null&&lu(A)){var O=N.start,z=N.end;if(z===void 0&&(z=O),"selectionStart"in A)A.selectionStart=O,A.selectionEnd=Math.min(z,A.value.length);else{var $=A.ownerDocument||document,G=$&&$.defaultView||window;if(G.getSelection){var H=G.getSelection(),ie=A.textContent.length,ce=Math.min(N.start,ie),Le=N.end===void 0?ce:Math.min(N.end,ie);!H.extend&&ce>Le&&(S=Le,Le=ce,ce=S);var P=Sh(A,ce),I=Sh(A,Le);if(P&&I&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==I.node||H.focusOffset!==I.offset)){var k=$.createRange();k.setStart(P.node,P.offset),H.removeAllRanges(),ce>Le?(H.addRange(k),H.extend(I.node,I.offset)):(k.setEnd(I.node,I.offset),H.addRange(k))}}}}for($=[],H=A;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<$.length;A++){var F=$[A];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Za=!!kc,Oc=kc=null}finally{Ne=g,Z.p=u,V.T=a}}n.current=s,ot=2}}function qm(){if(ot===2){ot=0;var n=gi,s=Go,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var u=Z.p;Z.p=2;var g=Ne;Ne|=4;try{dm(n,s.alternate,s)}finally{Ne=g,Z.p=u,V.T=a}}ot=3}}function Gm(){if(ot===4||ot===3){ot=0,Z_();var n=gi,s=Go,a=Gn,u=bm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ot=5:(ot=0,Go=gi=null,Hm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(mi=null),Bl(a),s=s.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(_s,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=V.T,g=Z.p,Z.p=2,V.T=null;try{for(var v=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];v(A.value,{componentStack:A.stack})}}finally{V.T=s,Z.p=g}}(Gn&3)!==0&&Ga(),yn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===Cc?er++:(er=0,Cc=n):er=0,tr(0)}}function Hm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ls(s)))}function Ga(){return Om(),qm(),Gm(),Vm()}function Vm(){if(ot!==5)return!1;var n=gi,s=Sc;Sc=0;var a=Bl(Gn),u=V.T,g=Z.p;try{Z.p=32>a?32:a,V.T=null,a=Ec,Ec=null;var v=gi,S=Gn;if(ot=0,Go=gi=null,Gn=0,(Ne&6)!==0)throw Error(o(331));var A=Ne;if(Ne|=4,Em(v.current),_m(v,v.current,S,a),Ne=A,tr(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(_s,v)}catch{}return!0}finally{Z.p=g,V.T=u,Hm(n,s)}}function zm(n,s,a){s=Qt(a,s),s=tc(n.stateNode,s,2),n=ui(n,s,2),n!==null&&(Ss(n,2),yn(n))}function De(n,s,a){if(n.tag===3)zm(n,n,a);else for(;s!==null;){if(s.tag===3){zm(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mi===null||!mi.has(u))){n=Qt(a,n),a=Bp(2),u=ui(s,a,2),u!==null&&(Fp(a,u,s,n),Ss(u,2),yn(u));break}}s=s.return}}function Mc(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new CS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(vc=!0,g.add(a),n=RS.bind(null,n,s,a),s.then(n,n))}function RS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ke===n&&(Te&a)===a&&(Je===4||Je===3&&(Te&62914560)===Te&&300>Pt()-Ua?(Ne&2)===0&&Ho(n,0):_c|=a,qo===Te&&(qo=0)),yn(n)}function Bm(n,s){s===0&&(s=Od()),n=qi(n,s),n!==null&&(Ss(n,s),yn(n))}function NS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Bm(n,a)}function xS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Bm(n,a)}function IS(n,s){return ao(n,s)}var Ha=null,zo=null,wc=!1,Va=!1,Rc=!1,vi=0;function yn(n){n!==zo&&n.next===null&&(zo===null?Ha=zo=n:zo=zo.next=n),Va=!0,wc||(wc=!0,US())}function tr(n,s){if(!Rc&&Va){Rc=!0;do for(var a=!1,u=Ha;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-kt(42|n)+1)-1,v&=g&~(S&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Jm(u,v))}else v=Te,v=Yr(u,u===ke?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Ts(u,v)||(a=!0,Jm(u,v));u=u.next}while(a);Rc=!1}}function DS(){Fm()}function Fm(){Va=wc=!1;var n=0;vi!==0&&BS()&&(n=vi);for(var s=Pt(),a=null,u=Ha;u!==null;){var g=u.next,v=Ym(u,s);v===0?(u.next=null,a===null?Ha=g:a.next=g,g===null&&(zo=a)):(a=u,(n!==0||(v&3)!==0)&&(Va=!0)),u=g}ot!==0&&ot!==5||tr(n),vi!==0&&(vi=0)}function Ym(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-kt(v),A=1<<S,N=g[S];N===-1?((A&a)===0||(A&u)!==0)&&(g[S]=sT(A,s)):N<=s&&(n.expiredLanes|=A),v&=~A}if(s=ke,a=Te,a=Yr(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Ie===2||Ie===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Hl(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ts(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Hl(u),Bl(a)){case 2:case 8:a=Ld;break;case 32:a=Vr;break;case 268435456:a=kd;break;default:a=Vr}return u=$m.bind(null,n),a=ao(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Hl(u),n.callbackPriority=2,n.callbackNode=null,2}function $m(n,s){if(ot!==0&&ot!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ga()&&n.callbackNode!==a)return null;var u=Te;return u=Yr(n,n===ke?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(wm(n,u,s),Ym(n,Pt()),n.callbackNode!=null&&n.callbackNode===a?$m.bind(null,n):null)}function Jm(n,s){if(Ga())return null;wm(n,s,!0)}function US(){YS(function(){(Ne&6)!==0?ao(Pd,DS):Fm()})}function Nc(){if(vi===0){var n=wo;n===0&&(n=zr,zr<<=1,(zr&261888)===0&&(zr=256)),vi=n}return vi}function Km(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qr(""+n)}function Qm(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function PS(n,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=Km((g[Ct]||null).action),S=u.submitter;S&&(s=(s=S[Ct]||null)?Km(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var A=new jr("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vi!==0){var N=S?Qm(g,S):new FormData(g);Qu(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(A.preventDefault(),N=S?Qm(g,S):new FormData(g),Qu(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var xc=0;xc<du.length;xc++){var Ic=du[xc],LS=Ic.toLowerCase(),kS=Ic[0].toUpperCase()+Ic.slice(1);rn(LS,"on"+kS)}rn(Mh,"onAnimationEnd"),rn(wh,"onAnimationIteration"),rn(Rh,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(WT,"onTransitionRun"),rn(jT,"onTransitionStart"),rn(eS,"onTransitionCancel"),rn(Nh,"onTransitionEnd"),ho("onMouseEnter",["mouseout","mouseover"]),ho("onMouseLeave",["mouseout","mouseover"]),ho("onPointerEnter",["pointerout","pointerover"]),ho("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nr));function Xm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],N=A.instance,O=A.currentTarget;if(A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){na(z)}g.currentTarget=null,v=N}else for(S=0;S<u.length;S++){if(A=u[S],N=A.instance,O=A.currentTarget,A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){na(z)}g.currentTarget=null,v=N}}}}function ve(n,s){var a=s[Fl];a===void 0&&(a=s[Fl]=new Set);var u=n+"__bubble";a.has(u)||(Zm(s,n,2,!1),a.add(u))}function Dc(n,s,a){var u=0;s&&(u|=4),Zm(a,n,u,s)}var za="_reactListening"+Math.random().toString(36).slice(2);function Uc(n){if(!n[za]){n[za]=!0,Fd.forEach(function(a){a!=="selectionchange"&&(OS.has(a)||Dc(a,!1,n),Dc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[za]||(s[za]=!0,Dc("selectionchange",!1,s))}}function Zm(n,s,a,u){switch(Mg(s)){case 2:var g=fE;break;case 8:g=dE;break;default:g=Kc}a=g.bind(null,s,a,n),g=void 0,!jl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function Pc(n,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=uo(A),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=v=S;continue e}A=A.parentNode}}u=u.return}nh(function(){var O=v,z=Zl(a),$=[];e:{var G=xh.get(n);if(G!==void 0){var H=jr,ie=n;switch(n){case"keypress":if(Zr(a)===0)break e;case"keydown":case"keyup":H=xT;break;case"focusin":ie="focus",H=iu;break;case"focusout":ie="blur",H=iu;break;case"beforeblur":case"afterblur":H=iu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=vT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=UT;break;case Mh:case wh:case Rh:H=ST;break;case Nh:H=LT;break;case"scroll":case"scrollend":H=gT;break;case"wheel":H=OT;break;case"copy":case"cut":case"paste":H=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=ah;break;case"toggle":case"beforetoggle":H=GT}var ce=(s&4)!==0,Le=!ce&&(n==="scroll"||n==="scrollend"),P=ce?G!==null?G+"Capture":null:G;ce=[];for(var I=O,k;I!==null;){var F=I;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||P===null||(F=As(I,P),F!=null&&ce.push(ir(I,F,k))),Le)break;I=I.return}0<ce.length&&(G=new H(G,ie,null,a,z),$.push({event:G,listeners:ce}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",G&&a!==Xl&&(ie=a.relatedTarget||a.fromElement)&&(uo(ie)||ie[lo]))break e;if((H||G)&&(G=z.window===z?z:(G=z.ownerDocument)?G.defaultView||G.parentWindow:window,H?(ie=a.relatedTarget||a.toElement,H=O,ie=ie?uo(ie):null,ie!==null&&(Le=l(ie),ce=ie.tag,ie!==Le||ce!==5&&ce!==27&&ce!==6)&&(ie=null)):(H=null,ie=O),H!==ie)){if(ce=sh,F="onMouseLeave",P="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ce=ah,F="onPointerLeave",P="onPointerEnter",I="pointer"),Le=H==null?G:Cs(H),k=ie==null?G:Cs(ie),G=new ce(F,I+"leave",H,a,z),G.target=Le,G.relatedTarget=k,F=null,uo(z)===O&&(ce=new ce(P,I+"enter",ie,a,z),ce.target=k,ce.relatedTarget=Le,F=ce),Le=F,H&&ie)t:{for(ce=qS,P=H,I=ie,k=0,F=P;F;F=ce(F))k++;F=0;for(var le=I;le;le=ce(le))F++;for(;0<k-F;)P=ce(P),k--;for(;0<F-k;)I=ce(I),F--;for(;k--;){if(P===I||I!==null&&P===I.alternate){ce=P;break t}P=ce(P),I=ce(I)}ce=null}else ce=null;H!==null&&Wm($,G,H,ce,!1),ie!==null&&Le!==null&&Wm($,Le,ie,ce,!0)}}e:{if(G=O?Cs(O):window,H=G.nodeName&&G.nodeName.toLowerCase(),H==="select"||H==="input"&&G.type==="file")var Me=mh;else if(hh(G))if(gh)Me=QT;else{Me=JT;var oe=$T}else H=G.nodeName,!H||H.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?O&&Ql(O.elementType)&&(Me=mh):Me=KT;if(Me&&(Me=Me(n,O))){ph($,Me,a,z);break e}oe&&oe(n,G,O),n==="focusout"&&O&&G.type==="number"&&O.memoizedProps.value!=null&&Kl(G,"number",G.value)}switch(oe=O?Cs(O):window,n){case"focusin":(hh(oe)||oe.contentEditable==="true")&&(_o=oe,uu=O,Ds=null);break;case"focusout":Ds=uu=_o=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,Ah($,a,z);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":Ah($,a,z)}var pe;if(su)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else vo?fh(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(lh&&a.locale!=="ko"&&(vo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&vo&&(pe=ih()):(ni=z,eu="value"in ni?ni.value:ni.textContent,vo=!0)),oe=Ba(O,Se),0<oe.length&&(Se=new rh(Se,n,null,a,z),$.push({event:Se,listeners:oe}),pe?Se.data=pe:(pe=dh(a),pe!==null&&(Se.data=pe)))),(pe=VT?zT(n,a):BT(n,a))&&(Se=Ba(O,"onBeforeInput"),0<Se.length&&(oe=new rh("onBeforeInput","beforeinput",null,a,z),$.push({event:oe,listeners:Se}),oe.data=pe)),PS($,n,O,a,z)}Xm($,s)})}function ir(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ba(n,s){for(var a=s+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=As(n,a),g!=null&&u.unshift(ir(n,g,v)),g=As(n,s),g!=null&&u.push(ir(n,g,v))),n.tag===3)return u;n=n.return}return[]}function qS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Wm(n,s,a,u,g){for(var v=s._reactName,S=[];a!==null&&a!==u;){var A=a,N=A.alternate,O=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||O===null||(N=O,g?(O=As(a,v),O!=null&&S.unshift(ir(a,O,N))):g||(O=As(a,v),O!=null&&S.push(ir(a,O,N)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var GS=/\r\n?/g,HS=/\u0000|\uFFFD/g;function jm(n){return(typeof n=="string"?n:""+n).replace(GS,`
`).replace(HS,"")}function eg(n,s){return s=jm(s),jm(n)===s}function Pe(n,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mo(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mo(n,""+u);break;case"className":Jr(n,"class",u);break;case"tabIndex":Jr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Jr(n,a,u);break;case"style":eh(n,u,v);break;case"data":if(s!=="object"){Jr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Qr(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&Pe(n,s,"name",g.name,g,null),Pe(n,s,"formEncType",g.formEncType,g,null),Pe(n,s,"formMethod",g.formMethod,g,null),Pe(n,s,"formTarget",g.formTarget,g,null)):(Pe(n,s,"encType",g.encType,g,null),Pe(n,s,"method",g.method,g,null),Pe(n,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Qr(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=An);break;case"onScroll":u!=null&&ve("scroll",n);break;case"onScrollEnd":u!=null&&ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Qr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":ve("beforetoggle",n),ve("toggle",n),$r(n,"popover",u);break;case"xlinkActuate":Cn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Cn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Cn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Cn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Cn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Cn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Cn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$r(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=pT.get(a)||a,$r(n,a,u))}}function Lc(n,s,a,u,g,v){switch(a){case"style":eh(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?mo(n,u):(typeof u=="number"||typeof u=="bigint")&&mo(n,""+u);break;case"onScroll":u!=null&&ve("scroll",n);break;case"onScrollEnd":u!=null&&ve("scrollend",n);break;case"onClick":u!=null&&(n.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[Ct]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):$r(n,a,u)}}}function mt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",n),ve("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Pe(n,s,v,S,a,null)}}g&&Pe(n,s,"srcSet",a.srcSet,a,null),u&&Pe(n,s,"src",a.src,a,null);return;case"input":ve("invalid",n);var A=v=S=g=null,N=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":g=z;break;case"type":S=z;break;case"checked":N=z;break;case"defaultChecked":O=z;break;case"value":v=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Pe(n,s,u,z,a,null)}}Xd(n,v,A,N,O,S,g,!1);return;case"select":ve("invalid",n),u=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(A=a[g],A!=null))switch(g){case"value":v=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:Pe(n,s,g,A,a,null)}s=v,a=S,n.multiple=!!u,s!=null?po(n,!!u,s,!1):a!=null&&po(n,!!u,a,!0);return;case"textarea":ve("invalid",n),v=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(A=a[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:Pe(n,s,S,A,a,null)}Wd(n,u,g,v);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Pe(n,s,N,u,a,null)}return;case"dialog":ve("beforetoggle",n),ve("toggle",n),ve("cancel",n),ve("close",n);break;case"iframe":case"object":ve("load",n);break;case"video":case"audio":for(u=0;u<nr.length;u++)ve(nr[u],n);break;case"image":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"embed":case"source":case"link":ve("error",n),ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Pe(n,s,O,u,a,null)}return;default:if(Ql(s)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&Lc(n,s,z,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&Pe(n,s,A,u,a,null))}function VS(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,A=null,N=null,O=null,z=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=$;default:u.hasOwnProperty(H)||Pe(n,s,H,null,u,$)}}for(var G in u){var H=u[G];if($=a[G],u.hasOwnProperty(G)&&(H!=null||$!=null))switch(G){case"type":v=H;break;case"name":g=H;break;case"checked":O=H;break;case"defaultChecked":z=H;break;case"value":S=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:H!==$&&Pe(n,s,G,H,u,$)}}Jl(n,S,A,N,O,z,v,g);return;case"select":H=S=A=G=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":H=N;default:u.hasOwnProperty(v)||Pe(n,s,v,null,u,N)}for(g in u)if(v=u[g],N=a[g],u.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":G=v;break;case"defaultValue":A=v;break;case"multiple":S=v;default:v!==N&&Pe(n,s,g,v,u,N)}s=A,a=S,u=H,G!=null?po(n,!!a,G,!1):!!u!=!!a&&(s!=null?po(n,!!a,s,!0):po(n,!!a,a?[]:"",!1));return;case"textarea":H=G=null;for(A in a)if(g=a[A],a.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Pe(n,s,A,null,u,g)}for(S in u)if(g=u[S],v=a[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":G=g;break;case"defaultValue":H=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&Pe(n,s,S,g,u,v)}Zd(n,G,H);return;case"option":for(var ie in a)if(G=a[ie],a.hasOwnProperty(ie)&&G!=null&&!u.hasOwnProperty(ie))switch(ie){case"selected":n.selected=!1;break;default:Pe(n,s,ie,null,u,G)}for(N in u)if(G=u[N],H=a[N],u.hasOwnProperty(N)&&G!==H&&(G!=null||H!=null))switch(N){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Pe(n,s,N,G,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)G=a[ce],a.hasOwnProperty(ce)&&G!=null&&!u.hasOwnProperty(ce)&&Pe(n,s,ce,null,u,G);for(O in u)if(G=u[O],H=a[O],u.hasOwnProperty(O)&&G!==H&&(G!=null||H!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,s));break;default:Pe(n,s,O,G,u,H)}return;default:if(Ql(s)){for(var Le in a)G=a[Le],a.hasOwnProperty(Le)&&G!==void 0&&!u.hasOwnProperty(Le)&&Lc(n,s,Le,void 0,u,G);for(z in u)G=u[z],H=a[z],!u.hasOwnProperty(z)||G===H||G===void 0&&H===void 0||Lc(n,s,z,G,u,H);return}}for(var P in a)G=a[P],a.hasOwnProperty(P)&&G!=null&&!u.hasOwnProperty(P)&&Pe(n,s,P,null,u,G);for($ in u)G=u[$],H=a[$],!u.hasOwnProperty($)||G===H||G==null&&H==null||Pe(n,s,$,G,u,H)}function tg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,S=g.initiatorType,A=g.duration;if(v&&A&&tg(S)){for(S=0,A=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],O=N.startTime;if(O>A)break;var z=N.transferSize,$=N.initiatorType;z&&tg($)&&(N=N.responseEnd,S+=z*(N<A?1:(A-O)/(N-O)))}if(--u,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var kc=null,Oc=null;function Fa(n){return n.nodeType===9?n:n.ownerDocument}function ng(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ig(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function qc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gc=null;function BS(){var n=window.event;return n&&n.type==="popstate"?n===Gc?!1:(Gc=n,!0):(Gc=null,!1)}var og=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,YS=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(n){return sg.resolve(null).then(n).catch($S)}:og;function $S(n){setTimeout(function(){throw n})}function _i(n){return n==="head"}function rg(n,s){var a=s,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),$o(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")or(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,or(a);for(var v=a.firstChild;v;){var S=v.nextSibling,A=v.nodeName;v[Es]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&or(n.ownerDocument.body);a=g}while(a);$o(s)}function ag(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Hc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hc(a),Yl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function JS(n,s,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Es])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=en(n.nextSibling),n===null)break}return null}function KS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=en(n.nextSibling),n===null))return null;return n}function lg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=en(n.nextSibling),n===null))return null;return n}function Vc(n){return n.data==="$?"||n.data==="$~"}function zc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function QS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function en(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Bc=null;function ug(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return en(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function cg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function fg(n,s,a){switch(s=Fa(a),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function or(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Yl(n)}var tn=new Map,dg=new Set;function Ya(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Hn=Z.d;Z.d={f:XS,r:ZS,D:WS,C:jS,L:eE,m:tE,X:iE,S:nE,M:oE};function XS(){var n=Hn.f(),s=ka();return n||s}function ZS(n){var s=co(n);s!==null&&s.tag===5&&s.type==="form"?Np(s):Hn.r(n)}var Bo=typeof document>"u"?null:document;function hg(n,s,a){var u=Bo;if(u&&typeof s=="string"&&s){var g=Jt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),dg.has(g)||(dg.add(g),n={rel:n,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),mt(s,"link",n),at(s),u.head.appendChild(s)))}}function WS(n){Hn.D(n),hg("dns-prefetch",n,null)}function jS(n,s){Hn.C(n,s),hg("preconnect",n,s)}function eE(n,s,a){Hn.L(n,s,a);var u=Bo;if(u&&n&&s){var g='link[rel="preload"][as="'+Jt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Jt(a.imageSizes)+'"]')):g+='[href="'+Jt(n)+'"]';var v=g;switch(s){case"style":v=Fo(n);break;case"script":v=Yo(n)}tn.has(v)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),tn.set(v,n),u.querySelector(g)!==null||s==="style"&&u.querySelector(sr(v))||s==="script"&&u.querySelector(rr(v))||(s=u.createElement("link"),mt(s,"link",n),at(s),u.head.appendChild(s)))}}function tE(n,s){Hn.m(n,s);var a=Bo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Jt(u)+'"][href="'+Jt(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Yo(n)}if(!tn.has(v)&&(n=_({rel:"modulepreload",href:n},s),tn.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(rr(v)))return}u=a.createElement("link"),mt(u,"link",n),at(u),a.head.appendChild(u)}}}function nE(n,s,a){Hn.S(n,s,a);var u=Bo;if(u&&n){var g=fo(u).hoistableStyles,v=Fo(n);s=s||"default";var S=g.get(v);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(sr(v)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=tn.get(v))&&Fc(n,a);var N=S=u.createElement("link");at(N),mt(N,"link",n),N._p=new Promise(function(O,z){N.onload=O,N.onerror=z}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,$a(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(v,S)}}}function iE(n,s){Hn.X(n,s);var a=Bo;if(a&&n){var u=fo(a).hoistableScripts,g=Yo(n),v=u.get(g);v||(v=a.querySelector(rr(g)),v||(n=_({src:n,async:!0},s),(s=tn.get(g))&&Yc(n,s),v=a.createElement("script"),at(v),mt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function oE(n,s){Hn.M(n,s);var a=Bo;if(a&&n){var u=fo(a).hoistableScripts,g=Yo(n),v=u.get(g);v||(v=a.querySelector(rr(g)),v||(n=_({src:n,async:!0,type:"module"},s),(s=tn.get(g))&&Yc(n,s),v=a.createElement("script"),at(v),mt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function pg(n,s,a,u){var g=(g=ge.current)?Ya(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Fo(a.href),a=fo(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Fo(a.href);var v=fo(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(sr(n)))&&!v._p&&(S.instance=v,S.state.loading=5),tn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tn.set(n,a),v||sE(g,n,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yo(a),a=fo(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Fo(n){return'href="'+Jt(n)+'"'}function sr(n){return'link[rel="stylesheet"]['+n+"]"}function mg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function sE(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),mt(s,"link",a),at(s),n.head.appendChild(s))}function Yo(n){return'[src="'+Jt(n)+'"]'}function rr(n){return"script[async]"+n}function gg(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(u)return s.instance=u,at(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),at(u),mt(u,"style",g),$a(u,a.precedence,n),s.instance=u;case"stylesheet":g=Fo(a.href);var v=n.querySelector(sr(g));if(v)return s.state.loading|=4,s.instance=v,at(v),v;u=mg(a),(g=tn.get(g))&&Fc(u,g),v=(n.ownerDocument||n).createElement("link"),at(v);var S=v;return S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),mt(v,"link",u),s.state.loading|=4,$a(v,a.precedence,n),s.instance=v;case"script":return v=Yo(a.src),(g=n.querySelector(rr(v)))?(s.instance=g,at(g),g):(u=a,(g=tn.get(v))&&(u=_({},a),Yc(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),at(g),mt(g,"link",u),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,$a(u,a.precedence,n));return s.instance}function $a(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)v=A;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Fc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Yc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ja=null;function yg(n,s,a){if(Ja===null){var u=new Map,g=Ja=new Map;g.set(a,u)}else g=Ja,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[Es]||v[ft]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var A=u.get(S);A?A.push(v):u.set(S,[v])}}return u}function vg(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function rE(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _g(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function aE(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Fo(u.href),v=s.querySelector(sr(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Ka.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,at(v);return}v=s.ownerDocument||s,u=mg(u),(g=tn.get(g))&&Fc(u,g),v=v.createElement("link"),at(v);var S=v;S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),mt(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Ka.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var $c=0;function lE(n,s){return n.stylesheets&&n.count===0&&Xa(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&Xa(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&$c===0&&($c=62500*zS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Xa(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>$c?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Ka(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xa(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Qa=null;function Xa(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Qa=new Map,s.forEach(uE,n),Qa=null,Ka.call(n))}function uE(n,s){if(!(s.state.loading&4)){var a=Qa.get(n);if(a)var u=a.get(null);else{a=new Map,Qa.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||u,v===u&&a.set(null,g),a.set(S,g),this.count++,u=Ka.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var ar={$$typeof:U,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function cE(n,s,a,u,g,v,S,A,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.hiddenUpdates=Vl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Tg(n,s,a,u,g,v,S,A,N,O,z,$){return n=new cE(n,s,a,S,N,O,z,$,A),s=1,v===!0&&(s|=24),v=qt(3,null,null,s),n.current=v,v.stateNode=n,s=bu(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},Nu(v),n}function Sg(n){return n?(n=Eo,n):Eo}function Eg(n,s,a,u,g,v){g=Sg(g),u.context===null?u.context=g:u.pendingContext=g,u=li(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=ui(n,u,s),a!==null&&(Nt(a,n,s),Gs(a,n,s))}function Cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Jc(n,s){Cg(n,s),(n=n.alternate)&&Cg(n,s)}function Ag(n){if(n.tag===13||n.tag===31){var s=qi(n,67108864);s!==null&&Nt(s,n,67108864),Jc(n,67108864)}}function bg(n){if(n.tag===13||n.tag===31){var s=Bt();s=zl(s);var a=qi(n,s);a!==null&&Nt(a,n,s),Jc(n,s)}}var Za=!0;function fE(n,s,a,u){var g=V.T;V.T=null;var v=Z.p;try{Z.p=2,Kc(n,s,a,u)}finally{Z.p=v,V.T=g}}function dE(n,s,a,u){var g=V.T;V.T=null;var v=Z.p;try{Z.p=8,Kc(n,s,a,u)}finally{Z.p=v,V.T=g}}function Kc(n,s,a,u){if(Za){var g=Qc(u);if(g===null)Pc(n,s,u,Wa,a),wg(n,u);else if(pE(g,n,s,a,u))u.stopPropagation();else if(wg(n,u),s&4&&-1<hE.indexOf(n)){for(;g!==null;){var v=co(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ui(v.pendingLanes);if(S!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var N=1<<31-kt(S);A.entanglements[1]|=N,S&=~N}yn(v),(Ne&6)===0&&(Pa=Pt()+500,tr(0))}}break;case 31:case 13:A=qi(v,2),A!==null&&Nt(A,v,2),ka(),Jc(v,2)}if(v=Qc(u),v===null&&Pc(n,s,u,Wa,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else Pc(n,s,u,null,a)}}function Qc(n){return n=Zl(n),Xc(n)}var Wa=null;function Xc(n){if(Wa=null,n=uo(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Wa=n,null}function Mg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(W_()){case Pd:return 2;case Ld:return 8;case Vr:case j_:return 32;case kd:return 268435456;default:return 32}default:return 32}}var Zc=!1,Ti=null,Si=null,Ei=null,lr=new Map,ur=new Map,Ci=[],hE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wg(n,s){switch(n){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":lr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(s.pointerId)}}function cr(n,s,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=co(s),s!==null&&Ag(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function pE(n,s,a,u,g){switch(s){case"focusin":return Ti=cr(Ti,n,s,a,u,g),!0;case"dragenter":return Si=cr(Si,n,s,a,u,g),!0;case"mouseover":return Ei=cr(Ei,n,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return lr.set(v,cr(lr.get(v)||null,n,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,ur.set(v,cr(ur.get(v)||null,n,s,a,u,g)),!0}return!1}function Rg(n){var s=uo(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,zd(n.priority,function(){bg(a)});return}}else if(s===31){if(s=f(a),s!==null){n.blockedOn=s,zd(n.priority,function(){bg(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ja(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Qc(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Xl=u,a.target.dispatchEvent(u),Xl=null}else return s=co(a),s!==null&&Ag(s),n.blockedOn=a,!1;s.shift()}return!0}function Ng(n,s,a){ja(n)&&a.delete(s)}function mE(){Zc=!1,Ti!==null&&ja(Ti)&&(Ti=null),Si!==null&&ja(Si)&&(Si=null),Ei!==null&&ja(Ei)&&(Ei=null),lr.forEach(Ng),ur.forEach(Ng)}function el(n,s){n.blockedOn===s&&(n.blockedOn=null,Zc||(Zc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mE)))}var tl=null;function xg(n){tl!==n&&(tl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tl===n&&(tl=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],g=n[s+2];if(typeof u!="function"){if(Xc(u||a)===null)continue;break}var v=co(a);v!==null&&(n.splice(s,3),s-=3,Qu(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function $o(n){function s(N){return el(N,n)}Ti!==null&&el(Ti,n),Si!==null&&el(Si,n),Ei!==null&&el(Ei,n),lr.forEach(s),ur.forEach(s);for(var a=0;a<Ci.length;a++){var u=Ci[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ci.length&&(a=Ci[0],a.blockedOn===null);)Rg(a),a.blockedOn===null&&Ci.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],S=g[Ct]||null;if(typeof v=="function")S||xg(a);else if(S){var A=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Ct]||null)A=S.formAction;else if(Xc(g)!==null)continue}else A=S.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),xg(a)}}}function Ig(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Wc(n){this._internalRoot=n}nl.prototype.render=Wc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Bt();Eg(a,u,n,s,null,null)},nl.prototype.unmount=Wc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Eg(n.current,2,null,n,null,null),ka(),s[lo]=null}};function nl(n){this._internalRoot=n}nl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Vd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ci.length&&s!==0&&s<Ci[a].priority;a++);Ci.splice(a,0,n),a===0&&Rg(n)}};var Dg=e.version;if(Dg!=="19.2.0")throw Error(o(527,Dg,"19.2.0"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var gE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{_s=il.inject(gE),Lt=il}catch{}}return dr.createRoot=function(n,s){if(!r(n))throw Error(o(299));var a=!1,u="",g=Gp,v=Hp,S=Vp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Tg(n,1,!1,null,null,a,u,null,g,v,S,Ig),n[lo]=s.current,Uc(n),new Wc(s)},dr.hydrateRoot=function(n,s,a){if(!r(n))throw Error(o(299));var u=!1,g="",v=Gp,S=Hp,A=Vp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=Tg(n,1,!0,s,a??null,u,g,N,v,S,A,Ig),s.context=Sg(null),a=s.current,u=Bt(),u=zl(u),g=li(u),g.callback=null,ui(a,g,u),a=u,s.current.lanes=a,Ss(s,a),yn(s),n[lo]=s.current,Uc(n),new nl(s)},dr.version="19.2.0",dr}var zg;function ME(){if(zg)return tf.exports;zg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tf.exports=bE(),tf.exports}var wE=ME();var Bg="popstate";function RE(t={}){function e(o,r){let{pathname:l,search:c,hash:f}=o.location;return gf("",{pathname:l,search:c,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(o,r){return typeof r=="string"?r:Ir(r)}return xE(e,i,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NE(){return Math.random().toString(36).substring(2,10)}function Fg(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,i=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ls(e):e,state:i,key:e&&e.key||o||NE()}}function Ir({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ls(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function xE(t,e,i,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,f="POP",p=null,h=y();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let w=y(),R=w==null?null:w-h;h=w,p&&p({action:f,location:M.location,delta:R})}function T(w,R){f="PUSH";let D=gf(M.location,w,R);h=y()+1;let U=Fg(D,h),J=M.createHref(D);try{c.pushState(U,"",J)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(J)}l&&p&&p({action:f,location:M.location,delta:1})}function E(w,R){f="REPLACE";let D=gf(M.location,w,R);h=y();let U=Fg(D,h),J=M.createHref(D);c.replaceState(U,"",J),l&&p&&p({action:f,location:M.location,delta:0})}function b(w){return IE(w)}let M={get action(){return f},get location(){return t(r,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(Bg,_),p=w,()=>{r.removeEventListener(Bg,_),p=null}},createHref(w){return e(r,w)},createURL:b,encodeLocation(w){let R=b(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:E,go(w){return c.go(w)}};return M}function IE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(i,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:Ir(t);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function c0(t,e,i="/"){return DE(t,e,i,!1)}function DE(t,e,i,o){let r=typeof e=="string"?ls(e):e,l=Kn(r.pathname||"/",i);if(l==null)return null;let c=f0(t);UE(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let h=FE(l);f=zE(c[p],h,o)}return f}function f0(t,e=[],i=[],o="",r=!1){let l=(c,f,p=r,h)=>{let y={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Fe(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=$n([o,y.relativePath]),T=i.concat(y);c.children&&c.children.length>0&&(Fe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),f0(c.children,e,T,_,p)),!(c.path==null&&!c.index)&&e.push({path:_,score:HE(_,c.index),routesMeta:T})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let p of d0(c.path))l(c,f,!0,p)}),e}function d0(t){let e=t.split("/");if(e.length===0)return[];let[i,...o]=e,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=d0(o.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),r&&f.push(...c),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function UE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:VE(e.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var PE=/^:[\w-]+$/,LE=3,kE=2,OE=1,qE=10,GE=-2,Yg=t=>t==="*";function HE(t,e){let i=t.split("/"),o=i.length;return i.some(Yg)&&(o+=GE),e&&(o+=kE),i.filter(r=>!Yg(r)).reduce((r,l)=>r+(PE.test(l)?LE:l===""?OE:qE),o)}function VE(t,e){return t.length===e.length&&t.slice(0,-1).every((o,r)=>o===e[r])?t[t.length-1]-e[e.length-1]:0}function zE(t,e,i=!1){let{routesMeta:o}=t,r={},l="/",c=[];for(let f=0;f<o.length;++f){let p=o[f],h=f===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=vl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),T=p.route;if(!_&&h&&i&&!o[o.length-1].route.index&&(_=vl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:$n([l,_.pathname]),pathnameBase:QE($n([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=$n([l,_.pathnameBase]))}return c}function vl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,o]=BE(t.path,t.caseSensitive,t.end),r=e.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:o.reduce((h,{paramName:y,isOptional:_},T)=>{if(y==="*"){let b=f[T]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const E=f[T];return _&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function BE(t,e=!1,i=!0){sn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(o.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function FE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,o=t.charAt(i);return o&&o!=="/"?null:t.slice(i)||"/"}var YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$E=t=>YE.test(t);function JE(t,e="/"){let{pathname:i,search:o="",hash:r=""}=typeof t=="string"?ls(t):t,l;if(i)if($E(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=$g(i.substring(1),"/"):l=$g(i,e)}else l=e;return{pathname:l,search:XE(o),hash:ZE(r)}}function $g(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function rf(t,e,i,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KE(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function h0(t){let e=KE(t);return e.map((i,o)=>o===e.length-1?i.pathname:i.pathnameBase)}function p0(t,e,i,o=!1){let r;typeof t=="string"?r=ls(t):(r={...t},Fe(!r.pathname||!r.pathname.includes("?"),rf("?","pathname","search",r)),Fe(!r.pathname||!r.pathname.includes("#"),rf("#","pathname","hash",r)),Fe(!r.search||!r.search.includes("#"),rf("#","search","hash",r)));let l=t===""||r.pathname==="",c=l?"/":r.pathname,f;if(c==null)f=i;else{let _=e.length-1;if(!o&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}f=_>=0?e[_]:"/"}let p=JE(r,f),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var $n=t=>t.join("/").replace(/\/\/+/g,"/"),QE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var m0=["POST","PUT","PATCH","DELETE"];new Set(m0);var jE=["GET",...m0];new Set(jE);var us=L.createContext(null);us.displayName="DataRouter";var xl=L.createContext(null);xl.displayName="DataRouterState";L.createContext(!1);var g0=L.createContext({isTransitioning:!1});g0.displayName="ViewTransition";var eC=L.createContext(new Map);eC.displayName="Fetchers";var tC=L.createContext(null);tC.displayName="Await";var Tn=L.createContext(null);Tn.displayName="Navigation";var Ur=L.createContext(null);Ur.displayName="Location";var Zn=L.createContext({outlet:null,matches:[],isDataRoute:!1});Zn.displayName="Route";var od=L.createContext(null);od.displayName="RouteError";function nC(t,{relative:e}={}){Fe(Pr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=L.useContext(Tn),{hash:r,pathname:l,search:c}=Lr(t,{relative:e}),f=l;return i!=="/"&&(f=l==="/"?i:$n([i,l])),o.createHref({pathname:f,search:c,hash:r})}function Pr(){return L.useContext(Ur)!=null}function xi(){return Fe(Pr(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ur).location}var y0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v0(t){L.useContext(Tn).static||L.useLayoutEffect(t)}function Il(){let{isDataRoute:t}=L.useContext(Zn);return t?mC():iC()}function iC(){Fe(Pr(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(us),{basename:e,navigator:i}=L.useContext(Tn),{matches:o}=L.useContext(Zn),{pathname:r}=xi(),l=JSON.stringify(h0(o)),c=L.useRef(!1);return v0(()=>{c.current=!0}),L.useCallback((p,h={})=>{if(sn(c.current,y0),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=p0(p,JSON.parse(l),r,h.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:$n([e,y.pathname])),(h.replace?i.replace:i.push)(y,h.state,h)},[e,i,l,r,t])}L.createContext(null);function Lr(t,{relative:e}={}){let{matches:i}=L.useContext(Zn),{pathname:o}=xi(),r=JSON.stringify(h0(i));return L.useMemo(()=>p0(t,JSON.parse(r),o,e==="path"),[t,r,o,e])}function oC(t,e){return _0(t,e)}function _0(t,e,i,o,r){Fe(Pr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=L.useContext(Tn),{matches:c}=L.useContext(Zn),f=c[c.length-1],p=f?f.params:{},h=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let D=_&&_.path||"";T0(h,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let T=xi(),E;if(e){let D=typeof e=="string"?ls(e):e;Fe(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=T;let b=E.pathname||"/",M=b;if(y!=="/"){let D=y.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=c0(t,{pathname:M});sn(_||w!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),sn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=uC(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:$n([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:$n([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,i,o,r);return e&&R?L.createElement(Ur.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},R):R}function sC(){let t=pC(),e=WE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:l},"ErrorBoundary")," or"," ",L.createElement("code",{style:l},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),i?L.createElement("pre",{style:r},i):null,c)}var rC=L.createElement(sC,null),aC=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?L.createElement(Zn.Provider,{value:this.props.routeContext},L.createElement(od.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lC({routeContext:t,match:e,children:i}){let o=L.useContext(us);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Zn.Provider,{value:t},i)}function uC(t,e=[],i=null,o=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Fe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:T,errors:E}=i,b=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!E||E[_.route.id]===void 0);if(_.route.lazy||b){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&o?(y,_)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,T)=>{let E,b=!1,M=null,w=null;i&&(E=c&&_.route.id?c[_.route.id]:void 0,M=_.route.errorElement||rC,f&&(p<0&&T===0?(T0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):p===T&&(b=!0,w=_.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),D=()=>{let U;return E?U=M:b?U=w:_.route.Component?U=L.createElement(_.route.Component,null):_.route.element?U=_.route.element:U=y,L.createElement(lC,{match:_,routeContext:{outlet:y,matches:R,isDataRoute:i!=null},children:U})};return i&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?L.createElement(aC,{location:i.location,revalidation:i.revalidation,component:M,error:E,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:h}):D()},null)}function sd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cC(t){let e=L.useContext(us);return Fe(e,sd(t)),e}function fC(t){let e=L.useContext(xl);return Fe(e,sd(t)),e}function dC(t){let e=L.useContext(Zn);return Fe(e,sd(t)),e}function rd(t){let e=dC(t),i=e.matches[e.matches.length-1];return Fe(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function hC(){return rd("useRouteId")}function pC(){let t=L.useContext(od),e=fC("useRouteError"),i=rd("useRouteError");return t!==void 0?t:e.errors?.[i]}function mC(){let{router:t}=cC("useNavigate"),e=rd("useNavigate"),i=L.useRef(!1);return v0(()=>{i.current=!0}),L.useCallback(async(r,l={})=>{sn(i.current,y0),i.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var Jg={};function T0(t,e,i){!e&&!Jg[t]&&(Jg[t]=!0,sn(!1,i))}L.memo(gC);function gC({routes:t,future:e,state:i,unstable_onError:o}){return _0(t,void 0,i,o,e)}function Jo(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yC({basename:t="/",children:e=null,location:i,navigationType:o="POP",navigator:r,static:l=!1}){Fe(!Pr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=ls(i));let{pathname:p="/",search:h="",hash:y="",state:_=null,key:T="default"}=i,E=L.useMemo(()=>{let b=Kn(p,c);return b==null?null:{location:{pathname:b,search:h,hash:y,state:_,key:T},navigationType:o}},[c,p,h,y,_,T,o]);return sn(E!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:L.createElement(Tn.Provider,{value:f},L.createElement(Ur.Provider,{children:e,value:E}))}function vC({children:t,location:e}){return oC(yf(t),e)}function yf(t,e=[]){let i=[];return L.Children.forEach(t,(o,r)=>{if(!L.isValidElement(o))return;let l=[...e,r];if(o.type===L.Fragment){i.push.apply(i,yf(o.props.children,l));return}Fe(o.type===Jo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=yf(o.props.children,l)),i.push(c)}),i}var ul="get",cl="application/x-www-form-urlencoded";function Dl(t){return t!=null&&typeof t.tagName=="string"}function _C(t){return Dl(t)&&t.tagName.toLowerCase()==="button"}function TC(t){return Dl(t)&&t.tagName.toLowerCase()==="form"}function SC(t){return Dl(t)&&t.tagName.toLowerCase()==="input"}function EC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CC(t,e){return t.button===0&&(!e||e==="_self")&&!EC(t)}function vf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let o=t[i];return e.concat(Array.isArray(o)?o.map(r=>[i,r]):[[i,o]])},[]))}function AC(t,e){let i=vf(t);return e&&e.forEach((o,r)=>{i.has(r)||e.getAll(r).forEach(l=>{i.append(r,l)})}),i}var ol=null;function bC(){if(ol===null)try{new FormData(document.createElement("form"),0),ol=!1}catch{ol=!0}return ol}var MC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function af(t){return t!=null&&!MC.has(t)?(sn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):t}function wC(t,e){let i,o,r,l,c;if(TC(t)){let f=t.getAttribute("action");o=f?Kn(f,e):null,i=t.getAttribute("method")||ul,r=af(t.getAttribute("enctype"))||cl,l=new FormData(t)}else if(_C(t)||SC(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(o=p?Kn(p,e):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||ul,r=af(t.getAttribute("formenctype"))||af(f.getAttribute("enctype"))||cl,l=new FormData(f,t),!bC()){let{name:h,type:y,value:_}=t;if(y==="image"){let T=h?`${h}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else h&&l.append(h,_)}}else{if(Dl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ul,o=null,r=cl,c=t}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ad(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function RC(t,e,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return o.pathname==="/"?o.pathname=`_root.${i}`:e&&Kn(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function NC(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IC(t,e,i){let o=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await NC(l,i);return c.links?c.links():[]}return[]}));return LC(o.flat(1).filter(xC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Kg(t,e,i,o,r,l){let c=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,f=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>c(p,h)||f(p,h)):l==="data"?e.filter((p,h)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function DC(t,e,{includeHydrateFallback:i}={}){return UC(t.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function UC(t){return[...new Set(t)]}function PC(t){let e={},i=Object.keys(t).sort();for(let o of i)e[o]=t[o];return e}function LC(t,e){let i=new Set;return new Set(e),t.reduce((o,r)=>{let l=JSON.stringify(PC(r));return i.has(l)||(i.add(l),o.push({key:l,link:r})),o},[])}function S0(){let t=L.useContext(us);return ad(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kC(){let t=L.useContext(xl);return ad(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ld=L.createContext(void 0);ld.displayName="FrameworkContext";function E0(){let t=L.useContext(ld);return ad(t,"You must render this element inside a <HydratedRouter> element"),t}function OC(t,e){let i=L.useContext(ld),[o,r]=L.useState(!1),[l,c]=L.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:_}=e,T=L.useRef(null);L.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let M=R=>{R.forEach(D=>{c(D.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return T.current&&w.observe(T.current),()=>{w.disconnect()}}},[t]),L.useEffect(()=>{if(o){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[o]);let E=()=>{r(!0)},b=()=>{r(!1),c(!1)};return i?t!=="intent"?[l,T,{}]:[l,T,{onFocus:hr(f,E),onBlur:hr(p,b),onMouseEnter:hr(h,E),onMouseLeave:hr(y,b),onTouchStart:hr(_,E)}]:[!1,T,{}]}function hr(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function qC({page:t,...e}){let{router:i}=S0(),o=L.useMemo(()=>c0(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?L.createElement(HC,{page:t,matches:o,...e}):null}function GC(t){let{manifest:e,routeModules:i}=E0(),[o,r]=L.useState([]);return L.useEffect(()=>{let l=!1;return IC(t,e,i).then(c=>{l||r(c)}),()=>{l=!0}},[t,e,i]),o}function HC({page:t,matches:e,...i}){let o=xi(),{manifest:r,routeModules:l}=E0(),{basename:c}=S0(),{loaderData:f,matches:p}=kC(),h=L.useMemo(()=>Kg(t,e,p,r,o,"data"),[t,e,p,r,o]),y=L.useMemo(()=>Kg(t,e,p,r,o,"assets"),[t,e,p,r,o]),_=L.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let b=new Set,M=!1;if(e.forEach(R=>{let D=r.routes[R.route.id];!D||!D.hasLoader||(!h.some(U=>U.route.id===R.route.id)&&R.route.id in f&&l[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:b.add(R.route.id))}),b.size===0)return[];let w=RC(t,c,"data");return M&&b.size>0&&w.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,f,o,r,h,e,t,l]),T=L.useMemo(()=>DC(y,r),[y,r]),E=GC(y);return L.createElement(L.Fragment,null,_.map(b=>L.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),T.map(b=>L.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),E.map(({key:b,link:M})=>L.createElement("link",{key:b,nonce:i.nonce,...M})))}function VC(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var C0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{C0&&(window.__reactRouterVersion="7.9.6")}catch{}function zC({basename:t,children:e,window:i}){let o=L.useRef();o.current==null&&(o.current=RE({window:i,v5Compat:!0}));let r=o.current,[l,c]=L.useState({action:r.action,location:r.location}),f=L.useCallback(p=>{L.startTransition(()=>c(p))},[c]);return L.useLayoutEffect(()=>r.listen(f),[r,f]),L.createElement(yC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var A0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b0=L.forwardRef(function({onClick:e,discover:i="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:f,target:p,to:h,preventScrollReset:y,viewTransition:_,...T},E){let{basename:b}=L.useContext(Tn),M=typeof h=="string"&&A0.test(h),w,R=!1;if(typeof h=="string"&&M&&(w=h,C0))try{let j=new URL(window.location.href),ue=h.startsWith("//")?new URL(j.protocol+h):new URL(h),me=Kn(ue.pathname,b);ue.origin===j.origin&&me!=null?h=me+ue.search+ue.hash:R=!0}catch{sn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=nC(h,{relative:r}),[U,J,B]=OC(o,T),X=YC(h,{replace:c,state:f,target:p,preventScrollReset:y,relative:r,viewTransition:_});function K(j){e&&e(j),j.defaultPrevented||X(j)}let se=L.createElement("a",{...T,...B,href:w||D,onClick:R||l?e:K,ref:VC(E,J),target:p,"data-discover":!M&&i==="render"?"true":void 0});return U&&!M?L.createElement(L.Fragment,null,se,L.createElement(qC,{page:D})):se});b0.displayName="Link";var M0=L.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:f,children:p,...h},y){let _=Lr(c,{relative:h.relative}),T=xi(),E=L.useContext(xl),{navigator:b,basename:M}=L.useContext(Tn),w=E!=null&&ZC(_)&&f===!0,R=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,D=T.pathname,U=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(D=D.toLowerCase(),U=U?U.toLowerCase():null,R=R.toLowerCase()),U&&M&&(U=Kn(U,M)||U);const J=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=D===R||!r&&D.startsWith(R)&&D.charAt(J)==="/",X=U!=null&&(U===R||!r&&U.startsWith(R)&&U.charAt(R.length)==="/"),K={isActive:B,isPending:X,isTransitioning:w},se=B?e:void 0,j;typeof o=="function"?j=o(K):j=[o,B?"active":null,X?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let ue=typeof l=="function"?l(K):l;return L.createElement(b0,{...h,"aria-current":se,className:j,ref:y,style:ue,to:c,viewTransition:f},typeof p=="function"?p(K):p)});M0.displayName="NavLink";var BC=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:o,replace:r,state:l,method:c=ul,action:f,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:_,...T},E)=>{let b=QC(),M=XC(f,{relative:h}),w=c.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&A0.test(f),D=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let J=U.nativeEvent.submitter,B=J?.getAttribute("formmethod")||c;b(J||U.currentTarget,{fetcherKey:e,method:B,navigate:i,replace:r,state:l,relative:h,preventScrollReset:y,viewTransition:_})};return L.createElement("form",{ref:E,method:w,action:M,onSubmit:o?p:D,...T,"data-discover":!R&&t==="render"?"true":void 0})});BC.displayName="Form";function FC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w0(t){let e=L.useContext(us);return Fe(e,FC(t)),e}function YC(t,{target:e,replace:i,state:o,preventScrollReset:r,relative:l,viewTransition:c}={}){let f=Il(),p=xi(),h=Lr(t,{relative:l});return L.useCallback(y=>{if(CC(y,e)){y.preventDefault();let _=i!==void 0?i:Ir(p)===Ir(h);f(t,{replace:_,state:o,preventScrollReset:r,relative:l,viewTransition:c})}},[p,f,h,i,o,e,t,r,l,c])}function $C(t){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=L.useRef(vf(t)),i=L.useRef(!1),o=xi(),r=L.useMemo(()=>AC(o.search,i.current?null:e.current),[o.search]),l=Il(),c=L.useCallback((f,p)=>{const h=vf(typeof f=="function"?f(new URLSearchParams(r)):f);i.current=!0,l("?"+h,p)},[l,r]);return[r,c]}var JC=0,KC=()=>`__${String(++JC)}__`;function QC(){let{router:t}=w0("useSubmit"),{basename:e}=L.useContext(Tn),i=hC();return L.useCallback(async(o,r={})=>{let{action:l,method:c,encType:f,formData:p,body:h}=wC(o,e);if(r.navigate===!1){let y=r.fetcherKey||KC();await t.fetch(y,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||f,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,i])}function XC(t,{relative:e}={}){let{basename:i}=L.useContext(Tn),o=L.useContext(Zn);Fe(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...Lr(t||".",{relative:e})},c=xi();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:$n([i,l.pathname])),Ir(l)}function ZC(t,{relative:e}={}){let i=L.useContext(g0);Fe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=w0("useViewTransitionState"),r=Lr(t,{relative:e});if(!i.isTransitioning)return!1;let l=Kn(i.currentLocation.pathname,o)||i.currentLocation.pathname,c=Kn(i.nextLocation.pathname,o)||i.nextLocation.pathname;return vl(r.pathname,c)!=null||vl(r.pathname,l)!=null}function yt(t){if(typeof t=="number")return(Math.abs(t*2654435761)>>>0).toString(16);if(typeof t=="boolean")return t?"1":"0";if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string"){let e=2166136261;for(let i=0;i<t.length;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e=e>>>0;return e.toString(16)}if(Array.isArray(t)){let e=2166136261;for(let i=0;i<t.length;i++){e^=(i+1)*2654435761;const o=yt(t[i]);for(let r=0;r<o.length;r++)e^=o.charCodeAt(r),e*=16777619,e=e>>>0}return e.toString(16)}if(typeof t=="object"){let e=2166136261;const i=Object.keys(t).sort();for(let o=0;o<i.length;o++){const r=i[o],l=yt(r);e^=parseInt(l,16),e*=16777619,e=e>>>0;const c=yt(t[r]);e^=parseInt(c,16),e*=16777619,e=e>>>0}return e.toString(16)}return yt(String(t))}const Ze={Remove:"remove",Replace:"replace",Add:"add"},R0=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),WC=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),fl=Symbol.iterator,Yt={mutable:"mutable",immutable:"immutable"},ud={};function Er(t,e){return t instanceof Map?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Qg(t,e){if(e in t){let i=Reflect.getPrototypeOf(t);for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,e);if(o)return o;i=Reflect.getPrototypeOf(i)}}}function cd(t){return Object.getPrototypeOf(t)===Set.prototype}function fd(t){return Object.getPrototypeOf(t)===Map.prototype}function Ft(t){var e;return(e=t.copy)!==null&&e!==void 0?e:t.original}function wi(t){return!!Ee(t)}function Ee(t){return typeof t!="object"?null:t?.[R0]}function dd(t){var e;const i=Ee(t);return i?(e=i.copy)!==null&&e!==void 0?e:i.original:t}function fn(t,e){if(!t||typeof t!="object")return!1;let i;return Object.getPrototypeOf(t)===Object.prototype||Array.isArray(t)||t instanceof Map||t instanceof Set||!!e?.mark&&((i=e.mark(t,Yt))===Yt.immutable||typeof i=="function")}function N0(t,e=[]){if(Object.hasOwnProperty.call(t,"key")){const i=t.parent.copy,o=Ee(Qn(i,t.key));if(o!==null&&o?.original!==t.original)return null;const r=t.parent.type===3,l=r?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(r&&i.size>l||Er(i,l)))return null;e.push(l)}if(t.parent)return N0(t.parent,e);e.reverse();try{jC(t.copy,e)}catch{return null}return e}function oo(t){return Array.isArray(t)?1:t instanceof Map?2:t instanceof Set?3:0}function Qn(t,e){return oo(t)===2?t.get(e):t[e]}function kr(t,e,i){oo(t)===2?t.set(e,i):t[e]=i}function lf(t,e){const i=Ee(t);return(i?Ft(i):t)[e]}function Jn(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function _f(t){if(t)for(;t.finalities.revoke.length>0;)t.finalities.revoke.pop()()}function no(t,e){return e?t:[""].concat(t).map(i=>{const o=`${i}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function jC(t,e){for(let i=0;i<e.length-1;i+=1){const o=e[i];if(t=Qn(oo(t)===3?Array.from(t):t,o),typeof t!="object")throw new Error(`Cannot resolve patch at '${e.join("/")}'.`)}return t}function eA(t){const e=Object.create(Object.getPrototypeOf(t));return Reflect.ownKeys(t).forEach(i=>{let o=Reflect.getOwnPropertyDescriptor(t,i);if(o.enumerable&&o.configurable&&o.writable){e[i]=t[i];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]}),Reflect.defineProperty(e,i,o)}),e}const tA=Object.prototype.propertyIsEnumerable;function x0(t,e){let i;if(Array.isArray(t))return Array.prototype.concat.call(t);if(t instanceof Set){if(!cd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t.values())}return Set.prototype.difference?Set.prototype.difference.call(t,new Set):new Set(t.values())}else if(t instanceof Map){if(!fd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t)}return new Map(t)}else if(e?.mark&&(i=e.mark(t,Yt),i!==void 0)&&i!==Yt.mutable){if(i===Yt.immutable)return eA(t);if(typeof i=="function"){if(e.enablePatches||e.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return i()}throw new Error(`Unsupported mark result: ${i}`)}else if(typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype){const o={};return Object.keys(t).forEach(r=>{o[r]=t[r]}),Object.getOwnPropertySymbols(t).forEach(r=>{tA.call(t,r)&&(o[r]=t[r])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function Et(t){t.copy||(t.copy=x0(t.original,t.options))}function yr(t){if(!fn(t))return dd(t);if(Array.isArray(t))return t.map(yr);if(t instanceof Map){const i=Array.from(t.entries()).map(([o,r])=>[o,yr(r)]);if(!fd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Map(i)}if(t instanceof Set){const i=Array.from(t).map(yr);if(!cd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Set(i)}const e=Object.create(Object.getPrototypeOf(t));for(const i in t)e[i]=yr(t[i]);return e}function dl(t){return wi(t)?yr(t):t}function _n(t){var e;t.assignedMap=(e=t.assignedMap)!==null&&e!==void 0?e:new Map,t.operated||(t.operated=!0,t.parent&&_n(t.parent))}function Xg(){throw new Error("Cannot modify frozen object")}function Ko(t,e,i,o,r){{i=i??new WeakMap,o=o??[],r=r??[];const c=i.has(t)?i.get(t):t;if(o.length>0){const f=o.indexOf(c);if(c&&typeof c=="object"&&f!==-1)throw o[0]===c?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${r.slice(0,f).map((p,h)=>{if(typeof p=="symbol")return`[${p.toString()}]`;const y=o[h];return typeof p=="object"&&(y instanceof Map||y instanceof Set)?Array.from(y.keys()).indexOf(p):p}).join("/")}`);o.push(c),r.push(e)}else o.push(c)}if(Object.isFrozen(t)||wi(t)){o.pop(),r.pop();return}switch(oo(t)){case 2:for(const[f,p]of t)Ko(f,f,i,o,r),Ko(p,f,i,o,r);t.set=t.clear=t.delete=Xg;break;case 3:for(const f of t)Ko(f,f,i,o,r);t.add=t.clear=t.delete=Xg;break;case 1:Object.freeze(t);let c=0;for(const f of t)Ko(f,c,i,o,r),c+=1;break;default:Object.freeze(t),Object.keys(t).forEach(f=>{const p=t[f];Ko(p,f,i,o,r)})}o.pop(),r.pop()}function hd(t,e){const i=oo(t);if(i===0)Reflect.ownKeys(t).forEach(o=>{e(o,t[o],t)});else if(i===1){let o=0;for(const r of t)e(o,r,t),o+=1}else t.forEach((o,r)=>e(r,o,t))}function I0(t,e,i){if(wi(t)||!fn(t,i)||e.has(t)||Object.isFrozen(t))return;const o=t instanceof Set,r=o?new Map:void 0;if(e.add(t),hd(t,(l,c)=>{var f;if(wi(c)){const p=Ee(c);Et(p);const h=!((f=p.assignedMap)===null||f===void 0)&&f.size||p.operated?p.copy:p.original;kr(o?r:t,l,h)}else I0(c,e,i)}),r){const l=t,c=Array.from(l);l.clear(),c.forEach(f=>{l.add(r.has(f)?r.get(f):f)})}}function nA(t,e){const i=t.type===3?t.setMap:t.copy;t.finalities.revoke.length>1&&t.assignedMap.get(e)&&i&&I0(Qn(i,e),t.finalities.handledSet,t.options)}function Tf(t){t.type===3&&t.copy&&(t.copy.clear(),t.setMap.forEach(e=>{t.copy.add(dd(e))}))}function Sf(t,e,i,o){if(t.operated&&t.assignedMap&&t.assignedMap.size>0&&!t.finalized){if(i&&o){const l=N0(t);l&&e(t,l,i,o)}t.finalized=!0}}function pd(t,e,i,o){const r=Ee(i);r&&(r.callbacks||(r.callbacks=[]),r.callbacks.push((l,c)=>{var f;const p=t.type===3?t.setMap:t.copy;if(Jn(Qn(p,e),i)){let h=r.original;r.copy&&(h=r.copy),Tf(t),Sf(t,o,l,c),t.options.enableAutoFreeze&&(t.options.updatedValues=(f=t.options.updatedValues)!==null&&f!==void 0?f:new WeakMap,t.options.updatedValues.set(h,r.original)),kr(p,e,h)}}),t.options.enableAutoFreeze&&r.finalities!==t.finalities&&(t.options.enableAutoFreeze=!1)),fn(i,t.options)&&t.finalities.draft.push(()=>{const l=t.type===3?t.setMap:t.copy;Jn(Qn(l,e),i)&&nA(t,e)})}function iA(t,e,i,o,r){let{original:l,assignedMap:c,options:f}=t,p=t.copy;p.length<l.length&&([l,p]=[p,l],[i,o]=[o,i]);for(let h=0;h<l.length;h+=1)if(c.get(h.toString())&&p[h]!==l[h]){const y=e.concat([h]),_=no(y,r);i.push({op:Ze.Replace,path:_,value:dl(p[h])}),o.push({op:Ze.Replace,path:_,value:dl(l[h])})}for(let h=l.length;h<p.length;h+=1){const y=e.concat([h]),_=no(y,r);i.push({op:Ze.Add,path:_,value:dl(p[h])})}if(l.length<p.length){const{arrayLengthAssignment:h=!0}=f.enablePatches;if(h){const y=e.concat(["length"]),_=no(y,r);o.push({op:Ze.Replace,path:_,value:l.length})}else for(let y=p.length;l.length<y;y-=1){const _=e.concat([y-1]),T=no(_,r);o.push({op:Ze.Remove,path:T})}}}function oA({original:t,copy:e,assignedMap:i},o,r,l,c){i.forEach((f,p)=>{const h=Qn(t,p),y=dl(Qn(e,p)),_=f?Er(t,p)?Ze.Replace:Ze.Add:Ze.Remove;if(Jn(h,y)&&_===Ze.Replace)return;const T=o.concat(p),E=no(T,c);r.push(_===Ze.Remove?{op:_,path:E}:{op:_,path:E,value:y}),l.push(_===Ze.Add?{op:Ze.Remove,path:E}:_===Ze.Remove?{op:Ze.Add,path:E,value:h}:{op:Ze.Replace,path:E,value:h})})}function sA({original:t,copy:e},i,o,r,l){let c=0;t.forEach(f=>{if(!e.has(f)){const p=i.concat([c]),h=no(p,l);o.push({op:Ze.Remove,path:h,value:f}),r.unshift({op:Ze.Add,path:h,value:f})}c+=1}),c=0,e.forEach(f=>{if(!t.has(f)){const p=i.concat([c]),h=no(p,l);o.push({op:Ze.Add,path:h,value:f}),r.unshift({op:Ze.Remove,path:h,value:f})}c+=1})}function Dr(t,e,i,o){const{pathAsArray:r=!0}=t.options.enablePatches;switch(t.type){case 0:case 2:return oA(t,e,i,o,r);case 1:return iA(t,e,i,o,r);case 3:return sA(t,e,i,o,r)}}const _l=(t,e,i=!1)=>{if(typeof t=="object"&&t!==null&&(!fn(t,e)||i))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Ef={get size(){return Ft(Ee(this)).size},has(t){return Ft(Ee(this)).has(t)},set(t,e){const i=Ee(this),o=Ft(i);return(!o.has(t)||!Jn(o.get(t),e))&&(Et(i),_n(i),i.assignedMap.set(t,!0),i.copy.set(t,e),pd(i,t,e,Dr)),this},delete(t){if(!this.has(t))return!1;const e=Ee(this);return Et(e),_n(e),e.original.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.copy.delete(t),!0},clear(){const t=Ee(this);if(this.size){Et(t),_n(t),t.assignedMap=new Map;for(const[e]of t.original)t.assignedMap.set(e,!1);t.copy.clear()}},forEach(t,e){const i=Ee(this);Ft(i).forEach((o,r)=>{t.call(e,this.get(r),r,this)})},get(t){var e,i;const o=Ee(this),r=Ft(o).get(t),l=((i=(e=o.options).mark)===null||i===void 0?void 0:i.call(e,r,Yt))===Yt.mutable;if(o.options.strict&&_l(r,o.options,l),l||o.finalized||!fn(r,o.options)||r!==o.original.get(t))return r;const c=ud.createDraft({original:r,parentDraft:o,key:t,finalities:o.finalities,options:o.options});return Et(o),o.copy.set(t,c),c},keys(){return Ft(Ee(this)).keys()},values(){const t=this.keys();return{[fl]:()=>this.values(),next:()=>{const e=t.next();return e.done?e:{done:!1,value:this.get(e.value)}}}},entries(){const t=this.keys();return{[fl]:()=>this.entries(),next:()=>{const e=t.next();if(e.done)return e;const i=this.get(e.value);return{done:!1,value:[e.value,i]}}}},[fl](){return this.entries()}},rA=Reflect.ownKeys(Ef),Zg=(t,e,{isValuesIterator:i})=>()=>{var o,r;const l=e.next();if(l.done)return l;const c=l.value;let f=t.setMap.get(c);const p=Ee(f),h=((r=(o=t.options).mark)===null||r===void 0?void 0:r.call(o,f,Yt))===Yt.mutable;if(t.options.strict&&_l(c,t.options,h),!h&&!p&&fn(c,t.options)&&!t.finalized&&t.original.has(c)){const y=ud.createDraft({original:c,parentDraft:t,key:c,finalities:t.finalities,options:t.options});t.setMap.set(c,y),f=y}else p&&(f=p.proxy);return{done:!1,value:i?f:[f,f]}},Tl={get size(){return Ee(this).setMap.size},has(t){const e=Ee(this);if(e.setMap.has(t))return!0;Et(e);const i=Ee(t);return!!(i&&e.setMap.has(i.original))},add(t){const e=Ee(this);return this.has(t)||(Et(e),_n(e),e.assignedMap.set(t,!0),e.setMap.set(t,t),pd(e,t,t,Dr)),this},delete(t){if(!this.has(t))return!1;const e=Ee(this);Et(e),_n(e);const i=Ee(t);return i&&e.setMap.has(i.original)?(e.assignedMap.set(i.original,!1),e.setMap.delete(i.original)):(!i&&e.setMap.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.setMap.delete(t))},clear(){if(!this.size)return;const t=Ee(this);Et(t),_n(t);for(const e of t.original)t.assignedMap.set(e,!1);t.setMap.clear()},values(){const t=Ee(this);Et(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:Zg(t,e,{isValuesIterator:!0})}},entries(){const t=Ee(this);Et(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:Zg(t,e,{isValuesIterator:!1})}},keys(){return this.values()},[fl](){return this.values()},forEach(t,e){const i=this.values();let o=i.next();for(;!o.done;)t.call(e,o.value,o.value,this),o=i.next()}};Set.prototype.difference&&Object.assign(Tl,{intersection(t){return Set.prototype.intersection.call(new Set(this.values()),t)},union(t){return Set.prototype.union.call(new Set(this.values()),t)},difference(t){return Set.prototype.difference.call(new Set(this.values()),t)},symmetricDifference(t){return Set.prototype.symmetricDifference.call(new Set(this.values()),t)},isSubsetOf(t){return Set.prototype.isSubsetOf.call(new Set(this.values()),t)},isSupersetOf(t){return Set.prototype.isSupersetOf.call(new Set(this.values()),t)},isDisjointFrom(t){return Set.prototype.isDisjointFrom.call(new Set(this.values()),t)}});const aA=Reflect.ownKeys(Tl),D0={get(t,e,i){var o,r;const l=(o=t.copy)===null||o===void 0?void 0:o[e];if(l&&t.finalities.draftsCache.has(l))return l;if(e===R0)return t;let c;if(t.options.mark){const h=e==="size"&&(t.original instanceof Map||t.original instanceof Set)?Reflect.get(t.original,e):Reflect.get(t.original,e,i);if(c=t.options.mark(h,Yt),c===Yt.mutable)return t.options.strict&&_l(h,t.options,!0),h}const f=Ft(t);if(f instanceof Map&&rA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Ef,"size").get.call(t.proxy):Ef[e].bind(t.proxy);if(f instanceof Set&&aA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Tl,"size").get.call(t.proxy):Tl[e].bind(t.proxy);if(!Er(f,e)){const h=Qg(f,e);return h?"value"in h?h.value:(r=h.get)===null||r===void 0?void 0:r.call(t.proxy):void 0}const p=f[e];if(t.options.strict&&_l(p,t.options),t.finalized||!fn(p,t.options))return p;if(p===lf(t.original,e)){if(Et(t),t.copy[e]=md({original:t.original[e],parentDraft:t,key:t.type===1?Number(e):e,finalities:t.finalities,options:t.options}),typeof c=="function"){const h=Ee(t.copy[e]);return Et(h),_n(h),h.copy}return t.copy[e]}return wi(p)&&t.finalities.draftsCache.add(p),p},set(t,e,i){var o;if(t.type===3||t.type===2)throw new Error("Map/Set draft does not support any property assignment.");let r;if(t.type===1&&e!=="length"&&!(Number.isInteger(r=Number(e))&&r>=0&&(e===0||r===0||String(r)===String(e))))throw new Error("Only supports setting array indices and the 'length' property.");const l=Qg(Ft(t),e);if(l?.set)return l.set.call(t.proxy,i),!0;const c=lf(Ft(t),e),f=Ee(c);return f&&Jn(f.original,i)?(t.copy[e]=i,t.assignedMap=(o=t.assignedMap)!==null&&o!==void 0?o:new Map,t.assignedMap.set(e,!1),!0):(Jn(i,c)&&(i!==void 0||Er(t.original,e))||(Et(t),_n(t),Er(t.original,e)&&Jn(i,t.original[e])?t.assignedMap.delete(e):t.assignedMap.set(e,!0),t.copy[e]=i,pd(t,e,i,Dr)),!0)},has(t,e){return e in Ft(t)},ownKeys(t){return Reflect.ownKeys(Ft(t))},getOwnPropertyDescriptor(t,e){const i=Ft(t),o=Reflect.getOwnPropertyDescriptor(i,e);return o&&{writable:!0,configurable:t.type!==1||e!=="length",enumerable:o.enumerable,value:i[e]}},getPrototypeOf(t){return Reflect.getPrototypeOf(t.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(t,e){var i;return t.type===1?D0.set.call(this,t,e,void 0,t.proxy):(lf(t.original,e)!==void 0||e in t.original?(Et(t),_n(t),t.assignedMap.set(e,!1)):(t.assignedMap=(i=t.assignedMap)!==null&&i!==void 0?i:new Map,t.assignedMap.delete(e)),t.copy&&delete t.copy[e],!0)}};function md(t){const{original:e,parentDraft:i,key:o,finalities:r,options:l}=t,c=oo(e),f={type:c,finalized:!1,parent:i,original:e,copy:null,proxy:null,finalities:r,options:l,setMap:c===3?new Map(e.entries()):void 0};(o||"key"in t)&&(f.key=o);const{proxy:p,revoke:h}=Proxy.revocable(c===1?Object.assign([],f):f,D0);if(r.revoke.push(h),f.proxy=p,i){const y=i;y.finalities.draft.push((_,T)=>{var E,b;const M=Ee(p);let w=y.type===3?y.setMap:y.copy;const R=Qn(w,o),D=Ee(R);if(D){let U=D.original;D.operated&&(U=dd(R)),Tf(D),Sf(D,Dr,_,T),y.options.enableAutoFreeze&&(y.options.updatedValues=(E=y.options.updatedValues)!==null&&E!==void 0?E:new WeakMap,y.options.updatedValues.set(U,D.original)),kr(w,o,U)}(b=M.callbacks)===null||b===void 0||b.forEach(U=>{U(_,T)})})}else{const y=Ee(p);y.finalities.draft.push((_,T)=>{Tf(y),Sf(y,Dr,_,T)})}return p}ud.createDraft=md;function lA(t,e,i,o,r){var l;const c=Ee(t),f=(l=c?.original)!==null&&l!==void 0?l:t,p=!!e.length;if(c?.operated)for(;c.finalities.draft.length>0;)c.finalities.draft.pop()(i,o);const h=p?e[0]:c?c.operated?c.copy:c.original:t;return c&&_f(c),r&&Ko(h,h,c?.options.updatedValues),[h,i&&p?[{op:Ze.Replace,path:[],value:e[0]}]:i,o&&p?[{op:Ze.Replace,path:[],value:f}]:o]}function uA(t,e){var i;const o={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let r,l;e.enablePatches&&(r=[],l=[]);const f=((i=e.mark)===null||i===void 0?void 0:i.call(e,t,Yt))===Yt.mutable||!fn(t,e)?t:md({original:t,parentDraft:null,finalities:o,options:e});return[f,(p=[])=>{const[h,y,_]=lA(f,p,r,l,e.enableAutoFreeze);return e.enablePatches?[h,y,_]:h}]}function Cf(t){const{rootDraft:e,value:i,useRawReturn:o=!1,isRoot:r=!0}=t;hd(i,(l,c,f)=>{const p=Ee(c);if(p&&e&&p.finalities===e.finalities){t.isContainDraft=!0;const h=p.original;if(f instanceof Set){const y=Array.from(f);f.clear(),y.forEach(_=>f.add(l===_?h:_))}else kr(f,l,h)}else typeof c=="object"&&c!==null&&(t.value=c,t.isRoot=!1,Cf(t))}),r&&(t.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function U0(t){var e;const i=Ee(t);if(!fn(t,i?.options))return t;const o=oo(t);if(i&&!i.operated)return i.original;let r;function l(){r=o===2?fd(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):o===3?Array.from(i.setMap.values()):x0(t,i?.options)}if(i){i.finalized=!0;try{l()}finally{i.finalized=!1}}else r=t;if(hd(r,(c,f)=>{if(i&&Jn(Qn(i.original,c),f))return;const p=U0(f);p!==f&&(r===t&&l(),kr(r,c,p))}),o===3){const c=(e=i?.original)!==null&&e!==void 0?e:r;return cd(c)?new Set(r):new(Object.getPrototypeOf(c)).constructor(r)}return r}function Wg(t){if(!wi(t))throw new Error(`current() is only used for Draft, parameter: ${t}`);return U0(t)}const cA=t=>function e(i,o,r){var l,c,f;if(typeof i=="function"&&typeof o!="function")return function(B,...X){return e(B,K=>i.call(this,K,...X),o)};const p=i,h=o;let y=r;if(typeof o!="function"&&(y=o),y!==void 0&&Object.prototype.toString.call(y)!=="[object Object]")throw new Error(`Invalid options: ${y}, 'options' should be an object.`);y=Object.assign(Object.assign({},t),y);const _=wi(p)?Wg(p):p,T=Array.isArray(y.mark)?((B,X)=>{for(const K of y.mark){if(typeof K!="function")throw new Error(`Invalid mark: ${K}, 'mark' should be a function.`);const se=K(B,X);if(se)return se}}):y.mark,E=(l=y.enablePatches)!==null&&l!==void 0?l:!1,b=(c=y.strict)!==null&&c!==void 0?c:!1,w={enableAutoFreeze:(f=y.enableAutoFreeze)!==null&&f!==void 0?f:!1,mark:T,strict:b,enablePatches:E};if(!fn(_,w)&&typeof _=="object"&&_!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[R,D]=uA(_,w);if(typeof o!="function"){if(!fn(_,w))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[R,D]}let U;try{U=h(R)}catch(B){throw _f(Ee(R)),B}const J=B=>{const X=Ee(R);if(!wi(B)){if(B!==void 0&&!Jn(B,R)&&X?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const se=B?.[WC];if(se){const j=se[0];return w.strict&&typeof B=="object"&&B!==null&&Cf({rootDraft:X,value:B,useRawReturn:!0}),D([j])}if(B!==void 0)return typeof B=="object"&&B!==null&&Cf({rootDraft:X,value:B}),D([B])}if(B===R||B===void 0)return D([]);const K=Ee(B);if(w===K.options){if(K.operated)throw new Error("Cannot return a modified child draft.");return D([Wg(B)])}return D([B])};return U instanceof Promise?U.then(J,B=>{throw _f(Ee(R)),B}):J(U)},Sl=cA();Object.prototype.constructor.toString();function P0(t,e){const i=Object.keys(t),o=Object.keys(e);return i.length===o.length&&Object.keys(t).every(r=>e.hasOwnProperty(r))}function jg(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(i=>e.hasOwnProperty(i)&&t[i]===e[i])}function hl(t,e){return typeof t!="object"||typeof e!="object"||t===null||e===null?t===e:P0(t,e)?Object.keys(t).every(i=>hl(t[i],e[i])):!1}function gd(t){if(!vr(t))return t;const e={};for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=o);return e}function L0(t,e){if(!vr(t)||!vr(e))return e;const i=Object.assign({},t);for(const o of Object.keys(e)){if(e[o]===void 0)continue;if(e[o]===null){delete i[o];continue}const r=vr(t[o])&&vr(e[o]);i[o]=r?L0(t[o],e[o]):e[o]}return i}function vr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function fA(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let l=0;l<e.length-1;l++){const c=e[l];(!(c in o)||typeof o[c]!="object")&&(o[c]=typeof e[l+1]=="number"?[]:{}),o=o[c]}const r=e[e.length-1];Array.isArray(o)&&typeof r=="number"?o.splice(r,0,i):o[r]=i}function ey(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let r=0;r<e.length-1;r++){const l=e[r];(!(l in o)||typeof o[l]!="object")&&(o[l]=typeof e[r+1]=="number"?[]:{}),o=o[l]}o[e[e.length-1]]=i}function k0(t,e){if(!t||e.length===0)return;const[i,...o]=e;if(i in t){if(o.length===0){Array.isArray(t)?t.splice(i,1):delete t[i];return}k0(t[i],o),dA(t[i])&&delete t[i]}}function dA(t){return t&&Object.keys(t).length===0}const ty=/ZULU|YEKT|YEKST|YAPT|YAKT|YAKST|XJT|WGT|WGST|WFT|WETDST|WET|WDT|WAT|WAST|WAKT|WADT|VUT|VOLT|VLAT|VLAST|VET|UZT|UZST|UYT|UYST|UTC|UT|ULAT|ULAST|UCT|TVT|TRUT|TOT|TMT|TKT|TJT|TFT|TAHT|SGT|SCT|SAST|SADT|RET|PYT|PYST|PWT|PST|PONT|PMST|PMDT|PKT|PKST|PHT|PGT|PETT|PETST|PET|PDT|OMST|OMSST|NZT|NZST|NZDT|NUT|NST|NPT|NOVT|NOVST|NFT|NDT|MYT|MVT|MUT|MUST|MST|MSK|MSD|MPT|MMT|MHT|MEZ|METDST|MET|MESZ|MEST|MDT|MAWT|MART|MAGT|MAGST|LKT|LINT|LIGT|LHST|LHDT|KST|KRAT|KRAST|KOST|KGT|KGST|KDT|JST|JAYT|IST|IRT|IRKT|IRKST|IOT|IDT|ICT|HST|HKT|GYT|GMT|GILT|GFT|GET|GEST|GAMT|GALT|FNT|FNST|FKT|FKST|FJT|FJST|FET|EST|EGT|EGST|EETDST|EET|EEST|EDT|EAT|EAST|EASST|DDUT|DAVT|CXT|CST|COT|CLT|CLST|CKT|CHUT|CHAST|CHADT|CETDST|CET|CEST|CDT|CCT|CAST|CADT|BTT|BST|BRT|BRST|BRA|BOT|BORT|BNT|BDT|BDST|AZT|AZST|AZOT|AZOST|AWST|AWSST|AST|ART|ARST|ANAT|ANAST|AMT|AMST|ALMT|ALMST|AKST|AKDT|AFT|AEST|AESST|AEDT|ADT|ACWST|ACT|ACST|ACSST|ACDT$/,hA={ZULU:0,YEKT:18e3,YEKST:21600,YAPT:36e3,YAKT:32400,YAKST:32400,XJT:21600,WGT:-10800,WGST:-7200,WFT:43200,WETDST:3600,WET:0,WDT:32400,WAT:3600,WAST:25200,WAKT:43200,WADT:28800,VUT:39600,VOLT:10800,VLAT:36e3,VLAST:36e3,VET:-14400,UZT:18e3,UZST:21600,UYT:-10800,UYST:-7200,UTC:0,UT:0,ULAT:28800,ULAST:32400,UCT:0,TVT:43200,TRUT:36e3,TOT:46800,TMT:18e3,TKT:46800,TJT:18e3,TFT:18e3,TAHT:-36e3,SGT:28800,SCT:14400,SAST:7200,SADT:37800,RET:14400,PYT:-14400,PYST:-10800,PWT:32400,PST:-28800,PONT:39600,PMST:-10800,PMDT:-7200,PKT:18e3,PKST:21600,PHT:28800,PGT:36e3,PETT:43200,PETST:43200,PET:-18e3,PDT:-25200,OMST:21600,OMSST:21600,NZT:43200,NZST:43200,NZDT:46800,NUT:-39600,NST:-12600,NPT:20700,NOVT:25200,NOVST:25200,NFT:-12600,NDT:-9e3,MYT:28800,MVT:18e3,MUT:14400,MUST:18e3,MST:-25200,MSK:10800,MSD:14400,MPT:36e3,MMT:23400,MHT:43200,MEZ:3600,METDST:7200,MET:3600,MESZ:7200,MEST:7200,MDT:-21600,MAWT:18e3,MART:-34200,MAGT:39600,MAGST:39600,LKT:19800,LINT:50400,LIGT:36e3,LHST:37800,LHDT:37800,KST:32400,KRAT:25200,KRAST:25200,KOST:39600,KGT:21600,KGST:21600,KDT:36e3,JST:32400,JAYT:32400,IST:7200,IRT:12600,IRKT:28800,IRKST:28800,IOT:21600,IDT:10800,ICT:25200,HST:-36e3,HKT:28800,GYT:-14400,GMT:0,GILT:43200,GFT:-10800,GET:14400,GEST:14400,GAMT:-32400,GALT:-21600,FNT:-7200,FNST:-3600,FKT:-10800,FKST:-10800,FJT:43200,FJST:46800,FET:10800,EST:-18e3,EGT:-3600,EGST:0,EETDST:10800,EET:7200,EEST:10800,EDT:-14400,EAT:10800,EAST:-21600,EASST:-21600,DDUT:36e3,DAVT:25200,CXT:25200,CST:-21600,COT:-18e3,CLT:-14400,CLST:-10800,CKT:-36e3,CHUT:36e3,CHAST:45900,CHADT:49500,CETDST:7200,CET:3600,CEST:7200,CDT:-18e3,CCT:28800,CAST:34200,CADT:37800,BTT:21600,BST:3600,BRT:-10800,BRST:-7200,BRA:-10800,BOT:-14400,BORT:28800,BNT:28800,BDT:21600,BDST:7200,AZT:14400,AZST:14400,AZOT:-3600,AZOST:0,AWST:28800,AWSST:32400,AST:-14400,ART:-10800,ARST:-10800,ANAT:43200,ANAST:43200,AMT:-14400,AMST:14400,ALMT:21600,ALMST:25200,AKST:-32400,AKDT:-28800,AFT:16200,AEST:36e3,AESST:39600,AEDT:39600,ADT:-10800,ACWST:31500,ACT:-18e3,ACST:34200,ACSST:37800,ACDT:37800};function pA(t){return new Date(t)}function mA(t){return new Date(t+"Z")}const gA=/^(\d+)[\./-](\d+)[\./-](\d+)$/;function yA(t){const e=t.match(gA);if(!e)return null;const[i,o,r,l]=e;return o<=0||r<=0||l<=0?null:o>999?new Date(Date.UTC(o,r-1,l,0,0,0,0)):new Date(Date.UTC(l,o-1,r,0,0,0,0))}function vA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function _A(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function TA(t){return new Date(t)}function SA(t){const e=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!t.match(e))throw new Error(`Unable to parse \`${t}\` as a date.`);const o=new Date(t+" UTC");return new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0,0))}function EA(t){const e=/^(.+T.+)([+-])(\d{2})$/,i=t.match(e);if(i){const[,o,r,l]=i,c=`${o}${r}${l}:00`;return new Date(c)}return null}function CA(t){const[e,i]=t.split(", "),[o,r,l]=e.split("/").map(Number),c=i.match(/(\d{1,2}):(\d{2}):(\d{2}) (AM|PM)/);if(!c)throw new Error(`Unable to parse time from: ${t}`);let[,f,p,h,y]=c;return f=Number(f),p=Number(p),h=Number(h),y==="PM"&&f!==12?f+=12:y==="AM"&&f===12&&(f=0),new Date(Date.UTC(l,o-1,r,f,p,h))}function AA(t){switch(t){case"epoch":return new Date(0);case"infinity":case"-infinity":case"today":case"tomorrow":case"yesterday":return null}}function bA(t){const e=t.match(ty);if(!e)return null;const[i]=e,o=hA[i],r=new Date(t.replace(ty,"Z"));return new Date(r.getTime()-o*1e3)}const MA=[yA,_A,SA,CA,TA,mA,EA,vA,pA,AA,bA];function wA(t,e){try{const i=t(e);return i instanceof Date&&!isNaN(i.getTime())?i:null}catch{return null}}function Af(t){for(const e of MA){const i=wA(e,t);if(i)return i}return null}function RA(t){try{const e=JSON.parse(t);return typeof e=="string"?Af(e):null}catch{return null}}function Ul(t){if(t!==void 0){if(t===null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Af(t)||RA(t)||Af(t.trim());if(!e)throw new Error(`Unable to parse \`${t}\` as a date.`);return e}else if(typeof t=="number")return new Date(t);throw new Error(`Invalid date value \`${t}\`. Expected a date, number, or string, got type ${typeof t}.`)}}function NA(t){return t.cardinality==="one"}function yd(t){return t["value-type"]==="ref"}function vd(t){return t["value-type"]==="blob"}function cs(t,e){return t[e]}function fs(t,e){return e.reduce((i,o)=>i&&i.get(o),t)}function cn(t,e){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.delete(e[0]);return}const[i,...o]=e;t.has(i)&&cn(t.get(i),o)}function It(t,e,i){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.set(e[0],i);return}const[o,...r]=e;let l=t.get(o);l||(l=new Map,t.set(o,l)),It(l,r,i)}function O0(t,e,i){const o=new Map,r=new Map,l=new Map;for(const c of e){let[f,p,h,y]=c;const _=cs(t,p);if(!_){console.warn("no such attr",f,t);continue}_["checked-data-type"]==="date"&&i&&(h=Ul(h),c[2]=h),yd(_)&&It(l,[h,p,f],c),It(o,[f,p,h],c),It(r,[p,f,h],c)}return{eav:o,aev:r,vae:l}}function q0(t){const e=new Map,i=new Map,o=new Map,r=new Map;for(const l of Object.values(t)){const c=l["forward-identity"],[f,p,h]=c,y=l["reverse-identity"];if(It(o,[p,h],l),vd(l)&&It(e,[p,h],l),l["primary?"]&&It(i,[p],l),y){const[_,T,E]=y;It(r,[T,E],l)}}return{blobAttrs:e,primaryKeys:i,forwardIdents:o,revIdents:r}}function G0(t){return{__type:t.__type,attrs:t.attrs,triples:Dt(t.eav,3),cardinalityInference:t.cardinalityInference,linkIndex:t.linkIndex,useDateObjects:t.useDateObjects}}function H0(t){return pl(t.attrs,t.triples,t.cardinalityInference,t.linkIndex,t.useDateObjects)}function xA(t,e){return fs(t.eav,[e])!==void 0}function _d(t){t.attrIndexes=q0(t.attrs)}function pl(t,e,i,o,r){const l=O0(t,e,r);return l.useDateObjects=r,l.attrs=t,l.attrIndexes=q0(t),l.cardinalityInference=i,l.linkIndex=o,l.__type="store",l}function Or(t,e){var i,o;let r;if(Array.isArray(e[0])){const[c,f]=e[0],p=t.aev.get(c);if(!p)return null;r=(i=Dt(p,2).find(y=>y[2]===f))===null||i===void 0?void 0:i[0]}else r=e[0];if(!r)return null;const l=e[2];if(Array.isArray(l)&&l.length===2&&t.aev.get(l[0])){const[c,f]=l,p=t.aev.get(c);if(!p)return null;const y=(o=Dt(p,2).find(M=>M[2]===f))===null||o===void 0?void 0:o[0];if(!y)return null;const[_,T,E,...b]=e;return[r,T,y,...b]}else{const[c,...f]=e;return[r,...f]}}function V0(t,e){const i=Or(t,e);if(!i)return;const[o,r,l]=i,c=cs(t.attrs,r);c&&(cn(t.eav,[o,r,l]),cn(t.aev,[r,o,l]),yd(c)&&cn(t.vae,[l,r,o]))}let IA=0;function z0(t,e,i){const[o,r,l]=i;let c;const f=fs(t.ea,[o,r,l]);return f&&(c=f[3]),c||Date.now()*10+IA++}function B0(t,e){var i;const o=Or(t,e);if(!o)return;let[r,l,c]=o;const f=cs(t.attrs,l);if(!f)return;f["checked-data-type"]==="date"&&t.useDateObjects&&(c=Ul(c));const p=fs(t.eav,[r,l,c]),h=(i=p?.[3])!==null&&i!==void 0?i:z0(t,f,o),y=[r,l,c,h];NA(f)?(It(t.eav,[r,l],new Map([[c,y]])),It(t.aev,[l,r],new Map([[c,y]]))):(It(t.eav,[r,l,c],y),It(t.aev,[l,r,c],y)),yd(f)&&It(t.vae,[c,l,r],y)}function DA(t,e){var i;const o=Or(t,e);if(!o)return;const[r,l,c]=o,f=cs(t.attrs,l);if(!f)return;if(!vd(f))throw new Error("merge operation is not supported for links");const p=fs(t.eav,[r,l]);if(!p)return;const h=(i=p.values().next())===null||i===void 0?void 0:i.value;if(!h)return;const y=h[2],_=L0(y,c),T=[r,l,_,z0(t,f,h)];It(t.eav,[r,l],new Map([[_,T]]))}function bf(t,e){var i,o;const[r,l]=e,c=Or(t,[r]);if(!c)return;const[f]=c,p=t.eav.get(f);if(p){for(const y of p.keys()){const _=t.attrs[y];_&&_["on-delete-reverse"]==="cascade"&&Dt(p.get(y),1).forEach(([T,E,b])=>{var M;return bf(t,[b,(M=_["reverse-identity"])===null||M===void 0?void 0:M[1]])}),(!l||!_||((i=_["forward-identity"])===null||i===void 0?void 0:i[1])===l)&&(cn(t.aev,[y,f]),cn(t.eav,[f,y]))}p.size===0&&cn(t.eav,[f])}const h=t.vae.get(f)&&Dt(t.vae.get(f),2);h&&h.forEach(y=>{var _,T,E;const[b,M,w]=y,R=t.attrs[M];(!l||!R||((_=R["reverse-identity"])===null||_===void 0?void 0:_[1])===l)&&(cn(t.eav,[b,M,w]),cn(t.aev,[M,b,w]),cn(t.vae,[w,M,b])),R&&R["on-delete"]==="cascade"&&((T=R["reverse-identity"])===null||T===void 0?void 0:T[1])===l&&bf(t,[b,(E=R["forward-identity"])===null||E===void 0?void 0:E[1]])}),((o=t.vae.get(f))===null||o===void 0?void 0:o.size)===0&&cn(t.vae,[f])}function F0(t,e){const i=O0(t.attrs,e,t.useDateObjects);Object.keys(i).forEach(o=>{t[o]=i[o]})}function UA(t,[e]){t.attrs[e.id]=e,_d(t)}function Y0(t){return Dt(t.eav,3)}function PA(t,[e]){if(!t.attrs[e])return;const i=Y0(t).filter(([o,r])=>r!==e);delete t.attrs[e],_d(t),F0(t,i)}function LA(t,[e]){const i=t.attrs[e.id];i&&(t.attrs[e.id]=Object.assign(Object.assign({},i),e),_d(t),F0(t,Y0(t)))}function kA(t,e){const[i,...o]=e;switch(i){case"add-triple":B0(t,o);break;case"deep-merge-triple":DA(t,o);break;case"retract-triple":V0(t,o);break;case"delete-entity":bf(t,o);break;case"add-attr":UA(t,o);break;case"delete-attr":PA(t,o);break;case"update-attr":LA(t,o);break;case"restore-attr":break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${i}`)}}function Dt(t,e,i=[]){if(!t||e===0)return i;if(e===1){for(const o of t.values())i.push(o);return i}for(const o of t.values())Dt(o,e-1,i);return i}function sl(t,e,i){var o,r;const l=[];if(i?.hasOwnProperty("$not")){for(const f of e.keys())i.$not!==f&&l.push(e.get(f));return l}if(i?.hasOwnProperty("$isNull")){const{attrId:f,isNull:p,reverse:h}=i.$isNull;if(h)for(const y of e.keys()){const _=t.vae.get(y),T=!_||((o=_.get(f))===null||o===void 0?void 0:o.get(null))||!_.get(f);(p?T:!T)&&l.push(e.get(y))}else{const y=t.aev.get(f);for(const _ of e.keys()){const T=!y||((r=y.get(_))===null||r===void 0?void 0:r.get(null))||!y.get(_);(p?T:!T)&&l.push(e.get(_))}}return l}if(i?.$comparator)return Dt(e,1).filter(i.$op);const c=i.in||i.$in||[i];for(const f of c){const p=e.get(f);p&&l.push(p)}return l}function OA(t,e,i){let o="";return t!==void 0&&(o+="e"),e!==void 0&&(o+="a"),i!==void 0&&(o+="v"),o}function qA(t,[e,i,o]){var r,l;switch(OA(e,i,o)){case"e":{const f=t.eav.get(e);return Dt(f,2)}case"ea":{const f=(r=t.eav.get(e))===null||r===void 0?void 0:r.get(i);return Dt(f,1)}case"eav":{const f=(l=t.eav.get(e))===null||l===void 0?void 0:l.get(i);return f?sl(t,f,o):[]}case"ev":{const f=t.eav.get(e);if(!f)return[];const p=[];for(const h of f.values())p.push(...sl(t,h,o));return p}case"a":{const f=t.aev.get(i);return Dt(f,2)}case"av":{const f=t.aev.get(i);if(!f)return[];const p=[];for(const h of f.values())p.push(...sl(t,h,o));return p}case"v":{const f=[];for(const p of t.eav.values())for(const h of p.values())f.push(...sl(t,h,o));return f}default:return Dt(t.eav,3)}}function GA(t,e,i){var o;const r={};for(const[l,c]of e.entries()){const f=(o=t.eav.get(i))===null||o===void 0?void 0:o.get(c.id),p=Dt(f,1);for(const h of p)r[l]=h[2]}return r}function Ri(t,e,i){var o;return(o=t.attrIndexes.forwardIdents.get(e))===null||o===void 0?void 0:o.get(i)}function $0(t,e,i){var o;return(o=t.attrIndexes.revIdents.get(e))===null||o===void 0?void 0:o.get(i)}function HA(t,e){return t.attrIndexes.blobAttrs.get(e)}function J0(t,e){var i;const o=t.attrIndexes.primaryKeys.get(e);return o||((i=t.attrIndexes.forwardIdents.get(e))===null||i===void 0?void 0:i.get("id"))}function VA(t,e){const i=Or(t,e);if(!i)return;const[o,r,l]=i;if(cs(t.attrs,r))return fs(t.eav,[o,r])}function zA(t,e){const i=e.filter(([o,r,l,c,f])=>{if(o!=="add-triple"&&o!=="deep-merge-triple")return!0;const p=f?.mode;if(p!=="create"&&p!=="update")return!0;let h=!1;const y=cs(t.attrs,l);if(y){const _=J0(t,y["forward-identity"][1]);h=!!VA(t,[r,_.id,r])}return!(p==="create"&&h||p==="update"&&!h)});return Sl(t,o=>{i.forEach(r=>{kA(o,r)})})}function BA(t){return typeof t=="string"&&t.startsWith("?")}function FA(t,e,i){if(i.hasOwnProperty(t)){const o=i[t];return K0(o,e,i)}return Object.assign(Object.assign({},i),{[t]:e})}function ny(t,e,i){return t===e?i:null}function YA(t){switch(typeof t){case"string":return t.startsWith("?")?FA:ny;default:return ny}}const $A=["in","$in","$not","$isNull","$comparator"];function JA(t){for(const e of $A)if(t.hasOwnProperty(e))return!0;return!1}function K0(t,e,i){return i?typeof t=="object"?JA(t)?i:null:YA(t)(t,e,i):null}function KA(t,e,i){return t.reduce((o,r,l)=>{const c=e[l];return K0(r,c,o)},i)}function QA(t,e,i){return WA(t,e,i).map(o=>KA(e,o,i)).filter(o=>o)}function XA(t,e,i){return e.or?e.or.patterns.flatMap(o=>Mf(t,o,i)):e.and?e.and.patterns.reduce((o,r)=>Mf(t,r,o),i):i.flatMap(o=>QA(t,e,o))}function Mf(t,e,i=[{}]){return e.reduce((o,r)=>XA(t,r,o),i)}function Td(t,e){return Array.isArray(e)?e.map(i=>Td(t,i)):BA(e)?t[e]:e}function ZA(t,{find:e,where:i}){return Mf(t,i).map(r=>Td(r,e))}function WA(t,e,i){return qA(t,Td(i,e))}const jA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ss(t){return typeof t=="string"&&jA.test(t)}const gt=[];for(let t=0;t<256;++t)gt.push((t+256).toString(16).slice(1));function eb(t,e=0){return(gt[t[e+0]]+gt[t[e+1]]+gt[t[e+2]]+gt[t[e+3]]+"-"+gt[t[e+4]]+gt[t[e+5]]+"-"+gt[t[e+6]]+gt[t[e+7]]+"-"+gt[t[e+8]]+gt[t[e+9]]+"-"+gt[t[e+10]]+gt[t[e+11]]+gt[t[e+12]]+gt[t[e+13]]+gt[t[e+14]]+gt[t[e+15]]).toLowerCase()}let uf;const tb=new Uint8Array(16);function nb(){if(!uf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");uf=crypto.getRandomValues.bind(crypto)}return uf(tb)}const ib=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),iy={randomUUID:ib};function ob(t,e,i){if(iy.randomUUID&&!t)return iy.randomUUID();t=t||{};const o=t.random??t.rng?.()??nb();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,eb(o)}function oy(t){const e=t.replace(/-/g,""),i=[];for(let o=0;o<e.length;o+=2)i.push(parseInt(e.substring(o,o+2),16));return i}function sb(t,e){for(let i=0;i<t.length;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}function rb(t,e){return sb(oy(t),oy(e))}function ct(){return ob()}function ab(t,e){return t.localeCompare(e)}function lb(){let t=ab;if(typeof Intl=="object"&&Intl.hasOwnProperty("Collator"))try{t=Intl.Collator("en-US").compare}catch{}return t}const ub=lb();let cb=0;function Cr(t){return Pl(`_${t}`,cb++)}function Pl(t,e){return`?${t}-${e}`}class rs extends Error{constructor(e){super(e),this.name="AttrNotFoundError"}}function fb(t,e){const i=J0(t,e);if(!i)throw new rs(`Could not find id attr for ${e}`);return i}function sy(t,e,i,o){return[db(t,e,i,o)]}function db(t,e,i,o){return[t(i,o),fb(e,i).id,t(i,o),t("time",o)]}function hb(t,e,i){return t.map(o=>o===e?i:o)}function Q0(t,e,i,o,r){const l=Ri(e,i,r),c=$0(e,i,r),f=l||c;if(!f)throw new rs(`Could not find attr for ${[i,r]}`);if(f["value-type"]!=="ref")throw new Error(`Attr ${f.id} is not a ref`);const[p,h]=f["forward-identity"],[y,_]=f["reverse-identity"],T=o+1,E=l?[t(h,o),f.id,t(_,T),Cr("time")]:[t(h,T),f.id,t(_,o),Cr("time")];return[l?_:h,T,E,f,!!l]}function ry(t,e){if(typeof e!="string")return function(c){return!1};const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),r=new RegExp(`^${o}$`,t?void 0:"i");return function(c){return typeof c!="string"?!1:r.test(c)}}function pb(t,e){if(typeof e!="object"||e.hasOwnProperty("$in")||e.hasOwnProperty("in"))return e;const i=t["checked-data-type"]==="date";if(e.hasOwnProperty("$gt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>new Date(e.$gt)}:function(r){return r[2]>e.$gt}};if(e.hasOwnProperty("$gte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>=new Date(e.$gte)}:function(r){return r[2]>=e.$gte}};if(e.hasOwnProperty("$lt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<new Date(e.$lt)}:function(r){return r[2]<e.$lt}};if(e.hasOwnProperty("$lte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<=new Date(e.$lte)}:function(r){return r[2]<=e.$lte}};if(e.hasOwnProperty("$like")){const o=ry(!0,e.$like);return{$comparator:!0,$op:function(l){return o(l[2])}}}if(e.hasOwnProperty("$ilike")){const o=ry(!1,e.$ilike);return{$comparator:!0,$op:function(l){return o(l[2])}}}return e}function mb(t,e,i,o,r,l){const c=Ri(e,i,r),f=$0(e,i,r),p=c||f;if(!p)throw new rs(`No attr for etype = ${i} label = ${r}`);if(l?.hasOwnProperty("$isNull")){const h=Ri(e,i,"id");if(!h)throw new rs(`No attr for etype = ${i} label = id`);return[t(i,o),h.id,{$isNull:{attrId:p.id,isNull:l.$isNull,reverse:!c}},Cr("time")]}return c?[t(i,o),p.id,pb(p,l),Cr("time")]:[l,p.id,t(i,o),Cr("time")]}function gb(t,e,i,o,r){const[l,c,f]=r.reduce((p,h)=>{const[y,_,T]=p,[E,b,M]=Q0(t,e,y,_,h);return[E,b,[...T,M]]},[i,o,[]]);return[l,c,f]}function wf(t,e,i,o,r,l){const c=r.slice(0,r.length-1),f=r[r.length-1],[p,h,y]=gb(t,e,i,o,c),_=mb(t,e,p,h,f,l);return y.concat([_])}function yb(t,e){return e?[e].concat(t):t}function vb([t,e]){return t==="or"&&Array.isArray(e)}function _b([t,e]){return t==="and"&&Array.isArray(e)}function Tb(t,e,i){return(o,r)=>{const l=t(o,r);return e==l?l:`${l}-${i}`}}function ay(t,e,i,o,r,l){const c=t(o,r),f=l.map((p,h)=>{const y=Tb(t,c,h);return X0(y,i,o,r,p)});return{[e]:{patterns:f,joinSym:c}}}function Sb(t){const e=[];for(let i=1;i<=t.length;i++)e.push(t.slice(0,i));return e}function ly(t,e,i,o,r){return Sb(r).map(l=>wf(t,e,i,o,l,{$isNull:!0}))}function X0(t,e,i,o,r){return Object.entries(r).flatMap(([l,c])=>{if(vb([l,c]))return ay(t,"or",e,i,o,c);if(_b([l,c]))return ay(t,"and",e,i,o,c);if(l==="$entityIdStartsWith")return[];const f=l.split(".");if(c?.hasOwnProperty("$ne")&&(c=Object.assign(Object.assign({},c),{$not:c.$ne}),delete c.$ne),c?.hasOwnProperty("$not")){const p=wf(t,e,i,o,f,c),h=ly(t,e,i,o,f);return[{or:{patterns:[p,...h],joinSym:t(i,o)}}]}return c?.hasOwnProperty("$isNull")&&c.$isNull===!0&&f.length>1?[{or:{patterns:ly(t,e,i,o,f),joinSym:t(i,o)}}]:wf(t,e,i,o,f,c)})}function Eb(t,e,i,o){const r=Pl;return o?X0(r,t,e,i,o).concat(sy(r,t,e,i)):sy(r,t,e,i)}function Cb(t,e,i){return[t(e,i),t("time",i)]}function Ab(t,e,i,o,r,l){const[c,f,p,h,y]=Q0(t,e,i,o,r),_=hb(p,t(i,o),l);return[c,f,_,h,y]}function bb(t,e,{etype:i,level:o,form:r},l){const c=Object.keys(r).filter(f=>f!=="$");return c.length?Object.entries(l).map(function([p,h]){return c.map(function(T){var E,b,M;const w=!!(e.cardinalityInference&&(!((M=(b=(E=e.linkIndex)===null||E===void 0?void 0:E[i])===null||b===void 0?void 0:b[T])===null||M===void 0)&&M.isSingular));try{const[R,D,U]=Ab(t,e,i,o,T,p),J=W0(e,{etype:R,level:D,form:r[T],join:U}),B=w?J[0]:J;return{[T]:B}}catch(R){if(R instanceof rs)return{[T]:w?void 0:[]};throw R}}).reduce(function(T,E){return Object.assign(Object.assign({},T),E)},h)}):Object.values(l)}function Mb(t,e,i){return i==="string"?ub(t,e):t>e?1:-1}function _r(t,e,i,o,r){return e===o||e==null&&o==null?rb(t,i):o==null?1:e==null?-1:Mb(e,o,r)}function El([t,e],[i,o],r){return _r(t,e,i,o,r)}function Rf(t){return t==null?t:new Date(t).getTime()}function wb(t,e,i,o){var r;const[l,c,f,p]=t,h=i==="desc"?1:-1;if(((r=e["forward-identity"])===null||r===void 0?void 0:r[2])==="id")return El(o,[l,p],null)===h;const[y,_]=o,T=e["checked-data-type"],E=T==="date"?Rf(_):_,b=T==="date"?Rf(f):f;return El([y,E],[l,b],T)===h}function Rb(t,e){const i=e[1];return t.attrs[i]}function Nb(t,e,i){const o=Object.keys(i)[0];return Ri(t,e,o)}function xb(t,e,i,o){if(i)return Rb(t,i);if(o)return Nb(t,e,o)}function Ib(t,e,i){var o,r;if(!Array.isArray(i.fields))return HA(t,e);const l=new Map;for(const c of i.fields){const f=Ri(t,e,c),p=(o=f?.["forward-identity"])===null||o===void 0?void 0:o[2];p&&vd(f)&&l.set(p,f)}if(!l.has("id")){const c=Ri(t,e,"id"),f=(r=c?.["forward-identity"])===null||r===void 0?void 0:r[2];f&&l.set(f,c)}return l}function Db(t,{etype:e,pageInfo:i,dq:o,form:r}){var l,c;const f=(l=r?.$)===null||l===void 0?void 0:l.order,p=Z0(r),h=Ub(r);let y=ZA(t,o);const _=i?.["start-cursor"],T=xb(t,e,_,f);if(T&&((c=T?.["forward-identity"])===null||c===void 0?void 0:c[2])!=="id"){const M=T["checked-data-type"]==="date",w=T.id;y=y.map(([R])=>{var D,U,J,B,X;let K=(X=(B=(J=(U=(D=t.eav.get(R))===null||D===void 0?void 0:D.get(w))===null||U===void 0?void 0:U.values())===null||J===void 0?void 0:J.next())===null||B===void 0?void 0:B.value)===null||X===void 0?void 0:X[2];return M&&(K=Rf(K)),[R,K]})}y.sort(h==="asc"?function(w,R){return El(w,R,T?.["checked-data-type"])}:function(w,R){return El(R,w,T?.["checked-data-type"])});let E={};const b=Ib(t,e,o);for(const M of y){const[w]=M;if(E[w]||!p&&_&&T&&wb(_,T,h,M))continue;const R=GA(t,b,w);R&&(E[w]=R)}return E}function Ub(t){var e;const i=(e=t.$)===null||e===void 0?void 0:e.order;return i&&i[Object.keys(i)[0]]||"asc"}function Z0(t){var e,i,o;const r=(e=t.$)===null||e===void 0?void 0:e.offset,l=(i=t.$)===null||i===void 0?void 0:i.before,c=(o=t.$)===null||o===void 0?void 0:o.after;return!r&&!l&&!c}function Pb(t,{etype:e,level:i,form:o,join:r,pageInfo:l}){var c,f,p,h,y;if(!Z0(o)&&(!l||!l["start-cursor"]))return[];const _=yb(Eb(t,e,i,(c=o.$)===null||c===void 0?void 0:c.where),r),T=Cb(Pl,e,i),E=(f=o.$)===null||f===void 0?void 0:f.fields,b=Db(t,{etype:e,pageInfo:l,form:o,dq:{where:_,find:T,fields:E}}),M=((p=o.$)===null||p===void 0?void 0:p.limit)||((h=o.$)===null||h===void 0?void 0:h.first)||((y=o.$)===null||y===void 0?void 0:y.last);if(M!=null){i>0&&console.warn("WARNING: Limits in child queries are only run client-side. Data returned from the server will not have a limit.");const w=Object.entries(b);return w.length<=M?b:Object.fromEntries(w.slice(0,M))}return b}function Lb(t,e){try{return Pb(t,e)}catch(i){if(i instanceof rs)return{};throw i}}function W0(t,e){const i=Lb(t,e);return bb(Pl,t,e,i)}function kb(t){const e={};for(const[i,o]of Object.entries(t))e[i]={startCursor:o["start-cursor"],endCursor:o["end-cursor"],hasNextPage:o["has-next-page?"],hasPreviousPage:o["has-previous-page?"]};return e}function j0({store:t,pageInfo:e,aggregate:i},o){const l={data:Object.keys(o).reduce(function(f,p){return i?.[p]||p==="$$ruleParams"||(f[p]=W0(t,{etype:p,form:o[p],level:0,pageInfo:e?.[p]})),f},{})};return e&&(l.pageInfo=kb(e)),i&&(l.aggregate=i),l}function Ob(){const e={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(e))}const qb=Ob();function Nf(t,e,i){const o={__etype:t,__ops:i};return new Proxy(o,{get:(r,l)=>{if(l==="__ops")return i;if(l==="__etype")return t;if(qb.has(l))return(c,f)=>Nf(t,e,[...i,f?[l,t,e,c,f]:[l,t,e,c]])}})}function Cl(t){return t.startsWith("lookup__")}function e_(t){const[e,i,...o]=t.split("__");return[i,JSON.parse(o.join("__"))]}function Gb(t){return new Proxy({__etype:t},{get(e,i){if(i==="__etype")return t;const o=i;return Cl(o)?Nf(t,e_(o),[]):Nf(t,o,[])}})}function Sd(){return new Proxy({},{get(t,e){return Gb(e)}})}Sd();function Hb(t){return t.__ops}function Vb(t,e){const{attrIdMap:i,refSwapAttrIds:o}=t,r=[];for(const c of e){const f=i[c];if(f)r.push(f);else if(Array.isArray(c)&&c.length==2&&i[c[0]]){const[p,h]=c;r.push([i[p],h])}else r.push(c)}const[l]=e;if((l==="add-triple"||l==="retract-triple")&&o.has(e[2])){const c=r[1];r[1]=r[3],r[3]=c}return r}function vt(t,e,i){return Object.values(t).find(o=>{const[r,l,c]=o["forward-identity"];return l===e&&c===i})}function io(t,e,i){return Object.values(t).find(o=>{const r=o["reverse-identity"];if(!r)return!1;const[l,c,f]=r;return c===e&&f===i})}function zb(t){if(Array.isArray(t))return t;const e=Object.entries(t);if(e.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return e[0]}function xf(t,e,i){return i.indexOf(".")!==-1&&!vt(t,e,i)}function If(t){const[e,i,...o]=t.split(".");if(o.length>0||i!=="id")throw new Error(`${t} is not a valid lookup attribute.`);return e}function Bb(t,e,i){if(!xf(t,e,i))return vt(t,e,i);const o=If(i),r=vt(t,e,o)||io(t,e,o);if(r&&r["value-type"]!=="ref")throw new Error(`${i} does not reference a valid link attribute.`);return r}function Df(t){return typeof t=="string"&&!Cl(t)?null:typeof t=="string"&&Cl(t)?e_(t):zb(t)}function Ut(t,e,i){const o=Df(i);if(o===null)return i;const[r,l]=o,c=Bb(t,e,r);if(!c||!c["unique?"])throw new Error(`${r} is not a unique attribute.`);return[c.id,l]}function t_(t,e,i,o){const r=Ut(t,e,i);return Array.isArray(r)?[["add-triple",r,vt(t,e,"id").id,r]].concat(o):o}function Fb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const f=Array.isArray(c)?c:[c],p=vt(t,e,l),h=io(t,e,l);return f.map(y=>p?["add-triple",Ut(t,e,i),p.id,Ut(t,p["reverse-identity"][1],y)]:["add-triple",Ut(t,h["forward-identity"][1],y),h.id,Ut(t,e,i)])});return t_(t,e,i,r)}function Yb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const f=Array.isArray(c)?c:[c],p=vt(t,e,l),h=io(t,e,l);return f.map(y=>p?["retract-triple",Ut(t,e,i),p.id,Ut(t,p["reverse-identity"][1],y)]:["retract-triple",Ut(t,h["forward-identity"][1],y),h.id,Ut(t,e,i)])});return t_(t,e,i,r)}function $b(t,e,i){if(Array.isArray(i)){const[o,r]=i;for(const l of t||[]){const c=l?.aev.get(o);if(c){for(const[f,p,h]of Dt(c,2))if(h===r)return!0}}}else for(const o of t||[]){const r=o?.eav.get(i);if(r){for(const l of r.keys())if(o.attrs[l]["forward-identity"][1]==e)return!0}}return!1}function n_({stores:t,attrs:e},[i,o,r,l]){return l?.upsert===!1?{mode:"update"}:l?.upsert===!0?null:$b(t,i,o)?{mode:"update"}:null}function Jb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=gd(c),h=Ut(o,r,l);return[["id",h]].concat(Object.entries(p)).map(([_,T])=>{const E=vt(o,r,_);return E["checked-data-type"]==="date"&&t.useDateObjects&&(T=Ul(T)),["add-triple",h,E.id,T,{mode:"create"}]})}function Kb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=gd(c),h=Ut(o,r,l),y=n_(t,[r,h,c,f]);return[["id",h]].concat(Object.entries(p)).map(([T,E])=>{const b=vt(o,r,T);return b["checked-data-type"]==="date"&&t.useDateObjects&&(E=Ul(E)),["add-triple",h,b.id,E,...y?[y]:[]]})}function Qb({attrs:t},[e,i]){return[["delete-entity",Ut(t,e,i),e]]}function Xb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=gd(c),h=Ut(o,r,l),y=n_(t,[r,h,c,f]),_=Object.entries(p).map(([E,b])=>{const M=vt(o,r,E);return["deep-merge-triple",h,M.id,b,...y?[y]:[]]});return[["add-triple",h,vt(o,r,"id").id,h,...y?[y]:[]]].concat(_)}function Zb({attrs:t},[e,i,o]){return[["rule-params",Ut(t,e,i),e,o]]}function Wb(t){const[e,i,o,r,l]=t;if(!r)return t;const c=Object.assign({},r);return delete c.id,[e,i,o,c,...l?[l]:[]]}function jb(t,e){const[i,...o]=Wb(e);switch(i){case"merge":return Xb(t,o);case"create":return Jb(t,o);case"update":return Kb(t,o);case"link":return Fb(t,o);case"unlink":return Yb(t,o);case"delete":return Qb(t,o);case"ruleParams":return Zb(t,o);default:throw new Error(`unsupported action ${i}`)}}function eM(t){switch(t){case"string":case"date":case"boolean":case"number":return t;default:return}}function tM(t,e,i){var o,r;const l=(r=(o=t.entities[e])===null||o===void 0?void 0:o.attrs)===null||r===void 0?void 0:r[i];if(i==="id")return null;if(!l)throw new Error(`${e}.${i} does not exist in your schema`);const{unique:c,indexed:f}=l?.config,p=eM(l?.valueType);return{"index?":f,"unique?":c,"checked-data-type":p}}function rl(t,e,i,o){const r=t?tM(t,e,i):null,l=ct(),f=[ct(),e,i];return Object.assign(Object.assign({id:l,"forward-identity":f,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}function nM(t,e,i){return Object.values(t.links).find(r=>r.forward.on===e&&r.forward.label===i||r.reverse.on===e&&r.reverse.label===i)}function iM(t,e,i){const o=nM(t,e,i);if(!o)throw new Error(`Couldn't find the link ${e}.${i} in your schema`);const{forward:r,reverse:l}=o;return{"forward-identity":[ct(),r.on,r.label],"reverse-identity":[ct(),l.on,l.label],cardinality:r.has==="one"?"one":"many","unique?":l.has==="one","on-delete":r.onDelete,"on-delete-reverse":l.onDelete}}function uy(t,e,i,o){const r=t?iM(t,e,i):null,l=ct(),c=[ct(),e,i],f=[ct(),i,e];return Object.assign(Object.assign({id:l,"forward-identity":c,"reverse-identity":f,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}const oM=new Set(["create","update","merge","link","unlink"]),sM=new Set(["link","unlink"]),rM=new Set(["create","update","merge"]),aM=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Uf={"unique?":!0,"index?":!0},lM=Object.assign(Object.assign({},Uf),{cardinality:"one"});function uM(t){const e=[],[i,o,r,l]=t;if(!aM.has(i))return e;const c=Df(r);if(c&&e.push({etype:o,lookupPair:c}),i==="link")for(const[f,p]of Object.entries(l)){const h=Array.isArray(p)?p:[p];for(const y of h){const _=Df(y);_&&e.push({etype:o,lookupPair:_,linkLabel:f})}}return e}function cM({attrs:t,schema:e},i){var o,r;const[l,c,f]=[new Set,Object.assign({},t),[]];function p(_){c[_.id]=_,f.push(["add-attr",_]),l.add(_.id)}function h(_){_?.isUnsynced&&!l.has(_.id)&&(f.push(["add-attr",_]),l.add(_.id))}function y(_,T){const E=vt(c,_,T),b=io(c,_,T);h(E),h(b),!E&&!b&&p(uy(e,_,T,lM))}for(const _ of i)for(const{etype:T,lookupPair:E,linkLabel:b}of uM(_)){const M=E[0];if(b){y(T,b);const w=vt(c,T,b),R=io(c,T,b);h(w),h(R);const D=((o=w?.["reverse-identity"])===null||o===void 0?void 0:o[1])||((r=R?.["forward-identity"])===null||r===void 0?void 0:r[1])||b;if(xf(c,D,M))y(D,If(M));else{const U=vt(c,D,M);U||p(rl(e,D,M,Uf)),h(U)}}else if(xf(c,T,M))y(T,If(M));else{const w=vt(c,T,M);w||p(rl(e,T,M,Uf)),h(w)}}for(const _ of i){const[T,E,b,M]=_;if(oM.has(T)){const w=vt(c,E,"id");h(w),w||p(rl(e,E,"id",{"unique?":!0}));for(const R of Object.keys(M)){const D=vt(c,E,R);if(h(D),rM.has(T)&&(D||p(rl(e,E,R,R==="id"?{"unique?":!0}:null))),sM.has(T)){const U=io(c,E,R);!D&&!U&&p(uy(e,E,R)),h(U)}}}}return[c,f]}function fM(t,e){const o=(Array.isArray(e)?e:[e]).flatMap(p=>Hb(p)),[r,l]=cM(t,o),c=Object.assign(Object.assign({},t),{attrs:r}),f=o.flatMap(p=>jb(c,p));return[...l,...f]}var vn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function cy(t,e){typeof requestIdleCallback>"u"?t():requestIdleCallback(t,{timeout:e})}const Ar="__meta";class dM{constructor(e,i){}}class Pf{constructor(e){var i,o;this._subs=[],this._nextSave=null,this._nextGc=null,this._pendingSaveKeys=new Set,this._loadedKeys=new Set,this._version=0,this._meta={isLoading:!0,onLoadCbs:[],value:null,error:null,attempts:0},this._persister=e.persister,this._merge=e.merge,this.serialize=e.serialize,this.parse=e.parse,this._objectSize=e.objectSize,this._log=e.logger,this._saveThrottleMs=(i=e.saveThrottleMs)!==null&&i!==void 0?i:100,this._idleCallbackMaxWaitMs=(o=e.idleCallbackMaxWaitMs)!==null&&o!==void 0?o:1e3,this._gcOpts=e.gc,this.currentValue={},this._loadedKeys=new Set,this._loadingKeys={},this._initMeta(),e.preloadEntryCount&&this._preloadEntries(e.preloadEntryCount)}_initMeta(){return vn(this,void 0,void 0,function*(){var e,i,o;this._meta.loadingPromise&&(yield this._meta.loadingPromise);try{const r=this._persister.getItem(Ar);this._meta.loadingPromise=r;const l=yield r;this._meta.isLoading=!1,this._meta.error=null,this._meta.loadingPromise=null,this._meta.attempts=0;const c=(i=(e=this._meta.value)===null||e===void 0?void 0:e.objects)!==null&&i!==void 0?i:{},f=l??{},p=(o=f.objects)!==null&&o!==void 0?o:{};this._meta.value=Object.assign(Object.assign({},f),{objects:Object.assign(Object.assign({},c),p)})}catch(r){this._meta.error=r,this._meta.attempts++,this._meta.loadingPromise=null}})}_getMeta(){return vn(this,void 0,void 0,function*(){return this._meta.value?this._meta.value:this._meta.loadingPromise?(yield this._meta.loadingPromise,this._meta.value):(this._initMeta(),yield this._meta.loadingPromise,this._meta.value)})}_refreshMeta(){return vn(this,void 0,void 0,function*(){return yield this._initMeta(),this._meta.value})}_preloadEntries(e){return vn(this,void 0,void 0,function*(){const i=yield this.waitForMetaToLoad();if(!i)return;const o=Object.entries(i.objects);o.sort(([r,l],[c,f])=>f.updatedAt-l.updatedAt);for(const[r]of o.slice(0,e))this._loadKey(r)})}_getFromStorage(e){return vn(this,void 0,void 0,function*(){try{const i=yield this._persister.getItem(e);return i&&this.parse(e,i)}catch(i){return console.error(`Unable to read from storage for key=${e}`,i),null}})}waitForKeyToLoad(e){return vn(this,void 0,void 0,function*(){return this._loadedKeys.has(e)?this.currentValue[e]:(yield this._loadingKeys[e]||this._loadKey(e),this.currentValue[e])})}waitForMetaToLoad(){return vn(this,void 0,void 0,function*(){return this._getMeta()})}unloadKey(e){this._loadedKeys.delete(e),delete this._loadingKeys[e],delete this.currentValue[e]}_loadKey(e){return vn(this,void 0,void 0,function*(){if(this._loadedKeys.has(e)||e in this._loadingKeys)return;const i=this._getFromStorage(e);this._loadingKeys[e]=i;const o=yield i;if(delete this._loadingKeys[e],this._loadedKeys.add(e),o){const r=this._merge(e,o,this.currentValue[e]);r&&(this.currentValue[e]=r)}this.onKeyLoaded&&this.onKeyLoaded(e)})}_writeToStorage(e){var i,o;const r=[],l=e?.skipGc;if(this._meta.isLoading){const E=new Promise((b,M)=>{var w;setTimeout(()=>this._enqueuePersist(e?Object.assign(Object.assign({},e),{attempts:(e.attempts||0)+1}):{attempts:1}).then(b).catch(M),10+((w=e?.attempts)!==null&&w!==void 0?w:0)*1e3)});return r.push(E),Promise.all(r).then(b=>b.reduce((M,w)=>M+w,0))}const c=this._meta.value;if(!c)return Promise.resolve(0);const f=[],p=[];for(const E of this._pendingSaveKeys)E in this.currentValue?p.push(E):(f.push(E),delete c.objects[E]);for(const E of f){const b=this._persister.removeItem(E);r.push(b.then(()=>1)),this._loadedKeys.delete(E),this._pendingSaveKeys.delete(E)}const h=[],y=[[Ar,c]],_=(i=c.objects)!==null&&i!==void 0?i:{};c.objects=_;for(const E of p)if(this._loadedKeys.has(E)){const b=this.serialize(E,this.currentValue[E]);y.push([E,b]);const M=this._objectSize(b),w=(o=_[E])!==null&&o!==void 0?o:{createdAt:Date.now(),updatedAt:Date.now(),size:M};w.updatedAt=Date.now(),w.size=M,_[E]=w,this._pendingSaveKeys.delete(E)}else h.push(E);const T=this._persister.multiSet(y);r.push(T.then(()=>1));for(const E of h){const b=this._loadKey(E).then(()=>this._enqueuePersist(e));r.push(b)}return l||this.gc(),Promise.all(r).then(E=>E.reduce((b,M)=>b+M,0))}flush(){return vn(this,void 0,void 0,function*(){return this._nextSave?(clearTimeout(this._nextSave),this._nextSave=null,this._writeToStorage()):void 0})}_gc(){return vn(this,void 0,void 0,function*(){if(!this._gcOpts)return;const e=new Set(yield this._persister.getAllKeys());e.delete(Ar);const i=new Set(Object.keys(this.currentValue));for(const T of Object.keys(this._loadingKeys))i.add(T);for(const T of this._loadedKeys)i.add(T);const o=yield this._refreshMeta();if(!o){this._log.info("Could not gc because we were not able to load meta");return}const r=[],l={gcOpts:this._gcOpts,keys:e,sacredKeys:i,removed:[],metaRemoved:[],removedMissingCount:0,removedOldCount:0,removedThresholdCount:0,removedSizeCount:0};for(const T of e)i.has(T)||T in o.objects||(this._log.info("Lost track of key in meta",T),r.push(this._persister.removeItem(T)),l.removed.push(T),l.removedMissingCount++);const c=Date.now();for(const[T,E]of Object.entries(o.objects))!i.has(T)&&E.updatedAt<c-this._gcOpts.maxAgeMs&&(r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedOldCount++);const f=Object.entries(o.objects);f.sort(([T,E],[b,M])=>E.updatedAt-M.updatedAt);const p=f.filter(([T])=>!i.has(T));if(f.length>this._gcOpts.maxEntries)for(const[T]of p.slice(0,f.length-this._gcOpts.maxEntries))r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedThresholdCount++;const h=Object.entries(o.objects);h.sort(([T,E],[b,M])=>E.updatedAt-M.updatedAt);const y=h.filter(([T])=>!i.has(T));let _=h.reduce((T,[E,b])=>T+b.size,0);for(;_>0&&_>this._gcOpts.maxSize&&y.length;){const[[T,E]]=y.splice(0,1);_-=E.size,r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedSizeCount++}for(const T of Object.keys(o.objects))!e.has(T)&&!i.has(T)&&delete o.objects[T];return(l.removed.length||l.metaRemoved.length)&&r.push(this._enqueuePersist({skipGc:!0})),this._log.info("Completed GC",l),yield Promise.all(r),l})}gc(){this._nextGc||(this._nextGc=setTimeout(()=>{cy(()=>{this._nextGc=null,this._gc()},30*1e3)},1e3*60+Math.random()*500))}_enqueuePersist(e){return new Promise((i,o)=>{if(this._nextSave){i(0);return}this._nextSave=setTimeout(()=>{cy(()=>{this._nextSave=null,this._writeToStorage(e).then(i).catch(o)},this._idleCallbackMaxWaitMs)},this._saveThrottleMs)})}version(){return this._version}updateInPlace(e){this._version++;const[i,o]=Sl(this.currentValue,e,{enablePatches:!0});for(const r of o){const l=r.path[0];l&&typeof l=="string"&&(this._pendingSaveKeys.add(l),this._loadedKeys.has(l)||this._loadKey(l))}for(const r of Object.keys(i))if(!i[r])debugger;this.currentValue=i,this._enqueuePersist();for(const r of this._subs)r(this.currentValue);return i}subscribe(e){return this._subs.push(e),e(this.currentValue),()=>{this._subs=this._subs.filter(i=>i!==e)}}}var Fn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};const hM=6,pM=["kv","querySubs","syncSubs"];function mM(t){return function(i){console.error("Error in IndexedDB event",{source:t,event:i})}}function gM(t){return Fn(this,void 0,void 0,function*(){return new Promise(e=>{const i=indexedDB.open(t);i.onerror=o=>{e(null)},i.onsuccess=o=>{const l=o.target.result;e(l)},i.onupgradeneeded=o=>{var r;(r=o.target.transaction)===null||r===void 0||r.abort(),e(null)}})})}function yM(t,e,i){return Fn(this,void 0,void 0,function*(){const o=typeof e=="string"?JSON.parse(e):e;if(!o)return;const r=new Set;return new Promise((l,c)=>{var f,p,h,y;const _={};for(const[b,M]of Object.entries(o)){const w=typeof M=="string"?JSON.parse(M):M;if(w.lastAccessed){const D={createdAt:w.lastAccessed,updatedAt:w.lastAccessed,size:(y=(h=(p=(f=w.result)===null||f===void 0?void 0:f.store)===null||p===void 0?void 0:p.triples)===null||h===void 0?void 0:h.length)!==null&&y!==void 0?y:0};_[b]=D}const R=i.put(w,b);r.add(R)}const T={objects:_},E=i.put(T,Ar);r.add(E);for(const b of r)b.onsuccess=()=>{r.delete(b),r.size===0&&l()},b.onerror=M=>{c(M)}})})}function fy(t,e,i){return Fn(this,void 0,void 0,function*(){const o=i.put(e,t);return new Promise((r,l)=>{o.onsuccess=()=>r(),o.onerror=c=>l(c)})})}function vM(t,e){return Fn(this,void 0,void 0,function*(){const i=yield gM(`instant_${t}_5`);if(!i)return;const o=yield new Promise((y,_)=>{const b=i.transaction(["kv"],"readonly").objectStore("kv").openCursor();b.onerror=w=>{_(w)};const M=[];b.onsuccess=()=>{const w=b.result;if(w){const R=w.key,D=w.value;M.push([R,D]),w.continue()}else y(M)},b.onerror=w=>{_(w)}}),r=e.transaction(["kv","querySubs"],"readwrite"),l=r.objectStore("kv"),c=r.objectStore("querySubs"),f=[],p={objects:{}};for(const[y,_]of o)switch(y){case"querySubs":{const T=yM(y,_,c);f.push(T);break}default:{const T=fy(y,_,l);f.push(T);const E={createdAt:Date.now(),updatedAt:Date.now(),size:0};p.objects[y]=E;break}}const h=fy(Ar,p,l);f.push(h),yield Promise.all(f),yield new Promise((y,_)=>{r.oncomplete=T=>y(T),r.onerror=T=>_(T),r.onabort=T=>_(T)})})}const dy=new Map;class i_ extends dM{constructor(e,i){super(e,i),this.dbName=`instant_${e}_${hM}`,this._storeName=i,this._appId=e,this._dbPromise=this._init()}_init(){return new Promise((e,i)=>{let o=!1;const r=indexedDB.open(this.dbName,1);r.onerror=l=>{i(l)},r.onsuccess=l=>{const f=l.target.result;if(o){const p=vM(this._appId,f).catch(h=>{mM("Error upgrading store from version 5 to 6.")(h)});dy.set(this.dbName,p),p.then(()=>e(f)).catch(()=>e(f))}else{const p=dy.get(this.dbName);p?p.then(()=>e(f)).catch(()=>e(f)):e(f)}},r.onupgradeneeded=l=>{o=!0,this._upgradeStore(l)}})}_upgradeStore(e){const o=e.target.result;for(const r of pM)o.objectStoreNames.contains(r)||o.createObjectStore(r)}getItem(e){return Fn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const f=i.transaction([this._storeName],"readonly").objectStore(this._storeName).get(e);f.onerror=p=>{r(p)},f.onsuccess=p=>{f.result?o(f.result):o(null)}})})}setItem(e,i){return Fn(this,void 0,void 0,function*(){const o=yield this._dbPromise;return new Promise((r,l)=>{const p=o.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(i,e);p.onerror=h=>{l(h)},p.onsuccess=h=>{r()}})})}multiSet(e){return Fn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const l=i.transaction([this._storeName],"readwrite"),c=l.objectStore(this._storeName),f=new Set;for(const[p,h]of e){const y=c.put(h,p);f.add(y)}for(const p of f)p.onerror=h=>{l.abort(),r(h)},p.onsuccess=h=>{f.delete(p),f.size===0&&o()}})})}removeItem(e){return Fn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const f=i.transaction([this._storeName],"readwrite").objectStore(this._storeName).delete(e);f.onerror=p=>{r(p)},f.onsuccess=p=>{o()}})})}getAllKeys(){return Fn(this,void 0,void 0,function*(){const e=yield this._dbPromise;return new Promise((i,o)=>{const c=e.transaction([this._storeName],"readonly").objectStore(this._storeName).getAllKeys();c.onerror=f=>{o(f)},c.onsuccess=f=>{i(c.result.filter(p=>typeof p=="string"))}})})}}var _M=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};class o_{static getIsOnline(){return _M(this,void 0,void 0,function*(){return navigator.onLine})}static listen(e){const i=()=>{e(!0)},o=()=>{e(!1)};return addEventListener("online",i),addEventListener("offline",o),()=>{removeEventListener("online",i),removeEventListener("offline",o)}}}class as extends Error{constructor(e,i){super(e),this.hint=i;const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,as),this.name="InstantError"}get[Symbol.toStringTag](){return"InstantError"}}var TM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};class Ll extends as{constructor(e){var i;const o=((i=e.body)===null||i===void 0?void 0:i.message)||`API Error (${e.status})`;super(o,e.body.hint);const r=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,Ll),this.name="InstantAPIError",this.status=e.status,this.body=e.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function dn(t,e){return TM(this,void 0,void 0,function*(){const i=yield fetch(t,e),o=yield i.json();return i.status===200?Promise.resolve(o):Promise.reject(new Ll({status:i.status,body:o}))})}var ds=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function SM({apiURI:t,appId:e,email:i}){return dn(`${t}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":e,email:i})})}function EM(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i,email:o,code:r,refreshToken:l}){return yield dn(`${e}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object.assign({"app-id":i,email:o,code:r},l?{"refresh-token":l}:{}))})})}function CM(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield dn(`${e}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i,"refresh-token":o})})})}function AM(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i}){return yield dn(`${e}/runtime/auth/sign_in_guest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i})})})}function hy(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i,code:o,codeVerifier:r,refreshToken:l}){return yield dn(`${e}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,code:o,code_verifier:r,refresh_token:l})})})}function bM(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i,nonce:o,idToken:r,clientName:l,refreshToken:c}){return yield dn(`${e}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,nonce:o,id_token:r,client_name:l,refresh_token:c})})})}function MM(t){return ds(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield dn(`${e}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,refresh_token:o})})})}var qr=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function wM(t){return qr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,file:r,refreshToken:l,contentType:c,contentDisposition:f}){const p={app_id:i,path:o,authorization:`Bearer ${l}`,"content-type":c||r.type};return f&&(p["content-disposition"]=f),yield dn(`${e}/storage/upload`,{method:"PUT",headers:p,body:r})})}function RM(t){return qr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield dn(`${e}/storage/files?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}function NM(t){return qr(this,arguments,void 0,function*({apiURI:e,appId:i,fileName:o,refreshToken:r,metadata:l={}}){const{data:c}=yield dn(`${e}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({app_id:i,filename:o})});return c})}function xM(t,e){return qr(this,void 0,void 0,function*(){return(yield fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok})}function IM(t){return qr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield dn(`${e}/storage/signed-download-url?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}let Ed=!1,s_=!1,r_=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(Ed=!!window.localStorage.getItem("devBackend"),s_=!!window.localStorage.getItem("__instantLogging"),r_=!!window.localStorage.getItem("__devtoolLocalDash"));function py(t,e){if(!e)return t;const i={};return e.forEach(o=>{i[o]=t[o]}),i}function DM(t,e,i){var o,r;const l={peers:{}};if(e&&"user"in e?e.user:!0){const f=py((o=t.user)!==null&&o!==void 0?o:{},e?.keys);l.user=Object.assign(Object.assign({},f),{peerId:i})}for(const f of Object.keys((r=t.peers)!==null&&r!==void 0?r:{})){const p=e?.peers===void 0,h=Array.isArray(e?.peers)&&e?.peers.includes(f);if(p||h){const y=py(t.peers[f],e?.keys);l.peers[f]=Object.assign(Object.assign({},y),{peerId:f})}}return l}function UM(t,e){if(t.isLoading!==e.isLoading||t.error!==e.error||(t.user||e.user)&&(!t.user||!e.user||!jg(t.user,e.user))||!P0(t.peers,e.peers))return!0;for(const o of Object.keys(t.peers))if(!jg(t.peers[o],e.peers[o]))return!0;return!1}class my{constructor(){this.promise=new Promise((e,i)=>{this._resolve=e,this._reject=i})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function a_(t,e=[]){t.forEach(i=>{const{data:o}=i,{"datalog-result":r}=o,{"join-rows":l}=r;for(const c of l)for(const f of c)e.push(f);a_(i["child-nodes"],e)})}function gy(t){const e=[];return a_(t,e),e}function yy(t){return Object.values(t.links).reduce((e,i)=>{var o,r,l,c;return(o=e[l=i.forward.on])!==null&&o!==void 0||(e[l]={}),e[i.forward.on][i.forward.label]={isForward:!0,isSingular:i.forward.has==="one",link:i},(r=e[c=i.reverse.on])!==null&&r!==void 0||(e[c]={}),e[i.reverse.on][i.reverse.label]={isForward:!1,isSingular:i.reverse.has==="one",link:i},e},{})}const Cd="v0.22.73";function PM(t,e){return{info:t?(...i)=>console.info(...i,e()):()=>{},debug:t?(...i)=>console.debug(...i,e()):()=>{},error:t?(...i)=>console.error(...i,e()):()=>{}}}class Yn{constructor(e,i,o,r={indexed:!1,unique:!1}){this.valueType=e,this.required=i,this.isIndexed=o,this.config=r,this.metadata={}}clientRequired(){return new Yn(this.valueType,!1,this.isIndexed,this.config)}optional(){return new Yn(this.valueType,!1,this.isIndexed,this.config)}unique(){return new Yn(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new Yn(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class He extends Error{constructor(e,i){const o=i?`At path '${i}': ${e}`:e;super(o),this.name="QueryValidationError"}}const vy=["where","order","limit","last","first","offset","after","before","fields","aggregate"],LM=t=>t.valueType||"unknown",l_=(t,e,i=!1)=>{if(i||t==null)return!0;switch(e){case"string":return typeof t=="string";case"number":return typeof t=="number"&&!isNaN(t);case"boolean":return typeof t=="boolean";case"date":return t instanceof Date||typeof t=="string"||typeof t=="number";default:return!0}},kM=(t,e,i,o,r,l,c)=>{const f=l.valueType==="json",p=(h,y,_)=>{if(!l_(_,y,f))throw new He(`Invalid value for operator '${h}' on attribute '${o}' in entity '${r}'. Expected ${y}, but received: ${typeof _}`,c)};switch(t){case"in":case"$in":if(!Array.isArray(e))throw new He(`Operator '${t}' for attribute '${o}' in entity '${r}' must be an array, but received: ${typeof e}`,c);for(const h of e)p(t,i,h);break;case"$not":case"$ne":case"$gt":case"$lt":case"$gte":case"$lte":p(t,i,e);break;case"$like":case"$ilike":if(p(t,"string",e),t==="$ilike"&&!l.isIndexed)throw new He(`Operator '${t}' can only be used with indexed attributes, but '${o}' in entity '${r}' is not indexed`,c);break;case"$isNull":p(t,"boolean",e);break;default:throw new He(`Unknown operator '${t}' for attribute '${o}' in entity '${r}'`,c)}},es=(t,e,i,o,r)=>{const l=LM(i),c=i.valueType==="json";if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(c)return;const p=t;for(const[h,y]of Object.entries(p))kM(h,y,l,e,o,i,`${r}.${h}`)}else if(!l_(t,l,c))throw new He(`Invalid value for attribute '${e}' in entity '${o}'. Expected ${l}, but received: ${typeof t}`,r)},OM=(t,e,i,o,r)=>{const l=t.split(".");if(l.length<2)throw new He(`Invalid dot notation path '${t}'. Must contain at least one dot.`,r);let c=i;for(let y=0;y<l.length-1;y++){const _=l[y],T=o.entities[c];if(!T)throw new He(`Entity '${c}' does not exist in schema while traversing dot notation path '${t}'.`,r);const E=T.links[_];if(!E){const b=Object.keys(T.links);throw new He(`Link '${_}' does not exist on entity '${c}' in dot notation path '${t}'. Available links: ${b.length>0?b.join(", "):"none"}`,r)}c=E.entityName}const f=l[l.length-1],p=o.entities[c];if(!p)throw new He(`Target entity '${c}' does not exist in schema for dot notation path '${t}'.`,r);if(f==="id"){if(typeof e=="string"&&!ss(e))throw new He(`Invalid value for id field in entity '${c}'. Expected a UUID, but received: ${e}`,r);es(e,t,new Yn("string",!1,!0),i,r);return}const h=p.attrs[f];if(Object.keys(p.links).includes(f)){if(typeof e=="string"&&!ss(e))throw new He(`Invalid value for link '${f}' in entity '${c}'. Expected a UUID, but received: ${e}`,r);es(e,t,new Yn("string",!1,!0),i,r);return}if(!h){const y=Object.keys(p.attrs);throw new He(`Attribute '${f}' does not exist on entity '${c}' in dot notation path '${t}'. Available attributes: ${y.length>0?y.join(", ")+", id":"id"}`,r)}es(e,t,h,i,r)},u_=(t,e,i,o)=>{for(const[r,l]of Object.entries(t)){if(r==="or"||r==="and"){if(Array.isArray(l))for(const h of l)typeof h=="object"&&h!==null&&u_(h,e,i,`${o}.${r}[${h}]`);continue}if(r==="id"){es(l,"id",new Yn("string",!1,!0),e,`${o}.id`);continue}if(r.includes(".")){OM(r,l,e,i,`${o}.${r}`);continue}const c=i.entities[e];if(!c)continue;const f=c.attrs[r],p=c.links[r];if(!f&&!p){const h=Object.keys(c.attrs),y=Object.keys(c.links);throw new He(`Attribute or link '${r}' does not exist on entity '${e}'. Available attributes: ${h.length>0?h.join(", "):"none"}. Available links: ${y.length>0?y.join(", "):"none"}`,`${o}.${r}`)}if(f)es(l,r,f,e,`${o}.${r}`);else if(p){if(typeof l=="string"&&!ss(l))throw new He(`Invalid value for link '${r}' in entity '${e}'. Expected a UUID, but received: ${l}`,`${o}.${r}`);const h=new Yn("string",!1,!0);es(l,r,h,e,`${o}.${r}`)}}},qM=(t,e,i,o,r=0)=>{for(const c of Object.keys(t))if(!vy.includes(c))throw new He(`Invalid query parameter '${c}' in $ object. Valid parameters are: ${vy.join(", ")}. Found: ${c}`,o);const l=["offset","before","after","first","last"];for(const c of l)if(t[c]!==void 0&&r>0)throw new He(`'${c}' can only be used on top-level namespaces. It cannot be used in nested queries.`,o);if(t.where&&i){if(typeof t.where!="object"||t.where===null)throw new He(`'where' clause must be an object in entity '${e}', but received: ${typeof t.where}`,o?`${o}.where`:void 0);u_(t.where,e,i,o?`${o}.where`:"where")}},c_=(t,e,i,o,r=0)=>{var l;if(!t||typeof t!="object")throw new He(`Query part for entity '${e}' must be an object, but received: ${typeof t}`,o);for(const c of Object.keys(t))if(c!=="$"){if(i&&!(c in i.entities[e].links)){const p=Object.keys(i.entities[e].links);throw new He(`Link '${c}' does not exist on entity '${e}'. Available links: ${p.length>0?p.join(", "):"none"}`,`${o}.${c}`)}const f=t[c];if(typeof f=="object"&&f!==null){const p=(l=i?.entities[e].links[c])===null||l===void 0?void 0:l.entityName;p&&c_(f,p,i,`${o}.${c}`,r+1)}}else{const f=t[c];if(typeof f!="object"||f===null)throw new He(`Query parameter '$' must be an object in entity '${e}', but received: ${typeof f}`,`${o}.$`);qM(f,e,i,`${o}.$`,r)}},_y=(t,e)=>{if(typeof t!="object"||t===null)throw new He(`Query must be an object, but received: ${typeof t}${t===null?" (null)":""}`);if(Array.isArray(t))throw new He(`Query must be an object, but received: ${typeof t}`);const i=t;for(const o of Object.keys(i)){if(Array.isArray(t[o]))throw new He(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(typeof o!="string")throw new He(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(o!=="$$ruleParams"){if(e&&!e.entities[o]){const r=Object.keys(e.entities);throw new He(`Entity '${o}' does not exist in schema. Available entities: ${r.length>0?r.join(", "):"none"}`,o)}c_(i[o],o,e,o,0)}}},Ty=t=>typeof t!="string"?!1:Cl(t)?!0:ss(t);class nn extends Error{constructor(e){super(e),this.name="TransactionValidationError"}}const f_=t=>t.length>0?t.join(", "):"none",GM=(t,e)=>new nn(`Entity '${t}' does not exist in schema. Available entities: ${f_(e)}`),Sy={string:t=>typeof t=="string",number:t=>typeof t=="number"&&!isNaN(t),boolean:t=>typeof t=="boolean",date:t=>t instanceof Date||typeof t=="string"||typeof t=="number",json:()=>!0},HM=(t,e)=>{var i,o;return t==null?!0:(o=(i=Sy[e.valueType])===null||i===void 0?void 0:i.call(Sy,t))!==null&&o!==void 0?o:!1},d_=(t,e)=>{const i=e.entities[t];if(!i)throw GM(t,Object.keys(e.entities));return i},cf=(t,e,i)=>{const o=d_(t,i);if(typeof e!="object"||e===null)throw new nn(`Arguments for data operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(r==="id")continue;const c=o.attrs[r];if(c&&!HM(l,c))throw new nn(`Invalid value for attribute '${r}' in entity '${t}'. Expected ${c.valueType}, but received: ${typeof l}`)}},Ey=(t,e,i)=>{const o=d_(t,i);if(typeof e!="object"||e===null)throw new nn(`Arguments for link operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(!o.links[r]){const f=Object.keys(o.links);throw new nn(`Link '${r}' does not exist on entity '${t}'. Available links: ${f_(f)}`)}if(l!=null){if(Array.isArray(l)){for(const f of l)if(!Ty(f))throw new nn(`Invalid entity ID in link '${r}' for entity '${t}'. Expected a UUID or a lookup, but received: ${f}`)}else if(!Ty(l))throw new nn(`Invalid UUID in link '${r}' for entity '${t}'. Expected a UUID, but received: ${l}`)}}},VM={create:cf,update:cf,merge:cf,link:Ey,unlink:Ey,delete:()=>{}},zM=(t,e)=>{if(!e)return;const[i,o,r,l]=t;if(!Array.isArray(r)&&!ss(r))throw new nn(`Invalid id for entity '${o}'. Expected a UUID, but received: ${r}`);if(typeof o!="string")throw new nn(`Entity name must be a string, but received: ${typeof o}`);const c=VM[i];c&&l!==void 0&&c(o,l,e)},BM=(t,e)=>{const i=Array.isArray(t)?t:[t];for(const o of i){if(!o||typeof o!="object")throw new nn(`Transaction chunk must be an object, but received: ${typeof o}`);if(!Array.isArray(o.__ops))throw new nn(`Transaction chunk must have __ops array, but received: ${typeof o.__ops}`);for(const r of o.__ops){if(!Array.isArray(r))throw new nn(`Transaction operation must be an array, but received: ${typeof r}`);zM(r,e)}}};var Cy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};let h_=0;class Ay{constructor(e){this.type="ws",this.id=`${this.type}_${h_++}`,this.conn=new WebSocket(e),this.conn.onopen=i=>{this.onopen&&this.onopen({target:this})},this.conn.onmessage=i=>{this.onmessage&&this.onmessage({target:this,message:JSON.parse(i.data.toString())})},this.conn.onclose=i=>{this.onclose&&this.onclose({target:this})},this.conn.onerror=i=>{this.onerror&&this.onerror({target:this})}}close(){this.conn.close()}isOpen(){var e;return this.conn.readyState===((e=WebSocket.OPEN)!==null&&e!==void 0?e:1)}isConnecting(){var e;return this.conn.readyState===((e=WebSocket.CONNECTING)!==null&&e!==void 0?e:0)}send(e){return this.conn.send(JSON.stringify(e))}}class FM{constructor(e,i){this.type="sse",this.initParams=null,this.sendQueue=[],this.closeFired=!1,this.sseInitTimeout=void 0,this.id=`${this.type}_${h_++}`,this.url=i,this.ES=e,this.conn=new e(i),this.sseInitTimeout=setTimeout(()=>{this.initParams||this.handleError()},1e4),this.conn.onmessage=o=>{const r=JSON.parse(o.data);if(r.op==="sse-init"){this.initParams={machineId:r["machine-id"],sessionId:r["session-id"],sseToken:r["sse-token"]},this.onopen&&this.onopen({target:this}),clearTimeout(this.sseInitTimeout);return}this.onmessage&&this.onmessage({target:this,message:r})},this.conn.onerror=o=>{this.handleError()}}handleError(){try{this.onerror&&this.onerror({target:this})}finally{this.handleClose()}}handleClose(){this.conn.close(),this.onclose&&!this.closeFired&&(this.closeFired=!0,this.onclose({target:this}))}postMessages(e){return Cy(this,void 0,void 0,function*(){var i,o,r;try{(yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machine_id:(i=this.initParams)===null||i===void 0?void 0:i.machineId,session_id:(o=this.initParams)===null||o===void 0?void 0:o.sessionId,sse_token:(r=this.initParams)===null||r===void 0?void 0:r.sseToken,messages:e})})).ok||this.handleError()}catch{this.handleError()}})}flushQueue(){return Cy(this,void 0,void 0,function*(){if(this.sendPromise||!this.sendQueue.length)return;const e=this.sendQueue;this.sendQueue=[];const i=this.postMessages(e);this.sendPromise=i,i.then(()=>{this.sendPromise=null,this.flushQueue()})})}send(e){if(!this.isOpen()||!this.initParams)throw this.isConnecting()?new Error("Failed to execute 'send' on 'EventSource': Still in CONNECTING state."):this.conn.readyState===this.ES.CLOSED?new Error("EventSource is already in CLOSING or CLOSED state."):new Error("EventSource is in invalid state.");this.sendQueue.push(e),this.flushQueue()}isOpen(){return this.conn.readyState===this.ES.OPEN&&this.initParams!==null}isConnecting(){return this.conn.readyState===this.ES.CONNECTING||this.conn.readyState===this.ES.OPEN&&this.initParams===null}close(){this.handleClose()}}var by=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function YM(t,e){const i=t.values;if(i)for(const o of i.entities||[])o.store.useDateObjects=e,o.store.attrs=i.attrs,o.store=H0(o.store);return t}function $M(t,e){var i,o;if(!((i=e.values)===null||i===void 0)&&i.entities){const r=[];for(const l of(o=e.values)===null||o===void 0?void 0:o.entities){const c=G0(l.store);delete c.attrs,r.push(Object.assign(Object.assign({},l),{store:c}))}return Object.assign(Object.assign({},e),{values:Object.assign(Object.assign({},e.values),{entities:r})})}else return e}function JM(t,e,i){var o,r;const l=(o=e?.state)===null||o===void 0?void 0:o.txId,c=(r=i?.state)===null||r===void 0?void 0:r.txId;return l&&(!c||l>c)?e:c&&(!l||c>l)?i:e||i}function ff(t,e){return j0({store:e,pageInfo:null,aggregate:null},t.query).data[t.table][0]}function My(t,e,i){var o;const r=(o=Ri(e,t.table,"id"))===null||o===void 0?void 0:o.id;if(!r)return-1;const l=fs(e.eav,[i,r,i]);return l?l[3]:-1}function wy(t,e){for(const{action:i,triple:o}of e)switch(i){case"added":B0(t,o);break;case"removed":V0(t,o);break}}function KM(t,e){var i,o,r,l;const c={};for(const{action:f,triple:p}of e){const[h,y,_]=p,T=(o=(i=t.attrs[y])===null||i===void 0?void 0:i["forward-identity"])===null||o===void 0?void 0:o[2];if(!T)continue;const E=(r=c[h])!==null&&r!==void 0?r:{};c[h]=E;const b=(l=E[T])!==null&&l!==void 0?l:{};switch(E[T]=b,f){case"added":b.newValue=_;break;case"removed":b.oldValue===void 0&&(b.oldValue=_);break}}for(const f of Object.keys(c)){const{oldValue:p,newValue:h}=c[f];p===h&&delete c[f]}return c}function al(t,e){return{[t.table]:e.map(i=>i.entity)}}function QM(t,e){var i;if(t.orderFieldType)return t.orderFieldType;const o=t.orderField==="serverCreatedAt"?"number":(i=Ri(e([]),t.table,t.orderField))===null||i===void 0?void 0:i["checked-data-type"];return t.orderFieldType=o,o}function XM(t,e,i){const o=e;if(t.orderField==="serverCreatedAt"){i.sort(t.orderDirection==="asc"?function(c,f){return _r(c.entity.id,c.serverCreatedAt,f.entity.id,f.serverCreatedAt,o)}:function(c,f){return _r(f.entity.id,f.serverCreatedAt,c.entity.id,c.serverCreatedAt,o)});return}const r=t.orderField;i.sort(t.orderDirection==="asc"?function(c,f){return _r(c.entity.id,c.entity[r],f.entity.id,f.entity[r],o)}:function(c,f){return _r(f.entity.id,f.entity[r],c.entity.id,c.entity[r],o)})}var Zi;(function(t){t.InitialSyncBatch="InitialSyncBatch",t.InitialSyncComplete="InitialSyncComplete",t.LoadFromStorage="LoadFromStorage",t.SyncTransaction="SyncTransaction",t.Error="Error"})(Zi||(Zi={}));class ZM{constructor(e,i,o,r,l){this.callbacks={},this.idToHash={},this.trySend=e,this.config=o,this.log=r,this.createStore=l,this.subs=new Pf({persister:i,merge:JM,serialize:$M,parse:(c,f)=>YM(f,this.config.useDateObjects),objectSize:c=>{var f;return((f=c.values)===null||f===void 0?void 0:f.entities.length)||0},logger:r,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}})}beforeUnload(){this.subs.flush()}subscribe(e,i){const o=yt(e);return this.callbacks[o]=this.callbacks[o]||[],this.callbacks[o].push(i),this.initSubscription(e,o,i),r=>{this.unsubscribe(o,i,r?.keepSubscription)}}unsubscribe(e,i,o){const r=(this.callbacks[e]||[]).filter(l=>l!==i);if(this.callbacks[e]=r,!r.length){delete this.callbacks[e];const l=this.subs.currentValue[e];l?.state&&this.clearSubscriptionData(l.state.subscriptionId,!!o),o||this.subs.updateInPlace(c=>{delete c[e]})}}sendStart(e){this.trySend(ct(),{op:"start-sync",q:e})}sendResync(e,i,o){this.idToHash[i.subscriptionId]=e.hash,this.trySend(i.subscriptionId,{op:"resync-table","subscription-id":i.subscriptionId,"tx-id":o,token:i.token})}sendRemove(e,i){this.trySend(ct(),{op:"remove-sync","subscription-id":e.subscriptionId,"keep-subscription":i})}initSubscription(e,i,o){return by(this,void 0,void 0,function*(){var r,l,c,f;yield this.subs.waitForKeyToLoad(i);const p=this.subs.currentValue[i];if(p&&p.state&&p.state.txId){this.sendResync(p,p.state,p.state.txId),!((r=p.values)===null||r===void 0)&&r.entities&&o&&o({type:Zi.LoadFromStorage,data:al(p,(l=p.values)===null||l===void 0?void 0:l.entities)});return}const h=Object.keys(e)[0],y=((f=(c=e[h])===null||c===void 0?void 0:c.$)===null||f===void 0?void 0:f.order)||{serverCreatedAt:"asc"},[_,T]=Object.entries(y)[0];this.subs.updateInPlace(E=>{E[i]={query:e,hash:i,table:h,orderDirection:T,orderField:_,createdAt:Date.now(),updatedAt:Date.now()}}),this.sendStart(e)})}flushPending(){return by(this,void 0,void 0,function*(){for(const e of Object.keys(this.callbacks)){yield this.subs.waitForKeyToLoad(e);const i=this.subs.currentValue[e];i?yield this.initSubscription(i.query,i.hash):this.log.error("Missing sub for hash in flushPending",e)}})}onStartSyncOk(e){const i=e["subscription-id"],o=e.q,r=yt(o);this.idToHash[i]=r,this.subs.updateInPlace(l=>{const c=l[r];if(!c)return this.log.error("Missing sub for hash",r,"subscription-id",i,"query",o),l;c.state={subscriptionId:i,token:e.token}})}notifyCbs(e,i){for(const o of this.callbacks[e]||[])o(i)}onSyncLoadBatch(e){var i;const o=e["subscription-id"],r=e["join-rows"],l=this.idToHash[o];if(!l){this.log.error("Missing hash for subscription",e);return}const c=[],f=this.subs.currentValue[l];if(!f){this.log.error("Missing sub for hash",l,e);return}const p=(i=f.values)!==null&&i!==void 0?i:{entities:[],attrs:this.createStore([]).attrs};f.values=p;const h=p.entities;for(const y of r){const _=this.createStore(y);p.attrs=_.attrs;const T=ff(f,_);h.push({store:_,entity:T,serverCreatedAt:My(f,_,T.id)}),c.push(T)}this.subs.updateInPlace(y=>{y[l]=f,y[l].updatedAt=Date.now()}),f.values&&this.notifyCbs(l,{type:Zi.InitialSyncBatch,data:al(f,f.values.entities),batch:c})}onSyncInitFinish(e){var i;const o=e["subscription-id"],r=this.idToHash[o];if(!r){this.log.error("Missing hash for subscription",e);return}this.subs.updateInPlace(c=>{const f=c[r];if(!f){this.log.error("Missing sub for hash",r,e);return}const p=f.state;if(!p)return this.log.error("Sub never set init, missing result",f,e),c;p.txId=e["tx-id"],f.updatedAt=Date.now()});const l=this.subs.currentValue[r];l&&this.notifyCbs(r,{type:Zi.InitialSyncComplete,data:al(l,((i=l.values)===null||i===void 0?void 0:i.entities)||[])})}onSyncUpdateTriples(e){var i,o,r;const l=e["subscription-id"],c=this.idToHash[l];if(!c){this.log.error("Missing hash for subscription",e);return}const f=this.subs.currentValue[c];if(!f){this.log.error("Missing sub for hash",c,e);return}const p=f.state;if(!p){this.log.error("Missing state for sub",f,e);return}for(const h of e.txes){if(p.txId&&p.txId>=h["tx-id"])continue;p.txId=h["tx-id"];const y=[],_={};for(const D of h.changes){const U=(i=_[D.triple[0]])!==null&&i!==void 0?i:[];_[D.triple[0]]=U,U.push(D)}const T=(o=f.values)!==null&&o!==void 0?o:{entities:[],attrs:this.createStore([]).attrs},E=T.entities;f.values=T;const b=[];e:for(const[D,U]of Object.entries(_))for(let J=0;J<E.length;J++){const B=E[J];if(xA(B.store,D)){wy(B.store,U);const X=ff(f,B.store),K=KM(B.store,U)[D];X?(b.push({oldEntity:B.entity,newEntity:X,changedFields:K||{}}),B.entity=X):y.push(J),delete _[D];continue e}}const M=[];for(const[D,U]of Object.entries(_)){const J=this.createStore([]);T.attrs=J.attrs,wy(J,U);const B=ff(f,J);if(!B){this.log.error("No entity found after applying change",{sub:f,changes:U,store:J});continue}E.push({store:J,entity:B,serverCreatedAt:My(f,J,B.id)}),M.push(B)}const w=[];for(const D of y.sort().reverse())w.push(E[D].entity),E.splice(D,1);const R=QM(f,this.createStore);XM(f,R,E),this.notifyCbs(c,{type:Zi.SyncTransaction,data:al(f,(r=f.values)===null||r===void 0?void 0:r.entities),added:M,removed:w,updated:b})}this.subs.updateInPlace(h=>{h[c]=f,h[c].updatedAt=Date.now()})}clearSubscriptionData(e,i){const o=this.idToHash[e];if(o){delete this.idToHash[e];const r=this.subs.currentValue[o];if(r.state&&this.sendRemove(r.state,i),i?this.subs.unloadKey(o):this.subs.updateInPlace(l=>{delete l[o]}),r)return r}}onStartSyncError(e){const i=yt(e["original-event"].q),o={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa.",status:e.status,type:e.type,hint:e.hint},r=Object.keys(e["original-event"].q)[0];this.notifyCbs(i,{type:Zi.Error,data:{[r]:[]},error:o})}onResyncError(e){const i=e["original-event"]["subscription-id"],o=this.clearSubscriptionData(i,!1);o&&this.initSubscription(o.query,o.hash)}}var it=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})},WM=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i};const Vn={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},jM=3e4,ew=3e4,tw=200,nw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},df="_instant_oauth_redirect",pr="currentUser";function iw({transportType:t,appId:e,apiURI:i,wsURI:o,EventSourceImpl:r}){if(!r)return new Ay(`${o}?app_id=${e}`);switch(t){case"ws":return new Ay(`${o}?app_id=${e}`);case"sse":return new FM(r,`${i}/runtime/sse?app_id=${e}`);default:throw new Error("Unknown transport type "+t)}}function ow(){return typeof window<"u"||typeof chrome<"u"}const Ry={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function sw(t,e){var i;const o=typeof t=="string"?JSON.parse(t):t;if(!((i=o?.result)===null||i===void 0)&&i.store){const r=o.result.store;o.result.store=H0(Object.assign(Object.assign({},r),{useDateObjects:e}))}return o}function rw(t,e){var i;const o=Object.assign({},e);return!((i=e.result)===null||i===void 0)&&i.store&&(o.result=Object.assign(Object.assign({},e.result),{store:G0(e.result.store)})),o}function aw(t,e){switch(t){case"pendingMutations":return new Map(typeof e=="string"?JSON.parse(e):e);default:return e}}function lw(t,e){switch(t){case"pendingMutations":return[...e.entries()];default:return e}}function uw(t,e,i){const o=e?.result,r=i?.result;return o&&!r&&i&&(i.result=o),i||e}function Ny(t){return[...t].sort((e,i)=>{const[o,r]=e,[l,c]=i,f=r.order||0,p=c.order||0;return f==p?o<l?-1:o>l?1:0:f-p})}class cw{constructor(e,i=i_,o=o_,r,l){var c,f,p;if(this._isOnline=!0,this._isShutdown=!1,this.status=Vn.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._transportType="ws",this._wsOk=null,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._inFlightMutationEventIds=new Set,this._onMergeKv=(h,y,_)=>{var T,E;switch(h){case"pendingMutations":{const b=(T=y?.entries())!==null&&T!==void 0?T:[],M=(E=_?.entries())!==null&&E!==void 0?E:[],w=new Map([...b,...M]);return(y?this._rewriteMutationsSorted(this.attrs,y):[]).forEach(([D,U])=>{var J;!(!((J=_?.pendingMutations)===null||J===void 0)&&J.has(D))&&!U["tx-id"]&&this._sendMutation(D,U)}),w}default:return _||y}},this.getPreviousResult=h=>{const y=yt(h);return this.dataForQuery(y)},this.notifyOne=h=>{var y,_;const T=(y=this.queryCbs[h])!==null&&y!==void 0?y:[],E=(_=this._dataForQueryCache[h])===null||_===void 0?void 0:_.data,b=this.dataForQuery(h);b&&(hl(b,E)||T.forEach(M=>M.cb(b)))},this.notifyOneQueryOnce=h=>{var y;const _=(y=this.queryOnceDfds[h])!==null&&y!==void 0?y:[],T=this.dataForQuery(h);_.forEach(E=>{this._completeQueryOnce(E.q,h,E.dfd),E.dfd.resolve(T)})},this.notifyQueryError=(h,y)=>{(this.queryCbs[h]||[]).forEach(T=>T.cb({error:y}))},this.pushTx=h=>{this.config.disableValidation||BM(h,this.config.schema);try{const y=fM({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(_=>{var T;return(T=_?.result)===null||T===void 0?void 0:T.store}),useDateObjects:this.config.useDateObjects},h);return this.pushOps(y)}catch(y){return this.pushOps([],y)}},this.pushOps=(h,y)=>{const _=ct(),T=[...this._pendingMutations().values()],E=Math.max(0,...T.map(w=>w.order||0))+1,b={op:"transact","tx-steps":h,created:Date.now(),error:y,order:E};this._updatePendingMutations(w=>{w.set(_,b)});const M=new my;return this.mutationDeferredStore.set(_,M),this._sendMutation(_,b),this.notifyAll(),M.promise},this._transportOnOpen=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][open]",y.id,"skip; this is no longer the current transport");return}this._log.info("[socket][open]",this._transport.id),this._setStatus(Vn.OPENED),this.getCurrentUser().then(_=>{var T;this._trySend(ct(),{op:"init","app-id":this.config.appId,"refresh-token":(T=_.user)===null||T===void 0?void 0:T.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(_=>{this._log.error("[socket][error]",y.id,_)})},this._transportOnMessage=h=>{const y=h.target,_=h.message;if(this._transport!==y){this._log.info("[socket][message]",y.id,_,"skip; this is no longer the current transport");return}!this._wsOk&&y.type==="ws"&&(this._wsOk=!0),this._transportType="ws",this._handleReceive(y.id,h.message)},this._transportOnError=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][error]",y.id,"skip; this is no longer the current transport");return}this._log.error("[socket][error]",y.id,h)},this._scheduleReconnect=()=>{!this._wsOk&&this._transportType!=="sse"&&(this._transportType="sse",this._reconnectTimeoutMs=0),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",this._transport.id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this._transportOnClose=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][close]",y.id,"skip; this is no longer the current transport");return}this._setStatus(Vn.CLOSED);for(const _ of Object.values(this._rooms))_.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",y.id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",y.id,"schedule reconnect, ms =",this._reconnectTimeoutMs),this._scheduleReconnect()},this._EventSource=l,this.config=Object.assign(Object.assign({},nw),e),this.queryCacheLimit=(c=this.config.queryCacheLimit)!==null&&c!==void 0?c:10,this._pendingTxCleanupTimeout=(f=this.config.pendingTxCleanupTimeout)!==null&&f!==void 0?f:ew,this._pendingMutationCleanupThreshold=(p=this.config.pendingMutationCleanupThreshold)!==null&&p!==void 0?p:tw,this._log=PM(e.verbose||Ed||s_,()=>this._reactorStats()),this.versions=Object.assign(Object.assign({},r||{}),{"@instantdb/core":Cd}),this.config.schema&&(this._linkIndex=yy(this.config.schema)),!!ow()){if(!e.appId)throw new Error("Instant must be initialized with an appId.");if(!ss(e.appId))throw new Error(`Instant must be initialized with a valid appId. \`${e.appId}\` is not a valid uuid.`);typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",h=>it(this,void 0,void 0,function*(){var y;try{if(((y=h.data)===null||y===void 0?void 0:y.type)==="auth"){const _=yield this.getCurrentUser();this.updateUser(_.user)}}catch(_){this._log.error("[error] handle broadcast channel",_)}}))),this._initStorage(i),this._syncTable=new ZM(this._trySendAuthed.bind(this),new i(this.config.appId,"syncSubs"),{useDateObjects:this.config.useDateObjects},this._log,h=>pl(this.attrs,h,this.config.enableCardinalityInference,this._linkIndex,this.config.useDateObjects)),this._oauthCallbackResponse=this._oauthLoginInit(),this.getCurrentUser(),o.getIsOnline().then(h=>{this._isOnline=h,this._startSocket(),o.listen(y=>{y!==this._isOnline&&(this._log.info("[network] online =",y),this._isOnline=y,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Vn.CLOSED),this._setStatus(Vn.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload))}}updateSchema(e){this.config=Object.assign(Object.assign({},this.config),{schema:e,cardinalityInference:!!e}),this._linkIndex=e?yy(this.config.schema):null}_reactorStats(){return{inFlightMutationCount:this._inFlightMutationEventIds.size,pendingMutationCount:this._pendingMutations().size,transportType:this._transportType}}_onQuerySubLoaded(e){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyOne(e))}_initStorage(e){this.querySubs=new Pf({persister:new e(this.config.appId,"querySubs"),merge:uw,serialize:rw,parse:(i,o)=>sw(o,this.config.useDateObjects),objectSize:i=>{var o,r,l,c;return(c=(l=(r=(o=i.result)===null||o===void 0?void 0:o.store)===null||r===void 0?void 0:r.triples)===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},logger:this._log,preloadEntryCount:10,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}}),this.querySubs.onKeyLoaded=i=>this._onQuerySubLoaded(i),this.kv=new Pf({persister:new e(this.config.appId,"kv"),merge:this._onMergeKv,serialize:lw,parse:aw,objectSize:()=>0,logger:this._log,saveThrottleMs:100,idleCallbackMaxWaitMs:100,gc:null}),this.kv.onKeyLoaded=i=>{i==="pendingMutations"&&this.notifyAll()},this.kv.waitForKeyToLoad("pendingMutations"),this.kv.waitForKeyToLoad(pr),this._beforeUnloadCbs.push(()=>{this.kv.flush(),this.querySubs.flush()})}_beforeUnload(){for(const e of this._beforeUnloadCbs)e();this._syncTable.beforeUnload()}_finishTransaction(e,i,o){const r=this.mutationDeferredStore.get(i);this.mutationDeferredStore.delete(i);const l=e!=="error"&&e!=="timeout";if(!r&&!l&&console.error("Mutation failed",Object.assign({status:e,eventId:i},o)),!!r)if(l)r.resolve({status:e,eventId:i});else if(o?.type){const{status:c}=o,f=WM(o,["status"]);r.reject(new Ll({body:f,status:c??0}))}else r.reject(new as(o?.message||"Unknown error",o?.hint))}_setStatus(e,i){this.status=e,this._errorMessage=i,this.notifyConnectionStatusSubs(e)}_flushEnqueuedRoomData(e){var i,o;const r=(o=(i=this._presence[e])===null||i===void 0?void 0:i.result)===null||o===void 0?void 0:o.user,l=this._broadcastQueue[e];if(this._broadcastQueue[e]=[],r&&this._trySetPresence(e,r),l)for(const c of l){const{topic:f,roomType:p,data:h}=c;this._tryBroadcast(e,p,f,h)}}_handleReceive(e,i){var o,r,l,c,f,p;const h=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(Ry[i.op]||this._log.info("[receive]",e,i.op,i),i.op){case"init-ok":{this._setStatus(Vn.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(i.attrs),this._flushPendingMessages(),this._sessionId=i["session-id"];for(const T of Object.keys(this._rooms)){const E=(r=(o=this._presence[T])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.user;this._tryJoinRoom(T,E)}break}case"add-query-exists":{this.notifyOneQueryOnce(yt(i.q));break}case"add-query-ok":{const{q:T,result:E}=i,b=yt(T);if(!this._hasQueryListeners()&&!this.querySubs.currentValue[b])break;const M=(c=(l=E?.[0])===null||l===void 0?void 0:l.data)===null||c===void 0?void 0:c["page-info"],w=(p=(f=E?.[0])===null||f===void 0?void 0:f.data)===null||p===void 0?void 0:p.aggregate,R=gy(E),D=pl(this.attrs,R,h,this._linkIndex,this.config.useDateObjects);this.querySubs.updateInPlace(U=>{if(!U[b]){this._log.info("Missing value in querySubs",{hash:b,q:T});return}U[b].result={store:D,pageInfo:M,aggregate:w,processedTxId:i["processed-tx-id"]}}),this._cleanupPendingMutationsQueries(),this.notifyOne(b),this.notifyOneQueryOnce(b),this._cleanupPendingMutationsTimeout();break}case"start-sync-ok":{this._syncTable.onStartSyncOk(i);break}case"sync-load-batch":{this._syncTable.onSyncLoadBatch(i);break}case"sync-init-finish":{this._syncTable.onSyncInitFinish(i);break}case"sync-update-triples":{this._syncTable.onSyncUpdateTriples(i);break}case"refresh-ok":{const{computations:T,attrs:E}=i,b=i["processed-tx-id"];E&&this._setAttrs(E),this._cleanupPendingMutationsTimeout();const M=this._rewriteMutations(this.attrs,this._pendingMutations(),b);M!==this._pendingMutations()&&this.kv.updateInPlace(D=>{D.pendingMutations=M});const w=Ny(M.entries()),R=T.map(D=>{var U,J,B,X;const K=D["instaql-query"],se=D["instaql-result"],j=yt(K),ue=gy(se),me=pl(this.attrs,ue,h,this._linkIndex,this.config.useDateObjects),re=this._applyOptimisticUpdates(me,w,b),Ae=(J=(U=se?.[0])===null||U===void 0?void 0:U.data)===null||J===void 0?void 0:J["page-info"],We=(X=(B=se?.[0])===null||B===void 0?void 0:B.data)===null||X===void 0?void 0:X.aggregate;return{q:K,hash:j,store:re,pageInfo:Ae,aggregate:We}});R.forEach(({hash:D,q:U,store:J,pageInfo:B,aggregate:X})=>{this.querySubs.updateInPlace(K=>{if(!K[D]){this._log.error("Missing value in querySubs",{hash:D,q:U});return}K[D].result={store:J,pageInfo:B,aggregate:X,processedTxId:b}})}),this._cleanupPendingMutationsQueries(),R.forEach(({hash:D})=>{this.notifyOne(D)});break}case"transact-ok":{const{"client-event-id":T,"tx-id":E}=i;this._inFlightMutationEventIds.delete(T);const M=this._rewriteMutations(this.attrs,this._pendingMutations()).get(T);if(!M)break;this._updatePendingMutations(R=>{R.set(T,Object.assign(Object.assign({},R.get(T)),{"tx-id":E,confirmed:Date.now()}))});const w=M["tx-steps"].filter(([R,...D])=>R==="add-attr").map(([R,D])=>D).concat(Object.values(this.attrs));this._setAttrs(w),this._finishTransaction("synced",T),this._cleanupPendingMutationsTimeout();break}case"patch-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._patchPresencePeers(T,i.edits),this._notifyPresenceSubs(T);break}case"refresh-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._setPresencePeers(T,i.data),this._notifyPresenceSubs(T);break}case"server-broadcast":{const T=i["room-id"],E=i.topic;this._trySetRoomConnected(T,!0),this._notifyBroadcastSubs(T,E,i);break}case"join-room-ok":{const T=i["room-id"];if(!this._rooms[T]){this._roomsPendingLeave[T]&&(this._tryLeaveRoom(T),delete this._roomsPendingLeave[T]);break}this._trySetRoomConnected(T,!0),this._flushEnqueuedRoomData(T);break}case"leave-room-ok":{const T=i["room-id"];this._trySetRoomConnected(T,!1);break}case"join-room-error":const y=i["room-id"],_=this._rooms[y];_&&(_.error=i.error),this._notifyPresenceSubs(y);break;case"error":this._handleReceiveError(i);break;default:this._log.info("Uknown op",i.op,i);break}}_pendingMutations(){var e;return(e=this.kv.currentValue.pendingMutations)!==null&&e!==void 0?e:new Map}_updatePendingMutations(e){this.kv.updateInPlace(i=>{var o;const r=(o=i.pendingMutations)!==null&&o!==void 0?o:new Map;i.pendingMutations=r,e(r)})}_handleMutationError(e,i,o){const r=this._pendingMutations().get(i);if(r&&(e!=="timeout"||!r["tx-id"])){this._updatePendingMutations(c=>(c.delete(i),c)),this._inFlightMutationEventIds.delete(i);const l={message:o.message,hint:o.hint};this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(l),this._finishTransaction(e,i,o)}}_handleReceiveError(e){var i,o,r,l,c,f,p;console.log("error",e);const h=e["client-event-id"];this._inFlightMutationEventIds.delete(h);const y=this._pendingMutations().get(h),_={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(e.hint&&(_.hint=e.hint),y){this._handleMutationError("error",h,e);return}if(!((i=e["original-event"])===null||i===void 0)&&i.hasOwnProperty("q")&&((o=e["original-event"])===null||o===void 0?void 0:o.op)==="add-query"){const b=(r=e["original-event"])===null||r===void 0?void 0:r.q,M=yt(b);this.notifyQueryError(yt(b),_),this.notifyQueryOnceError(b,M,h,_);return}if(((l=e["original-event"])===null||l===void 0?void 0:l.op)==="init"){if(e.type==="record-not-found"&&((c=e.hint)===null||c===void 0?void 0:c["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Vn.ERRORED,_),this.notifyAll();return}if(((f=e["original-event"])===null||f===void 0?void 0:f.op)==="resync-table"){this._syncTable.onResyncError(e);return}if(((p=e["original-event"])===null||p===void 0?void 0:p.op)==="start-sync"){this._syncTable.onStartSyncError(e);return}const E=Object.assign({},e);delete E.message,delete E.hint,console.error(e.message,E),e.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,e.hint)}notifyQueryOnceError(e,i,o,r){var l;const c=(l=this.queryOnceDfds[i])===null||l===void 0?void 0:l.find(f=>f.eventId===o);c&&(c.dfd.reject(r),this._completeQueryOnce(e,i,c.dfd))}_setAttrs(e){this.attrs=e.reduce((i,o)=>(i[o.id]=o,i),{}),this.notifyAttrsSubs()}_startQuerySub(e,i){const o=ct();return this.querySubs.updateInPlace(r=>{r[i]=r[i]||{q:e,result:null,eventId:o},r[i].lastAccessed=Date.now()}),this._trySendAuthed(o,{op:"add-query",q:e}),o}subscribeTable(e,i){return this._syncTable.subscribe(e,i)}subscribeQuery(e,i,o){var r;this.config.disableValidation||_y(e,this.config.schema),o&&"ruleParams"in o&&(e=Object.assign({$$ruleParams:o.ruleParams},e));const l=yt(e),c=this.getPreviousResult(e);return c&&i(c),this.queryCbs[l]=(r=this.queryCbs[l])!==null&&r!==void 0?r:[],this.queryCbs[l].push({q:e,cb:i}),this._startQuerySub(e,l),()=>{this._unsubQuery(e,l,i)}}queryOnce(e,i){var o;this.config.disableValidation||_y(e,this.config.schema),i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const r=new my;if(!this._isOnline)return r.reject(new Error("We can't run `queryOnce`, because the device is offline.")),r.promise;if(!this.querySubs)return r.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),r.promise;const l=yt(e),c=this._startQuerySub(e,l);return this.queryOnceDfds[l]=(o=this.queryOnceDfds[l])!==null&&o!==void 0?o:[],this.queryOnceDfds[l].push({q:e,dfd:r,eventId:c}),setTimeout(()=>r.reject(new Error("Query timed out")),jM),r.promise}_completeQueryOnce(e,i,o){this.queryOnceDfds[i]&&(this.queryOnceDfds[i]=this.queryOnceDfds[i].filter(r=>r.dfd!==o),this._cleanupQuery(e,i))}_unsubQuery(e,i,o){this.queryCbs[i]&&(this.queryCbs[i]=this.queryCbs[i].filter(r=>r.cb!==o),this._cleanupQuery(e,i))}_hasQueryListeners(e){var i,o;return!!(!((i=this.queryCbs[e])===null||i===void 0)&&i.length||!((o=this.queryOnceDfds[e])===null||o===void 0)&&o.length)}_cleanupQuery(e,i){this._hasQueryListeners(i)||(delete this.queryCbs[i],delete this.queryOnceDfds[i],delete this._dataForQueryCache[i],this.querySubs.unloadKey(i),this._trySendAuthed(ct(),{op:"remove-query",q:e}))}_rewriteMutations(e,i,o){if(!e)return i;if(!i)return new Map;const r=y=>{const[_,T,E]=y["forward-identity"];return vt(e,T,E)},l=y=>{const[_,T,E]=y["forward-identity"];return io(e,T,E)},c={attrIdMap:{},refSwapAttrIds:new Set};let f=!1;const p=(y,_)=>{const T=[];for(const E of y){const[b]=E;if(b==="add-attr"){const[w,R]=E,D=r(R);if(D&&R.id!==D.id){c.attrIdMap[R.id]=D.id,f=!0;continue}if(R["value-type"]==="ref"){const U=l(R);if(U){c.attrIdMap[R.id]=U.id,c.refSwapAttrIds.add(R.id),f=!0;continue}}}if(o&&_&&o>=_&&b==="add-attr"||b==="update-attr"||b==="delete-attr"){f=!0;continue}const M=f?Vb(c,E):E;T.push(M)}return f?T:y},h=new Map;for(const[y,_]of i.entries())h.set(y,Object.assign(Object.assign({},_),{"tx-steps":p(_["tx-steps"],_["tx-id"])}));return f?h:i}_rewriteMutationsSorted(e,i){return Ny(this._rewriteMutations(e,i).entries())}optimisticAttrs(){var e;const i=[...this._pendingMutations().values()].flatMap(f=>f["tx-steps"]),o=new Set(i.filter(([f,p])=>f==="delete-attr").map(([f,p])=>p)),r=[];for(const[f,p]of i)if(f==="add-attr")r.push(p);else if(f==="update-attr"&&p.id&&(!((e=this.attrs)===null||e===void 0)&&e[p.id])){const h=Object.assign(Object.assign({},this.attrs[p.id]),p);r.push(h)}const l=[...Object.values(this.attrs||{}),...r].filter(f=>!o.has(f.id));return Object.fromEntries(l.map(f=>[f.id,f]))}dataForQuery(e){const i=this._errorMessage;if(i)return{error:i};if(!this.querySubs||!this.kv.currentValue.pendingMutations)return;const o=this.querySubs.version(),r=this.querySubs.currentValue,l=this.kv.version(),c=this._pendingMutations(),{q:f,result:p}=r[e]||{};if(!p)return;const h=this._dataForQueryCache[e];if(h&&o===h.querySubVersion&&l===h.pendingMutationsVersion)return h.data;const{store:y,pageInfo:_,aggregate:T,processedTxId:E}=p,b=this._rewriteMutationsSorted(y.attrs,c),M=this._applyOptimisticUpdates(y,b,E),w=j0({store:M,pageInfo:_,aggregate:T},f);return this._dataForQueryCache[e]={querySubVersion:o,pendingMutationsVersion:l,data:w},w}_applyOptimisticUpdates(e,i,o){for(const[r,l]of i)(!l["tx-id"]||o&&l["tx-id"]>o)&&(e=zA(e,l["tx-steps"]));return e}notifyAll(){Object.keys(this.queryCbs).forEach(e=>{this.querySubs.waitForKeyToLoad(e).then(()=>this.notifyOne(e)).catch(()=>this.notifyOne(e))})}loadedNotifyAll(){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyAll()).catch(()=>this.notifyAll())}shutdown(){var e;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(e=this._transport)===null||e===void 0||e.close()}_sendMutation(e,i){if(i.error){this._handleMutationError("error",e,{message:i.error.message});return}if(this.status!==Vn.AUTHENTICATED){this._finishTransaction("enqueued",e);return}const o=Math.max(6e3,Math.min(this._inFlightMutationEventIds.size+1,this._pendingMutations().size+1)*6e3);this._isOnline?(this._trySend(e,i),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",e,{message:"transaction timed out"})},o)):this._finishTransaction("enqueued",e)}_flushPendingMessages(){Object.keys(this.queryCbs).map(r=>this.querySubs.currentValue[r]).filter(r=>r).forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),this._rewriteMutationsSorted(this.attrs,this._pendingMutations()).forEach(([r,l])=>{l["tx-id"]||this._sendMutation(r,l)}),this._syncTable.flushPending()}_cleanupPendingMutationsQueries(){let e=Number.MAX_SAFE_INTEGER;for(const{result:i}of Object.values(this.querySubs.currentValue))i?.processedTxId&&(e=Math.min(e,i?.processedTxId));this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r["tx-id"]&&r["tx-id"]<=e&&i.delete(o)})}_cleanupPendingMutationsTimeout(){if(this._pendingMutations().size<this._pendingMutationCleanupThreshold)return;const e=Date.now();this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r.confirmed&&r.confirmed+this._pendingTxCleanupTimeout<e&&i.delete(o)})}_trySendAuthed(...e){this.status===Vn.AUTHENTICATED&&this._trySend(...e)}_trySend(e,i,o){if(this._transport.isOpen()){switch(Ry[i.op]||this._log.info("[send]",this._transport.id,i.op,i),i.op){case"transact":{this._inFlightMutationEventIds.add(e);break}case"init":this._inFlightMutationEventIds.clear()}this._transport.send(Object.assign({"client-event-id":e},i))}}_startSocket(){if(this._wsOk=null,this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._transport&&this._transport.isConnecting()){this._log.info("[socket][start]",this._transport.id,"maintained as current transport, we were still in a connecting state");return}const e=this._transport;this._transport=iw({transportType:this._transportType,appId:this.config.appId,apiURI:this.config.apiURI,wsURI:this.config.websocketURI,EventSourceImpl:this._EventSource}),this._transport.onopen=this._transportOnOpen,this._transport.onmessage=this._transportOnMessage,this._transport.onclose=this._transportOnClose,this._transport.onerror=this._transportOnError,this._log.info("[socket][start]",this._transport.id),e?.isOpen()&&(this._log.info("[socket][start]",this._transport.id,"close previous transport id = ",e.id),e.close())}getLocalId(e){return it(this,void 0,void 0,function*(){const i=`localToken_${e}`;if(this.kv.currentValue[i])return this.kv.currentValue[i];const o=yield this.kv.waitForKeyToLoad(i);if(o)return o;const r=ct();return this.kv.updateInPlace(l=>{l[i]||(l[i]=r)}),yield this.kv.waitForKeyToLoad(i)})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const e=new URL(window.location.href);if(e.searchParams.get(df)){const i=e.toString();e.searchParams.delete(df),e.searchParams.delete("code"),e.searchParams.delete("error");const o=e.pathname+(e.searchParams.size?"?"+e.searchParams:"")+e.hash;if(history.replaceState(history.state,"",o),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let r=!1;const l=c=>{var f;r||(r=!0,navigation.removeEventListener("navigate",l),!c.userInitiated&&c.navigationType==="replace"&&((f=c.destination)===null||f===void 0?void 0:f.url)===i&&history.replaceState(history.state,"",o))};navigation.addEventListener("navigate",l)}}}_oauthLoginInit(){return it(this,void 0,void 0,function*(){var e,i,o,r;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const l=new URLSearchParams(window.location.search);if(!l.get(df))return null;const c=l.get("error");if(c)return this._replaceUrlAfterOAuth(),{error:{message:c}};const f=l.get("code");if(!f)return null;this._replaceUrlAfterOAuth();try{const p=yield this._getCurrentUser(),h=p?.type==="guest",{user:y}=yield hy({apiURI:this.config.apiURI,appId:this.config.appId,code:f,refreshToken:h?p.refresh_token:void 0});return this.setCurrentUser(y),null}catch(p){return((e=p?.body)===null||e===void 0?void 0:e.type)==="record-not-found"&&((o=(i=p?.body)===null||i===void 0?void 0:i.hint)===null||o===void 0?void 0:o["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((r=p?.body)===null||r===void 0?void 0:r.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return it(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(e){return this.mutationErrorCbs.push(e),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(i=>i!==e)}}subscribeAuth(e){this.authCbs.push(e);const i=this._currentUserCached;i.isLoading||e(this._currentUserCached);let o=!1;return this.getCurrentUser().then(r=>{o||hl(r,i)||e(r)}),()=>{o=!0,this.authCbs=this.authCbs.filter(r=>r!==e)}}getAuth(){return it(this,void 0,void 0,function*(){const{user:e,error:i}=yield this.getCurrentUser();if(i)throw new as("Could not get current user: "+i.message);return e})}subscribeConnectionStatus(e){return this.connectionStatusCbs.push(e),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(i=>i!==e)}}subscribeAttrs(e){return this.attrsCbs.push(e),this.attrs&&e(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(i=>i!==e)}}notifyAuthSubs(e){this.authCbs.forEach(i=>i(e))}notifyMutationErrorSubs(e){this.mutationErrorCbs.forEach(i=>i(e))}notifyAttrsSubs(){if(!this.attrs)return;const e=this.optimisticAttrs();this.attrsCbs.forEach(i=>i(e))}notifyConnectionStatusSubs(e){this.connectionStatusCbs.forEach(i=>i(e))}setCurrentUser(e){return it(this,void 0,void 0,function*(){this.kv.updateInPlace(i=>{i[pr]=e}),yield this.kv.waitForKeyToLoad(pr)})}getCurrentUserCached(){return this._currentUserCached}_getCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(pr);return typeof e=="string"?JSON.parse(e):e})}getCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this._waitForOAuthCallbackResponse();if(e?.error){const i={error:e.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}try{const o={user:yield this._getCurrentUser(),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}catch(i){return{user:void 0,isLoading:!1,error:{message:i?.message||"Error loading user"}}}})}_hasCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(pr);return typeof e=="string"?JSON.parse(e)!=null:e!=null})}changeCurrentUser(e){return it(this,void 0,void 0,function*(){var i;const{user:o}=yield this.getCurrentUser();if(!hl(o,e)){yield this.setCurrentUser(e),this.updateUser(e);try{(i=this._broadcastChannel)===null||i===void 0||i.postMessage({type:"auth"})}catch(r){console.error("Error posting message to broadcast channel",r)}}})}updateUser(e){const i={error:void 0,user:e};this._currentUserCached=Object.assign({isLoading:!1},i),this._dataForQueryCache={},this.querySubs.updateInPlace(o=>{Object.keys(o).forEach(r=>{delete o[r].result})}),this._reconnectTimeoutMs=0,this._transport.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(i)}sendMagicCode({email:e}){return SM({apiURI:this.config.apiURI,appId:this.config.appId,email:e})}signInWithMagicCode(e){return it(this,arguments,void 0,function*({email:i,code:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",f=yield EM({apiURI:this.config.apiURI,appId:this.config.appId,email:i,code:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(f.user),f})}signInWithCustomToken(e){return it(this,void 0,void 0,function*(){const i=yield CM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:e});return yield this.changeCurrentUser(i.user),i})}signInAsGuest(){return it(this,void 0,void 0,function*(){const e=yield AM({apiURI:this.config.apiURI,appId:this.config.appId});return yield this.changeCurrentUser(e.user),e})}potentiallyInvalidateToken(e,i){var o;const r=(o=e?.user)===null||o===void 0?void 0:o.refresh_token;if(!r)return;if(i.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}MM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:r}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(c=>{})}signOut(e){return it(this,void 0,void 0,function*(){const i=yield this.getCurrentUser();this.potentiallyInvalidateToken(i,e),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:e,redirectURL:i}){const{apiURI:o,appId:r}=this.config;return`${o}/runtime/oauth/start?app_id=${r}&client_name=${e}&redirect_uri=${i}`}exchangeCodeForToken(e){return it(this,arguments,void 0,function*({code:i,codeVerifier:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",f=yield hy({apiURI:this.config.apiURI,appId:this.config.appId,code:i,codeVerifier:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(f.user),f})}issuerURI(){const{apiURI:e,appId:i}=this.config;return`${e}/runtime/${i}`}signInWithIdToken(e){return it(this,arguments,void 0,function*({idToken:i,clientName:o,nonce:r}){var l;const c=yield this.getCurrentUser(),f=(l=c?.user)===null||l===void 0?void 0:l.refresh_token,p=yield bM({apiURI:this.config.apiURI,appId:this.config.appId,idToken:i,clientName:o,nonce:r,refreshToken:f});return yield this.changeCurrentUser(p.user),p})}joinRoom(e,i){let o=!1;this._rooms[e]||(o=!0,this._rooms[e]={isConnected:!1,error:void 0}),this._presence[e]=this._presence[e]||{};const r=this._presence[e].result;return i&&!r&&(this._presence[e].result=this._presence[e].result||{},this._presence[e].result.user=i,this._notifyPresenceSubs(e)),o&&this._tryJoinRoom(e,i),()=>{this._cleanupRoom(e)}}_cleanupRoom(e){var i,o,r,l;if(!(!((o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0)&&o.length)&&!Object.keys((r=this._broadcastSubs[e])!==null&&r!==void 0?r:{}).length){const c=(l=this._rooms[e])===null||l===void 0?void 0:l.isConnected;delete this._rooms[e],delete this._presence[e],delete this._broadcastSubs[e],c?this._tryLeaveRoom(e):this._roomsPendingLeave[e]=!0}}getPresence(e,i,o={}){const r=this._rooms[i],l=this._presence[i];return!r||!l||!l.result?null:Object.assign(Object.assign({},DM(l.result,o,this._sessionId)),{isLoading:!r.isConnected,error:r.error})}publishPresence(e,i,o){const r=this._rooms[i],l=this._presence[i];if(!r||!l)return;l.result=l.result||{};const c=Object.assign(Object.assign({},l.result.user),o);l.result.user=c,r.isConnected&&(this._trySetPresence(i,c),this._notifyPresenceSubs(i))}_trySetPresence(e,i){this._trySendAuthed(ct(),{op:"set-presence","room-id":e,data:i})}_tryJoinRoom(e,i){this._trySendAuthed(ct(),{op:"join-room","room-id":e,data:i}),delete this._roomsPendingLeave[e]}_tryLeaveRoom(e){this._trySendAuthed(ct(),{op:"leave-room","room-id":e})}_trySetRoomConnected(e,i){const o=this._rooms[e];o&&(o.isConnected=i)}subscribePresence(e,i,o,r){const l=this.joinRoom(i,o.initialPresence||o.initialData),c=Object.assign(Object.assign({},o),{roomId:i,cb:r,prev:null});return this._presence[i]=this._presence[i]||{},this._presence[i].handlers=this._presence[i].handlers||[],this._presence[i].handlers.push(c),this._notifyPresenceSub(i,c),()=>{var f,p,h;this._presence[i].handlers=(h=(p=(f=this._presence[i])===null||f===void 0?void 0:f.handlers)===null||p===void 0?void 0:p.filter(y=>y!==c))!==null&&h!==void 0?h:[],l()}}_notifyPresenceSubs(e){var i,o;(o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0||o.forEach(r=>{this._notifyPresenceSub(e,r)})}_notifyPresenceSub(e,i){const o=this.getPresence("",e,i);o&&(i.prev&&!UM(o,i.prev)||(i.prev=o,i.cb(o)))}_patchPresencePeers(e,i){var o,r,l;const c=((r=(o=this._presence[e])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.peers)||{};let f=Object.fromEntries(Object.entries(c).map(([h,y])=>[h,{data:y}]));(l=this._presence[e])===null||l===void 0||l.result;const p=Sl(f,h=>{for(let[y,_,T]of i)switch(_){case"+":fA(h,y,T);break;case"r":ey(h,y,T);break;case"-":k0(h,y);break}delete h[this._sessionId]});this._setPresencePeers(e,p)}_setPresencePeers(e,i){const o=Object.assign({},i);delete o[this._sessionId];const r=Object.fromEntries(Object.entries(o).map(([l,c])=>[l,c.data]));this._presence=Sl(this._presence,l=>{ey(l,[e,"result","peers"],r)})}publishTopic({roomType:e,roomId:i,topic:o,data:r}){var l;const c=this._rooms[i];if(c){if(!c.isConnected){this._broadcastQueue[i]=(l=this._broadcastQueue[i])!==null&&l!==void 0?l:[],this._broadcastQueue[i].push({topic:o,roomType:e,data:r});return}this._tryBroadcast(i,e,o,r)}}_tryBroadcast(e,i,o,r){this._trySendAuthed(ct(),{op:"client-broadcast","room-id":e,roomType:i,topic:o,data:r})}subscribeTopic(e,i,o){const r=this.joinRoom(e);return this._broadcastSubs[e]=this._broadcastSubs[e]||{},this._broadcastSubs[e][i]=this._broadcastSubs[e][i]||[],this._broadcastSubs[e][i].push(o),this._presence[e]=this._presence[e]||{},()=>{this._broadcastSubs[e][i]=this._broadcastSubs[e][i].filter(l=>l!==o),this._broadcastSubs[e][i].length||delete this._broadcastSubs[e][i],r()}}_notifyBroadcastSubs(e,i,o){var r,l,c;(c=(l=(r=this._broadcastSubs)===null||r===void 0?void 0:r[e])===null||l===void 0?void 0:l[i])===null||c===void 0||c.forEach(f=>{var p,h,y,_,T,E;const b=(p=o.data)===null||p===void 0?void 0:p.data,M=o.data["peer-id"]===this._sessionId?(y=(h=this._presence[e])===null||h===void 0?void 0:h.result)===null||y===void 0?void 0:y.user:(E=(T=(_=this._presence[e])===null||_===void 0?void 0:_.result)===null||T===void 0?void 0:T.peers)===null||E===void 0?void 0:E[o.data["peer-id"]];return f(b,M)})}uploadFile(e,i,o){return it(this,void 0,void 0,function*(){var r;const l=yield this.getCurrentUser(),c=(r=l?.user)===null||r===void 0?void 0:r.refresh_token;return wM(Object.assign(Object.assign({},o),{apiURI:this.config.apiURI,appId:this.config.appId,path:e,file:i,refreshToken:c}))})}deleteFile(e){return it(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield RM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}upload(e,i){return it(this,void 0,void 0,function*(){var o;const r=yield this.getCurrentUser(),l=(o=r?.user)===null||o===void 0?void 0:o.refresh_token,c=e||i.name,f=yield NM({apiURI:this.config.apiURI,appId:this.config.appId,fileName:c,refreshToken:l});return yield xM(f,i)})}getDownloadUrl(e){return it(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield IM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}}let ll;function fw(t,e){ll?.dispose();const i=yw(e),o=pw(e,f),r=hw(dw(t));function l(y){var _;y.source===r.element.contentWindow&&((_=y.data)===null||_===void 0?void 0:_.type)==="close"&&i.isVisible()&&f()}function c(y){const _=y.shiftKey&&y.ctrlKey&&y.key==="0",T=y.key==="Escape"||y.key==="Esc";(_||T&&i.isVisible())&&f()}function f(){i.isVisible()?i.element.style.display="none":(i.element.style.display="block",i.element.contains(r.element)||i.element.appendChild(r.element))}function p(){i.element.remove(),o.element.remove(),removeEventListener("keydown",c),removeEventListener("message",l)}function h(){document.body.appendChild(i.element),document.body.appendChild(o.element),addEventListener("keydown",c),addEventListener("message",l),ll={dispose:p}}return h()}function dw(t){return`${Ed||r_?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${t}`}function hw(t){const e=document.createElement("iframe");return e.src=t,e.className="instant-devtool-iframe",Object.assign(e.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:e}}function pw(t,e){const i=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,o=document.createElement("button");return o.innerHTML=i,o.className="instant-devtool-toggler",Object.assign(o.style,Object.assign(Object.assign({position:"fixed"},mw(t.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),o.addEventListener("click",e),{element:o}}function mw(t){switch(t){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function gw(t){switch(t){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function yw(t){const e=document.createElement("div");Object.assign(e.style,Object.assign(Object.assign({position:"fixed"},gw(t.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),e.style.display="none",e.className="instant-devtool-container";function i(){return e.style.display!=="none"}return{element:e,isVisible:i}}const vw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function _w(){var t;return globalThis.__instantDbSchemaHashStore=(t=globalThis.__instantDbSchemaHashStore)!==null&&t!==void 0?t:new WeakMap,globalThis.__instantDbSchemaHashStore}function Tw(){var t;return globalThis.__instantDbStore=(t=globalThis.__instantDbStore)!==null&&t!==void 0?t:{},globalThis.__instantDbStore}function Lf(t){const e=t.__adminToken;return t.appId+"_"+(t.websocketURI||"default_ws_uri")+"_"+(t.apiURI||"default_api_uri")+"_"+(e||"client_only")+"_"+t.useDateObjects}const kf=Tw(),xy=_w();class Sw{constructor(e){this.db=e,this.sendMagicCode=i=>this.db.sendMagicCode(i),this.signInWithMagicCode=i=>this.db.signInWithMagicCode(i),this.signInWithToken=i=>this.db.signInWithCustomToken(i),this.signInAsGuest=()=>this.db.signInAsGuest(),this.createAuthorizationURL=i=>this.db.createAuthorizationURL(i),this.signInWithIdToken=i=>this.db.signInWithIdToken(i),this.exchangeOAuthCode=i=>this.db.exchangeCodeForToken(i),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(i={invalidateToken:!0})=>this.db.signOut(i)}}class Ew{constructor(e){this.db=e,this.uploadFile=(i,o,r={})=>this.db.uploadFile(i,o,r),this.delete=i=>this.db.deleteFile(i),this.upload=(i,o)=>this.db.upload(i,o),this.put=this.upload,this.getDownloadUrl=i=>this.db.getDownloadUrl(i)}}function Cw(t){return JSON.parse(JSON.stringify(t))}class Aw{constructor(e){this.tx=Sd(),this._reactor=e,this.auth=new Sw(this._reactor),this.storage=new Ew(this._reactor)}transact(e){return this._reactor.pushTx(e)}getLocalId(e){return this._reactor.getLocalId(e)}subscribeQuery(e,i,o){return this._reactor.subscribeQuery(e,i,o)}subscribeAuth(e){return this._reactor.subscribeAuth(e)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(e){return this._reactor.subscribeConnectionStatus(e)}joinRoom(e="_defaultRoomType",i="_defaultRoomId",o){return{leaveRoom:this._reactor.joinRoom(i,o?.initialPresence),subscribeTopic:(l,c)=>this._reactor.subscribeTopic(i,l,c),subscribePresence:(l,c)=>this._reactor.subscribePresence(e,i,l,c),publishTopic:(l,c)=>this._reactor.publishTopic({roomType:e,roomId:i,topic:l,data:c}),publishPresence:l=>this._reactor.publishPresence(e,i,l),getPresence:l=>this._reactor.getPresence(e,i,l)}}shutdown(){delete kf[Lf(this._reactor.config)],this._reactor.shutdown()}queryOnce(e,i){return this._reactor.queryOnce(e,i)}_syncTableExperimental(e,i){return this._reactor.subscribeTable(e,i)}}function Iy(t){if(!t)return"0";const e=xy.get(t);if(e)return e;const i=yt(t);return xy.set(t,i),i}function bw(t,e){return Iy(t._reactor.config.schema)!==Iy(e)}function Mw(t,e,i,o,r){const l=kf[Lf(t)];if(l)return bw(l,t.schema)&&l._reactor.updateSchema(t.schema),l;const c=new cw(Object.assign(Object.assign(Object.assign({},vw),t),{cardinalityInference:!!t.schema}),e||i_,i||o_,Object.assign(Object.assign({},o||{}),{"@instantdb/core":Cd}),r),f=new Aw(c);return kf[Lf(t)]=f,ww(t.appId,t.devtool),f}function ww(t,e){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof e=="boolean"&&!e)return;const i=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof e=="object"?e:{});i.allowedHosts.includes(window.location.hostname)&&fw(t,i)}const Rw={isLoading:!0,data:void 0,pageInfo:void 0,error:void 0};function Dy(t){return Object.assign({isLoading:!t,data:void 0,pageInfo:void 0,error:void 0},t||{})}function Nw(t,e,i){e&&i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const o=e?Cw(e):null,r=yt(o),l=L.useRef(Dy(t._reactor.getPreviousResult(o))),c=L.useCallback(p=>(l.current=Dy(t._reactor.getPreviousResult(o)),o?t.subscribeQuery(o,y=>{l.current=Object.assign({isLoading:!y,data:void 0,pageInfo:void 0,error:void 0},y),p()}):()=>{}),[r]);return{state:L.useSyncExternalStore(c,()=>l.current,()=>Rw),query:o}}function xw(){const t=L.useRef(null);L.useEffect(()=>{i()},[]);function e(o,r){clearTimeout(t.current),t.current=setTimeout(r,o)}function i(){clearTimeout(t.current)}return{set:e,clear:i}}const Iw=1e3;function Dw(t,e,i){const o=L.useRef(i);o.current=i,L.useEffect(()=>t.core._reactor.subscribeTopic(t.id,e,(l,c)=>{o.current(l,c)}),[t.id,e])}function Uw(t,e){return L.useEffect(()=>t.core._reactor.joinRoom(t.id),[t.id]),L.useCallback(o=>{t.core._reactor.publishTopic({roomType:t.type,roomId:t.id,topic:e,data:o})},[t.id,e])}function Pw(t,e={}){var i,o;const[r,l]=L.useState(()=>{var p;return(p=t.core._reactor.getPresence(t.type,t.id,e))!==null&&p!==void 0?p:{peers:{},isLoading:!0}});L.useEffect(()=>t.core._reactor.subscribePresence(t.type,t.id,e,h=>{l(h)}),[t.id,e.user,(i=e.peers)===null||i===void 0?void 0:i.join(),(o=e.keys)===null||o===void 0?void 0:o.join()]);const c=L.useCallback(p=>{t.core._reactor.publishPresence(t.type,t.id,p)},[t.type,t.id]);return L.useMemo(()=>Object.assign(Object.assign({},r),{publishPresence:c}),[r,c])}function Lw(t,e,i){L.useEffect(()=>t.core._reactor.joinRoom(t.id,e),[t.id]),L.useEffect(()=>t.core._reactor.publishPresence(t.type,t.id,e),[t.type,t.id,i??JSON.stringify(e)])}function kw(t,e,i={}){const o=xw(),r=Wi.usePresence(t,{keys:[e]}),l=L.useMemo(()=>{var y;const _=t._core._reactor.getPresence(t.type,t.id);return i?.writeOnly?[]:Object.values((y=_?.peers)!==null&&y!==void 0?y:{}).filter(T=>T[e]===!0)},[i?.writeOnly,r]),c=L.useCallback(y=>{var _;t.core._reactor.publishPresence(t.type,t.id,{[e]:y}),y&&(i?.timeout===null||i?.timeout===0||o.set((_=i?.timeout)!==null&&_!==void 0?_:Iw,()=>{t.core._reactor.publishPresence(t.type,t.id,{[e]:null})}))},[t.type,t.id,e,i?.timeout,o]),f=L.useCallback(y=>{const T=!(i?.stopOnEnter&&y.key==="Enter");c(T)},[i.stopOnEnter,c]),p=L.useCallback(()=>{c(!1)},[c]),h=L.useMemo(()=>({onKeyDown:f,onBlur:p}),[f,p]);return{active:l,setActive:c,inputProps:h}}const Wi={useTopicEffect:Dw,usePublishTopic:Uw,usePresence:Pw,useSyncPresence:Lw,useTypingIndicator:kw};class Ow{constructor(e,i,o){this.useTopicEffect=(r,l)=>{Wi.useTopicEffect(this,r,l)},this.usePublishTopic=r=>Wi.usePublishTopic(this,r),this.usePresence=(r={})=>Wi.usePresence(this,r),this.useSyncPresence=(r,l)=>Wi.useSyncPresence(this,r,l),this.useTypingIndicator=(r,l={})=>Wi.useTypingIndicator(this,r,l),this.core=e,this._core=this.core,this.type=i,this.id=o}}var qw=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};const Gw={isLoading:!0,user:void 0,error:void 0};class Hw{constructor(e,i){this.tx=Sd(),this.getLocalId=o=>this.core.getLocalId(o),this.useLocalId=o=>{const[r,l]=L.useState(null);return L.useEffect(()=>{qw(this,void 0,void 0,function*(){const f=yield this.getLocalId(o);l(f)})},[o]),r},this.rooms=Wi,this.transact=o=>this.core.transact(o),this.useQuery=(o,r)=>Nw(this.core,o,r).state,this.useAuth=()=>{const o=L.useRef(this.core._reactor._currentUserCached),r=L.useCallback(c=>this.core.subscribeAuth(p=>{o.current=Object.assign({isLoading:!1},p),c()}),[]);return L.useSyncExternalStore(r,()=>o.current,()=>Gw)},this.useUser=()=>{const{user:o}=this.useAuth();if(!o)throw new as("useUser must be used within an auth-protected route");return o},this.useConnectionStatus=()=>{const o=L.useRef(this.core._reactor.status),r=L.useCallback(c=>this.core.subscribeConnectionStatus(p=>{p!==o.current&&(o.current=p,c())}),[]);return L.useSyncExternalStore(r,()=>o.current,()=>"connecting")},this.queryOnce=(o,r)=>this.core.queryOnce(o,r),this.SignedIn=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||!r.user?null:C.jsx(C.Fragment,{children:o})},this.SignedOut=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||r.user?null:C.jsx(C.Fragment,{children:o})},this.core=Mw(e,this.constructor.Storage,this.constructor.NetworkListener,i,this.constructor.EventSourceImpl),this._core=this.core,this.auth=this.core.auth,this.storage=this.core.storage}room(e="_defaultRoomType",i="_defaultRoomId"){return new Ow(this.core,e,i)}getAuth(){return this.core.getAuth()}}class Uy extends Error{constructor(e,i){super(e),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function hf(t){}function Vw(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=hf,onError:i=hf,onRetry:o=hf,onComment:r}=t;let l="",c=!0,f,p="",h="";function y(M){const w=c?M.replace(/^\xEF\xBB\xBF/,""):M,[R,D]=zw(`${l}${w}`);for(const U of R)_(U);l=D,c=!1}function _(M){if(M===""){E();return}if(M.startsWith(":")){r&&r(M.slice(M.startsWith(": ")?2:1));return}const w=M.indexOf(":");if(w!==-1){const R=M.slice(0,w),D=M[w+1]===" "?2:1,U=M.slice(w+D);T(R,U,M);return}T(M,"",M)}function T(M,w,R){switch(M){case"event":h=w;break;case"data":p=`${p}${w}
`;break;case"id":f=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?o(parseInt(w,10)):i(new Uy(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:R}));break;default:i(new Uy(`Unknown field "${M.length>20?`${M.slice(0,20)}`:M}"`,{type:"unknown-field",field:M,value:w,line:R}));break}}function E(){p.length>0&&e({id:f,event:h||void 0,data:p.endsWith(`
`)?p.slice(0,-1):p}),f=void 0,p="",h=""}function b(M={}){l&&M.consume&&_(l),c=!0,f=void 0,p="",h="",l=""}return{feed:y,reset:b}}function zw(t){const e=[];let i="",o=0;for(;o<t.length;){const r=t.indexOf("\r",o),l=t.indexOf(`
`,o);let c=-1;if(r!==-1&&l!==-1?c=Math.min(r,l):r!==-1?r===t.length-1?c=-1:c=r:l!==-1&&(c=l),c===-1){i=t.slice(o);break}else{const f=t.slice(o,c);e.push(f),o=c+1,t[o-1]==="\r"&&t[o]===`
`&&o++}}return[e,i]}class Py extends Event{constructor(e,i){var o,r;super(e),this.code=(o=i?.code)!=null?o:void 0,this.message=(r=i?.message)!=null?r:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,i,o){return o(Ly(this),i)}[Symbol.for("Deno.customInspect")](e,i){return e(Ly(this),i)}}function Bw(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function Of(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Of).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Of(t.cause)}`:t.message:`${t}`}function Ly(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var p_=t=>{throw TypeError(t)},Ad=(t,e,i)=>e.has(t)||p_("Cannot "+i),_e=(t,e,i)=>(Ad(t,e,"read from private field"),i?i.call(t):e.get(t)),st=(t,e,i)=>e.has(t)?p_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),ze=(t,e,i,o)=>(Ad(t,e,"write to private field"),e.set(t,i),i),Bn=(t,e,i)=>(Ad(t,e,"access private method"),i),xt,ji,Qo,ml,Al,br,Wo,Mr,bi,Xo,ts,Zo,Tr,un,qf,Gf,Hf,ky,Vf,zf,Sr,Bf,Ff;class wr extends EventTarget{constructor(e,i){var o,r;super(),st(this,un),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,st(this,xt),st(this,ji),st(this,Qo),st(this,ml),st(this,Al),st(this,br),st(this,Wo),st(this,Mr,null),st(this,bi),st(this,Xo),st(this,ts,null),st(this,Zo,null),st(this,Tr,null),st(this,Gf,async l=>{var c;_e(this,Xo).reset();const{body:f,redirected:p,status:h,headers:y}=l;if(h===204){Bn(this,un,Sr).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(p?ze(this,Qo,new URL(l.url)):ze(this,Qo,void 0),h!==200){Bn(this,un,Sr).call(this,`Non-200 status code (${h})`,h);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){Bn(this,un,Sr).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(_e(this,xt)===this.CLOSED)return;ze(this,xt,this.OPEN);const _=new Event("open");if((c=_e(this,Tr))==null||c.call(this,_),this.dispatchEvent(_),typeof f!="object"||!f||!("getReader"in f)){Bn(this,un,Sr).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const T=new TextDecoder,E=f.getReader();let b=!0;do{const{done:M,value:w}=await E.read();w&&_e(this,Xo).feed(T.decode(w,{stream:!M})),M&&(b=!1,_e(this,Xo).reset(),Bn(this,un,Bf).call(this))}while(b)}),st(this,Hf,l=>{ze(this,bi,void 0),!(l.name==="AbortError"||l.type==="aborted")&&Bn(this,un,Bf).call(this,Of(l))}),st(this,Vf,l=>{typeof l.id=="string"&&ze(this,Mr,l.id);const c=new MessageEvent(l.event||"message",{data:l.data,origin:_e(this,Qo)?_e(this,Qo).origin:_e(this,ji).origin,lastEventId:l.id||""});_e(this,Zo)&&(!l.event||l.event==="message")&&_e(this,Zo).call(this,c),this.dispatchEvent(c)}),st(this,zf,l=>{ze(this,br,l)}),st(this,Ff,()=>{ze(this,Wo,void 0),_e(this,xt)===this.CONNECTING&&Bn(this,un,qf).call(this)});try{if(e instanceof URL)ze(this,ji,e);else if(typeof e=="string")ze(this,ji,new URL(e,Fw()));else throw new Error("Invalid URL")}catch{throw Bw("An invalid or illegal string was specified")}ze(this,Xo,Vw({onEvent:_e(this,Vf),onRetry:_e(this,zf)})),ze(this,xt,this.CONNECTING),ze(this,br,3e3),ze(this,Al,(o=i?.fetch)!=null?o:globalThis.fetch),ze(this,ml,(r=i?.withCredentials)!=null?r:!1),Bn(this,un,qf).call(this)}get readyState(){return _e(this,xt)}get url(){return _e(this,ji).href}get withCredentials(){return _e(this,ml)}get onerror(){return _e(this,ts)}set onerror(e){ze(this,ts,e)}get onmessage(){return _e(this,Zo)}set onmessage(e){ze(this,Zo,e)}get onopen(){return _e(this,Tr)}set onopen(e){ze(this,Tr,e)}addEventListener(e,i,o){const r=i;super.addEventListener(e,r,o)}removeEventListener(e,i,o){const r=i;super.removeEventListener(e,r,o)}close(){_e(this,Wo)&&clearTimeout(_e(this,Wo)),_e(this,xt)!==this.CLOSED&&(_e(this,bi)&&_e(this,bi).abort(),ze(this,xt,this.CLOSED),ze(this,bi,void 0))}}xt=new WeakMap,ji=new WeakMap,Qo=new WeakMap,ml=new WeakMap,Al=new WeakMap,br=new WeakMap,Wo=new WeakMap,Mr=new WeakMap,bi=new WeakMap,Xo=new WeakMap,ts=new WeakMap,Zo=new WeakMap,Tr=new WeakMap,un=new WeakSet,qf=function(){ze(this,xt,this.CONNECTING),ze(this,bi,new AbortController),_e(this,Al)(_e(this,ji),Bn(this,un,ky).call(this)).then(_e(this,Gf)).catch(_e(this,Hf))},Gf=new WeakMap,Hf=new WeakMap,ky=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",..._e(this,Mr)?{"Last-Event-ID":_e(this,Mr)}:void 0},cache:"no-store",signal:(t=_e(this,bi))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},Vf=new WeakMap,zf=new WeakMap,Sr=function(t,e){var i;_e(this,xt)!==this.CLOSED&&ze(this,xt,this.CLOSED);const o=new Py("error",{code:e,message:t});(i=_e(this,ts))==null||i.call(this,o),this.dispatchEvent(o)},Bf=function(t,e){var i;if(_e(this,xt)===this.CLOSED)return;ze(this,xt,this.CONNECTING);const o=new Py("error",{code:e,message:t});(i=_e(this,ts))==null||i.call(this,o),this.dispatchEvent(o),ze(this,Wo,setTimeout(_e(this,Ff),_e(this,br)))},Ff=new WeakMap,wr.CONNECTING=0,wr.OPEN=1,wr.CLOSED=2;Object.defineProperty(wr,Symbol.for("eventsource.supports-fetch-override"),{value:!0,writable:!1,configurable:!1,enumerable:!1});function Fw(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}class m_ extends Hw{}m_.EventSourceImpl=wr;function Yw(t){return new m_(t,{"@instantdb/react":Cd})}const $w="fb13a3d0-35ab-493b-9aa6-64a77363fe93",xe=Yw({appId:$w}),Yf={calories_min:1600,calories_max:2e3,purines_min:0,purines_max:400,protein_target:50,carbs_target:250,fat_target:65,fiber_target:25,sodium_max:2300,sugar_max:50,hydration_target:2e3},Jw={calories:{icon:"",unit:"kcal",label:"Calories"},purines:{icon:"",unit:"mg",label:"Purines"},protein:{icon:"",unit:"g",label:"Protein"},carbs:{icon:"",unit:"g",label:"Carbs"},fat:{icon:"",unit:"g",label:"Fat"},fiber:{icon:"",unit:"g",label:"Fiber"},sodium:{icon:"",unit:"mg",label:"Sodium"},sugar:{icon:"",unit:"g",label:"Sugar"},hydration:{icon:"",unit:"ml",label:"Water"}};function Kw(t,e,i,o){const r=10*t+6.25*e-5*i;return o==="male"?r+5:r-161}const Qw={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};function Xw(t,e,i,o,r){const l=Kw(t,e,i,o),c=Qw[r]||1.55;return Math.round(l*c)}function Zw(t=[]){return t.includes("kidney_disease")?150:t.includes("gout")?200:400}function Ww(t,e){const i=t*30;return Math.round(i+({sedentary:0,light:200,moderate:400,active:600,very_active:800}[e]||0))}function jw(t){const{weight_kg:e,height_cm:i,age:o,sex:r,activity_level:l,dietary_conditions:c=[]}=t,f=Xw(e,i,o,r,l),p=Zw(c),h=Ww(e,l),_=Math.round(e*({sedentary:.8,light:.9,moderate:1,active:1.2,very_active:1.4}[l]||1));let T=.5;c.includes("diabetes")&&(T=.4);const E=Math.round(f*T/4),b=Math.round(f*.275/9);let M=r==="female"?25:38;o>50&&(M=r==="female"?21:30);let w=2300;c.includes("kidney_disease")&&(w=1500);let R=r==="female"?25:36;return(c.includes("diabetes")||c.includes("gout"))&&(R=Math.round(R*.6)),{calories_min:Math.round(f*.85),calories_max:f,purines_min:0,purines_max:p,protein_target:_,carbs_target:E,fat_target:b,fiber_target:M,sodium_max:w,sugar_max:R,hydration_target:h}}function eR(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`}function tR(){return eR(new Date)}function nR(t){t=t.replace(/^#/,"");const e=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255,r=Math.max(e,i,o),l=Math.min(e,i,o);let c,f,p=(r+l)/2;if(r===l)c=f=0;else{const h=r-l;switch(f=p>.5?h/(2-r-l):h/(r+l),r){case e:c=((i-o)/h+(i<o?6:0))/6;break;case i:c=((o-e)/h+2)/6;break;case o:c=((e-i)/h+4)/6;break}}return{h:Math.round(c*360),s:Math.round(f*100),l:Math.round(p*100)}}function ut(t,e,i){e/=100,i/=100;const o=(1-Math.abs(2*i-1))*e,r=o*(1-Math.abs(t/60%2-1)),l=i-o/2;let c=0,f=0,p=0;return 0<=t&&t<60?(c=o,f=r,p=0):60<=t&&t<120?(c=r,f=o,p=0):120<=t&&t<180?(c=0,f=o,p=r):180<=t&&t<240?(c=0,f=r,p=o):240<=t&&t<300?(c=r,f=0,p=o):300<=t&&t<360&&(c=o,f=0,p=r),c=Math.round((c+l)*255).toString(16).padStart(2,"0"),f=Math.round((f+l)*255).toString(16).padStart(2,"0"),p=Math.round((p+l)*255).toString(16).padStart(2,"0"),`#${c}${f}${p}`}function eo(t,e=!1){const i=nR(t);return e?{primary:t,primaryLight:ut(i.h,i.s*.8,Math.min(i.l+15,80)),primaryDark:ut(i.h,i.s,Math.max(i.l-15,20)),background:ut(i.h,i.s*.2,12),surface:ut(i.h,i.s*.15,18),surfaceVariant:ut(i.h,i.s*.2,25),secondary:ut((i.h+180)%360,i.s*.7,60),text:ut(i.h,i.s*.1,95),textSecondary:ut(i.h,i.s*.15,70),border:ut(i.h,i.s*.2,30),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}:{primary:t,primaryLight:ut(i.h,i.s*.6,Math.min(i.l+20,90)),primaryDark:ut(i.h,i.s,Math.max(i.l-20,30)),background:ut(i.h,i.s*.3,97),surface:ut(i.h,i.s*.1,100),surfaceVariant:ut(i.h,i.s*.2,95),secondary:ut((i.h+180)%360,i.s*.7,i.l),text:ut(i.h,i.s*.5,15),textSecondary:ut(i.h,i.s*.3,40),border:ut(i.h,i.s*.2,85),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}}const Rr={emerald:{name:"Emerald Dragon",description:"Bright, cheerful, default",seedColor:"#66BB6A",isDark:!1},midnight:{name:"Midnight Dragon",description:"Sleek, easy on eyes",seedColor:"#7B2CBF",isDark:!0},crystal:{name:"Crystal Dragon",description:"High contrast, accessible",seedColor:"#2196F3",isDark:!1}};function to(t){const e=document.documentElement;Object.entries(t).forEach(([i,o])=>{const r=`--color-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`;e.style.setProperty(r,o)})}function iR(t,e,i){return t>i?"danger":t>i*.8||e&&t<e*.8?"warning":"success"}const g_=L.createContext(null),mr={id:"local-user",name:"Dragon Keeper",profile:{sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]},thresholds:Yf,theme:{preset:"emerald",seed_color_hex:"#66BB6A"},badges:[],stats:{total_meals_logged:0,current_streak_days:0,longest_streak_days:0,meals_saved_to_stash:0}};function oR({children:t}){const[e,i]=L.useState(null),[o,r]=L.useState(!0),[l,c]=L.useState(!1),{isLoading:f,error:p,data:h}=xe.useQuery({users:{}});L.useEffect(()=>{if(!f){if(h?.users&&h.users.length>0){const M=h.users[0];if(i({...mr,...M,profile:{...mr.profile,...M.profile},thresholds:{...mr.thresholds,...M.thresholds},theme:{...mr.theme,...M.theme}}),c(!0),M.theme?.preset){const w=Rr[M.theme.preset];if(w){const R=eo(w.seedColor,w.isDark);to(R)}else if(M.theme.seed_color_hex){const R=eo(M.theme.seed_color_hex,!1);to(R)}}}else{i(mr),c(!1);const M=Rr.emerald,w=eo(M.seedColor,M.isDark);to(w)}r(!1)}},[f,h]);const b={user:e,isLoading:o||f,isAuthenticated:l,error:p,updateProfile:async M=>{const w={...e,profile:{...e.profile,...M}};i(w),e.id&&e.id!=="local-user"&&await xe.transact([xe.tx.users[e.id].update({profile:w.profile})])},updateThresholds:async M=>{const w={...e,thresholds:{...e.thresholds,...M}};i(w),e.id&&e.id!=="local-user"&&await xe.transact([xe.tx.users[e.id].update({thresholds:w.thresholds})])},updateTheme:async(M,w=null)=>{const R={preset:M,seed_color_hex:w||e.theme.seed_color_hex},D={...e,theme:R};if(i(D),M==="custom"&&w){const U=eo(w,!1);to(U)}else{const U=Rr[M];if(U){const J=eo(U.seedColor,U.isDark);to(J)}}e.id&&e.id!=="local-user"&&await xe.transact([xe.tx.users[e.id].update({theme:R})])},saveUser:async(M=null)=>{const w=M||e;if(e.id==="local-user"){const R=crypto.randomUUID(),D={...w,id:R};return await xe.transact([xe.tx.users[R].update({id:R,name:D.name,profile:D.profile,thresholds:D.thresholds,theme:D.theme,badges:D.badges||[],stats:D.stats||{},created_at:Date.now()})]),i(D),c(!0),R}else return await xe.transact([xe.tx.users[e.id].update({name:w.name,profile:w.profile,thresholds:w.thresholds,theme:w.theme,updated_at:Date.now()})]),e.id},setUser:i};return C.jsx(g_.Provider,{value:b,children:t})}function Gr(){const t=L.useContext(g_);if(!t)throw new Error("useUser must be used within a UserProvider");return t}const sR=[{path:"/",icon:"",label:"Diary"},{path:"/charts",icon:"",label:"Scroll"},{path:"/oracle",icon:"",label:"Oracle"},{path:"/settings",icon:"",label:"Lair"}];function rR(){return C.jsx("nav",{className:"nav-bar",children:sR.map(t=>C.jsxs(M0,{to:t.path,className:({isActive:e})=>`nav-item ${e?"active":""}`,children:[C.jsx("span",{className:"nav-icon",children:t.icon}),C.jsx("span",{className:"nav-label",children:t.label})]},t.path))})}function Ni({title:t,subtitle:e,action:i,showBack:o,onBack:r}){return C.jsx("header",{className:"header",children:C.jsxs("div",{className:"header-content",children:[o&&C.jsx("button",{className:"header-back",onClick:r,"aria-label":"Go back",children:""}),C.jsxs("div",{className:"header-title-group",children:[C.jsxs("h1",{className:"header-title",children:[C.jsx("span",{className:"header-dragon",children:""})," ",t]}),e&&C.jsx("p",{className:"header-subtitle",children:e})]}),i&&C.jsx("div",{className:"header-action",children:i})]})})}function zn({nutrient:t,value:e,target:i,min:o=0,max:r,showLabel:l=!0,compact:c=!1}){const f=Jw[t]||{icon:"",unit:"",label:t},p=r||i,h=Math.min(e/p*100,100),y=iR(e,o,p);return C.jsxs("div",{className:`nutrient-progress ${c?"compact":""}`,children:[l&&C.jsxs("div",{className:"nutrient-header",children:[C.jsxs("span",{className:"nutrient-label",children:[C.jsx("span",{className:"nutrient-icon",children:f.icon}),!c&&C.jsx("span",{className:"nutrient-name",children:f.label})]}),C.jsxs("span",{className:"nutrient-value",children:[C.jsx("span",{className:"current",children:Math.round(e)}),C.jsx("span",{className:"separator",children:"/"}),C.jsx("span",{className:"target",children:Math.round(p)}),C.jsx("span",{className:"unit",children:f.unit})]})]}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:`progress-bar-fill ${y}`,style:{width:`${h}%`}})}),!c&&C.jsxs("div",{className:"nutrient-footer",children:[C.jsxs("span",{className:`status-indicator ${y}`,children:[y==="success"&&"",y==="warning"&&"",y==="danger"&&""]}),C.jsxs("span",{className:"percentage",children:[Math.round(h),"%"]})]})]})}const Oy={curious:{emoji:"",animation:"sniff",message:"Your dragon is looking for food..."},happy:{emoji:"",animation:"bounce",message:"Your dragon is happy!"},satisfied:{emoji:"",animation:"pulse",message:"Your dragon is satisfied and content."},stuffed:{emoji:"",animation:"wobble",message:"Your dragon ate too much!"},sick:{emoji:"",animation:"shake",message:"Your dragon isn't feeling well..."},celebrating:{emoji:"",animation:"celebrate",message:"Your dragon is celebrating! "},hoarding:{emoji:"",animation:"hoard",message:"Saved to your dragon's hoard!"}};function bl({state:t="happy",showMessage:e=!0,size:i="medium"}){const o=Oy[t]||Oy.happy;return C.jsxs("div",{className:`ember-mascot ${i}`,children:[C.jsxs("div",{className:`ember-emoji ${o.animation}`,children:[o.emoji,t==="sick"&&C.jsx("span",{className:"ember-effect",children:""}),t==="celebrating"&&C.jsx("span",{className:"ember-effect",children:""}),t==="happy"&&C.jsx("span",{className:"ember-effect",children:""})]}),e&&C.jsx("p",{className:"ember-message",children:o.message})]})}function aR(t,e){if(!t||!e)return"curious";const i=t.calories/e.calories_max,o=t.purines/e.purines_max;return o>1?"sick":i>1?"stuffed":o>.8||i>.8?"satisfied":t.calories===0?"curious":"happy"}const $f=()=>{const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`},qy={breakfast:1,lunch:2,dinner:3,snack:4,hydration:5};function y_(t=null){const{user:e}=Gr(),i=e?.id,o=t?{meals:{$:{where:{user_id:i,date:t}}}}:{meals:{$:{where:{user_id:i}}}},{isLoading:r,error:l,data:c}=xe.useQuery(i?o:null),f=c?.meals||[];return{meals:L.useMemo(()=>[...f].sort((E,b)=>{const M=qy[E.meal_type]||99,w=qy[b.meal_type]||99;return M-w}),[f]),isLoading:r,error:l,addMeal:async E=>{if(!i)return null;const b=crypto.randomUUID(),M={id:b,user_id:i,date:E.date||$f(),timestamp:Date.now(),meal_type:E.meal_type||"snack",meal_name:E.meal_name||"Unnamed Meal",ingredients:E.ingredients||[],total_nutrients:E.total_nutrients||{},hydration_ml:E.hydration_ml||0,image_urls:E.image_urls||[],analysis_method:E.analysis_method||"manual"};return await xe.transact([xe.tx.meals[b].update(M)]),b},updateMeal:async(E,b)=>{await xe.transact([xe.tx.meals[E].update({...b,updated_at:Date.now()})])},deleteMeal:async E=>{await xe.transact([xe.tx.meals[E].delete()])},getDailyTotals:(E=t||$f())=>f.filter(w=>w.date===E).reduce((w,R)=>(R.total_nutrients&&Object.keys(R.total_nutrients).forEach(D=>{w[D]=(w[D]||0)+(R.total_nutrients[D]||0)}),w.hydration=(w.hydration||0)+(R.hydration_ml||0),w),{})}}function v_(t=$f()){const{user:e}=Gr(),i=e?.id,{isLoading:o,data:r}=xe.useQuery(i?{hydration:{$:{where:{user_id:i,date:t}}}}:null),c=(r?.hydration||[])[0],f=c?.amount_ml||0,p=async y=>{if(i)if(c)await xe.transact([xe.tx.hydration[c.id].update({amount_ml:Math.max(0,y),updated_at:Date.now()})]);else{const _=crypto.randomUUID();await xe.transact([xe.tx.hydration[_].update({id:_,user_id:i,date:t,amount_ml:Math.max(0,y),created_at:Date.now(),updated_at:Date.now()})])}};return{totalHydration:f,isLoading:o,setHydration:p,adjustHydration:async y=>{if(!i)return;const _=Math.max(0,f+y);await p(_)}}}function bd(){const{user:t}=Gr(),e=t?.id,{isLoading:i,error:o,data:r}=xe.useQuery(e?{customItems:{$:{where:{user_id:e}}}}:null),l=r?.customItems||[],c=l.filter(T=>T.type==="meal"),f=l.filter(T=>T.type==="ingredient"),p=l.filter(T=>T.type==="container");return{savedMeals:c,customIngredients:f,bottles:p,items:l,isLoading:i,error:o,addToStash:async T=>{if(!e)return null;const E=crypto.randomUUID();return await xe.transact([xe.tx.customItems[E].update({id:E,user_id:e,type:T.type,name:T.name,icon:T.icon||null,ingredients:T.ingredients||[],total_nutrients:T.total_nutrients||{},capacity_ml:T.capacity_ml||0,use_count:T.use_count||0,created_at:Date.now()})]),E},removeFromStash:async T=>{await xe.transact([xe.tx.customItems[T].delete()])},updateStashItem:async(T,E)=>{await xe.transact([xe.tx.customItems[T].update({...E,updated_at:Date.now()})])}}}let lR,uR;function cR(){return{geminiUrl:lR,vertexUrl:uR}}function fR(t,e,i,o){var r,l;if(!t?.baseUrl){const c=cR();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class Wn{}function ee(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];m(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(o+1),i)):i}else return i}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function dR(t,e){for(const[i,o]of Object.entries(e)){const r=i.split("."),l=o.split("."),c=new Set;let f=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}Jf(t,r,l,0,c)}}function Jf(t,e,i,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),f=t;if(c in f&&Array.isArray(f[c]))for(const p of f[c])Jf(p,e,i,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,f=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of f)p[h]=c[h];for(const[h,y]of Object.entries(p)){const _=[];for(const T of i.slice(o))T==="*"?_.push(h):_.push(T);m(c,_,y)}for(const h of f)delete c[h]}}else{const c=t;l in c&&Jf(c[l],e,i,o+1,r)}}function Md(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function hR(t){const e={},i=d(t,["operationName"]);i!=null&&m(e,["operationName"],i);const o=d(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function pR(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],gR(c)),e}function mR(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],yR(c)),e}function gR(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vR(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function yR(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>_R(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function vR(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],bR(i)),e}function _R(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],MR(i)),e}function TR(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function SR(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function ER(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],CR(c)),e}function CR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function __(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],AR(c)),e}function AR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function bR(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Md(o));const r=d(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function MR(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Md(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}var Gy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gy||(Gy={}));var Hy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Hy||(Hy={}));var Vy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Vy||(Vy={}));var Mi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Mi||(Mi={}));var zy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zy||(zy={}));var By;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(By||(By={}));var Fy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Fy||(Fy={}));var Yy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Yy||(Yy={}));var $y;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($y||($y={}));var Jy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Jy||(Jy={}));var Ky;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ky||(Ky={}));var Qy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qy||(Qy={}));var Xy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Xy||(Xy={}));var Zy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Zy||(Zy={}));var Wy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Wy||(Wy={}));var jy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jy||(jy={}));var ev;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ev||(ev={}));var tv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(tv||(tv={}));var nv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nv||(nv={}));var Ml;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ml||(Ml={}));var iv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iv||(iv={}));var ov;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ov||(ov={}));var sv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sv||(sv={}));var Kf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Kf||(Kf={}));var rv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rv||(rv={}));var av;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(av||(av={}));var lv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(lv||(lv={}));var uv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(uv||(uv={}));var cv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cv||(cv={}));var fv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fv||(fv={}));var dv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dv||(dv={}));var hv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hv||(hv={}));var pv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pv||(pv={}));var mv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(mv||(mv={}));var gv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gv||(gv={}));var yv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yv||(yv={}));var vv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vv||(vv={}));var _v;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_v||(_v={}));var Tv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Tv||(Tv={}));var Sv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Sv||(Sv={}));var Ev;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ev||(Ev={}));var Cv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Cv||(Cv={}));var Av;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Av||(Av={}));var bv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Mv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Mv||(Mv={}));var wv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wv||(wv={}));var Rv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Rv||(Rv={}));var Nv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Nv||(Nv={}));var xv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xv||(xv={}));var Iv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Iv||(Iv={}));var Dv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Dv||(Dv={}));var Uv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Uv||(Uv={}));var Pv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Pv||(Pv={}));var Lv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Lv||(Lv={}));var jo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(jo||(jo={}));class Qf{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class gr{get text(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const T of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[E,b]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,o,r,l,c,f,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,o,r,l,c,f,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class kv{}class Ov{}class wR{}class RR{}class NR{}class xR{}class qv{}class Gv{}class Hv{}class IR{}class wl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new wl;let r;const l=e;return i?r=mR(l):r=pR(l),Object.assign(o,r),o}}class Vv{}class zv{}class Bv{}class DR{}class UR{}class PR{}class wd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new wd,l=ER(e);return Object.assign(o,l),o}}class LR{}class kR{}class OR{}class Fv{}class qR{get text(){var e,i,o;let r="",l=!1;const c=[];for(const f of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,o;let r="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class GR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Rd,l=__(e);return Object.assign(o,l),o}}function Re(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function T_(t,e){const i=Re(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function S_(t){return Array.isArray(t)?t.map(e=>Rl(e)):[Rl(t)]}function Rl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function E_(t){const e=Rl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function C_(t){const e=Rl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function A_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Yv(e)):[Yv(t)]}function Xf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $v(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Jv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Tt(t){if(t==null)throw new Error("ContentUnion is required");return Xf(t)?t:{role:"user",parts:A_(t)}}function Nd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Tt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Tt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Tt(i)):[Tt(e)]}function on(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($v(t)||Jv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tt(t)]}const e=[],i=[],o=Xf(t[0]);for(const r of t){const l=Xf(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if($v(r)||Jv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||e.push({role:"user",parts:A_(i)}),e}function HR(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(Mi).includes(i[0].toUpperCase())?i[0].toUpperCase():Mi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(Mi).includes(o.toUpperCase())?o.toUpperCase():Mi.TYPE_UNSPECIFIED})}}function ns(t){const e={},i=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&HR(t.type,e);for(const[c,f]of Object.entries(t))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Mi).includes(f.toUpperCase())?f.toUpperCase():Mi.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ns(f);else if(o.includes(c)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(ns(h))}e[c]=p}else if(r.includes(c)){const p={};for(const[h,y]of Object.entries(f))p[h]=ns(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function xd(t){return ns(t)}function Id(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Dd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function hs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ns(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ns(e.response));return t}function ps(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function VR(t,e,i,o=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function jn(t,e){if(typeof e!="string")throw new Error("name must be a string");return VR(t,e,"cachedContents")}function b_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ii(t){return Md(t)}function zR(t){return t!=null&&typeof t=="object"&&"name"in t}function BR(t){return t!=null&&typeof t=="object"&&"video"in t}function FR(t){return t!=null&&typeof t=="object"&&"uri"in t}function M_(t){var e;let i;if(zR(t)&&(i=t.name),!(FR(t)&&(i=t.uri,i===void 0))&&!(BR(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function w_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function R_(t){for(const e of["models","tunedModels","publisherModels"])if(YR(t,e))return t[e];return[]}function YR(t,e){return t!==null&&typeof t=="object"&&e in t}function $R(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function JR(t,e={}){const i=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=$R(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function N_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function KR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function x_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ms(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function I_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function QR(t){const e={},i=d(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>NN(c))),m(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function XR(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function ZR(t){const e={},i=d(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function gl(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["metadata","state"]);r!=null&&m(e,["state"],I_(r));const l=d(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(t,["metadata","output"]);return h!=null&&m(e,["dest"],QR(x_(h))),e}function Zf(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["state"]);r!=null&&m(e,["state"],I_(r));const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["createTime"]);c!=null&&m(e,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=d(t,["model"]);y!=null&&m(e,["model"],y);const _=d(t,["inputConfig"]);_!=null&&m(e,["src"],WR(_));const T=d(t,["outputConfig"]);T!=null&&m(e,["dest"],XR(x_(T)));const E=d(t,["completionStats"]);return E!=null&&m(e,["completionStats"],E),e}function WR(t){const e={},i=d(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const o=d(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function jR(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&m(i,["fileName"],o);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>RN(t,c))),m(i,["requests","requests"],l)}return i}function eN(t){const e={},i=d(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function iN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function oN(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],sN(o));const r=d(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=d(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["safetyRatings"],T)}const _=d(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function sN(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function D_(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>kN(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function rN(t,e){const i={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function aN(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],ZR(KR(r))),i}function Kv(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["src"]);r!=null&&m(i,["batch","inputConfig"],jR(t,N_(t,r)));const l=d(e,["config"]);return l!=null&&rN(l,i),i}function lN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],Re(t,o));const r=d(e,["src"]);r!=null&&m(i,["inputConfig"],eN(N_(t,r)));const l=d(e,["config"]);return l!=null&&aN(l,i),i}function uN(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),i}function cN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["src"]);r!=null&&m(i,["batch","inputConfig"],yN(t,r));const l=d(e,["config"]);return l!=null&&uN(l,i),i}function fN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function dN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function hN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function pN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function mN(t,e){const i={},o=d(e,["contents"]);if(o!=null){let l=Nd(t,o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(m(i,["_self"],gN(r,i)),dR(i,{"requests[].*":"requests[].request.*"})),i}function gN(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function yN(t,e){const i={},o=d(e,["fileName"]);o!=null&&m(i,["file_name"],o);const r=d(e,["inlinedRequests"]);return r!=null&&m(i,["requests"],mN(t,r)),i}function vN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function _N(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TN(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SN(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],D_(Tt(r)));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],xd(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(e,["safetySettings"]);if(i!==void 0&&U!=null){let re=U;Array.isArray(re)&&(re=re.map(Ae=>ON(Ae))),m(i,["safetySettings"],re)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let re=ps(J);Array.isArray(re)&&(re=re.map(Ae=>GN(hs(Ae)))),m(i,["tools"],re)}const B=d(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],qN(B)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=d(e,["cachedContent"]);i!==void 0&&X!=null&&m(i,["cachedContent"],jn(t,X));const K=d(e,["responseModalities"]);K!=null&&m(o,["responseModalities"],K);const se=d(e,["mediaResolution"]);se!=null&&m(o,["mediaResolution"],se);const j=d(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],Id(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=d(e,["thinkingConfig"]);ue!=null&&m(o,["thinkingConfig"],ue);const me=d(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],wN(me)),o}function EN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>oN(h))),m(e,["candidates"],p)}const r=d(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function CN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function AN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],ms(t,o)),i}function bN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function MN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function wN(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["request","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let f=on(r);Array.isArray(f)&&(f=f.map(p=>D_(p))),m(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&m(i,["request","generationConfig"],SN(t,c,d(i,["request"],{}))),i}function NN(t){const e={},i=d(t,["response"]);i!=null&&m(e,["response"],EN(i));const o=d(t,["error"]);return o!=null&&m(e,["error"],o),e}function xN(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function IN(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function DN(t){const e={},i=d(t,["config"]);return i!=null&&xN(i,e),e}function UN(t){const e={},i=d(t,["config"]);return i!=null&&IN(i,e),e}function PN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>gl(c))),m(e,["batchJobs"],l)}return e}function LN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Zf(c))),m(e,["batchJobs"],l)}return e}function kN(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],vN(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],_N(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],tN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function ON(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function qN(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],TN(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function GN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],bN(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],MN(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var Xn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xn||(Xn={}));class so{constructor(e,i,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,r)}init(e,i,o){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class HN extends Wn{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new so(Xn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=Kv(this.apiClient,e),o=i._url,r=ee("{model}:batchGenerateContent",o),f=i.batch.inputConfig.requests,p=f.requests,h=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}h.push(_)}return f.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=lN(this.apiClient,e);return f=ee("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Zf(y))}else{const h=Kv(this.apiClient,e);return f=ee("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>gl(y))}}async createEmbeddingsInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cN(this.apiClient,e);return l=ee("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>gl(p))}}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=AN(this.apiClient,e);return f=ee("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>Zf(y))}else{const h=CN(this.apiClient,e);return f=ee("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>gl(y))}}async cancel(e){var i,o,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=iN(this.apiClient,e);c=ee("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nN(this.apiClient,e);c=ee("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=UN(e);return f=ee("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=LN(y),T=new Fv;return Object.assign(T,_),T})}else{const h=DN(e);return f=ee("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=PN(y),T=new Fv;return Object.assign(T,_),T})}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=dN(this.apiClient,e);return f=ee("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>pN(y))}else{const h=fN(this.apiClient,e);return f=ee("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>hN(y))}}}function VN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Qv(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>cx(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function zN(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let y=on(c);Array.isArray(y)&&(y=y.map(_=>Qv(_))),m(e,["contents"],y)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],Qv(Tt(f)));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>dx(_))),m(e,["tools"],y)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],fx(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function BN(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=on(c);Array.isArray(_)&&(_=_.map(T=>T)),m(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],Tt(f));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>hx(T))),m(e,["tools"],_)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=d(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function FN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],T_(t,o));const r=d(e,["config"]);return r!=null&&zN(r,i),i}function YN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],T_(t,o));const r=d(e,["config"]);return r!=null&&BN(r,i),i}function $N(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],jn(t,o)),i}function JN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],jn(t,o)),i}function KN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function QN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function XN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function ZN(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WN(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jN(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function ex(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],jn(t,o)),i}function tx(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],jn(t,o)),i}function nx(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function ix(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function ox(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function sx(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function rx(t){const e={},i=d(t,["config"]);return i!=null&&ox(i,e),e}function ax(t){const e={},i=d(t,["config"]);return i!=null&&sx(i,e),e}function lx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function ux(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function cx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],XN(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],ZN(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],VN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function fx(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],WN(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function dx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],nx(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],ix(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function hx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>jN(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function px(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function mx(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function gx(t,e){const i={},o=d(e,["name"]);o!=null&&m(i,["_url","name"],jn(t,o));const r=d(e,["config"]);return r!=null&&px(r,i),i}function yx(t,e){const i={},o=d(e,["name"]);o!=null&&m(i,["_url","name"],jn(t,o));const r=d(e,["config"]);return r!=null&&mx(r,i),i}class vx extends Wn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=YN(this.apiClient,e);return f=ee("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=FN(this.apiClient,e);return f=ee("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=tx(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=ex(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=JN(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=QN(y),T=new zv;return Object.assign(T,_),T})}else{const h=$N(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=KN(y),T=new zv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=yx(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=gx(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=ax(e);return f=ee("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=ux(y),T=new Bv;return Object.assign(T,_),T})}else{const h=rx(e);return f=ee("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=lx(y),T=new Bv;return Object.assign(T,_),T})}}}function Xv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t){return this instanceof Ge?(this.v=t,this):new Ge(t)}function is(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(E){return function(b){return Promise.resolve(b).then(E,_)}}function f(E,b){o[E]&&(r[E]=function(M){return new Promise(function(w,R){l.push([E,M,w,R])>1||p(E,M)})},b&&(r[E]=b(r[E])))}function p(E,b){try{h(o[E](b))}catch(M){T(l[0][3],M)}}function h(E){E.value instanceof Ge?Promise.resolve(E.value.v).then(y,_):T(l[0][2],E)}function y(E){p("next",E)}function _(E){p("throw",E)}function T(E,b){E(b),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Nr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Xv=="function"?Xv(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(f,p){c=t[l](c),r(f,p,c.done,c.value)})}}function r(l,c,f,p){Promise.resolve(p).then(function(h){l({value:h,done:f})},c)}}function _x(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:U_(i)}function U_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Tx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Zv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<i&&t[o].role==="model";)r.push(t[o]),l&&!U_(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Sx{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Ex(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ex{constructor(e,i,o,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Tx(l)}async sendMessage(e){var i;await this.sendPromise;const o=Tt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,f;const p=await r,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(f=y.slice(_))!==null&&f!==void 0?f:[]);const E=h?[h]:[];this.recordHistory(o,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const o=Tt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?Zv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,r;return is(this,arguments,function*(){var c,f,p,h;const y=[];try{for(var _=!0,T=Nr(e),E;E=yield Ge(T.next()),c=E.done,!c;_=!0){h=E.value,_=!1;const b=h;if(_x(b)){const M=(r=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;M!==void 0&&y.push(M)}yield yield Ge(b)}}catch(b){f={error:b}}finally{try{!_&&!c&&(p=T.return)&&(yield Ge(p.call(T)))}finally{if(f)throw f.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Zv(o)):this.history.push(e),this.history.push(...r)}}class kl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kl.prototype)}}function Cx(t){const e={},i=d(t,["file"]);return i!=null&&m(e,["file"],i),e}function Ax(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bx(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],M_(i)),e}function Mx(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function wx(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],M_(i)),e}function Rx(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function Nx(t){const e={},i=d(t,["config"]);return i!=null&&Rx(i,e),e}function xx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}class Ix extends Wn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new so(Xn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Nx(e);return l=ee("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=xx(p),y=new LR;return Object.assign(y,h),y})}}async createInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Cx(e);return l=ee("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Ax(p),y=new kR;return Object.assign(y,h),y})}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wx(e);return l=ee("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bx(e);return l=ee("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Mx(p),y=new OR;return Object.assign(y,h),y})}}}function yl(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Dx(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Kx(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function Ux(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Px(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lx(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function kx(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=d(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=d(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const E=d(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const b=d(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=d(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=d(t,["seed"]);R!=null&&m(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],P_(D));const U=d(t,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const J=d(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=d(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const X=d(t,["topK"]);X!=null&&m(e,["topK"],X);const K=d(t,["topP"]);if(K!=null&&m(e,["topP"],K),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ox(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function qx(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Gx(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Dd(_));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Dx(Tt(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let X=ps(M);Array.isArray(X)&&(X=X.map(K=>Xx(hs(K)))),m(e,["setup","tools"],X)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Qx(w));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=d(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Hx(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],kx(o));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],P_(Dd(_)));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Tt(b));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let X=ps(M);Array.isArray(X)&&(X=X.map(K=>Zx(hs(K)))),m(e,["setup","tools"],X)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=d(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Vx(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],Gx(r,i)),i}function zx(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],Hx(r,i)),i}function Bx(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function Fx(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function Yx(t){const e={},i=d(t,["media"]);if(i!=null){let h=S_(i);Array.isArray(h)&&(h=h.map(y=>yl(y))),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],yl(C_(o)));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],yl(E_(l)));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function $x(t){const e={},i=d(t,["media"]);if(i!=null){let h=S_(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],C_(o));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],E_(l));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Jx(t){const e={},i=d(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const o=d(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=d(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],Wx(c));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function Kx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],Ux(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],Px(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],yl(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Qx(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function P_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=d(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Xx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],Ox(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],qx(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Zx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>Lx(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Wx(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const o=d(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=d(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(t,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["promptTokensDetails"],E)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["cacheTokensDetails"],E)}const y=d(t,["candidatesTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["responseTokensDetails"],E)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["toolUsePromptTokensDetails"],E)}const T=d(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function jx(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function eI(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],tI(o));const r=d(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=d(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["safetyRatings"],T)}const _=d(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function tI(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function nI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let l=on(r);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function iI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["tokensInfo"],r)}return e}function oI(t){const e={},i=d(t,["values"]);i!=null&&m(e,["values"],i);const o=d(t,["statistics"]);return o!=null&&m(e,["statistics"],sI(o)),e}function sI(t){const e={},i=d(t,["truncated"]);i!=null&&m(e,["truncated"],i);const o=d(t,["token_count"]);return o!=null&&m(e,["tokenCount"],o),e}function Ol(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>pD(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function rI(t){const e={},i=d(t,["controlType"]);i!=null&&m(e,["controlType"],i);const o=d(t,["enableControlImageComputation"]);return o!=null&&m(e,["computeControl"],o),e}function aI(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lI(t,e){const i={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],Tt(o));const r=d(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>G_(f))),m(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],jI(l)),i}function uI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(f=>Ol(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&aI(l),i}function cI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&lI(l,i),i}function fI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);o!=null&&m(e,["totalTokens"],o);const r=d(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function dI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);return o!=null&&m(e,["totalTokens"],o),e}function hI(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function pI(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function mI(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function gI(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function yI(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const E=d(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=d(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=d(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=d(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const U=d(t,["baseSteps"]);return e!==void 0&&U!=null&&m(e,["parameters","editConfig","baseSteps"],U),i}function vI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>TD(p))),m(i,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&yI(c,i),i}function _I(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ql(l))),m(e,["generatedImages"],r)}return e}function TI(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function SI(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["instances[]","task_type"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),i}function EI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let f=Nd(t,r);Array.isArray(f)&&(f=f.map(p=>p)),m(i,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&TI(l,i);const c=d(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Re(t,c)),i}function CI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let c=Nd(t,r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&SI(l,i),i}function AI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function bI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>oI(c))),m(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function MI(t){const e={},i=d(t,["endpoint"]);i!=null&&m(e,["name"],i);const o=d(t,["deployedModelId"]);return o!=null&&m(e,["deployedModelId"],o),e}function wI(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function RI(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NI(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xI(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function II(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Ol(Tt(r)));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],xd(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=d(e,["safetySettings"]);if(i!==void 0&&U!=null){let re=U;Array.isArray(re)&&(re=re.map(Ae=>SD(Ae))),m(i,["safetySettings"],re)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let re=ps(J);Array.isArray(re)&&(re=re.map(Ae=>RD(hs(Ae)))),m(i,["tools"],re)}const B=d(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],wD(B)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=d(e,["cachedContent"]);i!==void 0&&X!=null&&m(i,["cachedContent"],jn(t,X));const K=d(e,["responseModalities"]);K!=null&&m(o,["responseModalities"],K);const se=d(e,["mediaResolution"]);se!=null&&m(o,["mediaResolution"],se);const j=d(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],Id(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=d(e,["thinkingConfig"]);ue!=null&&m(o,["thinkingConfig"],ue);const me=d(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],oD(me)),o}function DI(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Tt(r));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=d(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],xd(R));const D=d(e,["responseJsonSchema"]);D!=null&&m(o,["responseJsonSchema"],D);const U=d(e,["routingConfig"]);U!=null&&m(o,["routingConfig"],U);const J=d(e,["modelSelectionConfig"]);J!=null&&m(o,["modelConfig"],J);const B=d(e,["safetySettings"]);if(i!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(Z=>Z)),m(i,["safetySettings"],V)}const X=d(e,["tools"]);if(i!==void 0&&X!=null){let V=ps(X);Array.isArray(V)&&(V=V.map(Z=>G_(hs(Z)))),m(i,["tools"],V)}const K=d(e,["toolConfig"]);i!==void 0&&K!=null&&m(i,["toolConfig"],K);const se=d(e,["labels"]);i!==void 0&&se!=null&&m(i,["labels"],se);const j=d(e,["cachedContent"]);i!==void 0&&j!=null&&m(i,["cachedContent"],jn(t,j));const ue=d(e,["responseModalities"]);ue!=null&&m(o,["responseModalities"],ue);const me=d(e,["mediaResolution"]);me!=null&&m(o,["mediaResolution"],me);const re=d(e,["speechConfig"]);re!=null&&m(o,["speechConfig"],q_(Id(re)));const Ae=d(e,["audioTimestamp"]);Ae!=null&&m(o,["audioTimestamp"],Ae);const We=d(e,["thinkingConfig"]);We!=null&&m(o,["thinkingConfig"],We);const Ke=d(e,["imageConfig"]);return Ke!=null&&m(o,["imageConfig"],sD(Ke)),o}function Wv(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(f=>Ol(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],II(t,l,i)),i}function jv(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],DI(t,l,i)),i}function e0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>eI(h))),m(e,["candidates"],p)}const r=d(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function t0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const r=d(t,["createTime"]);r!=null&&m(e,["createTime"],r);const l=d(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const f=d(t,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function UI(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=d(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=d(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=d(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function PI(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const E=d(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=d(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=d(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=d(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const U=d(t,["enhancePrompt"]);return e!==void 0&&U!=null&&m(e,["parameters","enhancePrompt"],U),i}function LI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&UI(l,i),i}function kI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&PI(l,i),i}function OI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>QI(c))),m(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],k_(r)),e}function qI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ql(c))),m(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],O_(r)),e}function GI(t,e){const i={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=d(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],Gl(y));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>VD(E))),m(e,["instances[0]","referenceImages"],T)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function HI(t,e){const i={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=d(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const T=d(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=d(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&m(e,["instances[0]","lastFrame"],hn(M));const w=d(t,["referenceImages"]);if(e!==void 0&&w!=null){let U=w;Array.isArray(U)&&(U=U.map(J=>zD(J))),m(e,["instances[0]","referenceImages"],U)}const R=d(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],HD(R));const D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function VI(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],YI(c)),e}function zI(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],$I(c)),e}function BI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],Gl(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],H_(c));const f=d(e,["source"]);f!=null&&JI(f,i);const p=d(e,["config"]);return p!=null&&GI(p,i),i}function FI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],hn(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],V_(c));const f=d(e,["source"]);f!=null&&KI(f,i);const p=d(e,["config"]);return p!=null&&HI(p,i),i}function YI(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ZI(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function $I(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>WI(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function JI(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],Gl(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],H_(l)),i}function KI(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],hn(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],V_(l)),i}function QI(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],rD(i));const o=d(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=d(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],k_(r)),e}function ql(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],L_(i));const o=d(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=d(t,["_self"]);r!=null&&m(e,["safetyAttributes"],O_(r));const l=d(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function XI(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["mask"],L_(i));const o=d(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["labels"],r)}return e}function ZI(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],qD(i)),e}function WI(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],GD(i)),e}function jI(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=d(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=d(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const E=d(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const b=d(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=d(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=d(t,["seed"]);R!=null&&m(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],q_(D));const U=d(t,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const J=d(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=d(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const X=d(t,["topK"]);X!=null&&m(e,["topK"],X);const K=d(t,["topP"]);if(K!=null&&m(e,["topP"],K),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eD(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function tD(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function nD(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function iD(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function oD(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sD(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);o!=null&&m(e,["imageSize"],o);const r=d(t,["outputMimeType"]);r!=null&&m(e,["imageOutputOptions","mimeType"],r);const l=d(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function rD(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Ii(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function L_(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],Ii(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Gl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Ii(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function hn(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Ii(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function aD(t,e,i){const o={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],w_(t,f)),o}function lD(t,e,i){const o={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],w_(t,f)),o}function uD(t,e){const i={},o=d(e,["config"]);return o!=null&&aD(t,o,i),i}function cD(t,e){const i={},o=d(e,["config"]);return o!=null&&lD(t,o,i),i}function fD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let l=R_(r);Array.isArray(l)&&(l=l.map(c=>Wf(c))),m(e,["models"],l)}return e}function dD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let l=R_(r);Array.isArray(l)&&(l=l.map(c=>jf(c))),m(e,["models"],l)}return e}function hD(t){const e={},i=d(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const o=d(t,["segmentationClasses"]);o!=null&&m(e,["maskClasses"],o);const r=d(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function Wf(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);r!=null&&m(e,["description"],r);const l=d(t,["version"]);l!=null&&m(e,["version"],l);const c=d(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],ND(c));const f=d(t,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=d(t,["temperature"]);y!=null&&m(e,["temperature"],y);const _=d(t,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const T=d(t,["topP"]);T!=null&&m(e,["topP"],T);const E=d(t,["topK"]);E!=null&&m(e,["topK"],E);const b=d(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function jf(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);r!=null&&m(e,["description"],r);const l=d(t,["versionId"]);l!=null&&m(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>MI(T))),m(e,["endpoints"],_)}const f=d(t,["labels"]);f!=null&&m(e,["labels"],f);const p=d(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],xD(p));const h=d(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=d(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["checkpoints"],_)}return e}function pD(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],wI(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],RI(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],jx(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function mD(t){const e={},i=d(t,["productImage"]);return i!=null&&m(e,["image"],hn(i)),e}function gD(t,e){const i={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const E=d(t,["labels"]);return e!==void 0&&E!=null&&m(e,["labels"],E),i}function yD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["source"]);r!=null&&_D(r,i);const l=d(e,["config"]);return l!=null&&gD(l,i),i}function vD(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>ql(r))),m(e,["generatedImages"],o)}return e}function _D(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],hn(r));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>mD(f))),m(e,["instances[0]","productImages"],c)}return i}function TD(t){const e={},i=d(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],hn(i));const o=d(t,["referenceId"]);o!=null&&m(e,["referenceId"],o);const r=d(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const l=d(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],hD(l));const c=d(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],rI(c));const f=d(t,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function k_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function O_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function SD(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function ED(t){const e={},i=d(t,["image"]);return i!=null&&m(e,["image"],hn(i)),e}function CD(t,e){const i={},o=d(t,["mode"]);e!==void 0&&o!=null&&m(e,["parameters","mode"],o);const r=d(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function AD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["source"]);r!=null&&MD(r,i);const l=d(e,["config"]);return l!=null&&CD(l,i),i}function bD(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>XI(r))),m(e,["generatedMasks"],o)}return e}function MD(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],hn(r));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],ED(l)),i}function q_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=d(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function wD(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],NI(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function RD(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],nD(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],iD(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function G_(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>xI(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function ND(t){const e={},i=d(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function xD(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function ID(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function DD(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function UD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","name"],Re(t,o));const r=d(e,["config"]);return r!=null&&ID(r,i),i}function PD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["config"]);return r!=null&&DD(r,i),i}function LD(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=d(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=d(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=d(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const E=d(t,["mode"]);return e!==void 0&&E!=null&&m(e,["parameters","mode"],E),i}function kD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=d(e,["image"]);r!=null&&m(i,["instances[0]","image"],hn(r));const l=d(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&LD(c,i),i}function OD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ql(l))),m(e,["generatedImages"],r)}return e}function qD(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Ii(o));const r=d(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function GD(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Ii(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function HD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["_self"],hn(i));const o=d(t,["maskMode"]);return o!=null&&m(e,["maskMode"],o),e}function VD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],Gl(i));const o=d(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function zD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],hn(i));const o=d(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function H_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["videoBytes"]);o!=null&&m(e,["encodedVideo"],Ii(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function V_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["videoBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Ii(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}const BD="Content-Type",FD="X-Server-Timeout",YD="User-Agent",ed="x-goog-api-client",$D="1.30.0",JD=`google-genai-sdk/${$D}`,KD="v1beta1",QD="v1beta",n0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class XD{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:KD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const r=[this.getRequestUrlInternal(i)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&ZD(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await i0(r),new Qf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await i0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return is(this,arguments,function*(){const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:p}=yield Ge(r.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),E=T.status,b=T.code,M=`got status: ${E}. ${JSON.stringify(_)}`;if(b>=400&&b<600)throw new kl({message:M,status:b})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let y=c.match(n0);for(;y;){const _=y[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ge(new Qf(T)),c=c.slice(y[0].length),y=c.match(n0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=JD+" "+this.clientOptions.userAgentExtra;return e[YD]=i,e[ed]=i,e[BD]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(FD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const f=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const p={file:r},h=this.getFileName(e),y=ee("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,p,i?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var r;const l=this.clientOptions.uploader,c=await l.stat(i),f=String(c.size),p=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o?.customMetadata&&(_.customMetadata=o.customMetadata),o?.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const T=await this.fetchUploadUrl(h,f,p,y,_,o?.httpOptions);return l.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,r,l,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(f=h?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function i0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw i>=400&&i<600?new kl({message:r,status:i}):new Error(r)}}function ZD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const f=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?f[p]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const r=o(i,e);t.body=JSON.stringify(r)}const WD="mcp_used/unknown";let jD=!1;function z_(t){for(const e of t)if(e1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jD}function B_(t){var e;const i=(e=t[ed])!==null&&e!==void 0?e:"";t[ed]=(i+` ${WD}`).trimStart()}function e1(t){return t!==null&&typeof t=="object"&&t instanceof Ud}function t1(t,e=100){return is(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield Ge(t.listTools({cursor:o}));for(const c of l.tools)yield yield Ge(c),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Ud{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Ud(e,i)}async initialize(){var e,i,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var f=!0,p=(i=void 0,Nr(t1(y))),h;h=await p.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){i={error:_}}finally{try{!f&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),JR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}async function n1(t,e,i){const o=new GR;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(o,r),e(o)}class i1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=r1(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const y=new Promise(U=>{h=U}),_=e.callbacks,T=function(){h({})},E=this.apiClient,b={onopen:T,onmessage:U=>{n1(E,_.onmessage,U)},onerror:(i=_?.onerror)!==null&&i!==void 0?i:function(U){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(U){}},M=this.webSocketFactory.create(p,s1(c),b);M.connect(),await y;const D={setup:{model:Re(this.apiClient,e.model)}};return M.send(JSON.stringify(D)),new o1(M,this.apiClient)}}class o1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Fx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Bx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(jo.PLAY)}pause(){this.sendPlaybackControl(jo.PAUSE)}stop(){this.sendPlaybackControl(jo.STOP)}resetContext(){this.sendPlaybackControl(jo.RESET_CONTEXT)}close(){this.conn.close()}}function s1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function r1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const a1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function l1(t,e,i){const o=new qR;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=Jx(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class u1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new i1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,r,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&z_(e.config.tools)&&B_(_);const T=h1(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const j=this.apiClient.getApiKey();let ue="BidiGenerateContent",me="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",me="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ue}?${me}=${j}`}let E=()=>{};const b=new Promise(j=>{E=j}),M=e.callbacks,w=function(){var j;(j=M?.onopen)===null||j===void 0||j.call(M),E({})},R=this.apiClient,D={onopen:w,onmessage:j=>{l1(R,M.onmessage,j)},onerror:(i=M?.onerror)!==null&&i!==void 0?i:function(j){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(j){}},U=this.webSocketFactory.create(y,d1(T),D);U.connect(),await b;let J=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const j=this.apiClient.getProject(),ue=this.apiClient.getLocation();J=`projects/${j}/locations/${ue}/`+J}let B={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ml.AUDIO]}:e.config.responseModalities=[Ml.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const X=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],K=[];for(const j of X)if(this.isCallableTool(j)){const ue=j;K.push(await ue.tool())}else K.push(j);K.length>0&&(e.config.tools=K);const se={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=zx(this.apiClient,se):B=Vx(this.apiClient,se),delete B.config,U.send(JSON.stringify(B)),new f1(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const c1={turnComplete:!0};class f1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=on(i.turns),e.isVertexAI()||(o=o.map(r=>Ol(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(a1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},c1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:$x(e)}:i={realtimeInput:Yx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function d1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function h1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const o0=10;function s0(t){var e,i,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(os(c)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function os(t){return"callTool"in t&&typeof t.callTool=="function"}function p1(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>os(r)))!==null&&o!==void 0?o:!1}function r0(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(os(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function a0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class m1 extends Wn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,r,l,c,f;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!p1(i)||s0(i.config))return await this.generateContentInternal(p);const h=r0(i);if(h.length>0){const M=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let y,_;const T=on(p.contents),E=(l=(r=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:o0;let b=0;for(;b<E&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const M=y.candidates[0].content,w=[];for(const R of(f=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(os(R)){const U=await R.callTool(y.functionCalls);w.push(...U)}b++,_={role:"user",parts:w},p.contents=on(p.contents),p.contents.push(M),p.contents.push(_),a0(p.config)&&(T.push(M),T.push(_))}return a0(p.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async i=>{var o,r,l,c,f;if(this.maybeMoveToResponseJsonSchem(i),s0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=r0(i);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=i?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(f=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((r=p?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=p?.safetyAttributes:c.push(p);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new so(Xn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var o,r,l,c,f,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(f=i.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>os(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&z_(e.config.tools)){const p=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),B_(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var i,o,r;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(os(c)){const f=c,p=await f.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var i,o,r;const l=(r=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:o0;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,y,_){var T,E;return is(this,arguments,function*(){for(var b,M,w,R;f<l;){c&&(f++,c=!1);const B=yield Ge(h.processParamsMaybeAddMcpUsage(_)),X=yield Ge(h.generateContentStreamInternal(B)),K=[],se=[];try{for(var D=!0,U=(M=void 0,Nr(X)),J;J=yield Ge(U.next()),b=J.done,!b;D=!0){R=J.value,D=!1;const j=R;if(yield yield Ge(j),j.candidates&&(!((T=j.candidates[0])===null||T===void 0)&&T.content)){se.push(j.candidates[0].content);for(const ue of(E=j.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(f<l&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ue.functionCall.name)){const me=yield Ge(y.get(ue.functionCall.name).callTool([ue.functionCall]));K.push(...me)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(j){M={error:j}}finally{try{!D&&!b&&(w=U.return)&&(yield Ge(w.call(U)))}finally{if(M)throw M.error}}if(K.length>0){c=!0;const j=new gr;j.candidates=[{content:{role:"user",parts:K}}],yield yield Ge(j);const ue=[];ue.push(...se),ue.push({role:"user",parts:K});const me=on(_.contents).concat(ue);_.contents=me}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=jv(this.apiClient,e);return f=ee("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=t0(y),T=new gr;return Object.assign(T,_),T})}else{const h=Wv(this.apiClient,e);return f=ee("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=e0(y),T=new gr;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=jv(this.apiClient,e);return f=ee("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return is(this,arguments,function*(){var T,E,b,M;try{for(var w=!0,R=Nr(_),D;D=yield Ge(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const U=M,J=t0(yield Ge(U.json()));J.sdkHttpResponse={headers:U.headers};const B=new gr;Object.assign(B,J),yield yield Ge(B)}}catch(U){E={error:U}}finally{try{!w&&!T&&(b=R.return)&&(yield Ge(b.call(R)))}finally{if(E)throw E.error}}})})}else{const h=Wv(this.apiClient,e);return f=ee("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return is(this,arguments,function*(){var T,E,b,M;try{for(var w=!0,R=Nr(_),D;D=yield Ge(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const U=M,J=e0(yield Ge(U.json()));J.sdkHttpResponse={headers:U.headers};const B=new gr;Object.assign(B,J),yield yield Ge(B)}}catch(U){E={error:U}}finally{try{!w&&!T&&(b=R.return)&&(yield Ge(b.call(R)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=CI(this.apiClient,e);return f=ee("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=bI(y),T=new kv;return Object.assign(T,_),T})}else{const h=EI(this.apiClient,e);return f=ee("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=AI(y),T=new kv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=kI(this.apiClient,e);return f=ee("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=qI(y),T=new Ov;return Object.assign(T,_),T})}else{const h=LI(this.apiClient,e);return f=ee("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=OI(y),T=new Ov;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=vI(this.apiClient,e);return l=ee("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=_I(p),y=new wR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=kD(this.apiClient,e);return l=ee("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=OD(p),y=new RR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=yD(this.apiClient,e);return l=ee("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=vD(p),y=new NR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=AD(this.apiClient,e);return l=ee("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=bD(p),y=new xR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=tD(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>jf(y))}else{const h=eD(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Wf(y))}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=cD(this.apiClient,e);return f=ee("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dD(y),T=new qv;return Object.assign(T,_),T})}else{const h=uD(this.apiClient,e);return f=ee("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fD(y),T=new qv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=PD(this.apiClient,e);return f=ee("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>jf(y))}else{const h=UD(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Wf(y))}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=pI(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=gI(y),T=new Gv;return Object.assign(T,_),T})}else{const h=hI(this.apiClient,e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mI(y),T=new Gv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=cI(this.apiClient,e);return f=ee("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dI(y),T=new Hv;return Object.assign(T,_),T})}else{const h=uI(this.apiClient,e);return f=ee("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fI(y),T=new Hv;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=nI(this.apiClient,e);return l=ee("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=iI(p),y=new IR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=FI(this.apiClient,e);return f=ee("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=zI(y),T=new wl;return Object.assign(T,_),T})}else{const h=BI(this.apiClient,e);return f=ee("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=VI(y),T=new wl;return Object.assign(T,_),T})}}}class g1 extends Wn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=SR(e);return f=ee("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=TR(e);return f=ee("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=hR(e);return l=ee("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function y1(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function v1(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>w1(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function _1(t,e,i){const o={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&m(i,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&m(i,["bidiGenerateContentSetup"],M1(t,f));const p=d(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),o}function T1(t,e){const i={},o=d(e,["config"]);return o!=null&&m(i,["config"],_1(t,o,i)),i}function S1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function E1(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function A1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function b1(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Dd(_));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=d(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],v1(Tt(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let X=ps(M);Array.isArray(X)&&(X=X.map(K=>N1(hs(K)))),m(e,["setup","tools"],X)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],R1(w));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=d(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function M1(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],b1(r,i)),i}function w1(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],S1(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],E1(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],y1(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function R1(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N1(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],C1(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],A1(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function x1(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function I1(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=x1(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class D1 extends Wn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=T1(this.apiClient,e);l=ee("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=I1(f,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}function U1(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),i}function P1(t){const e={},i=d(t,["config"]);return i!=null&&U1(i,e),e}function L1(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function k1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&L1(o,e),e}function O1(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function q1(t,e){const i={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),i}function G1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],V1(c)),e}function H1(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=d(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=d(t,["config"]);return r!=null&&q1(r,e),e}function V1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function z1(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function B1(t){const e={},i=d(t,["config"]);return i!=null&&z1(i,e),e}function F1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function Y1(t,e){const i={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function $1(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=d(t,["config"]);return o!=null&&Y1(o,e),e}function J1(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function K1(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function Q1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&K1(o,e),e}function X1(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Z1(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function W1(t){const e={},i=d(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const o=d(t,["config"]);return o!=null&&Z1(o,e),e}function j1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}class eU extends Wn{constructor(e){super(),this.apiClient=e,this.list=async i=>new so(Xn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=X1(e);return l=ee("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q1(e);r=ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W1(e);return l=ee("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=j1(p),y=new DR;return Object.assign(y,h),y})}}}class tU extends Wn{constructor(e,i=new eU(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new so(Xn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P1(e);return l=ee("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O1(e);return l=ee("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k1(e);r=ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=B1(e);return l=ee("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=F1(p),y=new UR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$1(e);return l=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=J1(p),y=new PR;return Object.assign(y,h),y})}}async importFile(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=H1(e);return l=ee("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=G1(p),y=new wd;return Object.assign(y,h),y})}}}function nU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function iU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function oU(t,e,i){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function sU(t,e,i){const o={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=d(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec"],l0(E))}else if(r==="PREFERENCE_TUNING"){const E=d(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec"],l0(E))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=d(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(f==="PREFERENCE_TUNING"){const E=d(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=d(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=d(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=d(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(h==="PREFERENCE_TUNING"){const E=d(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let y=d(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const E=d(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(y==="PREFERENCE_TUNING"){const E=d(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=d(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function rU(t,e){const i={},o=d(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&yU(l);const c=d(t,["config"]);return c!=null&&oU(c,i),i}function aU(t,e){const i={},o=d(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&vU(l,i,e);const c=d(t,["config"]);return c!=null&&sU(c,i,e),i}function lU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function uU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function cU(t,e,i){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function fU(t,e,i){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function dU(t,e){const i={},o=d(t,["config"]);return o!=null&&cU(o,i),i}function hU(t,e){const i={},o=d(t,["config"]);return o!=null&&fU(o,i),i}function pU(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>F_(f))),m(i,["tuningJobs"],c)}return i}function mU(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>td(f))),m(i,["tuningJobs"],c)}return i}function gU(t,e){const i={},o=d(t,["name"]);o!=null&&m(i,["model"],o);const r=d(t,["name"]);return r!=null&&m(i,["endpoint"],r),i}function yU(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(i,["examples","examples"],r)}return i}function vU(t,e,i){const o={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function F_(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["state"]);l!=null&&m(i,["state"],b_(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["tuningTask","startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=d(t,["description"]);y!=null&&m(i,["description"],y);const _=d(t,["baseModel"]);_!=null&&m(i,["baseModel"],_);const T=d(t,["_self"]);return T!=null&&m(i,["tunedModel"],gU(T)),i}function td(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["state"]);l!=null&&m(i,["state"],b_(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=d(t,["error"]);y!=null&&m(i,["error"],y);const _=d(t,["description"]);_!=null&&m(i,["description"],_);const T=d(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const E=d(t,["tunedModel"]);E!=null&&m(i,["tunedModel"],E);const b=d(t,["preTunedModel"]);b!=null&&m(i,["preTunedModel"],b);const M=d(t,["supervisedTuningSpec"]);M!=null&&m(i,["supervisedTuningSpec"],M);const w=d(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const R=d(t,["tuningDataStats"]);R!=null&&m(i,["tuningDataStats"],R);const D=d(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const U=d(t,["partnerModelTuningSpec"]);U!=null&&m(i,["partnerModelTuningSpec"],U);const J=d(t,["customBaseModel"]);J!=null&&m(i,["customBaseModel"],J);const B=d(t,["experiment"]);B!=null&&m(i,["experiment"],B);const X=d(t,["labels"]);X!=null&&m(i,["labels"],X);const K=d(t,["outputUri"]);K!=null&&m(i,["outputUri"],K);const se=d(t,["pipelineJob"]);se!=null&&m(i,["pipelineJob"],se);const j=d(t,["serviceAccount"]);j!=null&&m(i,["serviceAccount"],j);const ue=d(t,["tunedModelDisplayName"]);ue!=null&&m(i,["tunedModelDisplayName"],ue);const me=d(t,["veoTuningSpec"]);return me!=null&&m(i,["veoTuningSpec"],me),i}function _U(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(t,["done"]);c!=null&&m(i,["done"],c);const f=d(t,["error"]);return f!=null&&m(i,["error"],f),i}function l0(t,e){const i={},o=d(t,["gcsUri"]);o!=null&&m(i,["validationDatasetUri"],o);const r=d(t,["vertexDatasetResource"]);return r!=null&&m(i,["validationDatasetUri"],r),i}class TU extends Wn{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new so(Xn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Kf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=uU(e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>td(y))}else{const h=lU(e);return f=ee("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>F_(y))}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=hU(e);return f=ee("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mU(y),T=new Vv;return Object.assign(T,_),T})}else{const h=dU(e);return f=ee("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=pU(y),T=new Vv;return Object.assign(T,_),T})}}async cancel(e){var i,o,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=iU(e);c=ee("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nU(e);c=ee("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=aU(e,e);return l=ee("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>td(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rU(e);return l=ee("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>_U(p))}}}class SU{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EU=1024*1024*8,CU=3,AU=1e3,bU=2,Nl="x-goog-upload-status";async function MU(t,e,i){var o;const r=await Y_(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function wU(t,e,i){var o;const r=await Y_(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=__(l),f=new Rd;return Object.assign(f,c),f}async function Y_(t,e,i){var o,r;let l=0,c=0,f=new Qf(new Response),p="upload";for(l=t.size;c<l;){const h=Math.min(EU,l-c),y=t.slice(c,c+h);c+h>=l&&(p+=", finalize");let _=0,T=AU;for(;_<CU&&(f=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=f?.headers)===null||o===void 0)&&o[Nl]));)_++,await NU(T),T=T*bU;if(c+=h,((r=f?.headers)===null||r===void 0?void 0:r[Nl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function RU(t){return{size:t.size,type:t.type}}function NU(t){return new Promise(e=>setTimeout(e,t))}class xU{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MU(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wU(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e)}}class IU{create(e,i,o){return new DU(e,i,o)}}class DU{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const u0="x-goog-api-key";class UU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(u0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(u0,this.apiKey)}}}const PU="gl-node/";class $_{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=fR(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new UU(this.apiKey);this.apiClient=new XD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:PU+"web",uploader:new xU,downloader:new SU}),this.models=new m1(this.apiClient),this.live=new u1(this.apiClient,r,new IU),this.batches=new HN(this.apiClient),this.chats=new Sx(this.models,this.apiClient),this.caches=new vx(this.apiClient),this.files=new Ix(this.apiClient),this.operations=new g1(this.apiClient),this.authTokens=new D1(this.apiClient),this.tunings=new TU(this.apiClient),this.fileSearchStores=new tU(this.apiClient)}}let xr=null;function LU(t){localStorage.setItem("gemini_api_key",t),xr=new $_({apiKey:t})}function J_(){return localStorage.getItem("gemini_api_key")}function nd(){return!!J_()}function kU(){xr=null,localStorage.removeItem("gemini_api_key")}function K_(){if(!xr){const t=J_();if(!t)throw new Error("Gemini API key not set. Add your key in Settings.");xr=new $_({apiKey:t})}return xr}function Q_(t){return t.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim()}async function OU(t){const e=K_(),i=`Parse this meal description into structured ingredient data:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece"
    }
  ]
}

Rules:
- Make reasonable portion estimates if not specified
- Convert to metric units when possible
- If ambiguous, choose the most common interpretation`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(Q_(r))}catch(o){throw console.error("Failed to parse meal:",o),new Error(`Failed to parse meal: ${o.message}`)}}async function qU(t){const e=K_(),i=`Estimate complete nutritional information per 100g for this ingredient:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "calories": number,
  "purines": number,
  "protein": number,
  "carbs": number,
  "fat": number,
  "fiber": number,
  "sodium": number,
  "sugar": number
}

All values in standard units:
- calories: kcal
- purines: mg
- all others: grams (g) except sodium (mg)

Use USDA database values when available. If uncertain, provide conservative estimates.`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(Q_(r))}catch(o){throw console.error("Failed to get nutrition:",o),new Error(`Failed to get nutrition data: ${o.message}`)}}async function GU(t,e={}){const i=await OU(t),o=await Promise.all(i.ingredients.map(async l=>{const c=HU(l.name);let f;e[c]?f=e[c]:f=await qU(l.name);const h=zU(l.quantity,l.unit)/100,y=BU(f,h);return{name:l.name,normalized_name:c,quantity:l.quantity,unit:l.unit,nutrients_per_100g:f,nutrients_per_unit:y}})),r=o.reduce((l,c)=>(Object.keys(c.nutrients_per_unit).forEach(f=>{l[f]=(l[f]||0)+c.nutrients_per_unit[f]}),l),{});return{meal_name:i.meal_name,ingredients:o,total_nutrients:r}}function HU(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}const VU={g:1,gram:1,grams:1,kg:1e3,oz:28.35,ounce:28.35,ounces:28.35,lb:453.6,pound:453.6,pounds:453.6,cup:240,cups:240,tbsp:15,tablespoon:15,tablespoons:15,tsp:5,teaspoon:5,teaspoons:5,ml:1,slice:30,slices:30,piece:50,pieces:50};function zU(t,e){const i=e.toLowerCase().trim(),o=VU[i]||1;return t*o}function BU(t,e){const i={};return Object.keys(t).forEach(o=>{i[o]=Math.round(t[o]*e*10)/10}),i}const pf=[{key:"breakfast",icon:"",label:"Brekkie"},{key:"lunch",icon:"",label:"Lunch"},{key:"dinner",icon:"",label:"Dinner"},{key:"snack",icon:"",label:"Snack"}],mf=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},FU=t=>{const e=[];for(let i=-3;i<=3;i++){const o=new Date(t);o.setDate(o.getDate()+i),e.push({date:o,dateKey:mf(o),dayName:o.toLocaleDateString("en-US",{weekday:"short"}).charAt(0),dayNum:o.getDate(),isToday:mf(o)===mf(new Date)})}return e};function YU(){const{user:t,isLoading:e}=Gr(),[i,o]=L.useState(tR()),[r,l]=L.useState(new Date),[c,f]=L.useState("breakfast"),[p,h]=L.useState(""),[y,_]=L.useState(!1),[T,E]=L.useState(!1),[b,M]=L.useState(null),[w,R]=L.useState(null),[D,U]=L.useState(""),[J,B]=L.useState("snack"),{meals:X,isLoading:K,addMeal:se,updateMeal:j,deleteMeal:ue,getDailyTotals:me}=y_(i),{totalHydration:re,adjustHydration:Ae,isLoading:We}=v_(i),{addToStash:Ke,bottles:V}=bd(),ae=[...[{id:"quick-250",name:"+250ml",capacity_ml:250,icon:null},{id:"quick-500",name:"+500ml",capacity_ml:500,icon:null}],...V],Q=FU(r),ne=t?.thresholds||{},x=X.filter(te=>te.meal_type!=="hydration"),q={...me(i)},W=aR(q,ne),fe=e||K||We,ge=async te=>{await Ae(te)},be=te=>{o(te)},rt=te=>{const Ye=new Date(r);Ye.setDate(Ye.getDate()+(te==="next"?7:-7)),l(Ye)},Be=async te=>{if(te.preventDefault(),!!p.trim()){if(M(null),!nd()){await se({date:i,meal_type:c,meal_name:p,ingredients:[],total_nutrients:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},hydration_ml:0,analysis_method:"manual"}),h("");return}E(!0);try{const{ingredients:Ye,total_nutrients:En}=await GU(p);await se({date:i,meal_type:c,meal_name:p,ingredients:Ye,total_nutrients:En,hydration_ml:0,analysis_method:"ai"}),h("")}catch(Ye){console.error("AI parsing failed:",Ye),M(Ye.message||"Failed to analyze meal. Try again or check your API key.")}finally{E(!1)}}},Di=async te=>{confirm("Delete this meal?")&&await ue(te)},ro=te=>{R(te),U(te.meal_name),B(te.meal_type)},gs=async()=>{w&&(await j(w.id,{meal_name:D,meal_type:J}),R(null))},ys=()=>{R(null),U(""),B("snack")},Sn=async te=>{await Ke({type:"meal",name:te.meal_name,ingredients:te.ingredients||[],total_nutrients:te.total_nutrients||{},use_count:0}),alert(`"${te.meal_name}" saved to your Dragon's Hoard! `)},vs=(te=>{const[Ye,En,ao]=te.split("-").map(Number);return new Date(Ye,En-1,ao)})(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});return fe?C.jsxs("div",{className:"page diary-page",children:[C.jsx(Ni,{title:"Dragon Keeper",subtitle:"Loading..."}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Waking up the dragon..."})]})]}):C.jsxs("div",{className:"page diary-page",children:[C.jsx(Ni,{title:"Dragon Keeper",subtitle:`Feeding log for ${vs}`}),C.jsxs("div",{className:"calendar-ribbon card",children:[C.jsx("button",{className:"cal-nav",onClick:()=>rt("prev"),"aria-label":"Previous week",children:""}),C.jsx("div",{className:"cal-days",children:Q.map(te=>{const Ye=te.dateKey===i;return C.jsxs("button",{className:`cal-day ${Ye?"active":""} ${te.isToday?"today":""}`,onClick:()=>be(te.dateKey),children:[C.jsx("span",{className:"cal-day-name",children:te.dayName}),C.jsx("span",{className:"cal-day-num",children:te.dayNum}),te.isToday&&C.jsx("span",{className:"cal-day-indicator",children:""})]},te.dateKey)})}),C.jsx("button",{className:"cal-nav",onClick:()=>rt("next"),"aria-label":"Next week",children:""})]}),C.jsx("div",{className:"meal-type-selector",children:pf.map(te=>C.jsxs("button",{className:`meal-type-btn ${c===te.key?"active":""}`,onClick:()=>f(te.key),children:[C.jsx("span",{className:"meal-icon",children:te.icon}),C.jsx("span",{className:"meal-label",children:te.label})]},te.key))}),C.jsxs("form",{className:"meal-input-section card",onSubmit:Be,children:[C.jsx("label",{className:"input-label",children:"What did your dragon eat? "}),C.jsx("div",{className:"input-row",children:C.jsx("input",{type:"text",placeholder:"e.g., grilled chicken with rice...",value:p,onChange:te=>h(te.target.value),disabled:T})}),b&&C.jsx("div",{className:"ai-error",children:C.jsxs("span",{children:[" ",b]})}),C.jsxs("div",{className:"input-actions",children:[C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:T||!p.trim(),children:T?C.jsx(C.Fragment,{children:" Analyzing..."}):C.jsx(C.Fragment,{children:"Log It! "})})]}),!nd()&&C.jsx("p",{className:"no-api-hint text-muted text-sm",children:" Set up AI in Settings  Dragon's Intelligence to auto-analyze meals!"})]}),C.jsxs("div",{className:"hydration-section card",children:[C.jsxs("div",{className:"hydration-header",children:[C.jsx("span",{className:"hydration-title",children:" Dragon's Hydration"}),C.jsxs("span",{className:"hydration-value",children:[re,"/",ne.hydration_target||2e3,"ml"]})]}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:`progress-bar-fill ${re>=(ne.hydration_target||2e3)?"success":"warning"}`,style:{width:`${Math.min(re/(ne.hydration_target||2e3)*100,100)}%`}})}),C.jsxs("div",{className:"hydration-buttons",children:[C.jsx("button",{className:"btn btn-secondary btn-danger-outline",onClick:()=>ge(-250),children:"250"}),ae.map(te=>C.jsxs("button",{className:"btn btn-secondary",onClick:()=>ge(te.capacity_ml),children:[te.icon||"",te.icon?" ":"",te.name||`+${te.capacity_ml}ml`]},te.id))]})]}),C.jsxs("section",{className:"meals-section",children:[C.jsx("h2",{className:"section-title",children:"Today's Feast"}),x.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx(bl,{state:"curious"}),C.jsx("p",{children:"No meals logged yet today!"}),C.jsx("p",{className:"text-muted",children:"Feed your dragon to get started."})]}):C.jsx("div",{className:"meals-list",children:x.map(te=>C.jsxs("div",{className:"meal-card card",children:[C.jsxs("div",{className:"meal-header",children:[C.jsx("span",{className:"meal-type-badge",children:pf.find(Ye=>Ye.key===te.meal_type)?.icon||""}),C.jsx("h3",{className:"meal-name",children:te.meal_name})]}),te.ingredients&&te.ingredients.length>0&&C.jsx("ul",{className:"meal-ingredients",children:te.ingredients.map((Ye,En)=>C.jsxs("li",{children:[" ",Ye.name," (",Ye.quantity,Ye.unit,")"]},En))}),C.jsxs("div",{className:"meal-nutrients",children:[C.jsxs("span",{children:[" ",te.total_nutrients?.calories||0," cal"]}),C.jsxs("span",{children:[" ",te.total_nutrients?.purines||0,"mg purines"]})]}),C.jsxs("div",{className:"meal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>ro(te),children:" Edit"}),C.jsx("button",{className:"btn btn-secondary",onClick:()=>Di(te.id),children:""}),C.jsx("button",{className:"btn btn-secondary",onClick:()=>Sn(te),children:" Stash"})]})]},te.id))})]}),C.jsxs("section",{className:"daily-status card",children:[C.jsxs("div",{className:"status-header",onClick:()=>_(!y),children:[C.jsx("h3",{children:" Dragon's Daily Status"}),C.jsx(bl,{state:W,showMessage:!1,size:"small"}),C.jsx("span",{className:"toggle-hint",children:y?"":""})]}),C.jsx(zn,{nutrient:"calories",value:q.calories||0,target:ne.calories_max||2e3,min:ne.calories_min||1500,max:ne.calories_max||2e3}),C.jsx(zn,{nutrient:"purines",value:q.purines||0,target:ne.purines_max||400,max:ne.purines_max||400}),y&&C.jsxs("div",{className:"all-nutrients animate-fade-in",children:[C.jsx(zn,{nutrient:"protein",value:q.protein||0,target:ne.protein_target||60,compact:!0}),C.jsx(zn,{nutrient:"carbs",value:q.carbs||0,target:ne.carbs_target||250,compact:!0}),C.jsx(zn,{nutrient:"fat",value:q.fat||0,target:ne.fat_target||65,compact:!0}),C.jsx(zn,{nutrient:"fiber",value:q.fiber||0,target:ne.fiber_target||30,compact:!0}),C.jsx(zn,{nutrient:"sodium",value:q.sodium||0,target:ne.sodium_max||2300,max:ne.sodium_max||2300,compact:!0}),C.jsx(zn,{nutrient:"sugar",value:q.sugar||0,target:ne.sugar_max||50,max:ne.sugar_max||50,compact:!0}),C.jsx(zn,{nutrient:"hydration",value:re,target:ne.hydration_target||2e3,compact:!0})]})]}),w&&C.jsx("div",{className:"modal-overlay",onClick:ys,children:C.jsxs("div",{className:"modal-content card",onClick:te=>te.stopPropagation(),children:[C.jsx("h2",{children:" Edit Meal"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Meal Name"}),C.jsx("input",{type:"text",value:D,onChange:te=>U(te.target.value),placeholder:"e.g., Grilled Chicken"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Meal Type"}),C.jsx("select",{value:J,onChange:te=>B(te.target.value),children:pf.map(te=>C.jsxs("option",{value:te.key,children:[te.icon," ",te.label]},te.key))})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:ys,children:"Cancel"}),C.jsx("button",{className:"btn btn-primary",onClick:gs,children:" Save"})]})]})})]})}function $U(){return C.jsxs("div",{className:"page charts-page",children:[C.jsx(Ni,{title:"Dragon's Scroll",subtitle:"View your nutrition history"}),C.jsxs("div",{className:"coming-soon card",children:[C.jsx(bl,{state:"curious"}),C.jsx("h2",{children:"Coming Soon!"}),C.jsx("p",{className:"text-muted",children:"The Dragon's Scroll will show beautiful charts of your nutrition history."}),C.jsxs("ul",{className:"feature-list",children:[C.jsx("li",{children:" View by week, month, or custom range"}),C.jsx("li",{children:" Daily, weekly, or monthly grouping"}),C.jsx("li",{children:" Filter by nutrient type"}),C.jsx("li",{children:" Export your data"})]})]})]})}function JU(){return C.jsxs("div",{className:"page oracle-page",children:[C.jsx(Ni,{title:"Dragon Oracle",subtitle:"Get meal recommendations"}),C.jsxs("div",{className:"coming-soon card",children:[C.jsx(bl,{state:"curious"}),C.jsx("h2",{children:"Coming Soon!"}),C.jsx("p",{className:"text-muted",children:"The Dragon Oracle will suggest meals based on your remaining nutrition budget."}),C.jsxs("ul",{className:"feature-list",children:[C.jsx("li",{children:" Familiar meals you love"}),C.jsx("li",{children:" Twisted versions of favorites"}),C.jsx("li",{children:" Wild new adventures"}),C.jsx("li",{children:" AI-powered recommendations"})]})]})]})}function KU(){const t=Il(),{user:e,isLoading:i,updateProfile:o,updateThresholds:r,updateTheme:l,saveUser:c}=Gr(),{savedMeals:f,bottles:p}=bd(),[h,y]=L.useState({name:"Dragon Keeper",sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]}),[_,T]=L.useState(Yf),[E,b]=L.useState("emerald"),[M,w]=L.useState("#66BB6A"),[R,D]=L.useState(!1),[U,J]=L.useState(!1),[B,X]=L.useState(""),[K,se]=L.useState(!1),[j,ue]=L.useState(nd()?"saved":"none");L.useEffect(()=>{e&&(y({name:e.name||"Dragon Keeper",...e.profile}),T(e.thresholds||Yf),b(e.theme?.preset||"emerald"),w(e.theme?.seed_color_hex||"#66BB6A"))},[e]);const me=()=>{const Q=jw(h);T(Q),J(!0)},re=(Q,ne)=>{T(x=>({...x,[Q]:Number(ne)})),J(!0)},Ae=Q=>{y(ne=>({...ne,...Q})),J(!0)},We=async Q=>{b(Q);const ne=Rr[Q],x=eo(ne.seedColor,ne.isDark);to(x),await l(Q,ne.seedColor)},Ke=async Q=>{w(Q),b("custom");const ne=eo(Q,!1);to(ne),await l("custom",Q)},V=()=>{B.trim()&&(LU(B.trim()),ue("saved"),X(""),se(!1),alert("AI API key saved! Your dragon can now analyze meals. "))},Z=()=>{confirm("Remove your AI API key? Your dragon won't be able to analyze meals.")&&(kU(),ue("none"),X(""))},ae=async()=>{const Q={...e,name:h.name,profile:{sex:h.sex,age:h.age,weight_kg:h.weight_kg,height_cm:h.height_cm,activity_level:h.activity_level,dietary_conditions:h.dietary_conditions},thresholds:_};await o(Q.profile),await r(_),await c(Q),J(!1),alert("Dragon's settings saved! ")};return i?C.jsxs("div",{className:"page settings-page",children:[C.jsx(Ni,{title:"Dragon's Lair",subtitle:"Loading..."}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Opening the lair..."})]})]}):C.jsxs("div",{className:"page settings-page",children:[C.jsx(Ni,{title:"Dragon's Lair",subtitle:"Configure your dragon's needs"}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Keeper's Profile"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Name"}),C.jsx("input",{type:"text",value:h.name,onChange:Q=>Ae({name:Q.target.value})})]}),C.jsxs("div",{className:"form-row",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Sex"}),C.jsxs("select",{value:h.sex,onChange:Q=>Ae({sex:Q.target.value}),children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"}),C.jsx("option",{value:"other",children:"Other"})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Age"}),C.jsx("input",{type:"number",value:h.age,onChange:Q=>Ae({age:parseInt(Q.target.value)})})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Weight (kg)"}),C.jsx("input",{type:"number",value:h.weight_kg,onChange:Q=>Ae({weight_kg:parseInt(Q.target.value)})})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Height (cm)"}),C.jsx("input",{type:"number",value:h.height_cm,onChange:Q=>Ae({height_cm:parseInt(Q.target.value)})})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Activity Level"}),C.jsxs("select",{value:h.activity_level,onChange:Q=>Ae({activity_level:Q.target.value}),children:[C.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),C.jsx("option",{value:"light",children:"Light (1-3 days/week)"}),C.jsx("option",{value:"moderate",children:"Moderate (3-5 days/week)"}),C.jsx("option",{value:"active",children:"Active (6-7 days/week)"}),C.jsx("option",{value:"very_active",children:"Very Active (intense daily)"})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Dietary Conditions"}),C.jsx("div",{className:"checkbox-group",children:["gout","diabetes","kidney_disease","vegetarian","vegan"].map(Q=>C.jsxs("label",{className:"checkbox-label",children:[C.jsx("input",{type:"checkbox",checked:h.dietary_conditions?.includes(Q)||!1,onChange:ne=>{const x=ne.target.checked?[...h.dietary_conditions||[],Q]:(h.dietary_conditions||[]).filter(Y=>Y!==Q);Ae({dietary_conditions:x})}}),C.jsx("span",{children:Q.replace("_"," ")})]},Q))})]}),C.jsx("button",{className:"btn btn-primary w-full",onClick:me,children:"Calculate Dragon's Needs "}),U&&C.jsx("button",{className:"btn btn-primary w-full mt-sm",onClick:ae,children:" Save All Changes"})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon's Hoard"}),C.jsx("p",{className:"text-muted",children:"Manage your saved meals and custom bottles."}),C.jsxs("div",{className:"stash-buttons",children:[C.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash"),children:[" Saved Meals (",f?.length||0,")"]}),C.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash?tab=bottles"),children:[" Custom Bottles (",p?.length||0,")"]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsxs("div",{className:"section-header-row",children:[C.jsx("h2",{className:"section-title",children:" Nutrition Thresholds"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>D(!R),children:R?"Done":"Edit"})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Calories"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.calories_min,onChange:Q=>re("calories_min",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"-"}),C.jsx("input",{type:"number",value:_.calories_max,onChange:Q=>re("calories_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"kcal"})]}):C.jsxs("span",{className:"threshold-value",children:[_.calories_min," - ",_.calories_max," kcal"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Purines"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.purines_max,onChange:Q=>re("purines_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"mg max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.purines_max," mg max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Protein"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.protein_target,onChange:Q=>re("protein_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.protein_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Carbs"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.carbs_target,onChange:Q=>re("carbs_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.carbs_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Fat"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.fat_target,onChange:Q=>re("fat_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.fat_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Fiber"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.fiber_target,onChange:Q=>re("fiber_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.fiber_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Sodium"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.sodium_max,onChange:Q=>re("sodium_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"mg max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.sodium_max," mg max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Sugar"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.sugar_max,onChange:Q=>re("sugar_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.sugar_max," g max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Hydration"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.hydration_target,onChange:Q=>re("hydration_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"ml target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.hydration_target," ml target"]})]}),R&&C.jsx("p",{className:"text-muted text-center mt-sm",children:`Tip: Use "Calculate Dragon's Needs" to auto-fill based on your profile.`})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon Scale Theme"}),C.jsx("div",{className:"theme-presets",children:Object.entries(Rr).map(([Q,ne])=>C.jsxs("button",{className:`theme-preset ${E===Q?"active":""}`,onClick:()=>We(Q),style:{"--preset-color":ne.seedColor},children:[C.jsx("span",{className:"preset-swatch",style:{background:ne.seedColor}}),C.jsx("span",{className:"preset-name",children:ne.name}),C.jsx("span",{className:"preset-desc",children:ne.description})]},Q))}),C.jsxs("div",{className:"custom-color-section",children:[C.jsx("label",{children:"Custom Dragon Scale Color"}),C.jsxs("div",{className:"color-picker-row",children:[C.jsx("input",{type:"color",value:M,onChange:Q=>Ke(Q.target.value),className:"color-picker"}),C.jsx("input",{type:"text",value:M,onChange:Q=>Ke(Q.target.value),className:"color-input",placeholder:"#66BB6A"})]})]}),C.jsxs("div",{className:"theme-preview card",children:[C.jsx("p",{className:"preview-label",children:"Preview"}),C.jsxs("div",{className:"preview-content",children:[C.jsx("div",{className:"preview-text",children:"Sample text"}),C.jsx("button",{className:"btn btn-primary",children:"Button"}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:"progress-bar-fill success",style:{width:"60%"}})})]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon Statistics"}),C.jsxs("div",{className:"stats-grid",children:[C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.stats?.total_meals_logged||0}),C.jsx("span",{className:"stat-label",children:"Meals logged"})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.stats?.current_streak_days||0}),C.jsx("span",{className:"stat-label",children:"Day streak "})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:(f?.length||0)+(p?.length||0)}),C.jsx("span",{className:"stat-label",children:"In hoard"})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.badges?.length||0}),C.jsx("span",{className:"stat-label",children:"Badges"})]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon's Intelligence"}),C.jsx("p",{className:"text-muted mb-md",children:"Connect your dragon to Google's AI to automatically analyze meals from text descriptions or photos."}),j==="saved"?C.jsxs("div",{className:"api-key-status",children:[C.jsx("div",{className:"status-badge success",children:C.jsx("span",{children:" AI Connected"})}),C.jsx("p",{className:"text-muted text-sm mt-sm",children:"Your dragon can analyze meals. Key stored locally on this device."}),C.jsx("button",{className:"btn btn-secondary btn-danger-outline mt-sm",onClick:Z,children:" Remove API Key"})]}):C.jsxs("div",{className:"api-key-form",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Google AI Studio API Key"}),C.jsxs("div",{className:"input-with-toggle",children:[C.jsx("input",{type:K?"text":"password",value:B,onChange:Q=>X(Q.target.value),placeholder:"AIza...",className:"api-key-input"}),C.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>se(!K),children:K?"":""})]}),C.jsxs("p",{className:"input-help",children:["Get your free key at"," ",C.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio "})]})]}),C.jsx("button",{className:"btn btn-primary w-full",onClick:V,disabled:!B.trim(),children:" Save API Key"})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" About"}),C.jsxs("p",{className:"text-center text-muted",children:["Purine Control v1.0.0",C.jsx("br",{}),`"The Dragon Keeper's Nutrition Tracker"`]}),C.jsx("p",{className:"text-center text-muted mt-md",children:"Made with  for your dragon"})]})]})}const QU=[{id:"default-1",name:"Water Glass",capacity_ml:250,icon:"",type:"container"},{id:"default-2",name:"Water Bottle",capacity_ml:500,icon:"",type:"container"},{id:"default-3",name:"Dragon Chalice",capacity_ml:750,icon:"",type:"container"}],XU=[{key:"meals",label:" Saved Meals",icon:""},{key:"bottles",label:" Bottles",icon:""}],ZU=["","","","","","","",""];function WU(){const t=Il(),[e,i]=$C(),o=e.get("tab")||"meals",[r,l]=L.useState(o),[c,f]=L.useState(""),[p,h]=L.useState(!1),[y,_]=L.useState(null),[T,E]=L.useState(""),[b,M]=L.useState(""),[w,R]=L.useState(250),[D,U]=L.useState({calories:0,purines:0,protein:0,carbs:0,fat:0}),{savedMeals:J,bottles:B,isLoading:X,addToStash:K,removeFromStash:se,updateStashItem:j}=bd(),{adjustHydration:ue}=v_(),{addMeal:me}=y_(),re=[...QU,...B],Ae=q=>{l(q),i({tab:q})},We=async q=>{const W=q.capacity_ml||q.amount_ml;await ue(W),alert(`Added ${W}ml to hydration! `)},Ke=async q=>{await me({meal_type:"snack",meal_name:q.name,ingredients:q.ingredients||[],total_nutrients:q.total_nutrients||{}}),q.id&&!q.id.startsWith("default-")&&await j(q.id,{use_count:(q.use_count||0)+1}),alert(`${q.name} added to diary! `),t("/")},V=async q=>{confirm("Remove this item from your hoard?")&&await se(q)},Z=()=>{E(""),M(""),R(250),U({calories:0,purines:0,protein:0,carbs:0,fat:0}),_(null),h(!1)},ae=()=>{Z(),h(!0)},Q=q=>{_(q),E(q.name||""),M(q.icon||""),R(q.capacity_ml||q.amount_ml||250),U(q.nutrients||q.total_nutrients||{calories:0,purines:0,protein:0,carbs:0,fat:0}),h(!0)},ne=async()=>{if(!T.trim()){alert("Please enter a name");return}const q=y?.id?.startsWith("default-");if(y&&!q){const W={name:T};r==="bottles"&&(W.icon=b,W.capacity_ml=w),await j(y.id,W),alert("Item updated! ")}else{const W=r==="meals"?"meal":"container",fe={type:W,name:T,icon:b,capacity_ml:W==="container"?w:void 0,ingredients:W==="meal"?y?.ingredients||[]:void 0,total_nutrients:W==="meal"?D:void 0,use_count:0};await K(fe),alert(q?"Custom bottle created! ":"Added to your hoard! ")}Z()},x=J.filter(q=>q.name?.toLowerCase().includes(c.toLowerCase())),Y=re.filter(q=>q.name?.toLowerCase().includes(c.toLowerCase()));return X?C.jsxs("div",{className:"page stash-page",children:[C.jsx(Ni,{title:"Dragon's Hoard",subtitle:"Loading...",showBack:!0,onBack:()=>t("/settings")}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Opening the hoard..."})]})]}):C.jsxs("div",{className:"page stash-page",children:[C.jsx(Ni,{title:"Dragon's Hoard",subtitle:"Your saved meals and custom ingredients",showBack:!0,onBack:()=>t("/settings")}),C.jsx("div",{className:"stash-tabs",children:XU.map(q=>C.jsx("button",{className:`stash-tab ${r===q.key?"active":""}`,onClick:()=>Ae(q.key),children:q.label},q.key))}),C.jsx("div",{className:"stash-search",children:C.jsx("input",{type:"text",placeholder:`Search ${r==="meals"?"meals":"ingredients"}...`,value:c,onChange:q=>f(q.target.value)})}),r==="meals"&&C.jsxs("section",{className:"stash-content",children:[x.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx("p",{children:" No saved meals yet!"}),C.jsx("p",{className:"text-muted",children:"Save meals from your diary to reuse them."})]}):C.jsx("div",{className:"stash-list",children:x.map(q=>C.jsxs("div",{className:"stash-item card",children:[C.jsxs("div",{className:"stash-item-header",children:[C.jsx("h3",{children:q.name}),C.jsxs("span",{className:"use-count",children:["Used ",q.use_count||0,"x"]})]}),C.jsx("p",{className:"stash-item-ingredients",children:Array.isArray(q.ingredients)?q.ingredients.map(W=>typeof W=="string"?W:W.name).join(", "):"No ingredients"}),C.jsxs("div",{className:"stash-item-nutrients",children:[C.jsxs("span",{children:[" ",q.total_nutrients?.calories||0," cal"]}),C.jsxs("span",{children:[" ",q.total_nutrients?.purines||0,"mg"]}),C.jsxs("span",{children:[" ",q.total_nutrients?.protein||0,"g"]})]}),C.jsxs("div",{className:"stash-item-actions",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Ke(q),children:" Use"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Q(q),children:" Edit"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(q.id),children:""})]})]},q.id))}),C.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ae,children:" Create New Meal"})]}),r==="bottles"&&C.jsxs("section",{className:"stash-content",children:[C.jsx("p",{className:"text-muted",children:"Custom hydration containers for quick logging."}),Y.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx("p",{children:" No custom bottles yet!"}),C.jsx("p",{className:"text-muted",children:"Add your favorite containers."})]}):C.jsx("div",{className:"stash-list",children:Y.map(q=>C.jsxs("div",{className:"stash-item card bottle-item",children:[C.jsxs("div",{className:"bottle-info",children:[C.jsx("span",{className:"bottle-icon",children:q.icon||""}),C.jsxs("div",{className:"bottle-details",children:[C.jsx("h3",{children:q.name}),C.jsxs("span",{className:"bottle-amount",children:[q.capacity_ml||q.amount_ml," ml"]})]})]}),C.jsxs("div",{className:"stash-item-actions",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>We(q),children:" Use"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Q(q),children:""}),!q.id.startsWith("default-")&&C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(q.id),children:""})]})]},q.id))}),C.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ae,children:" Add Custom Bottle"})]}),p&&C.jsx("div",{className:"modal-overlay",onClick:Z,children:C.jsxs("div",{className:"modal-content card",onClick:q=>q.stopPropagation(),children:[C.jsxs("h2",{children:[y?" Edit":" Create"," ",r==="meals"?"Meal":r==="ingredients"?"Ingredient":"Bottle"]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Name"}),C.jsx("input",{type:"text",value:T,onChange:q=>E(q.target.value),placeholder:`e.g., ${r==="meals"?"Chicken Salad":r==="ingredients"?"Olive Oil":"Sports Bottle"}`})]}),r==="bottles"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Icon"}),C.jsx("div",{className:"icon-picker",children:ZU.map(q=>C.jsx("button",{type:"button",className:`icon-btn ${b===q?"active":""}`,onClick:()=>M(q),children:q},q))})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Capacity (ml)"}),C.jsx("input",{type:"number",value:w,onChange:q=>R(parseInt(q.target.value)||0),min:"0",step:"50"})]})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:Z,children:"Cancel"}),C.jsxs("button",{className:"btn btn-primary",onClick:ne,children:[" ",y?"Update":"Save"]})]})]})})]})}function jU(){return C.jsx(oR,{children:C.jsx(zC,{basename:"/purine-control",children:C.jsxs("div",{className:"app",children:[C.jsxs(vC,{children:[C.jsx(Jo,{path:"/",element:C.jsx(YU,{})}),C.jsx(Jo,{path:"/charts",element:C.jsx($U,{})}),C.jsx(Jo,{path:"/oracle",element:C.jsx(JU,{})}),C.jsx(Jo,{path:"/settings",element:C.jsx(KU,{})}),C.jsx(Jo,{path:"/stash",element:C.jsx(WU,{})})]}),C.jsx(rR,{})]})})})}wE.createRoot(document.getElementById("root")).render(C.jsx(L.StrictMode,{children:C.jsx(jU,{})}));
