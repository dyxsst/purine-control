(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var ff={exports:{}},mr={};var zg;function _E(){if(zg)return mr;zg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return mr.Fragment=e,mr.jsx=i,mr.jsxs=i,mr}var Bg;function TE(){return Bg||(Bg=1,ff.exports=_E()),ff.exports}var E=TE(),df={exports:{}},he={};var Fg;function SE(){if(Fg)return he;Fg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function R(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}R.prototype.isReactComponent={},R.prototype.setState=function(x,F){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,F,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function D(){}D.prototype=R.prototype;function P(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}var J=P.prototype=new D;J.constructor=P,M(J,R.prototype),J.isPureReactComponent=!0;var B=Array.isArray;function Z(){}var Q={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function j(x,F,G){var ee=G.ref;return{$$typeof:t,type:x,key:F,ref:ee!==void 0?ee:null,props:G}}function ae(x,F){return j(x.type,F,x.props)}function me(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function se(x){var F={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(G){return F[G]})}var be=/\/+/g;function qe(x,F){return typeof x=="object"&&x!==null&&x.key!=null?se(""+x.key):F.toString(36)}function He(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(Z,Z):(x.status="pending",x.then(function(F){x.status==="pending"&&(x.status="fulfilled",x.value=F)},function(F){x.status==="pending"&&(x.status="rejected",x.reason=F)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function V(x,F,G,ee,fe){var ye=typeof x;(ye==="undefined"||ye==="boolean")&&(x=null);var xe=!1;if(x===null)xe=!0;else switch(ye){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(x.$$typeof){case t:case e:xe=!0;break;case y:return xe=x._init,V(xe(x._payload),F,G,ee,fe)}}if(xe)return fe=fe(x),xe=ee===""?"."+qe(x,0):ee,B(fe)?(G="",xe!=null&&(G=xe.replace(be,"$&/")+"/"),V(fe,F,G,"",function(Ye){return Ye})):fe!=null&&(me(fe)&&(fe=ae(fe,G+(fe.key==null||x&&x.key===fe.key?"":(""+fe.key).replace(be,"$&/")+"/")+xe)),F.push(fe)),1;xe=0;var dt=ee===""?".":ee+":";if(B(x))for(var Ke=0;Ke<x.length;Ke++)ee=x[Ke],ye=dt+qe(ee,Ke),xe+=V(ee,F,G,ye,fe);else if(Ke=C(x),typeof Ke=="function")for(x=Ke.call(x),Ke=0;!(ee=x.next()).done;)ee=ee.value,ye=dt+qe(ee,Ke++),xe+=V(ee,F,G,ye,fe);else if(ye==="object"){if(typeof x.then=="function")return V(He(x),F,G,ee,fe);throw F=String(x),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return xe}function W(x,F,G){if(x==null)return x;var ee=[],fe=0;return V(x,ee,"","",function(ye){return F.call(G,ye,fe++)}),ee}function re(x){if(x._status===-1){var F=x._result;F=F(),F.then(function(G){(x._status===0||x._status===-1)&&(x._status=1,x._result=G)},function(G){(x._status===0||x._status===-1)&&(x._status=2,x._result=G)}),x._status===-1&&(x._status=0,x._result=F)}if(x._status===1)return x._result.default;throw x._result}var X=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},ce={map:W,forEach:function(x,F,G){W(x,function(){F.apply(this,arguments)},G)},count:function(x){var F=0;return W(x,function(){F++}),F},toArray:function(x){return W(x,function(F){return F})||[]},only:function(x){if(!me(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return he.Activity=_,he.Children=ce,he.Component=R,he.Fragment=i,he.Profiler=r,he.PureComponent=P,he.StrictMode=o,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,he.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Q.H.useMemoCache(x)}},he.cache=function(x){return function(){return x.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(x,F,G){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ee=M({},x.props),fe=x.key;if(F!=null)for(ye in F.key!==void 0&&(fe=""+F.key),F)!ne.call(F,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&F.ref===void 0||(ee[ye]=F[ye]);var ye=arguments.length-2;if(ye===1)ee.children=G;else if(1<ye){for(var xe=Array(ye),dt=0;dt<ye;dt++)xe[dt]=arguments[dt+2];ee.children=xe}return j(x.type,fe,ee)},he.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},he.createElement=function(x,F,G){var ee,fe={},ye=null;if(F!=null)for(ee in F.key!==void 0&&(ye=""+F.key),F)ne.call(F,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=F[ee]);var xe=arguments.length-2;if(xe===1)fe.children=G;else if(1<xe){for(var dt=Array(xe),Ke=0;Ke<xe;Ke++)dt[Ke]=arguments[Ke+2];fe.children=dt}if(x&&x.defaultProps)for(ee in xe=x.defaultProps,xe)fe[ee]===void 0&&(fe[ee]=xe[ee]);return j(x,ye,fe)},he.createRef=function(){return{current:null}},he.forwardRef=function(x){return{$$typeof:d,render:x}},he.isValidElement=me,he.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:re}},he.memo=function(x,F){return{$$typeof:h,type:x,compare:F===void 0?null:F}},he.startTransition=function(x){var F=Q.T,G={};Q.T=G;try{var ee=x(),fe=Q.S;fe!==null&&fe(G,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Z,X)}catch(ye){X(ye)}finally{F!==null&&G.types!==null&&(F.types=G.types),Q.T=F}},he.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},he.use=function(x){return Q.H.use(x)},he.useActionState=function(x,F,G){return Q.H.useActionState(x,F,G)},he.useCallback=function(x,F){return Q.H.useCallback(x,F)},he.useContext=function(x){return Q.H.useContext(x)},he.useDebugValue=function(){},he.useDeferredValue=function(x,F){return Q.H.useDeferredValue(x,F)},he.useEffect=function(x,F){return Q.H.useEffect(x,F)},he.useEffectEvent=function(x){return Q.H.useEffectEvent(x)},he.useId=function(){return Q.H.useId()},he.useImperativeHandle=function(x,F,G){return Q.H.useImperativeHandle(x,F,G)},he.useInsertionEffect=function(x,F){return Q.H.useInsertionEffect(x,F)},he.useLayoutEffect=function(x,F){return Q.H.useLayoutEffect(x,F)},he.useMemo=function(x,F){return Q.H.useMemo(x,F)},he.useOptimistic=function(x,F){return Q.H.useOptimistic(x,F)},he.useReducer=function(x,F,G){return Q.H.useReducer(x,F,G)},he.useRef=function(x){return Q.H.useRef(x)},he.useState=function(x){return Q.H.useState(x)},he.useSyncExternalStore=function(x,F,G){return Q.H.useSyncExternalStore(x,F,G)},he.useTransition=function(){return Q.H.useTransition()},he.version="19.2.0",he}var Yg;function pd(){return Yg||(Yg=1,df.exports=SE()),df.exports}var U=pd(),hf={exports:{}},gr={},pf={exports:{}},mf={};var $g;function EE(){return $g||($g=1,(function(t){function e(V,W){var re=V.length;V.push(W);e:for(;0<re;){var X=re-1>>>1,ce=V[X];if(0<r(ce,W))V[X]=W,V[re]=ce,re=X;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var W=V[0],re=V.pop();if(re!==W){V[0]=re;e:for(var X=0,ce=V.length,x=ce>>>1;X<x;){var F=2*(X+1)-1,G=V[F],ee=F+1,fe=V[ee];if(0>r(G,re))ee<ce&&0>r(fe,G)?(V[X]=fe,V[ee]=re,X=ee):(V[X]=G,V[F]=re,X=F);else if(ee<ce&&0>r(fe,re))V[X]=fe,V[ee]=re,X=ee;else break e}}return W}function r(V,W){var re=V.sortIndex-W.sortIndex;return re!==0?re:V.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],h=[],y=1,_=null,T=3,C=!1,b=!1,M=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function J(V){for(var W=i(h);W!==null;){if(W.callback===null)o(h);else if(W.startTime<=V)o(h),W.sortIndex=W.expirationTime,e(p,W);else break;W=i(h)}}function B(V){if(M=!1,J(V),!b)if(i(p)!==null)b=!0,Z||(Z=!0,se());else{var W=i(h);W!==null&&He(B,W.startTime-V)}}var Z=!1,Q=-1,ne=5,j=-1;function ae(){return w?!0:!(t.unstable_now()-j<ne)}function me(){if(w=!1,Z){var V=t.unstable_now();j=V;var W=!0;try{e:{b=!1,M&&(M=!1,D(Q),Q=-1),C=!0;var re=T;try{t:{for(J(V),_=i(p);_!==null&&!(_.expirationTime>V&&ae());){var X=_.callback;if(typeof X=="function"){_.callback=null,T=_.priorityLevel;var ce=X(_.expirationTime<=V);if(V=t.unstable_now(),typeof ce=="function"){_.callback=ce,J(V),W=!0;break t}_===i(p)&&o(p),J(V)}else o(p);_=i(p)}if(_!==null)W=!0;else{var x=i(h);x!==null&&He(B,x.startTime-V),W=!1}}break e}finally{_=null,T=re,C=!1}W=void 0}}finally{W?se():Z=!1}}}var se;if(typeof P=="function")se=function(){P(me)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,qe=be.port2;be.port1.onmessage=me,se=function(){qe.postMessage(null)}}else se=function(){R(me,0)};function He(V,W){Q=R(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(V){switch(T){case 1:case 2:case 3:var W=3;break;default:W=T}var re=T;T=W;try{return V()}finally{T=re}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=T;T=V;try{return W()}finally{T=re}},t.unstable_scheduleCallback=function(V,W,re){var X=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,V){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=re+ce,V={id:y++,callback:W,priorityLevel:V,startTime:re,expirationTime:ce,sortIndex:-1},re>X?(V.sortIndex=re,e(h,V),i(p)===null&&V===i(h)&&(M?(D(Q),Q=-1):M=!0,He(B,re-X))):(V.sortIndex=ce,e(p,V),b||C||(b=!0,Z||(Z=!0,se()))),V},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(V){var W=T;return function(){var re=T;T=W;try{return V.apply(this,arguments)}finally{T=re}}}})(mf)),mf}var Jg;function CE(){return Jg||(Jg=1,pf.exports=EE()),pf.exports}var gf={exports:{}},Et={};var Kg;function AE(){if(Kg)return Et;Kg=1;var t=pd();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Et.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,y)},Et.flushSync=function(p){var h=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=h,o.p=y,o.d.f()}},Et.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(p,h))},Et.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},Et.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?o.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:C}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Et.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(p)},Et.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Et.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=d(h.as,h.crossOrigin);o.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(p)},Et.requestFormReset=function(p){o.d.r(p)},Et.unstable_batchedUpdates=function(p,h){return p(h)},Et.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},Et.useFormStatus=function(){return c.H.useHostTransitionStatus()},Et.version="19.2.0",Et}var Qg;function bE(){if(Qg)return gf.exports;Qg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gf.exports=AE(),gf.exports}var Xg;function ME(){if(Xg)return gr;Xg=1;var t=CE(),e=pd(),i=bE();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var a=n,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var S=!1,A=g.child;A;){if(A===a){S=!0,a=g,u=v;break}if(A===u){S=!0,u=g,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,u=g;break}if(A===u){S=!0,u=v,a=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=me&&n[me]||n["@@iterator"],typeof n=="function"?n:null)}var be=Symbol.for("react.client.reference");function qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===be?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case Z:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case P:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Q:return s=n.displayName||null,s!==null?s:qe(n.type)||"Memo";case ne:s=n._payload,n=n._init;try{return qe(n(s))}catch{}}return null}var He=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},X=[],ce=-1;function x(n){return{current:n}}function F(n){0>ce||(n.current=X[ce],X[ce]=null,ce--)}function G(n,s){ce++,X[ce]=n.current,n.current=s}var ee=x(null),fe=x(null),ye=x(null),xe=x(null);function dt(n,s){switch(G(ye,s),G(fe,n),G(ee,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?fg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=fg(s),n=dg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(ee),G(ee,n)}function Ke(){F(ee),F(fe),F(ye)}function Ye(n){n.memoizedState!==null&&G(xe,n);var s=ee.current,a=dg(s,n.type);s!==a&&(G(fe,n),G(ee,a))}function Pi(n){fe.current===n&&(F(ee),F(fe)),xe.current===n&&(F(xe),fr._currentValue=re)}var Fr,Jt;function An(n){if(Fr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Fr=s&&s[1]||"",Jt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fr+n+Jt}var _s=!1;function uo(n,s){if(!n||_s)return"";_s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(n,[],$)}else{try{$.call()}catch(H){q=H}n.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],A=v[1];if(S&&A){var N=S.split(`
`),O=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===O.length)for(u=N.length-1,g=O.length-1;1<=u&&0<=g&&N[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==O[g]){var z=`
`+N[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=g);break}}}finally{_s=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?An(a):""}function Jl(n,s){switch(n.tag){case 26:case 27:case 5:return An(n.type);case 16:return An("Lazy");case 13:return n.child!==s&&s!==null?An("Suspense Fallback"):An("Suspense");case 19:return An("SuspenseList");case 0:case 15:return uo(n.type,!1);case 11:return uo(n.type.render,!1);case 1:return uo(n.type,!0);case 31:return An("Activity");default:return""}}function Ts(n){try{var s="",a=null;do s+=Jl(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ss=Object.prototype.hasOwnProperty,Es=t.unstable_scheduleCallback,Cs=t.unstable_cancelCallback,Kl=t.unstable_shouldYield,Yr=t.unstable_requestPaint,At=t.unstable_now,Ql=t.unstable_getCurrentPriorityLevel,$r=t.unstable_ImmediatePriority,Jr=t.unstable_UserBlockingPriority,co=t.unstable_NormalPriority,Xl=t.unstable_LowPriority,Kr=t.unstable_IdlePriority,Zl=t.log,Yd=t.unstable_setDisableYieldValue,Li=null,K=null;function de(n){if(typeof Zl=="function"&&Yd(n),K&&typeof K.setStrictMode=="function")try{K.setStrictMode(Li,n)}catch{}}var ve=Math.clz32?Math.clz32:bn,ht=Math.log,Kt=Math.LN2;function bn(n){return n>>>=0,n===0?32:31-(ht(n)/Kt|0)|0}var Qr=256,Xr=262144,Zr=4194304;function ki(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Wr(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?g=ki(u):(S&=A,S!==0?g=ki(S):a||(a=A&~n,a!==0&&(g=ki(a))))):(A=u&~v,A!==0?g=ki(A):S!==0?g=ki(S):a||(a=u&~n,a!==0&&(g=ki(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function As(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function rT(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $d(){var n=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),n}function Wl(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function bs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function aT(n,s,a,u,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,N=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var z=31-ve(a),$=1<<z;A[z]=0,N[z]=-1;var q=O[z];if(q!==null)for(O[z]=null,z=0;z<q.length;z++){var H=q[z];H!==null&&(H.lane&=-536870913)}a&=~$}u!==0&&Jd(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function Jd(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-ve(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Kd(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-ve(a),g=1<<u;g&s|n[u]&s&&(n[u]|=s),a&=~g}}function Qd(n,s){var a=s&-s;return a=(a&42)!==0?1:jl(a),(a&(n.suspendedLanes|s))!==0?0:a}function jl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function eu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Xd(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:Lg(n.type))}function Zd(n,s){var a=W.p;try{return W.p=n,s()}finally{W.p=a}}var ii=Math.random().toString(36).slice(2),pt="__reactFiber$"+ii,wt="__reactProps$"+ii,fo="__reactContainer$"+ii,tu="__reactEvents$"+ii,lT="__reactListeners$"+ii,uT="__reactHandles$"+ii,Wd="__reactResources$"+ii,Ms="__reactMarker$"+ii;function nu(n){delete n[pt],delete n[wt],delete n[tu],delete n[lT],delete n[uT]}function ho(n){var s=n[pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[fo]||a[pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=_g(n);n!==null;){if(a=n[pt])return a;n=_g(n)}return s}n=a,a=n.parentNode}return null}function po(n){if(n=n[pt]||n[fo]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ws(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function mo(n){var s=n[Wd];return s||(s=n[Wd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function lt(n){n[Ms]=!0}var jd=new Set,eh={};function Oi(n,s){go(n,s),go(n+"Capture",s)}function go(n,s){for(eh[n]=s,n=0;n<s.length;n++)jd.add(s[n])}var cT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),th={},nh={};function fT(n){return Ss.call(nh,n)?!0:Ss.call(th,n)?!1:cT.test(n)?nh[n]=!0:(th[n]=!0,!1)}function jr(n,s,a){if(fT(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function ea(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Mn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function Qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ih(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dT(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function iu(n){if(!n._valueTracker){var s=ih(n)?"checked":"value";n._valueTracker=dT(n,s,""+n[s])}}function oh(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=ih(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function ta(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var hT=/[\n"\\]/g;function Xt(n){return n.replace(hT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ou(n,s,a,u,g,v,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Qt(s)):n.value!==""+Qt(s)&&(n.value=""+Qt(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?su(n,S,Qt(s)):a!=null?su(n,S,Qt(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Qt(A):n.removeAttribute("name")}function sh(n,s,a,u,g,v,S,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){iu(n);return}a=a!=null?""+Qt(a):"",s=s!=null?""+Qt(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),iu(n)}function su(n,s,a){s==="number"&&ta(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function yo(n,s,a,u){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Qt(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function rh(n,s,a){if(s!=null&&(s=""+Qt(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Qt(a):""}function ah(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(He(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Qt(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),iu(n)}function vo(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var pT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lh(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||pT.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function uh(n,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&lh(n,g,u)}else for(var v in s)s.hasOwnProperty(v)&&lh(n,v,s[v])}function ru(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function na(n){return gT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function wn(){}var au=null;function lu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _o=null,To=null;function ch(n){var s=po(n);if(s&&(n=s.stateNode)){var a=n[wt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ou(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Xt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var g=u[wt]||null;if(!g)throw Error(o(90));ou(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&oh(u)}break e;case"textarea":rh(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&yo(n,!!a.multiple,s,!1)}}}var uu=!1;function fh(n,s,a){if(uu)return n(s,a);uu=!0;try{var u=n(s);return u}finally{if(uu=!1,(_o!==null||To!==null)&&(Ba(),_o&&(s=_o,n=To,To=_o=null,ch(s),n)))for(s=0;s<n.length;s++)ch(n[s])}}function Rs(n,s){var a=n.stateNode;if(a===null)return null;var u=a[wt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cu=!1;if(Rn)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){cu=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{cu=!1}var oi=null,fu=null,ia=null;function dh(){if(ia)return ia;var n,s=fu,a=s.length,u,g="value"in oi?oi.value:oi.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&s[a-u]===g[v-u];u++);return ia=g.slice(n,1<u?1-u:void 0)}function oa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function sa(){return!0}function hh(){return!1}function Rt(n){function s(a,u,g,v,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?sa:hh,this.isPropagationStopped=hh,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Rt(qi),xs=_({},qi,{view:0,detail:0}),yT=Rt(xs),du,hu,Is,aa=_({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Is&&(Is&&n.type==="mousemove"?(du=n.screenX-Is.screenX,hu=n.screenY-Is.screenY):hu=du=0,Is=n),du)},movementY:function(n){return"movementY"in n?n.movementY:hu}}),ph=Rt(aa),vT=_({},aa,{dataTransfer:0}),_T=Rt(vT),TT=_({},xs,{relatedTarget:0}),pu=Rt(TT),ST=_({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),ET=Rt(ST),CT=_({},qi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),AT=Rt(CT),bT=_({},qi,{data:0}),mh=Rt(bT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NT(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=RT[n])?!!s[n]:!1}function mu(){return NT}var xT=_({},xs,{key:function(n){if(n.key){var s=MT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=oa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mu,charCode:function(n){return n.type==="keypress"?oa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),IT=Rt(xT),DT=_({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Rt(DT),UT=_({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mu}),PT=Rt(UT),LT=_({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kT=Rt(LT),OT=_({},aa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Rt(OT),GT=_({},qi,{newState:0,oldState:0}),HT=Rt(GT),VT=[9,13,27,32],gu=Rn&&"CompositionEvent"in window,Ds=null;Rn&&"documentMode"in document&&(Ds=document.documentMode);var zT=Rn&&"TextEvent"in window&&!Ds,yh=Rn&&(!gu||Ds&&8<Ds&&11>=Ds),vh=" ",_h=!1;function Th(n,s){switch(n){case"keyup":return VT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var So=!1;function BT(n,s){switch(n){case"compositionend":return Sh(s);case"keypress":return s.which!==32?null:(_h=!0,vh);case"textInput":return n=s.data,n===vh&&_h?null:n;default:return null}}function FT(n,s){if(So)return n==="compositionend"||!gu&&Th(n,s)?(n=dh(),ia=fu=oi=null,So=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yh&&s.locale!=="ko"?null:s.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!YT[n.type]:s==="textarea"}function Ch(n,s,a,u){_o?To?To.push(u):To=[u]:_o=u,s=Xa(s,"onChange"),0<s.length&&(a=new ra("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Us=null,Ps=null;function $T(n){sg(n,0)}function la(n){var s=ws(n);if(oh(s))return n}function Ah(n,s){if(n==="change")return s}var bh=!1;if(Rn){var yu;if(Rn){var vu="oninput"in document;if(!vu){var Mh=document.createElement("div");Mh.setAttribute("oninput","return;"),vu=typeof Mh.oninput=="function"}yu=vu}else yu=!1;bh=yu&&(!document.documentMode||9<document.documentMode)}function wh(){Us&&(Us.detachEvent("onpropertychange",Rh),Ps=Us=null)}function Rh(n){if(n.propertyName==="value"&&la(Ps)){var s=[];Ch(s,Ps,n,lu(n)),fh($T,s)}}function JT(n,s,a){n==="focusin"?(wh(),Us=s,Ps=a,Us.attachEvent("onpropertychange",Rh)):n==="focusout"&&wh()}function KT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return la(Ps)}function QT(n,s){if(n==="click")return la(s)}function XT(n,s){if(n==="input"||n==="change")return la(s)}function ZT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var qt=typeof Object.is=="function"?Object.is:ZT;function Ls(n,s){if(qt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ss.call(s,g)||!qt(n[g],s[g]))return!1}return!0}function Nh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xh(n,s){var a=Nh(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Nh(a)}}function Ih(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ih(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Dh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ta(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ta(n.document)}return s}function _u(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var WT=Rn&&"documentMode"in document&&11>=document.documentMode,Eo=null,Tu=null,ks=null,Su=!1;function Uh(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Su||Eo==null||Eo!==ta(u)||(u=Eo,"selectionStart"in u&&_u(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ks&&Ls(ks,u)||(ks=u,u=Xa(Tu,"onSelect"),0<u.length&&(s=new ra("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=Eo)))}function Gi(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Co={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},Eu={},Ph={};Rn&&(Ph=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Hi(n){if(Eu[n])return Eu[n];if(!Co[n])return n;var s=Co[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ph)return Eu[n]=s[a];return n}var Lh=Hi("animationend"),kh=Hi("animationiteration"),Oh=Hi("animationstart"),jT=Hi("transitionrun"),eS=Hi("transitionstart"),tS=Hi("transitioncancel"),qh=Hi("transitionend"),Gh=new Map,Cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cu.push("scrollEnd");function un(n,s){Gh.set(n,s),Oi(s,[n])}var ua=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Zt=[],Ao=0,Au=0;function ca(){for(var n=Ao,s=Au=Ao=0;s<n;){var a=Zt[s];Zt[s++]=null;var u=Zt[s];Zt[s++]=null;var g=Zt[s];Zt[s++]=null;var v=Zt[s];if(Zt[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&Hh(a,g,v)}}function fa(n,s,a,u){Zt[Ao++]=n,Zt[Ao++]=s,Zt[Ao++]=a,Zt[Ao++]=u,Au|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function bu(n,s,a,u){return fa(n,s,a,u),da(n)}function Vi(n,s){return fa(n,null,null,s),da(n)}function Hh(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-ve(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function da(n){if(50<or)throw or=0,Pc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var bo={};function nS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(n,s,a,u){return new nS(n,s,a,u)}function Mu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Nn(n,s){var a=n.alternate;return a===null?(a=Gt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Vh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ha(n,s,a,u,g,v){var S=0;if(u=n,typeof n=="function")Mu(n)&&(S=1);else if(typeof n=="string")S=aE(n,a,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=Gt(31,a,s,g),n.elementType=j,n.lanes=v,n;case M:return zi(a.children,g,v,s);case w:S=8,g|=24;break;case R:return n=Gt(12,a,s,g|2),n.elementType=R,n.lanes=v,n;case B:return n=Gt(13,a,s,g),n.elementType=B,n.lanes=v,n;case Z:return n=Gt(19,a,s,g),n.elementType=Z,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:S=10;break e;case D:S=9;break e;case J:S=11;break e;case Q:S=14;break e;case ne:S=16,u=null;break e}S=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=Gt(S,a,s,g),s.elementType=n,s.type=u,s.lanes=v,s}function zi(n,s,a,u){return n=Gt(7,n,u,s),n.lanes=a,n}function wu(n,s,a){return n=Gt(6,n,null,s),n.lanes=a,n}function zh(n){var s=Gt(18,null,null,0);return s.stateNode=n,s}function Ru(n,s,a){return s=Gt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Bh=new WeakMap;function Wt(n,s){if(typeof n=="object"&&n!==null){var a=Bh.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Ts(s)},Bh.set(n,s),s)}return{value:n,source:s,stack:Ts(s)}}var Mo=[],wo=0,pa=null,Os=0,jt=[],en=0,si=null,yn=1,vn="";function xn(n,s){Mo[wo++]=Os,Mo[wo++]=pa,pa=n,Os=s}function Fh(n,s,a){jt[en++]=yn,jt[en++]=vn,jt[en++]=si,si=n;var u=yn;n=vn;var g=32-ve(u)-1;u&=~(1<<g),a+=1;var v=32-ve(s)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,yn=1<<32-ve(s)+g|a<<g|u,vn=v+n}else yn=1<<v|a<<g|u,vn=n}function Nu(n){n.return!==null&&(xn(n,1),Fh(n,1,0))}function xu(n){for(;n===pa;)pa=Mo[--wo],Mo[wo]=null,Os=Mo[--wo],Mo[wo]=null;for(;n===si;)si=jt[--en],jt[en]=null,vn=jt[--en],jt[en]=null,yn=jt[--en],jt[en]=null}function Yh(n,s){jt[en++]=yn,jt[en++]=vn,jt[en++]=si,yn=s.id,vn=s.overflow,si=n}var mt=null,Ve=null,Me=!1,ri=null,tn=!1,Iu=Error(o(519));function ai(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qs(Wt(s,n)),Iu}function $h(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[pt]=n,s[wt]=u,a){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(a=0;a<rr.length;a++)Te(rr[a],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),sh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),ah(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||ug(s.textContent,a)?(u.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),u.onScroll!=null&&Te("scroll",s),u.onScrollEnd!=null&&Te("scrollend",s),u.onClick!=null&&(s.onclick=wn),s=!0):s=!1,s||ai(n,!0)}function Jh(n){for(mt=n.return;mt;)switch(mt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:mt=mt.return}}function Ro(n){if(n!==mt)return!1;if(!Me)return Jh(n),Me=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Qc(n.type,n.memoizedProps)),a=!a),a&&Ve&&ai(n),Jh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ve=vg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ve=vg(n)}else s===27?(s=Ve,Si(n.type)?(n=ef,ef=null,Ve=n):Ve=s):Ve=mt?on(n.stateNode.nextSibling):null;return!0}function Bi(){Ve=mt=null,Me=!1}function Du(){var n=ri;return n!==null&&(Dt===null?Dt=n:Dt.push.apply(Dt,n),ri=null),n}function qs(n){ri===null?ri=[n]:ri.push(n)}var Uu=x(null),Fi=null,In=null;function li(n,s,a){G(Uu,s._currentValue),s._currentValue=a}function Dn(n){n._currentValue=Uu.current,F(Uu)}function Pu(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Lu(n,s,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=g;for(var N=0;N<s.length;N++)if(A.context===s[N]){v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),Pu(v.return,a,n),u||(S=null);break e}v=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),Pu(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function No(n,s,a,u){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;qt(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===xe.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(fr):n=[fr])}g=g.return}n!==null&&Lu(s,n,a,u),s.flags|=262144}function ma(n){for(n=n.firstContext;n!==null;){if(!qt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Yi(n){Fi=n,In=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function gt(n){return Kh(Fi,n)}function ga(n,s){return Fi===null&&Yi(n),Kh(n,s)}function Kh(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},In===null){if(n===null)throw Error(o(308));In=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else In=In.next=s;return a}var iS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},oS=t.unstable_scheduleCallback,sS=t.unstable_NormalPriority,tt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ku(){return{controller:new iS,data:new Map,refCount:0}}function Gs(n){n.refCount--,n.refCount===0&&oS(sS,function(){n.controller.abort()})}var Hs=null,Ou=0,xo=0,Io=null;function rS(n,s){if(Hs===null){var a=Hs=[];Ou=0,xo=Hc(),Io={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Ou++,s.then(Qh,Qh),s}function Qh(){if(--Ou===0&&Hs!==null){Io!==null&&(Io.status="fulfilled");var n=Hs;Hs=null,xo=0,Io=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function aS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Xh=V.S;V.S=function(n,s){Um=At(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&rS(n,s),Xh!==null&&Xh(n,s)};var $i=x(null);function qu(){var n=$i.current;return n!==null?n:Ge.pooledCache}function ya(n,s){s===null?G($i,$i.current):G($i,s.pool)}function Zh(){var n=qu();return n===null?null:{parent:tt._currentValue,pool:n}}var Do=Error(o(460)),Gu=Error(o(474)),va=Error(o(542)),_a={then:function(){}};function Wh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jh(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(wn,wn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,tp(n),n;default:if(typeof s.status=="string")s.then(wn,wn);else{if(n=Ge,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,tp(n),n}throw Ki=s,Do}}function Ji(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ki=a,Do):a}}var Ki=null;function ep(){if(Ki===null)throw Error(o(459));var n=Ki;return Ki=null,n}function tp(n){if(n===Do||n===va)throw Error(o(483))}var Uo=null,Vs=0;function Ta(n){var s=Vs;return Vs+=1,Uo===null&&(Uo=[]),jh(Uo,n,s)}function zs(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Sa(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function np(n){function s(L,I){if(n){var k=L.deletions;k===null?(L.deletions=[I],L.flags|=16):k.push(I)}}function a(L,I){if(!n)return null;for(;I!==null;)s(L,I),I=I.sibling;return null}function u(L){for(var I=new Map;L!==null;)L.key!==null?I.set(L.key,L):I.set(L.index,L),L=L.sibling;return I}function g(L,I){return L=Nn(L,I),L.index=0,L.sibling=null,L}function v(L,I,k){return L.index=k,n?(k=L.alternate,k!==null?(k=k.index,k<I?(L.flags|=67108866,I):k):(L.flags|=67108866,I)):(L.flags|=1048576,I)}function S(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,I,k,Y){return I===null||I.tag!==6?(I=wu(k,L.mode,Y),I.return=L,I):(I=g(I,k),I.return=L,I)}function N(L,I,k,Y){var le=k.type;return le===M?z(L,I,k.props.children,Y,k.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ne&&Ji(le)===I.type)?(I=g(I,k.props),zs(I,k),I.return=L,I):(I=ha(k.type,k.key,k.props,null,L.mode,Y),zs(I,k),I.return=L,I)}function O(L,I,k,Y){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=Ru(k,L.mode,Y),I.return=L,I):(I=g(I,k.children||[]),I.return=L,I)}function z(L,I,k,Y,le){return I===null||I.tag!==7?(I=zi(k,L.mode,Y,le),I.return=L,I):(I=g(I,k),I.return=L,I)}function $(L,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=wu(""+I,L.mode,k),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case C:return k=ha(I.type,I.key,I.props,null,L.mode,k),zs(k,I),k.return=L,k;case b:return I=Ru(I,L.mode,k),I.return=L,I;case ne:return I=Ji(I),$(L,I,k)}if(He(I)||se(I))return I=zi(I,L.mode,k,null),I.return=L,I;if(typeof I.then=="function")return $(L,Ta(I),k);if(I.$$typeof===P)return $(L,ga(L,I),k);Sa(L,I)}return null}function q(L,I,k,Y){var le=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return le!==null?null:A(L,I,""+k,Y);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===le?N(L,I,k,Y):null;case b:return k.key===le?O(L,I,k,Y):null;case ne:return k=Ji(k),q(L,I,k,Y)}if(He(k)||se(k))return le!==null?null:z(L,I,k,Y,null);if(typeof k.then=="function")return q(L,I,Ta(k),Y);if(k.$$typeof===P)return q(L,I,ga(L,k),Y);Sa(L,k)}return null}function H(L,I,k,Y,le){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return L=L.get(k)||null,A(I,L,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return L=L.get(Y.key===null?k:Y.key)||null,N(I,L,Y,le);case b:return L=L.get(Y.key===null?k:Y.key)||null,O(I,L,Y,le);case ne:return Y=Ji(Y),H(L,I,k,Y,le)}if(He(Y)||se(Y))return L=L.get(k)||null,z(I,L,Y,le,null);if(typeof Y.then=="function")return H(L,I,k,Ta(Y),le);if(Y.$$typeof===P)return H(L,I,k,ga(I,Y),le);Sa(I,Y)}return null}function ie(L,I,k,Y){for(var le=null,we=null,oe=I,ge=I=0,Ce=null;oe!==null&&ge<k.length;ge++){oe.index>ge?(Ce=oe,oe=null):Ce=oe.sibling;var Re=q(L,oe,k[ge],Y);if(Re===null){oe===null&&(oe=Ce);break}n&&oe&&Re.alternate===null&&s(L,oe),I=v(Re,I,ge),we===null?le=Re:we.sibling=Re,we=Re,oe=Ce}if(ge===k.length)return a(L,oe),Me&&xn(L,ge),le;if(oe===null){for(;ge<k.length;ge++)oe=$(L,k[ge],Y),oe!==null&&(I=v(oe,I,ge),we===null?le=oe:we.sibling=oe,we=oe);return Me&&xn(L,ge),le}for(oe=u(oe);ge<k.length;ge++)Ce=H(oe,L,ge,k[ge],Y),Ce!==null&&(n&&Ce.alternate!==null&&oe.delete(Ce.key===null?ge:Ce.key),I=v(Ce,I,ge),we===null?le=Ce:we.sibling=Ce,we=Ce);return n&&oe.forEach(function(Mi){return s(L,Mi)}),Me&&xn(L,ge),le}function ue(L,I,k,Y){if(k==null)throw Error(o(151));for(var le=null,we=null,oe=I,ge=I=0,Ce=null,Re=k.next();oe!==null&&!Re.done;ge++,Re=k.next()){oe.index>ge?(Ce=oe,oe=null):Ce=oe.sibling;var Mi=q(L,oe,Re.value,Y);if(Mi===null){oe===null&&(oe=Ce);break}n&&oe&&Mi.alternate===null&&s(L,oe),I=v(Mi,I,ge),we===null?le=Mi:we.sibling=Mi,we=Mi,oe=Ce}if(Re.done)return a(L,oe),Me&&xn(L,ge),le;if(oe===null){for(;!Re.done;ge++,Re=k.next())Re=$(L,Re.value,Y),Re!==null&&(I=v(Re,I,ge),we===null?le=Re:we.sibling=Re,we=Re);return Me&&xn(L,ge),le}for(oe=u(oe);!Re.done;ge++,Re=k.next())Re=H(oe,L,ge,Re.value,Y),Re!==null&&(n&&Re.alternate!==null&&oe.delete(Re.key===null?ge:Re.key),I=v(Re,I,ge),we===null?le=Re:we.sibling=Re,we=Re);return n&&oe.forEach(function(vE){return s(L,vE)}),Me&&xn(L,ge),le}function Oe(L,I,k,Y){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:e:{for(var le=k.key;I!==null;){if(I.key===le){if(le=k.type,le===M){if(I.tag===7){a(L,I.sibling),Y=g(I,k.props.children),Y.return=L,L=Y;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ne&&Ji(le)===I.type){a(L,I.sibling),Y=g(I,k.props),zs(Y,k),Y.return=L,L=Y;break e}a(L,I);break}else s(L,I);I=I.sibling}k.type===M?(Y=zi(k.props.children,L.mode,Y,k.key),Y.return=L,L=Y):(Y=ha(k.type,k.key,k.props,null,L.mode,Y),zs(Y,k),Y.return=L,L=Y)}return S(L);case b:e:{for(le=k.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){a(L,I.sibling),Y=g(I,k.children||[]),Y.return=L,L=Y;break e}else{a(L,I);break}else s(L,I);I=I.sibling}Y=Ru(k,L.mode,Y),Y.return=L,L=Y}return S(L);case ne:return k=Ji(k),Oe(L,I,k,Y)}if(He(k))return ie(L,I,k,Y);if(se(k)){if(le=se(k),typeof le!="function")throw Error(o(150));return k=le.call(k),ue(L,I,k,Y)}if(typeof k.then=="function")return Oe(L,I,Ta(k),Y);if(k.$$typeof===P)return Oe(L,I,ga(L,k),Y);Sa(L,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,I!==null&&I.tag===6?(a(L,I.sibling),Y=g(I,k),Y.return=L,L=Y):(a(L,I),Y=wu(k,L.mode,Y),Y.return=L,L=Y),S(L)):a(L,I)}return function(L,I,k,Y){try{Vs=0;var le=Oe(L,I,k,Y);return Uo=null,le}catch(oe){if(oe===Do||oe===va)throw oe;var we=Gt(29,oe,null,L.mode);return we.lanes=Y,we.return=L,we}finally{}}}var Qi=np(!0),ip=np(!1),ui=!1;function Hu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ci(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fi(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ie&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=da(n),Hh(n,null,a),s}return fa(n,u,s,a),da(n)}function Bs(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Kd(n,a)}}function zu(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Bu=!1;function Fs(){if(Bu){var n=Io;if(n!==null)throw n}}function Ys(n,s,a,u){Bu=!1;var g=n.updateQueue;ui=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,O=N.next;N.next=null,S===null?v=O:S.next=O,S=N;var z=n.alternate;z!==null&&(z=z.updateQueue,A=z.lastBaseUpdate,A!==S&&(A===null?z.firstBaseUpdate=O:A.next=O,z.lastBaseUpdate=N))}if(v!==null){var $=g.baseState;S=0,z=O=N=null,A=v;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Ee&q)===q:(u&q)===q){q!==0&&q===xo&&(Bu=!0),z!==null&&(z=z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ie=n,ue=A;q=s;var Oe=a;switch(ue.tag){case 1:if(ie=ue.payload,typeof ie=="function"){$=ie.call(Oe,$,q);break e}$=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ue.payload,q=typeof ie=="function"?ie.call(Oe,$,q):ie,q==null)break e;$=_({},$,q);break e;case 2:ui=!0}}q=A.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=g.callbacks,H===null?g.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},z===null?(O=z=H,N=$):z=z.next=H,S|=q;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;H=A,A=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);z===null&&(N=$),g.baseState=N,g.firstBaseUpdate=O,g.lastBaseUpdate=z,v===null&&(g.shared.lanes=0),gi|=S,n.lanes=S,n.memoizedState=$}}function op(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function sp(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)op(a[n],s)}var Po=x(null),Ea=x(0);function rp(n,s){n=Vn,G(Ea,n),G(Po,s),Vn=n|s.baseLanes}function Fu(){G(Ea,Vn),G(Po,Po.current)}function Yu(){Vn=Ea.current,F(Po),F(Ea)}var Ht=x(null),nn=null;function di(n){var s=n.alternate;G(We,We.current&1),G(Ht,n),nn===null&&(s===null||Po.current!==null||s.memoizedState!==null)&&(nn=n)}function $u(n){G(We,We.current),G(Ht,n),nn===null&&(nn=n)}function ap(n){n.tag===22?(G(We,We.current),G(Ht,n),nn===null&&(nn=n)):hi()}function hi(){G(We,We.current),G(Ht,Ht.current)}function Vt(n){F(Ht),nn===n&&(nn=null),F(We)}var We=x(0);function Ca(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Wc(a)||jc(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Un=0,pe=null,Le=null,nt=null,Aa=!1,Lo=!1,Xi=!1,ba=0,$s=0,ko=null,lS=0;function Xe(){throw Error(o(321))}function Ju(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!qt(n[a],s[a]))return!1;return!0}function Ku(n,s,a,u,g,v){return Un=v,pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?Fp:uc,Xi=!1,v=a(u,g),Xi=!1,Lo&&(v=up(s,a,u,g)),lp(n),v}function lp(n){V.H=Qs;var s=Le!==null&&Le.next!==null;if(Un=0,nt=Le=pe=null,Aa=!1,$s=0,ko=null,s)throw Error(o(300));n===null||it||(n=n.dependencies,n!==null&&ma(n)&&(it=!0))}function up(n,s,a,u){pe=n;var g=0;do{if(Lo&&(ko=null),$s=0,Lo=!1,25<=g)throw Error(o(301));if(g+=1,nt=Le=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}V.H=Yp,v=s(a,u)}while(Lo);return v}function uS(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?Js(s):s,n=n.useState()[0],(Le!==null?Le.memoizedState:null)!==n&&(pe.flags|=1024),s}function Qu(){var n=ba!==0;return ba=0,n}function Xu(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Zu(n){if(Aa){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Aa=!1}Un=0,nt=Le=pe=null,Lo=!1,$s=ba=0,ko=null}function bt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?pe.memoizedState=nt=n:nt=nt.next=n,nt}function je(){if(Le===null){var n=pe.alternate;n=n!==null?n.memoizedState:null}else n=Le.next;var s=nt===null?pe.memoizedState:nt.next;if(s!==null)nt=s,Le=n;else{if(n===null)throw pe.alternate===null?Error(o(467)):Error(o(310));Le=n,n={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},nt===null?pe.memoizedState=nt=n:nt=nt.next=n}return nt}function Ma(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Js(n){var s=$s;return $s+=1,ko===null&&(ko=[]),n=jh(ko,n,s),s=pe,(nt===null?s.memoizedState:nt.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Fp:uc),n}function wa(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Js(n);if(n.$$typeof===P)return gt(n)}throw Error(o(438,String(n)))}function Wu(n){var s=null,a=pe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ma(),pe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=ae;return s.index++,a}function Pn(n,s){return typeof s=="function"?s(n):s}function Ra(n){var s=je();return ju(s,Le,n)}function ju(n,s,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var A=S=null,N=null,O=s,z=!1;do{var $=O.lane&-536870913;if($!==O.lane?(Ee&$)===$:(Un&$)===$){var q=O.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===xo&&(z=!0);else if((Un&q)===q){O=O.next,q===xo&&(z=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=$,S=v):N=N.next=$,pe.lanes|=q,gi|=q;$=O.action,Xi&&a(v,$),v=O.hasEagerState?O.eagerState:a(v,$)}else q={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=q,S=v):N=N.next=q,pe.lanes|=$,gi|=$;O=O.next}while(O!==null&&O!==s);if(N===null?S=v:N.next=A,!qt(v,n.memoizedState)&&(it=!0,z&&(a=Io,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=N,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ec(n){var s=je(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);qt(v,s.memoizedState)||(it=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function cp(n,s,a){var u=pe,g=je(),v=Me;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!qt((Le||g).memoizedState,a);if(S&&(g.memoizedState=a,it=!0),g=g.queue,ic(hp.bind(null,u,g,n),[n]),g.getSnapshot!==s||S||nt!==null&&nt.memoizedState.tag&1){if(u.flags|=2048,Oo(9,{destroy:void 0},dp.bind(null,u,g,a,s),null),Ge===null)throw Error(o(349));v||(Un&127)!==0||fp(u,s,a)}return a}function fp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=pe.updateQueue,s===null?(s=Ma(),pe.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function dp(n,s,a,u){s.value=a,s.getSnapshot=u,pp(s)&&mp(n)}function hp(n,s,a){return a(function(){pp(s)&&mp(n)})}function pp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!qt(n,a)}catch{return!0}}function mp(n){var s=Vi(n,2);s!==null&&Ut(s,n,2)}function tc(n){var s=bt();if(typeof n=="function"){var a=n;if(n=a(),Xi){de(!0);try{a()}finally{de(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:n},s}function gp(n,s,a,u){return n.baseState=a,ju(n,Le,typeof u=="function"?u:Pn)}function cS(n,s,a,u,g){if(Ia(n))throw Error(o(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};V.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,yp(s,v)):(v.next=a.next,s.pending=a.next=v)}}function yp(n,s){var a=s.action,u=s.payload,g=n.state;if(s.isTransition){var v=V.T,S={};V.T=S;try{var A=a(g,u),N=V.S;N!==null&&N(S,A),vp(n,s,A)}catch(O){nc(n,s,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),V.T=v}}else try{v=a(g,u),vp(n,s,v)}catch(O){nc(n,s,O)}}function vp(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){_p(n,s,u)},function(u){return nc(n,s,u)}):_p(n,s,a)}function _p(n,s,a){s.status="fulfilled",s.value=a,Tp(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,yp(n,a)))}function nc(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Tp(s),s=s.next;while(s!==u)}n.action=null}function Tp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Sp(n,s){return s}function Ep(n,s){if(Me){var a=Ge.formState;if(a!==null){e:{var u=pe;if(Me){if(Ve){t:{for(var g=Ve,v=tn;g.nodeType!==8;){if(!v){g=null;break t}if(g=on(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Ve=on(g.nextSibling),u=g.data==="F!";break e}}ai(u)}u=!1}u&&(s=a[0])}}return a=bt(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:s},a.queue=u,a=Vp.bind(null,pe,u),u.dispatch=a,u=tc(!1),v=lc.bind(null,pe,!1,u.queue),u=bt(),g={state:s,dispatch:null,action:n,pending:null},u.queue=g,a=cS.bind(null,pe,g,v,a),g.dispatch=a,u.memoizedState=n,[s,a,!1]}function Cp(n){var s=je();return Ap(s,Le,n)}function Ap(n,s,a){if(s=ju(n,s,Sp)[0],n=Ra(Pn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Js(s)}catch(S){throw S===Do?va:S}else u=s;s=je();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(pe.flags|=2048,Oo(9,{destroy:void 0},fS.bind(null,g,a),null)),[u,v,n]}function fS(n,s){n.action=s}function bp(n){var s=je(),a=Le;if(a!==null)return Ap(s,a,n);je(),s=s.memoizedState,a=je();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Oo(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=pe.updateQueue,s===null&&(s=Ma(),pe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function Mp(){return je().memoizedState}function Na(n,s,a,u){var g=bt();pe.flags|=n,g.memoizedState=Oo(1|s,{destroy:void 0},a,u===void 0?null:u)}function xa(n,s,a,u){var g=je();u=u===void 0?null:u;var v=g.memoizedState.inst;Le!==null&&u!==null&&Ju(u,Le.memoizedState.deps)?g.memoizedState=Oo(s,v,a,u):(pe.flags|=n,g.memoizedState=Oo(1|s,v,a,u))}function wp(n,s){Na(8390656,8,n,s)}function ic(n,s){xa(2048,8,n,s)}function dS(n){pe.flags|=4;var s=pe.updateQueue;if(s===null)s=Ma(),pe.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Rp(n){var s=je().memoizedState;return dS({ref:s,nextImpl:n}),function(){if((Ie&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Np(n,s){return xa(4,2,n,s)}function xp(n,s){return xa(4,4,n,s)}function Ip(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Dp(n,s,a){a=a!=null?a.concat([n]):null,xa(4,4,Ip.bind(null,s,n),a)}function oc(){}function Up(n,s){var a=je();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Ju(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Pp(n,s){var a=je();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Ju(s,u[1]))return u[0];if(u=n(),Xi){de(!0);try{n()}finally{de(!1)}}return a.memoizedState=[u,s],u}function sc(n,s,a){return a===void 0||(Un&1073741824)!==0&&(Ee&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Lm(),pe.lanes|=n,gi|=n,a)}function Lp(n,s,a,u){return qt(a,s)?a:Po.current!==null?(n=sc(n,a,u),qt(n,s)||(it=!0),n):(Un&42)===0||(Un&1073741824)!==0&&(Ee&261930)===0?(it=!0,n.memoizedState=a):(n=Lm(),pe.lanes|=n,gi|=n,s)}function kp(n,s,a,u,g){var v=W.p;W.p=v!==0&&8>v?v:8;var S=V.T,A={};V.T=A,lc(n,!1,s,a);try{var N=g(),O=V.S;if(O!==null&&O(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=aS(N,u);Ks(n,s,z,Ft(n))}else Ks(n,s,u,Ft(n))}catch($){Ks(n,s,{then:function(){},status:"rejected",reason:$},Ft())}finally{W.p=v,S!==null&&A.types!==null&&(S.types=A.types),V.T=S}}function hS(){}function rc(n,s,a,u){if(n.tag!==5)throw Error(o(476));var g=Op(n).queue;kp(n,g,s,re,a===null?hS:function(){return qp(n),a(u)})}function Op(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:re},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function qp(n){var s=Op(n);s.next===null&&(s=n.alternate.memoizedState),Ks(n,s.next.queue,{},Ft())}function ac(){return gt(fr)}function Gp(){return je().memoizedState}function Hp(){return je().memoizedState}function pS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Ft();n=ci(a);var u=fi(s,n,a);u!==null&&(Ut(u,s,a),Bs(u,s,a)),s={cache:ku()},n.payload=s;return}s=s.return}}function mS(n,s,a){var u=Ft();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ia(n)?zp(s,a):(a=bu(n,s,a,u),a!==null&&(Ut(a,n,u),Bp(a,s,u)))}function Vp(n,s,a){var u=Ft();Ks(n,s,a,u)}function Ks(n,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ia(n))zp(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,A=v(S,a);if(g.hasEagerState=!0,g.eagerState=A,qt(A,S))return fa(n,s,g,0),Ge===null&&ca(),!1}catch{}finally{}if(a=bu(n,s,g,u),a!==null)return Ut(a,n,u),Bp(a,s,u),!0}return!1}function lc(n,s,a,u){if(u={lane:2,revertLane:Hc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ia(n)){if(s)throw Error(o(479))}else s=bu(n,a,u,2),s!==null&&Ut(s,n,2)}function Ia(n){var s=n.alternate;return n===pe||s!==null&&s===pe}function zp(n,s){Lo=Aa=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Bp(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Kd(n,a)}}var Qs={readContext:gt,use:wa,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Qs.useEffectEvent=Xe;var Fp={readContext:gt,use:wa,useCallback:function(n,s){return bt().memoizedState=[n,s===void 0?null:s],n},useContext:gt,useEffect:wp,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Na(4194308,4,Ip.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Na(4194308,4,n,s)},useInsertionEffect:function(n,s){Na(4,2,n,s)},useMemo:function(n,s){var a=bt();s=s===void 0?null:s;var u=n();if(Xi){de(!0);try{n()}finally{de(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=bt();if(a!==void 0){var g=a(s);if(Xi){de(!0);try{a(s)}finally{de(!1)}}}else g=s;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=mS.bind(null,pe,n),[u.memoizedState,n]},useRef:function(n){var s=bt();return n={current:n},s.memoizedState=n},useState:function(n){n=tc(n);var s=n.queue,a=Vp.bind(null,pe,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:oc,useDeferredValue:function(n,s){var a=bt();return sc(a,n,s)},useTransition:function(){var n=tc(!1);return n=kp.bind(null,pe,n.queue,!0,!1),bt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=pe,g=bt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Ge===null)throw Error(o(349));(Ee&127)!==0||fp(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,wp(hp.bind(null,u,v,n),[n]),u.flags|=2048,Oo(9,{destroy:void 0},dp.bind(null,u,v,a,s),null),a},useId:function(){var n=bt(),s=Ge.identifierPrefix;if(Me){var a=vn,u=yn;a=(u&~(1<<32-ve(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=ba++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=lS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:ac,useFormState:Ep,useActionState:Ep,useOptimistic:function(n){var s=bt();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=lc.bind(null,pe,!0,a),a.dispatch=s,[n,s]},useMemoCache:Wu,useCacheRefresh:function(){return bt().memoizedState=pS.bind(null,pe)},useEffectEvent:function(n){var s=bt(),a={impl:n};return s.memoizedState=a,function(){if((Ie&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},uc={readContext:gt,use:wa,useCallback:Up,useContext:gt,useEffect:ic,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:xp,useMemo:Pp,useReducer:Ra,useRef:Mp,useState:function(){return Ra(Pn)},useDebugValue:oc,useDeferredValue:function(n,s){var a=je();return Lp(a,Le.memoizedState,n,s)},useTransition:function(){var n=Ra(Pn)[0],s=je().memoizedState;return[typeof n=="boolean"?n:Js(n),s]},useSyncExternalStore:cp,useId:Gp,useHostTransitionStatus:ac,useFormState:Cp,useActionState:Cp,useOptimistic:function(n,s){var a=je();return gp(a,Le,n,s)},useMemoCache:Wu,useCacheRefresh:Hp};uc.useEffectEvent=Rp;var Yp={readContext:gt,use:wa,useCallback:Up,useContext:gt,useEffect:ic,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:xp,useMemo:Pp,useReducer:ec,useRef:Mp,useState:function(){return ec(Pn)},useDebugValue:oc,useDeferredValue:function(n,s){var a=je();return Le===null?sc(a,n,s):Lp(a,Le.memoizedState,n,s)},useTransition:function(){var n=ec(Pn)[0],s=je().memoizedState;return[typeof n=="boolean"?n:Js(n),s]},useSyncExternalStore:cp,useId:Gp,useHostTransitionStatus:ac,useFormState:bp,useActionState:bp,useOptimistic:function(n,s){var a=je();return Le!==null?gp(a,Le,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Wu,useCacheRefresh:Hp};Yp.useEffectEvent=Rp;function cc(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var fc={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Ft(),g=ci(u);g.payload=s,a!=null&&(g.callback=a),s=fi(n,g,u),s!==null&&(Ut(s,n,u),Bs(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Ft(),g=ci(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=fi(n,g,u),s!==null&&(Ut(s,n,u),Bs(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Ft(),u=ci(a);u.tag=2,s!=null&&(u.callback=s),s=fi(n,u,a),s!==null&&(Ut(s,n,a),Bs(s,n,a))}};function $p(n,s,a,u,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ls(a,u)||!Ls(g,v):!0}function Jp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&fc.enqueueReplaceState(s,s.state,null)}function Zi(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function Kp(n){ua(n)}function Qp(n){console.error(n)}function Xp(n){ua(n)}function Da(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Zp(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function dc(n,s,a){return a=ci(a),a.tag=3,a.payload={element:null},a.callback=function(){Da(n,s)},a}function Wp(n){return n=ci(n),n.tag=3,n}function jp(n,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){Zp(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Zp(s,a,u),typeof g!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function gS(n,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&No(s,a,g,!0),a=Ht.current,a!==null){switch(a.tag){case 31:case 13:return nn===null?Fa():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===_a?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Oc(n,u,g)),!1;case 22:return a.flags|=65536,u===_a?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Oc(n,u,g)),!1}throw Error(o(435,a.tag))}return Oc(n,u,g),Fa(),!1}if(Me)return s=Ht.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Iu&&(n=Error(o(422),{cause:u}),qs(Wt(n,a)))):(u!==Iu&&(s=Error(o(423),{cause:u}),qs(Wt(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Wt(u,a),g=dc(n.stateNode,u,g),zu(n,g),Ze!==4&&(Ze=2)),!1;var v=Error(o(520),{cause:u});if(v=Wt(v,a),ir===null?ir=[v]:ir.push(v),Ze!==4&&(Ze=2),s===null)return!0;u=Wt(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=dc(a.stateNode,u,n),zu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(yi===null||!yi.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Wp(g),jp(g,n,a,u),zu(a,g),!1}a=a.return}while(a!==null);return!1}var hc=Error(o(461)),it=!1;function yt(n,s,a,u){s.child=n===null?ip(s,null,a,u):Qi(s,n.child,a,u)}function em(n,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return Yi(s),u=Ku(n,s,a,S,v,g),A=Qu(),n!==null&&!it?(Xu(n,s,g),Ln(n,s,g)):(Me&&A&&Nu(s),s.flags|=1,yt(n,s,u,g),s.child)}function tm(n,s,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!Mu(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,nm(n,s,v,u,g)):(n=ha(a.type,null,u,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Sc(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ls,a(S,u)&&n.ref===s.ref)return Ln(n,s,g)}return s.flags|=1,n=Nn(v,u),n.ref=s.ref,n.return=s,s.child=n}function nm(n,s,a,u,g){if(n!==null){var v=n.memoizedProps;if(Ls(v,u)&&n.ref===s.ref)if(it=!1,s.pendingProps=u=v,Sc(n,g))(n.flags&131072)!==0&&(it=!0);else return s.lanes=n.lanes,Ln(n,s,g)}return pc(n,s,a,u,g)}function im(n,s,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=s.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return om(n,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ya(s,v!==null?v.cachePool:null),v!==null?rp(s,v):Fu(),ap(s);else return u=s.lanes=536870912,om(n,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(ya(s,v.cachePool),rp(s,v),hi(),s.memoizedState=null):(n!==null&&ya(s,null),Fu(),hi());return yt(n,s,g,a),s.child}function Xs(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function om(n,s,a,u,g){var v=qu();return v=v===null?null:{parent:tt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&ya(s,null),Fu(),ap(s),n!==null&&No(n,s,u,!0),s.childLanes=g,null}function Ua(n,s){return s=La({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function sm(n,s,a){return Qi(s,n.child,null,a),n=Ua(s,s.pendingProps),n.flags|=2,Vt(s),s.memoizedState=null,n}function yS(n,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(u.mode==="hidden")return n=Ua(s,u),s.lanes=536870912,Xs(null,n);if($u(s),(n=Ve)?(n=yg(n,tn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:si!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},a=zh(n),a.return=s,s.child=a,mt=s,Ve=null)):n=null,n===null)throw ai(s);return s.lanes=536870912,null}return Ua(s,u)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if($u(s),g)if(s.flags&256)s.flags&=-257,s=sm(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(it||No(n,s,a,!1),g=(a&n.childLanes)!==0,it||g){if(u=Ge,u!==null&&(S=Qd(u,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,Vi(n,S),Ut(u,n,S),hc;Fa(),s=sm(n,s,a)}else n=v.treeContext,Ve=on(S.nextSibling),mt=s,Me=!0,ri=null,tn=!1,n!==null&&Yh(s,n),s=Ua(s,u),s.flags|=4096;return s}return n=Nn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Pa(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function pc(n,s,a,u,g){return Yi(s),a=Ku(n,s,a,u,void 0,g),u=Qu(),n!==null&&!it?(Xu(n,s,g),Ln(n,s,g)):(Me&&u&&Nu(s),s.flags|=1,yt(n,s,a,g),s.child)}function rm(n,s,a,u,g,v){return Yi(s),s.updateQueue=null,a=up(s,u,a,g),lp(n),u=Qu(),n!==null&&!it?(Xu(n,s,v),Ln(n,s,v)):(Me&&u&&Nu(s),s.flags|=1,yt(n,s,a,v),s.child)}function am(n,s,a,u,g){if(Yi(s),s.stateNode===null){var v=bo,S=a.contextType;typeof S=="object"&&S!==null&&(v=gt(S)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=fc,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Hu(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?gt(S):bo,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(cc(s,a,S,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&fc.enqueueReplaceState(v,v.state,null),Ys(s,u,v,g),Fs(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){v=s.stateNode;var A=s.memoizedProps,N=Zi(a,A);v.props=N;var O=v.context,z=a.contextType;S=bo,typeof z=="object"&&z!==null&&(S=gt(z));var $=a.getDerivedStateFromProps;z=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||O!==S)&&Jp(s,v,u,S),ui=!1;var q=s.memoizedState;v.state=q,Ys(s,u,v,g),Fs(),O=s.memoizedState,A||q!==O||ui?(typeof $=="function"&&(cc(s,a,$,u),O=s.memoizedState),(N=ui||$p(s,a,N,u,q,O,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=S,u=N):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Vu(n,s),S=s.memoizedProps,z=Zi(a,S),v.props=z,$=s.pendingProps,q=v.context,O=a.contextType,N=bo,typeof O=="object"&&O!==null&&(N=gt(O)),A=a.getDerivedStateFromProps,(O=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||q!==N)&&Jp(s,v,u,N),ui=!1,q=s.memoizedState,v.state=q,Ys(s,u,v,g),Fs();var H=s.memoizedState;S!==$||q!==H||ui||n!==null&&n.dependencies!==null&&ma(n.dependencies)?(typeof A=="function"&&(cc(s,a,A,u),H=s.memoizedState),(z=ui||$p(s,a,z,u,q,H,N)||n!==null&&n.dependencies!==null&&ma(n.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,H,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,H,N)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),v.props=u,v.state=H,v.context=N,u=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),u=!1)}return v=u,Pa(n,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&u?(s.child=Qi(s,n.child,null,g),s.child=Qi(s,null,a,g)):yt(n,s,a,g),s.memoizedState=v.state,n=s.child):n=Ln(n,s,g),n}function lm(n,s,a,u){return Bi(),s.flags|=256,yt(n,s,a,u),s.child}var mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gc(n){return{baseLanes:n,cachePool:Zh()}}function yc(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Bt),n}function um(n,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(We.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(g?di(s):hi(),(n=Ve)?(n=yg(n,tn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:si!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},a=zh(n),a.return=s,s.child=a,mt=s,Ve=null)):n=null,n===null)throw ai(s);return jc(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(hi(),g=s.mode,A=La({mode:"hidden",children:A},g),u=zi(u,g,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=gc(a),u.childLanes=yc(n,S,a),s.memoizedState=mc,Xs(null,u)):(di(s),vc(s,A))}var N=n.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(v)s.flags&256?(di(s),s.flags&=-257,s=_c(n,s,a)):s.memoizedState!==null?(hi(),s.child=n.child,s.flags|=128,s=null):(hi(),A=u.fallback,g=s.mode,u=La({mode:"visible",children:u.children},g),A=zi(A,g,a,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Qi(s,n.child,null,a),u=s.child,u.memoizedState=gc(a),u.childLanes=yc(n,S,a),s.memoizedState=mc,s=Xs(null,u));else if(di(s),jc(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(o(419)),u.stack="",u.digest=S,qs({value:u,source:null,stack:null}),s=_c(n,s,a)}else if(it||No(n,s,a,!1),S=(a&n.childLanes)!==0,it||S){if(S=Ge,S!==null&&(u=Qd(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Vi(n,u),Ut(S,n,u),hc;Wc(A)||Fa(),s=_c(n,s,a)}else Wc(A)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,Ve=on(A.nextSibling),mt=s,Me=!0,ri=null,tn=!1,n!==null&&Yh(s,n),s=vc(s,u.children),s.flags|=4096);return s}return g?(hi(),A=u.fallback,g=s.mode,N=n.child,O=N.sibling,u=Nn(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,O!==null?A=Nn(O,A):(A=zi(A,g,a,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Xs(null,u),u=s.child,A=n.child.memoizedState,A===null?A=gc(a):(g=A.cachePool,g!==null?(N=tt._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=Zh(),A={baseLanes:A.baseLanes|a,cachePool:g}),u.memoizedState=A,u.childLanes=yc(n,S,a),s.memoizedState=mc,Xs(n.child,u)):(di(s),a=n.child,n=a.sibling,a=Nn(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function vc(n,s){return s=La({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function La(n,s){return n=Gt(22,n,null,s),n.lanes=0,n}function _c(n,s,a){return Qi(s,n.child,null,a),n=vc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function cm(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Pu(n.return,s,a)}function Tc(n,s,a,u,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function fm(n,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=We.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,G(We,S),yt(n,s,u,a),u=Me?Os:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cm(n,a,s);else if(n.tag===19)cm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&Ca(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Tc(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Ca(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Tc(s,!0,a,null,v,u);break;case"together":Tc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Ln(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),gi|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(No(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,a=Nn(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Nn(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Sc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ma(n)))}function vS(n,s,a){switch(s.tag){case 3:dt(s,s.stateNode.containerInfo),li(s,tt,n.memoizedState.cache),Bi();break;case 27:case 5:Ye(s);break;case 4:dt(s,s.stateNode.containerInfo);break;case 10:li(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,$u(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(di(s),s.flags|=128,null):(a&s.child.childLanes)!==0?um(n,s,a):(di(s),n=Ln(n,s,a),n!==null?n.sibling:null);di(s);break;case 19:var g=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(No(n,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return fm(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(We,We.current),u)break;return null;case 22:return s.lanes=0,im(n,s,a,s.pendingProps);case 24:li(s,tt,n.memoizedState.cache)}return Ln(n,s,a)}function dm(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)it=!0;else{if(!Sc(n,a)&&(s.flags&128)===0)return it=!1,vS(n,s,a);it=(n.flags&131072)!==0}else it=!1,Me&&(s.flags&1048576)!==0&&Fh(s,Os,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ji(s.elementType),s.type=n,typeof n=="function")Mu(n)?(u=Zi(n,u),s.tag=1,s=am(null,s,n,u,a)):(s.tag=0,s=pc(null,s,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===J){s.tag=11,s=em(null,s,n,u,a);break e}else if(g===Q){s.tag=14,s=tm(null,s,n,u,a);break e}}throw s=qe(n)||n,Error(o(306,s,""))}}return s;case 0:return pc(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Zi(u,s.pendingProps),am(n,s,u,g,a);case 3:e:{if(dt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,Vu(n,s),Ys(s,u,null,a);var S=s.memoizedState;if(u=S.cache,li(s,tt,u),u!==v.cache&&Lu(s,[tt],a,!0),Fs(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=lm(n,s,u,a);break e}else if(u!==g){g=Wt(Error(o(424)),s),qs(g),s=lm(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=on(n.firstChild),mt=s,Me=!0,ri=null,tn=!0,a=ip(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Bi(),u===g){s=Ln(n,s,a);break e}yt(n,s,u,a)}s=s.child}return s;case 26:return Pa(n,s),n===null?(a=Cg(s.type,null,s.pendingProps,null))?s.memoizedState=a:Me||(a=s.type,n=s.pendingProps,u=Za(ye.current).createElement(a),u[pt]=s,u[wt]=n,vt(u,a,n),lt(u),s.stateNode=u):s.memoizedState=Cg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ye(s),n===null&&Me&&(u=s.stateNode=Tg(s.type,s.pendingProps,ye.current),mt=s,tn=!0,g=Ve,Si(s.type)?(ef=g,Ve=on(u.firstChild)):Ve=g),yt(n,s,s.pendingProps.children,a),Pa(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((g=u=Ve)&&(u=KS(u,s.type,s.pendingProps,tn),u!==null?(s.stateNode=u,mt=s,Ve=on(u.firstChild),tn=!1,g=!0):g=!1),g||ai(s)),Ye(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,u=v.children,Qc(g,v)?u=null:S!==null&&Qc(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Ku(n,s,uS,null,null,a),fr._currentValue=g),Pa(n,s),yt(n,s,u,a),s.child;case 6:return n===null&&Me&&((n=a=Ve)&&(a=QS(a,s.pendingProps,tn),a!==null?(s.stateNode=a,mt=s,Ve=null,n=!0):n=!1),n||ai(s)),null;case 13:return um(n,s,a);case 4:return dt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Qi(s,null,u,a):yt(n,s,u,a),s.child;case 11:return em(n,s,s.type,s.pendingProps,a);case 7:return yt(n,s,s.pendingProps,a),s.child;case 8:return yt(n,s,s.pendingProps.children,a),s.child;case 12:return yt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,li(s,s.type,u.value),yt(n,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Yi(s),g=gt(g),u=u(g),s.flags|=1,yt(n,s,u,a),s.child;case 14:return tm(n,s,s.type,s.pendingProps,a);case 15:return nm(n,s,s.type,s.pendingProps,a);case 19:return fm(n,s,a);case 31:return yS(n,s,a);case 22:return im(n,s,a,s.pendingProps);case 24:return Yi(s),u=gt(tt),n===null?(g=qu(),g===null&&(g=Ge,v=ku(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},Hu(s),li(s,tt,g)):((n.lanes&a)!==0&&(Vu(n,s),Ys(s,null,null,a),Fs()),g=n.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),li(s,tt,u)):(u=v.cache,li(s,tt,u),u!==g.cache&&Lu(s,[tt],a,!0))),yt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function kn(n){n.flags|=4}function Ec(n,s,a,u,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Gm())n.flags|=8192;else throw Ki=_a,Gu}else n.flags&=-16777217}function hm(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Rg(s))if(Gm())n.flags|=8192;else throw Ki=_a,Gu}function ka(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?$d():536870912,n.lanes|=s,Vo|=s)}function Zs(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ze(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function _S(n,s,a){var u=s.pendingProps;switch(xu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(s),null;case 1:return ze(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Dn(tt),Ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ro(s)?kn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Du())),ze(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(kn(s),v!==null?(ze(s),hm(s,v)):(ze(s),Ec(s,g,null,u,a))):v?v!==n.memoizedState?(kn(s),ze(s),hm(s,v)):(ze(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&kn(s),ze(s),Ec(s,g,n,u,a)),null;case 27:if(Pi(s),a=ye.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&kn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}n=ee.current,Ro(s)?$h(s):(n=Tg(g,u,a),s.stateNode=n,kn(s))}return ze(s),null;case 5:if(Pi(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&kn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}if(v=ee.current,Ro(s))$h(s);else{var S=Za(ye.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[pt]=s,v[wt]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(vt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&kn(s)}}return ze(s),Ec(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&kn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=ye.current,Ro(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,g=mt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[pt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||ug(n.nodeValue,a)),n||ai(s,!0)}else n=Za(n).createTextNode(u),n[pt]=s,s.stateNode=n}return ze(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ro(s),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[pt]=s}else Bi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),n=!1}else a=Du(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Vt(s),s):(Vt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ze(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ro(s),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[pt]=s}else Bi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),g=!1}else g=Du(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Vt(s),s):(Vt(s),null)}return Vt(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),ka(s,s.updateQueue),ze(s),null);case 4:return Ke(),n===null&&Fc(s.stateNode.containerInfo),ze(s),null;case 10:return Dn(s.type),ze(s),null;case 19:if(F(We),u=s.memoizedState,u===null)return ze(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)Zs(u,!1);else{if(Ze!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Ca(n),v!==null){for(s.flags|=128,Zs(u,!1),n=v.updateQueue,s.updateQueue=n,ka(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Vh(a,n),a=a.sibling;return G(We,We.current&1|2),Me&&xn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&At()>Va&&(s.flags|=128,g=!0,Zs(u,!1),s.lanes=4194304)}else{if(!g)if(n=Ca(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,ka(s,n),Zs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Me)return ze(s),null}else 2*At()-u.renderingStartTime>Va&&a!==536870912&&(s.flags|=128,g=!0,Zs(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(n=u.last,n!==null?n.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=At(),n.sibling=null,a=We.current,G(We,g?a&1|2:a&1),Me&&xn(s,u.treeForkCount),n):(ze(s),null);case 22:case 23:return Vt(s),Yu(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ze(s),s.subtreeFlags&6&&(s.flags|=8192)):ze(s),a=s.updateQueue,a!==null&&ka(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&F($i),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Dn(tt),ze(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function TS(n,s){switch(xu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Dn(tt),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Pi(s),null;case 31:if(s.memoizedState!==null){if(Vt(s),s.alternate===null)throw Error(o(340));Bi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Vt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Bi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return F(We),null;case 4:return Ke(),null;case 10:return Dn(s.type),null;case 22:case 23:return Vt(s),Yu(),n!==null&&F($i),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Dn(tt),null;case 25:return null;default:return null}}function pm(n,s){switch(xu(s),s.tag){case 3:Dn(tt),Ke();break;case 26:case 27:case 5:Pi(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&Vt(s);break;case 13:Vt(s);break;case 19:F(We);break;case 10:Dn(s.type);break;case 22:case 23:Vt(s),Yu(),n!==null&&F($i);break;case 24:Dn(tt)}}function Ws(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,S=a.inst;u=v(),S.destroy=u}a=a.next}while(a!==g)}}catch(A){Pe(s,s.return,A)}}function pi(n,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var N=a,O=A;try{O()}catch(z){Pe(g,N,z)}}}u=u.next}while(u!==v)}}catch(z){Pe(s,s.return,z)}}function mm(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{sp(s,a)}catch(u){Pe(n,n.return,u)}}}function gm(n,s,a){a.props=Zi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Pe(n,s,u)}}function js(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Pe(n,s,g)}}function _n(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Pe(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Pe(n,s,g)}else a.current=null}function ym(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Pe(n,n.return,g)}}function Cc(n,s,a){try{var u=n.stateNode;zS(u,n.type,a,s),u[wt]=s}catch(g){Pe(n,n.return,g)}}function vm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Si(n.type)||n.tag===4}function Ac(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Si(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=wn));else if(u!==4&&(u===27&&Si(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(bc(n,s,a),n=n.sibling;n!==null;)bc(n,s,a),n=n.sibling}function Oa(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&Si(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Oa(n,s,a),n=n.sibling;n!==null;)Oa(n,s,a),n=n.sibling}function _m(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);vt(s,u,a),s[pt]=n,s[wt]=a}catch(v){Pe(n,n.return,v)}}var On=!1,ot=!1,Mc=!1,Tm=typeof WeakSet=="function"?WeakSet:Set,ut=null;function SS(n,s){if(n=n.containerInfo,Jc=ol,n=Dh(n),_u(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,N=-1,O=0,z=0,$=n,q=null;t:for(;;){for(var H;$!==a||g!==0&&$.nodeType!==3||(A=S+g),$!==v||u!==0&&$.nodeType!==3||(N=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===n)break t;if(q===a&&++O===g&&(A=S),q===v&&++z===u&&(N=S),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kc={focusedElem:n,selectionRange:a},ol=!1,ut=s;ut!==null;)if(s=ut,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ut=n;else for(;ut!==null;){switch(s=ut,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ie=Zi(a.type,g);n=u.getSnapshotBeforeUpdate(ie,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(ue){Pe(a,a.return,ue)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Zc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,ut=n;break}ut=s.return}}function Sm(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Gn(n,a),u&4&&Ws(5,a);break;case 1:if(Gn(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){Pe(a,a.return,S)}else{var g=Zi(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Pe(a,a.return,S)}}u&64&&mm(a),u&512&&js(a,a.return);break;case 3:if(Gn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sp(n,s)}catch(S){Pe(a,a.return,S)}}break;case 27:s===null&&u&4&&_m(a);case 26:case 5:Gn(n,a),s===null&&u&4&&ym(a),u&512&&js(a,a.return);break;case 12:Gn(n,a);break;case 31:Gn(n,a),u&4&&Am(n,a);break;case 13:Gn(n,a),u&4&&bm(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=xS.bind(null,a),XS(n,a))));break;case 22:if(u=a.memoizedState!==null||On,!u){s=s!==null&&s.memoizedState!==null||ot,g=On;var v=ot;On=u,(ot=s)&&!v?Hn(n,a,(a.subtreeFlags&8772)!==0):Gn(n,a),On=g,ot=v}break;case 30:break;default:Gn(n,a)}}function Em(n){var s=n.alternate;s!==null&&(n.alternate=null,Em(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&nu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $e=null,Nt=!1;function qn(n,s,a){for(a=a.child;a!==null;)Cm(n,s,a),a=a.sibling}function Cm(n,s,a){if(K&&typeof K.onCommitFiberUnmount=="function")try{K.onCommitFiberUnmount(Li,a)}catch{}switch(a.tag){case 26:ot||_n(a,s),qn(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ot||_n(a,s);var u=$e,g=Nt;Si(a.type)&&($e=a.stateNode,Nt=!1),qn(n,s,a),lr(a.stateNode),$e=u,Nt=g;break;case 5:ot||_n(a,s);case 6:if(u=$e,g=Nt,$e=null,qn(n,s,a),$e=u,Nt=g,$e!==null)if(Nt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(a.stateNode)}catch(v){Pe(a,s,v)}else try{$e.removeChild(a.stateNode)}catch(v){Pe(a,s,v)}break;case 18:$e!==null&&(Nt?(n=$e,mg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Qo(n)):mg($e,a.stateNode));break;case 4:u=$e,g=Nt,$e=a.stateNode.containerInfo,Nt=!0,qn(n,s,a),$e=u,Nt=g;break;case 0:case 11:case 14:case 15:pi(2,a,s),ot||pi(4,a,s),qn(n,s,a);break;case 1:ot||(_n(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&gm(a,s,u)),qn(n,s,a);break;case 21:qn(n,s,a);break;case 22:ot=(u=ot)||a.memoizedState!==null,qn(n,s,a),ot=u;break;default:qn(n,s,a)}}function Am(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Qo(n)}catch(a){Pe(s,s.return,a)}}}function bm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Qo(n)}catch(a){Pe(s,s.return,a)}}function ES(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Tm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Tm),s;default:throw Error(o(435,n.tag))}}function qa(n,s){var a=ES(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=IS.bind(null,n,u);u.then(g,g)}})}function xt(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Si(A.type)){$e=A.stateNode,Nt=!1;break e}break;case 5:$e=A.stateNode,Nt=!1;break e;case 3:case 4:$e=A.stateNode.containerInfo,Nt=!0;break e}A=A.return}if($e===null)throw Error(o(160));Cm(v,S,g),$e=null,Nt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Mm(s,n),s=s.sibling}var cn=null;function Mm(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xt(s,n),It(n),u&4&&(pi(3,n,n.return),Ws(3,n),pi(5,n,n.return));break;case 1:xt(s,n),It(n),u&512&&(ot||a===null||_n(a,a.return)),u&64&&On&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=cn;if(xt(s,n),It(n),u&512&&(ot||a===null||_n(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ms]||v[pt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),vt(v,u,a),v[pt]=n,lt(v),u=v;break e;case"link":var S=Mg("link","href",g).get(u+(a.href||""));if(S){for(var A=0;A<S.length;A++)if(v=S[A],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;case"meta":if(S=Mg("meta","content",g).get(u+(a.content||""))){for(A=0;A<S.length;A++)if(v=S[A],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[pt]=n,lt(v),u=v}n.stateNode=u}else wg(g,n.type,n.stateNode);else n.stateNode=bg(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?wg(g,n.type,n.stateNode):bg(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Cc(n,n.memoizedProps,a.memoizedProps)}break;case 27:xt(s,n),It(n),u&512&&(ot||a===null||_n(a,a.return)),a!==null&&u&4&&Cc(n,n.memoizedProps,a.memoizedProps);break;case 5:if(xt(s,n),It(n),u&512&&(ot||a===null||_n(a,a.return)),n.flags&32){g=n.stateNode;try{vo(g,"")}catch(ie){Pe(n,n.return,ie)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Cc(n,g,a!==null?a.memoizedProps:g)),u&1024&&(Mc=!0);break;case 6:if(xt(s,n),It(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ie){Pe(n,n.return,ie)}}break;case 3:if(el=null,g=cn,cn=Wa(s.containerInfo),xt(s,n),cn=g,It(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Qo(s.containerInfo)}catch(ie){Pe(n,n.return,ie)}Mc&&(Mc=!1,wm(n));break;case 4:u=cn,cn=Wa(n.stateNode.containerInfo),xt(s,n),It(n),cn=u;break;case 12:xt(s,n),It(n);break;case 31:xt(s,n),It(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qa(n,u)));break;case 13:xt(s,n),It(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ha=At()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qa(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,O=On,z=ot;if(On=O||g,ot=z||N,xt(s,n),ot=z,On=O,It(n),u&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||N||On||ot||Wi(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(v=N.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=N.stateNode;var $=N.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ie){Pe(N,N.return,ie)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ie){Pe(N,N.return,ie)}}}else if(s.tag===18){if(a===null){N=s;try{var H=N.stateNode;g?gg(H,!0):gg(N.stateNode,!1)}catch(ie){Pe(N,N.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,qa(n,a))));break;case 19:xt(s,n),It(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,qa(n,u)));break;case 30:break;case 21:break;default:xt(s,n),It(n)}}function It(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(vm(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=Ac(n);Oa(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(vo(S,""),a.flags&=-33);var A=Ac(n);Oa(n,A,S);break;case 3:case 4:var N=a.stateNode.containerInfo,O=Ac(n);bc(n,O,N);break;default:throw Error(o(161))}}catch(z){Pe(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function wm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;wm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Gn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sm(n,s.alternate,s),s=s.sibling}function Wi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:pi(4,s,s.return),Wi(s);break;case 1:_n(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&gm(s,s.return,a),Wi(s);break;case 27:lr(s.stateNode);case 26:case 5:_n(s,s.return),Wi(s);break;case 22:s.memoizedState===null&&Wi(s);break;case 30:Wi(s);break;default:Wi(s)}n=n.sibling}}function Hn(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:Hn(g,v,a),Ws(4,v);break;case 1:if(Hn(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Pe(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)op(N[g],A)}catch(O){Pe(u,u.return,O)}}a&&S&64&&mm(v),js(v,v.return);break;case 27:_m(v);case 26:case 5:Hn(g,v,a),a&&u===null&&S&4&&ym(v),js(v,v.return);break;case 12:Hn(g,v,a);break;case 31:Hn(g,v,a),a&&S&4&&Am(g,v);break;case 13:Hn(g,v,a),a&&S&4&&bm(g,v);break;case 22:v.memoizedState===null&&Hn(g,v,a),js(v,v.return);break;case 30:break;default:Hn(g,v,a)}s=s.sibling}}function wc(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Gs(a))}function Rc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gs(n))}function fn(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rm(n,s,a,u),s=s.sibling}function Rm(n,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:fn(n,s,a,u),g&2048&&Ws(9,s);break;case 1:fn(n,s,a,u);break;case 3:fn(n,s,a,u),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gs(n)));break;case 12:if(g&2048){fn(n,s,a,u),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,A=v.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Pe(s,s.return,N)}}else fn(n,s,a,u);break;case 31:fn(n,s,a,u);break;case 13:fn(n,s,a,u);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?fn(n,s,a,u):er(n,s):v._visibility&2?fn(n,s,a,u):(v._visibility|=2,qo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&wc(S,s);break;case 24:fn(n,s,a,u),g&2048&&Rc(s.alternate,s);break;default:fn(n,s,a,u)}}function qo(n,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,A=a,N=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:qo(v,S,A,N,g),Ws(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?qo(v,S,A,N,g):er(v,S):(z._visibility|=2,qo(v,S,A,N,g)),g&&O&2048&&wc(S.alternate,S);break;case 24:qo(v,S,A,N,g),g&&O&2048&&Rc(S.alternate,S);break;default:qo(v,S,A,N,g)}s=s.sibling}}function er(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,g=u.flags;switch(u.tag){case 22:er(a,u),g&2048&&wc(u.alternate,u);break;case 24:er(a,u),g&2048&&Rc(u.alternate,u);break;default:er(a,u)}s=s.sibling}}var tr=8192;function Go(n,s,a){if(n.subtreeFlags&tr)for(n=n.child;n!==null;)Nm(n,s,a),n=n.sibling}function Nm(n,s,a){switch(n.tag){case 26:Go(n,s,a),n.flags&tr&&n.memoizedState!==null&&lE(a,cn,n.memoizedState,n.memoizedProps);break;case 5:Go(n,s,a);break;case 3:case 4:var u=cn;cn=Wa(n.stateNode.containerInfo),Go(n,s,a),cn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=tr,tr=16777216,Go(n,s,a),tr=u):Go(n,s,a));break;default:Go(n,s,a)}}function xm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function nr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ut=u,Dm(u,n)}xm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Im(n),n=n.sibling}function Im(n){switch(n.tag){case 0:case 11:case 15:nr(n),n.flags&2048&&pi(9,n,n.return);break;case 3:nr(n);break;case 12:nr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ga(n)):nr(n);break;default:nr(n)}}function Ga(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ut=u,Dm(u,n)}xm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:pi(8,s,s.return),Ga(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ga(s));break;default:Ga(s)}n=n.sibling}}function Dm(n,s){for(;ut!==null;){var a=ut;switch(a.tag){case 0:case 11:case 15:pi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ut=u;else e:for(a=n;ut!==null;){u=ut;var g=u.sibling,v=u.return;if(Em(u),u===a){ut=null;break e}if(g!==null){g.return=v,ut=g;break e}ut=v}}}var CS={getCacheForType:function(n){var s=gt(tt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return gt(tt).controller.signal}},AS=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Ge=null,_e=null,Ee=0,Ue=0,zt=null,mi=!1,Ho=!1,Nc=!1,Vn=0,Ze=0,gi=0,ji=0,xc=0,Bt=0,Vo=0,ir=null,Dt=null,Ic=!1,Ha=0,Um=0,Va=1/0,za=null,yi=null,rt=0,vi=null,zo=null,zn=0,Dc=0,Uc=null,Pm=null,or=0,Pc=null;function Ft(){return(Ie&2)!==0&&Ee!==0?Ee&-Ee:V.T!==null?Hc():Xd()}function Lm(){if(Bt===0)if((Ee&536870912)===0||Me){var n=Xr;Xr<<=1,(Xr&3932160)===0&&(Xr=262144),Bt=n}else Bt=536870912;return n=Ht.current,n!==null&&(n.flags|=32),Bt}function Ut(n,s,a){(n===Ge&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)&&(Bo(n,0),_i(n,Ee,Bt,!1)),bs(n,a),((Ie&2)===0||n!==Ge)&&(n===Ge&&((Ie&2)===0&&(ji|=a),Ze===4&&_i(n,Ee,Bt,!1)),Tn(n))}function km(n,s,a){if((Ie&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||As(n,s),g=u?wS(n,s):kc(n,s,!0),v=u;do{if(g===0){Ho&&!u&&_i(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!bS(a)){g=kc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=n;g=ir;var N=A.current.memoizedState.isDehydrated;if(N&&(Bo(A,S).flags|=256),S=kc(A,S,!1),S!==2){if(Nc&&!N){A.errorRecoveryDisabledLanes|=v,ji|=v,g=4;break e}v=Dt,Dt=g,v!==null&&(Dt===null?Dt=v:Dt.push.apply(Dt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Bo(n,0),_i(n,s,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:_i(u,s,Bt,!mi);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Ha+300-At(),10<g)){if(_i(u,s,Bt,!mi),Wr(u,0,!0)!==0)break e;zn=s,u.timeoutHandle=hg(Om.bind(null,u,a,Dt,za,Ic,s,Bt,ji,Vo,mi,v,"Throttled",-0,0),g);break e}Om(u,a,Dt,za,Ic,s,Bt,ji,Vo,mi,v,null,-0,0)}}break}while(!0);Tn(n)}function Om(n,s,a,u,g,v,S,A,N,O,z,$,q,H){if(n.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},Nm(s,v,$);var ie=(v&62914560)===v?Ha-At():(v&4194048)===v?Um-At():0;if(ie=uE($,ie),ie!==null){zn=v,n.cancelPendingCommit=ie(Ym.bind(null,n,s,v,a,u,g,S,A,N,z,$,null,q,H)),_i(n,v,S,!O);return}}Ym(n,s,v,a,u,g,S,A,N)}function bS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!qt(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _i(n,s,a,u){s&=~xc,s&=~ji,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var g=s;0<g;){var v=31-ve(g),S=1<<v;u[v]=-1,g&=~S}a!==0&&Jd(n,a,s)}function Ba(){return(Ie&6)===0?(sr(0),!1):!0}function Lc(){if(_e!==null){if(Ue===0)var n=_e.return;else n=_e,In=Fi=null,Zu(n),Uo=null,Vs=0,n=_e;for(;n!==null;)pm(n.alternate,n),n=n.return;_e=null}}function Bo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,YS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),zn=0,Lc(),Ge=n,_e=a=Nn(n.current,null),Ee=s,Ue=0,zt=null,mi=!1,Ho=As(n,s),Nc=!1,Vo=Bt=xc=ji=gi=Ze=0,Dt=ir=null,Ic=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var g=31-ve(u),v=1<<g;s|=n[g],u&=~v}return Vn=s,ca(),a}function qm(n,s){pe=null,V.H=Qs,s===Do||s===va?(s=ep(),Ue=3):s===Gu?(s=ep(),Ue=4):Ue=s===hc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zt=s,_e===null&&(Ze=1,Da(n,Wt(s,n.current)))}function Gm(){var n=Ht.current;return n===null?!0:(Ee&4194048)===Ee?nn===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?n===nn:!1}function Hm(){var n=V.H;return V.H=Qs,n===null?Qs:n}function Vm(){var n=V.A;return V.A=CS,n}function Fa(){Ze=4,mi||(Ee&4194048)!==Ee&&Ht.current!==null||(Ho=!0),(gi&134217727)===0&&(ji&134217727)===0||Ge===null||_i(Ge,Ee,Bt,!1)}function kc(n,s,a){var u=Ie;Ie|=2;var g=Hm(),v=Vm();(Ge!==n||Ee!==s)&&(za=null,Bo(n,s)),s=!1;var S=Ze;e:do try{if(Ue!==0&&_e!==null){var A=_e,N=zt;switch(Ue){case 8:Lc(),S=6;break e;case 3:case 2:case 9:case 6:Ht.current===null&&(s=!0);var O=Ue;if(Ue=0,zt=null,Fo(n,A,N,O),a&&Ho){S=0;break e}break;default:O=Ue,Ue=0,zt=null,Fo(n,A,N,O)}}MS(),S=Ze;break}catch(z){qm(n,z)}while(!0);return s&&n.shellSuspendCounter++,In=Fi=null,Ie=u,V.H=g,V.A=v,_e===null&&(Ge=null,Ee=0,ca()),S}function MS(){for(;_e!==null;)zm(_e)}function wS(n,s){var a=Ie;Ie|=2;var u=Hm(),g=Vm();Ge!==n||Ee!==s?(za=null,Va=At()+500,Bo(n,s)):Ho=As(n,s);e:do try{if(Ue!==0&&_e!==null){s=_e;var v=zt;t:switch(Ue){case 1:Ue=0,zt=null,Fo(n,s,v,1);break;case 2:case 9:if(Wh(v)){Ue=0,zt=null,Bm(s);break}s=function(){Ue!==2&&Ue!==9||Ge!==n||(Ue=7),Tn(n)},v.then(s,s);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:Wh(v)?(Ue=0,zt=null,Bm(s)):(Ue=0,zt=null,Fo(n,s,v,7));break;case 5:var S=null;switch(_e.tag){case 26:S=_e.memoizedState;case 5:case 27:var A=_e;if(S?Rg(S):A.stateNode.complete){Ue=0,zt=null;var N=A.sibling;if(N!==null)_e=N;else{var O=A.return;O!==null?(_e=O,Ya(O)):_e=null}break t}}Ue=0,zt=null,Fo(n,s,v,5);break;case 6:Ue=0,zt=null,Fo(n,s,v,6);break;case 8:Lc(),Ze=6;break e;default:throw Error(o(462))}}RS();break}catch(z){qm(n,z)}while(!0);return In=Fi=null,V.H=u,V.A=g,Ie=a,_e!==null?0:(Ge=null,Ee=0,ca(),Ze)}function RS(){for(;_e!==null&&!Kl();)zm(_e)}function zm(n){var s=dm(n.alternate,n,Vn);n.memoizedProps=n.pendingProps,s===null?Ya(n):_e=s}function Bm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=rm(a,s,s.pendingProps,s.type,void 0,Ee);break;case 11:s=rm(a,s,s.pendingProps,s.type.render,s.ref,Ee);break;case 5:Zu(s);default:pm(a,s),s=_e=Vh(s,Vn),s=dm(a,s,Vn)}n.memoizedProps=n.pendingProps,s===null?Ya(n):_e=s}function Fo(n,s,a,u){In=Fi=null,Zu(s),Uo=null,Vs=0;var g=s.return;try{if(gS(n,g,s,a,Ee)){Ze=1,Da(n,Wt(a,n.current)),_e=null;return}}catch(v){if(g!==null)throw _e=g,v;Ze=1,Da(n,Wt(a,n.current)),_e=null;return}s.flags&32768?(Me||u===1?n=!0:Ho||(Ee&536870912)!==0?n=!1:(mi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ht.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fm(s,n)):Ya(s)}function Ya(n){var s=n;do{if((s.flags&32768)!==0){Fm(s,mi);return}n=s.return;var a=_S(s.alternate,s,Vn);if(a!==null){_e=a;return}if(s=s.sibling,s!==null){_e=s;return}_e=s=n}while(s!==null);Ze===0&&(Ze=5)}function Fm(n,s){do{var a=TS(n.alternate,n);if(a!==null){a.flags&=32767,_e=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){_e=n;return}_e=n=a}while(n!==null);Ze=6,_e=null}function Ym(n,s,a,u,g,v,S,A,N){n.cancelPendingCommit=null;do $a();while(rt!==0);if((Ie&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Au,aT(n,a,v,S,A,N),n===Ge&&(_e=Ge=null,Ee=0),zo=s,vi=n,zn=a,Dc=v,Uc=g,Pm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,DS(co,function(){return Xm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,g=W.p,W.p=2,S=Ie,Ie|=4;try{SS(n,s,a)}finally{Ie=S,W.p=g,V.T=u}}rt=1,$m(),Jm(),Km()}}function $m(){if(rt===1){rt=0;var n=vi,s=zo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var u=W.p;W.p=2;var g=Ie;Ie|=4;try{Mm(s,n);var v=Kc,S=Dh(n.containerInfo),A=v.focusedElem,N=v.selectionRange;if(S!==A&&A&&A.ownerDocument&&Ih(A.ownerDocument.documentElement,A)){if(N!==null&&_u(A)){var O=N.start,z=N.end;if(z===void 0&&(z=O),"selectionStart"in A)A.selectionStart=O,A.selectionEnd=Math.min(z,A.value.length);else{var $=A.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),ie=A.textContent.length,ue=Math.min(N.start,ie),Oe=N.end===void 0?ue:Math.min(N.end,ie);!H.extend&&ue>Oe&&(S=Oe,Oe=ue,ue=S);var L=xh(A,ue),I=xh(A,Oe);if(L&&I&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==I.node||H.focusOffset!==I.offset)){var k=$.createRange();k.setStart(L.node,L.offset),H.removeAllRanges(),ue>Oe?(H.addRange(k),H.extend(I.node,I.offset)):(k.setEnd(I.node,I.offset),H.addRange(k))}}}}for($=[],H=A;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<$.length;A++){var Y=$[A];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}ol=!!Jc,Kc=Jc=null}finally{Ie=g,W.p=u,V.T=a}}n.current=s,rt=2}}function Jm(){if(rt===2){rt=0;var n=vi,s=zo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var u=W.p;W.p=2;var g=Ie;Ie|=4;try{Sm(n,s.alternate,s)}finally{Ie=g,W.p=u,V.T=a}}rt=3}}function Km(){if(rt===4||rt===3){rt=0,Yr();var n=vi,s=zo,a=zn,u=Pm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rt=5:(rt=0,zo=vi=null,Qm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(yi=null),eu(a),s=s.stateNode,K&&typeof K.onCommitFiberRoot=="function")try{K.onCommitFiberRoot(Li,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=V.T,g=W.p,W.p=2,V.T=null;try{for(var v=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];v(A.value,{componentStack:A.stack})}}finally{V.T=s,W.p=g}}(zn&3)!==0&&$a(),Tn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===Pc?or++:(or=0,Pc=n):or=0,sr(0)}}function Qm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Gs(s)))}function $a(){return $m(),Jm(),Km(),Xm()}function Xm(){if(rt!==5)return!1;var n=vi,s=Dc;Dc=0;var a=eu(zn),u=V.T,g=W.p;try{W.p=32>a?32:a,V.T=null,a=Uc,Uc=null;var v=vi,S=zn;if(rt=0,zo=vi=null,zn=0,(Ie&6)!==0)throw Error(o(331));var A=Ie;if(Ie|=4,Im(v.current),Rm(v,v.current,S,a),Ie=A,sr(0,!1),K&&typeof K.onPostCommitFiberRoot=="function")try{K.onPostCommitFiberRoot(Li,v)}catch{}return!0}finally{W.p=g,V.T=u,Qm(n,s)}}function Zm(n,s,a){s=Wt(a,s),s=dc(n.stateNode,s,2),n=fi(n,s,2),n!==null&&(bs(n,2),Tn(n))}function Pe(n,s,a){if(n.tag===3)Zm(n,n,a);else for(;s!==null;){if(s.tag===3){Zm(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yi===null||!yi.has(u))){n=Wt(a,n),a=Wp(2),u=fi(s,a,2),u!==null&&(jp(a,u,s,n),bs(u,2),Tn(u));break}}s=s.return}}function Oc(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new AS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Nc=!0,g.add(a),n=NS.bind(null,n,s,a),s.then(n,n))}function NS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Ge===n&&(Ee&a)===a&&(Ze===4||Ze===3&&(Ee&62914560)===Ee&&300>At()-Ha?(Ie&2)===0&&Bo(n,0):xc|=a,Vo===Ee&&(Vo=0)),Tn(n)}function Wm(n,s){s===0&&(s=$d()),n=Vi(n,s),n!==null&&(bs(n,s),Tn(n))}function xS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Wm(n,a)}function IS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Wm(n,a)}function DS(n,s){return Es(n,s)}var Ja=null,Yo=null,qc=!1,Ka=!1,Gc=!1,Ti=0;function Tn(n){n!==Yo&&n.next===null&&(Yo===null?Ja=Yo=n:Yo=Yo.next=n),Ka=!0,qc||(qc=!0,PS())}function sr(n,s){if(!Gc&&Ka){Gc=!0;do for(var a=!1,u=Ja;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-ve(42|n)+1)-1,v&=g&~(S&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,ng(u,v))}else v=Ee,v=Wr(u,u===Ge?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||As(u,v)||(a=!0,ng(u,v));u=u.next}while(a);Gc=!1}}function US(){jm()}function jm(){Ka=qc=!1;var n=0;Ti!==0&&FS()&&(n=Ti);for(var s=At(),a=null,u=Ja;u!==null;){var g=u.next,v=eg(u,s);v===0?(u.next=null,a===null?Ja=g:a.next=g,g===null&&(Yo=a)):(a=u,(n!==0||(v&3)!==0)&&(Ka=!0)),u=g}rt!==0&&rt!==5||sr(n),Ti!==0&&(Ti=0)}function eg(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-ve(v),A=1<<S,N=g[S];N===-1?((A&a)===0||(A&u)!==0)&&(g[S]=rT(A,s)):N<=s&&(n.expiredLanes|=A),v&=~A}if(s=Ge,a=Ee,a=Wr(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Cs(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||As(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Cs(u),eu(a)){case 2:case 8:a=Jr;break;case 32:a=co;break;case 268435456:a=Kr;break;default:a=co}return u=tg.bind(null,n),a=Es(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Cs(u),n.callbackPriority=2,n.callbackNode=null,2}function tg(n,s){if(rt!==0&&rt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if($a()&&n.callbackNode!==a)return null;var u=Ee;return u=Wr(n,n===Ge?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(km(n,u,s),eg(n,At()),n.callbackNode!=null&&n.callbackNode===a?tg.bind(null,n):null)}function ng(n,s){if($a())return null;km(n,s,!0)}function PS(){$S(function(){(Ie&6)!==0?Es($r,US):jm()})}function Hc(){if(Ti===0){var n=xo;n===0&&(n=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),Ti=n}return Ti}function ig(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:na(""+n)}function og(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function LS(n,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=ig((g[wt]||null).action),S=u.submitter;S&&(s=(s=S[wt]||null)?ig(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var A=new ra("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ti!==0){var N=S?og(g,S):new FormData(g);rc(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(A.preventDefault(),N=S?og(g,S):new FormData(g),rc(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var Vc=0;Vc<Cu.length;Vc++){var zc=Cu[Vc],kS=zc.toLowerCase(),OS=zc[0].toUpperCase()+zc.slice(1);un(kS,"on"+OS)}un(Lh,"onAnimationEnd"),un(kh,"onAnimationIteration"),un(Oh,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(jT,"onTransitionRun"),un(eS,"onTransitionStart"),un(tS,"onTransitionCancel"),un(qh,"onTransitionEnd"),go("onMouseEnter",["mouseout","mouseover"]),go("onMouseLeave",["mouseout","mouseover"]),go("onPointerEnter",["pointerout","pointerover"]),go("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rr));function sg(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],N=A.instance,O=A.currentTarget;if(A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){ua(z)}g.currentTarget=null,v=N}else for(S=0;S<u.length;S++){if(A=u[S],N=A.instance,O=A.currentTarget,A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){ua(z)}g.currentTarget=null,v=N}}}}function Te(n,s){var a=s[tu];a===void 0&&(a=s[tu]=new Set);var u=n+"__bubble";a.has(u)||(rg(s,n,2,!1),a.add(u))}function Bc(n,s,a){var u=0;s&&(u|=4),rg(a,n,u,s)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function Fc(n){if(!n[Qa]){n[Qa]=!0,jd.forEach(function(a){a!=="selectionchange"&&(qS.has(a)||Bc(a,!1,n),Bc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Qa]||(s[Qa]=!0,Bc("selectionchange",!1,s))}}function rg(n,s,a,u){switch(Lg(s)){case 2:var g=dE;break;case 8:g=hE;break;default:g=rf}a=g.bind(null,s,a,n),g=void 0,!cu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function Yc(n,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=ho(A),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=v=S;continue e}A=A.parentNode}}u=u.return}fh(function(){var O=v,z=lu(a),$=[];e:{var q=Gh.get(n);if(q!==void 0){var H=ra,ie=n;switch(n){case"keypress":if(oa(a)===0)break e;case"keydown":case"keyup":H=IT;break;case"focusin":ie="focus",H=pu;break;case"focusout":ie="blur",H=pu;break;case"beforeblur":case"afterblur":H=pu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=_T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=PT;break;case Lh:case kh:case Oh:H=ET;break;case qh:H=kT;break;case"scroll":case"scrollend":H=yT;break;case"wheel":H=qT;break;case"copy":case"cut":case"paste":H=AT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=gh;break;case"toggle":case"beforetoggle":H=HT}var ue=(s&4)!==0,Oe=!ue&&(n==="scroll"||n==="scrollend"),L=ue?q!==null?q+"Capture":null:q;ue=[];for(var I=O,k;I!==null;){var Y=I;if(k=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||k===null||L===null||(Y=Rs(I,L),Y!=null&&ue.push(ar(I,Y,k))),Oe)break;I=I.return}0<ue.length&&(q=new H(q,ie,null,a,z),$.push({event:q,listeners:ue}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==au&&(ie=a.relatedTarget||a.fromElement)&&(ho(ie)||ie[fo]))break e;if((H||q)&&(q=z.window===z?z:(q=z.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ie=a.relatedTarget||a.toElement,H=O,ie=ie?ho(ie):null,ie!==null&&(Oe=l(ie),ue=ie.tag,ie!==Oe||ue!==5&&ue!==27&&ue!==6)&&(ie=null)):(H=null,ie=O),H!==ie)){if(ue=ph,Y="onMouseLeave",L="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ue=gh,Y="onPointerLeave",L="onPointerEnter",I="pointer"),Oe=H==null?q:ws(H),k=ie==null?q:ws(ie),q=new ue(Y,I+"leave",H,a,z),q.target=Oe,q.relatedTarget=k,Y=null,ho(z)===O&&(ue=new ue(L,I+"enter",ie,a,z),ue.target=k,ue.relatedTarget=Oe,Y=ue),Oe=Y,H&&ie)t:{for(ue=GS,L=H,I=ie,k=0,Y=L;Y;Y=ue(Y))k++;Y=0;for(var le=I;le;le=ue(le))Y++;for(;0<k-Y;)L=ue(L),k--;for(;0<Y-k;)I=ue(I),Y--;for(;k--;){if(L===I||I!==null&&L===I.alternate){ue=L;break t}L=ue(L),I=ue(I)}ue=null}else ue=null;H!==null&&ag($,q,H,ue,!1),ie!==null&&Oe!==null&&ag($,Oe,ie,ue,!0)}}e:{if(q=O?ws(O):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var we=Ah;else if(Eh(q))if(bh)we=XT;else{we=KT;var oe=JT}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&ru(O.elementType)&&(we=Ah):we=QT;if(we&&(we=we(n,O))){Ch($,we,a,z);break e}oe&&oe(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&su(q,"number",q.value)}switch(oe=O?ws(O):window,n){case"focusin":(Eh(oe)||oe.contentEditable==="true")&&(Eo=oe,Tu=O,ks=null);break;case"focusout":ks=Tu=Eo=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,Uh($,a,z);break;case"selectionchange":if(WT)break;case"keydown":case"keyup":Uh($,a,z)}var ge;if(gu)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else So?Th(n,a)&&(Ce="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(yh&&a.locale!=="ko"&&(So||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&So&&(ge=dh()):(oi=z,fu="value"in oi?oi.value:oi.textContent,So=!0)),oe=Xa(O,Ce),0<oe.length&&(Ce=new mh(Ce,n,null,a,z),$.push({event:Ce,listeners:oe}),ge?Ce.data=ge:(ge=Sh(a),ge!==null&&(Ce.data=ge)))),(ge=zT?BT(n,a):FT(n,a))&&(Ce=Xa(O,"onBeforeInput"),0<Ce.length&&(oe=new mh("onBeforeInput","beforeinput",null,a,z),$.push({event:oe,listeners:Ce}),oe.data=ge)),LS($,n,O,a,z)}sg($,s)})}function ar(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Xa(n,s){for(var a=s+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Rs(n,a),g!=null&&u.unshift(ar(n,g,v)),g=Rs(n,s),g!=null&&u.push(ar(n,g,v))),n.tag===3)return u;n=n.return}return[]}function GS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ag(n,s,a,u,g){for(var v=s._reactName,S=[];a!==null&&a!==u;){var A=a,N=A.alternate,O=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||O===null||(N=O,g?(O=Rs(a,v),O!=null&&S.unshift(ar(a,O,N))):g||(O=Rs(a,v),O!=null&&S.push(ar(a,O,N)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var HS=/\r\n?/g,VS=/\u0000|\uFFFD/g;function lg(n){return(typeof n=="string"?n:""+n).replace(HS,`
`).replace(VS,"")}function ug(n,s){return s=lg(s),lg(n)===s}function ke(n,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||vo(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&vo(n,""+u);break;case"className":ea(n,"class",u);break;case"tabIndex":ea(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ea(n,a,u);break;case"style":uh(n,u,v);break;case"data":if(s!=="object"){ea(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=na(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&ke(n,s,"name",g.name,g,null),ke(n,s,"formEncType",g.formEncType,g,null),ke(n,s,"formMethod",g.formMethod,g,null),ke(n,s,"formTarget",g.formTarget,g,null)):(ke(n,s,"encType",g.encType,g,null),ke(n,s,"method",g.method,g,null),ke(n,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=na(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=wn);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=na(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Te("beforetoggle",n),Te("toggle",n),jr(n,"popover",u);break;case"xlinkActuate":Mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Mn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Mn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Mn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Mn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":jr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mT.get(a)||a,jr(n,a,u))}}function $c(n,s,a,u,g,v){switch(a){case"style":uh(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?vo(n,u):(typeof u=="number"||typeof u=="bigint")&&vo(n,""+u);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"onClick":u!=null&&(n.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eh.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[wt]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):jr(n,a,u)}}}function vt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ke(n,s,v,S,a,null)}}g&&ke(n,s,"srcSet",a.srcSet,a,null),u&&ke(n,s,"src",a.src,a,null);return;case"input":Te("invalid",n);var A=v=S=g=null,N=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":g=z;break;case"type":S=z;break;case"checked":N=z;break;case"defaultChecked":O=z;break;case"value":v=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:ke(n,s,u,z,a,null)}}sh(n,v,A,N,O,S,g,!1);return;case"select":Te("invalid",n),u=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(A=a[g],A!=null))switch(g){case"value":v=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:ke(n,s,g,A,a,null)}s=v,a=S,n.multiple=!!u,s!=null?yo(n,!!u,s,!1):a!=null&&yo(n,!!u,a,!0);return;case"textarea":Te("invalid",n),v=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(A=a[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:ke(n,s,S,A,a,null)}ah(n,u,g,v);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ke(n,s,N,u,a,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(u=0;u<rr.length;u++)Te(rr[u],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:ke(n,s,O,u,a,null)}return;default:if(ru(s)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&$c(n,s,z,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&ke(n,s,A,u,a,null))}function zS(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,A=null,N=null,O=null,z=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=$;default:u.hasOwnProperty(H)||ke(n,s,H,null,u,$)}}for(var q in u){var H=u[q];if($=a[q],u.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":v=H;break;case"name":g=H;break;case"checked":O=H;break;case"defaultChecked":z=H;break;case"value":S=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:H!==$&&ke(n,s,q,H,u,$)}}ou(n,S,A,N,O,z,v,g);return;case"select":H=S=A=q=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":H=N;default:u.hasOwnProperty(v)||ke(n,s,v,null,u,N)}for(g in u)if(v=u[g],N=a[g],u.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":q=v;break;case"defaultValue":A=v;break;case"multiple":S=v;default:v!==N&&ke(n,s,g,v,u,N)}s=A,a=S,u=H,q!=null?yo(n,!!a,q,!1):!!u!=!!a&&(s!=null?yo(n,!!a,s,!0):yo(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(g=a[A],a.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ke(n,s,A,null,u,g)}for(S in u)if(g=u[S],v=a[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":q=g;break;case"defaultValue":H=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&ke(n,s,S,g,u,v)}rh(n,q,H);return;case"option":for(var ie in a)if(q=a[ie],a.hasOwnProperty(ie)&&q!=null&&!u.hasOwnProperty(ie))switch(ie){case"selected":n.selected=!1;break;default:ke(n,s,ie,null,u,q)}for(N in u)if(q=u[N],H=a[N],u.hasOwnProperty(N)&&q!==H&&(q!=null||H!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ke(n,s,N,q,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)q=a[ue],a.hasOwnProperty(ue)&&q!=null&&!u.hasOwnProperty(ue)&&ke(n,s,ue,null,u,q);for(O in u)if(q=u[O],H=a[O],u.hasOwnProperty(O)&&q!==H&&(q!=null||H!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:ke(n,s,O,q,u,H)}return;default:if(ru(s)){for(var Oe in a)q=a[Oe],a.hasOwnProperty(Oe)&&q!==void 0&&!u.hasOwnProperty(Oe)&&$c(n,s,Oe,void 0,u,q);for(z in u)q=u[z],H=a[z],!u.hasOwnProperty(z)||q===H||q===void 0&&H===void 0||$c(n,s,z,q,u,H);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!u.hasOwnProperty(L)&&ke(n,s,L,null,u,q);for($ in u)q=u[$],H=a[$],!u.hasOwnProperty($)||q===H||q==null&&H==null||ke(n,s,$,q,u,H)}function cg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,S=g.initiatorType,A=g.duration;if(v&&A&&cg(S)){for(S=0,A=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],O=N.startTime;if(O>A)break;var z=N.transferSize,$=N.initiatorType;z&&cg($)&&(N=N.responseEnd,S+=z*(N<A?1:(A-O)/(N-O)))}if(--u,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Jc=null,Kc=null;function Za(n){return n.nodeType===9?n:n.ownerDocument}function fg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Qc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xc=null;function FS(){var n=window.event;return n&&n.type==="popstate"?n===Xc?!1:(Xc=n,!0):(Xc=null,!1)}var hg=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,$S=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(n){return pg.resolve(null).then(n).catch(JS)}:hg;function JS(n){setTimeout(function(){throw n})}function Si(n){return n==="head"}function mg(n,s){var a=s,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Qo(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")lr(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,lr(a);for(var v=a.firstChild;v;){var S=v.nextSibling,A=v.nodeName;v[Ms]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&lr(n.ownerDocument.body);a=g}while(a);Qo(s)}function gg(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Zc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zc(a),nu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function KS(n,s,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ms])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=on(n.nextSibling),n===null)break}return null}function QS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=on(n.nextSibling),n===null))return null;return n}function yg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=on(n.nextSibling),n===null))return null;return n}function Wc(n){return n.data==="$?"||n.data==="$~"}function jc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function XS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function on(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ef=null;function vg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return on(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function _g(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Tg(n,s,a){switch(s=Za(a),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function lr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);nu(n)}var sn=new Map,Sg=new Set;function Wa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bn=W.d;W.d={f:ZS,r:WS,D:jS,C:eE,L:tE,m:nE,X:oE,S:iE,M:sE};function ZS(){var n=Bn.f(),s=Ba();return n||s}function WS(n){var s=po(n);s!==null&&s.tag===5&&s.type==="form"?qp(s):Bn.r(n)}var $o=typeof document>"u"?null:document;function Eg(n,s,a){var u=$o;if(u&&typeof s=="string"&&s){var g=Xt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Sg.has(g)||(Sg.add(g),n={rel:n,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),vt(s,"link",n),lt(s),u.head.appendChild(s)))}}function jS(n){Bn.D(n),Eg("dns-prefetch",n,null)}function eE(n,s){Bn.C(n,s),Eg("preconnect",n,s)}function tE(n,s,a){Bn.L(n,s,a);var u=$o;if(u&&n&&s){var g='link[rel="preload"][as="'+Xt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Xt(a.imageSizes)+'"]')):g+='[href="'+Xt(n)+'"]';var v=g;switch(s){case"style":v=Jo(n);break;case"script":v=Ko(n)}sn.has(v)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),sn.set(v,n),u.querySelector(g)!==null||s==="style"&&u.querySelector(ur(v))||s==="script"&&u.querySelector(cr(v))||(s=u.createElement("link"),vt(s,"link",n),lt(s),u.head.appendChild(s)))}}function nE(n,s){Bn.m(n,s);var a=$o;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Xt(u)+'"][href="'+Xt(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ko(n)}if(!sn.has(v)&&(n=_({rel:"modulepreload",href:n},s),sn.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cr(v)))return}u=a.createElement("link"),vt(u,"link",n),lt(u),a.head.appendChild(u)}}}function iE(n,s,a){Bn.S(n,s,a);var u=$o;if(u&&n){var g=mo(u).hoistableStyles,v=Jo(n);s=s||"default";var S=g.get(v);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(ur(v)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=sn.get(v))&&tf(n,a);var N=S=u.createElement("link");lt(N),vt(N,"link",n),N._p=new Promise(function(O,z){N.onload=O,N.onerror=z}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ja(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(v,S)}}}function oE(n,s){Bn.X(n,s);var a=$o;if(a&&n){var u=mo(a).hoistableScripts,g=Ko(n),v=u.get(g);v||(v=a.querySelector(cr(g)),v||(n=_({src:n,async:!0},s),(s=sn.get(g))&&nf(n,s),v=a.createElement("script"),lt(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function sE(n,s){Bn.M(n,s);var a=$o;if(a&&n){var u=mo(a).hoistableScripts,g=Ko(n),v=u.get(g);v||(v=a.querySelector(cr(g)),v||(n=_({src:n,async:!0,type:"module"},s),(s=sn.get(g))&&nf(n,s),v=a.createElement("script"),lt(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Cg(n,s,a,u){var g=(g=ye.current)?Wa(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Jo(a.href),a=mo(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Jo(a.href);var v=mo(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(ur(n)))&&!v._p&&(S.instance=v,S.state.loading=5),sn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},sn.set(n,a),v||rE(g,n,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ko(a),a=mo(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Jo(n){return'href="'+Xt(n)+'"'}function ur(n){return'link[rel="stylesheet"]['+n+"]"}function Ag(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function rE(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),vt(s,"link",a),lt(s),n.head.appendChild(s))}function Ko(n){return'[src="'+Xt(n)+'"]'}function cr(n){return"script[async]"+n}function bg(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Xt(a.href)+'"]');if(u)return s.instance=u,lt(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),lt(u),vt(u,"style",g),ja(u,a.precedence,n),s.instance=u;case"stylesheet":g=Jo(a.href);var v=n.querySelector(ur(g));if(v)return s.state.loading|=4,s.instance=v,lt(v),v;u=Ag(a),(g=sn.get(g))&&tf(u,g),v=(n.ownerDocument||n).createElement("link"),lt(v);var S=v;return S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),s.state.loading|=4,ja(v,a.precedence,n),s.instance=v;case"script":return v=Ko(a.src),(g=n.querySelector(cr(v)))?(s.instance=g,lt(g),g):(u=a,(g=sn.get(v))&&(u=_({},a),nf(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),lt(g),vt(g,"link",u),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ja(u,a.precedence,n));return s.instance}function ja(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)v=A;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function tf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function nf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var el=null;function Mg(n,s,a){if(el===null){var u=new Map,g=el=new Map;g.set(a,u)}else g=el,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[Ms]||v[pt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var A=u.get(S);A?A.push(v):u.set(S,[v])}}return u}function wg(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function aE(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Rg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function lE(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Jo(u.href),v=s.querySelector(ur(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=tl.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,lt(v);return}v=s.ownerDocument||s,u=Ag(u),(g=sn.get(g))&&tf(u,g),v=v.createElement("link"),lt(v);var S=v;S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=tl.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var of=0;function uE(n,s){return n.stylesheets&&n.count===0&&il(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&il(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&of===0&&(of=62500*BS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&il(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>of?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function tl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)il(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nl=null;function il(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nl=new Map,s.forEach(cE,n),nl=null,tl.call(n))}function cE(n,s){if(!(s.state.loading&4)){var a=nl.get(n);if(a)var u=a.get(null);else{a=new Map,nl.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||u,v===u&&a.set(null,g),a.set(S,g),this.count++,u=tl.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var fr={$$typeof:P,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function fE(n,s,a,u,g,v,S,A,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.hiddenUpdates=Wl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Ng(n,s,a,u,g,v,S,A,N,O,z,$){return n=new fE(n,s,a,S,N,O,z,$,A),s=1,v===!0&&(s|=24),v=Gt(3,null,null,s),n.current=v,v.stateNode=n,s=ku(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},Hu(v),n}function xg(n){return n?(n=bo,n):bo}function Ig(n,s,a,u,g,v){g=xg(g),u.context===null?u.context=g:u.pendingContext=g,u=ci(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=fi(n,u,s),a!==null&&(Ut(a,n,s),Bs(a,n,s))}function Dg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function sf(n,s){Dg(n,s),(n=n.alternate)&&Dg(n,s)}function Ug(n){if(n.tag===13||n.tag===31){var s=Vi(n,67108864);s!==null&&Ut(s,n,67108864),sf(n,67108864)}}function Pg(n){if(n.tag===13||n.tag===31){var s=Ft();s=jl(s);var a=Vi(n,s);a!==null&&Ut(a,n,s),sf(n,s)}}var ol=!0;function dE(n,s,a,u){var g=V.T;V.T=null;var v=W.p;try{W.p=2,rf(n,s,a,u)}finally{W.p=v,V.T=g}}function hE(n,s,a,u){var g=V.T;V.T=null;var v=W.p;try{W.p=8,rf(n,s,a,u)}finally{W.p=v,V.T=g}}function rf(n,s,a,u){if(ol){var g=af(u);if(g===null)Yc(n,s,u,sl,a),kg(n,u);else if(mE(g,n,s,a,u))u.stopPropagation();else if(kg(n,u),s&4&&-1<pE.indexOf(n)){for(;g!==null;){var v=po(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=ki(v.pendingLanes);if(S!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var N=1<<31-ve(S);A.entanglements[1]|=N,S&=~N}Tn(v),(Ie&6)===0&&(Va=At()+500,sr(0))}}break;case 31:case 13:A=Vi(v,2),A!==null&&Ut(A,v,2),Ba(),sf(v,2)}if(v=af(u),v===null&&Yc(n,s,u,sl,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else Yc(n,s,u,null,a)}}function af(n){return n=lu(n),lf(n)}var sl=null;function lf(n){if(sl=null,n=ho(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return sl=n,null}function Lg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ql()){case $r:return 2;case Jr:return 8;case co:case Xl:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var uf=!1,Ei=null,Ci=null,Ai=null,dr=new Map,hr=new Map,bi=[],pE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kg(n,s){switch(n){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":dr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(s.pointerId)}}function pr(n,s,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=po(s),s!==null&&Ug(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function mE(n,s,a,u,g){switch(s){case"focusin":return Ei=pr(Ei,n,s,a,u,g),!0;case"dragenter":return Ci=pr(Ci,n,s,a,u,g),!0;case"mouseover":return Ai=pr(Ai,n,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return dr.set(v,pr(dr.get(v)||null,n,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,hr.set(v,pr(hr.get(v)||null,n,s,a,u,g)),!0}return!1}function Og(n){var s=ho(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,Zd(n.priority,function(){Pg(a)});return}}else if(s===31){if(s=d(a),s!==null){n.blockedOn=s,Zd(n.priority,function(){Pg(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=af(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);au=u,a.target.dispatchEvent(u),au=null}else return s=po(a),s!==null&&Ug(s),n.blockedOn=a,!1;s.shift()}return!0}function qg(n,s,a){rl(n)&&a.delete(s)}function gE(){uf=!1,Ei!==null&&rl(Ei)&&(Ei=null),Ci!==null&&rl(Ci)&&(Ci=null),Ai!==null&&rl(Ai)&&(Ai=null),dr.forEach(qg),hr.forEach(qg)}function al(n,s){n.blockedOn===s&&(n.blockedOn=null,uf||(uf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gE)))}var ll=null;function Gg(n){ll!==n&&(ll=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ll===n&&(ll=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],g=n[s+2];if(typeof u!="function"){if(lf(u||a)===null)continue;break}var v=po(a);v!==null&&(n.splice(s,3),s-=3,rc(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Qo(n){function s(N){return al(N,n)}Ei!==null&&al(Ei,n),Ci!==null&&al(Ci,n),Ai!==null&&al(Ai,n),dr.forEach(s),hr.forEach(s);for(var a=0;a<bi.length;a++){var u=bi[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<bi.length&&(a=bi[0],a.blockedOn===null);)Og(a),a.blockedOn===null&&bi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],S=g[wt]||null;if(typeof v=="function")S||Gg(a);else if(S){var A=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[wt]||null)A=S.formAction;else if(lf(g)!==null)continue}else A=S.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),Gg(a)}}}function Hg(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function cf(n){this._internalRoot=n}ul.prototype.render=cf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Ft();Ig(a,u,n,s,null,null)},ul.prototype.unmount=cf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ig(n.current,2,null,n,null,null),Ba(),s[fo]=null}};function ul(n){this._internalRoot=n}ul.prototype.unstable_scheduleHydration=function(n){if(n){var s=Xd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<bi.length&&s!==0&&s<bi[a].priority;a++);bi.splice(a,0,n),a===0&&Og(n)}};var Vg=e.version;if(Vg!=="19.2.0")throw Error(o(527,Vg,"19.2.0"));W.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var yE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{Li=cl.inject(yE),K=cl}catch{}}return gr.createRoot=function(n,s){if(!r(n))throw Error(o(299));var a=!1,u="",g=Kp,v=Qp,S=Xp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Ng(n,1,!1,null,null,a,u,null,g,v,S,Hg),n[fo]=s.current,Fc(n),new cf(s)},gr.hydrateRoot=function(n,s,a){if(!r(n))throw Error(o(299));var u=!1,g="",v=Kp,S=Qp,A=Xp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=Ng(n,1,!0,s,a??null,u,g,N,v,S,A,Hg),s.context=xg(null),a=s.current,u=Ft(),u=jl(u),g=ci(u),g.callback=null,fi(a,g,u),a=u,s.current.lanes=a,bs(s,a),Tn(s),n[fo]=s.current,Fc(n),new ul(s)},gr.version="19.2.0",gr}var Zg;function wE(){if(Zg)return hf.exports;Zg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hf.exports=ME(),hf.exports}var RE=wE();var Wg="popstate";function NE(t={}){function e(o,r){let{pathname:l,search:c,hash:d}=o.location;return wf("",{pathname:l,search:c,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(o,r){return typeof r=="string"?r:Lr(r)}return IE(e,i,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ln(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xE(){return Math.random().toString(36).substring(2,10)}function jg(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,i=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fs(e):e,state:i,key:e&&e.key||o||xE()}}function Lr({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function fs(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function IE(t,e,i,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,d="POP",p=null,h=y();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function y(){return(c.state||{idx:null}).idx}function _(){d="POP";let w=y(),R=w==null?null:w-h;h=w,p&&p({action:d,location:M.location,delta:R})}function T(w,R){d="PUSH";let D=wf(M.location,w,R);h=y()+1;let P=jg(D,h),J=M.createHref(D);try{c.pushState(P,"",J)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(J)}l&&p&&p({action:d,location:M.location,delta:1})}function C(w,R){d="REPLACE";let D=wf(M.location,w,R);h=y();let P=jg(D,h),J=M.createHref(D);c.replaceState(P,"",J),l&&p&&p({action:d,location:M.location,delta:0})}function b(w){return DE(w)}let M={get action(){return d},get location(){return t(r,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(Wg,_),p=w,()=>{r.removeEventListener(Wg,_),p=null}},createHref(w){return e(r,w)},createURL:b,encodeLocation(w){let R=b(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:C,go(w){return c.go(w)}};return M}function DE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(i,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:Lr(t);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function S0(t,e,i="/"){return UE(t,e,i,!1)}function UE(t,e,i,o){let r=typeof e=="string"?fs(e):e,l=Zn(r.pathname||"/",i);if(l==null)return null;let c=E0(t);PE(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let h=YE(l);d=BE(c[p],h,o)}return d}function E0(t,e=[],i=[],o="",r=!1){let l=(c,d,p=r,h)=>{let y={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Qe(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=Qn([o,y.relativePath]),T=i.concat(y);c.children&&c.children.length>0&&(Qe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),E0(c.children,e,T,_,p)),!(c.path==null&&!c.index)&&e.push({path:_,score:VE(_,c.index),routesMeta:T})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of C0(c.path))l(c,d,!0,p)}),e}function C0(t){let e=t.split("/");if(e.length===0)return[];let[i,...o]=e,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=C0(o.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),r&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function PE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:zE(e.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var LE=/^:[\w-]+$/,kE=3,OE=2,qE=1,GE=10,HE=-2,ey=t=>t==="*";function VE(t,e){let i=t.split("/"),o=i.length;return i.some(ey)&&(o+=HE),e&&(o+=OE),i.filter(r=>!ey(r)).reduce((r,l)=>r+(LE.test(l)?kE:l===""?qE:GE),o)}function zE(t,e){return t.length===e.length&&t.slice(0,-1).every((o,r)=>o===e[r])?t[t.length-1]-e[e.length-1]:0}function BE(t,e,i=!1){let{routesMeta:o}=t,r={},l="/",c=[];for(let d=0;d<o.length;++d){let p=o[d],h=d===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),T=p.route;if(!_&&h&&i&&!o[o.length-1].route.index&&(_=bl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:Qn([l,_.pathname]),pathnameBase:XE(Qn([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=Qn([l,_.pathnameBase]))}return c}function bl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,o]=FE(t.path,t.caseSensitive,t.end),r=e.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:o.reduce((h,{paramName:y,isOptional:_},T)=>{if(y==="*"){let b=d[T]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const C=d[T];return _&&!C?h[y]=void 0:h[y]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function FE(t,e=!1,i=!0){ln(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(o.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function YE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ln(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Zn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,o=t.charAt(i);return o&&o!=="/"?null:t.slice(i)||"/"}var $E=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=t=>$E.test(t);function KE(t,e="/"){let{pathname:i,search:o="",hash:r=""}=typeof t=="string"?fs(t):t,l;if(i)if(JE(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),ln(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=ty(i.substring(1),"/"):l=ty(i,e)}else l=e;return{pathname:l,search:ZE(o),hash:WE(r)}}function ty(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function yf(t,e,i,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QE(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function A0(t){let e=QE(t);return e.map((i,o)=>o===e.length-1?i.pathname:i.pathnameBase)}function b0(t,e,i,o=!1){let r;typeof t=="string"?r=fs(t):(r={...t},Qe(!r.pathname||!r.pathname.includes("?"),yf("?","pathname","search",r)),Qe(!r.pathname||!r.pathname.includes("#"),yf("#","pathname","hash",r)),Qe(!r.search||!r.search.includes("#"),yf("#","search","hash",r)));let l=t===""||r.pathname==="",c=l?"/":r.pathname,d;if(c==null)d=i;else{let _=e.length-1;if(!o&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}d=_>=0?e[_]:"/"}let p=KE(r,d),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var Qn=t=>t.join("/").replace(/\/\/+/g,"/"),XE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var M0=["POST","PUT","PATCH","DELETE"];new Set(M0);var eC=["GET",...M0];new Set(eC);var ds=U.createContext(null);ds.displayName="DataRouter";var Ol=U.createContext(null);Ol.displayName="DataRouterState";U.createContext(!1);var w0=U.createContext({isTransitioning:!1});w0.displayName="ViewTransition";var tC=U.createContext(new Map);tC.displayName="Fetchers";var nC=U.createContext(null);nC.displayName="Await";var Cn=U.createContext(null);Cn.displayName="Navigation";var Or=U.createContext(null);Or.displayName="Location";var ei=U.createContext({outlet:null,matches:[],isDataRoute:!1});ei.displayName="Route";var md=U.createContext(null);md.displayName="RouteError";function iC(t,{relative:e}={}){Qe(qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=U.useContext(Cn),{hash:r,pathname:l,search:c}=Gr(t,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:Qn([i,l])),o.createHref({pathname:d,search:c,hash:r})}function qr(){return U.useContext(Or)!=null}function Di(){return Qe(qr(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Or).location}var R0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N0(t){U.useContext(Cn).static||U.useLayoutEffect(t)}function ql(){let{isDataRoute:t}=U.useContext(ei);return t?gC():oC()}function oC(){Qe(qr(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(ds),{basename:e,navigator:i}=U.useContext(Cn),{matches:o}=U.useContext(ei),{pathname:r}=Di(),l=JSON.stringify(A0(o)),c=U.useRef(!1);return N0(()=>{c.current=!0}),U.useCallback((p,h={})=>{if(ln(c.current,R0),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=b0(p,JSON.parse(l),r,h.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Qn([e,y.pathname])),(h.replace?i.replace:i.push)(y,h.state,h)},[e,i,l,r,t])}U.createContext(null);function Gr(t,{relative:e}={}){let{matches:i}=U.useContext(ei),{pathname:o}=Di(),r=JSON.stringify(A0(i));return U.useMemo(()=>b0(t,JSON.parse(r),o,e==="path"),[t,r,o,e])}function sC(t,e){return x0(t,e)}function x0(t,e,i,o,r){Qe(qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(Cn),{matches:c}=U.useContext(ei),d=c[c.length-1],p=d?d.params:{},h=d?d.pathname:"/",y=d?d.pathnameBase:"/",_=d&&d.route;{let D=_&&_.path||"";I0(h,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let T=Di(),C;if(e){let D=typeof e=="string"?fs(e):e;Qe(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),C=D}else C=T;let b=C.pathname||"/",M=b;if(y!=="/"){let D=y.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=S0(t,{pathname:M});ln(_||w!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ln(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=cC(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:Qn([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:Qn([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,i,o,r);return e&&R?U.createElement(Or.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},R):R}function rC(){let t=mC(),e=jE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),i?U.createElement("pre",{style:r},i):null,c)}var aC=U.createElement(rC,null),lC=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?U.createElement(ei.Provider,{value:this.props.routeContext},U.createElement(md.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:t,match:e,children:i}){let o=U.useContext(ds);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(ei.Provider,{value:t},i)}function cC(t,e=[],i=null,o=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Qe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:T,errors:C}=i,b=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!C||C[_.route.id]===void 0);if(_.route.lazy||b){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&o?(y,_)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,T)=>{let C,b=!1,M=null,w=null;i&&(C=c&&_.route.id?c[_.route.id]:void 0,M=_.route.errorElement||aC,d&&(p<0&&T===0?(I0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):p===T&&(b=!0,w=_.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),D=()=>{let P;return C?P=M:b?P=w:_.route.Component?P=U.createElement(_.route.Component,null):_.route.element?P=_.route.element:P=y,U.createElement(uC,{match:_,routeContext:{outlet:y,matches:R,isDataRoute:i!=null},children:P})};return i&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?U.createElement(lC,{location:i.location,revalidation:i.revalidation,component:M,error:C,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:h}):D()},null)}function gd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fC(t){let e=U.useContext(ds);return Qe(e,gd(t)),e}function dC(t){let e=U.useContext(Ol);return Qe(e,gd(t)),e}function hC(t){let e=U.useContext(ei);return Qe(e,gd(t)),e}function yd(t){let e=hC(t),i=e.matches[e.matches.length-1];return Qe(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function pC(){return yd("useRouteId")}function mC(){let t=U.useContext(md),e=dC("useRouteError"),i=yd("useRouteError");return t!==void 0?t:e.errors?.[i]}function gC(){let{router:t}=fC("useNavigate"),e=yd("useNavigate"),i=U.useRef(!1);return N0(()=>{i.current=!0}),U.useCallback(async(r,l={})=>{ln(i.current,R0),i.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var ny={};function I0(t,e,i){!e&&!ny[t]&&(ny[t]=!0,ln(!1,i))}U.memo(yC);function yC({routes:t,future:e,state:i,unstable_onError:o}){return x0(t,void 0,i,o,e)}function Xo(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vC({basename:t="/",children:e=null,location:i,navigationType:o="POP",navigator:r,static:l=!1}){Qe(!qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=U.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=fs(i));let{pathname:p="/",search:h="",hash:y="",state:_=null,key:T="default"}=i,C=U.useMemo(()=>{let b=Zn(p,c);return b==null?null:{location:{pathname:b,search:h,hash:y,state:_,key:T},navigationType:o}},[c,p,h,y,_,T,o]);return ln(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:U.createElement(Cn.Provider,{value:d},U.createElement(Or.Provider,{children:e,value:C}))}function _C({children:t,location:e}){return sC(Rf(t),e)}function Rf(t,e=[]){let i=[];return U.Children.forEach(t,(o,r)=>{if(!U.isValidElement(o))return;let l=[...e,r];if(o.type===U.Fragment){i.push.apply(i,Rf(o.props.children,l));return}Qe(o.type===Xo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Rf(o.props.children,l)),i.push(c)}),i}var gl="get",yl="application/x-www-form-urlencoded";function Gl(t){return t!=null&&typeof t.tagName=="string"}function TC(t){return Gl(t)&&t.tagName.toLowerCase()==="button"}function SC(t){return Gl(t)&&t.tagName.toLowerCase()==="form"}function EC(t){return Gl(t)&&t.tagName.toLowerCase()==="input"}function CC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AC(t,e){return t.button===0&&(!e||e==="_self")&&!CC(t)}function Nf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let o=t[i];return e.concat(Array.isArray(o)?o.map(r=>[i,r]):[[i,o]])},[]))}function bC(t,e){let i=Nf(t);return e&&e.forEach((o,r)=>{i.has(r)||e.getAll(r).forEach(l=>{i.append(r,l)})}),i}var fl=null;function MC(){if(fl===null)try{new FormData(document.createElement("form"),0),fl=!1}catch{fl=!0}return fl}var wC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vf(t){return t!=null&&!wC.has(t)?(ln(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yl}"`),null):t}function RC(t,e){let i,o,r,l,c;if(SC(t)){let d=t.getAttribute("action");o=d?Zn(d,e):null,i=t.getAttribute("method")||gl,r=vf(t.getAttribute("enctype"))||yl,l=new FormData(t)}else if(TC(t)||EC(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(o=p?Zn(p,e):null,i=t.getAttribute("formmethod")||d.getAttribute("method")||gl,r=vf(t.getAttribute("formenctype"))||vf(d.getAttribute("enctype"))||yl,l=new FormData(d,t),!MC()){let{name:h,type:y,value:_}=t;if(y==="image"){let T=h?`${h}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else h&&l.append(h,_)}}else{if(Gl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=gl,o=null,r=yl,c=t}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vd(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NC(t,e,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return o.pathname==="/"?o.pathname=`_root.${i}`:e&&Zn(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function xC(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DC(t,e,i){let o=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await xC(l,i);return c.links?c.links():[]}return[]}));return kC(o.flat(1).filter(IC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function iy(t,e,i,o,r,l){let c=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,d=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>c(p,h)||d(p,h)):l==="data"?e.filter((p,h)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,h)||d(p,h))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function UC(t,e,{includeHydrateFallback:i}={}){return PC(t.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function PC(t){return[...new Set(t)]}function LC(t){let e={},i=Object.keys(t).sort();for(let o of i)e[o]=t[o];return e}function kC(t,e){let i=new Set;return new Set(e),t.reduce((o,r)=>{let l=JSON.stringify(LC(r));return i.has(l)||(i.add(l),o.push({key:l,link:r})),o},[])}function D0(){let t=U.useContext(ds);return vd(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function OC(){let t=U.useContext(Ol);return vd(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _d=U.createContext(void 0);_d.displayName="FrameworkContext";function U0(){let t=U.useContext(_d);return vd(t,"You must render this element inside a <HydratedRouter> element"),t}function qC(t,e){let i=U.useContext(_d),[o,r]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:_}=e,T=U.useRef(null);U.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let M=R=>{R.forEach(D=>{c(D.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return T.current&&w.observe(T.current),()=>{w.disconnect()}}},[t]),U.useEffect(()=>{if(o){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[o]);let C=()=>{r(!0)},b=()=>{r(!1),c(!1)};return i?t!=="intent"?[l,T,{}]:[l,T,{onFocus:yr(d,C),onBlur:yr(p,b),onMouseEnter:yr(h,C),onMouseLeave:yr(y,b),onTouchStart:yr(_,C)}]:[!1,T,{}]}function yr(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function GC({page:t,...e}){let{router:i}=D0(),o=U.useMemo(()=>S0(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?U.createElement(VC,{page:t,matches:o,...e}):null}function HC(t){let{manifest:e,routeModules:i}=U0(),[o,r]=U.useState([]);return U.useEffect(()=>{let l=!1;return DC(t,e,i).then(c=>{l||r(c)}),()=>{l=!0}},[t,e,i]),o}function VC({page:t,matches:e,...i}){let o=Di(),{manifest:r,routeModules:l}=U0(),{basename:c}=D0(),{loaderData:d,matches:p}=OC(),h=U.useMemo(()=>iy(t,e,p,r,o,"data"),[t,e,p,r,o]),y=U.useMemo(()=>iy(t,e,p,r,o,"assets"),[t,e,p,r,o]),_=U.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let b=new Set,M=!1;if(e.forEach(R=>{let D=r.routes[R.route.id];!D||!D.hasLoader||(!h.some(P=>P.route.id===R.route.id)&&R.route.id in d&&l[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:b.add(R.route.id))}),b.size===0)return[];let w=NC(t,c,"data");return M&&b.size>0&&w.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,d,o,r,h,e,t,l]),T=U.useMemo(()=>UC(y,r),[y,r]),C=HC(y);return U.createElement(U.Fragment,null,_.map(b=>U.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),T.map(b=>U.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),C.map(({key:b,link:M})=>U.createElement("link",{key:b,nonce:i.nonce,...M})))}function zC(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var P0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{P0&&(window.__reactRouterVersion="7.9.6")}catch{}function BC({basename:t,children:e,window:i}){let o=U.useRef();o.current==null&&(o.current=NE({window:i,v5Compat:!0}));let r=o.current,[l,c]=U.useState({action:r.action,location:r.location}),d=U.useCallback(p=>{U.startTransition(()=>c(p))},[c]);return U.useLayoutEffect(()=>r.listen(d),[r,d]),U.createElement(vC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var L0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k0=U.forwardRef(function({onClick:e,discover:i="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:d,target:p,to:h,preventScrollReset:y,viewTransition:_,...T},C){let{basename:b}=U.useContext(Cn),M=typeof h=="string"&&L0.test(h),w,R=!1;if(typeof h=="string"&&M&&(w=h,P0))try{let j=new URL(window.location.href),ae=h.startsWith("//")?new URL(j.protocol+h):new URL(h),me=Zn(ae.pathname,b);ae.origin===j.origin&&me!=null?h=me+ae.search+ae.hash:R=!0}catch{ln(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=iC(h,{relative:r}),[P,J,B]=qC(o,T),Z=$C(h,{replace:c,state:d,target:p,preventScrollReset:y,relative:r,viewTransition:_});function Q(j){e&&e(j),j.defaultPrevented||Z(j)}let ne=U.createElement("a",{...T,...B,href:w||D,onClick:R||l?e:Q,ref:zC(C,J),target:p,"data-discover":!M&&i==="render"?"true":void 0});return P&&!M?U.createElement(U.Fragment,null,ne,U.createElement(GC,{page:D})):ne});k0.displayName="Link";var O0=U.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:d,children:p,...h},y){let _=Gr(c,{relative:h.relative}),T=Di(),C=U.useContext(Ol),{navigator:b,basename:M}=U.useContext(Cn),w=C!=null&&WC(_)&&d===!0,R=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,D=T.pathname,P=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(D=D.toLowerCase(),P=P?P.toLowerCase():null,R=R.toLowerCase()),P&&M&&(P=Zn(P,M)||P);const J=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=D===R||!r&&D.startsWith(R)&&D.charAt(J)==="/",Z=P!=null&&(P===R||!r&&P.startsWith(R)&&P.charAt(R.length)==="/"),Q={isActive:B,isPending:Z,isTransitioning:w},ne=B?e:void 0,j;typeof o=="function"?j=o(Q):j=[o,B?"active":null,Z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let ae=typeof l=="function"?l(Q):l;return U.createElement(k0,{...h,"aria-current":ne,className:j,ref:y,style:ae,to:c,viewTransition:d},typeof p=="function"?p(Q):p)});O0.displayName="NavLink";var FC=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:o,replace:r,state:l,method:c=gl,action:d,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:_,...T},C)=>{let b=XC(),M=ZC(d,{relative:h}),w=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&L0.test(d),D=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let J=P.nativeEvent.submitter,B=J?.getAttribute("formmethod")||c;b(J||P.currentTarget,{fetcherKey:e,method:B,navigate:i,replace:r,state:l,relative:h,preventScrollReset:y,viewTransition:_})};return U.createElement("form",{ref:C,method:w,action:M,onSubmit:o?p:D,...T,"data-discover":!R&&t==="render"?"true":void 0})});FC.displayName="Form";function YC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(t){let e=U.useContext(ds);return Qe(e,YC(t)),e}function $C(t,{target:e,replace:i,state:o,preventScrollReset:r,relative:l,viewTransition:c}={}){let d=ql(),p=Di(),h=Gr(t,{relative:l});return U.useCallback(y=>{if(AC(y,e)){y.preventDefault();let _=i!==void 0?i:Lr(p)===Lr(h);d(t,{replace:_,state:o,preventScrollReset:r,relative:l,viewTransition:c})}},[p,d,h,i,o,e,t,r,l,c])}function JC(t){ln(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(Nf(t)),i=U.useRef(!1),o=Di(),r=U.useMemo(()=>bC(o.search,i.current?null:e.current),[o.search]),l=ql(),c=U.useCallback((d,p)=>{const h=Nf(typeof d=="function"?d(new URLSearchParams(r)):d);i.current=!0,l("?"+h,p)},[l,r]);return[r,c]}var KC=0,QC=()=>`__${String(++KC)}__`;function XC(){let{router:t}=q0("useSubmit"),{basename:e}=U.useContext(Cn),i=pC();return U.useCallback(async(o,r={})=>{let{action:l,method:c,encType:d,formData:p,body:h}=RC(o,e);if(r.navigate===!1){let y=r.fetcherKey||QC();await t.fetch(y,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,i])}function ZC(t,{relative:e}={}){let{basename:i}=U.useContext(Cn),o=U.useContext(ei);Qe(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...Gr(t||".",{relative:e})},c=Di();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(_=>_).forEach(_=>d.append("index",_));let y=d.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Qn([i,l.pathname])),Lr(l)}function WC(t,{relative:e}={}){let i=U.useContext(w0);Qe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=q0("useViewTransitionState"),r=Gr(t,{relative:e});if(!i.isTransitioning)return!1;let l=Zn(i.currentLocation.pathname,o)||i.currentLocation.pathname,c=Zn(i.nextLocation.pathname,o)||i.nextLocation.pathname;return bl(r.pathname,c)!=null||bl(r.pathname,l)!=null}function Tt(t){if(typeof t=="number")return(Math.abs(t*2654435761)>>>0).toString(16);if(typeof t=="boolean")return t?"1":"0";if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string"){let e=2166136261;for(let i=0;i<t.length;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e=e>>>0;return e.toString(16)}if(Array.isArray(t)){let e=2166136261;for(let i=0;i<t.length;i++){e^=(i+1)*2654435761;const o=Tt(t[i]);for(let r=0;r<o.length;r++)e^=o.charCodeAt(r),e*=16777619,e=e>>>0}return e.toString(16)}if(typeof t=="object"){let e=2166136261;const i=Object.keys(t).sort();for(let o=0;o<i.length;o++){const r=i[o],l=Tt(r);e^=parseInt(l,16),e*=16777619,e=e>>>0;const c=Tt(t[r]);e^=parseInt(c,16),e*=16777619,e=e>>>0}return e.toString(16)}return Tt(String(t))}const et={Remove:"remove",Replace:"replace",Add:"add"},G0=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),jC=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),vl=Symbol.iterator,$t={mutable:"mutable",immutable:"immutable"},Td={};function Mr(t,e){return t instanceof Map?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function oy(t,e){if(e in t){let i=Reflect.getPrototypeOf(t);for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,e);if(o)return o;i=Reflect.getPrototypeOf(i)}}}function Sd(t){return Object.getPrototypeOf(t)===Set.prototype}function Ed(t){return Object.getPrototypeOf(t)===Map.prototype}function Yt(t){var e;return(e=t.copy)!==null&&e!==void 0?e:t.original}function Ni(t){return!!Ae(t)}function Ae(t){return typeof t!="object"?null:t?.[G0]}function Cd(t){var e;const i=Ae(t);return i?(e=i.copy)!==null&&e!==void 0?e:i.original:t}function pn(t,e){if(!t||typeof t!="object")return!1;let i;return Object.getPrototypeOf(t)===Object.prototype||Array.isArray(t)||t instanceof Map||t instanceof Set||!!e?.mark&&((i=e.mark(t,$t))===$t.immutable||typeof i=="function")}function H0(t,e=[]){if(Object.hasOwnProperty.call(t,"key")){const i=t.parent.copy,o=Ae(Wn(i,t.key));if(o!==null&&o?.original!==t.original)return null;const r=t.parent.type===3,l=r?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(r&&i.size>l||Mr(i,l)))return null;e.push(l)}if(t.parent)return H0(t.parent,e);e.reverse();try{eA(t.copy,e)}catch{return null}return e}function ao(t){return Array.isArray(t)?1:t instanceof Map?2:t instanceof Set?3:0}function Wn(t,e){return ao(t)===2?t.get(e):t[e]}function Hr(t,e,i){ao(t)===2?t.set(e,i):t[e]=i}function _f(t,e){const i=Ae(t);return(i?Yt(i):t)[e]}function Xn(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function xf(t){if(t)for(;t.finalities.revoke.length>0;)t.finalities.revoke.pop()()}function so(t,e){return e?t:[""].concat(t).map(i=>{const o=`${i}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function eA(t,e){for(let i=0;i<e.length-1;i+=1){const o=e[i];if(t=Wn(ao(t)===3?Array.from(t):t,o),typeof t!="object")throw new Error(`Cannot resolve patch at '${e.join("/")}'.`)}return t}function tA(t){const e=Object.create(Object.getPrototypeOf(t));return Reflect.ownKeys(t).forEach(i=>{let o=Reflect.getOwnPropertyDescriptor(t,i);if(o.enumerable&&o.configurable&&o.writable){e[i]=t[i];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]}),Reflect.defineProperty(e,i,o)}),e}const nA=Object.prototype.propertyIsEnumerable;function V0(t,e){let i;if(Array.isArray(t))return Array.prototype.concat.call(t);if(t instanceof Set){if(!Sd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t.values())}return Set.prototype.difference?Set.prototype.difference.call(t,new Set):new Set(t.values())}else if(t instanceof Map){if(!Ed(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t)}return new Map(t)}else if(e?.mark&&(i=e.mark(t,$t),i!==void 0)&&i!==$t.mutable){if(i===$t.immutable)return tA(t);if(typeof i=="function"){if(e.enablePatches||e.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return i()}throw new Error(`Unsupported mark result: ${i}`)}else if(typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype){const o={};return Object.keys(t).forEach(r=>{o[r]=t[r]}),Object.getOwnPropertySymbols(t).forEach(r=>{nA.call(t,r)&&(o[r]=t[r])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function Mt(t){t.copy||(t.copy=V0(t.original,t.options))}function Sr(t){if(!pn(t))return Cd(t);if(Array.isArray(t))return t.map(Sr);if(t instanceof Map){const i=Array.from(t.entries()).map(([o,r])=>[o,Sr(r)]);if(!Ed(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Map(i)}if(t instanceof Set){const i=Array.from(t).map(Sr);if(!Sd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Set(i)}const e=Object.create(Object.getPrototypeOf(t));for(const i in t)e[i]=Sr(t[i]);return e}function _l(t){return Ni(t)?Sr(t):t}function En(t){var e;t.assignedMap=(e=t.assignedMap)!==null&&e!==void 0?e:new Map,t.operated||(t.operated=!0,t.parent&&En(t.parent))}function sy(){throw new Error("Cannot modify frozen object")}function Zo(t,e,i,o,r){{i=i??new WeakMap,o=o??[],r=r??[];const c=i.has(t)?i.get(t):t;if(o.length>0){const d=o.indexOf(c);if(c&&typeof c=="object"&&d!==-1)throw o[0]===c?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${r.slice(0,d).map((p,h)=>{if(typeof p=="symbol")return`[${p.toString()}]`;const y=o[h];return typeof p=="object"&&(y instanceof Map||y instanceof Set)?Array.from(y.keys()).indexOf(p):p}).join("/")}`);o.push(c),r.push(e)}else o.push(c)}if(Object.isFrozen(t)||Ni(t)){o.pop(),r.pop();return}switch(ao(t)){case 2:for(const[d,p]of t)Zo(d,d,i,o,r),Zo(p,d,i,o,r);t.set=t.clear=t.delete=sy;break;case 3:for(const d of t)Zo(d,d,i,o,r);t.add=t.clear=t.delete=sy;break;case 1:Object.freeze(t);let c=0;for(const d of t)Zo(d,c,i,o,r),c+=1;break;default:Object.freeze(t),Object.keys(t).forEach(d=>{const p=t[d];Zo(p,d,i,o,r)})}o.pop(),r.pop()}function Ad(t,e){const i=ao(t);if(i===0)Reflect.ownKeys(t).forEach(o=>{e(o,t[o],t)});else if(i===1){let o=0;for(const r of t)e(o,r,t),o+=1}else t.forEach((o,r)=>e(r,o,t))}function z0(t,e,i){if(Ni(t)||!pn(t,i)||e.has(t)||Object.isFrozen(t))return;const o=t instanceof Set,r=o?new Map:void 0;if(e.add(t),Ad(t,(l,c)=>{var d;if(Ni(c)){const p=Ae(c);Mt(p);const h=!((d=p.assignedMap)===null||d===void 0)&&d.size||p.operated?p.copy:p.original;Hr(o?r:t,l,h)}else z0(c,e,i)}),r){const l=t,c=Array.from(l);l.clear(),c.forEach(d=>{l.add(r.has(d)?r.get(d):d)})}}function iA(t,e){const i=t.type===3?t.setMap:t.copy;t.finalities.revoke.length>1&&t.assignedMap.get(e)&&i&&z0(Wn(i,e),t.finalities.handledSet,t.options)}function If(t){t.type===3&&t.copy&&(t.copy.clear(),t.setMap.forEach(e=>{t.copy.add(Cd(e))}))}function Df(t,e,i,o){if(t.operated&&t.assignedMap&&t.assignedMap.size>0&&!t.finalized){if(i&&o){const l=H0(t);l&&e(t,l,i,o)}t.finalized=!0}}function bd(t,e,i,o){const r=Ae(i);r&&(r.callbacks||(r.callbacks=[]),r.callbacks.push((l,c)=>{var d;const p=t.type===3?t.setMap:t.copy;if(Xn(Wn(p,e),i)){let h=r.original;r.copy&&(h=r.copy),If(t),Df(t,o,l,c),t.options.enableAutoFreeze&&(t.options.updatedValues=(d=t.options.updatedValues)!==null&&d!==void 0?d:new WeakMap,t.options.updatedValues.set(h,r.original)),Hr(p,e,h)}}),t.options.enableAutoFreeze&&r.finalities!==t.finalities&&(t.options.enableAutoFreeze=!1)),pn(i,t.options)&&t.finalities.draft.push(()=>{const l=t.type===3?t.setMap:t.copy;Xn(Wn(l,e),i)&&iA(t,e)})}function oA(t,e,i,o,r){let{original:l,assignedMap:c,options:d}=t,p=t.copy;p.length<l.length&&([l,p]=[p,l],[i,o]=[o,i]);for(let h=0;h<l.length;h+=1)if(c.get(h.toString())&&p[h]!==l[h]){const y=e.concat([h]),_=so(y,r);i.push({op:et.Replace,path:_,value:_l(p[h])}),o.push({op:et.Replace,path:_,value:_l(l[h])})}for(let h=l.length;h<p.length;h+=1){const y=e.concat([h]),_=so(y,r);i.push({op:et.Add,path:_,value:_l(p[h])})}if(l.length<p.length){const{arrayLengthAssignment:h=!0}=d.enablePatches;if(h){const y=e.concat(["length"]),_=so(y,r);o.push({op:et.Replace,path:_,value:l.length})}else for(let y=p.length;l.length<y;y-=1){const _=e.concat([y-1]),T=so(_,r);o.push({op:et.Remove,path:T})}}}function sA({original:t,copy:e,assignedMap:i},o,r,l,c){i.forEach((d,p)=>{const h=Wn(t,p),y=_l(Wn(e,p)),_=d?Mr(t,p)?et.Replace:et.Add:et.Remove;if(Xn(h,y)&&_===et.Replace)return;const T=o.concat(p),C=so(T,c);r.push(_===et.Remove?{op:_,path:C}:{op:_,path:C,value:y}),l.push(_===et.Add?{op:et.Remove,path:C}:_===et.Remove?{op:et.Add,path:C,value:h}:{op:et.Replace,path:C,value:h})})}function rA({original:t,copy:e},i,o,r,l){let c=0;t.forEach(d=>{if(!e.has(d)){const p=i.concat([c]),h=so(p,l);o.push({op:et.Remove,path:h,value:d}),r.unshift({op:et.Add,path:h,value:d})}c+=1}),c=0,e.forEach(d=>{if(!t.has(d)){const p=i.concat([c]),h=so(p,l);o.push({op:et.Add,path:h,value:d}),r.unshift({op:et.Remove,path:h,value:d})}c+=1})}function kr(t,e,i,o){const{pathAsArray:r=!0}=t.options.enablePatches;switch(t.type){case 0:case 2:return sA(t,e,i,o,r);case 1:return oA(t,e,i,o,r);case 3:return rA(t,e,i,o,r)}}const Ml=(t,e,i=!1)=>{if(typeof t=="object"&&t!==null&&(!pn(t,e)||i))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Uf={get size(){return Yt(Ae(this)).size},has(t){return Yt(Ae(this)).has(t)},set(t,e){const i=Ae(this),o=Yt(i);return(!o.has(t)||!Xn(o.get(t),e))&&(Mt(i),En(i),i.assignedMap.set(t,!0),i.copy.set(t,e),bd(i,t,e,kr)),this},delete(t){if(!this.has(t))return!1;const e=Ae(this);return Mt(e),En(e),e.original.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.copy.delete(t),!0},clear(){const t=Ae(this);if(this.size){Mt(t),En(t),t.assignedMap=new Map;for(const[e]of t.original)t.assignedMap.set(e,!1);t.copy.clear()}},forEach(t,e){const i=Ae(this);Yt(i).forEach((o,r)=>{t.call(e,this.get(r),r,this)})},get(t){var e,i;const o=Ae(this),r=Yt(o).get(t),l=((i=(e=o.options).mark)===null||i===void 0?void 0:i.call(e,r,$t))===$t.mutable;if(o.options.strict&&Ml(r,o.options,l),l||o.finalized||!pn(r,o.options)||r!==o.original.get(t))return r;const c=Td.createDraft({original:r,parentDraft:o,key:t,finalities:o.finalities,options:o.options});return Mt(o),o.copy.set(t,c),c},keys(){return Yt(Ae(this)).keys()},values(){const t=this.keys();return{[vl]:()=>this.values(),next:()=>{const e=t.next();return e.done?e:{done:!1,value:this.get(e.value)}}}},entries(){const t=this.keys();return{[vl]:()=>this.entries(),next:()=>{const e=t.next();if(e.done)return e;const i=this.get(e.value);return{done:!1,value:[e.value,i]}}}},[vl](){return this.entries()}},aA=Reflect.ownKeys(Uf),ry=(t,e,{isValuesIterator:i})=>()=>{var o,r;const l=e.next();if(l.done)return l;const c=l.value;let d=t.setMap.get(c);const p=Ae(d),h=((r=(o=t.options).mark)===null||r===void 0?void 0:r.call(o,d,$t))===$t.mutable;if(t.options.strict&&Ml(c,t.options,h),!h&&!p&&pn(c,t.options)&&!t.finalized&&t.original.has(c)){const y=Td.createDraft({original:c,parentDraft:t,key:c,finalities:t.finalities,options:t.options});t.setMap.set(c,y),d=y}else p&&(d=p.proxy);return{done:!1,value:i?d:[d,d]}},wl={get size(){return Ae(this).setMap.size},has(t){const e=Ae(this);if(e.setMap.has(t))return!0;Mt(e);const i=Ae(t);return!!(i&&e.setMap.has(i.original))},add(t){const e=Ae(this);return this.has(t)||(Mt(e),En(e),e.assignedMap.set(t,!0),e.setMap.set(t,t),bd(e,t,t,kr)),this},delete(t){if(!this.has(t))return!1;const e=Ae(this);Mt(e),En(e);const i=Ae(t);return i&&e.setMap.has(i.original)?(e.assignedMap.set(i.original,!1),e.setMap.delete(i.original)):(!i&&e.setMap.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.setMap.delete(t))},clear(){if(!this.size)return;const t=Ae(this);Mt(t),En(t);for(const e of t.original)t.assignedMap.set(e,!1);t.setMap.clear()},values(){const t=Ae(this);Mt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:ry(t,e,{isValuesIterator:!0})}},entries(){const t=Ae(this);Mt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:ry(t,e,{isValuesIterator:!1})}},keys(){return this.values()},[vl](){return this.values()},forEach(t,e){const i=this.values();let o=i.next();for(;!o.done;)t.call(e,o.value,o.value,this),o=i.next()}};Set.prototype.difference&&Object.assign(wl,{intersection(t){return Set.prototype.intersection.call(new Set(this.values()),t)},union(t){return Set.prototype.union.call(new Set(this.values()),t)},difference(t){return Set.prototype.difference.call(new Set(this.values()),t)},symmetricDifference(t){return Set.prototype.symmetricDifference.call(new Set(this.values()),t)},isSubsetOf(t){return Set.prototype.isSubsetOf.call(new Set(this.values()),t)},isSupersetOf(t){return Set.prototype.isSupersetOf.call(new Set(this.values()),t)},isDisjointFrom(t){return Set.prototype.isDisjointFrom.call(new Set(this.values()),t)}});const lA=Reflect.ownKeys(wl),B0={get(t,e,i){var o,r;const l=(o=t.copy)===null||o===void 0?void 0:o[e];if(l&&t.finalities.draftsCache.has(l))return l;if(e===G0)return t;let c;if(t.options.mark){const h=e==="size"&&(t.original instanceof Map||t.original instanceof Set)?Reflect.get(t.original,e):Reflect.get(t.original,e,i);if(c=t.options.mark(h,$t),c===$t.mutable)return t.options.strict&&Ml(h,t.options,!0),h}const d=Yt(t);if(d instanceof Map&&aA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Uf,"size").get.call(t.proxy):Uf[e].bind(t.proxy);if(d instanceof Set&&lA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(wl,"size").get.call(t.proxy):wl[e].bind(t.proxy);if(!Mr(d,e)){const h=oy(d,e);return h?"value"in h?h.value:(r=h.get)===null||r===void 0?void 0:r.call(t.proxy):void 0}const p=d[e];if(t.options.strict&&Ml(p,t.options),t.finalized||!pn(p,t.options))return p;if(p===_f(t.original,e)){if(Mt(t),t.copy[e]=Md({original:t.original[e],parentDraft:t,key:t.type===1?Number(e):e,finalities:t.finalities,options:t.options}),typeof c=="function"){const h=Ae(t.copy[e]);return Mt(h),En(h),h.copy}return t.copy[e]}return Ni(p)&&t.finalities.draftsCache.add(p),p},set(t,e,i){var o;if(t.type===3||t.type===2)throw new Error("Map/Set draft does not support any property assignment.");let r;if(t.type===1&&e!=="length"&&!(Number.isInteger(r=Number(e))&&r>=0&&(e===0||r===0||String(r)===String(e))))throw new Error("Only supports setting array indices and the 'length' property.");const l=oy(Yt(t),e);if(l?.set)return l.set.call(t.proxy,i),!0;const c=_f(Yt(t),e),d=Ae(c);return d&&Xn(d.original,i)?(t.copy[e]=i,t.assignedMap=(o=t.assignedMap)!==null&&o!==void 0?o:new Map,t.assignedMap.set(e,!1),!0):(Xn(i,c)&&(i!==void 0||Mr(t.original,e))||(Mt(t),En(t),Mr(t.original,e)&&Xn(i,t.original[e])?t.assignedMap.delete(e):t.assignedMap.set(e,!0),t.copy[e]=i,bd(t,e,i,kr)),!0)},has(t,e){return e in Yt(t)},ownKeys(t){return Reflect.ownKeys(Yt(t))},getOwnPropertyDescriptor(t,e){const i=Yt(t),o=Reflect.getOwnPropertyDescriptor(i,e);return o&&{writable:!0,configurable:t.type!==1||e!=="length",enumerable:o.enumerable,value:i[e]}},getPrototypeOf(t){return Reflect.getPrototypeOf(t.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(t,e){var i;return t.type===1?B0.set.call(this,t,e,void 0,t.proxy):(_f(t.original,e)!==void 0||e in t.original?(Mt(t),En(t),t.assignedMap.set(e,!1)):(t.assignedMap=(i=t.assignedMap)!==null&&i!==void 0?i:new Map,t.assignedMap.delete(e)),t.copy&&delete t.copy[e],!0)}};function Md(t){const{original:e,parentDraft:i,key:o,finalities:r,options:l}=t,c=ao(e),d={type:c,finalized:!1,parent:i,original:e,copy:null,proxy:null,finalities:r,options:l,setMap:c===3?new Map(e.entries()):void 0};(o||"key"in t)&&(d.key=o);const{proxy:p,revoke:h}=Proxy.revocable(c===1?Object.assign([],d):d,B0);if(r.revoke.push(h),d.proxy=p,i){const y=i;y.finalities.draft.push((_,T)=>{var C,b;const M=Ae(p);let w=y.type===3?y.setMap:y.copy;const R=Wn(w,o),D=Ae(R);if(D){let P=D.original;D.operated&&(P=Cd(R)),If(D),Df(D,kr,_,T),y.options.enableAutoFreeze&&(y.options.updatedValues=(C=y.options.updatedValues)!==null&&C!==void 0?C:new WeakMap,y.options.updatedValues.set(P,D.original)),Hr(w,o,P)}(b=M.callbacks)===null||b===void 0||b.forEach(P=>{P(_,T)})})}else{const y=Ae(p);y.finalities.draft.push((_,T)=>{If(y),Df(y,kr,_,T)})}return p}Td.createDraft=Md;function uA(t,e,i,o,r){var l;const c=Ae(t),d=(l=c?.original)!==null&&l!==void 0?l:t,p=!!e.length;if(c?.operated)for(;c.finalities.draft.length>0;)c.finalities.draft.pop()(i,o);const h=p?e[0]:c?c.operated?c.copy:c.original:t;return c&&xf(c),r&&Zo(h,h,c?.options.updatedValues),[h,i&&p?[{op:et.Replace,path:[],value:e[0]}]:i,o&&p?[{op:et.Replace,path:[],value:d}]:o]}function cA(t,e){var i;const o={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let r,l;e.enablePatches&&(r=[],l=[]);const d=((i=e.mark)===null||i===void 0?void 0:i.call(e,t,$t))===$t.mutable||!pn(t,e)?t:Md({original:t,parentDraft:null,finalities:o,options:e});return[d,(p=[])=>{const[h,y,_]=uA(d,p,r,l,e.enableAutoFreeze);return e.enablePatches?[h,y,_]:h}]}function Pf(t){const{rootDraft:e,value:i,useRawReturn:o=!1,isRoot:r=!0}=t;Ad(i,(l,c,d)=>{const p=Ae(c);if(p&&e&&p.finalities===e.finalities){t.isContainDraft=!0;const h=p.original;if(d instanceof Set){const y=Array.from(d);d.clear(),y.forEach(_=>d.add(l===_?h:_))}else Hr(d,l,h)}else typeof c=="object"&&c!==null&&(t.value=c,t.isRoot=!1,Pf(t))}),r&&(t.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function F0(t){var e;const i=Ae(t);if(!pn(t,i?.options))return t;const o=ao(t);if(i&&!i.operated)return i.original;let r;function l(){r=o===2?Ed(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):o===3?Array.from(i.setMap.values()):V0(t,i?.options)}if(i){i.finalized=!0;try{l()}finally{i.finalized=!1}}else r=t;if(Ad(r,(c,d)=>{if(i&&Xn(Wn(i.original,c),d))return;const p=F0(d);p!==d&&(r===t&&l(),Hr(r,c,p))}),o===3){const c=(e=i?.original)!==null&&e!==void 0?e:r;return Sd(c)?new Set(r):new(Object.getPrototypeOf(c)).constructor(r)}return r}function ay(t){if(!Ni(t))throw new Error(`current() is only used for Draft, parameter: ${t}`);return F0(t)}const fA=t=>function e(i,o,r){var l,c,d;if(typeof i=="function"&&typeof o!="function")return function(B,...Z){return e(B,Q=>i.call(this,Q,...Z),o)};const p=i,h=o;let y=r;if(typeof o!="function"&&(y=o),y!==void 0&&Object.prototype.toString.call(y)!=="[object Object]")throw new Error(`Invalid options: ${y}, 'options' should be an object.`);y=Object.assign(Object.assign({},t),y);const _=Ni(p)?ay(p):p,T=Array.isArray(y.mark)?((B,Z)=>{for(const Q of y.mark){if(typeof Q!="function")throw new Error(`Invalid mark: ${Q}, 'mark' should be a function.`);const ne=Q(B,Z);if(ne)return ne}}):y.mark,C=(l=y.enablePatches)!==null&&l!==void 0?l:!1,b=(c=y.strict)!==null&&c!==void 0?c:!1,w={enableAutoFreeze:(d=y.enableAutoFreeze)!==null&&d!==void 0?d:!1,mark:T,strict:b,enablePatches:C};if(!pn(_,w)&&typeof _=="object"&&_!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[R,D]=cA(_,w);if(typeof o!="function"){if(!pn(_,w))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[R,D]}let P;try{P=h(R)}catch(B){throw xf(Ae(R)),B}const J=B=>{const Z=Ae(R);if(!Ni(B)){if(B!==void 0&&!Xn(B,R)&&Z?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const ne=B?.[jC];if(ne){const j=ne[0];return w.strict&&typeof B=="object"&&B!==null&&Pf({rootDraft:Z,value:B,useRawReturn:!0}),D([j])}if(B!==void 0)return typeof B=="object"&&B!==null&&Pf({rootDraft:Z,value:B}),D([B])}if(B===R||B===void 0)return D([]);const Q=Ae(B);if(w===Q.options){if(Q.operated)throw new Error("Cannot return a modified child draft.");return D([ay(B)])}return D([B])};return P instanceof Promise?P.then(J,B=>{throw xf(Ae(R)),B}):J(P)},Rl=fA();Object.prototype.constructor.toString();function Y0(t,e){const i=Object.keys(t),o=Object.keys(e);return i.length===o.length&&Object.keys(t).every(r=>e.hasOwnProperty(r))}function ly(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(i=>e.hasOwnProperty(i)&&t[i]===e[i])}function Tl(t,e){return typeof t!="object"||typeof e!="object"||t===null||e===null?t===e:Y0(t,e)?Object.keys(t).every(i=>Tl(t[i],e[i])):!1}function wd(t){if(!Er(t))return t;const e={};for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=o);return e}function $0(t,e){if(!Er(t)||!Er(e))return e;const i=Object.assign({},t);for(const o of Object.keys(e)){if(e[o]===void 0)continue;if(e[o]===null){delete i[o];continue}const r=Er(t[o])&&Er(e[o]);i[o]=r?$0(t[o],e[o]):e[o]}return i}function Er(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function dA(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let l=0;l<e.length-1;l++){const c=e[l];(!(c in o)||typeof o[c]!="object")&&(o[c]=typeof e[l+1]=="number"?[]:{}),o=o[c]}const r=e[e.length-1];Array.isArray(o)&&typeof r=="number"?o.splice(r,0,i):o[r]=i}function uy(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let r=0;r<e.length-1;r++){const l=e[r];(!(l in o)||typeof o[l]!="object")&&(o[l]=typeof e[r+1]=="number"?[]:{}),o=o[l]}o[e[e.length-1]]=i}function J0(t,e){if(!t||e.length===0)return;const[i,...o]=e;if(i in t){if(o.length===0){Array.isArray(t)?t.splice(i,1):delete t[i];return}J0(t[i],o),hA(t[i])&&delete t[i]}}function hA(t){return t&&Object.keys(t).length===0}const cy=/ZULU|YEKT|YEKST|YAPT|YAKT|YAKST|XJT|WGT|WGST|WFT|WETDST|WET|WDT|WAT|WAST|WAKT|WADT|VUT|VOLT|VLAT|VLAST|VET|UZT|UZST|UYT|UYST|UTC|UT|ULAT|ULAST|UCT|TVT|TRUT|TOT|TMT|TKT|TJT|TFT|TAHT|SGT|SCT|SAST|SADT|RET|PYT|PYST|PWT|PST|PONT|PMST|PMDT|PKT|PKST|PHT|PGT|PETT|PETST|PET|PDT|OMST|OMSST|NZT|NZST|NZDT|NUT|NST|NPT|NOVT|NOVST|NFT|NDT|MYT|MVT|MUT|MUST|MST|MSK|MSD|MPT|MMT|MHT|MEZ|METDST|MET|MESZ|MEST|MDT|MAWT|MART|MAGT|MAGST|LKT|LINT|LIGT|LHST|LHDT|KST|KRAT|KRAST|KOST|KGT|KGST|KDT|JST|JAYT|IST|IRT|IRKT|IRKST|IOT|IDT|ICT|HST|HKT|GYT|GMT|GILT|GFT|GET|GEST|GAMT|GALT|FNT|FNST|FKT|FKST|FJT|FJST|FET|EST|EGT|EGST|EETDST|EET|EEST|EDT|EAT|EAST|EASST|DDUT|DAVT|CXT|CST|COT|CLT|CLST|CKT|CHUT|CHAST|CHADT|CETDST|CET|CEST|CDT|CCT|CAST|CADT|BTT|BST|BRT|BRST|BRA|BOT|BORT|BNT|BDT|BDST|AZT|AZST|AZOT|AZOST|AWST|AWSST|AST|ART|ARST|ANAT|ANAST|AMT|AMST|ALMT|ALMST|AKST|AKDT|AFT|AEST|AESST|AEDT|ADT|ACWST|ACT|ACST|ACSST|ACDT$/,pA={ZULU:0,YEKT:18e3,YEKST:21600,YAPT:36e3,YAKT:32400,YAKST:32400,XJT:21600,WGT:-10800,WGST:-7200,WFT:43200,WETDST:3600,WET:0,WDT:32400,WAT:3600,WAST:25200,WAKT:43200,WADT:28800,VUT:39600,VOLT:10800,VLAT:36e3,VLAST:36e3,VET:-14400,UZT:18e3,UZST:21600,UYT:-10800,UYST:-7200,UTC:0,UT:0,ULAT:28800,ULAST:32400,UCT:0,TVT:43200,TRUT:36e3,TOT:46800,TMT:18e3,TKT:46800,TJT:18e3,TFT:18e3,TAHT:-36e3,SGT:28800,SCT:14400,SAST:7200,SADT:37800,RET:14400,PYT:-14400,PYST:-10800,PWT:32400,PST:-28800,PONT:39600,PMST:-10800,PMDT:-7200,PKT:18e3,PKST:21600,PHT:28800,PGT:36e3,PETT:43200,PETST:43200,PET:-18e3,PDT:-25200,OMST:21600,OMSST:21600,NZT:43200,NZST:43200,NZDT:46800,NUT:-39600,NST:-12600,NPT:20700,NOVT:25200,NOVST:25200,NFT:-12600,NDT:-9e3,MYT:28800,MVT:18e3,MUT:14400,MUST:18e3,MST:-25200,MSK:10800,MSD:14400,MPT:36e3,MMT:23400,MHT:43200,MEZ:3600,METDST:7200,MET:3600,MESZ:7200,MEST:7200,MDT:-21600,MAWT:18e3,MART:-34200,MAGT:39600,MAGST:39600,LKT:19800,LINT:50400,LIGT:36e3,LHST:37800,LHDT:37800,KST:32400,KRAT:25200,KRAST:25200,KOST:39600,KGT:21600,KGST:21600,KDT:36e3,JST:32400,JAYT:32400,IST:7200,IRT:12600,IRKT:28800,IRKST:28800,IOT:21600,IDT:10800,ICT:25200,HST:-36e3,HKT:28800,GYT:-14400,GMT:0,GILT:43200,GFT:-10800,GET:14400,GEST:14400,GAMT:-32400,GALT:-21600,FNT:-7200,FNST:-3600,FKT:-10800,FKST:-10800,FJT:43200,FJST:46800,FET:10800,EST:-18e3,EGT:-3600,EGST:0,EETDST:10800,EET:7200,EEST:10800,EDT:-14400,EAT:10800,EAST:-21600,EASST:-21600,DDUT:36e3,DAVT:25200,CXT:25200,CST:-21600,COT:-18e3,CLT:-14400,CLST:-10800,CKT:-36e3,CHUT:36e3,CHAST:45900,CHADT:49500,CETDST:7200,CET:3600,CEST:7200,CDT:-18e3,CCT:28800,CAST:34200,CADT:37800,BTT:21600,BST:3600,BRT:-10800,BRST:-7200,BRA:-10800,BOT:-14400,BORT:28800,BNT:28800,BDT:21600,BDST:7200,AZT:14400,AZST:14400,AZOT:-3600,AZOST:0,AWST:28800,AWSST:32400,AST:-14400,ART:-10800,ARST:-10800,ANAT:43200,ANAST:43200,AMT:-14400,AMST:14400,ALMT:21600,ALMST:25200,AKST:-32400,AKDT:-28800,AFT:16200,AEST:36e3,AESST:39600,AEDT:39600,ADT:-10800,ACWST:31500,ACT:-18e3,ACST:34200,ACSST:37800,ACDT:37800};function mA(t){return new Date(t)}function gA(t){return new Date(t+"Z")}const yA=/^(\d+)[\./-](\d+)[\./-](\d+)$/;function vA(t){const e=t.match(yA);if(!e)return null;const[i,o,r,l]=e;return o<=0||r<=0||l<=0?null:o>999?new Date(Date.UTC(o,r-1,l,0,0,0,0)):new Date(Date.UTC(l,o-1,r,0,0,0,0))}function _A(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function TA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function SA(t){return new Date(t)}function EA(t){const e=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!t.match(e))throw new Error(`Unable to parse \`${t}\` as a date.`);const o=new Date(t+" UTC");return new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0,0))}function CA(t){const e=/^(.+T.+)([+-])(\d{2})$/,i=t.match(e);if(i){const[,o,r,l]=i,c=`${o}${r}${l}:00`;return new Date(c)}return null}function AA(t){const[e,i]=t.split(", "),[o,r,l]=e.split("/").map(Number),c=i.match(/(\d{1,2}):(\d{2}):(\d{2}) (AM|PM)/);if(!c)throw new Error(`Unable to parse time from: ${t}`);let[,d,p,h,y]=c;return d=Number(d),p=Number(p),h=Number(h),y==="PM"&&d!==12?d+=12:y==="AM"&&d===12&&(d=0),new Date(Date.UTC(l,o-1,r,d,p,h))}function bA(t){switch(t){case"epoch":return new Date(0);case"infinity":case"-infinity":case"today":case"tomorrow":case"yesterday":return null}}function MA(t){const e=t.match(cy);if(!e)return null;const[i]=e,o=pA[i],r=new Date(t.replace(cy,"Z"));return new Date(r.getTime()-o*1e3)}const wA=[vA,TA,EA,AA,SA,gA,CA,_A,mA,bA,MA];function RA(t,e){try{const i=t(e);return i instanceof Date&&!isNaN(i.getTime())?i:null}catch{return null}}function Lf(t){for(const e of wA){const i=RA(e,t);if(i)return i}return null}function NA(t){try{const e=JSON.parse(t);return typeof e=="string"?Lf(e):null}catch{return null}}function Hl(t){if(t!==void 0){if(t===null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Lf(t)||NA(t)||Lf(t.trim());if(!e)throw new Error(`Unable to parse \`${t}\` as a date.`);return e}else if(typeof t=="number")return new Date(t);throw new Error(`Invalid date value \`${t}\`. Expected a date, number, or string, got type ${typeof t}.`)}}function xA(t){return t.cardinality==="one"}function Rd(t){return t["value-type"]==="ref"}function Nd(t){return t["value-type"]==="blob"}function hs(t,e){return t[e]}function ps(t,e){return e.reduce((i,o)=>i&&i.get(o),t)}function hn(t,e){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.delete(e[0]);return}const[i,...o]=e;t.has(i)&&hn(t.get(i),o)}function Lt(t,e,i){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.set(e[0],i);return}const[o,...r]=e;let l=t.get(o);l||(l=new Map,t.set(o,l)),Lt(l,r,i)}function K0(t,e,i){const o=new Map,r=new Map,l=new Map;for(const c of e){let[d,p,h,y]=c;const _=hs(t,p);if(!_){console.warn("no such attr",d,t);continue}_["checked-data-type"]==="date"&&i&&(h=Hl(h),c[2]=h),Rd(_)&&Lt(l,[h,p,d],c),Lt(o,[d,p,h],c),Lt(r,[p,d,h],c)}return{eav:o,aev:r,vae:l}}function Q0(t){const e=new Map,i=new Map,o=new Map,r=new Map;for(const l of Object.values(t)){const c=l["forward-identity"],[d,p,h]=c,y=l["reverse-identity"];if(Lt(o,[p,h],l),Nd(l)&&Lt(e,[p,h],l),l["primary?"]&&Lt(i,[p],l),y){const[_,T,C]=y;Lt(r,[T,C],l)}}return{blobAttrs:e,primaryKeys:i,forwardIdents:o,revIdents:r}}function X0(t){return{__type:t.__type,attrs:t.attrs,triples:kt(t.eav,3),cardinalityInference:t.cardinalityInference,linkIndex:t.linkIndex,useDateObjects:t.useDateObjects}}function Z0(t){return Sl(t.attrs,t.triples,t.cardinalityInference,t.linkIndex,t.useDateObjects)}function IA(t,e){return ps(t.eav,[e])!==void 0}function xd(t){t.attrIndexes=Q0(t.attrs)}function Sl(t,e,i,o,r){const l=K0(t,e,r);return l.useDateObjects=r,l.attrs=t,l.attrIndexes=Q0(t),l.cardinalityInference=i,l.linkIndex=o,l.__type="store",l}function Vr(t,e){var i,o;let r;if(Array.isArray(e[0])){const[c,d]=e[0],p=t.aev.get(c);if(!p)return null;r=(i=kt(p,2).find(y=>y[2]===d))===null||i===void 0?void 0:i[0]}else r=e[0];if(!r)return null;const l=e[2];if(Array.isArray(l)&&l.length===2&&t.aev.get(l[0])){const[c,d]=l,p=t.aev.get(c);if(!p)return null;const y=(o=kt(p,2).find(M=>M[2]===d))===null||o===void 0?void 0:o[0];if(!y)return null;const[_,T,C,...b]=e;return[r,T,y,...b]}else{const[c,...d]=e;return[r,...d]}}function W0(t,e){const i=Vr(t,e);if(!i)return;const[o,r,l]=i,c=hs(t.attrs,r);c&&(hn(t.eav,[o,r,l]),hn(t.aev,[r,o,l]),Rd(c)&&hn(t.vae,[l,r,o]))}let DA=0;function j0(t,e,i){const[o,r,l]=i;let c;const d=ps(t.ea,[o,r,l]);return d&&(c=d[3]),c||Date.now()*10+DA++}function e_(t,e){var i;const o=Vr(t,e);if(!o)return;let[r,l,c]=o;const d=hs(t.attrs,l);if(!d)return;d["checked-data-type"]==="date"&&t.useDateObjects&&(c=Hl(c));const p=ps(t.eav,[r,l,c]),h=(i=p?.[3])!==null&&i!==void 0?i:j0(t,d,o),y=[r,l,c,h];xA(d)?(Lt(t.eav,[r,l],new Map([[c,y]])),Lt(t.aev,[l,r],new Map([[c,y]]))):(Lt(t.eav,[r,l,c],y),Lt(t.aev,[l,r,c],y)),Rd(d)&&Lt(t.vae,[c,l,r],y)}function UA(t,e){var i;const o=Vr(t,e);if(!o)return;const[r,l,c]=o,d=hs(t.attrs,l);if(!d)return;if(!Nd(d))throw new Error("merge operation is not supported for links");const p=ps(t.eav,[r,l]);if(!p)return;const h=(i=p.values().next())===null||i===void 0?void 0:i.value;if(!h)return;const y=h[2],_=$0(y,c),T=[r,l,_,j0(t,d,h)];Lt(t.eav,[r,l],new Map([[_,T]]))}function kf(t,e){var i,o;const[r,l]=e,c=Vr(t,[r]);if(!c)return;const[d]=c,p=t.eav.get(d);if(p){for(const y of p.keys()){const _=t.attrs[y];_&&_["on-delete-reverse"]==="cascade"&&kt(p.get(y),1).forEach(([T,C,b])=>{var M;return kf(t,[b,(M=_["reverse-identity"])===null||M===void 0?void 0:M[1]])}),(!l||!_||((i=_["forward-identity"])===null||i===void 0?void 0:i[1])===l)&&(hn(t.aev,[y,d]),hn(t.eav,[d,y]))}p.size===0&&hn(t.eav,[d])}const h=t.vae.get(d)&&kt(t.vae.get(d),2);h&&h.forEach(y=>{var _,T,C;const[b,M,w]=y,R=t.attrs[M];(!l||!R||((_=R["reverse-identity"])===null||_===void 0?void 0:_[1])===l)&&(hn(t.eav,[b,M,w]),hn(t.aev,[M,b,w]),hn(t.vae,[w,M,b])),R&&R["on-delete"]==="cascade"&&((T=R["reverse-identity"])===null||T===void 0?void 0:T[1])===l&&kf(t,[b,(C=R["forward-identity"])===null||C===void 0?void 0:C[1]])}),((o=t.vae.get(d))===null||o===void 0?void 0:o.size)===0&&hn(t.vae,[d])}function t_(t,e){const i=K0(t.attrs,e,t.useDateObjects);Object.keys(i).forEach(o=>{t[o]=i[o]})}function PA(t,[e]){t.attrs[e.id]=e,xd(t)}function n_(t){return kt(t.eav,3)}function LA(t,[e]){if(!t.attrs[e])return;const i=n_(t).filter(([o,r])=>r!==e);delete t.attrs[e],xd(t),t_(t,i)}function kA(t,[e]){const i=t.attrs[e.id];i&&(t.attrs[e.id]=Object.assign(Object.assign({},i),e),xd(t),t_(t,n_(t)))}function OA(t,e){const[i,...o]=e;switch(i){case"add-triple":e_(t,o);break;case"deep-merge-triple":UA(t,o);break;case"retract-triple":W0(t,o);break;case"delete-entity":kf(t,o);break;case"add-attr":PA(t,o);break;case"delete-attr":LA(t,o);break;case"update-attr":kA(t,o);break;case"restore-attr":break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${i}`)}}function kt(t,e,i=[]){if(!t||e===0)return i;if(e===1){for(const o of t.values())i.push(o);return i}for(const o of t.values())kt(o,e-1,i);return i}function dl(t,e,i){var o,r;const l=[];if(i?.hasOwnProperty("$not")){for(const d of e.keys())i.$not!==d&&l.push(e.get(d));return l}if(i?.hasOwnProperty("$isNull")){const{attrId:d,isNull:p,reverse:h}=i.$isNull;if(h)for(const y of e.keys()){const _=t.vae.get(y),T=!_||((o=_.get(d))===null||o===void 0?void 0:o.get(null))||!_.get(d);(p?T:!T)&&l.push(e.get(y))}else{const y=t.aev.get(d);for(const _ of e.keys()){const T=!y||((r=y.get(_))===null||r===void 0?void 0:r.get(null))||!y.get(_);(p?T:!T)&&l.push(e.get(_))}}return l}if(i?.$comparator)return kt(e,1).filter(i.$op);const c=i.in||i.$in||[i];for(const d of c){const p=e.get(d);p&&l.push(p)}return l}function qA(t,e,i){let o="";return t!==void 0&&(o+="e"),e!==void 0&&(o+="a"),i!==void 0&&(o+="v"),o}function GA(t,[e,i,o]){var r,l;switch(qA(e,i,o)){case"e":{const d=t.eav.get(e);return kt(d,2)}case"ea":{const d=(r=t.eav.get(e))===null||r===void 0?void 0:r.get(i);return kt(d,1)}case"eav":{const d=(l=t.eav.get(e))===null||l===void 0?void 0:l.get(i);return d?dl(t,d,o):[]}case"ev":{const d=t.eav.get(e);if(!d)return[];const p=[];for(const h of d.values())p.push(...dl(t,h,o));return p}case"a":{const d=t.aev.get(i);return kt(d,2)}case"av":{const d=t.aev.get(i);if(!d)return[];const p=[];for(const h of d.values())p.push(...dl(t,h,o));return p}case"v":{const d=[];for(const p of t.eav.values())for(const h of p.values())d.push(...dl(t,h,o));return d}default:return kt(t.eav,3)}}function HA(t,e,i){var o;const r={};for(const[l,c]of e.entries()){const d=(o=t.eav.get(i))===null||o===void 0?void 0:o.get(c.id),p=kt(d,1);for(const h of p)r[l]=h[2]}return r}function xi(t,e,i){var o;return(o=t.attrIndexes.forwardIdents.get(e))===null||o===void 0?void 0:o.get(i)}function i_(t,e,i){var o;return(o=t.attrIndexes.revIdents.get(e))===null||o===void 0?void 0:o.get(i)}function VA(t,e){return t.attrIndexes.blobAttrs.get(e)}function o_(t,e){var i;const o=t.attrIndexes.primaryKeys.get(e);return o||((i=t.attrIndexes.forwardIdents.get(e))===null||i===void 0?void 0:i.get("id"))}function zA(t,e){const i=Vr(t,e);if(!i)return;const[o,r,l]=i;if(hs(t.attrs,r))return ps(t.eav,[o,r])}function BA(t,e){const i=e.filter(([o,r,l,c,d])=>{if(o!=="add-triple"&&o!=="deep-merge-triple")return!0;const p=d?.mode;if(p!=="create"&&p!=="update")return!0;let h=!1;const y=hs(t.attrs,l);if(y){const _=o_(t,y["forward-identity"][1]);h=!!zA(t,[r,_.id,r])}return!(p==="create"&&h||p==="update"&&!h)});return Rl(t,o=>{i.forEach(r=>{OA(o,r)})})}function FA(t){return typeof t=="string"&&t.startsWith("?")}function YA(t,e,i){if(i.hasOwnProperty(t)){const o=i[t];return s_(o,e,i)}return Object.assign(Object.assign({},i),{[t]:e})}function fy(t,e,i){return t===e?i:null}function $A(t){switch(typeof t){case"string":return t.startsWith("?")?YA:fy;default:return fy}}const JA=["in","$in","$not","$isNull","$comparator"];function KA(t){for(const e of JA)if(t.hasOwnProperty(e))return!0;return!1}function s_(t,e,i){return i?typeof t=="object"?KA(t)?i:null:$A(t)(t,e,i):null}function QA(t,e,i){return t.reduce((o,r,l)=>{const c=e[l];return s_(r,c,o)},i)}function XA(t,e,i){return jA(t,e,i).map(o=>QA(e,o,i)).filter(o=>o)}function ZA(t,e,i){return e.or?e.or.patterns.flatMap(o=>Of(t,o,i)):e.and?e.and.patterns.reduce((o,r)=>Of(t,r,o),i):i.flatMap(o=>XA(t,e,o))}function Of(t,e,i=[{}]){return e.reduce((o,r)=>ZA(t,r,o),i)}function Id(t,e){return Array.isArray(e)?e.map(i=>Id(t,i)):FA(e)?t[e]:e}function WA(t,{find:e,where:i}){return Of(t,i).map(r=>Id(r,e))}function jA(t,e,i){return GA(t,Id(i,e))}const eb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ls(t){return typeof t=="string"&&eb.test(t)}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function tb(t,e=0){return(_t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]).toLowerCase()}let Tf;const nb=new Uint8Array(16);function ib(){if(!Tf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Tf=crypto.getRandomValues.bind(crypto)}return Tf(nb)}const ob=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dy={randomUUID:ob};function sb(t,e,i){if(dy.randomUUID&&!t)return dy.randomUUID();t=t||{};const o=t.random??t.rng?.()??ib();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,tb(o)}function hy(t){const e=t.replace(/-/g,""),i=[];for(let o=0;o<e.length;o+=2)i.push(parseInt(e.substring(o,o+2),16));return i}function rb(t,e){for(let i=0;i<t.length;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}function ab(t,e){return rb(hy(t),hy(e))}function ft(){return sb()}function lb(t,e){return t.localeCompare(e)}function ub(){let t=lb;if(typeof Intl=="object"&&Intl.hasOwnProperty("Collator"))try{t=Intl.Collator("en-US").compare}catch{}return t}const cb=ub();let fb=0;function wr(t){return Vl(`_${t}`,fb++)}function Vl(t,e){return`?${t}-${e}`}class us extends Error{constructor(e){super(e),this.name="AttrNotFoundError"}}function db(t,e){const i=o_(t,e);if(!i)throw new us(`Could not find id attr for ${e}`);return i}function py(t,e,i,o){return[hb(t,e,i,o)]}function hb(t,e,i,o){return[t(i,o),db(e,i).id,t(i,o),t("time",o)]}function pb(t,e,i){return t.map(o=>o===e?i:o)}function r_(t,e,i,o,r){const l=xi(e,i,r),c=i_(e,i,r),d=l||c;if(!d)throw new us(`Could not find attr for ${[i,r]}`);if(d["value-type"]!=="ref")throw new Error(`Attr ${d.id} is not a ref`);const[p,h]=d["forward-identity"],[y,_]=d["reverse-identity"],T=o+1,C=l?[t(h,o),d.id,t(_,T),wr("time")]:[t(h,T),d.id,t(_,o),wr("time")];return[l?_:h,T,C,d,!!l]}function my(t,e){if(typeof e!="string")return function(c){return!1};const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),r=new RegExp(`^${o}$`,t?void 0:"i");return function(c){return typeof c!="string"?!1:r.test(c)}}function mb(t,e){if(typeof e!="object"||e.hasOwnProperty("$in")||e.hasOwnProperty("in"))return e;const i=t["checked-data-type"]==="date";if(e.hasOwnProperty("$gt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>new Date(e.$gt)}:function(r){return r[2]>e.$gt}};if(e.hasOwnProperty("$gte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>=new Date(e.$gte)}:function(r){return r[2]>=e.$gte}};if(e.hasOwnProperty("$lt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<new Date(e.$lt)}:function(r){return r[2]<e.$lt}};if(e.hasOwnProperty("$lte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<=new Date(e.$lte)}:function(r){return r[2]<=e.$lte}};if(e.hasOwnProperty("$like")){const o=my(!0,e.$like);return{$comparator:!0,$op:function(l){return o(l[2])}}}if(e.hasOwnProperty("$ilike")){const o=my(!1,e.$ilike);return{$comparator:!0,$op:function(l){return o(l[2])}}}return e}function gb(t,e,i,o,r,l){const c=xi(e,i,r),d=i_(e,i,r),p=c||d;if(!p)throw new us(`No attr for etype = ${i} label = ${r}`);if(l?.hasOwnProperty("$isNull")){const h=xi(e,i,"id");if(!h)throw new us(`No attr for etype = ${i} label = id`);return[t(i,o),h.id,{$isNull:{attrId:p.id,isNull:l.$isNull,reverse:!c}},wr("time")]}return c?[t(i,o),p.id,mb(p,l),wr("time")]:[l,p.id,t(i,o),wr("time")]}function yb(t,e,i,o,r){const[l,c,d]=r.reduce((p,h)=>{const[y,_,T]=p,[C,b,M]=r_(t,e,y,_,h);return[C,b,[...T,M]]},[i,o,[]]);return[l,c,d]}function qf(t,e,i,o,r,l){const c=r.slice(0,r.length-1),d=r[r.length-1],[p,h,y]=yb(t,e,i,o,c),_=gb(t,e,p,h,d,l);return y.concat([_])}function vb(t,e){return e?[e].concat(t):t}function _b([t,e]){return t==="or"&&Array.isArray(e)}function Tb([t,e]){return t==="and"&&Array.isArray(e)}function Sb(t,e,i){return(o,r)=>{const l=t(o,r);return e==l?l:`${l}-${i}`}}function gy(t,e,i,o,r,l){const c=t(o,r),d=l.map((p,h)=>{const y=Sb(t,c,h);return a_(y,i,o,r,p)});return{[e]:{patterns:d,joinSym:c}}}function Eb(t){const e=[];for(let i=1;i<=t.length;i++)e.push(t.slice(0,i));return e}function yy(t,e,i,o,r){return Eb(r).map(l=>qf(t,e,i,o,l,{$isNull:!0}))}function a_(t,e,i,o,r){return Object.entries(r).flatMap(([l,c])=>{if(_b([l,c]))return gy(t,"or",e,i,o,c);if(Tb([l,c]))return gy(t,"and",e,i,o,c);if(l==="$entityIdStartsWith")return[];const d=l.split(".");if(c?.hasOwnProperty("$ne")&&(c=Object.assign(Object.assign({},c),{$not:c.$ne}),delete c.$ne),c?.hasOwnProperty("$not")){const p=qf(t,e,i,o,d,c),h=yy(t,e,i,o,d);return[{or:{patterns:[p,...h],joinSym:t(i,o)}}]}return c?.hasOwnProperty("$isNull")&&c.$isNull===!0&&d.length>1?[{or:{patterns:yy(t,e,i,o,d),joinSym:t(i,o)}}]:qf(t,e,i,o,d,c)})}function Cb(t,e,i,o){const r=Vl;return o?a_(r,t,e,i,o).concat(py(r,t,e,i)):py(r,t,e,i)}function Ab(t,e,i){return[t(e,i),t("time",i)]}function bb(t,e,i,o,r,l){const[c,d,p,h,y]=r_(t,e,i,o,r),_=pb(p,t(i,o),l);return[c,d,_,h,y]}function Mb(t,e,{etype:i,level:o,form:r},l){const c=Object.keys(r).filter(d=>d!=="$");return c.length?Object.entries(l).map(function([p,h]){return c.map(function(T){var C,b,M;const w=!!(e.cardinalityInference&&(!((M=(b=(C=e.linkIndex)===null||C===void 0?void 0:C[i])===null||b===void 0?void 0:b[T])===null||M===void 0)&&M.isSingular));try{const[R,D,P]=bb(t,e,i,o,T,p),J=u_(e,{etype:R,level:D,form:r[T],join:P}),B=w?J[0]:J;return{[T]:B}}catch(R){if(R instanceof us)return{[T]:w?void 0:[]};throw R}}).reduce(function(T,C){return Object.assign(Object.assign({},T),C)},h)}):Object.values(l)}function wb(t,e,i){return i==="string"?cb(t,e):t>e?1:-1}function Cr(t,e,i,o,r){return e===o||e==null&&o==null?ab(t,i):o==null?1:e==null?-1:wb(e,o,r)}function Nl([t,e],[i,o],r){return Cr(t,e,i,o,r)}function Gf(t){return t==null?t:new Date(t).getTime()}function Rb(t,e,i,o){var r;const[l,c,d,p]=t,h=i==="desc"?1:-1;if(((r=e["forward-identity"])===null||r===void 0?void 0:r[2])==="id")return Nl(o,[l,p],null)===h;const[y,_]=o,T=e["checked-data-type"],C=T==="date"?Gf(_):_,b=T==="date"?Gf(d):d;return Nl([y,C],[l,b],T)===h}function Nb(t,e){const i=e[1];return t.attrs[i]}function xb(t,e,i){const o=Object.keys(i)[0];return xi(t,e,o)}function Ib(t,e,i,o){if(i)return Nb(t,i);if(o)return xb(t,e,o)}function Db(t,e,i){var o,r;if(!Array.isArray(i.fields))return VA(t,e);const l=new Map;for(const c of i.fields){const d=xi(t,e,c),p=(o=d?.["forward-identity"])===null||o===void 0?void 0:o[2];p&&Nd(d)&&l.set(p,d)}if(!l.has("id")){const c=xi(t,e,"id"),d=(r=c?.["forward-identity"])===null||r===void 0?void 0:r[2];d&&l.set(d,c)}return l}function Ub(t,{etype:e,pageInfo:i,dq:o,form:r}){var l,c;const d=(l=r?.$)===null||l===void 0?void 0:l.order,p=l_(r),h=Pb(r);let y=WA(t,o);const _=i?.["start-cursor"],T=Ib(t,e,_,d);if(T&&((c=T?.["forward-identity"])===null||c===void 0?void 0:c[2])!=="id"){const M=T["checked-data-type"]==="date",w=T.id;y=y.map(([R])=>{var D,P,J,B,Z;let Q=(Z=(B=(J=(P=(D=t.eav.get(R))===null||D===void 0?void 0:D.get(w))===null||P===void 0?void 0:P.values())===null||J===void 0?void 0:J.next())===null||B===void 0?void 0:B.value)===null||Z===void 0?void 0:Z[2];return M&&(Q=Gf(Q)),[R,Q]})}y.sort(h==="asc"?function(w,R){return Nl(w,R,T?.["checked-data-type"])}:function(w,R){return Nl(R,w,T?.["checked-data-type"])});let C={};const b=Db(t,e,o);for(const M of y){const[w]=M;if(C[w]||!p&&_&&T&&Rb(_,T,h,M))continue;const R=HA(t,b,w);R&&(C[w]=R)}return C}function Pb(t){var e;const i=(e=t.$)===null||e===void 0?void 0:e.order;return i&&i[Object.keys(i)[0]]||"asc"}function l_(t){var e,i,o;const r=(e=t.$)===null||e===void 0?void 0:e.offset,l=(i=t.$)===null||i===void 0?void 0:i.before,c=(o=t.$)===null||o===void 0?void 0:o.after;return!r&&!l&&!c}function Lb(t,{etype:e,level:i,form:o,join:r,pageInfo:l}){var c,d,p,h,y;if(!l_(o)&&(!l||!l["start-cursor"]))return[];const _=vb(Cb(t,e,i,(c=o.$)===null||c===void 0?void 0:c.where),r),T=Ab(Vl,e,i),C=(d=o.$)===null||d===void 0?void 0:d.fields,b=Ub(t,{etype:e,pageInfo:l,form:o,dq:{where:_,find:T,fields:C}}),M=((p=o.$)===null||p===void 0?void 0:p.limit)||((h=o.$)===null||h===void 0?void 0:h.first)||((y=o.$)===null||y===void 0?void 0:y.last);if(M!=null){i>0&&console.warn("WARNING: Limits in child queries are only run client-side. Data returned from the server will not have a limit.");const w=Object.entries(b);return w.length<=M?b:Object.fromEntries(w.slice(0,M))}return b}function kb(t,e){try{return Lb(t,e)}catch(i){if(i instanceof us)return{};throw i}}function u_(t,e){const i=kb(t,e);return Mb(Vl,t,e,i)}function Ob(t){const e={};for(const[i,o]of Object.entries(t))e[i]={startCursor:o["start-cursor"],endCursor:o["end-cursor"],hasNextPage:o["has-next-page?"],hasPreviousPage:o["has-previous-page?"]};return e}function c_({store:t,pageInfo:e,aggregate:i},o){const l={data:Object.keys(o).reduce(function(d,p){return i?.[p]||p==="$$ruleParams"||(d[p]=u_(t,{etype:p,form:o[p],level:0,pageInfo:e?.[p]})),d},{})};return e&&(l.pageInfo=Ob(e)),i&&(l.aggregate=i),l}function qb(){const e={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(e))}const Gb=qb();function Hf(t,e,i){const o={__etype:t,__ops:i};return new Proxy(o,{get:(r,l)=>{if(l==="__ops")return i;if(l==="__etype")return t;if(Gb.has(l))return(c,d)=>Hf(t,e,[...i,d?[l,t,e,c,d]:[l,t,e,c]])}})}function xl(t){return t.startsWith("lookup__")}function f_(t){const[e,i,...o]=t.split("__");return[i,JSON.parse(o.join("__"))]}function Hb(t){return new Proxy({__etype:t},{get(e,i){if(i==="__etype")return t;const o=i;return xl(o)?Hf(t,f_(o),[]):Hf(t,o,[])}})}function Dd(){return new Proxy({},{get(t,e){return Hb(e)}})}Dd();function Vb(t){return t.__ops}function zb(t,e){const{attrIdMap:i,refSwapAttrIds:o}=t,r=[];for(const c of e){const d=i[c];if(d)r.push(d);else if(Array.isArray(c)&&c.length==2&&i[c[0]]){const[p,h]=c;r.push([i[p],h])}else r.push(c)}const[l]=e;if((l==="add-triple"||l==="retract-triple")&&o.has(e[2])){const c=r[1];r[1]=r[3],r[3]=c}return r}function St(t,e,i){return Object.values(t).find(o=>{const[r,l,c]=o["forward-identity"];return l===e&&c===i})}function ro(t,e,i){return Object.values(t).find(o=>{const r=o["reverse-identity"];if(!r)return!1;const[l,c,d]=r;return c===e&&d===i})}function Bb(t){if(Array.isArray(t))return t;const e=Object.entries(t);if(e.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return e[0]}function Vf(t,e,i){return i.indexOf(".")!==-1&&!St(t,e,i)}function zf(t){const[e,i,...o]=t.split(".");if(o.length>0||i!=="id")throw new Error(`${t} is not a valid lookup attribute.`);return e}function Fb(t,e,i){if(!Vf(t,e,i))return St(t,e,i);const o=zf(i),r=St(t,e,o)||ro(t,e,o);if(r&&r["value-type"]!=="ref")throw new Error(`${i} does not reference a valid link attribute.`);return r}function Bf(t){return typeof t=="string"&&!xl(t)?null:typeof t=="string"&&xl(t)?f_(t):Bb(t)}function Ot(t,e,i){const o=Bf(i);if(o===null)return i;const[r,l]=o,c=Fb(t,e,r);if(!c||!c["unique?"])throw new Error(`${r} is not a unique attribute.`);return[c.id,l]}function d_(t,e,i,o){const r=Ot(t,e,i);return Array.isArray(r)?[["add-triple",r,St(t,e,"id").id,r]].concat(o):o}function Yb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=St(t,e,l),h=ro(t,e,l);return d.map(y=>p?["add-triple",Ot(t,e,i),p.id,Ot(t,p["reverse-identity"][1],y)]:["add-triple",Ot(t,h["forward-identity"][1],y),h.id,Ot(t,e,i)])});return d_(t,e,i,r)}function $b({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=St(t,e,l),h=ro(t,e,l);return d.map(y=>p?["retract-triple",Ot(t,e,i),p.id,Ot(t,p["reverse-identity"][1],y)]:["retract-triple",Ot(t,h["forward-identity"][1],y),h.id,Ot(t,e,i)])});return d_(t,e,i,r)}function Jb(t,e,i){if(Array.isArray(i)){const[o,r]=i;for(const l of t||[]){const c=l?.aev.get(o);if(c){for(const[d,p,h]of kt(c,2))if(h===r)return!0}}}else for(const o of t||[]){const r=o?.eav.get(i);if(r){for(const l of r.keys())if(o.attrs[l]["forward-identity"][1]==e)return!0}}return!1}function h_({stores:t,attrs:e},[i,o,r,l]){return l?.upsert===!1?{mode:"update"}:l?.upsert===!0?null:Jb(t,i,o)?{mode:"update"}:null}function Kb(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=wd(c),h=Ot(o,r,l);return[["id",h]].concat(Object.entries(p)).map(([_,T])=>{const C=St(o,r,_);return C["checked-data-type"]==="date"&&t.useDateObjects&&(T=Hl(T)),["add-triple",h,C.id,T,{mode:"create"}]})}function Qb(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=wd(c),h=Ot(o,r,l),y=h_(t,[r,h,c,d]);return[["id",h]].concat(Object.entries(p)).map(([T,C])=>{const b=St(o,r,T);return b["checked-data-type"]==="date"&&t.useDateObjects&&(C=Hl(C)),["add-triple",h,b.id,C,...y?[y]:[]]})}function Xb({attrs:t},[e,i]){return[["delete-entity",Ot(t,e,i),e]]}function Zb(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=wd(c),h=Ot(o,r,l),y=h_(t,[r,h,c,d]),_=Object.entries(p).map(([C,b])=>{const M=St(o,r,C);return["deep-merge-triple",h,M.id,b,...y?[y]:[]]});return[["add-triple",h,St(o,r,"id").id,h,...y?[y]:[]]].concat(_)}function Wb({attrs:t},[e,i,o]){return[["rule-params",Ot(t,e,i),e,o]]}function jb(t){const[e,i,o,r,l]=t;if(!r)return t;const c=Object.assign({},r);return delete c.id,[e,i,o,c,...l?[l]:[]]}function eM(t,e){const[i,...o]=jb(e);switch(i){case"merge":return Zb(t,o);case"create":return Kb(t,o);case"update":return Qb(t,o);case"link":return Yb(t,o);case"unlink":return $b(t,o);case"delete":return Xb(t,o);case"ruleParams":return Wb(t,o);default:throw new Error(`unsupported action ${i}`)}}function tM(t){switch(t){case"string":case"date":case"boolean":case"number":return t;default:return}}function nM(t,e,i){var o,r;const l=(r=(o=t.entities[e])===null||o===void 0?void 0:o.attrs)===null||r===void 0?void 0:r[i];if(i==="id")return null;if(!l)throw new Error(`${e}.${i} does not exist in your schema`);const{unique:c,indexed:d}=l?.config,p=tM(l?.valueType);return{"index?":d,"unique?":c,"checked-data-type":p}}function hl(t,e,i,o){const r=t?nM(t,e,i):null,l=ft(),d=[ft(),e,i];return Object.assign(Object.assign({id:l,"forward-identity":d,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}function iM(t,e,i){return Object.values(t.links).find(r=>r.forward.on===e&&r.forward.label===i||r.reverse.on===e&&r.reverse.label===i)}function oM(t,e,i){const o=iM(t,e,i);if(!o)throw new Error(`Couldn't find the link ${e}.${i} in your schema`);const{forward:r,reverse:l}=o;return{"forward-identity":[ft(),r.on,r.label],"reverse-identity":[ft(),l.on,l.label],cardinality:r.has==="one"?"one":"many","unique?":l.has==="one","on-delete":r.onDelete,"on-delete-reverse":l.onDelete}}function vy(t,e,i,o){const r=t?oM(t,e,i):null,l=ft(),c=[ft(),e,i],d=[ft(),i,e];return Object.assign(Object.assign({id:l,"forward-identity":c,"reverse-identity":d,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}const sM=new Set(["create","update","merge","link","unlink"]),rM=new Set(["link","unlink"]),aM=new Set(["create","update","merge"]),lM=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Ff={"unique?":!0,"index?":!0},uM=Object.assign(Object.assign({},Ff),{cardinality:"one"});function cM(t){const e=[],[i,o,r,l]=t;if(!lM.has(i))return e;const c=Bf(r);if(c&&e.push({etype:o,lookupPair:c}),i==="link")for(const[d,p]of Object.entries(l)){const h=Array.isArray(p)?p:[p];for(const y of h){const _=Bf(y);_&&e.push({etype:o,lookupPair:_,linkLabel:d})}}return e}function fM({attrs:t,schema:e},i){var o,r;const[l,c,d]=[new Set,Object.assign({},t),[]];function p(_){c[_.id]=_,d.push(["add-attr",_]),l.add(_.id)}function h(_){_?.isUnsynced&&!l.has(_.id)&&(d.push(["add-attr",_]),l.add(_.id))}function y(_,T){const C=St(c,_,T),b=ro(c,_,T);h(C),h(b),!C&&!b&&p(vy(e,_,T,uM))}for(const _ of i)for(const{etype:T,lookupPair:C,linkLabel:b}of cM(_)){const M=C[0];if(b){y(T,b);const w=St(c,T,b),R=ro(c,T,b);h(w),h(R);const D=((o=w?.["reverse-identity"])===null||o===void 0?void 0:o[1])||((r=R?.["forward-identity"])===null||r===void 0?void 0:r[1])||b;if(Vf(c,D,M))y(D,zf(M));else{const P=St(c,D,M);P||p(hl(e,D,M,Ff)),h(P)}}else if(Vf(c,T,M))y(T,zf(M));else{const w=St(c,T,M);w||p(hl(e,T,M,Ff)),h(w)}}for(const _ of i){const[T,C,b,M]=_;if(sM.has(T)){const w=St(c,C,"id");h(w),w||p(hl(e,C,"id",{"unique?":!0}));for(const R of Object.keys(M)){const D=St(c,C,R);if(h(D),aM.has(T)&&(D||p(hl(e,C,R,R==="id"?{"unique?":!0}:null))),rM.has(T)){const P=ro(c,C,R);!D&&!P&&p(vy(e,C,R)),h(P)}}}}return[c,d]}function dM(t,e){const o=(Array.isArray(e)?e:[e]).flatMap(p=>Vb(p)),[r,l]=fM(t,o),c=Object.assign(Object.assign({},t),{attrs:r}),d=o.flatMap(p=>eM(c,p));return[...l,...d]}var Sn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function _y(t,e){typeof requestIdleCallback>"u"?t():requestIdleCallback(t,{timeout:e})}const Rr="__meta";class hM{constructor(e,i){}}class Yf{constructor(e){var i,o;this._subs=[],this._nextSave=null,this._nextGc=null,this._pendingSaveKeys=new Set,this._loadedKeys=new Set,this._version=0,this._meta={isLoading:!0,onLoadCbs:[],value:null,error:null,attempts:0},this._persister=e.persister,this._merge=e.merge,this.serialize=e.serialize,this.parse=e.parse,this._objectSize=e.objectSize,this._log=e.logger,this._saveThrottleMs=(i=e.saveThrottleMs)!==null&&i!==void 0?i:100,this._idleCallbackMaxWaitMs=(o=e.idleCallbackMaxWaitMs)!==null&&o!==void 0?o:1e3,this._gcOpts=e.gc,this.currentValue={},this._loadedKeys=new Set,this._loadingKeys={},this._initMeta(),e.preloadEntryCount&&this._preloadEntries(e.preloadEntryCount)}_initMeta(){return Sn(this,void 0,void 0,function*(){var e,i,o;this._meta.loadingPromise&&(yield this._meta.loadingPromise);try{const r=this._persister.getItem(Rr);this._meta.loadingPromise=r;const l=yield r;this._meta.isLoading=!1,this._meta.error=null,this._meta.loadingPromise=null,this._meta.attempts=0;const c=(i=(e=this._meta.value)===null||e===void 0?void 0:e.objects)!==null&&i!==void 0?i:{},d=l??{},p=(o=d.objects)!==null&&o!==void 0?o:{};this._meta.value=Object.assign(Object.assign({},d),{objects:Object.assign(Object.assign({},c),p)})}catch(r){this._meta.error=r,this._meta.attempts++,this._meta.loadingPromise=null}})}_getMeta(){return Sn(this,void 0,void 0,function*(){return this._meta.value?this._meta.value:this._meta.loadingPromise?(yield this._meta.loadingPromise,this._meta.value):(this._initMeta(),yield this._meta.loadingPromise,this._meta.value)})}_refreshMeta(){return Sn(this,void 0,void 0,function*(){return yield this._initMeta(),this._meta.value})}_preloadEntries(e){return Sn(this,void 0,void 0,function*(){const i=yield this.waitForMetaToLoad();if(!i)return;const o=Object.entries(i.objects);o.sort(([r,l],[c,d])=>d.updatedAt-l.updatedAt);for(const[r]of o.slice(0,e))this._loadKey(r)})}_getFromStorage(e){return Sn(this,void 0,void 0,function*(){try{const i=yield this._persister.getItem(e);return i&&this.parse(e,i)}catch(i){return console.error(`Unable to read from storage for key=${e}`,i),null}})}waitForKeyToLoad(e){return Sn(this,void 0,void 0,function*(){return this._loadedKeys.has(e)?this.currentValue[e]:(yield this._loadingKeys[e]||this._loadKey(e),this.currentValue[e])})}waitForMetaToLoad(){return Sn(this,void 0,void 0,function*(){return this._getMeta()})}unloadKey(e){this._loadedKeys.delete(e),delete this._loadingKeys[e],delete this.currentValue[e]}_loadKey(e){return Sn(this,void 0,void 0,function*(){if(this._loadedKeys.has(e)||e in this._loadingKeys)return;const i=this._getFromStorage(e);this._loadingKeys[e]=i;const o=yield i;if(delete this._loadingKeys[e],this._loadedKeys.add(e),o){const r=this._merge(e,o,this.currentValue[e]);r&&(this.currentValue[e]=r)}this.onKeyLoaded&&this.onKeyLoaded(e)})}_writeToStorage(e){var i,o;const r=[],l=e?.skipGc;if(this._meta.isLoading){const C=new Promise((b,M)=>{var w;setTimeout(()=>this._enqueuePersist(e?Object.assign(Object.assign({},e),{attempts:(e.attempts||0)+1}):{attempts:1}).then(b).catch(M),10+((w=e?.attempts)!==null&&w!==void 0?w:0)*1e3)});return r.push(C),Promise.all(r).then(b=>b.reduce((M,w)=>M+w,0))}const c=this._meta.value;if(!c)return Promise.resolve(0);const d=[],p=[];for(const C of this._pendingSaveKeys)C in this.currentValue?p.push(C):(d.push(C),delete c.objects[C]);for(const C of d){const b=this._persister.removeItem(C);r.push(b.then(()=>1)),this._loadedKeys.delete(C),this._pendingSaveKeys.delete(C)}const h=[],y=[[Rr,c]],_=(i=c.objects)!==null&&i!==void 0?i:{};c.objects=_;for(const C of p)if(this._loadedKeys.has(C)){const b=this.serialize(C,this.currentValue[C]);y.push([C,b]);const M=this._objectSize(b),w=(o=_[C])!==null&&o!==void 0?o:{createdAt:Date.now(),updatedAt:Date.now(),size:M};w.updatedAt=Date.now(),w.size=M,_[C]=w,this._pendingSaveKeys.delete(C)}else h.push(C);const T=this._persister.multiSet(y);r.push(T.then(()=>1));for(const C of h){const b=this._loadKey(C).then(()=>this._enqueuePersist(e));r.push(b)}return l||this.gc(),Promise.all(r).then(C=>C.reduce((b,M)=>b+M,0))}flush(){return Sn(this,void 0,void 0,function*(){return this._nextSave?(clearTimeout(this._nextSave),this._nextSave=null,this._writeToStorage()):void 0})}_gc(){return Sn(this,void 0,void 0,function*(){if(!this._gcOpts)return;const e=new Set(yield this._persister.getAllKeys());e.delete(Rr);const i=new Set(Object.keys(this.currentValue));for(const T of Object.keys(this._loadingKeys))i.add(T);for(const T of this._loadedKeys)i.add(T);const o=yield this._refreshMeta();if(!o){this._log.info("Could not gc because we were not able to load meta");return}const r=[],l={gcOpts:this._gcOpts,keys:e,sacredKeys:i,removed:[],metaRemoved:[],removedMissingCount:0,removedOldCount:0,removedThresholdCount:0,removedSizeCount:0};for(const T of e)i.has(T)||T in o.objects||(this._log.info("Lost track of key in meta",T),r.push(this._persister.removeItem(T)),l.removed.push(T),l.removedMissingCount++);const c=Date.now();for(const[T,C]of Object.entries(o.objects))!i.has(T)&&C.updatedAt<c-this._gcOpts.maxAgeMs&&(r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedOldCount++);const d=Object.entries(o.objects);d.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const p=d.filter(([T])=>!i.has(T));if(d.length>this._gcOpts.maxEntries)for(const[T]of p.slice(0,d.length-this._gcOpts.maxEntries))r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedThresholdCount++;const h=Object.entries(o.objects);h.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const y=h.filter(([T])=>!i.has(T));let _=h.reduce((T,[C,b])=>T+b.size,0);for(;_>0&&_>this._gcOpts.maxSize&&y.length;){const[[T,C]]=y.splice(0,1);_-=C.size,r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedSizeCount++}for(const T of Object.keys(o.objects))!e.has(T)&&!i.has(T)&&delete o.objects[T];return(l.removed.length||l.metaRemoved.length)&&r.push(this._enqueuePersist({skipGc:!0})),this._log.info("Completed GC",l),yield Promise.all(r),l})}gc(){this._nextGc||(this._nextGc=setTimeout(()=>{_y(()=>{this._nextGc=null,this._gc()},30*1e3)},1e3*60+Math.random()*500))}_enqueuePersist(e){return new Promise((i,o)=>{if(this._nextSave){i(0);return}this._nextSave=setTimeout(()=>{_y(()=>{this._nextSave=null,this._writeToStorage(e).then(i).catch(o)},this._idleCallbackMaxWaitMs)},this._saveThrottleMs)})}version(){return this._version}updateInPlace(e){this._version++;const[i,o]=Rl(this.currentValue,e,{enablePatches:!0});for(const r of o){const l=r.path[0];l&&typeof l=="string"&&(this._pendingSaveKeys.add(l),this._loadedKeys.has(l)||this._loadKey(l))}for(const r of Object.keys(i))if(!i[r])debugger;this.currentValue=i,this._enqueuePersist();for(const r of this._subs)r(this.currentValue);return i}subscribe(e){return this._subs.push(e),e(this.currentValue),()=>{this._subs=this._subs.filter(i=>i!==e)}}}var Jn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const pM=6,mM=["kv","querySubs","syncSubs"];function gM(t){return function(i){console.error("Error in IndexedDB event",{source:t,event:i})}}function yM(t){return Jn(this,void 0,void 0,function*(){return new Promise(e=>{const i=indexedDB.open(t);i.onerror=o=>{e(null)},i.onsuccess=o=>{const l=o.target.result;e(l)},i.onupgradeneeded=o=>{var r;(r=o.target.transaction)===null||r===void 0||r.abort(),e(null)}})})}function vM(t,e,i){return Jn(this,void 0,void 0,function*(){const o=typeof e=="string"?JSON.parse(e):e;if(!o)return;const r=new Set;return new Promise((l,c)=>{var d,p,h,y;const _={};for(const[b,M]of Object.entries(o)){const w=typeof M=="string"?JSON.parse(M):M;if(w.lastAccessed){const D={createdAt:w.lastAccessed,updatedAt:w.lastAccessed,size:(y=(h=(p=(d=w.result)===null||d===void 0?void 0:d.store)===null||p===void 0?void 0:p.triples)===null||h===void 0?void 0:h.length)!==null&&y!==void 0?y:0};_[b]=D}const R=i.put(w,b);r.add(R)}const T={objects:_},C=i.put(T,Rr);r.add(C);for(const b of r)b.onsuccess=()=>{r.delete(b),r.size===0&&l()},b.onerror=M=>{c(M)}})})}function Ty(t,e,i){return Jn(this,void 0,void 0,function*(){const o=i.put(e,t);return new Promise((r,l)=>{o.onsuccess=()=>r(),o.onerror=c=>l(c)})})}function _M(t,e){return Jn(this,void 0,void 0,function*(){const i=yield yM(`instant_${t}_5`);if(!i)return;const o=yield new Promise((y,_)=>{const b=i.transaction(["kv"],"readonly").objectStore("kv").openCursor();b.onerror=w=>{_(w)};const M=[];b.onsuccess=()=>{const w=b.result;if(w){const R=w.key,D=w.value;M.push([R,D]),w.continue()}else y(M)},b.onerror=w=>{_(w)}}),r=e.transaction(["kv","querySubs"],"readwrite"),l=r.objectStore("kv"),c=r.objectStore("querySubs"),d=[],p={objects:{}};for(const[y,_]of o)switch(y){case"querySubs":{const T=vM(y,_,c);d.push(T);break}default:{const T=Ty(y,_,l);d.push(T);const C={createdAt:Date.now(),updatedAt:Date.now(),size:0};p.objects[y]=C;break}}const h=Ty(Rr,p,l);d.push(h),yield Promise.all(d),yield new Promise((y,_)=>{r.oncomplete=T=>y(T),r.onerror=T=>_(T),r.onabort=T=>_(T)})})}const Sy=new Map;class p_ extends hM{constructor(e,i){super(e,i),this.dbName=`instant_${e}_${pM}`,this._storeName=i,this._appId=e,this._dbPromise=this._init()}_init(){return new Promise((e,i)=>{let o=!1;const r=indexedDB.open(this.dbName,1);r.onerror=l=>{i(l)},r.onsuccess=l=>{const d=l.target.result;if(o){const p=_M(this._appId,d).catch(h=>{gM("Error upgrading store from version 5 to 6.")(h)});Sy.set(this.dbName,p),p.then(()=>e(d)).catch(()=>e(d))}else{const p=Sy.get(this.dbName);p?p.then(()=>e(d)).catch(()=>e(d)):e(d)}},r.onupgradeneeded=l=>{o=!0,this._upgradeStore(l)}})}_upgradeStore(e){const o=e.target.result;for(const r of mM)o.objectStoreNames.contains(r)||o.createObjectStore(r)}getItem(e){return Jn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readonly").objectStore(this._storeName).get(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{d.result?o(d.result):o(null)}})})}setItem(e,i){return Jn(this,void 0,void 0,function*(){const o=yield this._dbPromise;return new Promise((r,l)=>{const p=o.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(i,e);p.onerror=h=>{l(h)},p.onsuccess=h=>{r()}})})}multiSet(e){return Jn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const l=i.transaction([this._storeName],"readwrite"),c=l.objectStore(this._storeName),d=new Set;for(const[p,h]of e){const y=c.put(h,p);d.add(y)}for(const p of d)p.onerror=h=>{l.abort(),r(h)},p.onsuccess=h=>{d.delete(p),d.size===0&&o()}})})}removeItem(e){return Jn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readwrite").objectStore(this._storeName).delete(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{o()}})})}getAllKeys(){return Jn(this,void 0,void 0,function*(){const e=yield this._dbPromise;return new Promise((i,o)=>{const c=e.transaction([this._storeName],"readonly").objectStore(this._storeName).getAllKeys();c.onerror=d=>{o(d)},c.onsuccess=d=>{i(c.result.filter(p=>typeof p=="string"))}})})}}var TM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class m_{static getIsOnline(){return TM(this,void 0,void 0,function*(){return navigator.onLine})}static listen(e){const i=()=>{e(!0)},o=()=>{e(!1)};return addEventListener("online",i),addEventListener("offline",o),()=>{removeEventListener("online",i),removeEventListener("offline",o)}}}class cs extends Error{constructor(e,i){super(e),this.hint=i;const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,cs),this.name="InstantError"}get[Symbol.toStringTag](){return"InstantError"}}var SM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class zl extends cs{constructor(e){var i;const o=((i=e.body)===null||i===void 0?void 0:i.message)||`API Error (${e.status})`;super(o,e.body.hint);const r=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,zl),this.name="InstantAPIError",this.status=e.status,this.body=e.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function mn(t,e){return SM(this,void 0,void 0,function*(){const i=yield fetch(t,e),o=yield i.json();return i.status===200?Promise.resolve(o):Promise.reject(new zl({status:i.status,body:o}))})}var ms=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function EM({apiURI:t,appId:e,email:i}){return mn(`${t}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":e,email:i})})}function CM(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i,email:o,code:r,refreshToken:l}){return yield mn(`${e}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object.assign({"app-id":i,email:o,code:r},l?{"refresh-token":l}:{}))})})}function AM(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield mn(`${e}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i,"refresh-token":o})})})}function bM(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i}){return yield mn(`${e}/runtime/auth/sign_in_guest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i})})})}function Ey(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i,code:o,codeVerifier:r,refreshToken:l}){return yield mn(`${e}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,code:o,code_verifier:r,refresh_token:l})})})}function MM(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i,nonce:o,idToken:r,clientName:l,refreshToken:c}){return yield mn(`${e}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,nonce:o,id_token:r,client_name:l,refresh_token:c})})})}function wM(t){return ms(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield mn(`${e}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,refresh_token:o})})})}var zr=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function RM(t){return zr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,file:r,refreshToken:l,contentType:c,contentDisposition:d}){const p={app_id:i,path:o,authorization:`Bearer ${l}`,"content-type":c||r.type};return d&&(p["content-disposition"]=d),yield mn(`${e}/storage/upload`,{method:"PUT",headers:p,body:r})})}function NM(t){return zr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield mn(`${e}/storage/files?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}function xM(t){return zr(this,arguments,void 0,function*({apiURI:e,appId:i,fileName:o,refreshToken:r,metadata:l={}}){const{data:c}=yield mn(`${e}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({app_id:i,filename:o})});return c})}function IM(t,e){return zr(this,void 0,void 0,function*(){return(yield fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok})}function DM(t){return zr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield mn(`${e}/storage/signed-download-url?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}let Ud=!1,g_=!1,y_=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(Ud=!!window.localStorage.getItem("devBackend"),g_=!!window.localStorage.getItem("__instantLogging"),y_=!!window.localStorage.getItem("__devtoolLocalDash"));function Cy(t,e){if(!e)return t;const i={};return e.forEach(o=>{i[o]=t[o]}),i}function UM(t,e,i){var o,r;const l={peers:{}};if(e&&"user"in e?e.user:!0){const d=Cy((o=t.user)!==null&&o!==void 0?o:{},e?.keys);l.user=Object.assign(Object.assign({},d),{peerId:i})}for(const d of Object.keys((r=t.peers)!==null&&r!==void 0?r:{})){const p=e?.peers===void 0,h=Array.isArray(e?.peers)&&e?.peers.includes(d);if(p||h){const y=Cy(t.peers[d],e?.keys);l.peers[d]=Object.assign(Object.assign({},y),{peerId:d})}}return l}function PM(t,e){if(t.isLoading!==e.isLoading||t.error!==e.error||(t.user||e.user)&&(!t.user||!e.user||!ly(t.user,e.user))||!Y0(t.peers,e.peers))return!0;for(const o of Object.keys(t.peers))if(!ly(t.peers[o],e.peers[o]))return!0;return!1}class Ay{constructor(){this.promise=new Promise((e,i)=>{this._resolve=e,this._reject=i})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function v_(t,e=[]){t.forEach(i=>{const{data:o}=i,{"datalog-result":r}=o,{"join-rows":l}=r;for(const c of l)for(const d of c)e.push(d);v_(i["child-nodes"],e)})}function by(t){const e=[];return v_(t,e),e}function My(t){return Object.values(t.links).reduce((e,i)=>{var o,r,l,c;return(o=e[l=i.forward.on])!==null&&o!==void 0||(e[l]={}),e[i.forward.on][i.forward.label]={isForward:!0,isSingular:i.forward.has==="one",link:i},(r=e[c=i.reverse.on])!==null&&r!==void 0||(e[c]={}),e[i.reverse.on][i.reverse.label]={isForward:!1,isSingular:i.reverse.has==="one",link:i},e},{})}const Pd="v0.22.73";function LM(t,e){return{info:t?(...i)=>console.info(...i,e()):()=>{},debug:t?(...i)=>console.debug(...i,e()):()=>{},error:t?(...i)=>console.error(...i,e()):()=>{}}}class Kn{constructor(e,i,o,r={indexed:!1,unique:!1}){this.valueType=e,this.required=i,this.isIndexed=o,this.config=r,this.metadata={}}clientRequired(){return new Kn(this.valueType,!1,this.isIndexed,this.config)}optional(){return new Kn(this.valueType,!1,this.isIndexed,this.config)}unique(){return new Kn(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new Kn(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class Fe extends Error{constructor(e,i){const o=i?`At path '${i}': ${e}`:e;super(o),this.name="QueryValidationError"}}const wy=["where","order","limit","last","first","offset","after","before","fields","aggregate"],kM=t=>t.valueType||"unknown",__=(t,e,i=!1)=>{if(i||t==null)return!0;switch(e){case"string":return typeof t=="string";case"number":return typeof t=="number"&&!isNaN(t);case"boolean":return typeof t=="boolean";case"date":return t instanceof Date||typeof t=="string"||typeof t=="number";default:return!0}},OM=(t,e,i,o,r,l,c)=>{const d=l.valueType==="json",p=(h,y,_)=>{if(!__(_,y,d))throw new Fe(`Invalid value for operator '${h}' on attribute '${o}' in entity '${r}'. Expected ${y}, but received: ${typeof _}`,c)};switch(t){case"in":case"$in":if(!Array.isArray(e))throw new Fe(`Operator '${t}' for attribute '${o}' in entity '${r}' must be an array, but received: ${typeof e}`,c);for(const h of e)p(t,i,h);break;case"$not":case"$ne":case"$gt":case"$lt":case"$gte":case"$lte":p(t,i,e);break;case"$like":case"$ilike":if(p(t,"string",e),t==="$ilike"&&!l.isIndexed)throw new Fe(`Operator '${t}' can only be used with indexed attributes, but '${o}' in entity '${r}' is not indexed`,c);break;case"$isNull":p(t,"boolean",e);break;default:throw new Fe(`Unknown operator '${t}' for attribute '${o}' in entity '${r}'`,c)}},is=(t,e,i,o,r)=>{const l=kM(i),c=i.valueType==="json";if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(c)return;const p=t;for(const[h,y]of Object.entries(p))OM(h,y,l,e,o,i,`${r}.${h}`)}else if(!__(t,l,c))throw new Fe(`Invalid value for attribute '${e}' in entity '${o}'. Expected ${l}, but received: ${typeof t}`,r)},qM=(t,e,i,o,r)=>{const l=t.split(".");if(l.length<2)throw new Fe(`Invalid dot notation path '${t}'. Must contain at least one dot.`,r);let c=i;for(let y=0;y<l.length-1;y++){const _=l[y],T=o.entities[c];if(!T)throw new Fe(`Entity '${c}' does not exist in schema while traversing dot notation path '${t}'.`,r);const C=T.links[_];if(!C){const b=Object.keys(T.links);throw new Fe(`Link '${_}' does not exist on entity '${c}' in dot notation path '${t}'. Available links: ${b.length>0?b.join(", "):"none"}`,r)}c=C.entityName}const d=l[l.length-1],p=o.entities[c];if(!p)throw new Fe(`Target entity '${c}' does not exist in schema for dot notation path '${t}'.`,r);if(d==="id"){if(typeof e=="string"&&!ls(e))throw new Fe(`Invalid value for id field in entity '${c}'. Expected a UUID, but received: ${e}`,r);is(e,t,new Kn("string",!1,!0),i,r);return}const h=p.attrs[d];if(Object.keys(p.links).includes(d)){if(typeof e=="string"&&!ls(e))throw new Fe(`Invalid value for link '${d}' in entity '${c}'. Expected a UUID, but received: ${e}`,r);is(e,t,new Kn("string",!1,!0),i,r);return}if(!h){const y=Object.keys(p.attrs);throw new Fe(`Attribute '${d}' does not exist on entity '${c}' in dot notation path '${t}'. Available attributes: ${y.length>0?y.join(", ")+", id":"id"}`,r)}is(e,t,h,i,r)},T_=(t,e,i,o)=>{for(const[r,l]of Object.entries(t)){if(r==="or"||r==="and"){if(Array.isArray(l))for(const h of l)typeof h=="object"&&h!==null&&T_(h,e,i,`${o}.${r}[${h}]`);continue}if(r==="id"){is(l,"id",new Kn("string",!1,!0),e,`${o}.id`);continue}if(r.includes(".")){qM(r,l,e,i,`${o}.${r}`);continue}const c=i.entities[e];if(!c)continue;const d=c.attrs[r],p=c.links[r];if(!d&&!p){const h=Object.keys(c.attrs),y=Object.keys(c.links);throw new Fe(`Attribute or link '${r}' does not exist on entity '${e}'. Available attributes: ${h.length>0?h.join(", "):"none"}. Available links: ${y.length>0?y.join(", "):"none"}`,`${o}.${r}`)}if(d)is(l,r,d,e,`${o}.${r}`);else if(p){if(typeof l=="string"&&!ls(l))throw new Fe(`Invalid value for link '${r}' in entity '${e}'. Expected a UUID, but received: ${l}`,`${o}.${r}`);const h=new Kn("string",!1,!0);is(l,r,h,e,`${o}.${r}`)}}},GM=(t,e,i,o,r=0)=>{for(const c of Object.keys(t))if(!wy.includes(c))throw new Fe(`Invalid query parameter '${c}' in $ object. Valid parameters are: ${wy.join(", ")}. Found: ${c}`,o);const l=["offset","before","after","first","last"];for(const c of l)if(t[c]!==void 0&&r>0)throw new Fe(`'${c}' can only be used on top-level namespaces. It cannot be used in nested queries.`,o);if(t.where&&i){if(typeof t.where!="object"||t.where===null)throw new Fe(`'where' clause must be an object in entity '${e}', but received: ${typeof t.where}`,o?`${o}.where`:void 0);T_(t.where,e,i,o?`${o}.where`:"where")}},S_=(t,e,i,o,r=0)=>{var l;if(!t||typeof t!="object")throw new Fe(`Query part for entity '${e}' must be an object, but received: ${typeof t}`,o);for(const c of Object.keys(t))if(c!=="$"){if(i&&!(c in i.entities[e].links)){const p=Object.keys(i.entities[e].links);throw new Fe(`Link '${c}' does not exist on entity '${e}'. Available links: ${p.length>0?p.join(", "):"none"}`,`${o}.${c}`)}const d=t[c];if(typeof d=="object"&&d!==null){const p=(l=i?.entities[e].links[c])===null||l===void 0?void 0:l.entityName;p&&S_(d,p,i,`${o}.${c}`,r+1)}}else{const d=t[c];if(typeof d!="object"||d===null)throw new Fe(`Query parameter '$' must be an object in entity '${e}', but received: ${typeof d}`,`${o}.$`);GM(d,e,i,`${o}.$`,r)}},Ry=(t,e)=>{if(typeof t!="object"||t===null)throw new Fe(`Query must be an object, but received: ${typeof t}${t===null?" (null)":""}`);if(Array.isArray(t))throw new Fe(`Query must be an object, but received: ${typeof t}`);const i=t;for(const o of Object.keys(i)){if(Array.isArray(t[o]))throw new Fe(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(typeof o!="string")throw new Fe(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(o!=="$$ruleParams"){if(e&&!e.entities[o]){const r=Object.keys(e.entities);throw new Fe(`Entity '${o}' does not exist in schema. Available entities: ${r.length>0?r.join(", "):"none"}`,o)}S_(i[o],o,e,o,0)}}},Ny=t=>typeof t!="string"?!1:xl(t)?!0:ls(t);class rn extends Error{constructor(e){super(e),this.name="TransactionValidationError"}}const E_=t=>t.length>0?t.join(", "):"none",HM=(t,e)=>new rn(`Entity '${t}' does not exist in schema. Available entities: ${E_(e)}`),xy={string:t=>typeof t=="string",number:t=>typeof t=="number"&&!isNaN(t),boolean:t=>typeof t=="boolean",date:t=>t instanceof Date||typeof t=="string"||typeof t=="number",json:()=>!0},VM=(t,e)=>{var i,o;return t==null?!0:(o=(i=xy[e.valueType])===null||i===void 0?void 0:i.call(xy,t))!==null&&o!==void 0?o:!1},C_=(t,e)=>{const i=e.entities[t];if(!i)throw HM(t,Object.keys(e.entities));return i},Sf=(t,e,i)=>{const o=C_(t,i);if(typeof e!="object"||e===null)throw new rn(`Arguments for data operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(r==="id")continue;const c=o.attrs[r];if(c&&!VM(l,c))throw new rn(`Invalid value for attribute '${r}' in entity '${t}'. Expected ${c.valueType}, but received: ${typeof l}`)}},Iy=(t,e,i)=>{const o=C_(t,i);if(typeof e!="object"||e===null)throw new rn(`Arguments for link operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(!o.links[r]){const d=Object.keys(o.links);throw new rn(`Link '${r}' does not exist on entity '${t}'. Available links: ${E_(d)}`)}if(l!=null){if(Array.isArray(l)){for(const d of l)if(!Ny(d))throw new rn(`Invalid entity ID in link '${r}' for entity '${t}'. Expected a UUID or a lookup, but received: ${d}`)}else if(!Ny(l))throw new rn(`Invalid UUID in link '${r}' for entity '${t}'. Expected a UUID, but received: ${l}`)}}},zM={create:Sf,update:Sf,merge:Sf,link:Iy,unlink:Iy,delete:()=>{}},BM=(t,e)=>{if(!e)return;const[i,o,r,l]=t;if(!Array.isArray(r)&&!ls(r))throw new rn(`Invalid id for entity '${o}'. Expected a UUID, but received: ${r}`);if(typeof o!="string")throw new rn(`Entity name must be a string, but received: ${typeof o}`);const c=zM[i];c&&l!==void 0&&c(o,l,e)},FM=(t,e)=>{const i=Array.isArray(t)?t:[t];for(const o of i){if(!o||typeof o!="object")throw new rn(`Transaction chunk must be an object, but received: ${typeof o}`);if(!Array.isArray(o.__ops))throw new rn(`Transaction chunk must have __ops array, but received: ${typeof o.__ops}`);for(const r of o.__ops){if(!Array.isArray(r))throw new rn(`Transaction operation must be an array, but received: ${typeof r}`);BM(r,e)}}};var Dy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};let A_=0;class Uy{constructor(e){this.type="ws",this.id=`${this.type}_${A_++}`,this.conn=new WebSocket(e),this.conn.onopen=i=>{this.onopen&&this.onopen({target:this})},this.conn.onmessage=i=>{this.onmessage&&this.onmessage({target:this,message:JSON.parse(i.data.toString())})},this.conn.onclose=i=>{this.onclose&&this.onclose({target:this})},this.conn.onerror=i=>{this.onerror&&this.onerror({target:this})}}close(){this.conn.close()}isOpen(){var e;return this.conn.readyState===((e=WebSocket.OPEN)!==null&&e!==void 0?e:1)}isConnecting(){var e;return this.conn.readyState===((e=WebSocket.CONNECTING)!==null&&e!==void 0?e:0)}send(e){return this.conn.send(JSON.stringify(e))}}class YM{constructor(e,i){this.type="sse",this.initParams=null,this.sendQueue=[],this.closeFired=!1,this.sseInitTimeout=void 0,this.id=`${this.type}_${A_++}`,this.url=i,this.ES=e,this.conn=new e(i),this.sseInitTimeout=setTimeout(()=>{this.initParams||this.handleError()},1e4),this.conn.onmessage=o=>{const r=JSON.parse(o.data);if(r.op==="sse-init"){this.initParams={machineId:r["machine-id"],sessionId:r["session-id"],sseToken:r["sse-token"]},this.onopen&&this.onopen({target:this}),clearTimeout(this.sseInitTimeout);return}this.onmessage&&this.onmessage({target:this,message:r})},this.conn.onerror=o=>{this.handleError()}}handleError(){try{this.onerror&&this.onerror({target:this})}finally{this.handleClose()}}handleClose(){this.conn.close(),this.onclose&&!this.closeFired&&(this.closeFired=!0,this.onclose({target:this}))}postMessages(e){return Dy(this,void 0,void 0,function*(){var i,o,r;try{(yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machine_id:(i=this.initParams)===null||i===void 0?void 0:i.machineId,session_id:(o=this.initParams)===null||o===void 0?void 0:o.sessionId,sse_token:(r=this.initParams)===null||r===void 0?void 0:r.sseToken,messages:e})})).ok||this.handleError()}catch{this.handleError()}})}flushQueue(){return Dy(this,void 0,void 0,function*(){if(this.sendPromise||!this.sendQueue.length)return;const e=this.sendQueue;this.sendQueue=[];const i=this.postMessages(e);this.sendPromise=i,i.then(()=>{this.sendPromise=null,this.flushQueue()})})}send(e){if(!this.isOpen()||!this.initParams)throw this.isConnecting()?new Error("Failed to execute 'send' on 'EventSource': Still in CONNECTING state."):this.conn.readyState===this.ES.CLOSED?new Error("EventSource is already in CLOSING or CLOSED state."):new Error("EventSource is in invalid state.");this.sendQueue.push(e),this.flushQueue()}isOpen(){return this.conn.readyState===this.ES.OPEN&&this.initParams!==null}isConnecting(){return this.conn.readyState===this.ES.CONNECTING||this.conn.readyState===this.ES.OPEN&&this.initParams===null}close(){this.handleClose()}}var Py=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function $M(t,e){const i=t.values;if(i)for(const o of i.entities||[])o.store.useDateObjects=e,o.store.attrs=i.attrs,o.store=Z0(o.store);return t}function JM(t,e){var i,o;if(!((i=e.values)===null||i===void 0)&&i.entities){const r=[];for(const l of(o=e.values)===null||o===void 0?void 0:o.entities){const c=X0(l.store);delete c.attrs,r.push(Object.assign(Object.assign({},l),{store:c}))}return Object.assign(Object.assign({},e),{values:Object.assign(Object.assign({},e.values),{entities:r})})}else return e}function KM(t,e,i){var o,r;const l=(o=e?.state)===null||o===void 0?void 0:o.txId,c=(r=i?.state)===null||r===void 0?void 0:r.txId;return l&&(!c||l>c)?e:c&&(!l||c>l)?i:e||i}function Ef(t,e){return c_({store:e,pageInfo:null,aggregate:null},t.query).data[t.table][0]}function Ly(t,e,i){var o;const r=(o=xi(e,t.table,"id"))===null||o===void 0?void 0:o.id;if(!r)return-1;const l=ps(e.eav,[i,r,i]);return l?l[3]:-1}function ky(t,e){for(const{action:i,triple:o}of e)switch(i){case"added":e_(t,o);break;case"removed":W0(t,o);break}}function QM(t,e){var i,o,r,l;const c={};for(const{action:d,triple:p}of e){const[h,y,_]=p,T=(o=(i=t.attrs[y])===null||i===void 0?void 0:i["forward-identity"])===null||o===void 0?void 0:o[2];if(!T)continue;const C=(r=c[h])!==null&&r!==void 0?r:{};c[h]=C;const b=(l=C[T])!==null&&l!==void 0?l:{};switch(C[T]=b,d){case"added":b.newValue=_;break;case"removed":b.oldValue===void 0&&(b.oldValue=_);break}}for(const d of Object.keys(c)){const{oldValue:p,newValue:h}=c[d];p===h&&delete c[d]}return c}function pl(t,e){return{[t.table]:e.map(i=>i.entity)}}function XM(t,e){var i;if(t.orderFieldType)return t.orderFieldType;const o=t.orderField==="serverCreatedAt"?"number":(i=xi(e([]),t.table,t.orderField))===null||i===void 0?void 0:i["checked-data-type"];return t.orderFieldType=o,o}function ZM(t,e,i){const o=e;if(t.orderField==="serverCreatedAt"){i.sort(t.orderDirection==="asc"?function(c,d){return Cr(c.entity.id,c.serverCreatedAt,d.entity.id,d.serverCreatedAt,o)}:function(c,d){return Cr(d.entity.id,d.serverCreatedAt,c.entity.id,c.serverCreatedAt,o)});return}const r=t.orderField;i.sort(t.orderDirection==="asc"?function(c,d){return Cr(c.entity.id,c.entity[r],d.entity.id,d.entity[r],o)}:function(c,d){return Cr(d.entity.id,d.entity[r],c.entity.id,c.entity[r],o)})}var eo;(function(t){t.InitialSyncBatch="InitialSyncBatch",t.InitialSyncComplete="InitialSyncComplete",t.LoadFromStorage="LoadFromStorage",t.SyncTransaction="SyncTransaction",t.Error="Error"})(eo||(eo={}));class WM{constructor(e,i,o,r,l){this.callbacks={},this.idToHash={},this.trySend=e,this.config=o,this.log=r,this.createStore=l,this.subs=new Yf({persister:i,merge:KM,serialize:JM,parse:(c,d)=>$M(d,this.config.useDateObjects),objectSize:c=>{var d;return((d=c.values)===null||d===void 0?void 0:d.entities.length)||0},logger:r,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}})}beforeUnload(){this.subs.flush()}subscribe(e,i){const o=Tt(e);return this.callbacks[o]=this.callbacks[o]||[],this.callbacks[o].push(i),this.initSubscription(e,o,i),r=>{this.unsubscribe(o,i,r?.keepSubscription)}}unsubscribe(e,i,o){const r=(this.callbacks[e]||[]).filter(l=>l!==i);if(this.callbacks[e]=r,!r.length){delete this.callbacks[e];const l=this.subs.currentValue[e];l?.state&&this.clearSubscriptionData(l.state.subscriptionId,!!o),o||this.subs.updateInPlace(c=>{delete c[e]})}}sendStart(e){this.trySend(ft(),{op:"start-sync",q:e})}sendResync(e,i,o){this.idToHash[i.subscriptionId]=e.hash,this.trySend(i.subscriptionId,{op:"resync-table","subscription-id":i.subscriptionId,"tx-id":o,token:i.token})}sendRemove(e,i){this.trySend(ft(),{op:"remove-sync","subscription-id":e.subscriptionId,"keep-subscription":i})}initSubscription(e,i,o){return Py(this,void 0,void 0,function*(){var r,l,c,d;yield this.subs.waitForKeyToLoad(i);const p=this.subs.currentValue[i];if(p&&p.state&&p.state.txId){this.sendResync(p,p.state,p.state.txId),!((r=p.values)===null||r===void 0)&&r.entities&&o&&o({type:eo.LoadFromStorage,data:pl(p,(l=p.values)===null||l===void 0?void 0:l.entities)});return}const h=Object.keys(e)[0],y=((d=(c=e[h])===null||c===void 0?void 0:c.$)===null||d===void 0?void 0:d.order)||{serverCreatedAt:"asc"},[_,T]=Object.entries(y)[0];this.subs.updateInPlace(C=>{C[i]={query:e,hash:i,table:h,orderDirection:T,orderField:_,createdAt:Date.now(),updatedAt:Date.now()}}),this.sendStart(e)})}flushPending(){return Py(this,void 0,void 0,function*(){for(const e of Object.keys(this.callbacks)){yield this.subs.waitForKeyToLoad(e);const i=this.subs.currentValue[e];i?yield this.initSubscription(i.query,i.hash):this.log.error("Missing sub for hash in flushPending",e)}})}onStartSyncOk(e){const i=e["subscription-id"],o=e.q,r=Tt(o);this.idToHash[i]=r,this.subs.updateInPlace(l=>{const c=l[r];if(!c)return this.log.error("Missing sub for hash",r,"subscription-id",i,"query",o),l;c.state={subscriptionId:i,token:e.token}})}notifyCbs(e,i){for(const o of this.callbacks[e]||[])o(i)}onSyncLoadBatch(e){var i;const o=e["subscription-id"],r=e["join-rows"],l=this.idToHash[o];if(!l){this.log.error("Missing hash for subscription",e);return}const c=[],d=this.subs.currentValue[l];if(!d){this.log.error("Missing sub for hash",l,e);return}const p=(i=d.values)!==null&&i!==void 0?i:{entities:[],attrs:this.createStore([]).attrs};d.values=p;const h=p.entities;for(const y of r){const _=this.createStore(y);p.attrs=_.attrs;const T=Ef(d,_);h.push({store:_,entity:T,serverCreatedAt:Ly(d,_,T.id)}),c.push(T)}this.subs.updateInPlace(y=>{y[l]=d,y[l].updatedAt=Date.now()}),d.values&&this.notifyCbs(l,{type:eo.InitialSyncBatch,data:pl(d,d.values.entities),batch:c})}onSyncInitFinish(e){var i;const o=e["subscription-id"],r=this.idToHash[o];if(!r){this.log.error("Missing hash for subscription",e);return}this.subs.updateInPlace(c=>{const d=c[r];if(!d){this.log.error("Missing sub for hash",r,e);return}const p=d.state;if(!p)return this.log.error("Sub never set init, missing result",d,e),c;p.txId=e["tx-id"],d.updatedAt=Date.now()});const l=this.subs.currentValue[r];l&&this.notifyCbs(r,{type:eo.InitialSyncComplete,data:pl(l,((i=l.values)===null||i===void 0?void 0:i.entities)||[])})}onSyncUpdateTriples(e){var i,o,r;const l=e["subscription-id"],c=this.idToHash[l];if(!c){this.log.error("Missing hash for subscription",e);return}const d=this.subs.currentValue[c];if(!d){this.log.error("Missing sub for hash",c,e);return}const p=d.state;if(!p){this.log.error("Missing state for sub",d,e);return}for(const h of e.txes){if(p.txId&&p.txId>=h["tx-id"])continue;p.txId=h["tx-id"];const y=[],_={};for(const D of h.changes){const P=(i=_[D.triple[0]])!==null&&i!==void 0?i:[];_[D.triple[0]]=P,P.push(D)}const T=(o=d.values)!==null&&o!==void 0?o:{entities:[],attrs:this.createStore([]).attrs},C=T.entities;d.values=T;const b=[];e:for(const[D,P]of Object.entries(_))for(let J=0;J<C.length;J++){const B=C[J];if(IA(B.store,D)){ky(B.store,P);const Z=Ef(d,B.store),Q=QM(B.store,P)[D];Z?(b.push({oldEntity:B.entity,newEntity:Z,changedFields:Q||{}}),B.entity=Z):y.push(J),delete _[D];continue e}}const M=[];for(const[D,P]of Object.entries(_)){const J=this.createStore([]);T.attrs=J.attrs,ky(J,P);const B=Ef(d,J);if(!B){this.log.error("No entity found after applying change",{sub:d,changes:P,store:J});continue}C.push({store:J,entity:B,serverCreatedAt:Ly(d,J,B.id)}),M.push(B)}const w=[];for(const D of y.sort().reverse())w.push(C[D].entity),C.splice(D,1);const R=XM(d,this.createStore);ZM(d,R,C),this.notifyCbs(c,{type:eo.SyncTransaction,data:pl(d,(r=d.values)===null||r===void 0?void 0:r.entities),added:M,removed:w,updated:b})}this.subs.updateInPlace(h=>{h[c]=d,h[c].updatedAt=Date.now()})}clearSubscriptionData(e,i){const o=this.idToHash[e];if(o){delete this.idToHash[e];const r=this.subs.currentValue[o];if(r.state&&this.sendRemove(r.state,i),i?this.subs.unloadKey(o):this.subs.updateInPlace(l=>{delete l[o]}),r)return r}}onStartSyncError(e){const i=Tt(e["original-event"].q),o={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa.",status:e.status,type:e.type,hint:e.hint},r=Object.keys(e["original-event"].q)[0];this.notifyCbs(i,{type:eo.Error,data:{[r]:[]},error:o})}onResyncError(e){const i=e["original-event"]["subscription-id"],o=this.clearSubscriptionData(i,!1);o&&this.initSubscription(o.query,o.hash)}}var st=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})},jM=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i};const Fn={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},ew=3e4,tw=3e4,nw=200,iw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},Cf="_instant_oauth_redirect",vr="currentUser";function ow({transportType:t,appId:e,apiURI:i,wsURI:o,EventSourceImpl:r}){if(!r)return new Uy(`${o}?app_id=${e}`);switch(t){case"ws":return new Uy(`${o}?app_id=${e}`);case"sse":return new YM(r,`${i}/runtime/sse?app_id=${e}`);default:throw new Error("Unknown transport type "+t)}}function sw(){return typeof window<"u"||typeof chrome<"u"}const Oy={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function rw(t,e){var i;const o=typeof t=="string"?JSON.parse(t):t;if(!((i=o?.result)===null||i===void 0)&&i.store){const r=o.result.store;o.result.store=Z0(Object.assign(Object.assign({},r),{useDateObjects:e}))}return o}function aw(t,e){var i;const o=Object.assign({},e);return!((i=e.result)===null||i===void 0)&&i.store&&(o.result=Object.assign(Object.assign({},e.result),{store:X0(e.result.store)})),o}function lw(t,e){switch(t){case"pendingMutations":return new Map(typeof e=="string"?JSON.parse(e):e);default:return e}}function uw(t,e){switch(t){case"pendingMutations":return[...e.entries()];default:return e}}function cw(t,e,i){const o=e?.result,r=i?.result;return o&&!r&&i&&(i.result=o),i||e}function qy(t){return[...t].sort((e,i)=>{const[o,r]=e,[l,c]=i,d=r.order||0,p=c.order||0;return d==p?o<l?-1:o>l?1:0:d-p})}class fw{constructor(e,i=p_,o=m_,r,l){var c,d,p;if(this._isOnline=!0,this._isShutdown=!1,this.status=Fn.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._transportType="ws",this._wsOk=null,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._inFlightMutationEventIds=new Set,this._onMergeKv=(h,y,_)=>{var T,C;switch(h){case"pendingMutations":{const b=(T=y?.entries())!==null&&T!==void 0?T:[],M=(C=_?.entries())!==null&&C!==void 0?C:[],w=new Map([...b,...M]);return(y?this._rewriteMutationsSorted(this.attrs,y):[]).forEach(([D,P])=>{var J;!(!((J=_?.pendingMutations)===null||J===void 0)&&J.has(D))&&!P["tx-id"]&&this._sendMutation(D,P)}),w}default:return _||y}},this.getPreviousResult=h=>{const y=Tt(h);return this.dataForQuery(y)},this.notifyOne=h=>{var y,_;const T=(y=this.queryCbs[h])!==null&&y!==void 0?y:[],C=(_=this._dataForQueryCache[h])===null||_===void 0?void 0:_.data,b=this.dataForQuery(h);b&&(Tl(b,C)||T.forEach(M=>M.cb(b)))},this.notifyOneQueryOnce=h=>{var y;const _=(y=this.queryOnceDfds[h])!==null&&y!==void 0?y:[],T=this.dataForQuery(h);_.forEach(C=>{this._completeQueryOnce(C.q,h,C.dfd),C.dfd.resolve(T)})},this.notifyQueryError=(h,y)=>{(this.queryCbs[h]||[]).forEach(T=>T.cb({error:y}))},this.pushTx=h=>{this.config.disableValidation||FM(h,this.config.schema);try{const y=dM({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(_=>{var T;return(T=_?.result)===null||T===void 0?void 0:T.store}),useDateObjects:this.config.useDateObjects},h);return this.pushOps(y)}catch(y){return this.pushOps([],y)}},this.pushOps=(h,y)=>{const _=ft(),T=[...this._pendingMutations().values()],C=Math.max(0,...T.map(w=>w.order||0))+1,b={op:"transact","tx-steps":h,created:Date.now(),error:y,order:C};this._updatePendingMutations(w=>{w.set(_,b)});const M=new Ay;return this.mutationDeferredStore.set(_,M),this._sendMutation(_,b),this.notifyAll(),M.promise},this._transportOnOpen=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][open]",y.id,"skip; this is no longer the current transport");return}this._log.info("[socket][open]",this._transport.id),this._setStatus(Fn.OPENED),this.getCurrentUser().then(_=>{var T;this._trySend(ft(),{op:"init","app-id":this.config.appId,"refresh-token":(T=_.user)===null||T===void 0?void 0:T.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(_=>{this._log.error("[socket][error]",y.id,_)})},this._transportOnMessage=h=>{const y=h.target,_=h.message;if(this._transport!==y){this._log.info("[socket][message]",y.id,_,"skip; this is no longer the current transport");return}!this._wsOk&&y.type==="ws"&&(this._wsOk=!0),this._transportType="ws",this._handleReceive(y.id,h.message)},this._transportOnError=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][error]",y.id,"skip; this is no longer the current transport");return}this._log.error("[socket][error]",y.id,h)},this._scheduleReconnect=()=>{!this._wsOk&&this._transportType!=="sse"&&(this._transportType="sse",this._reconnectTimeoutMs=0),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",this._transport.id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this._transportOnClose=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][close]",y.id,"skip; this is no longer the current transport");return}this._setStatus(Fn.CLOSED);for(const _ of Object.values(this._rooms))_.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",y.id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",y.id,"schedule reconnect, ms =",this._reconnectTimeoutMs),this._scheduleReconnect()},this._EventSource=l,this.config=Object.assign(Object.assign({},iw),e),this.queryCacheLimit=(c=this.config.queryCacheLimit)!==null&&c!==void 0?c:10,this._pendingTxCleanupTimeout=(d=this.config.pendingTxCleanupTimeout)!==null&&d!==void 0?d:tw,this._pendingMutationCleanupThreshold=(p=this.config.pendingMutationCleanupThreshold)!==null&&p!==void 0?p:nw,this._log=LM(e.verbose||Ud||g_,()=>this._reactorStats()),this.versions=Object.assign(Object.assign({},r||{}),{"@instantdb/core":Pd}),this.config.schema&&(this._linkIndex=My(this.config.schema)),!!sw()){if(!e.appId)throw new Error("Instant must be initialized with an appId.");if(!ls(e.appId))throw new Error(`Instant must be initialized with a valid appId. \`${e.appId}\` is not a valid uuid.`);typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",h=>st(this,void 0,void 0,function*(){var y;try{if(((y=h.data)===null||y===void 0?void 0:y.type)==="auth"){const _=yield this.getCurrentUser();this.updateUser(_.user)}}catch(_){this._log.error("[error] handle broadcast channel",_)}}))),this._initStorage(i),this._syncTable=new WM(this._trySendAuthed.bind(this),new i(this.config.appId,"syncSubs"),{useDateObjects:this.config.useDateObjects},this._log,h=>Sl(this.attrs,h,this.config.enableCardinalityInference,this._linkIndex,this.config.useDateObjects)),this._oauthCallbackResponse=this._oauthLoginInit(),this.getCurrentUser(),o.getIsOnline().then(h=>{this._isOnline=h,this._startSocket(),o.listen(y=>{y!==this._isOnline&&(this._log.info("[network] online =",y),this._isOnline=y,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Fn.CLOSED),this._setStatus(Fn.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload))}}updateSchema(e){this.config=Object.assign(Object.assign({},this.config),{schema:e,cardinalityInference:!!e}),this._linkIndex=e?My(this.config.schema):null}_reactorStats(){return{inFlightMutationCount:this._inFlightMutationEventIds.size,pendingMutationCount:this._pendingMutations().size,transportType:this._transportType}}_onQuerySubLoaded(e){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyOne(e))}_initStorage(e){this.querySubs=new Yf({persister:new e(this.config.appId,"querySubs"),merge:cw,serialize:aw,parse:(i,o)=>rw(o,this.config.useDateObjects),objectSize:i=>{var o,r,l,c;return(c=(l=(r=(o=i.result)===null||o===void 0?void 0:o.store)===null||r===void 0?void 0:r.triples)===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},logger:this._log,preloadEntryCount:10,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}}),this.querySubs.onKeyLoaded=i=>this._onQuerySubLoaded(i),this.kv=new Yf({persister:new e(this.config.appId,"kv"),merge:this._onMergeKv,serialize:uw,parse:lw,objectSize:()=>0,logger:this._log,saveThrottleMs:100,idleCallbackMaxWaitMs:100,gc:null}),this.kv.onKeyLoaded=i=>{i==="pendingMutations"&&this.notifyAll()},this.kv.waitForKeyToLoad("pendingMutations"),this.kv.waitForKeyToLoad(vr),this._beforeUnloadCbs.push(()=>{this.kv.flush(),this.querySubs.flush()})}_beforeUnload(){for(const e of this._beforeUnloadCbs)e();this._syncTable.beforeUnload()}_finishTransaction(e,i,o){const r=this.mutationDeferredStore.get(i);this.mutationDeferredStore.delete(i);const l=e!=="error"&&e!=="timeout";if(!r&&!l&&console.error("Mutation failed",Object.assign({status:e,eventId:i},o)),!!r)if(l)r.resolve({status:e,eventId:i});else if(o?.type){const{status:c}=o,d=jM(o,["status"]);r.reject(new zl({body:d,status:c??0}))}else r.reject(new cs(o?.message||"Unknown error",o?.hint))}_setStatus(e,i){this.status=e,this._errorMessage=i,this.notifyConnectionStatusSubs(e)}_flushEnqueuedRoomData(e){var i,o;const r=(o=(i=this._presence[e])===null||i===void 0?void 0:i.result)===null||o===void 0?void 0:o.user,l=this._broadcastQueue[e];if(this._broadcastQueue[e]=[],r&&this._trySetPresence(e,r),l)for(const c of l){const{topic:d,roomType:p,data:h}=c;this._tryBroadcast(e,p,d,h)}}_handleReceive(e,i){var o,r,l,c,d,p;const h=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(Oy[i.op]||this._log.info("[receive]",e,i.op,i),i.op){case"init-ok":{this._setStatus(Fn.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(i.attrs),this._flushPendingMessages(),this._sessionId=i["session-id"];for(const T of Object.keys(this._rooms)){const C=(r=(o=this._presence[T])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.user;this._tryJoinRoom(T,C)}break}case"add-query-exists":{this.notifyOneQueryOnce(Tt(i.q));break}case"add-query-ok":{const{q:T,result:C}=i,b=Tt(T);if(!this._hasQueryListeners()&&!this.querySubs.currentValue[b])break;const M=(c=(l=C?.[0])===null||l===void 0?void 0:l.data)===null||c===void 0?void 0:c["page-info"],w=(p=(d=C?.[0])===null||d===void 0?void 0:d.data)===null||p===void 0?void 0:p.aggregate,R=by(C),D=Sl(this.attrs,R,h,this._linkIndex,this.config.useDateObjects);this.querySubs.updateInPlace(P=>{if(!P[b]){this._log.info("Missing value in querySubs",{hash:b,q:T});return}P[b].result={store:D,pageInfo:M,aggregate:w,processedTxId:i["processed-tx-id"]}}),this._cleanupPendingMutationsQueries(),this.notifyOne(b),this.notifyOneQueryOnce(b),this._cleanupPendingMutationsTimeout();break}case"start-sync-ok":{this._syncTable.onStartSyncOk(i);break}case"sync-load-batch":{this._syncTable.onSyncLoadBatch(i);break}case"sync-init-finish":{this._syncTable.onSyncInitFinish(i);break}case"sync-update-triples":{this._syncTable.onSyncUpdateTriples(i);break}case"refresh-ok":{const{computations:T,attrs:C}=i,b=i["processed-tx-id"];C&&this._setAttrs(C),this._cleanupPendingMutationsTimeout();const M=this._rewriteMutations(this.attrs,this._pendingMutations(),b);M!==this._pendingMutations()&&this.kv.updateInPlace(D=>{D.pendingMutations=M});const w=qy(M.entries()),R=T.map(D=>{var P,J,B,Z;const Q=D["instaql-query"],ne=D["instaql-result"],j=Tt(Q),ae=by(ne),me=Sl(this.attrs,ae,h,this._linkIndex,this.config.useDateObjects),se=this._applyOptimisticUpdates(me,w,b),be=(J=(P=ne?.[0])===null||P===void 0?void 0:P.data)===null||J===void 0?void 0:J["page-info"],qe=(Z=(B=ne?.[0])===null||B===void 0?void 0:B.data)===null||Z===void 0?void 0:Z.aggregate;return{q:Q,hash:j,store:se,pageInfo:be,aggregate:qe}});R.forEach(({hash:D,q:P,store:J,pageInfo:B,aggregate:Z})=>{this.querySubs.updateInPlace(Q=>{if(!Q[D]){this._log.error("Missing value in querySubs",{hash:D,q:P});return}Q[D].result={store:J,pageInfo:B,aggregate:Z,processedTxId:b}})}),this._cleanupPendingMutationsQueries(),R.forEach(({hash:D})=>{this.notifyOne(D)});break}case"transact-ok":{const{"client-event-id":T,"tx-id":C}=i;this._inFlightMutationEventIds.delete(T);const M=this._rewriteMutations(this.attrs,this._pendingMutations()).get(T);if(!M)break;this._updatePendingMutations(R=>{R.set(T,Object.assign(Object.assign({},R.get(T)),{"tx-id":C,confirmed:Date.now()}))});const w=M["tx-steps"].filter(([R,...D])=>R==="add-attr").map(([R,D])=>D).concat(Object.values(this.attrs));this._setAttrs(w),this._finishTransaction("synced",T),this._cleanupPendingMutationsTimeout();break}case"patch-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._patchPresencePeers(T,i.edits),this._notifyPresenceSubs(T);break}case"refresh-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._setPresencePeers(T,i.data),this._notifyPresenceSubs(T);break}case"server-broadcast":{const T=i["room-id"],C=i.topic;this._trySetRoomConnected(T,!0),this._notifyBroadcastSubs(T,C,i);break}case"join-room-ok":{const T=i["room-id"];if(!this._rooms[T]){this._roomsPendingLeave[T]&&(this._tryLeaveRoom(T),delete this._roomsPendingLeave[T]);break}this._trySetRoomConnected(T,!0),this._flushEnqueuedRoomData(T);break}case"leave-room-ok":{const T=i["room-id"];this._trySetRoomConnected(T,!1);break}case"join-room-error":const y=i["room-id"],_=this._rooms[y];_&&(_.error=i.error),this._notifyPresenceSubs(y);break;case"error":this._handleReceiveError(i);break;default:this._log.info("Uknown op",i.op,i);break}}_pendingMutations(){var e;return(e=this.kv.currentValue.pendingMutations)!==null&&e!==void 0?e:new Map}_updatePendingMutations(e){this.kv.updateInPlace(i=>{var o;const r=(o=i.pendingMutations)!==null&&o!==void 0?o:new Map;i.pendingMutations=r,e(r)})}_handleMutationError(e,i,o){const r=this._pendingMutations().get(i);if(r&&(e!=="timeout"||!r["tx-id"])){this._updatePendingMutations(c=>(c.delete(i),c)),this._inFlightMutationEventIds.delete(i);const l={message:o.message,hint:o.hint};this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(l),this._finishTransaction(e,i,o)}}_handleReceiveError(e){var i,o,r,l,c,d,p;console.log("error",e);const h=e["client-event-id"];this._inFlightMutationEventIds.delete(h);const y=this._pendingMutations().get(h),_={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(e.hint&&(_.hint=e.hint),y){this._handleMutationError("error",h,e);return}if(!((i=e["original-event"])===null||i===void 0)&&i.hasOwnProperty("q")&&((o=e["original-event"])===null||o===void 0?void 0:o.op)==="add-query"){const b=(r=e["original-event"])===null||r===void 0?void 0:r.q,M=Tt(b);this.notifyQueryError(Tt(b),_),this.notifyQueryOnceError(b,M,h,_);return}if(((l=e["original-event"])===null||l===void 0?void 0:l.op)==="init"){if(e.type==="record-not-found"&&((c=e.hint)===null||c===void 0?void 0:c["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Fn.ERRORED,_),this.notifyAll();return}if(((d=e["original-event"])===null||d===void 0?void 0:d.op)==="resync-table"){this._syncTable.onResyncError(e);return}if(((p=e["original-event"])===null||p===void 0?void 0:p.op)==="start-sync"){this._syncTable.onStartSyncError(e);return}const C=Object.assign({},e);delete C.message,delete C.hint,console.error(e.message,C),e.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,e.hint)}notifyQueryOnceError(e,i,o,r){var l;const c=(l=this.queryOnceDfds[i])===null||l===void 0?void 0:l.find(d=>d.eventId===o);c&&(c.dfd.reject(r),this._completeQueryOnce(e,i,c.dfd))}_setAttrs(e){this.attrs=e.reduce((i,o)=>(i[o.id]=o,i),{}),this.notifyAttrsSubs()}_startQuerySub(e,i){const o=ft();return this.querySubs.updateInPlace(r=>{r[i]=r[i]||{q:e,result:null,eventId:o},r[i].lastAccessed=Date.now()}),this._trySendAuthed(o,{op:"add-query",q:e}),o}subscribeTable(e,i){return this._syncTable.subscribe(e,i)}subscribeQuery(e,i,o){var r;this.config.disableValidation||Ry(e,this.config.schema),o&&"ruleParams"in o&&(e=Object.assign({$$ruleParams:o.ruleParams},e));const l=Tt(e),c=this.getPreviousResult(e);return c&&i(c),this.queryCbs[l]=(r=this.queryCbs[l])!==null&&r!==void 0?r:[],this.queryCbs[l].push({q:e,cb:i}),this._startQuerySub(e,l),()=>{this._unsubQuery(e,l,i)}}queryOnce(e,i){var o;this.config.disableValidation||Ry(e,this.config.schema),i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const r=new Ay;if(!this._isOnline)return r.reject(new Error("We can't run `queryOnce`, because the device is offline.")),r.promise;if(!this.querySubs)return r.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),r.promise;const l=Tt(e),c=this._startQuerySub(e,l);return this.queryOnceDfds[l]=(o=this.queryOnceDfds[l])!==null&&o!==void 0?o:[],this.queryOnceDfds[l].push({q:e,dfd:r,eventId:c}),setTimeout(()=>r.reject(new Error("Query timed out")),ew),r.promise}_completeQueryOnce(e,i,o){this.queryOnceDfds[i]&&(this.queryOnceDfds[i]=this.queryOnceDfds[i].filter(r=>r.dfd!==o),this._cleanupQuery(e,i))}_unsubQuery(e,i,o){this.queryCbs[i]&&(this.queryCbs[i]=this.queryCbs[i].filter(r=>r.cb!==o),this._cleanupQuery(e,i))}_hasQueryListeners(e){var i,o;return!!(!((i=this.queryCbs[e])===null||i===void 0)&&i.length||!((o=this.queryOnceDfds[e])===null||o===void 0)&&o.length)}_cleanupQuery(e,i){this._hasQueryListeners(i)||(delete this.queryCbs[i],delete this.queryOnceDfds[i],delete this._dataForQueryCache[i],this.querySubs.unloadKey(i),this._trySendAuthed(ft(),{op:"remove-query",q:e}))}_rewriteMutations(e,i,o){if(!e)return i;if(!i)return new Map;const r=y=>{const[_,T,C]=y["forward-identity"];return St(e,T,C)},l=y=>{const[_,T,C]=y["forward-identity"];return ro(e,T,C)},c={attrIdMap:{},refSwapAttrIds:new Set};let d=!1;const p=(y,_)=>{const T=[];for(const C of y){const[b]=C;if(b==="add-attr"){const[w,R]=C,D=r(R);if(D&&R.id!==D.id){c.attrIdMap[R.id]=D.id,d=!0;continue}if(R["value-type"]==="ref"){const P=l(R);if(P){c.attrIdMap[R.id]=P.id,c.refSwapAttrIds.add(R.id),d=!0;continue}}}if(o&&_&&o>=_&&b==="add-attr"||b==="update-attr"||b==="delete-attr"){d=!0;continue}const M=d?zb(c,C):C;T.push(M)}return d?T:y},h=new Map;for(const[y,_]of i.entries())h.set(y,Object.assign(Object.assign({},_),{"tx-steps":p(_["tx-steps"],_["tx-id"])}));return d?h:i}_rewriteMutationsSorted(e,i){return qy(this._rewriteMutations(e,i).entries())}optimisticAttrs(){var e;const i=[...this._pendingMutations().values()].flatMap(d=>d["tx-steps"]),o=new Set(i.filter(([d,p])=>d==="delete-attr").map(([d,p])=>p)),r=[];for(const[d,p]of i)if(d==="add-attr")r.push(p);else if(d==="update-attr"&&p.id&&(!((e=this.attrs)===null||e===void 0)&&e[p.id])){const h=Object.assign(Object.assign({},this.attrs[p.id]),p);r.push(h)}const l=[...Object.values(this.attrs||{}),...r].filter(d=>!o.has(d.id));return Object.fromEntries(l.map(d=>[d.id,d]))}dataForQuery(e){const i=this._errorMessage;if(i)return{error:i};if(!this.querySubs||!this.kv.currentValue.pendingMutations)return;const o=this.querySubs.version(),r=this.querySubs.currentValue,l=this.kv.version(),c=this._pendingMutations(),{q:d,result:p}=r[e]||{};if(!p)return;const h=this._dataForQueryCache[e];if(h&&o===h.querySubVersion&&l===h.pendingMutationsVersion)return h.data;const{store:y,pageInfo:_,aggregate:T,processedTxId:C}=p,b=this._rewriteMutationsSorted(y.attrs,c),M=this._applyOptimisticUpdates(y,b,C),w=c_({store:M,pageInfo:_,aggregate:T},d);return this._dataForQueryCache[e]={querySubVersion:o,pendingMutationsVersion:l,data:w},w}_applyOptimisticUpdates(e,i,o){for(const[r,l]of i)(!l["tx-id"]||o&&l["tx-id"]>o)&&(e=BA(e,l["tx-steps"]));return e}notifyAll(){Object.keys(this.queryCbs).forEach(e=>{this.querySubs.waitForKeyToLoad(e).then(()=>this.notifyOne(e)).catch(()=>this.notifyOne(e))})}loadedNotifyAll(){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyAll()).catch(()=>this.notifyAll())}shutdown(){var e;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(e=this._transport)===null||e===void 0||e.close()}_sendMutation(e,i){if(i.error){this._handleMutationError("error",e,{message:i.error.message});return}if(this.status!==Fn.AUTHENTICATED){this._finishTransaction("enqueued",e);return}const o=Math.max(6e3,Math.min(this._inFlightMutationEventIds.size+1,this._pendingMutations().size+1)*6e3);this._isOnline?(this._trySend(e,i),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",e,{message:"transaction timed out"})},o)):this._finishTransaction("enqueued",e)}_flushPendingMessages(){Object.keys(this.queryCbs).map(r=>this.querySubs.currentValue[r]).filter(r=>r).forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),this._rewriteMutationsSorted(this.attrs,this._pendingMutations()).forEach(([r,l])=>{l["tx-id"]||this._sendMutation(r,l)}),this._syncTable.flushPending()}_cleanupPendingMutationsQueries(){let e=Number.MAX_SAFE_INTEGER;for(const{result:i}of Object.values(this.querySubs.currentValue))i?.processedTxId&&(e=Math.min(e,i?.processedTxId));this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r["tx-id"]&&r["tx-id"]<=e&&i.delete(o)})}_cleanupPendingMutationsTimeout(){if(this._pendingMutations().size<this._pendingMutationCleanupThreshold)return;const e=Date.now();this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r.confirmed&&r.confirmed+this._pendingTxCleanupTimeout<e&&i.delete(o)})}_trySendAuthed(...e){this.status===Fn.AUTHENTICATED&&this._trySend(...e)}_trySend(e,i,o){if(this._transport.isOpen()){switch(Oy[i.op]||this._log.info("[send]",this._transport.id,i.op,i),i.op){case"transact":{this._inFlightMutationEventIds.add(e);break}case"init":this._inFlightMutationEventIds.clear()}this._transport.send(Object.assign({"client-event-id":e},i))}}_startSocket(){if(this._wsOk=null,this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._transport&&this._transport.isConnecting()){this._log.info("[socket][start]",this._transport.id,"maintained as current transport, we were still in a connecting state");return}const e=this._transport;this._transport=ow({transportType:this._transportType,appId:this.config.appId,apiURI:this.config.apiURI,wsURI:this.config.websocketURI,EventSourceImpl:this._EventSource}),this._transport.onopen=this._transportOnOpen,this._transport.onmessage=this._transportOnMessage,this._transport.onclose=this._transportOnClose,this._transport.onerror=this._transportOnError,this._log.info("[socket][start]",this._transport.id),e?.isOpen()&&(this._log.info("[socket][start]",this._transport.id,"close previous transport id = ",e.id),e.close())}getLocalId(e){return st(this,void 0,void 0,function*(){const i=`localToken_${e}`;if(this.kv.currentValue[i])return this.kv.currentValue[i];const o=yield this.kv.waitForKeyToLoad(i);if(o)return o;const r=ft();return this.kv.updateInPlace(l=>{l[i]||(l[i]=r)}),yield this.kv.waitForKeyToLoad(i)})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const e=new URL(window.location.href);if(e.searchParams.get(Cf)){const i=e.toString();e.searchParams.delete(Cf),e.searchParams.delete("code"),e.searchParams.delete("error");const o=e.pathname+(e.searchParams.size?"?"+e.searchParams:"")+e.hash;if(history.replaceState(history.state,"",o),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let r=!1;const l=c=>{var d;r||(r=!0,navigation.removeEventListener("navigate",l),!c.userInitiated&&c.navigationType==="replace"&&((d=c.destination)===null||d===void 0?void 0:d.url)===i&&history.replaceState(history.state,"",o))};navigation.addEventListener("navigate",l)}}}_oauthLoginInit(){return st(this,void 0,void 0,function*(){var e,i,o,r;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const l=new URLSearchParams(window.location.search);if(!l.get(Cf))return null;const c=l.get("error");if(c)return this._replaceUrlAfterOAuth(),{error:{message:c}};const d=l.get("code");if(!d)return null;this._replaceUrlAfterOAuth();try{const p=yield this._getCurrentUser(),h=p?.type==="guest",{user:y}=yield Ey({apiURI:this.config.apiURI,appId:this.config.appId,code:d,refreshToken:h?p.refresh_token:void 0});return this.setCurrentUser(y),null}catch(p){return((e=p?.body)===null||e===void 0?void 0:e.type)==="record-not-found"&&((o=(i=p?.body)===null||i===void 0?void 0:i.hint)===null||o===void 0?void 0:o["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((r=p?.body)===null||r===void 0?void 0:r.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return st(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(e){return this.mutationErrorCbs.push(e),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(i=>i!==e)}}subscribeAuth(e){this.authCbs.push(e);const i=this._currentUserCached;i.isLoading||e(this._currentUserCached);let o=!1;return this.getCurrentUser().then(r=>{o||Tl(r,i)||e(r)}),()=>{o=!0,this.authCbs=this.authCbs.filter(r=>r!==e)}}getAuth(){return st(this,void 0,void 0,function*(){const{user:e,error:i}=yield this.getCurrentUser();if(i)throw new cs("Could not get current user: "+i.message);return e})}subscribeConnectionStatus(e){return this.connectionStatusCbs.push(e),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(i=>i!==e)}}subscribeAttrs(e){return this.attrsCbs.push(e),this.attrs&&e(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(i=>i!==e)}}notifyAuthSubs(e){this.authCbs.forEach(i=>i(e))}notifyMutationErrorSubs(e){this.mutationErrorCbs.forEach(i=>i(e))}notifyAttrsSubs(){if(!this.attrs)return;const e=this.optimisticAttrs();this.attrsCbs.forEach(i=>i(e))}notifyConnectionStatusSubs(e){this.connectionStatusCbs.forEach(i=>i(e))}setCurrentUser(e){return st(this,void 0,void 0,function*(){this.kv.updateInPlace(i=>{i[vr]=e}),yield this.kv.waitForKeyToLoad(vr)})}getCurrentUserCached(){return this._currentUserCached}_getCurrentUser(){return st(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(vr);return typeof e=="string"?JSON.parse(e):e})}getCurrentUser(){return st(this,void 0,void 0,function*(){const e=yield this._waitForOAuthCallbackResponse();if(e?.error){const i={error:e.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}try{const o={user:yield this._getCurrentUser(),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}catch(i){return{user:void 0,isLoading:!1,error:{message:i?.message||"Error loading user"}}}})}_hasCurrentUser(){return st(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(vr);return typeof e=="string"?JSON.parse(e)!=null:e!=null})}changeCurrentUser(e){return st(this,void 0,void 0,function*(){var i;const{user:o}=yield this.getCurrentUser();if(!Tl(o,e)){yield this.setCurrentUser(e),this.updateUser(e);try{(i=this._broadcastChannel)===null||i===void 0||i.postMessage({type:"auth"})}catch(r){console.error("Error posting message to broadcast channel",r)}}})}updateUser(e){const i={error:void 0,user:e};this._currentUserCached=Object.assign({isLoading:!1},i),this._dataForQueryCache={},this.querySubs.updateInPlace(o=>{Object.keys(o).forEach(r=>{delete o[r].result})}),this._reconnectTimeoutMs=0,this._transport.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(i)}sendMagicCode({email:e}){return EM({apiURI:this.config.apiURI,appId:this.config.appId,email:e})}signInWithMagicCode(e){return st(this,arguments,void 0,function*({email:i,code:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield CM({apiURI:this.config.apiURI,appId:this.config.appId,email:i,code:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}signInWithCustomToken(e){return st(this,void 0,void 0,function*(){const i=yield AM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:e});return yield this.changeCurrentUser(i.user),i})}signInAsGuest(){return st(this,void 0,void 0,function*(){const e=yield bM({apiURI:this.config.apiURI,appId:this.config.appId});return yield this.changeCurrentUser(e.user),e})}potentiallyInvalidateToken(e,i){var o;const r=(o=e?.user)===null||o===void 0?void 0:o.refresh_token;if(!r)return;if(i.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}wM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:r}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(c=>{})}signOut(e){return st(this,void 0,void 0,function*(){const i=yield this.getCurrentUser();this.potentiallyInvalidateToken(i,e),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:e,redirectURL:i}){const{apiURI:o,appId:r}=this.config;return`${o}/runtime/oauth/start?app_id=${r}&client_name=${e}&redirect_uri=${i}`}exchangeCodeForToken(e){return st(this,arguments,void 0,function*({code:i,codeVerifier:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield Ey({apiURI:this.config.apiURI,appId:this.config.appId,code:i,codeVerifier:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}issuerURI(){const{apiURI:e,appId:i}=this.config;return`${e}/runtime/${i}`}signInWithIdToken(e){return st(this,arguments,void 0,function*({idToken:i,clientName:o,nonce:r}){var l;const c=yield this.getCurrentUser(),d=(l=c?.user)===null||l===void 0?void 0:l.refresh_token,p=yield MM({apiURI:this.config.apiURI,appId:this.config.appId,idToken:i,clientName:o,nonce:r,refreshToken:d});return yield this.changeCurrentUser(p.user),p})}joinRoom(e,i){let o=!1;this._rooms[e]||(o=!0,this._rooms[e]={isConnected:!1,error:void 0}),this._presence[e]=this._presence[e]||{};const r=this._presence[e].result;return i&&!r&&(this._presence[e].result=this._presence[e].result||{},this._presence[e].result.user=i,this._notifyPresenceSubs(e)),o&&this._tryJoinRoom(e,i),()=>{this._cleanupRoom(e)}}_cleanupRoom(e){var i,o,r,l;if(!(!((o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0)&&o.length)&&!Object.keys((r=this._broadcastSubs[e])!==null&&r!==void 0?r:{}).length){const c=(l=this._rooms[e])===null||l===void 0?void 0:l.isConnected;delete this._rooms[e],delete this._presence[e],delete this._broadcastSubs[e],c?this._tryLeaveRoom(e):this._roomsPendingLeave[e]=!0}}getPresence(e,i,o={}){const r=this._rooms[i],l=this._presence[i];return!r||!l||!l.result?null:Object.assign(Object.assign({},UM(l.result,o,this._sessionId)),{isLoading:!r.isConnected,error:r.error})}publishPresence(e,i,o){const r=this._rooms[i],l=this._presence[i];if(!r||!l)return;l.result=l.result||{};const c=Object.assign(Object.assign({},l.result.user),o);l.result.user=c,r.isConnected&&(this._trySetPresence(i,c),this._notifyPresenceSubs(i))}_trySetPresence(e,i){this._trySendAuthed(ft(),{op:"set-presence","room-id":e,data:i})}_tryJoinRoom(e,i){this._trySendAuthed(ft(),{op:"join-room","room-id":e,data:i}),delete this._roomsPendingLeave[e]}_tryLeaveRoom(e){this._trySendAuthed(ft(),{op:"leave-room","room-id":e})}_trySetRoomConnected(e,i){const o=this._rooms[e];o&&(o.isConnected=i)}subscribePresence(e,i,o,r){const l=this.joinRoom(i,o.initialPresence||o.initialData),c=Object.assign(Object.assign({},o),{roomId:i,cb:r,prev:null});return this._presence[i]=this._presence[i]||{},this._presence[i].handlers=this._presence[i].handlers||[],this._presence[i].handlers.push(c),this._notifyPresenceSub(i,c),()=>{var d,p,h;this._presence[i].handlers=(h=(p=(d=this._presence[i])===null||d===void 0?void 0:d.handlers)===null||p===void 0?void 0:p.filter(y=>y!==c))!==null&&h!==void 0?h:[],l()}}_notifyPresenceSubs(e){var i,o;(o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0||o.forEach(r=>{this._notifyPresenceSub(e,r)})}_notifyPresenceSub(e,i){const o=this.getPresence("",e,i);o&&(i.prev&&!PM(o,i.prev)||(i.prev=o,i.cb(o)))}_patchPresencePeers(e,i){var o,r,l;const c=((r=(o=this._presence[e])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.peers)||{};let d=Object.fromEntries(Object.entries(c).map(([h,y])=>[h,{data:y}]));(l=this._presence[e])===null||l===void 0||l.result;const p=Rl(d,h=>{for(let[y,_,T]of i)switch(_){case"+":dA(h,y,T);break;case"r":uy(h,y,T);break;case"-":J0(h,y);break}delete h[this._sessionId]});this._setPresencePeers(e,p)}_setPresencePeers(e,i){const o=Object.assign({},i);delete o[this._sessionId];const r=Object.fromEntries(Object.entries(o).map(([l,c])=>[l,c.data]));this._presence=Rl(this._presence,l=>{uy(l,[e,"result","peers"],r)})}publishTopic({roomType:e,roomId:i,topic:o,data:r}){var l;const c=this._rooms[i];if(c){if(!c.isConnected){this._broadcastQueue[i]=(l=this._broadcastQueue[i])!==null&&l!==void 0?l:[],this._broadcastQueue[i].push({topic:o,roomType:e,data:r});return}this._tryBroadcast(i,e,o,r)}}_tryBroadcast(e,i,o,r){this._trySendAuthed(ft(),{op:"client-broadcast","room-id":e,roomType:i,topic:o,data:r})}subscribeTopic(e,i,o){const r=this.joinRoom(e);return this._broadcastSubs[e]=this._broadcastSubs[e]||{},this._broadcastSubs[e][i]=this._broadcastSubs[e][i]||[],this._broadcastSubs[e][i].push(o),this._presence[e]=this._presence[e]||{},()=>{this._broadcastSubs[e][i]=this._broadcastSubs[e][i].filter(l=>l!==o),this._broadcastSubs[e][i].length||delete this._broadcastSubs[e][i],r()}}_notifyBroadcastSubs(e,i,o){var r,l,c;(c=(l=(r=this._broadcastSubs)===null||r===void 0?void 0:r[e])===null||l===void 0?void 0:l[i])===null||c===void 0||c.forEach(d=>{var p,h,y,_,T,C;const b=(p=o.data)===null||p===void 0?void 0:p.data,M=o.data["peer-id"]===this._sessionId?(y=(h=this._presence[e])===null||h===void 0?void 0:h.result)===null||y===void 0?void 0:y.user:(C=(T=(_=this._presence[e])===null||_===void 0?void 0:_.result)===null||T===void 0?void 0:T.peers)===null||C===void 0?void 0:C[o.data["peer-id"]];return d(b,M)})}uploadFile(e,i,o){return st(this,void 0,void 0,function*(){var r;const l=yield this.getCurrentUser(),c=(r=l?.user)===null||r===void 0?void 0:r.refresh_token;return RM(Object.assign(Object.assign({},o),{apiURI:this.config.apiURI,appId:this.config.appId,path:e,file:i,refreshToken:c}))})}deleteFile(e){return st(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield NM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}upload(e,i){return st(this,void 0,void 0,function*(){var o;const r=yield this.getCurrentUser(),l=(o=r?.user)===null||o===void 0?void 0:o.refresh_token,c=e||i.name,d=yield xM({apiURI:this.config.apiURI,appId:this.config.appId,fileName:c,refreshToken:l});return yield IM(d,i)})}getDownloadUrl(e){return st(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield DM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}}let ml;function dw(t,e){ml?.dispose();const i=vw(e),o=mw(e,d),r=pw(hw(t));function l(y){var _;y.source===r.element.contentWindow&&((_=y.data)===null||_===void 0?void 0:_.type)==="close"&&i.isVisible()&&d()}function c(y){const _=y.shiftKey&&y.ctrlKey&&y.key==="0",T=y.key==="Escape"||y.key==="Esc";(_||T&&i.isVisible())&&d()}function d(){i.isVisible()?i.element.style.display="none":(i.element.style.display="block",i.element.contains(r.element)||i.element.appendChild(r.element))}function p(){i.element.remove(),o.element.remove(),removeEventListener("keydown",c),removeEventListener("message",l)}function h(){document.body.appendChild(i.element),document.body.appendChild(o.element),addEventListener("keydown",c),addEventListener("message",l),ml={dispose:p}}return h()}function hw(t){return`${Ud||y_?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${t}`}function pw(t){const e=document.createElement("iframe");return e.src=t,e.className="instant-devtool-iframe",Object.assign(e.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:e}}function mw(t,e){const i=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,o=document.createElement("button");return o.innerHTML=i,o.className="instant-devtool-toggler",Object.assign(o.style,Object.assign(Object.assign({position:"fixed"},gw(t.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),o.addEventListener("click",e),{element:o}}function gw(t){switch(t){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function yw(t){switch(t){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function vw(t){const e=document.createElement("div");Object.assign(e.style,Object.assign(Object.assign({position:"fixed"},yw(t.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),e.style.display="none",e.className="instant-devtool-container";function i(){return e.style.display!=="none"}return{element:e,isVisible:i}}const _w={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function Tw(){var t;return globalThis.__instantDbSchemaHashStore=(t=globalThis.__instantDbSchemaHashStore)!==null&&t!==void 0?t:new WeakMap,globalThis.__instantDbSchemaHashStore}function Sw(){var t;return globalThis.__instantDbStore=(t=globalThis.__instantDbStore)!==null&&t!==void 0?t:{},globalThis.__instantDbStore}function $f(t){const e=t.__adminToken;return t.appId+"_"+(t.websocketURI||"default_ws_uri")+"_"+(t.apiURI||"default_api_uri")+"_"+(e||"client_only")+"_"+t.useDateObjects}const Jf=Sw(),Gy=Tw();class Ew{constructor(e){this.db=e,this.sendMagicCode=i=>this.db.sendMagicCode(i),this.signInWithMagicCode=i=>this.db.signInWithMagicCode(i),this.signInWithToken=i=>this.db.signInWithCustomToken(i),this.signInAsGuest=()=>this.db.signInAsGuest(),this.createAuthorizationURL=i=>this.db.createAuthorizationURL(i),this.signInWithIdToken=i=>this.db.signInWithIdToken(i),this.exchangeOAuthCode=i=>this.db.exchangeCodeForToken(i),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(i={invalidateToken:!0})=>this.db.signOut(i)}}class Cw{constructor(e){this.db=e,this.uploadFile=(i,o,r={})=>this.db.uploadFile(i,o,r),this.delete=i=>this.db.deleteFile(i),this.upload=(i,o)=>this.db.upload(i,o),this.put=this.upload,this.getDownloadUrl=i=>this.db.getDownloadUrl(i)}}function Aw(t){return JSON.parse(JSON.stringify(t))}class bw{constructor(e){this.tx=Dd(),this._reactor=e,this.auth=new Ew(this._reactor),this.storage=new Cw(this._reactor)}transact(e){return this._reactor.pushTx(e)}getLocalId(e){return this._reactor.getLocalId(e)}subscribeQuery(e,i,o){return this._reactor.subscribeQuery(e,i,o)}subscribeAuth(e){return this._reactor.subscribeAuth(e)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(e){return this._reactor.subscribeConnectionStatus(e)}joinRoom(e="_defaultRoomType",i="_defaultRoomId",o){return{leaveRoom:this._reactor.joinRoom(i,o?.initialPresence),subscribeTopic:(l,c)=>this._reactor.subscribeTopic(i,l,c),subscribePresence:(l,c)=>this._reactor.subscribePresence(e,i,l,c),publishTopic:(l,c)=>this._reactor.publishTopic({roomType:e,roomId:i,topic:l,data:c}),publishPresence:l=>this._reactor.publishPresence(e,i,l),getPresence:l=>this._reactor.getPresence(e,i,l)}}shutdown(){delete Jf[$f(this._reactor.config)],this._reactor.shutdown()}queryOnce(e,i){return this._reactor.queryOnce(e,i)}_syncTableExperimental(e,i){return this._reactor.subscribeTable(e,i)}}function Hy(t){if(!t)return"0";const e=Gy.get(t);if(e)return e;const i=Tt(t);return Gy.set(t,i),i}function Mw(t,e){return Hy(t._reactor.config.schema)!==Hy(e)}function ww(t,e,i,o,r){const l=Jf[$f(t)];if(l)return Mw(l,t.schema)&&l._reactor.updateSchema(t.schema),l;const c=new fw(Object.assign(Object.assign(Object.assign({},_w),t),{cardinalityInference:!!t.schema}),e||p_,i||m_,Object.assign(Object.assign({},o||{}),{"@instantdb/core":Pd}),r),d=new bw(c);return Jf[$f(t)]=d,Rw(t.appId,t.devtool),d}function Rw(t,e){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof e=="boolean"&&!e)return;const i=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof e=="object"?e:{});i.allowedHosts.includes(window.location.hostname)&&dw(t,i)}const Nw={isLoading:!0,data:void 0,pageInfo:void 0,error:void 0};function Vy(t){return Object.assign({isLoading:!t,data:void 0,pageInfo:void 0,error:void 0},t||{})}function xw(t,e,i){e&&i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const o=e?Aw(e):null,r=Tt(o),l=U.useRef(Vy(t._reactor.getPreviousResult(o))),c=U.useCallback(p=>(l.current=Vy(t._reactor.getPreviousResult(o)),o?t.subscribeQuery(o,y=>{l.current=Object.assign({isLoading:!y,data:void 0,pageInfo:void 0,error:void 0},y),p()}):()=>{}),[r]);return{state:U.useSyncExternalStore(c,()=>l.current,()=>Nw),query:o}}function Iw(){const t=U.useRef(null);U.useEffect(()=>{i()},[]);function e(o,r){clearTimeout(t.current),t.current=setTimeout(r,o)}function i(){clearTimeout(t.current)}return{set:e,clear:i}}const Dw=1e3;function Uw(t,e,i){const o=U.useRef(i);o.current=i,U.useEffect(()=>t.core._reactor.subscribeTopic(t.id,e,(l,c)=>{o.current(l,c)}),[t.id,e])}function Pw(t,e){return U.useEffect(()=>t.core._reactor.joinRoom(t.id),[t.id]),U.useCallback(o=>{t.core._reactor.publishTopic({roomType:t.type,roomId:t.id,topic:e,data:o})},[t.id,e])}function Lw(t,e={}){var i,o;const[r,l]=U.useState(()=>{var p;return(p=t.core._reactor.getPresence(t.type,t.id,e))!==null&&p!==void 0?p:{peers:{},isLoading:!0}});U.useEffect(()=>t.core._reactor.subscribePresence(t.type,t.id,e,h=>{l(h)}),[t.id,e.user,(i=e.peers)===null||i===void 0?void 0:i.join(),(o=e.keys)===null||o===void 0?void 0:o.join()]);const c=U.useCallback(p=>{t.core._reactor.publishPresence(t.type,t.id,p)},[t.type,t.id]);return U.useMemo(()=>Object.assign(Object.assign({},r),{publishPresence:c}),[r,c])}function kw(t,e,i){U.useEffect(()=>t.core._reactor.joinRoom(t.id,e),[t.id]),U.useEffect(()=>t.core._reactor.publishPresence(t.type,t.id,e),[t.type,t.id,i??JSON.stringify(e)])}function Ow(t,e,i={}){const o=Iw(),r=to.usePresence(t,{keys:[e]}),l=U.useMemo(()=>{var y;const _=t._core._reactor.getPresence(t.type,t.id);return i?.writeOnly?[]:Object.values((y=_?.peers)!==null&&y!==void 0?y:{}).filter(T=>T[e]===!0)},[i?.writeOnly,r]),c=U.useCallback(y=>{var _;t.core._reactor.publishPresence(t.type,t.id,{[e]:y}),y&&(i?.timeout===null||i?.timeout===0||o.set((_=i?.timeout)!==null&&_!==void 0?_:Dw,()=>{t.core._reactor.publishPresence(t.type,t.id,{[e]:null})}))},[t.type,t.id,e,i?.timeout,o]),d=U.useCallback(y=>{const T=!(i?.stopOnEnter&&y.key==="Enter");c(T)},[i.stopOnEnter,c]),p=U.useCallback(()=>{c(!1)},[c]),h=U.useMemo(()=>({onKeyDown:d,onBlur:p}),[d,p]);return{active:l,setActive:c,inputProps:h}}const to={useTopicEffect:Uw,usePublishTopic:Pw,usePresence:Lw,useSyncPresence:kw,useTypingIndicator:Ow};class qw{constructor(e,i,o){this.useTopicEffect=(r,l)=>{to.useTopicEffect(this,r,l)},this.usePublishTopic=r=>to.usePublishTopic(this,r),this.usePresence=(r={})=>to.usePresence(this,r),this.useSyncPresence=(r,l)=>to.useSyncPresence(this,r,l),this.useTypingIndicator=(r,l={})=>to.useTypingIndicator(this,r,l),this.core=e,this._core=this.core,this.type=i,this.id=o}}var Gw=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const Hw={isLoading:!0,user:void 0,error:void 0};class Vw{constructor(e,i){this.tx=Dd(),this.getLocalId=o=>this.core.getLocalId(o),this.useLocalId=o=>{const[r,l]=U.useState(null);return U.useEffect(()=>{Gw(this,void 0,void 0,function*(){const d=yield this.getLocalId(o);l(d)})},[o]),r},this.rooms=to,this.transact=o=>this.core.transact(o),this.useQuery=(o,r)=>xw(this.core,o,r).state,this.useAuth=()=>{const o=U.useRef(this.core._reactor._currentUserCached),r=U.useCallback(c=>this.core.subscribeAuth(p=>{o.current=Object.assign({isLoading:!1},p),c()}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>Hw)},this.useUser=()=>{const{user:o}=this.useAuth();if(!o)throw new cs("useUser must be used within an auth-protected route");return o},this.useConnectionStatus=()=>{const o=U.useRef(this.core._reactor.status),r=U.useCallback(c=>this.core.subscribeConnectionStatus(p=>{p!==o.current&&(o.current=p,c())}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>"connecting")},this.queryOnce=(o,r)=>this.core.queryOnce(o,r),this.SignedIn=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||!r.user?null:E.jsx(E.Fragment,{children:o})},this.SignedOut=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||r.user?null:E.jsx(E.Fragment,{children:o})},this.core=ww(e,this.constructor.Storage,this.constructor.NetworkListener,i,this.constructor.EventSourceImpl),this._core=this.core,this.auth=this.core.auth,this.storage=this.core.storage}room(e="_defaultRoomType",i="_defaultRoomId"){return new qw(this.core,e,i)}getAuth(){return this.core.getAuth()}}class zy extends Error{constructor(e,i){super(e),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function Af(t){}function zw(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Af,onError:i=Af,onRetry:o=Af,onComment:r}=t;let l="",c=!0,d,p="",h="";function y(M){const w=c?M.replace(/^\xEF\xBB\xBF/,""):M,[R,D]=Bw(`${l}${w}`);for(const P of R)_(P);l=D,c=!1}function _(M){if(M===""){C();return}if(M.startsWith(":")){r&&r(M.slice(M.startsWith(": ")?2:1));return}const w=M.indexOf(":");if(w!==-1){const R=M.slice(0,w),D=M[w+1]===" "?2:1,P=M.slice(w+D);T(R,P,M);return}T(M,"",M)}function T(M,w,R){switch(M){case"event":h=w;break;case"data":p=`${p}${w}
`;break;case"id":d=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?o(parseInt(w,10)):i(new zy(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:R}));break;default:i(new zy(`Unknown field "${M.length>20?`${M.slice(0,20)}`:M}"`,{type:"unknown-field",field:M,value:w,line:R}));break}}function C(){p.length>0&&e({id:d,event:h||void 0,data:p.endsWith(`
`)?p.slice(0,-1):p}),d=void 0,p="",h=""}function b(M={}){l&&M.consume&&_(l),c=!0,d=void 0,p="",h="",l=""}return{feed:y,reset:b}}function Bw(t){const e=[];let i="",o=0;for(;o<t.length;){const r=t.indexOf("\r",o),l=t.indexOf(`
`,o);let c=-1;if(r!==-1&&l!==-1?c=Math.min(r,l):r!==-1?r===t.length-1?c=-1:c=r:l!==-1&&(c=l),c===-1){i=t.slice(o);break}else{const d=t.slice(o,c);e.push(d),o=c+1,t[o-1]==="\r"&&t[o]===`
`&&o++}}return[e,i]}class By extends Event{constructor(e,i){var o,r;super(e),this.code=(o=i?.code)!=null?o:void 0,this.message=(r=i?.message)!=null?r:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,i,o){return o(Fy(this),i)}[Symbol.for("Deno.customInspect")](e,i){return e(Fy(this),i)}}function Fw(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function Kf(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Kf).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Kf(t.cause)}`:t.message:`${t}`}function Fy(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var b_=t=>{throw TypeError(t)},Ld=(t,e,i)=>e.has(t)||b_("Cannot "+i),Se=(t,e,i)=>(Ld(t,e,"read from private field"),i?i.call(t):e.get(t)),at=(t,e,i)=>e.has(t)?b_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Je=(t,e,i,o)=>(Ld(t,e,"write to private field"),e.set(t,i),i),$n=(t,e,i)=>(Ld(t,e,"access private method"),i),Pt,no,Wo,El,Il,Nr,ts,xr,wi,jo,os,es,Ar,dn,Qf,Xf,Zf,Yy,Wf,jf,br,ed,td;class Ir extends EventTarget{constructor(e,i){var o,r;super(),at(this,dn),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,at(this,Pt),at(this,no),at(this,Wo),at(this,El),at(this,Il),at(this,Nr),at(this,ts),at(this,xr,null),at(this,wi),at(this,jo),at(this,os,null),at(this,es,null),at(this,Ar,null),at(this,Xf,async l=>{var c;Se(this,jo).reset();const{body:d,redirected:p,status:h,headers:y}=l;if(h===204){$n(this,dn,br).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(p?Je(this,Wo,new URL(l.url)):Je(this,Wo,void 0),h!==200){$n(this,dn,br).call(this,`Non-200 status code (${h})`,h);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){$n(this,dn,br).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(Se(this,Pt)===this.CLOSED)return;Je(this,Pt,this.OPEN);const _=new Event("open");if((c=Se(this,Ar))==null||c.call(this,_),this.dispatchEvent(_),typeof d!="object"||!d||!("getReader"in d)){$n(this,dn,br).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const T=new TextDecoder,C=d.getReader();let b=!0;do{const{done:M,value:w}=await C.read();w&&Se(this,jo).feed(T.decode(w,{stream:!M})),M&&(b=!1,Se(this,jo).reset(),$n(this,dn,ed).call(this))}while(b)}),at(this,Zf,l=>{Je(this,wi,void 0),!(l.name==="AbortError"||l.type==="aborted")&&$n(this,dn,ed).call(this,Kf(l))}),at(this,Wf,l=>{typeof l.id=="string"&&Je(this,xr,l.id);const c=new MessageEvent(l.event||"message",{data:l.data,origin:Se(this,Wo)?Se(this,Wo).origin:Se(this,no).origin,lastEventId:l.id||""});Se(this,es)&&(!l.event||l.event==="message")&&Se(this,es).call(this,c),this.dispatchEvent(c)}),at(this,jf,l=>{Je(this,Nr,l)}),at(this,td,()=>{Je(this,ts,void 0),Se(this,Pt)===this.CONNECTING&&$n(this,dn,Qf).call(this)});try{if(e instanceof URL)Je(this,no,e);else if(typeof e=="string")Je(this,no,new URL(e,Yw()));else throw new Error("Invalid URL")}catch{throw Fw("An invalid or illegal string was specified")}Je(this,jo,zw({onEvent:Se(this,Wf),onRetry:Se(this,jf)})),Je(this,Pt,this.CONNECTING),Je(this,Nr,3e3),Je(this,Il,(o=i?.fetch)!=null?o:globalThis.fetch),Je(this,El,(r=i?.withCredentials)!=null?r:!1),$n(this,dn,Qf).call(this)}get readyState(){return Se(this,Pt)}get url(){return Se(this,no).href}get withCredentials(){return Se(this,El)}get onerror(){return Se(this,os)}set onerror(e){Je(this,os,e)}get onmessage(){return Se(this,es)}set onmessage(e){Je(this,es,e)}get onopen(){return Se(this,Ar)}set onopen(e){Je(this,Ar,e)}addEventListener(e,i,o){const r=i;super.addEventListener(e,r,o)}removeEventListener(e,i,o){const r=i;super.removeEventListener(e,r,o)}close(){Se(this,ts)&&clearTimeout(Se(this,ts)),Se(this,Pt)!==this.CLOSED&&(Se(this,wi)&&Se(this,wi).abort(),Je(this,Pt,this.CLOSED),Je(this,wi,void 0))}}Pt=new WeakMap,no=new WeakMap,Wo=new WeakMap,El=new WeakMap,Il=new WeakMap,Nr=new WeakMap,ts=new WeakMap,xr=new WeakMap,wi=new WeakMap,jo=new WeakMap,os=new WeakMap,es=new WeakMap,Ar=new WeakMap,dn=new WeakSet,Qf=function(){Je(this,Pt,this.CONNECTING),Je(this,wi,new AbortController),Se(this,Il)(Se(this,no),$n(this,dn,Yy).call(this)).then(Se(this,Xf)).catch(Se(this,Zf))},Xf=new WeakMap,Zf=new WeakMap,Yy=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Se(this,xr)?{"Last-Event-ID":Se(this,xr)}:void 0},cache:"no-store",signal:(t=Se(this,wi))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},Wf=new WeakMap,jf=new WeakMap,br=function(t,e){var i;Se(this,Pt)!==this.CLOSED&&Je(this,Pt,this.CLOSED);const o=new By("error",{code:e,message:t});(i=Se(this,os))==null||i.call(this,o),this.dispatchEvent(o)},ed=function(t,e){var i;if(Se(this,Pt)===this.CLOSED)return;Je(this,Pt,this.CONNECTING);const o=new By("error",{code:e,message:t});(i=Se(this,os))==null||i.call(this,o),this.dispatchEvent(o),Je(this,ts,setTimeout(Se(this,td),Se(this,Nr)))},td=new WeakMap,Ir.CONNECTING=0,Ir.OPEN=1,Ir.CLOSED=2;Object.defineProperty(Ir,Symbol.for("eventsource.supports-fetch-override"),{value:!0,writable:!1,configurable:!1,enumerable:!1});function Yw(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}class M_ extends Vw{}M_.EventSourceImpl=Ir;function $w(t){return new M_(t,{"@instantdb/react":Pd})}const Jw="fb13a3d0-35ab-493b-9aa6-64a77363fe93",De=$w({appId:Jw}),nd={calories_min:1600,calories_max:2e3,purines_min:0,purines_max:400,protein_target:50,carbs_target:250,fat_target:65,fiber_target:25,sodium_max:2300,sugar_max:50,hydration_target:2e3},Kw={calories:{icon:"",unit:"kcal",label:"Calories"},purines:{icon:"",unit:"mg",label:"Purines"},protein:{icon:"",unit:"g",label:"Protein"},carbs:{icon:"",unit:"g",label:"Carbs"},fat:{icon:"",unit:"g",label:"Fat"},fiber:{icon:"",unit:"g",label:"Fiber"},sodium:{icon:"",unit:"mg",label:"Sodium"},sugar:{icon:"",unit:"g",label:"Sugar"},hydration:{icon:"",unit:"ml",label:"Water"}};function Qw(t,e,i,o){const r=10*t+6.25*e-5*i;return o==="male"?r+5:r-161}const Xw={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};function Zw(t,e,i,o,r){const l=Qw(t,e,i,o),c=Xw[r]||1.55;return Math.round(l*c)}function Ww(t=[]){return t.includes("kidney_disease")?150:t.includes("gout")?200:400}function jw(t,e){const i=t*30;return Math.round(i+({sedentary:0,light:200,moderate:400,active:600,very_active:800}[e]||0))}function eR(t){const{weight_kg:e,height_cm:i,age:o,sex:r,activity_level:l,dietary_conditions:c=[]}=t,d=Zw(e,i,o,r,l),p=Ww(c),h=jw(e,l),_=Math.round(e*({sedentary:.8,light:.9,moderate:1,active:1.2,very_active:1.4}[l]||1));let T=.5;c.includes("diabetes")&&(T=.4);const C=Math.round(d*T/4),b=Math.round(d*.275/9);let M=r==="female"?25:38;o>50&&(M=r==="female"?21:30);let w=2300;c.includes("kidney_disease")&&(w=1500);let R=r==="female"?25:36;return(c.includes("diabetes")||c.includes("gout"))&&(R=Math.round(R*.6)),{calories_min:Math.round(d*.85),calories_max:d,purines_min:0,purines_max:p,protein_target:_,carbs_target:C,fat_target:b,fiber_target:M,sodium_max:w,sugar_max:R,hydration_target:h}}function tR(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`}function $y(){return tR(new Date)}function nR(t){t=t.replace(/^#/,"");const e=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255,r=Math.max(e,i,o),l=Math.min(e,i,o);let c,d,p=(r+l)/2;if(r===l)c=d=0;else{const h=r-l;switch(d=p>.5?h/(2-r-l):h/(r+l),r){case e:c=((i-o)/h+(i<o?6:0))/6;break;case i:c=((o-e)/h+2)/6;break;case o:c=((e-i)/h+4)/6;break}}return{h:Math.round(c*360),s:Math.round(d*100),l:Math.round(p*100)}}function ct(t,e,i){e/=100,i/=100;const o=(1-Math.abs(2*i-1))*e,r=o*(1-Math.abs(t/60%2-1)),l=i-o/2;let c=0,d=0,p=0;return 0<=t&&t<60?(c=o,d=r,p=0):60<=t&&t<120?(c=r,d=o,p=0):120<=t&&t<180?(c=0,d=o,p=r):180<=t&&t<240?(c=0,d=r,p=o):240<=t&&t<300?(c=r,d=0,p=o):300<=t&&t<360&&(c=o,d=0,p=r),c=Math.round((c+l)*255).toString(16).padStart(2,"0"),d=Math.round((d+l)*255).toString(16).padStart(2,"0"),p=Math.round((p+l)*255).toString(16).padStart(2,"0"),`#${c}${d}${p}`}function io(t,e=!1){const i=nR(t);return e?{primary:t,primaryLight:ct(i.h,i.s*.8,Math.min(i.l+15,80)),primaryDark:ct(i.h,i.s,Math.max(i.l-15,20)),background:ct(i.h,i.s*.2,12),surface:ct(i.h,i.s*.15,18),surfaceVariant:ct(i.h,i.s*.2,25),secondary:ct((i.h+180)%360,i.s*.7,60),text:ct(i.h,i.s*.1,95),textSecondary:ct(i.h,i.s*.15,70),border:ct(i.h,i.s*.2,30),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}:{primary:t,primaryLight:ct(i.h,i.s*.6,Math.min(i.l+20,90)),primaryDark:ct(i.h,i.s,Math.max(i.l-20,30)),background:ct(i.h,i.s*.3,97),surface:ct(i.h,i.s*.1,100),surfaceVariant:ct(i.h,i.s*.2,95),secondary:ct((i.h+180)%360,i.s*.7,i.l),text:ct(i.h,i.s*.5,15),textSecondary:ct(i.h,i.s*.3,40),border:ct(i.h,i.s*.2,85),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}}const Dr={emerald:{name:"Emerald Dragon",description:"Bright, cheerful, default",seedColor:"#66BB6A",isDark:!1},midnight:{name:"Midnight Dragon",description:"Sleek, easy on eyes",seedColor:"#7B2CBF",isDark:!0},crystal:{name:"Crystal Dragon",description:"High contrast, accessible",seedColor:"#2196F3",isDark:!1}};function oo(t){const e=document.documentElement;Object.entries(t).forEach(([i,o])=>{const r=`--color-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`;e.style.setProperty(r,o)})}function iR(t,e,i){return t>i?"danger":t>i*.8||e&&t<e*.8?"warning":"success"}const w_=U.createContext(null),_r={id:"local-user",name:"Dragon Keeper",profile:{sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]},thresholds:nd,theme:{preset:"emerald",seed_color_hex:"#66BB6A"},badges:[],stats:{total_meals_logged:0,current_streak_days:0,longest_streak_days:0,meals_saved_to_stash:0}};function oR({children:t}){const[e,i]=U.useState(null),[o,r]=U.useState(!0),[l,c]=U.useState(!1),{isLoading:d,error:p,data:h}=De.useQuery({users:{}});U.useEffect(()=>{if(!d){if(h?.users&&h.users.length>0){const M=h.users[0];if(i({..._r,...M,profile:{..._r.profile,...M.profile},thresholds:{..._r.thresholds,...M.thresholds},theme:{..._r.theme,...M.theme}}),c(!0),M.theme?.preset){const w=Dr[M.theme.preset];if(w){const R=io(w.seedColor,w.isDark);oo(R)}else if(M.theme.seed_color_hex){const R=io(M.theme.seed_color_hex,!1);oo(R)}}}else{i(_r),c(!1);const M=Dr.emerald,w=io(M.seedColor,M.isDark);oo(w)}r(!1)}},[d,h]);const b={user:e,isLoading:o||d,isAuthenticated:l,error:p,updateProfile:async M=>{const w={...e,profile:{...e.profile,...M}};i(w),e.id&&e.id!=="local-user"&&await De.transact([De.tx.users[e.id].update({profile:w.profile})])},updateThresholds:async M=>{const w={...e,thresholds:{...e.thresholds,...M}};i(w),e.id&&e.id!=="local-user"&&await De.transact([De.tx.users[e.id].update({thresholds:w.thresholds})])},updateTheme:async(M,w=null)=>{const R={preset:M,seed_color_hex:w||e.theme.seed_color_hex},D={...e,theme:R};if(i(D),M==="custom"&&w){const P=io(w,!1);oo(P)}else{const P=Dr[M];if(P){const J=io(P.seedColor,P.isDark);oo(J)}}e.id&&e.id!=="local-user"&&await De.transact([De.tx.users[e.id].update({theme:R})])},saveUser:async(M=null)=>{const w=M||e;if(e.id==="local-user"){const R=crypto.randomUUID(),D={...w,id:R};return await De.transact([De.tx.users[R].update({id:R,name:D.name,profile:D.profile,thresholds:D.thresholds,theme:D.theme,badges:D.badges||[],stats:D.stats||{},created_at:Date.now()})]),i(D),c(!0),R}else return await De.transact([De.tx.users[e.id].update({name:w.name,profile:w.profile,thresholds:w.thresholds,theme:w.theme,updated_at:Date.now()})]),e.id},setUser:i};return E.jsx(w_.Provider,{value:b,children:t})}function Br(){const t=U.useContext(w_);if(!t)throw new Error("useUser must be used within a UserProvider");return t}const sR=[{path:"/",icon:"",label:"Diary"},{path:"/charts",icon:"",label:"Scroll"},{path:"/oracle",icon:"",label:"Oracle"},{path:"/settings",icon:"",label:"Lair"}];function rR(){return E.jsx("nav",{className:"nav-bar",children:sR.map(t=>E.jsxs(O0,{to:t.path,className:({isActive:e})=>`nav-item ${e?"active":""}`,children:[E.jsx("span",{className:"nav-icon",children:t.icon}),E.jsx("span",{className:"nav-label",children:t.label})]},t.path))})}function Ii({title:t,subtitle:e,action:i,showBack:o,onBack:r}){return E.jsx("header",{className:"header",children:E.jsxs("div",{className:"header-content",children:[o&&E.jsx("button",{className:"header-back",onClick:r,"aria-label":"Go back",children:""}),E.jsxs("div",{className:"header-title-group",children:[E.jsxs("h1",{className:"header-title",children:[E.jsx("span",{className:"header-dragon",children:""})," ",t]}),e&&E.jsx("p",{className:"header-subtitle",children:e})]}),i&&E.jsx("div",{className:"header-action",children:i})]})})}function Yn({nutrient:t,value:e,target:i,min:o=0,max:r,showLabel:l=!0,compact:c=!1}){const d=Kw[t]||{icon:"",unit:"",label:t},p=r||i,h=Math.min(e/p*100,100),y=iR(e,o,p);return E.jsxs("div",{className:`nutrient-progress ${c?"compact":""}`,children:[l&&E.jsxs("div",{className:"nutrient-header",children:[E.jsxs("span",{className:"nutrient-label",children:[E.jsx("span",{className:"nutrient-icon",children:d.icon}),E.jsx("span",{className:"nutrient-name",children:d.label})]}),E.jsxs("span",{className:"nutrient-value",children:[E.jsx("span",{className:"current",children:Math.round(e)}),E.jsx("span",{className:"separator",children:"/"}),E.jsx("span",{className:"target",children:Math.round(p)}),E.jsx("span",{className:"unit",children:d.unit})]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${y}`,style:{width:`${h}%`}})}),!c&&E.jsxs("div",{className:"nutrient-footer",children:[E.jsxs("span",{className:`status-indicator ${y}`,children:[y==="success"&&"",y==="warning"&&"",y==="danger"&&""]}),E.jsxs("span",{className:"percentage",children:[Math.round(h),"%"]})]})]})}const Jy={curious:{emoji:"",animation:"sniff",message:"Your dragon is looking for food..."},happy:{emoji:"",animation:"bounce",message:"Your dragon is happy!"},satisfied:{emoji:"",animation:"pulse",message:"Your dragon is satisfied and content."},stuffed:{emoji:"",animation:"wobble",message:"Your dragon ate too much!"},sick:{emoji:"",animation:"shake",message:"Your dragon isn't feeling well..."},celebrating:{emoji:"",animation:"celebrate",message:"Your dragon is celebrating! "},hoarding:{emoji:"",animation:"hoard",message:"Saved to your dragon's hoard!"}};function Dl({state:t="happy",showMessage:e=!0,size:i="medium"}){const o=Jy[t]||Jy.happy;return E.jsxs("div",{className:`ember-mascot ${i}`,children:[E.jsxs("div",{className:`ember-emoji ${o.animation}`,children:[o.emoji,t==="sick"&&E.jsx("span",{className:"ember-effect",children:""}),t==="celebrating"&&E.jsx("span",{className:"ember-effect",children:""}),t==="happy"&&E.jsx("span",{className:"ember-effect",children:""})]}),e&&E.jsx("p",{className:"ember-message",children:o.message})]})}function aR(t,e){if(!t||!e)return"curious";const i=t.calories/e.calories_max,o=t.purines/e.purines_max;return o>1?"sick":i>1?"stuffed":o>.8||i>.8?"satisfied":t.calories===0?"curious":"happy"}const id=()=>{const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`},Ky={breakfast:1,lunch:2,dinner:3,snack:4,hydration:5};function R_(t=null){const{user:e}=Br(),i=e?.id,o=t?{meals:{$:{where:{user_id:i,date:t}}}}:{meals:{$:{where:{user_id:i}}}},{isLoading:r,error:l,data:c}=De.useQuery(i?o:null),d=c?.meals||[];return{meals:U.useMemo(()=>[...d].sort((C,b)=>{const M=Ky[C.meal_type]||99,w=Ky[b.meal_type]||99;return M-w}),[d]),isLoading:r,error:l,addMeal:async C=>{if(!i)return null;const b=crypto.randomUUID(),M={id:b,user_id:i,date:C.date||id(),timestamp:Date.now(),meal_type:C.meal_type||"snack",meal_name:C.meal_name||"Unnamed Meal",ingredients:C.ingredients||[],total_nutrients:C.total_nutrients||{},hydration_ml:C.hydration_ml||0,image_urls:C.image_urls||[],analysis_method:C.analysis_method||"manual"};return await De.transact([De.tx.meals[b].update(M)]),b},updateMeal:async(C,b)=>{await De.transact([De.tx.meals[C].update({...b,updated_at:Date.now()})])},deleteMeal:async C=>{await De.transact([De.tx.meals[C].delete()])},getDailyTotals:(C=t||id())=>d.filter(w=>w.date===C).reduce((w,R)=>(R.total_nutrients&&Object.keys(R.total_nutrients).forEach(D=>{w[D]=(w[D]||0)+(R.total_nutrients[D]||0)}),w.hydration=(w.hydration||0)+(R.hydration_ml||0),w),{})}}function N_(t=id()){const{user:e}=Br(),i=e?.id,{isLoading:o,data:r}=De.useQuery(i?{hydration:{$:{where:{user_id:i,date:t}}}}:null),c=(r?.hydration||[])[0],d=c?.amount_ml||0,p=async y=>{if(i)if(c)await De.transact([De.tx.hydration[c.id].update({amount_ml:Math.max(0,y),updated_at:Date.now()})]);else{const _=crypto.randomUUID();await De.transact([De.tx.hydration[_].update({id:_,user_id:i,date:t,amount_ml:Math.max(0,y),created_at:Date.now(),updated_at:Date.now()})])}};return{totalHydration:d,isLoading:o,setHydration:p,adjustHydration:async y=>{if(!i)return;const _=Math.max(0,d+y);await p(_)}}}function kd(){const{user:t}=Br(),e=t?.id,{isLoading:i,error:o,data:r}=De.useQuery(e?{customItems:{$:{where:{user_id:e}}}}:null),l=r?.customItems||[],c=l.filter(T=>T.type==="meal"),d=l.filter(T=>T.type==="ingredient"),p=l.filter(T=>T.type==="container");return{savedMeals:c,customIngredients:d,bottles:p,items:l,isLoading:i,error:o,addToStash:async T=>{if(!e)return null;const C=crypto.randomUUID();return await De.transact([De.tx.customItems[C].update({id:C,user_id:e,type:T.type,name:T.name,icon:T.icon||null,ingredients:T.ingredients||[],total_nutrients:T.total_nutrients||{},capacity_ml:T.capacity_ml||0,use_count:T.use_count||0,created_at:Date.now()})]),C},removeFromStash:async T=>{await De.transact([De.tx.customItems[T].delete()])},updateStashItem:async(T,C)=>{await De.transact([De.tx.customItems[T].update({...C,updated_at:Date.now()})])}}}let lR,uR;function cR(){return{geminiUrl:lR,vertexUrl:uR}}function fR(t,e,i,o){var r,l;if(!t?.baseUrl){const c=cR();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class ti{}function te(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(i))t[d]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];m(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),i)):i}else return i}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function dR(t,e){for(const[i,o]of Object.entries(e)){const r=i.split("."),l=o.split("."),c=new Set;let d=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}od(t,r,l,0,c)}}function od(t,e,i,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])od(p,e,i,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of d)p[h]=c[h];for(const[h,y]of Object.entries(p)){const _=[];for(const T of i.slice(o))T==="*"?_.push(h):_.push(T);m(c,_,y)}for(const h of d)delete c[h]}}else{const c=t;l in c&&od(c[l],e,i,o+1,r)}}function Od(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function hR(t){const e={},i=f(t,["operationName"]);i!=null&&m(e,["operationName"],i);const o=f(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function pR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],gR(c)),e}function mR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],yR(c)),e}function gR(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vR(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function yR(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>_R(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function vR(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],bR(i)),e}function _R(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],MR(i)),e}function TR(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function SR(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function ER(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],CR(c)),e}function CR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function x_(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],AR(c)),e}function AR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function bR(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Od(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function MR(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Od(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}var Qy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qy||(Qy={}));var Xy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Xy||(Xy={}));var Zy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Zy||(Zy={}));var Ri;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ri||(Ri={}));var Wy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wy||(Wy={}));var jy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jy||(jy={}));var ev;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ev||(ev={}));var tv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(tv||(tv={}));var nv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(nv||(nv={}));var iv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(iv||(iv={}));var ov;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ov||(ov={}));var sv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(sv||(sv={}));var rv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(rv||(rv={}));var av;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(av||(av={}));var lv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(lv||(lv={}));var uv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uv||(uv={}));var cv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(cv||(cv={}));var fv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(fv||(fv={}));var dv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dv||(dv={}));var Ul;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ul||(Ul={}));var hv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hv||(hv={}));var pv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pv||(pv={}));var mv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(mv||(mv={}));var sd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sd||(sd={}));var gv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(gv||(gv={}));var yv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yv||(yv={}));var vv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(vv||(vv={}));var _v;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_v||(_v={}));var Tv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Tv||(Tv={}));var Sv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sv||(Sv={}));var Ev;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ev||(Ev={}));var Cv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Cv||(Cv={}));var Av;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Av||(Av={}));var bv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(bv||(bv={}));var Mv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Mv||(Mv={}));var wv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(wv||(wv={}));var Rv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Rv||(Rv={}));var Nv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Nv||(Nv={}));var xv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(xv||(xv={}));var Iv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Iv||(Iv={}));var Dv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Dv||(Dv={}));var Uv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Uv||(Uv={}));var Pv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Pv||(Pv={}));var Lv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Lv||(Lv={}));var kv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(kv||(kv={}));var Ov;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ov||(Ov={}));var qv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qv||(qv={}));var Gv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Gv||(Gv={}));var Hv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hv||(Hv={}));var Vv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Vv||(Vv={}));var zv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zv||(zv={}));var Bv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bv||(Bv={}));var Fv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Fv||(Fv={}));var Yv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Yv||(Yv={}));var ns;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ns||(ns={}));class rd{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Tr{get text(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const T of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,b]of Object.entries(T))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(C);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,C]of Object.entries(_))T!=="inlineData"&&(C!==null||C!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class $v{}class Jv{}class wR{}class RR{}class NR{}class xR{}class Kv{}class Qv{}class Xv{}class IR{}class Pl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Pl;let r;const l=e;return i?r=mR(l):r=pR(l),Object.assign(o,r),o}}class Zv{}class Wv{}class jv{}class DR{}class UR{}class PR{}class qd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new qd,l=ER(e);return Object.assign(o,l),o}}class LR{}class kR{}class OR{}class e0{}class qR{get text(){var e,i,o;let r="",l=!1;const c=[];for(const d of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,o;let r="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class GR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Gd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Gd,l=x_(e);return Object.assign(o,l),o}}function Ne(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function I_(t,e){const i=Ne(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function D_(t){return Array.isArray(t)?t.map(e=>Ll(e)):[Ll(t)]}function Ll(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function U_(t){const e=Ll(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function P_(t){const e=Ll(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function t0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function L_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>t0(e)):[t0(t)]}function ad(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function n0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function i0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ct(t){if(t==null)throw new Error("ContentUnion is required");return ad(t)?t:{role:"user",parts:L_(t)}}function Hd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Ct(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Ct(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Ct(i)):[Ct(e)]}function an(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(n0(t)||i0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ct(t)]}const e=[],i=[],o=ad(t[0]);for(const r of t){const l=ad(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(n0(r)||i0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||e.push({role:"user",parts:L_(i)}),e}function HR(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(Ri).includes(i[0].toUpperCase())?i[0].toUpperCase():Ri.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(Ri).includes(o.toUpperCase())?o.toUpperCase():Ri.TYPE_UNSPECIFIED})}}function ss(t){const e={},i=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&HR(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Ri).includes(d.toUpperCase())?d.toUpperCase():Ri.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ss(d);else if(o.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(ss(h))}e[c]=p}else if(r.includes(c)){const p={};for(const[h,y]of Object.entries(d))p[h]=ss(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Vd(t){return ss(t)}function zd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Bd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function gs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ss(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ss(e.response));return t}function ys(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function VR(t,e,i,o=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function ni(t,e){if(typeof e!="string")throw new Error("name must be a string");return VR(t,e,"cachedContents")}function k_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ui(t){return Od(t)}function zR(t){return t!=null&&typeof t=="object"&&"name"in t}function BR(t){return t!=null&&typeof t=="object"&&"video"in t}function FR(t){return t!=null&&typeof t=="object"&&"uri"in t}function O_(t){var e;let i;if(zR(t)&&(i=t.name),!(FR(t)&&(i=t.uri,i===void 0))&&!(BR(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function q_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function G_(t){for(const e of["models","tunedModels","publisherModels"])if(YR(t,e))return t[e];return[]}function YR(t,e){return t!==null&&typeof t=="object"&&e in t}function $R(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function JR(t,e={}){const i=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=$R(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function H_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function KR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function V_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vs(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function z_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function QR(t){const e={},i=f(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>NN(c))),m(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function XR(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function ZR(t){const e={},i=f(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Cl(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&m(e,["state"],z_(r));const l=f(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const d=f(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],QR(V_(h))),e}function ld(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["state"]);r!=null&&m(e,["state"],z_(r));const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["createTime"]);c!=null&&m(e,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(t,["model"]);y!=null&&m(e,["model"],y);const _=f(t,["inputConfig"]);_!=null&&m(e,["src"],WR(_));const T=f(t,["outputConfig"]);T!=null&&m(e,["dest"],XR(V_(T)));const C=f(t,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function WR(t){const e={},i=f(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function jR(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&m(i,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>RN(t,c))),m(i,["requests","requests"],l)}return i}function eN(t){const e={},i=f(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tN(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function iN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function oN(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],sN(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function sN(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function B_(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>kN(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function rN(t,e){const i={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function aN(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],ZR(KR(r))),i}function o0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],jR(t,H_(t,r)));const l=f(e,["config"]);return l!=null&&rN(l,i),i}function lN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],Ne(t,o));const r=f(e,["src"]);r!=null&&m(i,["inputConfig"],eN(H_(t,r)));const l=f(e,["config"]);return l!=null&&aN(l,i),i}function uN(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),i}function cN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],yN(t,r));const l=f(e,["config"]);return l!=null&&uN(l,i),i}function fN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function dN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function hN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function pN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function mN(t,e){const i={},o=f(e,["contents"]);if(o!=null){let l=Hd(t,o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(m(i,["_self"],gN(r,i)),dR(i,{"requests[].*":"requests[].request.*"})),i}function gN(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function yN(t,e){const i={},o=f(e,["fileName"]);o!=null&&m(i,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&m(i,["requests"],mN(t,r)),i}function vN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function _N(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TN(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SN(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],B_(Ct(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Vd(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(e,["safetySettings"]);if(i!==void 0&&P!=null){let se=P;Array.isArray(se)&&(se=se.map(be=>ON(be))),m(i,["safetySettings"],se)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let se=ys(J);Array.isArray(se)&&(se=se.map(be=>GN(gs(be)))),m(i,["tools"],se)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],qN(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);i!==void 0&&Z!=null&&m(i,["cachedContent"],ni(t,Z));const Q=f(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const ne=f(e,["mediaResolution"]);ne!=null&&m(o,["mediaResolution"],ne);const j=f(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],zd(j)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=f(e,["thinkingConfig"]);ae!=null&&m(o,["thinkingConfig"],ae);const me=f(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],wN(me)),o}function EN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>oN(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function CN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function AN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],vs(t,o)),i}function bN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function MN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function wN(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["request","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let d=an(r);Array.isArray(d)&&(d=d.map(p=>B_(p))),m(i,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(e,["config"]);return c!=null&&m(i,["request","generationConfig"],SN(t,c,f(i,["request"],{}))),i}function NN(t){const e={},i=f(t,["response"]);i!=null&&m(e,["response"],EN(i));const o=f(t,["error"]);return o!=null&&m(e,["error"],o),e}function xN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function IN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function DN(t){const e={},i=f(t,["config"]);return i!=null&&xN(i,e),e}function UN(t){const e={},i=f(t,["config"]);return i!=null&&IN(i,e),e}function PN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Cl(c))),m(e,["batchJobs"],l)}return e}function LN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ld(c))),m(e,["batchJobs"],l)}return e}function kN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],vN(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],_N(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],tN(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function ON(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function qN(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],TN(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function GN(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],bN(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],MN(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var jn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(jn||(jn={}));class lo{constructor(e,i,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,r)}init(e,i,o){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class HN extends ti{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new lo(jn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=o0(this.apiClient,e),o=i._url,r=te("{model}:batchGenerateContent",o),d=i.batch.inputConfig.requests,p=d.requests,h=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const C=_.request;C.systemInstruction=T,_.request=C}h.push(_)}return d.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=lN(this.apiClient,e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>ld(y))}else{const h=o0(this.apiClient,e);return d=te("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Cl(y))}}async createEmbeddingsInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cN(this.apiClient,e);return l=te("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>Cl(p))}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=AN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>ld(y))}else{const h=CN(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Cl(y))}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=iN(this.apiClient,e);c=te("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nN(this.apiClient,e);c=te("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=UN(e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=LN(y),T=new e0;return Object.assign(T,_),T})}else{const h=DN(e);return d=te("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=PN(y),T=new e0;return Object.assign(T,_),T})}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=dN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>pN(y))}else{const h=fN(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>hN(y))}}}function VN(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function s0(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>cx(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function zN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=an(c);Array.isArray(y)&&(y=y.map(_=>s0(_))),m(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],s0(Ct(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>dx(_))),m(e,["tools"],y)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],fx(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function BN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=an(c);Array.isArray(_)&&(_=_.map(T=>T)),m(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],Ct(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>hx(T))),m(e,["tools"],_)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function FN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],I_(t,o));const r=f(e,["config"]);return r!=null&&zN(r,i),i}function YN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],I_(t,o));const r=f(e,["config"]);return r!=null&&BN(r,i),i}function $N(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ni(t,o)),i}function JN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ni(t,o)),i}function KN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function QN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function XN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function ZN(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WN(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jN(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function ex(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ni(t,o)),i}function tx(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ni(t,o)),i}function nx(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function ix(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function ox(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function sx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function rx(t){const e={},i=f(t,["config"]);return i!=null&&ox(i,e),e}function ax(t){const e={},i=f(t,["config"]);return i!=null&&sx(i,e),e}function lx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function ux(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function cx(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],XN(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],ZN(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],VN(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function fx(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],WN(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function dx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],nx(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],ix(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function hx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>jN(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function px(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function mx(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function gx(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],ni(t,o));const r=f(e,["config"]);return r!=null&&px(r,i),i}function yx(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],ni(t,o));const r=f(e,["config"]);return r!=null&&mx(r,i),i}class vx extends ti{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new lo(jn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=YN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=FN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=ex(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=JN(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=QN(y),T=new Wv;return Object.assign(T,_),T})}else{const h=$N(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=KN(y),T=new Wv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=yx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=gx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=ax(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=ux(y),T=new jv;return Object.assign(T,_),T})}else{const h=rx(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=lx(y),T=new jv;return Object.assign(T,_),T})}}}function r0(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function rs(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(C){return function(b){return Promise.resolve(b).then(C,_)}}function d(C,b){o[C]&&(r[C]=function(M){return new Promise(function(w,R){l.push([C,M,w,R])>1||p(C,M)})},b&&(r[C]=b(r[C])))}function p(C,b){try{h(o[C](b))}catch(M){T(l[0][3],M)}}function h(C){C.value instanceof Be?Promise.resolve(C.value.v).then(y,_):T(l[0][2],C)}function y(C){p("next",C)}function _(C){p("throw",C)}function T(C,b){C(b),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Ur(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof r0=="function"?r0(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(d,p){c=t[l](c),r(d,p,c.done,c.value)})}}function r(l,c,d,p){Promise.resolve(p).then(function(h){l({value:h,done:d})},c)}}function _x(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:F_(i)}function F_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Tx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function a0(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<i&&t[o].role==="model";)r.push(t[o]),l&&!F_(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Sx{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Ex(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ex{constructor(e,i,o,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Tx(l)}async sendMessage(e){var i;await this.sendPromise;const o=Ct(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await r,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(d=y.slice(_))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(o,C,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const o=Ct(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?a0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,r;return rs(this,arguments,function*(){var c,d,p,h;const y=[];try{for(var _=!0,T=Ur(e),C;C=yield Be(T.next()),c=C.done,!c;_=!0){h=C.value,_=!1;const b=h;if(_x(b)){const M=(r=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;M!==void 0&&y.push(M)}yield yield Be(b)}}catch(b){d={error:b}}finally{try{!_&&!c&&(p=T.return)&&(yield Be(p.call(T)))}finally{if(d)throw d.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...a0(o)):this.history.push(e),this.history.push(...r)}}class Bl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bl.prototype)}}function Cx(t){const e={},i=f(t,["file"]);return i!=null&&m(e,["file"],i),e}function Ax(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bx(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],O_(i)),e}function Mx(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function wx(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],O_(i)),e}function Rx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function Nx(t){const e={},i=f(t,["config"]);return i!=null&&Rx(i,e),e}function xx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}class Ix extends ti{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new lo(jn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Nx(e);return l=te("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=xx(p),y=new LR;return Object.assign(y,h),y})}}async createInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Cx(e);return l=te("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Ax(p),y=new kR;return Object.assign(y,h),y})}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wx(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bx(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Mx(p),y=new OR;return Object.assign(y,h),y})}}}function Al(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Dx(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Kx(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function Ux(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Px(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lx(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function kx(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],Y_(D));const P=f(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const Z=f(t,["topK"]);Z!=null&&m(e,["topK"],Z);const Q=f(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ox(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function qx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Gx(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Bd(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Dx(Ct(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let Z=ys(M);Array.isArray(Z)&&(Z=Z.map(Q=>Xx(gs(Q)))),m(e,["setup","tools"],Z)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Qx(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Hx(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],kx(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Y_(Bd(_)));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Ct(b));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let Z=ys(M);Array.isArray(Z)&&(Z=Z.map(Q=>Zx(gs(Q)))),m(e,["setup","tools"],Z)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Vx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],Gx(r,i)),i}function zx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],Hx(r,i)),i}function Bx(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function Fx(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function Yx(t){const e={},i=f(t,["media"]);if(i!=null){let h=D_(i);Array.isArray(h)&&(h=h.map(y=>Al(y))),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],Al(P_(o)));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],Al(U_(l)));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function $x(t){const e={},i=f(t,["media"]);if(i!=null){let h=D_(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],P_(o));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],U_(l));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Jx(t){const e={},i=f(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const o=f(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],Wx(c));const d=f(t,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function Kx(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],Ux(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],Px(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Al(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Qx(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Y_(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Xx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],Ox(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],qx(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Zx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>Lx(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Wx(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const o=f(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const d=f(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["promptTokensDetails"],C)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["cacheTokensDetails"],C)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["responseTokensDetails"],C)}const _=f(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["toolUsePromptTokensDetails"],C)}const T=f(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function jx(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function eI(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],tI(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function tI(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function nI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let l=an(r);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function iI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["tokensInfo"],r)}return e}function oI(t){const e={},i=f(t,["values"]);i!=null&&m(e,["values"],i);const o=f(t,["statistics"]);return o!=null&&m(e,["statistics"],sI(o)),e}function sI(t){const e={},i=f(t,["truncated"]);i!=null&&m(e,["truncated"],i);const o=f(t,["token_count"]);return o!=null&&m(e,["tokenCount"],o),e}function Fl(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>pD(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function rI(t){const e={},i=f(t,["controlType"]);i!=null&&m(e,["controlType"],i);const o=f(t,["enableControlImageComputation"]);return o!=null&&m(e,["computeControl"],o),e}function aI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lI(t,e){const i={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],Ct(o));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>X_(d))),m(e,["tools"],c)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],jI(l)),i}function uI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let c=an(r);Array.isArray(c)&&(c=c.map(d=>Fl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&aI(l),i}function cI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let c=an(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&lI(l,i),i}function fI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);o!=null&&m(e,["totalTokens"],o);const r=f(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function dI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);return o!=null&&m(e,["totalTokens"],o),e}function hI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ne(t,o)),i}function pI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ne(t,o)),i}function mI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function gI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function yI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const P=f(t,["baseSteps"]);return e!==void 0&&P!=null&&m(e,["parameters","editConfig","baseSteps"],P),i}function vI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>TD(p))),m(i,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&yI(c,i),i}function _I(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Yl(l))),m(e,["generatedImages"],r)}return e}function TI(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function SI(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["instances[]","task_type"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),i}function EI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let d=Hd(t,r);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&TI(l,i);const c=f(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Ne(t,c)),i}function CI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let c=Hd(t,r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&SI(l,i),i}function AI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function bI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>oI(c))),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function MI(t){const e={},i=f(t,["endpoint"]);i!=null&&m(e,["name"],i);const o=f(t,["deployedModelId"]);return o!=null&&m(e,["deployedModelId"],o),e}function wI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function RI(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NI(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xI(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function II(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Fl(Ct(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Vd(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(e,["safetySettings"]);if(i!==void 0&&P!=null){let se=P;Array.isArray(se)&&(se=se.map(be=>SD(be))),m(i,["safetySettings"],se)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let se=ys(J);Array.isArray(se)&&(se=se.map(be=>RD(gs(be)))),m(i,["tools"],se)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],wD(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=f(e,["cachedContent"]);i!==void 0&&Z!=null&&m(i,["cachedContent"],ni(t,Z));const Q=f(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const ne=f(e,["mediaResolution"]);ne!=null&&m(o,["mediaResolution"],ne);const j=f(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],zd(j)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=f(e,["thinkingConfig"]);ae!=null&&m(o,["thinkingConfig"],ae);const me=f(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],oD(me)),o}function DI(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Ct(r));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=f(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Vd(R));const D=f(e,["responseJsonSchema"]);D!=null&&m(o,["responseJsonSchema"],D);const P=f(e,["routingConfig"]);P!=null&&m(o,["routingConfig"],P);const J=f(e,["modelSelectionConfig"]);J!=null&&m(o,["modelConfig"],J);const B=f(e,["safetySettings"]);if(i!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(W=>W)),m(i,["safetySettings"],V)}const Z=f(e,["tools"]);if(i!==void 0&&Z!=null){let V=ys(Z);Array.isArray(V)&&(V=V.map(W=>X_(gs(W)))),m(i,["tools"],V)}const Q=f(e,["toolConfig"]);i!==void 0&&Q!=null&&m(i,["toolConfig"],Q);const ne=f(e,["labels"]);i!==void 0&&ne!=null&&m(i,["labels"],ne);const j=f(e,["cachedContent"]);i!==void 0&&j!=null&&m(i,["cachedContent"],ni(t,j));const ae=f(e,["responseModalities"]);ae!=null&&m(o,["responseModalities"],ae);const me=f(e,["mediaResolution"]);me!=null&&m(o,["mediaResolution"],me);const se=f(e,["speechConfig"]);se!=null&&m(o,["speechConfig"],Q_(zd(se)));const be=f(e,["audioTimestamp"]);be!=null&&m(o,["audioTimestamp"],be);const qe=f(e,["thinkingConfig"]);qe!=null&&m(o,["thinkingConfig"],qe);const He=f(e,["imageConfig"]);return He!=null&&m(o,["imageConfig"],sD(He)),o}function l0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let c=an(r);Array.isArray(c)&&(c=c.map(d=>Fl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],II(t,l,i)),i}function u0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["contents"]);if(r!=null){let c=an(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],DI(t,l,i)),i}function c0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>eI(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function f0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const l=f(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const d=f(t,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function UI(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=f(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=f(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(t,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function PI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=f(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const P=f(t,["enhancePrompt"]);return e!==void 0&&P!=null&&m(e,["parameters","enhancePrompt"],P),i}function LI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&UI(l,i),i}function kI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&PI(l,i),i}function OI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>QI(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],J_(r)),e}function qI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Yl(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],K_(r)),e}function GI(t,e){const i={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=f(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],$l(y));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>VD(C))),m(e,["instances[0]","referenceImages"],T)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function HI(t,e){const i={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=f(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const d=f(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const T=f(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const b=f(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const M=f(t,["lastFrame"]);e!==void 0&&M!=null&&m(e,["instances[0]","lastFrame"],gn(M));const w=f(t,["referenceImages"]);if(e!==void 0&&w!=null){let P=w;Array.isArray(P)&&(P=P.map(J=>zD(J))),m(e,["instances[0]","referenceImages"],P)}const R=f(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],HD(R));const D=f(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function VI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],YI(c)),e}function zI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],$I(c)),e}function BI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],$l(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],Z_(c));const d=f(e,["source"]);d!=null&&JI(d,i);const p=f(e,["config"]);return p!=null&&GI(p,i),i}function FI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],gn(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],W_(c));const d=f(e,["source"]);d!=null&&KI(d,i);const p=f(e,["config"]);return p!=null&&HI(p,i),i}function YI(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ZI(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function $I(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>WI(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function JI(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],$l(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],Z_(l)),i}function KI(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],gn(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],W_(l)),i}function QI(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],rD(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],J_(r)),e}function Yl(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],$_(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);r!=null&&m(e,["safetyAttributes"],K_(r));const l=f(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function XI(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["mask"],$_(i));const o=f(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["labels"],r)}return e}function ZI(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],qD(i)),e}function WI(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],GD(i)),e}function jI(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=f(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],Q_(D));const P=f(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const Z=f(t,["topK"]);Z!=null&&m(e,["topK"],Z);const Q=f(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eD(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ne(t,o)),i}function tD(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Ne(t,o)),i}function nD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function iD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function oD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);o!=null&&m(e,["imageSize"],o);const r=f(t,["outputMimeType"]);r!=null&&m(e,["imageOutputOptions","mimeType"],r);const l=f(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function rD(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Ui(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function $_(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],Ui(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function $l(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Ui(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function gn(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Ui(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function aD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],q_(t,d)),o}function lD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],q_(t,d)),o}function uD(t,e){const i={},o=f(e,["config"]);return o!=null&&aD(t,o,i),i}function cD(t,e){const i={},o=f(e,["config"]);return o!=null&&lD(t,o,i),i}function fD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=G_(r);Array.isArray(l)&&(l=l.map(c=>ud(c))),m(e,["models"],l)}return e}function dD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=G_(r);Array.isArray(l)&&(l=l.map(c=>cd(c))),m(e,["models"],l)}return e}function hD(t){const e={},i=f(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const o=f(t,["segmentationClasses"]);o!=null&&m(e,["maskClasses"],o);const r=f(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function ud(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["version"]);l!=null&&m(e,["version"],l);const c=f(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],ND(c));const d=f(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=f(t,["temperature"]);y!=null&&m(e,["temperature"],y);const _=f(t,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const T=f(t,["topP"]);T!=null&&m(e,["topP"],T);const C=f(t,["topK"]);C!=null&&m(e,["topK"],C);const b=f(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function cd(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["versionId"]);l!=null&&m(e,["version"],l);const c=f(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>MI(T))),m(e,["endpoints"],_)}const d=f(t,["labels"]);d!=null&&m(e,["labels"],d);const p=f(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],xD(p));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=f(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["checkpoints"],_)}return e}function pD(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],wI(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],RI(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],jx(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function mD(t){const e={},i=f(t,["productImage"]);return i!=null&&m(e,["image"],gn(i)),e}function gD(t,e){const i={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const T=f(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const C=f(t,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),i}function yD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["source"]);r!=null&&_D(r,i);const l=f(e,["config"]);return l!=null&&gD(l,i),i}function vD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Yl(r))),m(e,["generatedImages"],o)}return e}function _D(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],gn(r));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>mD(d))),m(e,["instances[0]","productImages"],c)}return i}function TD(t){const e={},i=f(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],gn(i));const o=f(t,["referenceId"]);o!=null&&m(e,["referenceId"],o);const r=f(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const l=f(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],hD(l));const c=f(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],rI(c));const d=f(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function J_(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function K_(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function SD(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function ED(t){const e={},i=f(t,["image"]);return i!=null&&m(e,["image"],gn(i)),e}function CD(t,e){const i={},o=f(t,["mode"]);e!==void 0&&o!=null&&m(e,["parameters","mode"],o);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function AD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["source"]);r!=null&&MD(r,i);const l=f(e,["config"]);return l!=null&&CD(l,i),i}function bD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>XI(r))),m(e,["generatedMasks"],o)}return e}function MD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],gn(r));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],ED(l)),i}function Q_(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function wD(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],NI(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function RD(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],nD(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],iD(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function X_(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>xI(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function ND(t){const e={},i=f(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function xD(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function ID(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function DD(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function UD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","name"],Ne(t,o));const r=f(e,["config"]);return r!=null&&ID(r,i),i}function PD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&DD(r,i),i}function LD(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const C=f(t,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),i}function kD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Ne(t,o));const r=f(e,["image"]);r!=null&&m(i,["instances[0]","image"],gn(r));const l=f(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&LD(c,i),i}function OD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Yl(l))),m(e,["generatedImages"],r)}return e}function qD(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Ui(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function GD(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Ui(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function HD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["_self"],gn(i));const o=f(t,["maskMode"]);return o!=null&&m(e,["maskMode"],o),e}function VD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],$l(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function zD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],gn(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function Z_(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["encodedVideo"],Ui(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function W_(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Ui(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}const BD="Content-Type",FD="X-Server-Timeout",YD="User-Agent",fd="x-goog-api-client",$D="1.30.0",JD=`google-genai-sdk/${$D}`,KD="v1beta1",QD="v1beta",d0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class XD{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:KD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const r=[this.getRequestUrlInternal(i)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const d=setTimeout(()=>l.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&ZD(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await h0(r),new rd(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await h0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return rs(this,arguments,function*(){const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield Be(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),C=T.status,b=T.code,M=`got status: ${C}. ${JSON.stringify(_)}`;if(b>=400&&b<600)throw new Bl({message:M,status:b})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let y=c.match(d0);for(;y;){const _=y[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Be(new rd(T)),c=c.slice(y[0].length),y=c.match(d0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=JD+" "+this.clientOptions.userAgentExtra;return e[YD]=i,e[fd]=i,e[BD]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(FD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const p={file:r},h=this.getFileName(e),y=te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,p,i?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var r;const l=this.clientOptions.uploader,c=await l.stat(i),d=String(c.size),p=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o?.customMetadata&&(_.customMetadata=o.customMetadata),o?.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const T=await this.fetchUploadUrl(h,d,p,y,_,o?.httpOptions);return l.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,r,l,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function h0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw i>=400&&i<600?new Bl({message:r,status:i}):new Error(r)}}function ZD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const r=o(i,e);t.body=JSON.stringify(r)}const WD="mcp_used/unknown";let jD=!1;function j_(t){for(const e of t)if(e1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jD}function eT(t){var e;const i=(e=t[fd])!==null&&e!==void 0?e:"";t[fd]=(i+` ${WD}`).trimStart()}function e1(t){return t!==null&&typeof t=="object"&&t instanceof Fd}function t1(t,e=100){return rs(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield Be(t.listTools({cursor:o}));for(const c of l.tools)yield yield Be(c),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Fd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Fd(e,i)}async initialize(){var e,i,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var d=!0,p=(i=void 0,Ur(t1(y))),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){i={error:_}}finally{try{!d&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),JR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}async function n1(t,e,i){const o=new GR;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(o,r),e(o)}class i1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=r1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(P=>{h=P}),_=e.callbacks,T=function(){h({})},C=this.apiClient,b={onopen:T,onmessage:P=>{n1(C,_.onmessage,P)},onerror:(i=_?.onerror)!==null&&i!==void 0?i:function(P){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(P){}},M=this.webSocketFactory.create(p,s1(c),b);M.connect(),await y;const D={setup:{model:Ne(this.apiClient,e.model)}};return M.send(JSON.stringify(D)),new o1(M,this.apiClient)}}class o1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Fx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Bx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ns.PLAY)}pause(){this.sendPlaybackControl(ns.PAUSE)}stop(){this.sendPlaybackControl(ns.STOP)}resetContext(){this.sendPlaybackControl(ns.RESET_CONTEXT)}close(){this.conn.close()}}function s1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function r1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const a1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function l1(t,e,i){const o=new qR;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=Jx(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class u1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new i1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&j_(e.config.tools)&&eT(_);const T=h1(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const j=this.apiClient.getApiKey();let ae="BidiGenerateContent",me="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ae="BidiGenerateContentConstrained",me="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ae}?${me}=${j}`}let C=()=>{};const b=new Promise(j=>{C=j}),M=e.callbacks,w=function(){var j;(j=M?.onopen)===null||j===void 0||j.call(M),C({})},R=this.apiClient,D={onopen:w,onmessage:j=>{l1(R,M.onmessage,j)},onerror:(i=M?.onerror)!==null&&i!==void 0?i:function(j){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(j){}},P=this.webSocketFactory.create(y,d1(T),D);P.connect(),await b;let J=Ne(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const j=this.apiClient.getProject(),ae=this.apiClient.getLocation();J=`projects/${j}/locations/${ae}/`+J}let B={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ul.AUDIO]}:e.config.responseModalities=[Ul.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],Q=[];for(const j of Z)if(this.isCallableTool(j)){const ae=j;Q.push(await ae.tool())}else Q.push(j);Q.length>0&&(e.config.tools=Q);const ne={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=zx(this.apiClient,ne):B=Vx(this.apiClient,ne),delete B.config,P.send(JSON.stringify(B)),new f1(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const c1={turnComplete:!0};class f1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=an(i.turns),e.isVertexAI()||(o=o.map(r=>Fl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(a1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},c1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:$x(e)}:i={realtimeInput:Yx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function d1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function h1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const p0=10;function m0(t){var e,i,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(as(c)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function as(t){return"callTool"in t&&typeof t.callTool=="function"}function p1(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>as(r)))!==null&&o!==void 0?o:!1}function g0(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(as(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function y0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class m1 extends ti{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,r,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!p1(i)||m0(i.config))return await this.generateContentInternal(p);const h=g0(i);if(h.length>0){const M=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let y,_;const T=an(p.contents),C=(l=(r=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:p0;let b=0;for(;b<C&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const M=y.candidates[0].content,w=[];for(const R of(d=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(as(R)){const P=await R.callTool(y.functionCalls);w.push(...P)}b++,_={role:"user",parts:w},p.contents=an(p.contents),p.contents.push(M),p.contents.push(_),y0(p.config)&&(T.push(M),T.push(_))}return y0(p.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async i=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(i),m0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=g0(i);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=i?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((r=p?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=p?.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new lo(jn.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var o,r,l,c,d,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(d=i.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>as(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&j_(e.config.tools)){const p=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),eT(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var i,o,r;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(as(c)){const d=c,p=await d.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var i,o,r;const l=(r=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:p0;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,y,_){var T,C;return rs(this,arguments,function*(){for(var b,M,w,R;d<l;){c&&(d++,c=!1);const B=yield Be(h.processParamsMaybeAddMcpUsage(_)),Z=yield Be(h.generateContentStreamInternal(B)),Q=[],ne=[];try{for(var D=!0,P=(M=void 0,Ur(Z)),J;J=yield Be(P.next()),b=J.done,!b;D=!0){R=J.value,D=!1;const j=R;if(yield yield Be(j),j.candidates&&(!((T=j.candidates[0])===null||T===void 0)&&T.content)){ne.push(j.candidates[0].content);for(const ae of(C=j.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(d<l&&ae.functionCall){if(!ae.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ae.functionCall.name)){const me=yield Be(y.get(ae.functionCall.name).callTool([ae.functionCall]));Q.push(...me)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ae.functionCall.name}`)}}}}catch(j){M={error:j}}finally{try{!D&&!b&&(w=P.return)&&(yield Be(w.call(P)))}finally{if(M)throw M.error}}if(Q.length>0){c=!0;const j=new Tr;j.candidates=[{content:{role:"user",parts:Q}}],yield yield Be(j);const ae=[];ae.push(...ne),ae.push({role:"user",parts:Q});const me=an(_.contents).concat(ae);_.contents=me}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=u0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=f0(y),T=new Tr;return Object.assign(T,_),T})}else{const h=l0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=c0(y),T=new Tr;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=u0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return rs(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=Ur(_),D;D=yield Be(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=f0(yield Be(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Tr;Object.assign(B,J),yield yield Be(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Be(b.call(R)))}finally{if(C)throw C.error}}})})}else{const h=l0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return rs(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=Ur(_),D;D=yield Be(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=c0(yield Be(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Tr;Object.assign(B,J),yield yield Be(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Be(b.call(R)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=CI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=bI(y),T=new $v;return Object.assign(T,_),T})}else{const h=EI(this.apiClient,e);return d=te("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=AI(y),T=new $v;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=kI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=qI(y),T=new Jv;return Object.assign(T,_),T})}else{const h=LI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=OI(y),T=new Jv;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=vI(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=_I(p),y=new wR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=kD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=OD(p),y=new RR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=yD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=vD(p),y=new NR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=AD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=bD(p),y=new xR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=tD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>cd(y))}else{const h=eD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ud(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=cD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dD(y),T=new Kv;return Object.assign(T,_),T})}else{const h=uD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fD(y),T=new Kv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=PD(this.apiClient,e);return d=te("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>cd(y))}else{const h=UD(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ud(y))}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=pI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=gI(y),T=new Qv;return Object.assign(T,_),T})}else{const h=hI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mI(y),T=new Qv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=cI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dI(y),T=new Xv;return Object.assign(T,_),T})}else{const h=uI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fI(y),T=new Xv;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=nI(this.apiClient,e);return l=te("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=iI(p),y=new IR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=FI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=zI(y),T=new Pl;return Object.assign(T,_),T})}else{const h=BI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=VI(y),T=new Pl;return Object.assign(T,_),T})}}}class g1 extends ti{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=SR(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=TR(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=hR(e);return l=te("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function y1(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function v1(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>w1(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function _1(t,e,i){const o={},r=f(e,["expireTime"]);i!==void 0&&r!=null&&m(i,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=f(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const d=f(e,["liveConnectConstraints"]);i!==void 0&&d!=null&&m(i,["bidiGenerateContentSetup"],M1(t,d));const p=f(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),o}function T1(t,e){const i={},o=f(e,["config"]);return o!=null&&m(i,["config"],_1(t,o,i)),i}function S1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function E1(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function A1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function b1(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Bd(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],v1(Ct(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let Z=ys(M);Array.isArray(Z)&&(Z=Z.map(Q=>N1(gs(Q)))),m(e,["setup","tools"],Z)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],R1(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=f(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function M1(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Ne(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],b1(r,i)),i}function w1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],S1(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],E1(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],y1(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function R1(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N1(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],C1(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],A1(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function x1(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function I1(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=x1(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class D1 extends ti{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=T1(this.apiClient,e);l=te("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=I1(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}function U1(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),i}function P1(t){const e={},i=f(t,["config"]);return i!=null&&U1(i,e),e}function L1(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function k1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&L1(o,e),e}function O1(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function q1(t,e){const i={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),i}function G1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],V1(c)),e}function H1(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&q1(r,e),e}function V1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function z1(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function B1(t){const e={},i=f(t,["config"]);return i!=null&&z1(i,e),e}function F1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function Y1(t,e){const i={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function $1(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["config"]);return o!=null&&Y1(o,e),e}function J1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function K1(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function Q1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&K1(o,e),e}function X1(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Z1(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function W1(t){const e={},i=f(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const o=f(t,["config"]);return o!=null&&Z1(o,e),e}function j1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}class eU extends ti{constructor(e){super(),this.apiClient=e,this.list=async i=>new lo(jn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=X1(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=W1(e);return l=te("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=j1(p),y=new DR;return Object.assign(y,h),y})}}}class tU extends ti{constructor(e,i=new eU(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new lo(jn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=P1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O1(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=F1(p),y=new UR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$1(e);return l=te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=J1(p),y=new PR;return Object.assign(y,h),y})}}async importFile(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H1(e);return l=te("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=G1(p),y=new qd;return Object.assign(y,h),y})}}}function nU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function iU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function oU(t,e,i){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function sU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec"],v0(C))}else if(r==="PREFERENCE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec"],v0(C))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let d=f(i,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(p==="PREFERENCE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(y==="PREFERENCE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function rU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&yU(l);const c=f(t,["config"]);return c!=null&&oU(c,i),i}function aU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&vU(l,i,e);const c=f(t,["config"]);return c!=null&&sU(c,i,e),i}function lU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function uU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function cU(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function fU(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function dU(t,e){const i={},o=f(t,["config"]);return o!=null&&cU(o,i),i}function hU(t,e){const i={},o=f(t,["config"]);return o!=null&&fU(o,i),i}function pU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>tT(d))),m(i,["tuningJobs"],c)}return i}function mU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>dd(d))),m(i,["tuningJobs"],c)}return i}function gU(t,e){const i={},o=f(t,["name"]);o!=null&&m(i,["model"],o);const r=f(t,["name"]);return r!=null&&m(i,["endpoint"],r),i}function yU(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(i,["examples","examples"],r)}return i}function vU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function tT(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],k_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["tuningTask","startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["description"]);y!=null&&m(i,["description"],y);const _=f(t,["baseModel"]);_!=null&&m(i,["baseModel"],_);const T=f(t,["_self"]);return T!=null&&m(i,["tunedModel"],gU(T)),i}function dd(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],k_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["error"]);y!=null&&m(i,["error"],y);const _=f(t,["description"]);_!=null&&m(i,["description"],_);const T=f(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const C=f(t,["tunedModel"]);C!=null&&m(i,["tunedModel"],C);const b=f(t,["preTunedModel"]);b!=null&&m(i,["preTunedModel"],b);const M=f(t,["supervisedTuningSpec"]);M!=null&&m(i,["supervisedTuningSpec"],M);const w=f(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const R=f(t,["tuningDataStats"]);R!=null&&m(i,["tuningDataStats"],R);const D=f(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const P=f(t,["partnerModelTuningSpec"]);P!=null&&m(i,["partnerModelTuningSpec"],P);const J=f(t,["customBaseModel"]);J!=null&&m(i,["customBaseModel"],J);const B=f(t,["experiment"]);B!=null&&m(i,["experiment"],B);const Z=f(t,["labels"]);Z!=null&&m(i,["labels"],Z);const Q=f(t,["outputUri"]);Q!=null&&m(i,["outputUri"],Q);const ne=f(t,["pipelineJob"]);ne!=null&&m(i,["pipelineJob"],ne);const j=f(t,["serviceAccount"]);j!=null&&m(i,["serviceAccount"],j);const ae=f(t,["tunedModelDisplayName"]);ae!=null&&m(i,["tunedModelDisplayName"],ae);const me=f(t,["veoTuningSpec"]);return me!=null&&m(i,["veoTuningSpec"],me),i}function _U(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(t,["done"]);c!=null&&m(i,["done"],c);const d=f(t,["error"]);return d!=null&&m(i,["error"],d),i}function v0(t,e){const i={},o=f(t,["gcsUri"]);o!=null&&m(i,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&m(i,["validationDatasetUri"],r),i}class TU extends ti{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new lo(jn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:sd.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=uU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>dd(y))}else{const h=lU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>tT(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=hU(e);return d=te("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mU(y),T=new Zv;return Object.assign(T,_),T})}else{const h=dU(e);return d=te("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=pU(y),T=new Zv;return Object.assign(T,_),T})}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=iU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=aU(e,e);return l=te("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>dd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rU(e);return l=te("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>_U(p))}}}class SU{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EU=1024*1024*8,CU=3,AU=1e3,bU=2,kl="x-goog-upload-status";async function MU(t,e,i){var o;const r=await nT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[kl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function wU(t,e,i){var o;const r=await nT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[kl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=x_(l),d=new Gd;return Object.assign(d,c),d}async function nT(t,e,i){var o,r;let l=0,c=0,d=new rd(new Response),p="upload";for(l=t.size;c<l;){const h=Math.min(EU,l-c),y=t.slice(c,c+h);c+h>=l&&(p+=", finalize");let _=0,T=AU;for(;_<CU&&(d=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[kl]));)_++,await NU(T),T=T*bU;if(c+=h,((r=d?.headers)===null||r===void 0?void 0:r[kl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function RU(t){return{size:t.size,type:t.type}}function NU(t){return new Promise(e=>setTimeout(e,t))}class xU{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MU(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wU(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e)}}class IU{create(e,i,o){return new DU(e,i,o)}}class DU{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const _0="x-goog-api-key";class UU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(_0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_0,this.apiKey)}}}const PU="gl-node/";class iT{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=fR(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new UU(this.apiKey);this.apiClient=new XD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:PU+"web",uploader:new xU,downloader:new SU}),this.models=new m1(this.apiClient),this.live=new u1(this.apiClient,r,new IU),this.batches=new HN(this.apiClient),this.chats=new Sx(this.models,this.apiClient),this.caches=new vx(this.apiClient),this.files=new Ix(this.apiClient),this.operations=new g1(this.apiClient),this.authTokens=new D1(this.apiClient),this.tunings=new TU(this.apiClient),this.fileSearchStores=new tU(this.apiClient)}}let Pr=null;function LU(t){localStorage.setItem("gemini_api_key",t),Pr=new iT({apiKey:t})}function oT(){return localStorage.getItem("gemini_api_key")}function hd(){return!!oT()}function kU(){Pr=null,localStorage.removeItem("gemini_api_key")}function OU(){if(!Pr){const t=oT();if(!t)throw new Error("Gemini API key not set. Add your key in Settings.");Pr=new iT({apiKey:t})}return Pr}function qU(t){return t.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim()}async function GU(t){const e=OU(),i=`Analyze this meal and provide complete nutritional breakdown:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece",
      "grams": number,
      "nutrients": {
        "calories": number,
        "purines": number,
        "protein": number,
        "carbs": number,
        "fat": number,
        "fiber": number,
        "sodium": number,
        "sugar": number
      }
    }
  ],
  "total_nutrients": {
    "calories": number,
    "purines": number,
    "protein": number,
    "carbs": number,
    "fat": number,
    "fiber": number,
    "sodium": number,
    "sugar": number
  }
}

Rules:
- Make reasonable portion estimates if not specified (e.g., "an egg" = 50g, "a glass of juice" = 250ml)
- "grams" is the converted weight in grams for the specified quantity
- "nutrients" are the values for THAT ingredient's quantity (not per 100g)
- "total_nutrients" is the sum of all ingredients
- Use USDA database values. For purines, use medical references (high purine foods: organ meats, sardines, anchovies ~300-800mg/100g; moderate: beef, pork ~100-200mg/100g; low: eggs, dairy, most vegetables ~0-50mg/100g)
- All values: calories=kcal, purines/sodium=mg, all others=grams`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(qU(r))}catch(o){throw console.error("Failed to analyze meal:",o),new Error(`Failed to analyze meal: ${o.message}`)}}async function HU(t){const e=await GU(t),i=e.ingredients.map(o=>{const r=o.grams||100,l=100/r,c=sT(o.nutrients,l);return{name:o.name,normalized_name:VU(o.name),quantity:o.quantity,unit:o.unit,grams:r,nutrients_per_100g:c,nutrients_per_unit:o.nutrients}});return{meal_name:e.meal_name,ingredients:i,total_nutrients:e.total_nutrients}}function VU(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}function sT(t,e){const i={};return Object.keys(t).forEach(o=>{i[o]=Math.round(t[o]*e*10)/10}),i}function T0(t,e){const i=t.quantity||1,o=e/i,r=(t.grams||100)*o;return{...t,quantity:e,grams:r,nutrients_per_unit:sT(t.nutrients_per_unit||{},o)}}function zU(t){return t.reduce((e,i)=>(Object.keys(i.nutrients_per_unit).forEach(o=>{e[o]=(e[o]||0)+i.nutrients_per_unit[o]}),e),{})}const bf=[{key:"breakfast",icon:"",label:"Brekkie"},{key:"lunch",icon:"",label:"Lunch"},{key:"dinner",icon:"",label:"Dinner"},{key:"snack",icon:"",label:"Snack"}],Mf=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},BU=t=>{const e=[];for(let i=-3;i<=3;i++){const o=new Date(t);o.setDate(o.getDate()+i),e.push({date:o,dateKey:Mf(o),dayName:o.toLocaleDateString("en-US",{weekday:"short"}).charAt(0),dayNum:o.getDate(),isToday:Mf(o)===Mf(new Date)})}return e};function FU(){const{user:t,isLoading:e}=Br(),[i,o]=U.useState($y()),[r,l]=U.useState(new Date),[c,d]=U.useState("breakfast"),[p,h]=U.useState(""),[y,_]=U.useState(!1),[T,C]=U.useState(!1),[b,M]=U.useState(null),[w,R]=U.useState(null),[D,P]=U.useState(""),[J,B]=U.useState("snack"),[Z,Q]=U.useState(""),[ne,j]=U.useState(null),[ae,me]=U.useState(""),[se,be]=U.useState(null),[qe,He]=U.useState({}),{meals:V,isLoading:W,addMeal:re,updateMeal:X,deleteMeal:ce,getDailyTotals:x}=R_(i),{totalHydration:F,adjustHydration:G,isLoading:ee}=N_(i),{addToStash:fe,bottles:ye}=kd(),dt=[...[{id:"quick-250",name:"+250ml",capacity_ml:250,icon:null},{id:"quick-500",name:"+500ml",capacity_ml:500,icon:null}],...ye],Ke=BU(r),Ye=t?.thresholds||{},Pi=V.filter(K=>K.meal_type!=="hydration"),Jt={...x(i)},An=aR(Jt,Ye),_s=e||W||ee,uo=async K=>{await G(K)},Jl=K=>{o(K)},Ts=K=>{const de=new Date(r);de.setDate(de.getDate()+(K==="next"?7:-7)),l(de)},Ss=async K=>{if(K.preventDefault(),!!p.trim()){if(M(null),!hd()){await re({date:i,meal_type:c,meal_name:p,ingredients:[],total_nutrients:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},hydration_ml:0,analysis_method:"manual"}),h("");return}C(!0);try{const{meal_name:de,ingredients:ve,total_nutrients:ht}=await HU(p);await re({date:i,meal_type:c,meal_name:de,description:p,ingredients:ve,total_nutrients:ht,hydration_ml:0,analysis_method:"ai"}),h("")}catch(de){console.error("AI parsing failed:",de),M(de.message||"Failed to analyze meal. Try again or check your API key.")}finally{C(!1)}}},Es=async K=>{confirm("Delete this meal?")&&await ce(K)},Cs=K=>{R(K),P(K.meal_name),B(K.meal_type),Q(K.date)},Kl=async()=>{w&&(await X(w.id,{meal_name:D,meal_type:J,date:Z}),R(null))},Yr=()=>{R(null),P(""),B("snack"),Q("")},At=K=>{j(K),me($y())},Ql=async()=>{if(!ne||!ae)return;const K={date:ae,meal_type:ne.meal_type,meal_name:ne.meal_name,description:ne.description,ingredients:ne.ingredients,total_nutrients:ne.total_nutrients,hydration_ml:0,analysis_method:"copy"};await re(K),j(null),alert(`Meal copied to ${ae}! `)},$r=K=>{be({mealId:K.id,originalIngredients:K.ingredients,ingredients:[...K.ingredients]}),He({})},Jr=(K,de)=>{const ve=parseFloat(de)||0;He(ht=>({...ht,[K]:ve}))},co=async()=>{if(!se)return;const K=se.ingredients.map((ve,ht)=>qe[ht]!==void 0&&qe[ht]!==ve.quantity?T0(ve,qe[ht]):ve),de=zU(K);await X(se.mealId,{ingredients:K,total_nutrients:de}),be(null),He({})},Xl=async K=>{if(!se)return;const de=se.ingredients.filter((Kt,bn)=>bn!==K);be(Kt=>({...Kt,ingredients:de}));const ve={...qe};delete ve[K];const ht={};Object.keys(ve).forEach(Kt=>{const bn=parseInt(Kt);bn>K?ht[bn-1]=ve[Kt]:ht[bn]=ve[Kt]}),He(ht)},Kr=()=>{be(null),He({})},Zl=async K=>{await fe({type:"meal",name:K.meal_name,ingredients:K.ingredients||[],total_nutrients:K.total_nutrients||{},use_count:0}),alert(`"${K.meal_name}" saved to your Dragon's Hoard! `)},Li=(K=>{const[de,ve,ht]=K.split("-").map(Number);return new Date(de,ve-1,ht)})(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});return _s?E.jsxs("div",{className:"page diary-page",children:[E.jsx(Ii,{title:"Dragon Keeper",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Waking up the dragon..."})]})]}):E.jsxs("div",{className:"page diary-page",children:[E.jsx(Ii,{title:"Dragon Keeper",subtitle:`Feeding log for ${Li}`}),E.jsxs("div",{className:"calendar-ribbon card",children:[E.jsx("button",{className:"cal-nav",onClick:()=>Ts("prev"),"aria-label":"Previous week",children:""}),E.jsx("div",{className:"cal-days",children:Ke.map(K=>{const de=K.dateKey===i;return E.jsxs("button",{className:`cal-day ${de?"active":""} ${K.isToday?"today":""}`,onClick:()=>Jl(K.dateKey),children:[E.jsx("span",{className:"cal-day-name",children:K.dayName}),E.jsx("span",{className:"cal-day-num",children:K.dayNum}),K.isToday&&E.jsx("span",{className:"cal-day-indicator",children:""})]},K.dateKey)})}),E.jsx("button",{className:"cal-nav",onClick:()=>Ts("next"),"aria-label":"Next week",children:""})]}),E.jsx("div",{className:"meal-type-selector",children:bf.map(K=>E.jsxs("button",{className:`meal-type-btn ${c===K.key?"active":""}`,onClick:()=>d(K.key),children:[E.jsx("span",{className:"meal-icon",children:K.icon}),E.jsx("span",{className:"meal-label",children:K.label})]},K.key))}),E.jsxs("form",{className:"meal-input-section card",onSubmit:Ss,children:[E.jsx("label",{className:"input-label",children:"What did your dragon eat? "}),E.jsx("div",{className:"input-row",children:E.jsx("input",{type:"text",placeholder:"e.g., grilled chicken with rice...",value:p,onChange:K=>h(K.target.value),disabled:T})}),b&&E.jsx("div",{className:"ai-error",children:E.jsxs("span",{children:[" ",b]})}),E.jsxs("div",{className:"input-actions",children:[E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),E.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:T||!p.trim(),children:T?E.jsx(E.Fragment,{children:" Analyzing..."}):E.jsx(E.Fragment,{children:"Log It! "})})]}),!hd()&&E.jsx("p",{className:"no-api-hint text-muted text-sm",children:" Set up AI in Settings  Dragon's Intelligence to auto-analyze meals!"})]}),E.jsxs("div",{className:"hydration-section card",children:[E.jsxs("div",{className:"hydration-header",children:[E.jsx("span",{className:"hydration-title",children:" Dragon's Hydration"}),E.jsxs("span",{className:"hydration-value",children:[F,"/",Ye.hydration_target||2e3,"ml"]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${F>=(Ye.hydration_target||2e3)?"success":"warning"}`,style:{width:`${Math.min(F/(Ye.hydration_target||2e3)*100,100)}%`}})}),E.jsxs("div",{className:"hydration-buttons",children:[E.jsx("button",{className:"btn btn-secondary btn-danger-outline",onClick:()=>uo(-250),children:"250"}),dt.map(K=>E.jsxs("button",{className:"btn btn-secondary",onClick:()=>uo(K.capacity_ml),children:[K.icon||"",K.icon?" ":"",K.name||`+${K.capacity_ml}ml`]},K.id))]})]}),E.jsxs("section",{className:"meals-section",children:[E.jsx("h2",{className:"section-title",children:"Today's Feast"}),Pi.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx(Dl,{state:"curious"}),E.jsx("p",{children:"No meals logged yet today!"}),E.jsx("p",{className:"text-muted",children:"Feed your dragon to get started."})]}):E.jsx("div",{className:"meals-list",children:Pi.map(K=>E.jsxs("div",{className:"meal-card card",children:[E.jsxs("div",{className:"meal-header",children:[E.jsx("span",{className:"meal-type-badge",children:bf.find(de=>de.key===K.meal_type)?.icon||""}),E.jsx("h3",{className:"meal-name",children:K.meal_name})]}),K.ingredients&&K.ingredients.length>0&&E.jsx("div",{className:"meal-ingredients-section",children:se?.mealId===K.id?E.jsxs("div",{className:"ingredients-edit-mode",children:[E.jsx("ul",{className:"meal-ingredients editing",children:se.ingredients.map((de,ve)=>{const ht=qe[ve]!==void 0?qe[ve]:de.quantity,Kt=qe[ve]!==void 0?T0(de,qe[ve]):de;return E.jsxs("li",{className:"ingredient-edit-row",children:[E.jsxs("span",{className:"ing-name",children:[" ",de.name]}),E.jsx("input",{type:"number",className:"ing-qty-input",value:ht,onChange:bn=>Jr(ve,bn.target.value),min:"0",step:"0.1"}),E.jsx("span",{className:"ing-unit",children:de.unit}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(Kt.nutrients_per_unit?.calories||0),"  ",Math.round(Kt.nutrients_per_unit?.purines||0)]}),E.jsx("button",{className:"btn-icon btn-delete-ing",onClick:()=>Xl(ve),title:"Remove ingredient",children:""})]},ve)})}),E.jsxs("div",{className:"ingredient-edit-actions",children:[E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:Kr,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary btn-sm",onClick:co,children:" Save Changes"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("ul",{className:"meal-ingredients",children:K.ingredients.map((de,ve)=>E.jsxs("li",{children:[E.jsxs("span",{className:"ing-name",children:[" ",de.name]}),E.jsxs("span",{className:"ing-qty",children:["(",de.quantity||"?",de.unit||"g",")"]}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(de.nutrients_per_unit?.calories||0),"  ",Math.round(de.nutrients_per_unit?.purines||0)]})]},ve))}),E.jsx("button",{type:"button",className:"btn btn-secondary btn-sm btn-edit-ingredients",onClick:de=>{de.preventDefault(),de.stopPropagation(),$r(K)},children:" Edit quantities"})]})}),E.jsxs("div",{className:"meal-nutrients meal-totals",children:[E.jsx("span",{className:"total-label",children:"Total:"}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.calories||0)," cal"]}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.purines||0),"mg"]})]}),E.jsxs("div",{className:"meal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>Cs(K),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>At(K),children:" Copy"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>Es(K.id),children:""}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>Zl(K),children:" Stash"})]})]},K.id))})]}),E.jsxs("section",{className:"daily-status card",children:[E.jsxs("div",{className:"status-header",onClick:()=>_(!y),children:[E.jsx("h3",{children:" Dragon's Daily Status"}),E.jsx(Dl,{state:An,showMessage:!1,size:"small"}),E.jsx("span",{className:"toggle-hint",children:y?"":""})]}),E.jsx(Yn,{nutrient:"calories",value:Jt.calories||0,target:Ye.calories_max||2e3,min:Ye.calories_min||1500,max:Ye.calories_max||2e3}),E.jsx(Yn,{nutrient:"purines",value:Jt.purines||0,target:Ye.purines_max||400,max:Ye.purines_max||400}),y&&E.jsxs("div",{className:"all-nutrients animate-fade-in",children:[E.jsx(Yn,{nutrient:"protein",value:Jt.protein||0,target:Ye.protein_target||60,compact:!0}),E.jsx(Yn,{nutrient:"carbs",value:Jt.carbs||0,target:Ye.carbs_target||250,compact:!0}),E.jsx(Yn,{nutrient:"fat",value:Jt.fat||0,target:Ye.fat_target||65,compact:!0}),E.jsx(Yn,{nutrient:"fiber",value:Jt.fiber||0,target:Ye.fiber_target||30,compact:!0}),E.jsx(Yn,{nutrient:"sodium",value:Jt.sodium||0,target:Ye.sodium_max||2300,max:Ye.sodium_max||2300,compact:!0}),E.jsx(Yn,{nutrient:"sugar",value:Jt.sugar||0,target:Ye.sugar_max||50,max:Ye.sugar_max||50,compact:!0}),E.jsx(Yn,{nutrient:"hydration",value:F,target:Ye.hydration_target||2e3,compact:!0})]})]}),w&&E.jsx("div",{className:"modal-overlay",onClick:Yr,children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Edit Meal"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Name"}),E.jsx("input",{type:"text",value:D,onChange:K=>P(K.target.value),placeholder:"e.g., Grilled Chicken"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Type"}),E.jsx("select",{value:J,onChange:K=>B(K.target.value),children:bf.map(K=>E.jsxs("option",{value:K.key,children:[K.icon," ",K.label]},K.key))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Date (move to different day)"}),E.jsx("input",{type:"date",value:Z,onChange:K=>Q(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:Yr,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:Kl,children:" Save"})]})]})}),ne&&E.jsx("div",{className:"modal-overlay",onClick:()=>j(null),children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Copy Meal"}),E.jsxs("p",{children:['Copy "',ne.meal_name,'" to another date:']}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Target Date"}),E.jsx("input",{type:"date",value:ae,onChange:K=>me(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>j(null),children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:Ql,children:" Copy Meal"})]})]})})]})}function YU(){return E.jsxs("div",{className:"page charts-page",children:[E.jsx(Ii,{title:"Dragon's Scroll",subtitle:"View your nutrition history"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Dl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon's Scroll will show beautiful charts of your nutrition history."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" View by week, month, or custom range"}),E.jsx("li",{children:" Daily, weekly, or monthly grouping"}),E.jsx("li",{children:" Filter by nutrient type"}),E.jsx("li",{children:" Export your data"})]})]})]})}function $U(){return E.jsxs("div",{className:"page oracle-page",children:[E.jsx(Ii,{title:"Dragon Oracle",subtitle:"Get meal recommendations"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Dl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon Oracle will suggest meals based on your remaining nutrition budget."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" Familiar meals you love"}),E.jsx("li",{children:" Twisted versions of favorites"}),E.jsx("li",{children:" Wild new adventures"}),E.jsx("li",{children:" AI-powered recommendations"})]})]})]})}function JU(){const t=ql(),{user:e,isLoading:i,updateProfile:o,updateThresholds:r,updateTheme:l,saveUser:c}=Br(),{savedMeals:d,bottles:p}=kd(),[h,y]=U.useState({name:"Dragon Keeper",sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]}),[_,T]=U.useState(nd),[C,b]=U.useState("emerald"),[M,w]=U.useState("#66BB6A"),[R,D]=U.useState(!1),[P,J]=U.useState(!1),[B,Z]=U.useState(""),[Q,ne]=U.useState(!1),[j,ae]=U.useState(hd()?"saved":"none");U.useEffect(()=>{e&&(y({name:e.name||"Dragon Keeper",...e.profile}),T(e.thresholds||nd),b(e.theme?.preset||"emerald"),w(e.theme?.seed_color_hex||"#66BB6A"))},[e]);const me=()=>{const X=eR(h);T(X),J(!0)},se=(X,ce)=>{T(x=>({...x,[X]:Number(ce)})),J(!0)},be=X=>{y(ce=>({...ce,...X})),J(!0)},qe=async X=>{b(X);const ce=Dr[X],x=io(ce.seedColor,ce.isDark);oo(x),await l(X,ce.seedColor)},He=async X=>{w(X),b("custom");const ce=io(X,!1);oo(ce),await l("custom",X)},V=()=>{B.trim()&&(LU(B.trim()),ae("saved"),Z(""),ne(!1),alert("AI API key saved! Your dragon can now analyze meals. "))},W=()=>{confirm("Remove your AI API key? Your dragon won't be able to analyze meals.")&&(kU(),ae("none"),Z(""))},re=async()=>{const X={...e,name:h.name,profile:{sex:h.sex,age:h.age,weight_kg:h.weight_kg,height_cm:h.height_cm,activity_level:h.activity_level,dietary_conditions:h.dietary_conditions},thresholds:_};await o(X.profile),await r(_),await c(X),J(!1),alert("Dragon's settings saved! ")};return i?E.jsxs("div",{className:"page settings-page",children:[E.jsx(Ii,{title:"Dragon's Lair",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the lair..."})]})]}):E.jsxs("div",{className:"page settings-page",children:[E.jsx(Ii,{title:"Dragon's Lair",subtitle:"Configure your dragon's needs"}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Keeper's Profile"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:h.name,onChange:X=>be({name:X.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Sex"}),E.jsxs("select",{value:h.sex,onChange:X=>be({sex:X.target.value}),children:[E.jsx("option",{value:"male",children:"Male"}),E.jsx("option",{value:"female",children:"Female"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Age"}),E.jsx("input",{type:"number",value:h.age,onChange:X=>be({age:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Weight (kg)"}),E.jsx("input",{type:"number",value:h.weight_kg,onChange:X=>be({weight_kg:parseInt(X.target.value)})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Height (cm)"}),E.jsx("input",{type:"number",value:h.height_cm,onChange:X=>be({height_cm:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Activity Level"}),E.jsxs("select",{value:h.activity_level,onChange:X=>be({activity_level:X.target.value}),children:[E.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),E.jsx("option",{value:"light",children:"Light (1-3 days/week)"}),E.jsx("option",{value:"moderate",children:"Moderate (3-5 days/week)"}),E.jsx("option",{value:"active",children:"Active (6-7 days/week)"}),E.jsx("option",{value:"very_active",children:"Very Active (intense daily)"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Dietary Conditions"}),E.jsx("div",{className:"checkbox-group",children:["gout","diabetes","kidney_disease","vegetarian","vegan"].map(X=>E.jsxs("label",{className:"checkbox-label",children:[E.jsx("input",{type:"checkbox",checked:h.dietary_conditions?.includes(X)||!1,onChange:ce=>{const x=ce.target.checked?[...h.dietary_conditions||[],X]:(h.dietary_conditions||[]).filter(F=>F!==X);be({dietary_conditions:x})}}),E.jsx("span",{children:X.replace("_"," ")})]},X))})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:me,children:"Calculate Dragon's Needs "}),P&&E.jsx("button",{className:"btn btn-primary w-full mt-sm",onClick:re,children:" Save All Changes"})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Hoard"}),E.jsx("p",{className:"text-muted",children:"Manage your saved meals and custom bottles."}),E.jsxs("div",{className:"stash-buttons",children:[E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash"),children:[" Saved Meals (",d?.length||0,")"]}),E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash?tab=bottles"),children:[" Custom Bottles (",p?.length||0,")"]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsxs("div",{className:"section-header-row",children:[E.jsx("h2",{className:"section-title",children:" Nutrition Thresholds"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>D(!R),children:R?"Done":"Edit"})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Calories"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.calories_min,onChange:X=>se("calories_min",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"-"}),E.jsx("input",{type:"number",value:_.calories_max,onChange:X=>se("calories_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"kcal"})]}):E.jsxs("span",{className:"threshold-value",children:[_.calories_min," - ",_.calories_max," kcal"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Purines"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.purines_max,onChange:X=>se("purines_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.purines_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Protein"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.protein_target,onChange:X=>se("protein_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.protein_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Carbs"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.carbs_target,onChange:X=>se("carbs_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.carbs_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fat"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fat_target,onChange:X=>se("fat_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fat_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fiber"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fiber_target,onChange:X=>se("fiber_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fiber_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sodium"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sodium_max,onChange:X=>se("sodium_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sodium_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sugar"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sugar_max,onChange:X=>se("sugar_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sugar_max," g max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Hydration"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.hydration_target,onChange:X=>se("hydration_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"ml target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.hydration_target," ml target"]})]}),R&&E.jsx("p",{className:"text-muted text-center mt-sm",children:`Tip: Use "Calculate Dragon's Needs" to auto-fill based on your profile.`})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Scale Theme"}),E.jsx("div",{className:"theme-presets",children:Object.entries(Dr).map(([X,ce])=>E.jsxs("button",{className:`theme-preset ${C===X?"active":""}`,onClick:()=>qe(X),style:{"--preset-color":ce.seedColor},children:[E.jsx("span",{className:"preset-swatch",style:{background:ce.seedColor}}),E.jsx("span",{className:"preset-name",children:ce.name}),E.jsx("span",{className:"preset-desc",children:ce.description})]},X))}),E.jsxs("div",{className:"custom-color-section",children:[E.jsx("label",{children:"Custom Dragon Scale Color"}),E.jsxs("div",{className:"color-picker-row",children:[E.jsx("input",{type:"color",value:M,onChange:X=>He(X.target.value),className:"color-picker"}),E.jsx("input",{type:"text",value:M,onChange:X=>He(X.target.value),className:"color-input",placeholder:"#66BB6A"})]})]}),E.jsxs("div",{className:"theme-preview card",children:[E.jsx("p",{className:"preview-label",children:"Preview"}),E.jsxs("div",{className:"preview-content",children:[E.jsx("div",{className:"preview-text",children:"Sample text"}),E.jsx("button",{className:"btn btn-primary",children:"Button"}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress-bar-fill success",style:{width:"60%"}})})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Statistics"}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.total_meals_logged||0}),E.jsx("span",{className:"stat-label",children:"Meals logged"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.current_streak_days||0}),E.jsx("span",{className:"stat-label",children:"Day streak "})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:(d?.length||0)+(p?.length||0)}),E.jsx("span",{className:"stat-label",children:"In hoard"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.badges?.length||0}),E.jsx("span",{className:"stat-label",children:"Badges"})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Intelligence"}),E.jsx("p",{className:"text-muted mb-md",children:"Connect your dragon to Google's AI to automatically analyze meals from text descriptions or photos."}),j==="saved"?E.jsxs("div",{className:"api-key-status",children:[E.jsx("div",{className:"status-badge success",children:E.jsx("span",{children:" AI Connected"})}),E.jsx("p",{className:"text-muted text-sm mt-sm",children:"Your dragon can analyze meals. Key stored locally on this device."}),E.jsx("button",{className:"btn btn-secondary btn-danger-outline mt-sm",onClick:W,children:" Remove API Key"})]}):E.jsxs("div",{className:"api-key-form",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Google AI Studio API Key"}),E.jsxs("div",{className:"input-with-toggle",children:[E.jsx("input",{type:Q?"text":"password",value:B,onChange:X=>Z(X.target.value),placeholder:"AIza...",className:"api-key-input"}),E.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>ne(!Q),children:Q?"":""})]}),E.jsxs("p",{className:"input-help",children:["Get your free key at"," ",E.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio "})]})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:V,disabled:!B.trim(),children:" Save API Key"})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" About"}),E.jsxs("p",{className:"text-center text-muted",children:["Purine Control v1.0.0",E.jsx("br",{}),`"The Dragon Keeper's Nutrition Tracker"`]}),E.jsx("p",{className:"text-center text-muted mt-md",children:"Made with  for your dragon"})]})]})}const KU=[{id:"default-1",name:"Water Glass",capacity_ml:250,icon:"",type:"container"},{id:"default-2",name:"Water Bottle",capacity_ml:500,icon:"",type:"container"},{id:"default-3",name:"Dragon Chalice",capacity_ml:750,icon:"",type:"container"}],QU=[{key:"meals",label:" Saved Meals",icon:""},{key:"bottles",label:" Bottles",icon:""}],XU=["","","","","","","",""];function ZU(){const t=ql(),[e,i]=JC(),o=e.get("tab")||"meals",[r,l]=U.useState(o),[c,d]=U.useState(""),[p,h]=U.useState(!1),[y,_]=U.useState(null),[T,C]=U.useState(""),[b,M]=U.useState(""),[w,R]=U.useState(250),[D,P]=U.useState({calories:0,purines:0,protein:0,carbs:0,fat:0}),{savedMeals:J,bottles:B,isLoading:Z,addToStash:Q,removeFromStash:ne,updateStashItem:j}=kd(),{adjustHydration:ae}=N_(),{addMeal:me}=R_(),se=[...KU,...B],be=G=>{l(G),i({tab:G})},qe=async G=>{const ee=G.capacity_ml||G.amount_ml;await ae(ee),alert(`Added ${ee}ml to hydration! `)},He=async G=>{await me({meal_type:"snack",meal_name:G.name,ingredients:G.ingredients||[],total_nutrients:G.total_nutrients||{}}),G.id&&!G.id.startsWith("default-")&&await j(G.id,{use_count:(G.use_count||0)+1}),alert(`${G.name} added to diary! `),t("/")},V=async G=>{confirm("Remove this item from your hoard?")&&await ne(G)},W=()=>{C(""),M(""),R(250),P({calories:0,purines:0,protein:0,carbs:0,fat:0}),_(null),h(!1)},re=()=>{W(),h(!0)},X=G=>{_(G),C(G.name||""),M(G.icon||""),R(G.capacity_ml||G.amount_ml||250),P(G.nutrients||G.total_nutrients||{calories:0,purines:0,protein:0,carbs:0,fat:0}),h(!0)},ce=async()=>{if(!T.trim()){alert("Please enter a name");return}const G=y?.id?.startsWith("default-");if(y&&!G){const ee={name:T};r==="bottles"&&(ee.icon=b,ee.capacity_ml=w),await j(y.id,ee),alert("Item updated! ")}else{const ee=r==="meals"?"meal":"container",fe={type:ee,name:T,icon:b,capacity_ml:ee==="container"?w:void 0,ingredients:ee==="meal"?y?.ingredients||[]:void 0,total_nutrients:ee==="meal"?D:void 0,use_count:0};await Q(fe),alert(G?"Custom bottle created! ":"Added to your hoard! ")}W()},x=J.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase())),F=se.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase()));return Z?E.jsxs("div",{className:"page stash-page",children:[E.jsx(Ii,{title:"Dragon's Hoard",subtitle:"Loading...",showBack:!0,onBack:()=>t("/settings")}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the hoard..."})]})]}):E.jsxs("div",{className:"page stash-page",children:[E.jsx(Ii,{title:"Dragon's Hoard",subtitle:"Your saved meals and custom ingredients",showBack:!0,onBack:()=>t("/settings")}),E.jsx("div",{className:"stash-tabs",children:QU.map(G=>E.jsx("button",{className:`stash-tab ${r===G.key?"active":""}`,onClick:()=>be(G.key),children:G.label},G.key))}),E.jsx("div",{className:"stash-search",children:E.jsx("input",{type:"text",placeholder:`Search ${r==="meals"?"meals":"ingredients"}...`,value:c,onChange:G=>d(G.target.value)})}),r==="meals"&&E.jsxs("section",{className:"stash-content",children:[x.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No saved meals yet!"}),E.jsx("p",{className:"text-muted",children:"Save meals from your diary to reuse them."})]}):E.jsx("div",{className:"stash-list",children:x.map(G=>E.jsxs("div",{className:"stash-item card",children:[E.jsxs("div",{className:"stash-item-header",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"use-count",children:["Used ",G.use_count||0,"x"]})]}),E.jsx("p",{className:"stash-item-ingredients",children:Array.isArray(G.ingredients)?G.ingredients.map(ee=>typeof ee=="string"?ee:ee.name).join(", "):"No ingredients"}),E.jsxs("div",{className:"stash-item-nutrients",children:[E.jsxs("span",{children:[" ",G.total_nutrients?.calories||0," cal"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.purines||0,"mg"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.protein||0,"g"]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>He(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:re,children:" Create New Meal"})]}),r==="bottles"&&E.jsxs("section",{className:"stash-content",children:[E.jsx("p",{className:"text-muted",children:"Custom hydration containers for quick logging."}),F.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No custom bottles yet!"}),E.jsx("p",{className:"text-muted",children:"Add your favorite containers."})]}):E.jsx("div",{className:"stash-list",children:F.map(G=>E.jsxs("div",{className:"stash-item card bottle-item",children:[E.jsxs("div",{className:"bottle-info",children:[E.jsx("span",{className:"bottle-icon",children:G.icon||""}),E.jsxs("div",{className:"bottle-details",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"bottle-amount",children:[G.capacity_ml||G.amount_ml," ml"]})]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>qe(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:""}),!G.id.startsWith("default-")&&E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:re,children:" Add Custom Bottle"})]}),p&&E.jsx("div",{className:"modal-overlay",onClick:W,children:E.jsxs("div",{className:"modal-content card",onClick:G=>G.stopPropagation(),children:[E.jsxs("h2",{children:[y?" Edit":" Create"," ",r==="meals"?"Meal":r==="ingredients"?"Ingredient":"Bottle"]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:T,onChange:G=>C(G.target.value),placeholder:`e.g., ${r==="meals"?"Chicken Salad":r==="ingredients"?"Olive Oil":"Sports Bottle"}`})]}),r==="bottles"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Icon"}),E.jsx("div",{className:"icon-picker",children:XU.map(G=>E.jsx("button",{type:"button",className:`icon-btn ${b===G?"active":""}`,onClick:()=>M(G),children:G},G))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Capacity (ml)"}),E.jsx("input",{type:"number",value:w,onChange:G=>R(parseInt(G.target.value)||0),min:"0",step:"50"})]})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:W,children:"Cancel"}),E.jsxs("button",{className:"btn btn-primary",onClick:ce,children:[" ",y?"Update":"Save"]})]})]})})]})}function WU(){return E.jsx(oR,{children:E.jsx(BC,{basename:"/purine-control",children:E.jsxs("div",{className:"app",children:[E.jsxs(_C,{children:[E.jsx(Xo,{path:"/",element:E.jsx(FU,{})}),E.jsx(Xo,{path:"/charts",element:E.jsx(YU,{})}),E.jsx(Xo,{path:"/oracle",element:E.jsx($U,{})}),E.jsx(Xo,{path:"/settings",element:E.jsx(JU,{})}),E.jsx(Xo,{path:"/stash",element:E.jsx(ZU,{})})]}),E.jsx(rR,{})]})})})}RE.createRoot(document.getElementById("root")).render(E.jsx(U.StrictMode,{children:E.jsx(WU,{})}));
