(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var of={exports:{}},pr={};var Og;function yE(){if(Og)return pr;Og=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return pr.Fragment=e,pr.jsx=i,pr.jsxs=i,pr}var qg;function vE(){return qg||(qg=1,of.exports=yE()),of.exports}var C=vE(),sf={exports:{}},he={};var Gg;function _E(){if(Gg)return he;Gg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function R(x,Y,G){this.props=x,this.context=Y,this.refs=w,this.updater=G||b}R.prototype.isReactComponent={},R.prototype.setState=function(x,Y){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,Y,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function D(){}D.prototype=R.prototype;function U(x,Y,G){this.props=x,this.context=Y,this.refs=w,this.updater=G||b}var J=U.prototype=new D;J.constructor=U,M(J,R.prototype),J.isPureReactComponent=!0;var B=Array.isArray;function X(){}var K={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function j(x,Y,G){var ee=G.ref;return{$$typeof:t,type:x,key:Y,ref:ee!==void 0?ee:null,props:G}}function ae(x,Y){return j(x.type,Y,x.props)}function me(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function ue(x){var Y={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(G){return Y[G]})}var be=/\/+/g;function $e(x,Y){return typeof x=="object"&&x!==null&&x.key!=null?ue(""+x.key):Y.toString(36)}function Qe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(X,X):(x.status="pending",x.then(function(Y){x.status==="pending"&&(x.status="fulfilled",x.value=Y)},function(Y){x.status==="pending"&&(x.status="rejected",x.reason=Y)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function V(x,Y,G,ee,de){var re=typeof x;(re==="undefined"||re==="boolean")&&(x=null);var Ae=!1;if(x===null)Ae=!0;else switch(re){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(x.$$typeof){case t:case e:Ae=!0;break;case y:return Ae=x._init,V(Ae(x._payload),Y,G,ee,de)}}if(Ae)return de=de(x),Ae=ee===""?"."+$e(x,0):ee,B(de)?(G="",Ae!=null&&(G=Ae.replace(be,"$&/")+"/"),V(de,Y,G,"",function(Ui){return Ui})):de!=null&&(me(de)&&(de=ae(de,G+(de.key==null||x&&x.key===de.key?"":(""+de.key).replace(be,"$&/")+"/")+Ae)),Y.push(de)),1;Ae=0;var vt=ee===""?".":ee+":";if(B(x))for(var Ne=0;Ne<x.length;Ne++)ee=x[Ne],re=vt+$e(ee,Ne),Ae+=V(ee,Y,G,re,de);else if(Ne=E(x),typeof Ne=="function")for(x=Ne.call(x),Ne=0;!(ee=x.next()).done;)ee=ee.value,re=vt+$e(ee,Ne++),Ae+=V(ee,Y,G,re,de);else if(re==="object"){if(typeof x.then=="function")return V(Qe(x),Y,G,ee,de);throw Y=String(x),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Z(x,Y,G){if(x==null)return x;var ee=[],de=0;return V(x,ee,"","",function(re){return Y.call(G,re,de++)}),ee}function se(x){if(x._status===-1){var Y=x._result;Y=Y(),Y.then(function(G){(x._status===0||x._status===-1)&&(x._status=1,x._result=G)},function(G){(x._status===0||x._status===-1)&&(x._status=2,x._result=G)}),x._status===-1&&(x._status=0,x._result=Y)}if(x._status===1)return x._result.default;throw x._result}var Q=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},fe={map:Z,forEach:function(x,Y,G){Z(x,function(){Y.apply(this,arguments)},G)},count:function(x){var Y=0;return Z(x,function(){Y++}),Y},toArray:function(x){return Z(x,function(Y){return Y})||[]},only:function(x){if(!me(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return he.Activity=_,he.Children=fe,he.Component=R,he.Fragment=i,he.Profiler=r,he.PureComponent=U,he.StrictMode=o,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,he.__COMPILER_RUNTIME={__proto__:null,c:function(x){return K.H.useMemoCache(x)}},he.cache=function(x){return function(){return x.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(x,Y,G){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ee=M({},x.props),de=x.key;if(Y!=null)for(re in Y.key!==void 0&&(de=""+Y.key),Y)!ne.call(Y,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&Y.ref===void 0||(ee[re]=Y[re]);var re=arguments.length-2;if(re===1)ee.children=G;else if(1<re){for(var Ae=Array(re),vt=0;vt<re;vt++)Ae[vt]=arguments[vt+2];ee.children=Ae}return j(x.type,de,ee)},he.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},he.createElement=function(x,Y,G){var ee,de={},re=null;if(Y!=null)for(ee in Y.key!==void 0&&(re=""+Y.key),Y)ne.call(Y,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(de[ee]=Y[ee]);var Ae=arguments.length-2;if(Ae===1)de.children=G;else if(1<Ae){for(var vt=Array(Ae),Ne=0;Ne<Ae;Ne++)vt[Ne]=arguments[Ne+2];de.children=vt}if(x&&x.defaultProps)for(ee in Ae=x.defaultProps,Ae)de[ee]===void 0&&(de[ee]=Ae[ee]);return j(x,re,de)},he.createRef=function(){return{current:null}},he.forwardRef=function(x){return{$$typeof:d,render:x}},he.isValidElement=me,he.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:se}},he.memo=function(x,Y){return{$$typeof:h,type:x,compare:Y===void 0?null:Y}},he.startTransition=function(x){var Y=K.T,G={};K.T=G;try{var ee=x(),de=K.S;de!==null&&de(G,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(X,Q)}catch(re){Q(re)}finally{Y!==null&&G.types!==null&&(Y.types=G.types),K.T=Y}},he.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},he.use=function(x){return K.H.use(x)},he.useActionState=function(x,Y,G){return K.H.useActionState(x,Y,G)},he.useCallback=function(x,Y){return K.H.useCallback(x,Y)},he.useContext=function(x){return K.H.useContext(x)},he.useDebugValue=function(){},he.useDeferredValue=function(x,Y){return K.H.useDeferredValue(x,Y)},he.useEffect=function(x,Y){return K.H.useEffect(x,Y)},he.useEffectEvent=function(x){return K.H.useEffectEvent(x)},he.useId=function(){return K.H.useId()},he.useImperativeHandle=function(x,Y,G){return K.H.useImperativeHandle(x,Y,G)},he.useInsertionEffect=function(x,Y){return K.H.useInsertionEffect(x,Y)},he.useLayoutEffect=function(x,Y){return K.H.useLayoutEffect(x,Y)},he.useMemo=function(x,Y){return K.H.useMemo(x,Y)},he.useOptimistic=function(x,Y){return K.H.useOptimistic(x,Y)},he.useReducer=function(x,Y,G){return K.H.useReducer(x,Y,G)},he.useRef=function(x){return K.H.useRef(x)},he.useState=function(x){return K.H.useState(x)},he.useSyncExternalStore=function(x,Y,G){return K.H.useSyncExternalStore(x,Y,G)},he.useTransition=function(){return K.H.useTransition()},he.version="19.2.0",he}var Hg;function ad(){return Hg||(Hg=1,sf.exports=_E()),sf.exports}var P=ad(),rf={exports:{}},mr={},af={exports:{}},lf={};var Vg;function TE(){return Vg||(Vg=1,(function(t){function e(V,Z){var se=V.length;V.push(Z);e:for(;0<se;){var Q=se-1>>>1,fe=V[Q];if(0<r(fe,Z))V[Q]=Z,V[se]=fe,se=Q;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var Z=V[0],se=V.pop();if(se!==Z){V[0]=se;e:for(var Q=0,fe=V.length,x=fe>>>1;Q<x;){var Y=2*(Q+1)-1,G=V[Y],ee=Y+1,de=V[ee];if(0>r(G,se))ee<fe&&0>r(de,G)?(V[Q]=de,V[ee]=se,Q=ee):(V[Q]=G,V[Y]=se,Q=Y);else if(ee<fe&&0>r(de,se))V[Q]=de,V[ee]=se,Q=ee;else break e}}return Z}function r(V,Z){var se=V.sortIndex-Z.sortIndex;return se!==0?se:V.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],h=[],y=1,_=null,T=3,E=!1,b=!1,M=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function J(V){for(var Z=i(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=V)o(h),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=i(h)}}function B(V){if(M=!1,J(V),!b)if(i(p)!==null)b=!0,X||(X=!0,ue());else{var Z=i(h);Z!==null&&Qe(B,Z.startTime-V)}}var X=!1,K=-1,ne=5,j=-1;function ae(){return w?!0:!(t.unstable_now()-j<ne)}function me(){if(w=!1,X){var V=t.unstable_now();j=V;var Z=!0;try{e:{b=!1,M&&(M=!1,D(K),K=-1),E=!0;var se=T;try{t:{for(J(V),_=i(p);_!==null&&!(_.expirationTime>V&&ae());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,T=_.priorityLevel;var fe=Q(_.expirationTime<=V);if(V=t.unstable_now(),typeof fe=="function"){_.callback=fe,J(V),Z=!0;break t}_===i(p)&&o(p),J(V)}else o(p);_=i(p)}if(_!==null)Z=!0;else{var x=i(h);x!==null&&Qe(B,x.startTime-V),Z=!1}}break e}finally{_=null,T=se,E=!1}Z=void 0}}finally{Z?ue():X=!1}}}var ue;if(typeof U=="function")ue=function(){U(me)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,$e=be.port2;be.port1.onmessage=me,ue=function(){$e.postMessage(null)}}else ue=function(){R(me,0)};function Qe(V,Z){K=R(function(){V(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var se=T;T=Z;try{return V()}finally{T=se}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var se=T;T=V;try{return Z()}finally{T=se}},t.unstable_scheduleCallback=function(V,Z,se){var Q=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Q+se:Q):se=Q,V){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=se+fe,V={id:y++,callback:Z,priorityLevel:V,startTime:se,expirationTime:fe,sortIndex:-1},se>Q?(V.sortIndex=se,e(h,V),i(p)===null&&V===i(h)&&(M?(D(K),K=-1):M=!0,Qe(B,se-Q))):(V.sortIndex=fe,e(p,V),b||E||(b=!0,X||(X=!0,ue()))),V},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(V){var Z=T;return function(){var se=T;T=Z;try{return V.apply(this,arguments)}finally{T=se}}}})(lf)),lf}var zg;function SE(){return zg||(zg=1,af.exports=TE()),af.exports}var uf={exports:{}},_t={};var Bg;function EE(){if(Bg)return _t;Bg=1;var t=ad();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,_t.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,y)},_t.flushSync=function(p){var h=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=h,o.p=y,o.d.f()}},_t.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(p,h))},_t.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},_t.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?o.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_t.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(p)},_t.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=d(y,h.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_t.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=d(h.as,h.crossOrigin);o.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(p)},_t.requestFormReset=function(p){o.d.r(p)},_t.unstable_batchedUpdates=function(p,h){return p(h)},_t.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.2.0",_t}var Fg;function CE(){if(Fg)return uf.exports;Fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uf.exports=EE(),uf.exports}var Yg;function AE(){if(Yg)return mr;Yg=1;var t=SE(),e=ad(),i=CE();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var a=n,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var S=!1,A=g.child;A;){if(A===a){S=!0,a=g,u=v;break}if(A===u){S=!0,u=g,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,u=g;break}if(A===u){S=!0,u=v,a=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function ue(n){return n===null||typeof n!="object"?null:(n=me&&n[me]||n["@@iterator"],typeof n=="function"?n:null)}var be=Symbol.for("react.client.reference");function $e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===be?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case X:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case U:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case K:return s=n.displayName||null,s!==null?s:$e(n.type)||"Memo";case ne:s=n._payload,n=n._init;try{return $e(n(s))}catch{}}return null}var Qe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Q=[],fe=-1;function x(n){return{current:n}}function Y(n){0>fe||(n.current=Q[fe],Q[fe]=null,fe--)}function G(n,s){fe++,Q[fe]=n.current,n.current=s}var ee=x(null),de=x(null),re=x(null),Ae=x(null);function vt(n,s){switch(G(re,s),G(de,n),G(ee,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rg(s),n=ag(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(ee),G(ee,n)}function Ne(){Y(ee),Y(de),Y(re)}function Ui(n){n.memoizedState!==null&&G(Ae,n);var s=ee.current,a=ag(s,n.type);s!==a&&(G(de,n),G(ee,a))}function ao(n){de.current===n&&(Y(ee),Y(de)),Ae.current===n&&(Y(Ae),cr._currentValue=se)}var lo,Br;function pn(n){if(lo===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);lo=s&&s[1]||"",Br=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lo+n+Br}var vs=!1;function _s(n,s){if(!n||vs)return"";vs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(n,[],$)}else{try{$.call()}catch(H){q=H}n.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],A=v[1];if(S&&A){var N=S.split(`
`),O=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===O.length)for(u=N.length-1,g=O.length-1;1<=u&&0<=g&&N[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==O[g]){var z=`
`+N[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=g);break}}}finally{vs=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?pn(a):""}function Bl(n,s){switch(n.tag){case 26:case 27:case 5:return pn(n.type);case 16:return pn("Lazy");case 13:return n.child!==s&&s!==null?pn("Suspense Fallback"):pn("Suspense");case 19:return pn("SuspenseList");case 0:case 15:return _s(n.type,!1);case 11:return _s(n.type.render,!1);case 1:return _s(n.type,!0);case 31:return pn("Activity");default:return""}}function Fr(n){try{var s="",a=null;do s+=Bl(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var uo=Object.prototype.hasOwnProperty,Ts=t.unstable_scheduleCallback,Ss=t.unstable_cancelCallback,Fl=t.unstable_shouldYield,qd=t.unstable_requestPaint,St=t.unstable_now,W=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,jn=t.unstable_UserBlockingPriority,ei=t.unstable_NormalPriority,Gd=t.unstable_LowPriority,Hd=t.unstable_IdlePriority,j_=t.log,eT=t.unstable_setDisableYieldValue,Es=null,Lt=null;function ti(n){if(typeof j_=="function"&&eT(n),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Es,n)}catch{}}var kt=Math.clz32?Math.clz32:iT,tT=Math.log,nT=Math.LN2;function iT(n){return n>>>=0,n===0?32:31-(tT(n)/nT|0)|0}var Yr=256,$r=262144,Jr=4194304;function Pi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Kr(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?g=Pi(u):(S&=A,S!==0?g=Pi(S):a||(a=A&~n,a!==0&&(g=Pi(a))))):(A=u&~v,A!==0?g=Pi(A):S!==0?g=Pi(S):a||(a=u&~n,a!==0&&(g=Pi(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function Cs(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function oT(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vd(){var n=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),n}function Yl(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function As(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function sT(n,s,a,u,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,N=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var z=31-kt(a),$=1<<z;A[z]=0,N[z]=-1;var q=O[z];if(q!==null)for(O[z]=null,z=0;z<q.length;z++){var H=q[z];H!==null&&(H.lane&=-536870913)}a&=~$}u!==0&&zd(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function zd(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-kt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Bd(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-kt(a),g=1<<u;g&s|n[u]&s&&(n[u]|=s),a&=~g}}function Fd(n,s){var a=s&-s;return a=(a&42)!==0?1:$l(a),(a&(n.suspendedLanes|s))!==0?0:a}function $l(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Jl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Yd(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:xg(n.type))}function $d(n,s){var a=Z.p;try{return Z.p=n,s()}finally{Z.p=a}}var ni=Math.random().toString(36).slice(2),ct="__reactFiber$"+ni,At="__reactProps$"+ni,co="__reactContainer$"+ni,Kl="__reactEvents$"+ni,rT="__reactListeners$"+ni,aT="__reactHandles$"+ni,Jd="__reactResources$"+ni,bs="__reactMarker$"+ni;function Ql(n){delete n[ct],delete n[At],delete n[Kl],delete n[rT],delete n[aT]}function fo(n){var s=n[ct];if(s)return s;for(var a=n.parentNode;a;){if(s=a[co]||a[ct]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=pg(n);n!==null;){if(a=n[ct])return a;n=pg(n)}return s}n=a,a=n.parentNode}return null}function ho(n){if(n=n[ct]||n[co]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ms(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function po(n){var s=n[Jd];return s||(s=n[Jd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function rt(n){n[bs]=!0}var Kd=new Set,Qd={};function Li(n,s){mo(n,s),mo(n+"Capture",s)}function mo(n,s){for(Qd[n]=s,n=0;n<s.length;n++)Kd.add(s[n])}var lT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xd={},Zd={};function uT(n){return uo.call(Zd,n)?!0:uo.call(Xd,n)?!1:lT.test(n)?Zd[n]=!0:(Xd[n]=!0,!1)}function Qr(n,s,a){if(uT(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Xr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function En(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function $t(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cT(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Xl(n){if(!n._valueTracker){var s=Wd(n)?"checked":"value";n._valueTracker=cT(n,s,""+n[s])}}function jd(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=Wd(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function Zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var fT=/[\n"\\]/g;function Jt(n){return n.replace(fT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zl(n,s,a,u,g,v,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+$t(s)):n.value!==""+$t(s)&&(n.value=""+$t(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?Wl(n,S,$t(s)):a!=null?Wl(n,S,$t(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+$t(A):n.removeAttribute("name")}function eh(n,s,a,u,g,v,S,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Xl(n);return}a=a!=null?""+$t(a):"",s=s!=null?""+$t(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),Xl(n)}function Wl(n,s,a){s==="number"&&Zr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function go(n,s,a,u){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+$t(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function th(n,s,a){if(s!=null&&(s=""+$t(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+$t(a):""}function nh(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(Qe(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=$t(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),Xl(n)}function yo(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var dT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ih(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||dT.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function oh(n,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&ih(n,g,u)}else for(var v in s)s.hasOwnProperty(v)&&ih(n,v,s[v])}function jl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(n){return pT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Cn(){}var eu=null;function tu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vo=null,_o=null;function sh(n){var s=ho(n);if(s&&(n=s.stateNode)){var a=n[At]||null;e:switch(n=s.stateNode,s.type){case"input":if(Zl(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var g=u[At]||null;if(!g)throw Error(o(90));Zl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&jd(u)}break e;case"textarea":th(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&go(n,!!a.multiple,s,!1)}}}var nu=!1;function rh(n,s,a){if(nu)return n(s,a);nu=!0;try{var u=n(s);return u}finally{if(nu=!1,(vo!==null||_o!==null)&&(Ga(),vo&&(s=vo,n=_o,_o=vo=null,sh(s),n)))for(s=0;s<n.length;s++)sh(n[s])}}function ws(n,s){var a=n.stateNode;if(a===null)return null;var u=a[At]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iu=!1;if(An)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){iu=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{iu=!1}var ii=null,ou=null,jr=null;function ah(){if(jr)return jr;var n,s=ou,a=s.length,u,g="value"in ii?ii.value:ii.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&s[a-u]===g[v-u];u++);return jr=g.slice(n,1<u?1-u:void 0)}function ea(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ta(){return!0}function lh(){return!1}function bt(n){function s(a,u,g,v,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ta:lh,this.isPropagationStopped=lh,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),s}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=bt(ki),Ns=_({},ki,{view:0,detail:0}),mT=bt(Ns),su,ru,xs,ia=_({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(su=n.screenX-xs.screenX,ru=n.screenY-xs.screenY):ru=su=0,xs=n),su)},movementY:function(n){return"movementY"in n?n.movementY:ru}}),uh=bt(ia),gT=_({},ia,{dataTransfer:0}),yT=bt(gT),vT=_({},Ns,{relatedTarget:0}),au=bt(vT),_T=_({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),TT=bt(_T),ST=_({},ki,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ET=bt(ST),CT=_({},ki,{data:0}),ch=bt(CT),AT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wT(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=MT[n])?!!s[n]:!1}function lu(){return wT}var RT=_({},Ns,{key:function(n){if(n.key){var s=AT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ea(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(n){return n.type==="keypress"?ea(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ea(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NT=bt(RT),xT=_({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=bt(xT),IT=_({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),DT=bt(IT),UT=_({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),PT=bt(UT),LT=_({},ia,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),kT=bt(LT),OT=_({},ki,{newState:0,oldState:0}),qT=bt(OT),GT=[9,13,27,32],uu=An&&"CompositionEvent"in window,Is=null;An&&"documentMode"in document&&(Is=document.documentMode);var HT=An&&"TextEvent"in window&&!Is,dh=An&&(!uu||Is&&8<Is&&11>=Is),hh=" ",ph=!1;function mh(n,s){switch(n){case"keyup":return GT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var To=!1;function VT(n,s){switch(n){case"compositionend":return gh(s);case"keypress":return s.which!==32?null:(ph=!0,hh);case"textInput":return n=s.data,n===hh&&ph?null:n;default:return null}}function zT(n,s){if(To)return n==="compositionend"||!uu&&mh(n,s)?(n=ah(),jr=ou=ii=null,To=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dh&&s.locale!=="ko"?null:s.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!BT[n.type]:s==="textarea"}function vh(n,s,a,u){vo?_o?_o.push(u):_o=[u]:vo=u,s=$a(s,"onChange"),0<s.length&&(a=new na("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Ds=null,Us=null;function FT(n){eg(n,0)}function oa(n){var s=Ms(n);if(jd(s))return n}function _h(n,s){if(n==="change")return s}var Th=!1;if(An){var cu;if(An){var fu="oninput"in document;if(!fu){var Sh=document.createElement("div");Sh.setAttribute("oninput","return;"),fu=typeof Sh.oninput=="function"}cu=fu}else cu=!1;Th=cu&&(!document.documentMode||9<document.documentMode)}function Eh(){Ds&&(Ds.detachEvent("onpropertychange",Ch),Us=Ds=null)}function Ch(n){if(n.propertyName==="value"&&oa(Us)){var s=[];vh(s,Us,n,tu(n)),rh(FT,s)}}function YT(n,s,a){n==="focusin"?(Eh(),Ds=s,Us=a,Ds.attachEvent("onpropertychange",Ch)):n==="focusout"&&Eh()}function $T(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return oa(Us)}function JT(n,s){if(n==="click")return oa(s)}function KT(n,s){if(n==="input"||n==="change")return oa(s)}function QT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ot=typeof Object.is=="function"?Object.is:QT;function Ps(n,s){if(Ot(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!uo.call(s,g)||!Ot(n[g],s[g]))return!1}return!0}function Ah(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bh(n,s){var a=Ah(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ah(a)}}function Mh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Mh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Zr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Zr(n.document)}return s}function du(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var XT=An&&"documentMode"in document&&11>=document.documentMode,So=null,hu=null,Ls=null,pu=!1;function Rh(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pu||So==null||So!==Zr(u)||(u=So,"selectionStart"in u&&du(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ls&&Ps(Ls,u)||(Ls=u,u=$a(hu,"onSelect"),0<u.length&&(s=new na("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=So)))}function Oi(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Eo={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionrun:Oi("Transition","TransitionRun"),transitionstart:Oi("Transition","TransitionStart"),transitioncancel:Oi("Transition","TransitionCancel"),transitionend:Oi("Transition","TransitionEnd")},mu={},Nh={};An&&(Nh=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function qi(n){if(mu[n])return mu[n];if(!Eo[n])return n;var s=Eo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Nh)return mu[n]=s[a];return n}var xh=qi("animationend"),Ih=qi("animationiteration"),Dh=qi("animationstart"),ZT=qi("transitionrun"),WT=qi("transitionstart"),jT=qi("transitioncancel"),Uh=qi("transitionend"),Ph=new Map,gu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gu.push("scrollEnd");function rn(n,s){Ph.set(n,s),Li(s,[n])}var sa=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Kt=[],Co=0,yu=0;function ra(){for(var n=Co,s=yu=Co=0;s<n;){var a=Kt[s];Kt[s++]=null;var u=Kt[s];Kt[s++]=null;var g=Kt[s];Kt[s++]=null;var v=Kt[s];if(Kt[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&Lh(a,g,v)}}function aa(n,s,a,u){Kt[Co++]=n,Kt[Co++]=s,Kt[Co++]=a,Kt[Co++]=u,yu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function vu(n,s,a,u){return aa(n,s,a,u),la(n)}function Gi(n,s){return aa(n,null,null,s),la(n)}function Lh(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-kt(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function la(n){if(50<ir)throw ir=0,wc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ao={};function eS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(n,s,a,u){return new eS(n,s,a,u)}function _u(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bn(n,s){var a=n.alternate;return a===null?(a=qt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function kh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ua(n,s,a,u,g,v){var S=0;if(u=n,typeof n=="function")_u(n)&&(S=1);else if(typeof n=="string")S=sE(n,a,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=qt(31,a,s,g),n.elementType=j,n.lanes=v,n;case M:return Hi(a.children,g,v,s);case w:S=8,g|=24;break;case R:return n=qt(12,a,s,g|2),n.elementType=R,n.lanes=v,n;case B:return n=qt(13,a,s,g),n.elementType=B,n.lanes=v,n;case X:return n=qt(19,a,s,g),n.elementType=X,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case D:S=9;break e;case J:S=11;break e;case K:S=14;break e;case ne:S=16,u=null;break e}S=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=qt(S,a,s,g),s.elementType=n,s.type=u,s.lanes=v,s}function Hi(n,s,a,u){return n=qt(7,n,u,s),n.lanes=a,n}function Tu(n,s,a){return n=qt(6,n,null,s),n.lanes=a,n}function Oh(n){var s=qt(18,null,null,0);return s.stateNode=n,s}function Su(n,s,a){return s=qt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var qh=new WeakMap;function Qt(n,s){if(typeof n=="object"&&n!==null){var a=qh.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Fr(s)},qh.set(n,s),s)}return{value:n,source:s,stack:Fr(s)}}var bo=[],Mo=0,ca=null,ks=0,Xt=[],Zt=0,oi=null,mn=1,gn="";function Mn(n,s){bo[Mo++]=ks,bo[Mo++]=ca,ca=n,ks=s}function Gh(n,s,a){Xt[Zt++]=mn,Xt[Zt++]=gn,Xt[Zt++]=oi,oi=n;var u=mn;n=gn;var g=32-kt(u)-1;u&=~(1<<g),a+=1;var v=32-kt(s)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,mn=1<<32-kt(s)+g|a<<g|u,gn=v+n}else mn=1<<v|a<<g|u,gn=n}function Eu(n){n.return!==null&&(Mn(n,1),Gh(n,1,0))}function Cu(n){for(;n===ca;)ca=bo[--Mo],bo[Mo]=null,ks=bo[--Mo],bo[Mo]=null;for(;n===oi;)oi=Xt[--Zt],Xt[Zt]=null,gn=Xt[--Zt],Xt[Zt]=null,mn=Xt[--Zt],Xt[Zt]=null}function Hh(n,s){Xt[Zt++]=mn,Xt[Zt++]=gn,Xt[Zt++]=oi,mn=s.id,gn=s.overflow,oi=n}var ft=null,qe=null,Ce=!1,si=null,Wt=!1,Au=Error(o(519));function ri(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Os(Qt(s,n)),Au}function Vh(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[ct]=n,s[At]=u,a){case"dialog":ve("cancel",s),ve("close",s);break;case"iframe":case"object":case"embed":ve("load",s);break;case"video":case"audio":for(a=0;a<sr.length;a++)ve(sr[a],s);break;case"source":ve("error",s);break;case"img":case"image":case"link":ve("error",s),ve("load",s);break;case"details":ve("toggle",s);break;case"input":ve("invalid",s),eh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ve("invalid",s);break;case"textarea":ve("invalid",s),nh(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||og(s.textContent,a)?(u.popover!=null&&(ve("beforetoggle",s),ve("toggle",s)),u.onScroll!=null&&ve("scroll",s),u.onScrollEnd!=null&&ve("scrollend",s),u.onClick!=null&&(s.onclick=Cn),s=!0):s=!1,s||ri(n,!0)}function zh(n){for(ft=n.return;ft;)switch(ft.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:ft=ft.return}}function wo(n){if(n!==ft)return!1;if(!Ce)return zh(n),Ce=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||zc(n.type,n.memoizedProps)),a=!a),a&&qe&&ri(n),zh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));qe=hg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));qe=hg(n)}else s===27?(s=qe,Ti(n.type)?(n=Jc,Jc=null,qe=n):qe=s):qe=ft?en(n.stateNode.nextSibling):null;return!0}function Vi(){qe=ft=null,Ce=!1}function bu(){var n=si;return n!==null&&(Nt===null?Nt=n:Nt.push.apply(Nt,n),si=null),n}function Os(n){si===null?si=[n]:si.push(n)}var Mu=x(null),zi=null,wn=null;function ai(n,s,a){G(Mu,s._currentValue),s._currentValue=a}function Rn(n){n._currentValue=Mu.current,Y(Mu)}function wu(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Ru(n,s,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=g;for(var N=0;N<s.length;N++)if(A.context===s[N]){v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),wu(v.return,a,n),u||(S=null);break e}v=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),wu(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Ro(n,s,a,u){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;Ot(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===Ae.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(cr):n=[cr])}g=g.return}n!==null&&Ru(s,n,a,u),s.flags|=262144}function fa(n){for(n=n.firstContext;n!==null;){if(!Ot(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Bi(n){zi=n,wn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function dt(n){return Bh(zi,n)}function da(n,s){return zi===null&&Bi(n),Bh(n,s)}function Bh(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},wn===null){if(n===null)throw Error(o(308));wn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else wn=wn.next=s;return a}var tS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},nS=t.unstable_scheduleCallback,iS=t.unstable_NormalPriority,je={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new tS,data:new Map,refCount:0}}function qs(n){n.refCount--,n.refCount===0&&nS(iS,function(){n.controller.abort()})}var Gs=null,xu=0,No=0,xo=null;function oS(n,s){if(Gs===null){var a=Gs=[];xu=0,No=Uc(),xo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return xu++,s.then(Fh,Fh),s}function Fh(){if(--xu===0&&Gs!==null){xo!==null&&(xo.status="fulfilled");var n=Gs;Gs=null,No=0,xo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function sS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Yh=V.S;V.S=function(n,s){Rm=St(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&oS(n,s),Yh!==null&&Yh(n,s)};var Fi=x(null);function Iu(){var n=Fi.current;return n!==null?n:Oe.pooledCache}function ha(n,s){s===null?G(Fi,Fi.current):G(Fi,s.pool)}function $h(){var n=Iu();return n===null?null:{parent:je._currentValue,pool:n}}var Io=Error(o(460)),Du=Error(o(474)),pa=Error(o(542)),ma={then:function(){}};function Jh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Kh(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Cn,Cn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Xh(n),n;default:if(typeof s.status=="string")s.then(Cn,Cn);else{if(n=Oe,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Xh(n),n}throw $i=s,Io}}function Yi(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($i=a,Io):a}}var $i=null;function Qh(){if($i===null)throw Error(o(459));var n=$i;return $i=null,n}function Xh(n){if(n===Io||n===pa)throw Error(o(483))}var Do=null,Hs=0;function ga(n){var s=Hs;return Hs+=1,Do===null&&(Do=[]),Kh(Do,n,s)}function Vs(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ya(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Zh(n){function s(L,I){if(n){var k=L.deletions;k===null?(L.deletions=[I],L.flags|=16):k.push(I)}}function a(L,I){if(!n)return null;for(;I!==null;)s(L,I),I=I.sibling;return null}function u(L){for(var I=new Map;L!==null;)L.key!==null?I.set(L.key,L):I.set(L.index,L),L=L.sibling;return I}function g(L,I){return L=bn(L,I),L.index=0,L.sibling=null,L}function v(L,I,k){return L.index=k,n?(k=L.alternate,k!==null?(k=k.index,k<I?(L.flags|=67108866,I):k):(L.flags|=67108866,I)):(L.flags|=1048576,I)}function S(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,I,k,F){return I===null||I.tag!==6?(I=Tu(k,L.mode,F),I.return=L,I):(I=g(I,k),I.return=L,I)}function N(L,I,k,F){var le=k.type;return le===M?z(L,I,k.props.children,F,k.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ne&&Yi(le)===I.type)?(I=g(I,k.props),Vs(I,k),I.return=L,I):(I=ua(k.type,k.key,k.props,null,L.mode,F),Vs(I,k),I.return=L,I)}function O(L,I,k,F){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=Su(k,L.mode,F),I.return=L,I):(I=g(I,k.children||[]),I.return=L,I)}function z(L,I,k,F,le){return I===null||I.tag!==7?(I=Hi(k,L.mode,F,le),I.return=L,I):(I=g(I,k),I.return=L,I)}function $(L,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Tu(""+I,L.mode,k),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return k=ua(I.type,I.key,I.props,null,L.mode,k),Vs(k,I),k.return=L,k;case b:return I=Su(I,L.mode,k),I.return=L,I;case ne:return I=Yi(I),$(L,I,k)}if(Qe(I)||ue(I))return I=Hi(I,L.mode,k,null),I.return=L,I;if(typeof I.then=="function")return $(L,ga(I),k);if(I.$$typeof===U)return $(L,da(L,I),k);ya(L,I)}return null}function q(L,I,k,F){var le=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return le!==null?null:A(L,I,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return k.key===le?N(L,I,k,F):null;case b:return k.key===le?O(L,I,k,F):null;case ne:return k=Yi(k),q(L,I,k,F)}if(Qe(k)||ue(k))return le!==null?null:z(L,I,k,F,null);if(typeof k.then=="function")return q(L,I,ga(k),F);if(k.$$typeof===U)return q(L,I,da(L,k),F);ya(L,k)}return null}function H(L,I,k,F,le){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return L=L.get(k)||null,A(I,L,""+F,le);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return L=L.get(F.key===null?k:F.key)||null,N(I,L,F,le);case b:return L=L.get(F.key===null?k:F.key)||null,O(I,L,F,le);case ne:return F=Yi(F),H(L,I,k,F,le)}if(Qe(F)||ue(F))return L=L.get(k)||null,z(I,L,F,le,null);if(typeof F.then=="function")return H(L,I,k,ga(F),le);if(F.$$typeof===U)return H(L,I,k,da(I,F),le);ya(I,F)}return null}function ie(L,I,k,F){for(var le=null,Me=null,oe=I,ge=I=0,Se=null;oe!==null&&ge<k.length;ge++){oe.index>ge?(Se=oe,oe=null):Se=oe.sibling;var we=q(L,oe,k[ge],F);if(we===null){oe===null&&(oe=Se);break}n&&oe&&we.alternate===null&&s(L,oe),I=v(we,I,ge),Me===null?le=we:Me.sibling=we,Me=we,oe=Se}if(ge===k.length)return a(L,oe),Ce&&Mn(L,ge),le;if(oe===null){for(;ge<k.length;ge++)oe=$(L,k[ge],F),oe!==null&&(I=v(oe,I,ge),Me===null?le=oe:Me.sibling=oe,Me=oe);return Ce&&Mn(L,ge),le}for(oe=u(oe);ge<k.length;ge++)Se=H(oe,L,ge,k[ge],F),Se!==null&&(n&&Se.alternate!==null&&oe.delete(Se.key===null?ge:Se.key),I=v(Se,I,ge),Me===null?le=Se:Me.sibling=Se,Me=Se);return n&&oe.forEach(function(bi){return s(L,bi)}),Ce&&Mn(L,ge),le}function ce(L,I,k,F){if(k==null)throw Error(o(151));for(var le=null,Me=null,oe=I,ge=I=0,Se=null,we=k.next();oe!==null&&!we.done;ge++,we=k.next()){oe.index>ge?(Se=oe,oe=null):Se=oe.sibling;var bi=q(L,oe,we.value,F);if(bi===null){oe===null&&(oe=Se);break}n&&oe&&bi.alternate===null&&s(L,oe),I=v(bi,I,ge),Me===null?le=bi:Me.sibling=bi,Me=bi,oe=Se}if(we.done)return a(L,oe),Ce&&Mn(L,ge),le;if(oe===null){for(;!we.done;ge++,we=k.next())we=$(L,we.value,F),we!==null&&(I=v(we,I,ge),Me===null?le=we:Me.sibling=we,Me=we);return Ce&&Mn(L,ge),le}for(oe=u(oe);!we.done;ge++,we=k.next())we=H(oe,L,ge,we.value,F),we!==null&&(n&&we.alternate!==null&&oe.delete(we.key===null?ge:we.key),I=v(we,I,ge),Me===null?le=we:Me.sibling=we,Me=we);return n&&oe.forEach(function(gE){return s(L,gE)}),Ce&&Mn(L,ge),le}function ke(L,I,k,F){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case E:e:{for(var le=k.key;I!==null;){if(I.key===le){if(le=k.type,le===M){if(I.tag===7){a(L,I.sibling),F=g(I,k.props.children),F.return=L,L=F;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ne&&Yi(le)===I.type){a(L,I.sibling),F=g(I,k.props),Vs(F,k),F.return=L,L=F;break e}a(L,I);break}else s(L,I);I=I.sibling}k.type===M?(F=Hi(k.props.children,L.mode,F,k.key),F.return=L,L=F):(F=ua(k.type,k.key,k.props,null,L.mode,F),Vs(F,k),F.return=L,L=F)}return S(L);case b:e:{for(le=k.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){a(L,I.sibling),F=g(I,k.children||[]),F.return=L,L=F;break e}else{a(L,I);break}else s(L,I);I=I.sibling}F=Su(k,L.mode,F),F.return=L,L=F}return S(L);case ne:return k=Yi(k),ke(L,I,k,F)}if(Qe(k))return ie(L,I,k,F);if(ue(k)){if(le=ue(k),typeof le!="function")throw Error(o(150));return k=le.call(k),ce(L,I,k,F)}if(typeof k.then=="function")return ke(L,I,ga(k),F);if(k.$$typeof===U)return ke(L,I,da(L,k),F);ya(L,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,I!==null&&I.tag===6?(a(L,I.sibling),F=g(I,k),F.return=L,L=F):(a(L,I),F=Tu(k,L.mode,F),F.return=L,L=F),S(L)):a(L,I)}return function(L,I,k,F){try{Hs=0;var le=ke(L,I,k,F);return Do=null,le}catch(oe){if(oe===Io||oe===pa)throw oe;var Me=qt(29,oe,null,L.mode);return Me.lanes=F,Me.return=L,Me}finally{}}}var Ji=Zh(!0),Wh=Zh(!1),li=!1;function Uu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ui(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ci(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(xe&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=la(n),Lh(n,null,a),s}return aa(n,u,s,a),la(n)}function zs(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Bd(n,a)}}function Lu(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var ku=!1;function Bs(){if(ku){var n=xo;if(n!==null)throw n}}function Fs(n,s,a,u){ku=!1;var g=n.updateQueue;li=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,O=N.next;N.next=null,S===null?v=O:S.next=O,S=N;var z=n.alternate;z!==null&&(z=z.updateQueue,A=z.lastBaseUpdate,A!==S&&(A===null?z.firstBaseUpdate=O:A.next=O,z.lastBaseUpdate=N))}if(v!==null){var $=g.baseState;S=0,z=O=N=null,A=v;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Te&q)===q:(u&q)===q){q!==0&&q===No&&(ku=!0),z!==null&&(z=z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ie=n,ce=A;q=s;var ke=a;switch(ce.tag){case 1:if(ie=ce.payload,typeof ie=="function"){$=ie.call(ke,$,q);break e}$=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ce.payload,q=typeof ie=="function"?ie.call(ke,$,q):ie,q==null)break e;$=_({},$,q);break e;case 2:li=!0}}q=A.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=g.callbacks,H===null?g.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},z===null?(O=z=H,N=$):z=z.next=H,S|=q;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;H=A,A=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);z===null&&(N=$),g.baseState=N,g.firstBaseUpdate=O,g.lastBaseUpdate=z,v===null&&(g.shared.lanes=0),mi|=S,n.lanes=S,n.memoizedState=$}}function jh(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function ep(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)jh(a[n],s)}var Uo=x(null),va=x(0);function tp(n,s){n=On,G(va,n),G(Uo,s),On=n|s.baseLanes}function Ou(){G(va,On),G(Uo,Uo.current)}function qu(){On=va.current,Y(Uo),Y(va)}var Gt=x(null),jt=null;function fi(n){var s=n.alternate;G(Xe,Xe.current&1),G(Gt,n),jt===null&&(s===null||Uo.current!==null||s.memoizedState!==null)&&(jt=n)}function Gu(n){G(Xe,Xe.current),G(Gt,n),jt===null&&(jt=n)}function np(n){n.tag===22?(G(Xe,Xe.current),G(Gt,n),jt===null&&(jt=n)):di()}function di(){G(Xe,Xe.current),G(Gt,Gt.current)}function Ht(n){Y(Gt),jt===n&&(jt=null),Y(Xe)}var Xe=x(0);function _a(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yc(a)||$c(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nn=0,pe=null,Pe=null,et=null,Ta=!1,Po=!1,Ki=!1,Sa=0,Ys=0,Lo=null,rS=0;function Je(){throw Error(o(321))}function Hu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Ot(n[a],s[a]))return!1;return!0}function Vu(n,s,a,u,g,v){return Nn=v,pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?Gp:nc,Ki=!1,v=a(u,g),Ki=!1,Po&&(v=op(s,a,u,g)),ip(n),v}function ip(n){V.H=Ks;var s=Pe!==null&&Pe.next!==null;if(Nn=0,et=Pe=pe=null,Ta=!1,Ys=0,Lo=null,s)throw Error(o(300));n===null||tt||(n=n.dependencies,n!==null&&fa(n)&&(tt=!0))}function op(n,s,a,u){pe=n;var g=0;do{if(Po&&(Lo=null),Ys=0,Po=!1,25<=g)throw Error(o(301));if(g+=1,et=Pe=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}V.H=Hp,v=s(a,u)}while(Po);return v}function aS(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?$s(s):s,n=n.useState()[0],(Pe!==null?Pe.memoizedState:null)!==n&&(pe.flags|=1024),s}function zu(){var n=Sa!==0;return Sa=0,n}function Bu(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Fu(n){if(Ta){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ta=!1}Nn=0,et=Pe=pe=null,Po=!1,Ys=Sa=0,Lo=null}function Et(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?pe.memoizedState=et=n:et=et.next=n,et}function Ze(){if(Pe===null){var n=pe.alternate;n=n!==null?n.memoizedState:null}else n=Pe.next;var s=et===null?pe.memoizedState:et.next;if(s!==null)et=s,Pe=n;else{if(n===null)throw pe.alternate===null?Error(o(467)):Error(o(310));Pe=n,n={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},et===null?pe.memoizedState=et=n:et=et.next=n}return et}function Ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $s(n){var s=Ys;return Ys+=1,Lo===null&&(Lo=[]),n=Kh(Lo,n,s),s=pe,(et===null?s.memoizedState:et.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Gp:nc),n}function Ca(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $s(n);if(n.$$typeof===U)return dt(n)}throw Error(o(438,String(n)))}function Yu(n){var s=null,a=pe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ea(),pe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=ae;return s.index++,a}function xn(n,s){return typeof s=="function"?s(n):s}function Aa(n){var s=Ze();return $u(s,Pe,n)}function $u(n,s,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var A=S=null,N=null,O=s,z=!1;do{var $=O.lane&-536870913;if($!==O.lane?(Te&$)===$:(Nn&$)===$){var q=O.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===No&&(z=!0);else if((Nn&q)===q){O=O.next,q===No&&(z=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=$,S=v):N=N.next=$,pe.lanes|=q,mi|=q;$=O.action,Ki&&a(v,$),v=O.hasEagerState?O.eagerState:a(v,$)}else q={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=q,S=v):N=N.next=q,pe.lanes|=$,mi|=$;O=O.next}while(O!==null&&O!==s);if(N===null?S=v:N.next=A,!Ot(v,n.memoizedState)&&(tt=!0,z&&(a=xo,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=N,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Ju(n){var s=Ze(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);Ot(v,s.memoizedState)||(tt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function sp(n,s,a){var u=pe,g=Ze(),v=Ce;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!Ot((Pe||g).memoizedState,a);if(S&&(g.memoizedState=a,tt=!0),g=g.queue,Xu(lp.bind(null,u,g,n),[n]),g.getSnapshot!==s||S||et!==null&&et.memoizedState.tag&1){if(u.flags|=2048,ko(9,{destroy:void 0},ap.bind(null,u,g,a,s),null),Oe===null)throw Error(o(349));v||(Nn&127)!==0||rp(u,s,a)}return a}function rp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=pe.updateQueue,s===null?(s=Ea(),pe.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ap(n,s,a,u){s.value=a,s.getSnapshot=u,up(s)&&cp(n)}function lp(n,s,a){return a(function(){up(s)&&cp(n)})}function up(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Ot(n,a)}catch{return!0}}function cp(n){var s=Gi(n,2);s!==null&&xt(s,n,2)}function Ku(n){var s=Et();if(typeof n=="function"){var a=n;if(n=a(),Ki){ti(!0);try{a()}finally{ti(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:n},s}function fp(n,s,a,u){return n.baseState=a,$u(n,Pe,typeof u=="function"?u:xn)}function lS(n,s,a,u,g){if(wa(n))throw Error(o(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};V.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,dp(s,v)):(v.next=a.next,s.pending=a.next=v)}}function dp(n,s){var a=s.action,u=s.payload,g=n.state;if(s.isTransition){var v=V.T,S={};V.T=S;try{var A=a(g,u),N=V.S;N!==null&&N(S,A),hp(n,s,A)}catch(O){Qu(n,s,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),V.T=v}}else try{v=a(g,u),hp(n,s,v)}catch(O){Qu(n,s,O)}}function hp(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){pp(n,s,u)},function(u){return Qu(n,s,u)}):pp(n,s,a)}function pp(n,s,a){s.status="fulfilled",s.value=a,mp(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,dp(n,a)))}function Qu(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,mp(s),s=s.next;while(s!==u)}n.action=null}function mp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function gp(n,s){return s}function yp(n,s){if(Ce){var a=Oe.formState;if(a!==null){e:{var u=pe;if(Ce){if(qe){t:{for(var g=qe,v=Wt;g.nodeType!==8;){if(!v){g=null;break t}if(g=en(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){qe=en(g.nextSibling),u=g.data==="F!";break e}}ri(u)}u=!1}u&&(s=a[0])}}return a=Et(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:s},a.queue=u,a=kp.bind(null,pe,u),u.dispatch=a,u=Ku(!1),v=tc.bind(null,pe,!1,u.queue),u=Et(),g={state:s,dispatch:null,action:n,pending:null},u.queue=g,a=lS.bind(null,pe,g,v,a),g.dispatch=a,u.memoizedState=n,[s,a,!1]}function vp(n){var s=Ze();return _p(s,Pe,n)}function _p(n,s,a){if(s=$u(n,s,gp)[0],n=Aa(xn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=$s(s)}catch(S){throw S===Io?pa:S}else u=s;s=Ze();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(pe.flags|=2048,ko(9,{destroy:void 0},uS.bind(null,g,a),null)),[u,v,n]}function uS(n,s){n.action=s}function Tp(n){var s=Ze(),a=Pe;if(a!==null)return _p(s,a,n);Ze(),s=s.memoizedState,a=Ze();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function ko(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=pe.updateQueue,s===null&&(s=Ea(),pe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function Sp(){return Ze().memoizedState}function ba(n,s,a,u){var g=Et();pe.flags|=n,g.memoizedState=ko(1|s,{destroy:void 0},a,u===void 0?null:u)}function Ma(n,s,a,u){var g=Ze();u=u===void 0?null:u;var v=g.memoizedState.inst;Pe!==null&&u!==null&&Hu(u,Pe.memoizedState.deps)?g.memoizedState=ko(s,v,a,u):(pe.flags|=n,g.memoizedState=ko(1|s,v,a,u))}function Ep(n,s){ba(8390656,8,n,s)}function Xu(n,s){Ma(2048,8,n,s)}function cS(n){pe.flags|=4;var s=pe.updateQueue;if(s===null)s=Ea(),pe.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Cp(n){var s=Ze().memoizedState;return cS({ref:s,nextImpl:n}),function(){if((xe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Ap(n,s){return Ma(4,2,n,s)}function bp(n,s){return Ma(4,4,n,s)}function Mp(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wp(n,s,a){a=a!=null?a.concat([n]):null,Ma(4,4,Mp.bind(null,s,n),a)}function Zu(){}function Rp(n,s){var a=Ze();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Hu(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Np(n,s){var a=Ze();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Hu(s,u[1]))return u[0];if(u=n(),Ki){ti(!0);try{n()}finally{ti(!1)}}return a.memoizedState=[u,s],u}function Wu(n,s,a){return a===void 0||(Nn&1073741824)!==0&&(Te&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=xm(),pe.lanes|=n,mi|=n,a)}function xp(n,s,a,u){return Ot(a,s)?a:Uo.current!==null?(n=Wu(n,a,u),Ot(n,s)||(tt=!0),n):(Nn&42)===0||(Nn&1073741824)!==0&&(Te&261930)===0?(tt=!0,n.memoizedState=a):(n=xm(),pe.lanes|=n,mi|=n,s)}function Ip(n,s,a,u,g){var v=Z.p;Z.p=v!==0&&8>v?v:8;var S=V.T,A={};V.T=A,tc(n,!1,s,a);try{var N=g(),O=V.S;if(O!==null&&O(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=sS(N,u);Js(n,s,z,Bt(n))}else Js(n,s,u,Bt(n))}catch($){Js(n,s,{then:function(){},status:"rejected",reason:$},Bt())}finally{Z.p=v,S!==null&&A.types!==null&&(S.types=A.types),V.T=S}}function fS(){}function ju(n,s,a,u){if(n.tag!==5)throw Error(o(476));var g=Dp(n).queue;Ip(n,g,s,se,a===null?fS:function(){return Up(n),a(u)})}function Dp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:se},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Up(n){var s=Dp(n);s.next===null&&(s=n.alternate.memoizedState),Js(n,s.next.queue,{},Bt())}function ec(){return dt(cr)}function Pp(){return Ze().memoizedState}function Lp(){return Ze().memoizedState}function dS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Bt();n=ui(a);var u=ci(s,n,a);u!==null&&(xt(u,s,a),zs(u,s,a)),s={cache:Nu()},n.payload=s;return}s=s.return}}function hS(n,s,a){var u=Bt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wa(n)?Op(s,a):(a=vu(n,s,a,u),a!==null&&(xt(a,n,u),qp(a,s,u)))}function kp(n,s,a){var u=Bt();Js(n,s,a,u)}function Js(n,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wa(n))Op(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,A=v(S,a);if(g.hasEagerState=!0,g.eagerState=A,Ot(A,S))return aa(n,s,g,0),Oe===null&&ra(),!1}catch{}finally{}if(a=vu(n,s,g,u),a!==null)return xt(a,n,u),qp(a,s,u),!0}return!1}function tc(n,s,a,u){if(u={lane:2,revertLane:Uc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wa(n)){if(s)throw Error(o(479))}else s=vu(n,a,u,2),s!==null&&xt(s,n,2)}function wa(n){var s=n.alternate;return n===pe||s!==null&&s===pe}function Op(n,s){Po=Ta=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function qp(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Bd(n,a)}}var Ks={readContext:dt,use:Ca,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};Ks.useEffectEvent=Je;var Gp={readContext:dt,use:Ca,useCallback:function(n,s){return Et().memoizedState=[n,s===void 0?null:s],n},useContext:dt,useEffect:Ep,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,ba(4194308,4,Mp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return ba(4194308,4,n,s)},useInsertionEffect:function(n,s){ba(4,2,n,s)},useMemo:function(n,s){var a=Et();s=s===void 0?null:s;var u=n();if(Ki){ti(!0);try{n()}finally{ti(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=Et();if(a!==void 0){var g=a(s);if(Ki){ti(!0);try{a(s)}finally{ti(!1)}}}else g=s;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=hS.bind(null,pe,n),[u.memoizedState,n]},useRef:function(n){var s=Et();return n={current:n},s.memoizedState=n},useState:function(n){n=Ku(n);var s=n.queue,a=kp.bind(null,pe,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Zu,useDeferredValue:function(n,s){var a=Et();return Wu(a,n,s)},useTransition:function(){var n=Ku(!1);return n=Ip.bind(null,pe,n.queue,!0,!1),Et().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=pe,g=Et();if(Ce){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Oe===null)throw Error(o(349));(Te&127)!==0||rp(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,Ep(lp.bind(null,u,v,n),[n]),u.flags|=2048,ko(9,{destroy:void 0},ap.bind(null,u,v,a,s),null),a},useId:function(){var n=Et(),s=Oe.identifierPrefix;if(Ce){var a=gn,u=mn;a=(u&~(1<<32-kt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Sa++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=rS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:ec,useFormState:yp,useActionState:yp,useOptimistic:function(n){var s=Et();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=tc.bind(null,pe,!0,a),a.dispatch=s,[n,s]},useMemoCache:Yu,useCacheRefresh:function(){return Et().memoizedState=dS.bind(null,pe)},useEffectEvent:function(n){var s=Et(),a={impl:n};return s.memoizedState=a,function(){if((xe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},nc={readContext:dt,use:Ca,useCallback:Rp,useContext:dt,useEffect:Xu,useImperativeHandle:wp,useInsertionEffect:Ap,useLayoutEffect:bp,useMemo:Np,useReducer:Aa,useRef:Sp,useState:function(){return Aa(xn)},useDebugValue:Zu,useDeferredValue:function(n,s){var a=Ze();return xp(a,Pe.memoizedState,n,s)},useTransition:function(){var n=Aa(xn)[0],s=Ze().memoizedState;return[typeof n=="boolean"?n:$s(n),s]},useSyncExternalStore:sp,useId:Pp,useHostTransitionStatus:ec,useFormState:vp,useActionState:vp,useOptimistic:function(n,s){var a=Ze();return fp(a,Pe,n,s)},useMemoCache:Yu,useCacheRefresh:Lp};nc.useEffectEvent=Cp;var Hp={readContext:dt,use:Ca,useCallback:Rp,useContext:dt,useEffect:Xu,useImperativeHandle:wp,useInsertionEffect:Ap,useLayoutEffect:bp,useMemo:Np,useReducer:Ju,useRef:Sp,useState:function(){return Ju(xn)},useDebugValue:Zu,useDeferredValue:function(n,s){var a=Ze();return Pe===null?Wu(a,n,s):xp(a,Pe.memoizedState,n,s)},useTransition:function(){var n=Ju(xn)[0],s=Ze().memoizedState;return[typeof n=="boolean"?n:$s(n),s]},useSyncExternalStore:sp,useId:Pp,useHostTransitionStatus:ec,useFormState:Tp,useActionState:Tp,useOptimistic:function(n,s){var a=Ze();return Pe!==null?fp(a,Pe,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Yu,useCacheRefresh:Lp};Hp.useEffectEvent=Cp;function ic(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var oc={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Bt(),g=ui(u);g.payload=s,a!=null&&(g.callback=a),s=ci(n,g,u),s!==null&&(xt(s,n,u),zs(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Bt(),g=ui(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ci(n,g,u),s!==null&&(xt(s,n,u),zs(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Bt(),u=ui(a);u.tag=2,s!=null&&(u.callback=s),s=ci(n,u,a),s!==null&&(xt(s,n,a),zs(s,n,a))}};function Vp(n,s,a,u,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ps(a,u)||!Ps(g,v):!0}function zp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&oc.enqueueReplaceState(s,s.state,null)}function Qi(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function Bp(n){sa(n)}function Fp(n){console.error(n)}function Yp(n){sa(n)}function Ra(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function $p(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function sc(n,s,a){return a=ui(a),a.tag=3,a.payload={element:null},a.callback=function(){Ra(n,s)},a}function Jp(n){return n=ui(n),n.tag=3,n}function Kp(n,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){$p(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){$p(s,a,u),typeof g!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function pS(n,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Ro(s,a,g,!0),a=Gt.current,a!==null){switch(a.tag){case 31:case 13:return jt===null?Ha():a.alternate===null&&Ke===0&&(Ke=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===ma?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),xc(n,u,g)),!1;case 22:return a.flags|=65536,u===ma?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),xc(n,u,g)),!1}throw Error(o(435,a.tag))}return xc(n,u,g),Ha(),!1}if(Ce)return s=Gt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Au&&(n=Error(o(422),{cause:u}),Os(Qt(n,a)))):(u!==Au&&(s=Error(o(423),{cause:u}),Os(Qt(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Qt(u,a),g=sc(n.stateNode,u,g),Lu(n,g),Ke!==4&&(Ke=2)),!1;var v=Error(o(520),{cause:u});if(v=Qt(v,a),nr===null?nr=[v]:nr.push(v),Ke!==4&&(Ke=2),s===null)return!0;u=Qt(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=sc(a.stateNode,u,n),Lu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(gi===null||!gi.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Jp(g),Kp(g,n,a,u),Lu(a,g),!1}a=a.return}while(a!==null);return!1}var rc=Error(o(461)),tt=!1;function ht(n,s,a,u){s.child=n===null?Wh(s,null,a,u):Ji(s,n.child,a,u)}function Qp(n,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return Bi(s),u=Vu(n,s,a,S,v,g),A=zu(),n!==null&&!tt?(Bu(n,s,g),In(n,s,g)):(Ce&&A&&Eu(s),s.flags|=1,ht(n,s,u,g),s.child)}function Xp(n,s,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!_u(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,Zp(n,s,v,u,g)):(n=ua(a.type,null,u,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!pc(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ps,a(S,u)&&n.ref===s.ref)return In(n,s,g)}return s.flags|=1,n=bn(v,u),n.ref=s.ref,n.return=s,s.child=n}function Zp(n,s,a,u,g){if(n!==null){var v=n.memoizedProps;if(Ps(v,u)&&n.ref===s.ref)if(tt=!1,s.pendingProps=u=v,pc(n,g))(n.flags&131072)!==0&&(tt=!0);else return s.lanes=n.lanes,In(n,s,g)}return ac(n,s,a,u,g)}function Wp(n,s,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=s.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return jp(n,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ha(s,v!==null?v.cachePool:null),v!==null?tp(s,v):Ou(),np(s);else return u=s.lanes=536870912,jp(n,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(ha(s,v.cachePool),tp(s,v),di(),s.memoizedState=null):(n!==null&&ha(s,null),Ou(),di());return ht(n,s,g,a),s.child}function Qs(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function jp(n,s,a,u,g){var v=Iu();return v=v===null?null:{parent:je._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&ha(s,null),Ou(),np(s),n!==null&&Ro(n,s,u,!0),s.childLanes=g,null}function Na(n,s){return s=Ia({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function em(n,s,a){return Ji(s,n.child,null,a),n=Na(s,s.pendingProps),n.flags|=2,Ht(s),s.memoizedState=null,n}function mS(n,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ce){if(u.mode==="hidden")return n=Na(s,u),s.lanes=536870912,Qs(null,n);if(Gu(s),(n=qe)?(n=dg(n,Wt),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:oi!==null?{id:mn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},a=Oh(n),a.return=s,s.child=a,ft=s,qe=null)):n=null,n===null)throw ri(s);return s.lanes=536870912,null}return Na(s,u)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if(Gu(s),g)if(s.flags&256)s.flags&=-257,s=em(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(tt||Ro(n,s,a,!1),g=(a&n.childLanes)!==0,tt||g){if(u=Oe,u!==null&&(S=Fd(u,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,Gi(n,S),xt(u,n,S),rc;Ha(),s=em(n,s,a)}else n=v.treeContext,qe=en(S.nextSibling),ft=s,Ce=!0,si=null,Wt=!1,n!==null&&Hh(s,n),s=Na(s,u),s.flags|=4096;return s}return n=bn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function xa(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function ac(n,s,a,u,g){return Bi(s),a=Vu(n,s,a,u,void 0,g),u=zu(),n!==null&&!tt?(Bu(n,s,g),In(n,s,g)):(Ce&&u&&Eu(s),s.flags|=1,ht(n,s,a,g),s.child)}function tm(n,s,a,u,g,v){return Bi(s),s.updateQueue=null,a=op(s,u,a,g),ip(n),u=zu(),n!==null&&!tt?(Bu(n,s,v),In(n,s,v)):(Ce&&u&&Eu(s),s.flags|=1,ht(n,s,a,v),s.child)}function nm(n,s,a,u,g){if(Bi(s),s.stateNode===null){var v=Ao,S=a.contextType;typeof S=="object"&&S!==null&&(v=dt(S)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=oc,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Uu(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?dt(S):Ao,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ic(s,a,S,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&oc.enqueueReplaceState(v,v.state,null),Fs(s,u,v,g),Bs(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){v=s.stateNode;var A=s.memoizedProps,N=Qi(a,A);v.props=N;var O=v.context,z=a.contextType;S=Ao,typeof z=="object"&&z!==null&&(S=dt(z));var $=a.getDerivedStateFromProps;z=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||O!==S)&&zp(s,v,u,S),li=!1;var q=s.memoizedState;v.state=q,Fs(s,u,v,g),Bs(),O=s.memoizedState,A||q!==O||li?(typeof $=="function"&&(ic(s,a,$,u),O=s.memoizedState),(N=li||Vp(s,a,N,u,q,O,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=S,u=N):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Pu(n,s),S=s.memoizedProps,z=Qi(a,S),v.props=z,$=s.pendingProps,q=v.context,O=a.contextType,N=Ao,typeof O=="object"&&O!==null&&(N=dt(O)),A=a.getDerivedStateFromProps,(O=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||q!==N)&&zp(s,v,u,N),li=!1,q=s.memoizedState,v.state=q,Fs(s,u,v,g),Bs();var H=s.memoizedState;S!==$||q!==H||li||n!==null&&n.dependencies!==null&&fa(n.dependencies)?(typeof A=="function"&&(ic(s,a,A,u),H=s.memoizedState),(z=li||Vp(s,a,z,u,q,H,N)||n!==null&&n.dependencies!==null&&fa(n.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,H,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,H,N)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),v.props=u,v.state=H,v.context=N,u=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),u=!1)}return v=u,xa(n,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&u?(s.child=Ji(s,n.child,null,g),s.child=Ji(s,null,a,g)):ht(n,s,a,g),s.memoizedState=v.state,n=s.child):n=In(n,s,g),n}function im(n,s,a,u){return Vi(),s.flags|=256,ht(n,s,a,u),s.child}var lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uc(n){return{baseLanes:n,cachePool:$h()}}function cc(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=zt),n}function om(n,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(Xe.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ce){if(g?fi(s):di(),(n=qe)?(n=dg(n,Wt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:oi!==null?{id:mn,overflow:gn}:null,retryLane:536870912,hydrationErrors:null},a=Oh(n),a.return=s,s.child=a,ft=s,qe=null)):n=null,n===null)throw ri(s);return $c(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(di(),g=s.mode,A=Ia({mode:"hidden",children:A},g),u=Hi(u,g,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=uc(a),u.childLanes=cc(n,S,a),s.memoizedState=lc,Qs(null,u)):(fi(s),fc(s,A))}var N=n.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(v)s.flags&256?(fi(s),s.flags&=-257,s=dc(n,s,a)):s.memoizedState!==null?(di(),s.child=n.child,s.flags|=128,s=null):(di(),A=u.fallback,g=s.mode,u=Ia({mode:"visible",children:u.children},g),A=Hi(A,g,a,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Ji(s,n.child,null,a),u=s.child,u.memoizedState=uc(a),u.childLanes=cc(n,S,a),s.memoizedState=lc,s=Qs(null,u));else if(fi(s),$c(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(o(419)),u.stack="",u.digest=S,Os({value:u,source:null,stack:null}),s=dc(n,s,a)}else if(tt||Ro(n,s,a,!1),S=(a&n.childLanes)!==0,tt||S){if(S=Oe,S!==null&&(u=Fd(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Gi(n,u),xt(S,n,u),rc;Yc(A)||Ha(),s=dc(n,s,a)}else Yc(A)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,qe=en(A.nextSibling),ft=s,Ce=!0,si=null,Wt=!1,n!==null&&Hh(s,n),s=fc(s,u.children),s.flags|=4096);return s}return g?(di(),A=u.fallback,g=s.mode,N=n.child,O=N.sibling,u=bn(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,O!==null?A=bn(O,A):(A=Hi(A,g,a,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Qs(null,u),u=s.child,A=n.child.memoizedState,A===null?A=uc(a):(g=A.cachePool,g!==null?(N=je._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=$h(),A={baseLanes:A.baseLanes|a,cachePool:g}),u.memoizedState=A,u.childLanes=cc(n,S,a),s.memoizedState=lc,Qs(n.child,u)):(fi(s),a=n.child,n=a.sibling,a=bn(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function fc(n,s){return s=Ia({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ia(n,s){return n=qt(22,n,null,s),n.lanes=0,n}function dc(n,s,a){return Ji(s,n.child,null,a),n=fc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sm(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),wu(n.return,s,a)}function hc(n,s,a,u,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function rm(n,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=Xe.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,G(Xe,S),ht(n,s,u,a),u=Ce?ks:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sm(n,a,s);else if(n.tag===19)sm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&_a(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),hc(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&_a(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}hc(s,!0,a,null,v,u);break;case"together":hc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function In(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),mi|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Ro(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,a=bn(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=bn(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function pc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&fa(n)))}function gS(n,s,a){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),ai(s,je,n.memoizedState.cache),Vi();break;case 27:case 5:Ui(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:ai(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Gu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(fi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?om(n,s,a):(fi(s),n=In(n,s,a),n!==null?n.sibling:null);fi(s);break;case 19:var g=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Ro(n,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return rm(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(Xe,Xe.current),u)break;return null;case 22:return s.lanes=0,Wp(n,s,a,s.pendingProps);case 24:ai(s,je,n.memoizedState.cache)}return In(n,s,a)}function am(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)tt=!0;else{if(!pc(n,a)&&(s.flags&128)===0)return tt=!1,gS(n,s,a);tt=(n.flags&131072)!==0}else tt=!1,Ce&&(s.flags&1048576)!==0&&Gh(s,ks,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Yi(s.elementType),s.type=n,typeof n=="function")_u(n)?(u=Qi(n,u),s.tag=1,s=nm(null,s,n,u,a)):(s.tag=0,s=ac(null,s,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===J){s.tag=11,s=Qp(null,s,n,u,a);break e}else if(g===K){s.tag=14,s=Xp(null,s,n,u,a);break e}}throw s=$e(n)||n,Error(o(306,s,""))}}return s;case 0:return ac(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Qi(u,s.pendingProps),nm(n,s,u,g,a);case 3:e:{if(vt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,Pu(n,s),Fs(s,u,null,a);var S=s.memoizedState;if(u=S.cache,ai(s,je,u),u!==v.cache&&Ru(s,[je],a,!0),Bs(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=im(n,s,u,a);break e}else if(u!==g){g=Qt(Error(o(424)),s),Os(g),s=im(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(qe=en(n.firstChild),ft=s,Ce=!0,si=null,Wt=!0,a=Wh(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vi(),u===g){s=In(n,s,a);break e}ht(n,s,u,a)}s=s.child}return s;case 26:return xa(n,s),n===null?(a=vg(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ce||(a=s.type,n=s.pendingProps,u=Ja(re.current).createElement(a),u[ct]=s,u[At]=n,pt(u,a,n),rt(u),s.stateNode=u):s.memoizedState=vg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ui(s),n===null&&Ce&&(u=s.stateNode=mg(s.type,s.pendingProps,re.current),ft=s,Wt=!0,g=qe,Ti(s.type)?(Jc=g,qe=en(u.firstChild)):qe=g),ht(n,s,s.pendingProps.children,a),xa(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ce&&((g=u=qe)&&(u=$S(u,s.type,s.pendingProps,Wt),u!==null?(s.stateNode=u,ft=s,qe=en(u.firstChild),Wt=!1,g=!0):g=!1),g||ri(s)),Ui(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,u=v.children,zc(g,v)?u=null:S!==null&&zc(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Vu(n,s,aS,null,null,a),cr._currentValue=g),xa(n,s),ht(n,s,u,a),s.child;case 6:return n===null&&Ce&&((n=a=qe)&&(a=JS(a,s.pendingProps,Wt),a!==null?(s.stateNode=a,ft=s,qe=null,n=!0):n=!1),n||ri(s)),null;case 13:return om(n,s,a);case 4:return vt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ji(s,null,u,a):ht(n,s,u,a),s.child;case 11:return Qp(n,s,s.type,s.pendingProps,a);case 7:return ht(n,s,s.pendingProps,a),s.child;case 8:return ht(n,s,s.pendingProps.children,a),s.child;case 12:return ht(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,ai(s,s.type,u.value),ht(n,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Bi(s),g=dt(g),u=u(g),s.flags|=1,ht(n,s,u,a),s.child;case 14:return Xp(n,s,s.type,s.pendingProps,a);case 15:return Zp(n,s,s.type,s.pendingProps,a);case 19:return rm(n,s,a);case 31:return mS(n,s,a);case 22:return Wp(n,s,a,s.pendingProps);case 24:return Bi(s),u=dt(je),n===null?(g=Iu(),g===null&&(g=Oe,v=Nu(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},Uu(s),ai(s,je,g)):((n.lanes&a)!==0&&(Pu(n,s),Fs(s,null,null,a),Bs()),g=n.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ai(s,je,u)):(u=v.cache,ai(s,je,u),u!==g.cache&&Ru(s,[je],a,!0))),ht(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Dn(n){n.flags|=4}function mc(n,s,a,u,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Pm())n.flags|=8192;else throw $i=ma,Du}else n.flags&=-16777217}function lm(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Cg(s))if(Pm())n.flags|=8192;else throw $i=ma,Du}function Da(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Vd():536870912,n.lanes|=s,Ho|=s)}function Xs(n,s){if(!Ce)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Ge(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function yS(n,s,a){var u=s.pendingProps;switch(Cu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(s),null;case 1:return Ge(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Rn(je),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(wo(s)?Dn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bu())),Ge(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(Dn(s),v!==null?(Ge(s),lm(s,v)):(Ge(s),mc(s,g,null,u,a))):v?v!==n.memoizedState?(Dn(s),Ge(s),lm(s,v)):(Ge(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Dn(s),Ge(s),mc(s,g,n,u,a)),null;case 27:if(ao(s),a=re.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Dn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Ge(s),null}n=ee.current,wo(s)?Vh(s):(n=mg(g,u,a),s.stateNode=n,Dn(s))}return Ge(s),null;case 5:if(ao(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Dn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Ge(s),null}if(v=ee.current,wo(s))Vh(s);else{var S=Ja(re.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[ct]=s,v[At]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(pt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Dn(s)}}return Ge(s),mc(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Dn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=re.current,wo(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,g=ft,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[ct]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||og(n.nodeValue,a)),n||ri(s,!0)}else n=Ja(n).createTextNode(u),n[ct]=s,s.stateNode=n}return Ge(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=wo(s),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[ct]=s}else Vi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ge(s),n=!1}else a=bu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Ht(s),s):(Ht(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Ge(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=wo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[ct]=s}else Vi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ge(s),g=!1}else g=bu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Ht(s),s):(Ht(s),null)}return Ht(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Da(s,s.updateQueue),Ge(s),null);case 4:return Ne(),n===null&&Oc(s.stateNode.containerInfo),Ge(s),null;case 10:return Rn(s.type),Ge(s),null;case 19:if(Y(Xe),u=s.memoizedState,u===null)return Ge(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)Xs(u,!1);else{if(Ke!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=_a(n),v!==null){for(s.flags|=128,Xs(u,!1),n=v.updateQueue,s.updateQueue=n,Da(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)kh(a,n),a=a.sibling;return G(Xe,Xe.current&1|2),Ce&&Mn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&St()>Oa&&(s.flags|=128,g=!0,Xs(u,!1),s.lanes=4194304)}else{if(!g)if(n=_a(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Da(s,n),Xs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Ce)return Ge(s),null}else 2*St()-u.renderingStartTime>Oa&&a!==536870912&&(s.flags|=128,g=!0,Xs(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(n=u.last,n!==null?n.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=St(),n.sibling=null,a=Xe.current,G(Xe,g?a&1|2:a&1),Ce&&Mn(s,u.treeForkCount),n):(Ge(s),null);case 22:case 23:return Ht(s),qu(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(Ge(s),s.subtreeFlags&6&&(s.flags|=8192)):Ge(s),a=s.updateQueue,a!==null&&Da(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&Y(Fi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Rn(je),Ge(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function vS(n,s){switch(Cu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Rn(je),Ne(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ao(s),null;case 31:if(s.memoizedState!==null){if(Ht(s),s.alternate===null)throw Error(o(340));Vi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ht(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Vi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Y(Xe),null;case 4:return Ne(),null;case 10:return Rn(s.type),null;case 22:case 23:return Ht(s),qu(),n!==null&&Y(Fi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Rn(je),null;case 25:return null;default:return null}}function um(n,s){switch(Cu(s),s.tag){case 3:Rn(je),Ne();break;case 26:case 27:case 5:ao(s);break;case 4:Ne();break;case 31:s.memoizedState!==null&&Ht(s);break;case 13:Ht(s);break;case 19:Y(Xe);break;case 10:Rn(s.type);break;case 22:case 23:Ht(s),qu(),n!==null&&Y(Fi);break;case 24:Rn(je)}}function Zs(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,S=a.inst;u=v(),S.destroy=u}a=a.next}while(a!==g)}}catch(A){Ue(s,s.return,A)}}function hi(n,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var N=a,O=A;try{O()}catch(z){Ue(g,N,z)}}}u=u.next}while(u!==v)}}catch(z){Ue(s,s.return,z)}}function cm(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{ep(s,a)}catch(u){Ue(n,n.return,u)}}}function fm(n,s,a){a.props=Qi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Ue(n,s,u)}}function Ws(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Ue(n,s,g)}}function yn(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ue(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ue(n,s,g)}else a.current=null}function dm(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ue(n,n.return,g)}}function gc(n,s,a){try{var u=n.stateNode;HS(u,n.type,a,s),u[At]=s}catch(g){Ue(n,n.return,g)}}function hm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ti(n.type)||n.tag===4}function yc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ti(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Cn));else if(u!==4&&(u===27&&Ti(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(vc(n,s,a),n=n.sibling;n!==null;)vc(n,s,a),n=n.sibling}function Ua(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&Ti(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ua(n,s,a),n=n.sibling;n!==null;)Ua(n,s,a),n=n.sibling}function pm(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);pt(s,u,a),s[ct]=n,s[At]=a}catch(v){Ue(n,n.return,v)}}var Un=!1,nt=!1,_c=!1,mm=typeof WeakSet=="function"?WeakSet:Set,at=null;function _S(n,s){if(n=n.containerInfo,Hc=el,n=wh(n),du(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,N=-1,O=0,z=0,$=n,q=null;t:for(;;){for(var H;$!==a||g!==0&&$.nodeType!==3||(A=S+g),$!==v||u!==0&&$.nodeType!==3||(N=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===n)break t;if(q===a&&++O===g&&(A=S),q===v&&++z===u&&(N=S),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vc={focusedElem:n,selectionRange:a},el=!1,at=s;at!==null;)if(s=at,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,at=n;else for(;at!==null;){switch(s=at,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ie=Qi(a.type,g);n=u.getSnapshotBeforeUpdate(ie,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(ce){Ue(a,a.return,ce)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Fc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Fc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,at=n;break}at=s.return}}function gm(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ln(n,a),u&4&&Zs(5,a);break;case 1:if(Ln(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){Ue(a,a.return,S)}else{var g=Qi(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Ue(a,a.return,S)}}u&64&&cm(a),u&512&&Ws(a,a.return);break;case 3:if(Ln(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ep(n,s)}catch(S){Ue(a,a.return,S)}}break;case 27:s===null&&u&4&&pm(a);case 26:case 5:Ln(n,a),s===null&&u&4&&dm(a),u&512&&Ws(a,a.return);break;case 12:Ln(n,a);break;case 31:Ln(n,a),u&4&&_m(n,a);break;case 13:Ln(n,a),u&4&&Tm(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=RS.bind(null,a),KS(n,a))));break;case 22:if(u=a.memoizedState!==null||Un,!u){s=s!==null&&s.memoizedState!==null||nt,g=Un;var v=nt;Un=u,(nt=s)&&!v?kn(n,a,(a.subtreeFlags&8772)!==0):Ln(n,a),Un=g,nt=v}break;case 30:break;default:Ln(n,a)}}function ym(n){var s=n.alternate;s!==null&&(n.alternate=null,ym(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ql(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Be=null,Mt=!1;function Pn(n,s,a){for(a=a.child;a!==null;)vm(n,s,a),a=a.sibling}function vm(n,s,a){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Es,a)}catch{}switch(a.tag){case 26:nt||yn(a,s),Pn(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nt||yn(a,s);var u=Be,g=Mt;Ti(a.type)&&(Be=a.stateNode,Mt=!1),Pn(n,s,a),ar(a.stateNode),Be=u,Mt=g;break;case 5:nt||yn(a,s);case 6:if(u=Be,g=Mt,Be=null,Pn(n,s,a),Be=u,Mt=g,Be!==null)if(Mt)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(a.stateNode)}catch(v){Ue(a,s,v)}else try{Be.removeChild(a.stateNode)}catch(v){Ue(a,s,v)}break;case 18:Be!==null&&(Mt?(n=Be,cg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ko(n)):cg(Be,a.stateNode));break;case 4:u=Be,g=Mt,Be=a.stateNode.containerInfo,Mt=!0,Pn(n,s,a),Be=u,Mt=g;break;case 0:case 11:case 14:case 15:hi(2,a,s),nt||hi(4,a,s),Pn(n,s,a);break;case 1:nt||(yn(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&fm(a,s,u)),Pn(n,s,a);break;case 21:Pn(n,s,a);break;case 22:nt=(u=nt)||a.memoizedState!==null,Pn(n,s,a),nt=u;break;default:Pn(n,s,a)}}function _m(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ko(n)}catch(a){Ue(s,s.return,a)}}}function Tm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ko(n)}catch(a){Ue(s,s.return,a)}}function TS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new mm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new mm),s;default:throw Error(o(435,n.tag))}}function Pa(n,s){var a=TS(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=NS.bind(null,n,u);u.then(g,g)}})}function wt(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Ti(A.type)){Be=A.stateNode,Mt=!1;break e}break;case 5:Be=A.stateNode,Mt=!1;break e;case 3:case 4:Be=A.stateNode.containerInfo,Mt=!0;break e}A=A.return}if(Be===null)throw Error(o(160));vm(v,S,g),Be=null,Mt=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Sm(s,n),s=s.sibling}var an=null;function Sm(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wt(s,n),Rt(n),u&4&&(hi(3,n,n.return),Zs(3,n),hi(5,n,n.return));break;case 1:wt(s,n),Rt(n),u&512&&(nt||a===null||yn(a,a.return)),u&64&&Un&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=an;if(wt(s,n),Rt(n),u&512&&(nt||a===null||yn(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[bs]||v[ct]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),pt(v,u,a),v[ct]=n,rt(v),u=v;break e;case"link":var S=Sg("link","href",g).get(u+(a.href||""));if(S){for(var A=0;A<S.length;A++)if(v=S[A],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(A,1);break t}}v=g.createElement(u),pt(v,u,a),g.head.appendChild(v);break;case"meta":if(S=Sg("meta","content",g).get(u+(a.content||""))){for(A=0;A<S.length;A++)if(v=S[A],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(A,1);break t}}v=g.createElement(u),pt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[ct]=n,rt(v),u=v}n.stateNode=u}else Eg(g,n.type,n.stateNode);else n.stateNode=Tg(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?Eg(g,n.type,n.stateNode):Tg(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&gc(n,n.memoizedProps,a.memoizedProps)}break;case 27:wt(s,n),Rt(n),u&512&&(nt||a===null||yn(a,a.return)),a!==null&&u&4&&gc(n,n.memoizedProps,a.memoizedProps);break;case 5:if(wt(s,n),Rt(n),u&512&&(nt||a===null||yn(a,a.return)),n.flags&32){g=n.stateNode;try{yo(g,"")}catch(ie){Ue(n,n.return,ie)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,gc(n,g,a!==null?a.memoizedProps:g)),u&1024&&(_c=!0);break;case 6:if(wt(s,n),Rt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ie){Ue(n,n.return,ie)}}break;case 3:if(Xa=null,g=an,an=Ka(s.containerInfo),wt(s,n),an=g,Rt(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ko(s.containerInfo)}catch(ie){Ue(n,n.return,ie)}_c&&(_c=!1,Em(n));break;case 4:u=an,an=Ka(n.stateNode.containerInfo),wt(s,n),Rt(n),an=u;break;case 12:wt(s,n),Rt(n);break;case 31:wt(s,n),Rt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pa(n,u)));break;case 13:wt(s,n),Rt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ka=St()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pa(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,O=Un,z=nt;if(Un=O||g,nt=z||N,wt(s,n),nt=z,Un=O,Rt(n),u&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||N||Un||nt||Xi(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(v=N.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=N.stateNode;var $=N.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ie){Ue(N,N.return,ie)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ie){Ue(N,N.return,ie)}}}else if(s.tag===18){if(a===null){N=s;try{var H=N.stateNode;g?fg(H,!0):fg(N.stateNode,!1)}catch(ie){Ue(N,N.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Pa(n,a))));break;case 19:wt(s,n),Rt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pa(n,u)));break;case 30:break;case 21:break;default:wt(s,n),Rt(n)}}function Rt(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(hm(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=yc(n);Ua(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(yo(S,""),a.flags&=-33);var A=yc(n);Ua(n,A,S);break;case 3:case 4:var N=a.stateNode.containerInfo,O=yc(n);vc(n,O,N);break;default:throw Error(o(161))}}catch(z){Ue(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Em(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Em(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ln(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gm(n,s.alternate,s),s=s.sibling}function Xi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:hi(4,s,s.return),Xi(s);break;case 1:yn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&fm(s,s.return,a),Xi(s);break;case 27:ar(s.stateNode);case 26:case 5:yn(s,s.return),Xi(s);break;case 22:s.memoizedState===null&&Xi(s);break;case 30:Xi(s);break;default:Xi(s)}n=n.sibling}}function kn(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:kn(g,v,a),Zs(4,v);break;case 1:if(kn(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Ue(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)jh(N[g],A)}catch(O){Ue(u,u.return,O)}}a&&S&64&&cm(v),Ws(v,v.return);break;case 27:pm(v);case 26:case 5:kn(g,v,a),a&&u===null&&S&4&&dm(v),Ws(v,v.return);break;case 12:kn(g,v,a);break;case 31:kn(g,v,a),a&&S&4&&_m(g,v);break;case 13:kn(g,v,a),a&&S&4&&Tm(g,v);break;case 22:v.memoizedState===null&&kn(g,v,a),Ws(v,v.return);break;case 30:break;default:kn(g,v,a)}s=s.sibling}}function Tc(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&qs(a))}function Sc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&qs(n))}function ln(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cm(n,s,a,u),s=s.sibling}function Cm(n,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ln(n,s,a,u),g&2048&&Zs(9,s);break;case 1:ln(n,s,a,u);break;case 3:ln(n,s,a,u),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&qs(n)));break;case 12:if(g&2048){ln(n,s,a,u),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,A=v.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Ue(s,s.return,N)}}else ln(n,s,a,u);break;case 31:ln(n,s,a,u);break;case 13:ln(n,s,a,u);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?ln(n,s,a,u):js(n,s):v._visibility&2?ln(n,s,a,u):(v._visibility|=2,Oo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Tc(S,s);break;case 24:ln(n,s,a,u),g&2048&&Sc(s.alternate,s);break;default:ln(n,s,a,u)}}function Oo(n,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,A=a,N=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Oo(v,S,A,N,g),Zs(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Oo(v,S,A,N,g):js(v,S):(z._visibility|=2,Oo(v,S,A,N,g)),g&&O&2048&&Tc(S.alternate,S);break;case 24:Oo(v,S,A,N,g),g&&O&2048&&Sc(S.alternate,S);break;default:Oo(v,S,A,N,g)}s=s.sibling}}function js(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,g=u.flags;switch(u.tag){case 22:js(a,u),g&2048&&Tc(u.alternate,u);break;case 24:js(a,u),g&2048&&Sc(u.alternate,u);break;default:js(a,u)}s=s.sibling}}var er=8192;function qo(n,s,a){if(n.subtreeFlags&er)for(n=n.child;n!==null;)Am(n,s,a),n=n.sibling}function Am(n,s,a){switch(n.tag){case 26:qo(n,s,a),n.flags&er&&n.memoizedState!==null&&rE(a,an,n.memoizedState,n.memoizedProps);break;case 5:qo(n,s,a);break;case 3:case 4:var u=an;an=Ka(n.stateNode.containerInfo),qo(n,s,a),an=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=er,er=16777216,qo(n,s,a),er=u):qo(n,s,a));break;default:qo(n,s,a)}}function bm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function tr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];at=u,wm(u,n)}bm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mm(n),n=n.sibling}function Mm(n){switch(n.tag){case 0:case 11:case 15:tr(n),n.flags&2048&&hi(9,n,n.return);break;case 3:tr(n);break;case 12:tr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,La(n)):tr(n);break;default:tr(n)}}function La(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];at=u,wm(u,n)}bm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:hi(8,s,s.return),La(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,La(s));break;default:La(s)}n=n.sibling}}function wm(n,s){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:hi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:qs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,at=u;else e:for(a=n;at!==null;){u=at;var g=u.sibling,v=u.return;if(ym(u),u===a){at=null;break e}if(g!==null){g.return=v,at=g;break e}at=v}}}var SS={getCacheForType:function(n){var s=dt(je),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return dt(je).controller.signal}},ES=typeof WeakMap=="function"?WeakMap:Map,xe=0,Oe=null,ye=null,Te=0,De=0,Vt=null,pi=!1,Go=!1,Ec=!1,On=0,Ke=0,mi=0,Zi=0,Cc=0,zt=0,Ho=0,nr=null,Nt=null,Ac=!1,ka=0,Rm=0,Oa=1/0,qa=null,gi=null,ot=0,yi=null,Vo=null,qn=0,bc=0,Mc=null,Nm=null,ir=0,wc=null;function Bt(){return(xe&2)!==0&&Te!==0?Te&-Te:V.T!==null?Uc():Yd()}function xm(){if(zt===0)if((Te&536870912)===0||Ce){var n=$r;$r<<=1,($r&3932160)===0&&($r=262144),zt=n}else zt=536870912;return n=Gt.current,n!==null&&(n.flags|=32),zt}function xt(n,s,a){(n===Oe&&(De===2||De===9)||n.cancelPendingCommit!==null)&&(zo(n,0),vi(n,Te,zt,!1)),As(n,a),((xe&2)===0||n!==Oe)&&(n===Oe&&((xe&2)===0&&(Zi|=a),Ke===4&&vi(n,Te,zt,!1)),vn(n))}function Im(n,s,a){if((xe&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Cs(n,s),g=u?bS(n,s):Nc(n,s,!0),v=u;do{if(g===0){Go&&!u&&vi(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!CS(a)){g=Nc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=n;g=nr;var N=A.current.memoizedState.isDehydrated;if(N&&(zo(A,S).flags|=256),S=Nc(A,S,!1),S!==2){if(Ec&&!N){A.errorRecoveryDisabledLanes|=v,Zi|=v,g=4;break e}v=Nt,Nt=g,v!==null&&(Nt===null?Nt=v:Nt.push.apply(Nt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){zo(n,0),vi(n,s,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:vi(u,s,zt,!pi);break e;case 2:Nt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=ka+300-St(),10<g)){if(vi(u,s,zt,!pi),Kr(u,0,!0)!==0)break e;qn=s,u.timeoutHandle=lg(Dm.bind(null,u,a,Nt,qa,Ac,s,zt,Zi,Ho,pi,v,"Throttled",-0,0),g);break e}Dm(u,a,Nt,qa,Ac,s,zt,Zi,Ho,pi,v,null,-0,0)}}break}while(!0);vn(n)}function Dm(n,s,a,u,g,v,S,A,N,O,z,$,q,H){if(n.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cn},Am(s,v,$);var ie=(v&62914560)===v?ka-St():(v&4194048)===v?Rm-St():0;if(ie=aE($,ie),ie!==null){qn=v,n.cancelPendingCommit=ie(Hm.bind(null,n,s,v,a,u,g,S,A,N,z,$,null,q,H)),vi(n,v,S,!O);return}}Hm(n,s,v,a,u,g,S,A,N)}function CS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!Ot(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vi(n,s,a,u){s&=~Cc,s&=~Zi,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var g=s;0<g;){var v=31-kt(g),S=1<<v;u[v]=-1,g&=~S}a!==0&&zd(n,a,s)}function Ga(){return(xe&6)===0?(or(0),!1):!0}function Rc(){if(ye!==null){if(De===0)var n=ye.return;else n=ye,wn=zi=null,Fu(n),Do=null,Hs=0,n=ye;for(;n!==null;)um(n.alternate,n),n=n.return;ye=null}}function zo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,BS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),qn=0,Rc(),Oe=n,ye=a=bn(n.current,null),Te=s,De=0,Vt=null,pi=!1,Go=Cs(n,s),Ec=!1,Ho=zt=Cc=Zi=mi=Ke=0,Nt=nr=null,Ac=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var g=31-kt(u),v=1<<g;s|=n[g],u&=~v}return On=s,ra(),a}function Um(n,s){pe=null,V.H=Ks,s===Io||s===pa?(s=Qh(),De=3):s===Du?(s=Qh(),De=4):De=s===rc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vt=s,ye===null&&(Ke=1,Ra(n,Qt(s,n.current)))}function Pm(){var n=Gt.current;return n===null?!0:(Te&4194048)===Te?jt===null:(Te&62914560)===Te||(Te&536870912)!==0?n===jt:!1}function Lm(){var n=V.H;return V.H=Ks,n===null?Ks:n}function km(){var n=V.A;return V.A=SS,n}function Ha(){Ke=4,pi||(Te&4194048)!==Te&&Gt.current!==null||(Go=!0),(mi&134217727)===0&&(Zi&134217727)===0||Oe===null||vi(Oe,Te,zt,!1)}function Nc(n,s,a){var u=xe;xe|=2;var g=Lm(),v=km();(Oe!==n||Te!==s)&&(qa=null,zo(n,s)),s=!1;var S=Ke;e:do try{if(De!==0&&ye!==null){var A=ye,N=Vt;switch(De){case 8:Rc(),S=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(s=!0);var O=De;if(De=0,Vt=null,Bo(n,A,N,O),a&&Go){S=0;break e}break;default:O=De,De=0,Vt=null,Bo(n,A,N,O)}}AS(),S=Ke;break}catch(z){Um(n,z)}while(!0);return s&&n.shellSuspendCounter++,wn=zi=null,xe=u,V.H=g,V.A=v,ye===null&&(Oe=null,Te=0,ra()),S}function AS(){for(;ye!==null;)Om(ye)}function bS(n,s){var a=xe;xe|=2;var u=Lm(),g=km();Oe!==n||Te!==s?(qa=null,Oa=St()+500,zo(n,s)):Go=Cs(n,s);e:do try{if(De!==0&&ye!==null){s=ye;var v=Vt;t:switch(De){case 1:De=0,Vt=null,Bo(n,s,v,1);break;case 2:case 9:if(Jh(v)){De=0,Vt=null,qm(s);break}s=function(){De!==2&&De!==9||Oe!==n||(De=7),vn(n)},v.then(s,s);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:Jh(v)?(De=0,Vt=null,qm(s)):(De=0,Vt=null,Bo(n,s,v,7));break;case 5:var S=null;switch(ye.tag){case 26:S=ye.memoizedState;case 5:case 27:var A=ye;if(S?Cg(S):A.stateNode.complete){De=0,Vt=null;var N=A.sibling;if(N!==null)ye=N;else{var O=A.return;O!==null?(ye=O,Va(O)):ye=null}break t}}De=0,Vt=null,Bo(n,s,v,5);break;case 6:De=0,Vt=null,Bo(n,s,v,6);break;case 8:Rc(),Ke=6;break e;default:throw Error(o(462))}}MS();break}catch(z){Um(n,z)}while(!0);return wn=zi=null,V.H=u,V.A=g,xe=a,ye!==null?0:(Oe=null,Te=0,ra(),Ke)}function MS(){for(;ye!==null&&!Fl();)Om(ye)}function Om(n){var s=am(n.alternate,n,On);n.memoizedProps=n.pendingProps,s===null?Va(n):ye=s}function qm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=tm(a,s,s.pendingProps,s.type,void 0,Te);break;case 11:s=tm(a,s,s.pendingProps,s.type.render,s.ref,Te);break;case 5:Fu(s);default:um(a,s),s=ye=kh(s,On),s=am(a,s,On)}n.memoizedProps=n.pendingProps,s===null?Va(n):ye=s}function Bo(n,s,a,u){wn=zi=null,Fu(s),Do=null,Hs=0;var g=s.return;try{if(pS(n,g,s,a,Te)){Ke=1,Ra(n,Qt(a,n.current)),ye=null;return}}catch(v){if(g!==null)throw ye=g,v;Ke=1,Ra(n,Qt(a,n.current)),ye=null;return}s.flags&32768?(Ce||u===1?n=!0:Go||(Te&536870912)!==0?n=!1:(pi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Gm(s,n)):Va(s)}function Va(n){var s=n;do{if((s.flags&32768)!==0){Gm(s,pi);return}n=s.return;var a=yS(s.alternate,s,On);if(a!==null){ye=a;return}if(s=s.sibling,s!==null){ye=s;return}ye=s=n}while(s!==null);Ke===0&&(Ke=5)}function Gm(n,s){do{var a=vS(n.alternate,n);if(a!==null){a.flags&=32767,ye=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ye=n;return}ye=n=a}while(n!==null);Ke=6,ye=null}function Hm(n,s,a,u,g,v,S,A,N){n.cancelPendingCommit=null;do za();while(ot!==0);if((xe&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=yu,sT(n,a,v,S,A,N),n===Oe&&(ye=Oe=null,Te=0),Vo=s,yi=n,qn=a,bc=v,Mc=g,Nm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,xS(ei,function(){return Ym(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,g=Z.p,Z.p=2,S=xe,xe|=4;try{_S(n,s,a)}finally{xe=S,Z.p=g,V.T=u}}ot=1,Vm(),zm(),Bm()}}function Vm(){if(ot===1){ot=0;var n=yi,s=Vo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var u=Z.p;Z.p=2;var g=xe;xe|=4;try{Sm(s,n);var v=Vc,S=wh(n.containerInfo),A=v.focusedElem,N=v.selectionRange;if(S!==A&&A&&A.ownerDocument&&Mh(A.ownerDocument.documentElement,A)){if(N!==null&&du(A)){var O=N.start,z=N.end;if(z===void 0&&(z=O),"selectionStart"in A)A.selectionStart=O,A.selectionEnd=Math.min(z,A.value.length);else{var $=A.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),ie=A.textContent.length,ce=Math.min(N.start,ie),ke=N.end===void 0?ce:Math.min(N.end,ie);!H.extend&&ce>ke&&(S=ke,ke=ce,ce=S);var L=bh(A,ce),I=bh(A,ke);if(L&&I&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==I.node||H.focusOffset!==I.offset)){var k=$.createRange();k.setStart(L.node,L.offset),H.removeAllRanges(),ce>ke?(H.addRange(k),H.extend(I.node,I.offset)):(k.setEnd(I.node,I.offset),H.addRange(k))}}}}for($=[],H=A;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<$.length;A++){var F=$[A];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}el=!!Hc,Vc=Hc=null}finally{xe=g,Z.p=u,V.T=a}}n.current=s,ot=2}}function zm(){if(ot===2){ot=0;var n=yi,s=Vo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var u=Z.p;Z.p=2;var g=xe;xe|=4;try{gm(n,s.alternate,s)}finally{xe=g,Z.p=u,V.T=a}}ot=3}}function Bm(){if(ot===4||ot===3){ot=0,qd();var n=yi,s=Vo,a=qn,u=Nm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ot=5:(ot=0,Vo=yi=null,Fm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(gi=null),Jl(a),s=s.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Es,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=V.T,g=Z.p,Z.p=2,V.T=null;try{for(var v=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];v(A.value,{componentStack:A.stack})}}finally{V.T=s,Z.p=g}}(qn&3)!==0&&za(),vn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===wc?ir++:(ir=0,wc=n):ir=0,or(0)}}function Fm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,qs(s)))}function za(){return Vm(),zm(),Bm(),Ym()}function Ym(){if(ot!==5)return!1;var n=yi,s=bc;bc=0;var a=Jl(qn),u=V.T,g=Z.p;try{Z.p=32>a?32:a,V.T=null,a=Mc,Mc=null;var v=yi,S=qn;if(ot=0,Vo=yi=null,qn=0,(xe&6)!==0)throw Error(o(331));var A=xe;if(xe|=4,Mm(v.current),Cm(v,v.current,S,a),xe=A,or(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Es,v)}catch{}return!0}finally{Z.p=g,V.T=u,Fm(n,s)}}function $m(n,s,a){s=Qt(a,s),s=sc(n.stateNode,s,2),n=ci(n,s,2),n!==null&&(As(n,2),vn(n))}function Ue(n,s,a){if(n.tag===3)$m(n,n,a);else for(;s!==null;){if(s.tag===3){$m(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gi===null||!gi.has(u))){n=Qt(a,n),a=Jp(2),u=ci(s,a,2),u!==null&&(Kp(a,u,s,n),As(u,2),vn(u));break}}s=s.return}}function xc(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new ES;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Ec=!0,g.add(a),n=wS.bind(null,n,s,a),s.then(n,n))}function wS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Oe===n&&(Te&a)===a&&(Ke===4||Ke===3&&(Te&62914560)===Te&&300>St()-ka?(xe&2)===0&&zo(n,0):Cc|=a,Ho===Te&&(Ho=0)),vn(n)}function Jm(n,s){s===0&&(s=Vd()),n=Gi(n,s),n!==null&&(As(n,s),vn(n))}function RS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Jm(n,a)}function NS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Jm(n,a)}function xS(n,s){return Ts(n,s)}var Ba=null,Fo=null,Ic=!1,Fa=!1,Dc=!1,_i=0;function vn(n){n!==Fo&&n.next===null&&(Fo===null?Ba=Fo=n:Fo=Fo.next=n),Fa=!0,Ic||(Ic=!0,DS())}function or(n,s){if(!Dc&&Fa){Dc=!0;do for(var a=!1,u=Ba;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-kt(42|n)+1)-1,v&=g&~(S&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Zm(u,v))}else v=Te,v=Kr(u,u===Oe?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Cs(u,v)||(a=!0,Zm(u,v));u=u.next}while(a);Dc=!1}}function IS(){Km()}function Km(){Fa=Ic=!1;var n=0;_i!==0&&zS()&&(n=_i);for(var s=St(),a=null,u=Ba;u!==null;){var g=u.next,v=Qm(u,s);v===0?(u.next=null,a===null?Ba=g:a.next=g,g===null&&(Fo=a)):(a=u,(n!==0||(v&3)!==0)&&(Fa=!0)),u=g}ot!==0&&ot!==5||or(n),_i!==0&&(_i=0)}function Qm(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-kt(v),A=1<<S,N=g[S];N===-1?((A&a)===0||(A&u)!==0)&&(g[S]=oT(A,s)):N<=s&&(n.expiredLanes|=A),v&=~A}if(s=Oe,a=Te,a=Kr(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(De===2||De===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ss(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Cs(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Ss(u),Jl(a)){case 2:case 8:a=jn;break;case 32:a=ei;break;case 268435456:a=Hd;break;default:a=ei}return u=Xm.bind(null,n),a=Ts(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Ss(u),n.callbackPriority=2,n.callbackNode=null,2}function Xm(n,s){if(ot!==0&&ot!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(za()&&n.callbackNode!==a)return null;var u=Te;return u=Kr(n,n===Oe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Im(n,u,s),Qm(n,St()),n.callbackNode!=null&&n.callbackNode===a?Xm.bind(null,n):null)}function Zm(n,s){if(za())return null;Im(n,s,!0)}function DS(){FS(function(){(xe&6)!==0?Ts(ze,IS):Km()})}function Uc(){if(_i===0){var n=No;n===0&&(n=Yr,Yr<<=1,(Yr&261888)===0&&(Yr=256)),_i=n}return _i}function Wm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wr(""+n)}function jm(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function US(n,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=Wm((g[At]||null).action),S=u.submitter;S&&(s=(s=S[At]||null)?Wm(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var A=new na("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_i!==0){var N=S?jm(g,S):new FormData(g);ju(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(A.preventDefault(),N=S?jm(g,S):new FormData(g),ju(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var Pc=0;Pc<gu.length;Pc++){var Lc=gu[Pc],PS=Lc.toLowerCase(),LS=Lc[0].toUpperCase()+Lc.slice(1);rn(PS,"on"+LS)}rn(xh,"onAnimationEnd"),rn(Ih,"onAnimationIteration"),rn(Dh,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(ZT,"onTransitionRun"),rn(WT,"onTransitionStart"),rn(jT,"onTransitionCancel"),rn(Uh,"onTransitionEnd"),mo("onMouseEnter",["mouseout","mouseover"]),mo("onMouseLeave",["mouseout","mouseover"]),mo("onPointerEnter",["pointerout","pointerover"]),mo("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sr));function eg(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],N=A.instance,O=A.currentTarget;if(A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){sa(z)}g.currentTarget=null,v=N}else for(S=0;S<u.length;S++){if(A=u[S],N=A.instance,O=A.currentTarget,A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){sa(z)}g.currentTarget=null,v=N}}}}function ve(n,s){var a=s[Kl];a===void 0&&(a=s[Kl]=new Set);var u=n+"__bubble";a.has(u)||(tg(s,n,2,!1),a.add(u))}function kc(n,s,a){var u=0;s&&(u|=4),tg(a,n,u,s)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Oc(n){if(!n[Ya]){n[Ya]=!0,Kd.forEach(function(a){a!=="selectionchange"&&(kS.has(a)||kc(a,!1,n),kc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ya]||(s[Ya]=!0,kc("selectionchange",!1,s))}}function tg(n,s,a,u){switch(xg(s)){case 2:var g=cE;break;case 8:g=fE;break;default:g=Wc}a=g.bind(null,s,a,n),g=void 0,!iu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function qc(n,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=fo(A),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=v=S;continue e}A=A.parentNode}}u=u.return}rh(function(){var O=v,z=tu(a),$=[];e:{var q=Ph.get(n);if(q!==void 0){var H=na,ie=n;switch(n){case"keypress":if(ea(a)===0)break e;case"keydown":case"keyup":H=NT;break;case"focusin":ie="focus",H=au;break;case"focusout":ie="blur",H=au;break;case"beforeblur":case"afterblur":H=au;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=yT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=DT;break;case xh:case Ih:case Dh:H=TT;break;case Uh:H=PT;break;case"scroll":case"scrollend":H=mT;break;case"wheel":H=kT;break;case"copy":case"cut":case"paste":H=ET;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=fh;break;case"toggle":case"beforetoggle":H=qT}var ce=(s&4)!==0,ke=!ce&&(n==="scroll"||n==="scrollend"),L=ce?q!==null?q+"Capture":null:q;ce=[];for(var I=O,k;I!==null;){var F=I;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||L===null||(F=ws(I,L),F!=null&&ce.push(rr(I,F,k))),ke)break;I=I.return}0<ce.length&&(q=new H(q,ie,null,a,z),$.push({event:q,listeners:ce}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==eu&&(ie=a.relatedTarget||a.fromElement)&&(fo(ie)||ie[co]))break e;if((H||q)&&(q=z.window===z?z:(q=z.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ie=a.relatedTarget||a.toElement,H=O,ie=ie?fo(ie):null,ie!==null&&(ke=l(ie),ce=ie.tag,ie!==ke||ce!==5&&ce!==27&&ce!==6)&&(ie=null)):(H=null,ie=O),H!==ie)){if(ce=uh,F="onMouseLeave",L="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ce=fh,F="onPointerLeave",L="onPointerEnter",I="pointer"),ke=H==null?q:Ms(H),k=ie==null?q:Ms(ie),q=new ce(F,I+"leave",H,a,z),q.target=ke,q.relatedTarget=k,F=null,fo(z)===O&&(ce=new ce(L,I+"enter",ie,a,z),ce.target=k,ce.relatedTarget=ke,F=ce),ke=F,H&&ie)t:{for(ce=OS,L=H,I=ie,k=0,F=L;F;F=ce(F))k++;F=0;for(var le=I;le;le=ce(le))F++;for(;0<k-F;)L=ce(L),k--;for(;0<F-k;)I=ce(I),F--;for(;k--;){if(L===I||I!==null&&L===I.alternate){ce=L;break t}L=ce(L),I=ce(I)}ce=null}else ce=null;H!==null&&ng($,q,H,ce,!1),ie!==null&&ke!==null&&ng($,ke,ie,ce,!0)}}e:{if(q=O?Ms(O):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var Me=_h;else if(yh(q))if(Th)Me=KT;else{Me=$T;var oe=YT}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&jl(O.elementType)&&(Me=_h):Me=JT;if(Me&&(Me=Me(n,O))){vh($,Me,a,z);break e}oe&&oe(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&Wl(q,"number",q.value)}switch(oe=O?Ms(O):window,n){case"focusin":(yh(oe)||oe.contentEditable==="true")&&(So=oe,hu=O,Ls=null);break;case"focusout":Ls=hu=So=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Rh($,a,z);break;case"selectionchange":if(XT)break;case"keydown":case"keyup":Rh($,a,z)}var ge;if(uu)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else To?mh(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(dh&&a.locale!=="ko"&&(To||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&To&&(ge=ah()):(ii=z,ou="value"in ii?ii.value:ii.textContent,To=!0)),oe=$a(O,Se),0<oe.length&&(Se=new ch(Se,n,null,a,z),$.push({event:Se,listeners:oe}),ge?Se.data=ge:(ge=gh(a),ge!==null&&(Se.data=ge)))),(ge=HT?VT(n,a):zT(n,a))&&(Se=$a(O,"onBeforeInput"),0<Se.length&&(oe=new ch("onBeforeInput","beforeinput",null,a,z),$.push({event:oe,listeners:Se}),oe.data=ge)),US($,n,O,a,z)}eg($,s)})}function rr(n,s,a){return{instance:n,listener:s,currentTarget:a}}function $a(n,s){for(var a=s+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ws(n,a),g!=null&&u.unshift(rr(n,g,v)),g=ws(n,s),g!=null&&u.push(rr(n,g,v))),n.tag===3)return u;n=n.return}return[]}function OS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ng(n,s,a,u,g){for(var v=s._reactName,S=[];a!==null&&a!==u;){var A=a,N=A.alternate,O=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||O===null||(N=O,g?(O=ws(a,v),O!=null&&S.unshift(rr(a,O,N))):g||(O=ws(a,v),O!=null&&S.push(rr(a,O,N)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var qS=/\r\n?/g,GS=/\u0000|\uFFFD/g;function ig(n){return(typeof n=="string"?n:""+n).replace(qS,`
`).replace(GS,"")}function og(n,s){return s=ig(s),ig(n)===s}function Le(n,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||yo(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&yo(n,""+u);break;case"className":Xr(n,"class",u);break;case"tabIndex":Xr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(n,a,u);break;case"style":oh(n,u,v);break;case"data":if(s!=="object"){Xr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Wr(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&Le(n,s,"name",g.name,g,null),Le(n,s,"formEncType",g.formEncType,g,null),Le(n,s,"formMethod",g.formMethod,g,null),Le(n,s,"formTarget",g.formTarget,g,null)):(Le(n,s,"encType",g.encType,g,null),Le(n,s,"method",g.method,g,null),Le(n,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Wr(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=Cn);break;case"onScroll":u!=null&&ve("scroll",n);break;case"onScrollEnd":u!=null&&ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Wr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":ve("beforetoggle",n),ve("toggle",n),Qr(n,"popover",u);break;case"xlinkActuate":En(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":En(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":En(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":En(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":En(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":En(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":En(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":En(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":En(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hT.get(a)||a,Qr(n,a,u))}}function Gc(n,s,a,u,g,v){switch(a){case"style":oh(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?yo(n,u):(typeof u=="number"||typeof u=="bigint")&&yo(n,""+u);break;case"onScroll":u!=null&&ve("scroll",n);break;case"onScrollEnd":u!=null&&ve("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[At]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Qr(n,a,u)}}}function pt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ve("error",n),ve("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Le(n,s,v,S,a,null)}}g&&Le(n,s,"srcSet",a.srcSet,a,null),u&&Le(n,s,"src",a.src,a,null);return;case"input":ve("invalid",n);var A=v=S=g=null,N=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":g=z;break;case"type":S=z;break;case"checked":N=z;break;case"defaultChecked":O=z;break;case"value":v=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Le(n,s,u,z,a,null)}}eh(n,v,A,N,O,S,g,!1);return;case"select":ve("invalid",n),u=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(A=a[g],A!=null))switch(g){case"value":v=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:Le(n,s,g,A,a,null)}s=v,a=S,n.multiple=!!u,s!=null?go(n,!!u,s,!1):a!=null&&go(n,!!u,a,!0);return;case"textarea":ve("invalid",n),v=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(A=a[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:Le(n,s,S,A,a,null)}nh(n,u,g,v);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Le(n,s,N,u,a,null)}return;case"dialog":ve("beforetoggle",n),ve("toggle",n),ve("cancel",n),ve("close",n);break;case"iframe":case"object":ve("load",n);break;case"video":case"audio":for(u=0;u<sr.length;u++)ve(sr[u],n);break;case"image":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"embed":case"source":case"link":ve("error",n),ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Le(n,s,O,u,a,null)}return;default:if(jl(s)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&Gc(n,s,z,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&Le(n,s,A,u,a,null))}function HS(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,A=null,N=null,O=null,z=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=$;default:u.hasOwnProperty(H)||Le(n,s,H,null,u,$)}}for(var q in u){var H=u[q];if($=a[q],u.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":v=H;break;case"name":g=H;break;case"checked":O=H;break;case"defaultChecked":z=H;break;case"value":S=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:H!==$&&Le(n,s,q,H,u,$)}}Zl(n,S,A,N,O,z,v,g);return;case"select":H=S=A=q=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":H=N;default:u.hasOwnProperty(v)||Le(n,s,v,null,u,N)}for(g in u)if(v=u[g],N=a[g],u.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":q=v;break;case"defaultValue":A=v;break;case"multiple":S=v;default:v!==N&&Le(n,s,g,v,u,N)}s=A,a=S,u=H,q!=null?go(n,!!a,q,!1):!!u!=!!a&&(s!=null?go(n,!!a,s,!0):go(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(g=a[A],a.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Le(n,s,A,null,u,g)}for(S in u)if(g=u[S],v=a[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":q=g;break;case"defaultValue":H=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&Le(n,s,S,g,u,v)}th(n,q,H);return;case"option":for(var ie in a)if(q=a[ie],a.hasOwnProperty(ie)&&q!=null&&!u.hasOwnProperty(ie))switch(ie){case"selected":n.selected=!1;break;default:Le(n,s,ie,null,u,q)}for(N in u)if(q=u[N],H=a[N],u.hasOwnProperty(N)&&q!==H&&(q!=null||H!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Le(n,s,N,q,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)q=a[ce],a.hasOwnProperty(ce)&&q!=null&&!u.hasOwnProperty(ce)&&Le(n,s,ce,null,u,q);for(O in u)if(q=u[O],H=a[O],u.hasOwnProperty(O)&&q!==H&&(q!=null||H!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:Le(n,s,O,q,u,H)}return;default:if(jl(s)){for(var ke in a)q=a[ke],a.hasOwnProperty(ke)&&q!==void 0&&!u.hasOwnProperty(ke)&&Gc(n,s,ke,void 0,u,q);for(z in u)q=u[z],H=a[z],!u.hasOwnProperty(z)||q===H||q===void 0&&H===void 0||Gc(n,s,z,q,u,H);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!u.hasOwnProperty(L)&&Le(n,s,L,null,u,q);for($ in u)q=u[$],H=a[$],!u.hasOwnProperty($)||q===H||q==null&&H==null||Le(n,s,$,q,u,H)}function sg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,S=g.initiatorType,A=g.duration;if(v&&A&&sg(S)){for(S=0,A=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],O=N.startTime;if(O>A)break;var z=N.transferSize,$=N.initiatorType;z&&sg($)&&(N=N.responseEnd,S+=z*(N<A?1:(A-O)/(N-O)))}if(--u,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Hc=null,Vc=null;function Ja(n){return n.nodeType===9?n:n.ownerDocument}function rg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function zc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bc=null;function zS(){var n=window.event;return n&&n.type==="popstate"?n===Bc?!1:(Bc=n,!0):(Bc=null,!1)}var lg=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,ug=typeof Promise=="function"?Promise:void 0,FS=typeof queueMicrotask=="function"?queueMicrotask:typeof ug<"u"?function(n){return ug.resolve(null).then(n).catch(YS)}:lg;function YS(n){setTimeout(function(){throw n})}function Ti(n){return n==="head"}function cg(n,s){var a=s,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Ko(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ar(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ar(a);for(var v=a.firstChild;v;){var S=v.nextSibling,A=v.nodeName;v[bs]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&ar(n.ownerDocument.body);a=g}while(a);Ko(s)}function fg(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Fc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Fc(a),Ql(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function $S(n,s,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[bs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=en(n.nextSibling),n===null)break}return null}function JS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=en(n.nextSibling),n===null))return null;return n}function dg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=en(n.nextSibling),n===null))return null;return n}function Yc(n){return n.data==="$?"||n.data==="$~"}function $c(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function KS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function en(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Jc=null;function hg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return en(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function pg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function mg(n,s,a){switch(s=Ja(a),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function ar(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ql(n)}var tn=new Map,gg=new Set;function Ka(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Gn=Z.d;Z.d={f:QS,r:XS,D:ZS,C:WS,L:jS,m:eE,X:nE,S:tE,M:iE};function QS(){var n=Gn.f(),s=Ga();return n||s}function XS(n){var s=ho(n);s!==null&&s.tag===5&&s.type==="form"?Up(s):Gn.r(n)}var Yo=typeof document>"u"?null:document;function yg(n,s,a){var u=Yo;if(u&&typeof s=="string"&&s){var g=Jt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),gg.has(g)||(gg.add(g),n={rel:n,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),pt(s,"link",n),rt(s),u.head.appendChild(s)))}}function ZS(n){Gn.D(n),yg("dns-prefetch",n,null)}function WS(n,s){Gn.C(n,s),yg("preconnect",n,s)}function jS(n,s,a){Gn.L(n,s,a);var u=Yo;if(u&&n&&s){var g='link[rel="preload"][as="'+Jt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Jt(a.imageSizes)+'"]')):g+='[href="'+Jt(n)+'"]';var v=g;switch(s){case"style":v=$o(n);break;case"script":v=Jo(n)}tn.has(v)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),tn.set(v,n),u.querySelector(g)!==null||s==="style"&&u.querySelector(lr(v))||s==="script"&&u.querySelector(ur(v))||(s=u.createElement("link"),pt(s,"link",n),rt(s),u.head.appendChild(s)))}}function eE(n,s){Gn.m(n,s);var a=Yo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Jt(u)+'"][href="'+Jt(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Jo(n)}if(!tn.has(v)&&(n=_({rel:"modulepreload",href:n},s),tn.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ur(v)))return}u=a.createElement("link"),pt(u,"link",n),rt(u),a.head.appendChild(u)}}}function tE(n,s,a){Gn.S(n,s,a);var u=Yo;if(u&&n){var g=po(u).hoistableStyles,v=$o(n);s=s||"default";var S=g.get(v);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(lr(v)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=tn.get(v))&&Kc(n,a);var N=S=u.createElement("link");rt(N),pt(N,"link",n),N._p=new Promise(function(O,z){N.onload=O,N.onerror=z}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Qa(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(v,S)}}}function nE(n,s){Gn.X(n,s);var a=Yo;if(a&&n){var u=po(a).hoistableScripts,g=Jo(n),v=u.get(g);v||(v=a.querySelector(ur(g)),v||(n=_({src:n,async:!0},s),(s=tn.get(g))&&Qc(n,s),v=a.createElement("script"),rt(v),pt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function iE(n,s){Gn.M(n,s);var a=Yo;if(a&&n){var u=po(a).hoistableScripts,g=Jo(n),v=u.get(g);v||(v=a.querySelector(ur(g)),v||(n=_({src:n,async:!0,type:"module"},s),(s=tn.get(g))&&Qc(n,s),v=a.createElement("script"),rt(v),pt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function vg(n,s,a,u){var g=(g=re.current)?Ka(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=$o(a.href),a=po(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=$o(a.href);var v=po(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(lr(n)))&&!v._p&&(S.instance=v,S.state.loading=5),tn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},tn.set(n,a),v||oE(g,n,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Jo(a),a=po(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function $o(n){return'href="'+Jt(n)+'"'}function lr(n){return'link[rel="stylesheet"]['+n+"]"}function _g(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function oE(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),pt(s,"link",a),rt(s),n.head.appendChild(s))}function Jo(n){return'[src="'+Jt(n)+'"]'}function ur(n){return"script[async]"+n}function Tg(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(u)return s.instance=u,rt(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),rt(u),pt(u,"style",g),Qa(u,a.precedence,n),s.instance=u;case"stylesheet":g=$o(a.href);var v=n.querySelector(lr(g));if(v)return s.state.loading|=4,s.instance=v,rt(v),v;u=_g(a),(g=tn.get(g))&&Kc(u,g),v=(n.ownerDocument||n).createElement("link"),rt(v);var S=v;return S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),pt(v,"link",u),s.state.loading|=4,Qa(v,a.precedence,n),s.instance=v;case"script":return v=Jo(a.src),(g=n.querySelector(ur(v)))?(s.instance=g,rt(g),g):(u=a,(g=tn.get(v))&&(u=_({},a),Qc(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),rt(g),pt(g,"link",u),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Qa(u,a.precedence,n));return s.instance}function Qa(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)v=A;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Kc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Qc(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Xa=null;function Sg(n,s,a){if(Xa===null){var u=new Map,g=Xa=new Map;g.set(a,u)}else g=Xa,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[bs]||v[ct]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var A=u.get(S);A?A.push(v):u.set(S,[v])}}return u}function Eg(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function sE(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Cg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function rE(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=$o(u.href),v=s.querySelector(lr(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Za.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,rt(v);return}v=s.ownerDocument||s,u=_g(u),(g=tn.get(g))&&Kc(u,g),v=v.createElement("link"),rt(v);var S=v;S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),pt(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Za.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Xc=0;function aE(n,s){return n.stylesheets&&n.count===0&&ja(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&ja(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&Xc===0&&(Xc=62500*VS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ja(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>Xc?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Za(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ja(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Wa=null;function ja(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Wa=new Map,s.forEach(lE,n),Wa=null,Za.call(n))}function lE(n,s){if(!(s.state.loading&4)){var a=Wa.get(n);if(a)var u=a.get(null);else{a=new Map,Wa.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||u,v===u&&a.set(null,g),a.set(S,g),this.count++,u=Za.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var cr={$$typeof:U,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function uE(n,s,a,u,g,v,S,A,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.hiddenUpdates=Yl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Ag(n,s,a,u,g,v,S,A,N,O,z,$){return n=new uE(n,s,a,S,N,O,z,$,A),s=1,v===!0&&(s|=24),v=qt(3,null,null,s),n.current=v,v.stateNode=n,s=Nu(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},Uu(v),n}function bg(n){return n?(n=Ao,n):Ao}function Mg(n,s,a,u,g,v){g=bg(g),u.context===null?u.context=g:u.pendingContext=g,u=ui(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=ci(n,u,s),a!==null&&(xt(a,n,s),zs(a,n,s))}function wg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Zc(n,s){wg(n,s),(n=n.alternate)&&wg(n,s)}function Rg(n){if(n.tag===13||n.tag===31){var s=Gi(n,67108864);s!==null&&xt(s,n,67108864),Zc(n,67108864)}}function Ng(n){if(n.tag===13||n.tag===31){var s=Bt();s=$l(s);var a=Gi(n,s);a!==null&&xt(a,n,s),Zc(n,s)}}var el=!0;function cE(n,s,a,u){var g=V.T;V.T=null;var v=Z.p;try{Z.p=2,Wc(n,s,a,u)}finally{Z.p=v,V.T=g}}function fE(n,s,a,u){var g=V.T;V.T=null;var v=Z.p;try{Z.p=8,Wc(n,s,a,u)}finally{Z.p=v,V.T=g}}function Wc(n,s,a,u){if(el){var g=jc(u);if(g===null)qc(n,s,u,tl,a),Ig(n,u);else if(hE(g,n,s,a,u))u.stopPropagation();else if(Ig(n,u),s&4&&-1<dE.indexOf(n)){for(;g!==null;){var v=ho(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Pi(v.pendingLanes);if(S!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var N=1<<31-kt(S);A.entanglements[1]|=N,S&=~N}vn(v),(xe&6)===0&&(Oa=St()+500,or(0))}}break;case 31:case 13:A=Gi(v,2),A!==null&&xt(A,v,2),Ga(),Zc(v,2)}if(v=jc(u),v===null&&qc(n,s,u,tl,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else qc(n,s,u,null,a)}}function jc(n){return n=tu(n),ef(n)}var tl=null;function ef(n){if(tl=null,n=fo(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return tl=n,null}function xg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(W()){case ze:return 2;case jn:return 8;case ei:case Gd:return 32;case Hd:return 268435456;default:return 32}default:return 32}}var tf=!1,Si=null,Ei=null,Ci=null,fr=new Map,dr=new Map,Ai=[],dE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ig(n,s){switch(n){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":fr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dr.delete(s.pointerId)}}function hr(n,s,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=ho(s),s!==null&&Rg(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function hE(n,s,a,u,g){switch(s){case"focusin":return Si=hr(Si,n,s,a,u,g),!0;case"dragenter":return Ei=hr(Ei,n,s,a,u,g),!0;case"mouseover":return Ci=hr(Ci,n,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return fr.set(v,hr(fr.get(v)||null,n,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,dr.set(v,hr(dr.get(v)||null,n,s,a,u,g)),!0}return!1}function Dg(n){var s=fo(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,$d(n.priority,function(){Ng(a)});return}}else if(s===31){if(s=d(a),s!==null){n.blockedOn=s,$d(n.priority,function(){Ng(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=jc(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);eu=u,a.target.dispatchEvent(u),eu=null}else return s=ho(a),s!==null&&Rg(s),n.blockedOn=a,!1;s.shift()}return!0}function Ug(n,s,a){nl(n)&&a.delete(s)}function pE(){tf=!1,Si!==null&&nl(Si)&&(Si=null),Ei!==null&&nl(Ei)&&(Ei=null),Ci!==null&&nl(Ci)&&(Ci=null),fr.forEach(Ug),dr.forEach(Ug)}function il(n,s){n.blockedOn===s&&(n.blockedOn=null,tf||(tf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pE)))}var ol=null;function Pg(n){ol!==n&&(ol=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ol===n&&(ol=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],g=n[s+2];if(typeof u!="function"){if(ef(u||a)===null)continue;break}var v=ho(a);v!==null&&(n.splice(s,3),s-=3,ju(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Ko(n){function s(N){return il(N,n)}Si!==null&&il(Si,n),Ei!==null&&il(Ei,n),Ci!==null&&il(Ci,n),fr.forEach(s),dr.forEach(s);for(var a=0;a<Ai.length;a++){var u=Ai[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ai.length&&(a=Ai[0],a.blockedOn===null);)Dg(a),a.blockedOn===null&&Ai.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],S=g[At]||null;if(typeof v=="function")S||Pg(a);else if(S){var A=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[At]||null)A=S.formAction;else if(ef(g)!==null)continue}else A=S.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),Pg(a)}}}function Lg(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function nf(n){this._internalRoot=n}sl.prototype.render=nf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Bt();Mg(a,u,n,s,null,null)},sl.prototype.unmount=nf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Mg(n.current,2,null,n,null,null),Ga(),s[co]=null}};function sl(n){this._internalRoot=n}sl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Yd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ai.length&&s!==0&&s<Ai[a].priority;a++);Ai.splice(a,0,n),a===0&&Dg(n)}};var kg=e.version;if(kg!=="19.2.0")throw Error(o(527,kg,"19.2.0"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var mE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Es=rl.inject(mE),Lt=rl}catch{}}return mr.createRoot=function(n,s){if(!r(n))throw Error(o(299));var a=!1,u="",g=Bp,v=Fp,S=Yp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Ag(n,1,!1,null,null,a,u,null,g,v,S,Lg),n[co]=s.current,Oc(n),new nf(s)},mr.hydrateRoot=function(n,s,a){if(!r(n))throw Error(o(299));var u=!1,g="",v=Bp,S=Fp,A=Yp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=Ag(n,1,!0,s,a??null,u,g,N,v,S,A,Lg),s.context=bg(null),a=s.current,u=Bt(),u=$l(u),g=ui(u),g.callback=null,ci(a,g,u),a=u,s.current.lanes=a,As(s,a),vn(s),n[co]=s.current,Oc(n),new sl(s)},mr.version="19.2.0",mr}var $g;function bE(){if($g)return rf.exports;$g=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rf.exports=AE(),rf.exports}var ME=bE();var Jg="popstate";function wE(t={}){function e(o,r){let{pathname:l,search:c,hash:d}=o.location;return Tf("",{pathname:l,search:c,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(o,r){return typeof r=="string"?r:Pr(r)}return NE(e,i,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RE(){return Math.random().toString(36).substring(2,10)}function Kg(t,e){return{usr:t.state,key:t.key,idx:e}}function Tf(t,e,i=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?cs(e):e,state:i,key:e&&e.key||o||RE()}}function Pr({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function cs(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function NE(t,e,i,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,d="POP",p=null,h=y();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function y(){return(c.state||{idx:null}).idx}function _(){d="POP";let w=y(),R=w==null?null:w-h;h=w,p&&p({action:d,location:M.location,delta:R})}function T(w,R){d="PUSH";let D=Tf(M.location,w,R);h=y()+1;let U=Kg(D,h),J=M.createHref(D);try{c.pushState(U,"",J)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(J)}l&&p&&p({action:d,location:M.location,delta:1})}function E(w,R){d="REPLACE";let D=Tf(M.location,w,R);h=y();let U=Kg(D,h),J=M.createHref(D);c.replaceState(U,"",J),l&&p&&p({action:d,location:M.location,delta:0})}function b(w){return xE(w)}let M={get action(){return d},get location(){return t(r,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(Jg,_),p=w,()=>{r.removeEventListener(Jg,_),p=null}},createHref(w){return e(r,w)},createURL:b,encodeLocation(w){let R=b(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:E,go(w){return c.go(w)}};return M}function xE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(i,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:Pr(t);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function m0(t,e,i="/"){return IE(t,e,i,!1)}function IE(t,e,i,o){let r=typeof e=="string"?cs(e):e,l=Jn(r.pathname||"/",i);if(l==null)return null;let c=g0(t);DE(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let h=BE(l);d=VE(c[p],h,o)}return d}function g0(t,e=[],i=[],o="",r=!1){let l=(c,d,p=r,h)=>{let y={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Ye(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=Yn([o,y.relativePath]),T=i.concat(y);c.children&&c.children.length>0&&(Ye(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),g0(c.children,e,T,_,p)),!(c.path==null&&!c.index)&&e.push({path:_,score:GE(_,c.index),routesMeta:T})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of y0(c.path))l(c,d,!0,p)}),e}function y0(t){let e=t.split("/");if(e.length===0)return[];let[i,...o]=e,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=y0(o.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),r&&d.push(...c),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function DE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:HE(e.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var UE=/^:[\w-]+$/,PE=3,LE=2,kE=1,OE=10,qE=-2,Qg=t=>t==="*";function GE(t,e){let i=t.split("/"),o=i.length;return i.some(Qg)&&(o+=qE),e&&(o+=LE),i.filter(r=>!Qg(r)).reduce((r,l)=>r+(UE.test(l)?PE:l===""?kE:OE),o)}function HE(t,e){return t.length===e.length&&t.slice(0,-1).every((o,r)=>o===e[r])?t[t.length-1]-e[e.length-1]:0}function VE(t,e,i=!1){let{routesMeta:o}=t,r={},l="/",c=[];for(let d=0;d<o.length;++d){let p=o[d],h=d===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=Sl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),T=p.route;if(!_&&h&&i&&!o[o.length-1].route.index&&(_=Sl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:Yn([l,_.pathname]),pathnameBase:KE(Yn([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=Yn([l,_.pathnameBase]))}return c}function Sl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,o]=zE(t.path,t.caseSensitive,t.end),r=e.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:o.reduce((h,{paramName:y,isOptional:_},T)=>{if(y==="*"){let b=d[T]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const E=d[T];return _&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function zE(t,e=!1,i=!0){sn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(o.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function BE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,o=t.charAt(i);return o&&o!=="/"?null:t.slice(i)||"/"}var FE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YE=t=>FE.test(t);function $E(t,e="/"){let{pathname:i,search:o="",hash:r=""}=typeof t=="string"?cs(t):t,l;if(i)if(YE(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=Xg(i.substring(1),"/"):l=Xg(i,e)}else l=e;return{pathname:l,search:QE(o),hash:XE(r)}}function Xg(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function cf(t,e,i,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JE(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function v0(t){let e=JE(t);return e.map((i,o)=>o===e.length-1?i.pathname:i.pathnameBase)}function _0(t,e,i,o=!1){let r;typeof t=="string"?r=cs(t):(r={...t},Ye(!r.pathname||!r.pathname.includes("?"),cf("?","pathname","search",r)),Ye(!r.pathname||!r.pathname.includes("#"),cf("#","pathname","hash",r)),Ye(!r.search||!r.search.includes("#"),cf("#","search","hash",r)));let l=t===""||r.pathname==="",c=l?"/":r.pathname,d;if(c==null)d=i;else{let _=e.length-1;if(!o&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}d=_>=0?e[_]:"/"}let p=$E(r,d),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var Yn=t=>t.join("/").replace(/\/\/+/g,"/"),KE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var T0=["POST","PUT","PATCH","DELETE"];new Set(T0);var WE=["GET",...T0];new Set(WE);var fs=P.createContext(null);fs.displayName="DataRouter";var Ul=P.createContext(null);Ul.displayName="DataRouterState";P.createContext(!1);var S0=P.createContext({isTransitioning:!1});S0.displayName="ViewTransition";var jE=P.createContext(new Map);jE.displayName="Fetchers";var eC=P.createContext(null);eC.displayName="Await";var Sn=P.createContext(null);Sn.displayName="Navigation";var kr=P.createContext(null);kr.displayName="Location";var Xn=P.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var ld=P.createContext(null);ld.displayName="RouteError";function tC(t,{relative:e}={}){Ye(Or(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=P.useContext(Sn),{hash:r,pathname:l,search:c}=qr(t,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:Yn([i,l])),o.createHref({pathname:d,search:c,hash:r})}function Or(){return P.useContext(kr)!=null}function Ii(){return Ye(Or(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(kr).location}var E0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function C0(t){P.useContext(Sn).static||P.useLayoutEffect(t)}function Pl(){let{isDataRoute:t}=P.useContext(Xn);return t?pC():nC()}function nC(){Ye(Or(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(fs),{basename:e,navigator:i}=P.useContext(Sn),{matches:o}=P.useContext(Xn),{pathname:r}=Ii(),l=JSON.stringify(v0(o)),c=P.useRef(!1);return C0(()=>{c.current=!0}),P.useCallback((p,h={})=>{if(sn(c.current,E0),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=_0(p,JSON.parse(l),r,h.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Yn([e,y.pathname])),(h.replace?i.replace:i.push)(y,h.state,h)},[e,i,l,r,t])}P.createContext(null);function qr(t,{relative:e}={}){let{matches:i}=P.useContext(Xn),{pathname:o}=Ii(),r=JSON.stringify(v0(i));return P.useMemo(()=>_0(t,JSON.parse(r),o,e==="path"),[t,r,o,e])}function iC(t,e){return A0(t,e)}function A0(t,e,i,o,r){Ye(Or(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Sn),{matches:c}=P.useContext(Xn),d=c[c.length-1],p=d?d.params:{},h=d?d.pathname:"/",y=d?d.pathnameBase:"/",_=d&&d.route;{let D=_&&_.path||"";b0(h,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let T=Ii(),E;if(e){let D=typeof e=="string"?cs(e):e;Ye(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=T;let b=E.pathname||"/",M=b;if(y!=="/"){let D=y.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=m0(t,{pathname:M});sn(_||w!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),sn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=lC(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:Yn([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:Yn([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,i,o,r);return e&&R?P.createElement(kr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},R):R}function oC(){let t=hC(),e=ZE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),i?P.createElement("pre",{style:r},i):null,c)}var sC=P.createElement(oC,null),rC=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement(Xn.Provider,{value:this.props.routeContext},P.createElement(ld.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aC({routeContext:t,match:e,children:i}){let o=P.useContext(fs);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Xn.Provider,{value:t},i)}function lC(t,e=[],i=null,o=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Ye(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:T,errors:E}=i,b=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!E||E[_.route.id]===void 0);if(_.route.lazy||b){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&o?(y,_)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,T)=>{let E,b=!1,M=null,w=null;i&&(E=c&&_.route.id?c[_.route.id]:void 0,M=_.route.errorElement||sC,d&&(p<0&&T===0?(b0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):p===T&&(b=!0,w=_.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),D=()=>{let U;return E?U=M:b?U=w:_.route.Component?U=P.createElement(_.route.Component,null):_.route.element?U=_.route.element:U=y,P.createElement(aC,{match:_,routeContext:{outlet:y,matches:R,isDataRoute:i!=null},children:U})};return i&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?P.createElement(rC,{location:i.location,revalidation:i.revalidation,component:M,error:E,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:h}):D()},null)}function ud(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uC(t){let e=P.useContext(fs);return Ye(e,ud(t)),e}function cC(t){let e=P.useContext(Ul);return Ye(e,ud(t)),e}function fC(t){let e=P.useContext(Xn);return Ye(e,ud(t)),e}function cd(t){let e=fC(t),i=e.matches[e.matches.length-1];return Ye(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function dC(){return cd("useRouteId")}function hC(){let t=P.useContext(ld),e=cC("useRouteError"),i=cd("useRouteError");return t!==void 0?t:e.errors?.[i]}function pC(){let{router:t}=uC("useNavigate"),e=cd("useNavigate"),i=P.useRef(!1);return C0(()=>{i.current=!0}),P.useCallback(async(r,l={})=>{sn(i.current,E0),i.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var Zg={};function b0(t,e,i){!e&&!Zg[t]&&(Zg[t]=!0,sn(!1,i))}P.memo(mC);function mC({routes:t,future:e,state:i,unstable_onError:o}){return A0(t,void 0,i,o,e)}function Qo(t){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gC({basename:t="/",children:e=null,location:i,navigationType:o="POP",navigator:r,static:l=!1}){Ye(!Or(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=cs(i));let{pathname:p="/",search:h="",hash:y="",state:_=null,key:T="default"}=i,E=P.useMemo(()=>{let b=Jn(p,c);return b==null?null:{location:{pathname:b,search:h,hash:y,state:_,key:T},navigationType:o}},[c,p,h,y,_,T,o]);return sn(E!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Sn.Provider,{value:d},P.createElement(kr.Provider,{children:e,value:E}))}function yC({children:t,location:e}){return iC(Sf(t),e)}function Sf(t,e=[]){let i=[];return P.Children.forEach(t,(o,r)=>{if(!P.isValidElement(o))return;let l=[...e,r];if(o.type===P.Fragment){i.push.apply(i,Sf(o.props.children,l));return}Ye(o.type===Qo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Sf(o.props.children,l)),i.push(c)}),i}var dl="get",hl="application/x-www-form-urlencoded";function Ll(t){return t!=null&&typeof t.tagName=="string"}function vC(t){return Ll(t)&&t.tagName.toLowerCase()==="button"}function _C(t){return Ll(t)&&t.tagName.toLowerCase()==="form"}function TC(t){return Ll(t)&&t.tagName.toLowerCase()==="input"}function SC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EC(t,e){return t.button===0&&(!e||e==="_self")&&!SC(t)}function Ef(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let o=t[i];return e.concat(Array.isArray(o)?o.map(r=>[i,r]):[[i,o]])},[]))}function CC(t,e){let i=Ef(t);return e&&e.forEach((o,r)=>{i.has(r)||e.getAll(r).forEach(l=>{i.append(r,l)})}),i}var al=null;function AC(){if(al===null)try{new FormData(document.createElement("form"),0),al=!1}catch{al=!0}return al}var bC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ff(t){return t!=null&&!bC.has(t)?(sn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hl}"`),null):t}function MC(t,e){let i,o,r,l,c;if(_C(t)){let d=t.getAttribute("action");o=d?Jn(d,e):null,i=t.getAttribute("method")||dl,r=ff(t.getAttribute("enctype"))||hl,l=new FormData(t)}else if(vC(t)||TC(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(o=p?Jn(p,e):null,i=t.getAttribute("formmethod")||d.getAttribute("method")||dl,r=ff(t.getAttribute("formenctype"))||ff(d.getAttribute("enctype"))||hl,l=new FormData(d,t),!AC()){let{name:h,type:y,value:_}=t;if(y==="image"){let T=h?`${h}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else h&&l.append(h,_)}}else{if(Ll(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=dl,o=null,r=hl,c=t}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fd(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wC(t,e,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return o.pathname==="/"?o.pathname=`_root.${i}`:e&&Jn(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function RC(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xC(t,e,i){let o=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await RC(l,i);return c.links?c.links():[]}return[]}));return PC(o.flat(1).filter(NC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Wg(t,e,i,o,r,l){let c=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,d=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>c(p,h)||d(p,h)):l==="data"?e.filter((p,h)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,h)||d(p,h))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function IC(t,e,{includeHydrateFallback:i}={}){return DC(t.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function DC(t){return[...new Set(t)]}function UC(t){let e={},i=Object.keys(t).sort();for(let o of i)e[o]=t[o];return e}function PC(t,e){let i=new Set;return new Set(e),t.reduce((o,r)=>{let l=JSON.stringify(UC(r));return i.has(l)||(i.add(l),o.push({key:l,link:r})),o},[])}function M0(){let t=P.useContext(fs);return fd(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LC(){let t=P.useContext(Ul);return fd(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dd=P.createContext(void 0);dd.displayName="FrameworkContext";function w0(){let t=P.useContext(dd);return fd(t,"You must render this element inside a <HydratedRouter> element"),t}function kC(t,e){let i=P.useContext(dd),[o,r]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:_}=e,T=P.useRef(null);P.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let M=R=>{R.forEach(D=>{c(D.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return T.current&&w.observe(T.current),()=>{w.disconnect()}}},[t]),P.useEffect(()=>{if(o){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[o]);let E=()=>{r(!0)},b=()=>{r(!1),c(!1)};return i?t!=="intent"?[l,T,{}]:[l,T,{onFocus:gr(d,E),onBlur:gr(p,b),onMouseEnter:gr(h,E),onMouseLeave:gr(y,b),onTouchStart:gr(_,E)}]:[!1,T,{}]}function gr(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function OC({page:t,...e}){let{router:i}=M0(),o=P.useMemo(()=>m0(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?P.createElement(GC,{page:t,matches:o,...e}):null}function qC(t){let{manifest:e,routeModules:i}=w0(),[o,r]=P.useState([]);return P.useEffect(()=>{let l=!1;return xC(t,e,i).then(c=>{l||r(c)}),()=>{l=!0}},[t,e,i]),o}function GC({page:t,matches:e,...i}){let o=Ii(),{manifest:r,routeModules:l}=w0(),{basename:c}=M0(),{loaderData:d,matches:p}=LC(),h=P.useMemo(()=>Wg(t,e,p,r,o,"data"),[t,e,p,r,o]),y=P.useMemo(()=>Wg(t,e,p,r,o,"assets"),[t,e,p,r,o]),_=P.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let b=new Set,M=!1;if(e.forEach(R=>{let D=r.routes[R.route.id];!D||!D.hasLoader||(!h.some(U=>U.route.id===R.route.id)&&R.route.id in d&&l[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:b.add(R.route.id))}),b.size===0)return[];let w=wC(t,c,"data");return M&&b.size>0&&w.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,d,o,r,h,e,t,l]),T=P.useMemo(()=>IC(y,r),[y,r]),E=qC(y);return P.createElement(P.Fragment,null,_.map(b=>P.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),T.map(b=>P.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),E.map(({key:b,link:M})=>P.createElement("link",{key:b,nonce:i.nonce,...M})))}function HC(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var R0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R0&&(window.__reactRouterVersion="7.9.6")}catch{}function VC({basename:t,children:e,window:i}){let o=P.useRef();o.current==null&&(o.current=wE({window:i,v5Compat:!0}));let r=o.current,[l,c]=P.useState({action:r.action,location:r.location}),d=P.useCallback(p=>{P.startTransition(()=>c(p))},[c]);return P.useLayoutEffect(()=>r.listen(d),[r,d]),P.createElement(gC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var N0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x0=P.forwardRef(function({onClick:e,discover:i="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:d,target:p,to:h,preventScrollReset:y,viewTransition:_,...T},E){let{basename:b}=P.useContext(Sn),M=typeof h=="string"&&N0.test(h),w,R=!1;if(typeof h=="string"&&M&&(w=h,R0))try{let j=new URL(window.location.href),ae=h.startsWith("//")?new URL(j.protocol+h):new URL(h),me=Jn(ae.pathname,b);ae.origin===j.origin&&me!=null?h=me+ae.search+ae.hash:R=!0}catch{sn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=tC(h,{relative:r}),[U,J,B]=kC(o,T),X=FC(h,{replace:c,state:d,target:p,preventScrollReset:y,relative:r,viewTransition:_});function K(j){e&&e(j),j.defaultPrevented||X(j)}let ne=P.createElement("a",{...T,...B,href:w||D,onClick:R||l?e:K,ref:HC(E,J),target:p,"data-discover":!M&&i==="render"?"true":void 0});return U&&!M?P.createElement(P.Fragment,null,ne,P.createElement(OC,{page:D})):ne});x0.displayName="Link";var I0=P.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:d,children:p,...h},y){let _=qr(c,{relative:h.relative}),T=Ii(),E=P.useContext(Ul),{navigator:b,basename:M}=P.useContext(Sn),w=E!=null&&XC(_)&&d===!0,R=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,D=T.pathname,U=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(D=D.toLowerCase(),U=U?U.toLowerCase():null,R=R.toLowerCase()),U&&M&&(U=Jn(U,M)||U);const J=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=D===R||!r&&D.startsWith(R)&&D.charAt(J)==="/",X=U!=null&&(U===R||!r&&U.startsWith(R)&&U.charAt(R.length)==="/"),K={isActive:B,isPending:X,isTransitioning:w},ne=B?e:void 0,j;typeof o=="function"?j=o(K):j=[o,B?"active":null,X?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let ae=typeof l=="function"?l(K):l;return P.createElement(x0,{...h,"aria-current":ne,className:j,ref:y,style:ae,to:c,viewTransition:d},typeof p=="function"?p(K):p)});I0.displayName="NavLink";var zC=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:o,replace:r,state:l,method:c=dl,action:d,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:_,...T},E)=>{let b=KC(),M=QC(d,{relative:h}),w=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&N0.test(d),D=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let J=U.nativeEvent.submitter,B=J?.getAttribute("formmethod")||c;b(J||U.currentTarget,{fetcherKey:e,method:B,navigate:i,replace:r,state:l,relative:h,preventScrollReset:y,viewTransition:_})};return P.createElement("form",{ref:E,method:w,action:M,onSubmit:o?p:D,...T,"data-discover":!R&&t==="render"?"true":void 0})});zC.displayName="Form";function BC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D0(t){let e=P.useContext(fs);return Ye(e,BC(t)),e}function FC(t,{target:e,replace:i,state:o,preventScrollReset:r,relative:l,viewTransition:c}={}){let d=Pl(),p=Ii(),h=qr(t,{relative:l});return P.useCallback(y=>{if(EC(y,e)){y.preventDefault();let _=i!==void 0?i:Pr(p)===Pr(h);d(t,{replace:_,state:o,preventScrollReset:r,relative:l,viewTransition:c})}},[p,d,h,i,o,e,t,r,l,c])}function YC(t){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Ef(t)),i=P.useRef(!1),o=Ii(),r=P.useMemo(()=>CC(o.search,i.current?null:e.current),[o.search]),l=Pl(),c=P.useCallback((d,p)=>{const h=Ef(typeof d=="function"?d(new URLSearchParams(r)):d);i.current=!0,l("?"+h,p)},[l,r]);return[r,c]}var $C=0,JC=()=>`__${String(++$C)}__`;function KC(){let{router:t}=D0("useSubmit"),{basename:e}=P.useContext(Sn),i=dC();return P.useCallback(async(o,r={})=>{let{action:l,method:c,encType:d,formData:p,body:h}=MC(o,e);if(r.navigate===!1){let y=r.fetcherKey||JC();await t.fetch(y,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,i])}function QC(t,{relative:e}={}){let{basename:i}=P.useContext(Sn),o=P.useContext(Xn);Ye(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...qr(t||".",{relative:e})},c=Ii();if(t==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(_=>_).forEach(_=>d.append("index",_));let y=d.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Yn([i,l.pathname])),Pr(l)}function XC(t,{relative:e}={}){let i=P.useContext(S0);Ye(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=D0("useViewTransitionState"),r=qr(t,{relative:e});if(!i.isTransitioning)return!1;let l=Jn(i.currentLocation.pathname,o)||i.currentLocation.pathname,c=Jn(i.nextLocation.pathname,o)||i.nextLocation.pathname;return Sl(r.pathname,c)!=null||Sl(r.pathname,l)!=null}function gt(t){if(typeof t=="number")return(Math.abs(t*2654435761)>>>0).toString(16);if(typeof t=="boolean")return t?"1":"0";if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string"){let e=2166136261;for(let i=0;i<t.length;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e=e>>>0;return e.toString(16)}if(Array.isArray(t)){let e=2166136261;for(let i=0;i<t.length;i++){e^=(i+1)*2654435761;const o=gt(t[i]);for(let r=0;r<o.length;r++)e^=o.charCodeAt(r),e*=16777619,e=e>>>0}return e.toString(16)}if(typeof t=="object"){let e=2166136261;const i=Object.keys(t).sort();for(let o=0;o<i.length;o++){const r=i[o],l=gt(r);e^=parseInt(l,16),e*=16777619,e=e>>>0;const c=gt(t[r]);e^=parseInt(c,16),e*=16777619,e=e>>>0}return e.toString(16)}return gt(String(t))}const We={Remove:"remove",Replace:"replace",Add:"add"},U0=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),ZC=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),pl=Symbol.iterator,Yt={mutable:"mutable",immutable:"immutable"},hd={};function br(t,e){return t instanceof Map?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jg(t,e){if(e in t){let i=Reflect.getPrototypeOf(t);for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,e);if(o)return o;i=Reflect.getPrototypeOf(i)}}}function pd(t){return Object.getPrototypeOf(t)===Set.prototype}function md(t){return Object.getPrototypeOf(t)===Map.prototype}function Ft(t){var e;return(e=t.copy)!==null&&e!==void 0?e:t.original}function Ri(t){return!!Ee(t)}function Ee(t){return typeof t!="object"?null:t?.[U0]}function gd(t){var e;const i=Ee(t);return i?(e=i.copy)!==null&&e!==void 0?e:i.original:t}function fn(t,e){if(!t||typeof t!="object")return!1;let i;return Object.getPrototypeOf(t)===Object.prototype||Array.isArray(t)||t instanceof Map||t instanceof Set||!!e?.mark&&((i=e.mark(t,Yt))===Yt.immutable||typeof i=="function")}function P0(t,e=[]){if(Object.hasOwnProperty.call(t,"key")){const i=t.parent.copy,o=Ee(Kn(i,t.key));if(o!==null&&o?.original!==t.original)return null;const r=t.parent.type===3,l=r?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(r&&i.size>l||br(i,l)))return null;e.push(l)}if(t.parent)return P0(t.parent,e);e.reverse();try{WC(t.copy,e)}catch{return null}return e}function so(t){return Array.isArray(t)?1:t instanceof Map?2:t instanceof Set?3:0}function Kn(t,e){return so(t)===2?t.get(e):t[e]}function Gr(t,e,i){so(t)===2?t.set(e,i):t[e]=i}function df(t,e){const i=Ee(t);return(i?Ft(i):t)[e]}function $n(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Cf(t){if(t)for(;t.finalities.revoke.length>0;)t.finalities.revoke.pop()()}function io(t,e){return e?t:[""].concat(t).map(i=>{const o=`${i}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function WC(t,e){for(let i=0;i<e.length-1;i+=1){const o=e[i];if(t=Kn(so(t)===3?Array.from(t):t,o),typeof t!="object")throw new Error(`Cannot resolve patch at '${e.join("/")}'.`)}return t}function jC(t){const e=Object.create(Object.getPrototypeOf(t));return Reflect.ownKeys(t).forEach(i=>{let o=Reflect.getOwnPropertyDescriptor(t,i);if(o.enumerable&&o.configurable&&o.writable){e[i]=t[i];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]}),Reflect.defineProperty(e,i,o)}),e}const eA=Object.prototype.propertyIsEnumerable;function L0(t,e){let i;if(Array.isArray(t))return Array.prototype.concat.call(t);if(t instanceof Set){if(!pd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t.values())}return Set.prototype.difference?Set.prototype.difference.call(t,new Set):new Set(t.values())}else if(t instanceof Map){if(!md(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t)}return new Map(t)}else if(e?.mark&&(i=e.mark(t,Yt),i!==void 0)&&i!==Yt.mutable){if(i===Yt.immutable)return jC(t);if(typeof i=="function"){if(e.enablePatches||e.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return i()}throw new Error(`Unsupported mark result: ${i}`)}else if(typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype){const o={};return Object.keys(t).forEach(r=>{o[r]=t[r]}),Object.getOwnPropertySymbols(t).forEach(r=>{eA.call(t,r)&&(o[r]=t[r])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function Ct(t){t.copy||(t.copy=L0(t.original,t.options))}function Tr(t){if(!fn(t))return gd(t);if(Array.isArray(t))return t.map(Tr);if(t instanceof Map){const i=Array.from(t.entries()).map(([o,r])=>[o,Tr(r)]);if(!md(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Map(i)}if(t instanceof Set){const i=Array.from(t).map(Tr);if(!pd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Set(i)}const e=Object.create(Object.getPrototypeOf(t));for(const i in t)e[i]=Tr(t[i]);return e}function ml(t){return Ri(t)?Tr(t):t}function Tn(t){var e;t.assignedMap=(e=t.assignedMap)!==null&&e!==void 0?e:new Map,t.operated||(t.operated=!0,t.parent&&Tn(t.parent))}function ey(){throw new Error("Cannot modify frozen object")}function Xo(t,e,i,o,r){{i=i??new WeakMap,o=o??[],r=r??[];const c=i.has(t)?i.get(t):t;if(o.length>0){const d=o.indexOf(c);if(c&&typeof c=="object"&&d!==-1)throw o[0]===c?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${r.slice(0,d).map((p,h)=>{if(typeof p=="symbol")return`[${p.toString()}]`;const y=o[h];return typeof p=="object"&&(y instanceof Map||y instanceof Set)?Array.from(y.keys()).indexOf(p):p}).join("/")}`);o.push(c),r.push(e)}else o.push(c)}if(Object.isFrozen(t)||Ri(t)){o.pop(),r.pop();return}switch(so(t)){case 2:for(const[d,p]of t)Xo(d,d,i,o,r),Xo(p,d,i,o,r);t.set=t.clear=t.delete=ey;break;case 3:for(const d of t)Xo(d,d,i,o,r);t.add=t.clear=t.delete=ey;break;case 1:Object.freeze(t);let c=0;for(const d of t)Xo(d,c,i,o,r),c+=1;break;default:Object.freeze(t),Object.keys(t).forEach(d=>{const p=t[d];Xo(p,d,i,o,r)})}o.pop(),r.pop()}function yd(t,e){const i=so(t);if(i===0)Reflect.ownKeys(t).forEach(o=>{e(o,t[o],t)});else if(i===1){let o=0;for(const r of t)e(o,r,t),o+=1}else t.forEach((o,r)=>e(r,o,t))}function k0(t,e,i){if(Ri(t)||!fn(t,i)||e.has(t)||Object.isFrozen(t))return;const o=t instanceof Set,r=o?new Map:void 0;if(e.add(t),yd(t,(l,c)=>{var d;if(Ri(c)){const p=Ee(c);Ct(p);const h=!((d=p.assignedMap)===null||d===void 0)&&d.size||p.operated?p.copy:p.original;Gr(o?r:t,l,h)}else k0(c,e,i)}),r){const l=t,c=Array.from(l);l.clear(),c.forEach(d=>{l.add(r.has(d)?r.get(d):d)})}}function tA(t,e){const i=t.type===3?t.setMap:t.copy;t.finalities.revoke.length>1&&t.assignedMap.get(e)&&i&&k0(Kn(i,e),t.finalities.handledSet,t.options)}function Af(t){t.type===3&&t.copy&&(t.copy.clear(),t.setMap.forEach(e=>{t.copy.add(gd(e))}))}function bf(t,e,i,o){if(t.operated&&t.assignedMap&&t.assignedMap.size>0&&!t.finalized){if(i&&o){const l=P0(t);l&&e(t,l,i,o)}t.finalized=!0}}function vd(t,e,i,o){const r=Ee(i);r&&(r.callbacks||(r.callbacks=[]),r.callbacks.push((l,c)=>{var d;const p=t.type===3?t.setMap:t.copy;if($n(Kn(p,e),i)){let h=r.original;r.copy&&(h=r.copy),Af(t),bf(t,o,l,c),t.options.enableAutoFreeze&&(t.options.updatedValues=(d=t.options.updatedValues)!==null&&d!==void 0?d:new WeakMap,t.options.updatedValues.set(h,r.original)),Gr(p,e,h)}}),t.options.enableAutoFreeze&&r.finalities!==t.finalities&&(t.options.enableAutoFreeze=!1)),fn(i,t.options)&&t.finalities.draft.push(()=>{const l=t.type===3?t.setMap:t.copy;$n(Kn(l,e),i)&&tA(t,e)})}function nA(t,e,i,o,r){let{original:l,assignedMap:c,options:d}=t,p=t.copy;p.length<l.length&&([l,p]=[p,l],[i,o]=[o,i]);for(let h=0;h<l.length;h+=1)if(c.get(h.toString())&&p[h]!==l[h]){const y=e.concat([h]),_=io(y,r);i.push({op:We.Replace,path:_,value:ml(p[h])}),o.push({op:We.Replace,path:_,value:ml(l[h])})}for(let h=l.length;h<p.length;h+=1){const y=e.concat([h]),_=io(y,r);i.push({op:We.Add,path:_,value:ml(p[h])})}if(l.length<p.length){const{arrayLengthAssignment:h=!0}=d.enablePatches;if(h){const y=e.concat(["length"]),_=io(y,r);o.push({op:We.Replace,path:_,value:l.length})}else for(let y=p.length;l.length<y;y-=1){const _=e.concat([y-1]),T=io(_,r);o.push({op:We.Remove,path:T})}}}function iA({original:t,copy:e,assignedMap:i},o,r,l,c){i.forEach((d,p)=>{const h=Kn(t,p),y=ml(Kn(e,p)),_=d?br(t,p)?We.Replace:We.Add:We.Remove;if($n(h,y)&&_===We.Replace)return;const T=o.concat(p),E=io(T,c);r.push(_===We.Remove?{op:_,path:E}:{op:_,path:E,value:y}),l.push(_===We.Add?{op:We.Remove,path:E}:_===We.Remove?{op:We.Add,path:E,value:h}:{op:We.Replace,path:E,value:h})})}function oA({original:t,copy:e},i,o,r,l){let c=0;t.forEach(d=>{if(!e.has(d)){const p=i.concat([c]),h=io(p,l);o.push({op:We.Remove,path:h,value:d}),r.unshift({op:We.Add,path:h,value:d})}c+=1}),c=0,e.forEach(d=>{if(!t.has(d)){const p=i.concat([c]),h=io(p,l);o.push({op:We.Add,path:h,value:d}),r.unshift({op:We.Remove,path:h,value:d})}c+=1})}function Lr(t,e,i,o){const{pathAsArray:r=!0}=t.options.enablePatches;switch(t.type){case 0:case 2:return iA(t,e,i,o,r);case 1:return nA(t,e,i,o,r);case 3:return oA(t,e,i,o,r)}}const El=(t,e,i=!1)=>{if(typeof t=="object"&&t!==null&&(!fn(t,e)||i))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Mf={get size(){return Ft(Ee(this)).size},has(t){return Ft(Ee(this)).has(t)},set(t,e){const i=Ee(this),o=Ft(i);return(!o.has(t)||!$n(o.get(t),e))&&(Ct(i),Tn(i),i.assignedMap.set(t,!0),i.copy.set(t,e),vd(i,t,e,Lr)),this},delete(t){if(!this.has(t))return!1;const e=Ee(this);return Ct(e),Tn(e),e.original.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.copy.delete(t),!0},clear(){const t=Ee(this);if(this.size){Ct(t),Tn(t),t.assignedMap=new Map;for(const[e]of t.original)t.assignedMap.set(e,!1);t.copy.clear()}},forEach(t,e){const i=Ee(this);Ft(i).forEach((o,r)=>{t.call(e,this.get(r),r,this)})},get(t){var e,i;const o=Ee(this),r=Ft(o).get(t),l=((i=(e=o.options).mark)===null||i===void 0?void 0:i.call(e,r,Yt))===Yt.mutable;if(o.options.strict&&El(r,o.options,l),l||o.finalized||!fn(r,o.options)||r!==o.original.get(t))return r;const c=hd.createDraft({original:r,parentDraft:o,key:t,finalities:o.finalities,options:o.options});return Ct(o),o.copy.set(t,c),c},keys(){return Ft(Ee(this)).keys()},values(){const t=this.keys();return{[pl]:()=>this.values(),next:()=>{const e=t.next();return e.done?e:{done:!1,value:this.get(e.value)}}}},entries(){const t=this.keys();return{[pl]:()=>this.entries(),next:()=>{const e=t.next();if(e.done)return e;const i=this.get(e.value);return{done:!1,value:[e.value,i]}}}},[pl](){return this.entries()}},sA=Reflect.ownKeys(Mf),ty=(t,e,{isValuesIterator:i})=>()=>{var o,r;const l=e.next();if(l.done)return l;const c=l.value;let d=t.setMap.get(c);const p=Ee(d),h=((r=(o=t.options).mark)===null||r===void 0?void 0:r.call(o,d,Yt))===Yt.mutable;if(t.options.strict&&El(c,t.options,h),!h&&!p&&fn(c,t.options)&&!t.finalized&&t.original.has(c)){const y=hd.createDraft({original:c,parentDraft:t,key:c,finalities:t.finalities,options:t.options});t.setMap.set(c,y),d=y}else p&&(d=p.proxy);return{done:!1,value:i?d:[d,d]}},Cl={get size(){return Ee(this).setMap.size},has(t){const e=Ee(this);if(e.setMap.has(t))return!0;Ct(e);const i=Ee(t);return!!(i&&e.setMap.has(i.original))},add(t){const e=Ee(this);return this.has(t)||(Ct(e),Tn(e),e.assignedMap.set(t,!0),e.setMap.set(t,t),vd(e,t,t,Lr)),this},delete(t){if(!this.has(t))return!1;const e=Ee(this);Ct(e),Tn(e);const i=Ee(t);return i&&e.setMap.has(i.original)?(e.assignedMap.set(i.original,!1),e.setMap.delete(i.original)):(!i&&e.setMap.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.setMap.delete(t))},clear(){if(!this.size)return;const t=Ee(this);Ct(t),Tn(t);for(const e of t.original)t.assignedMap.set(e,!1);t.setMap.clear()},values(){const t=Ee(this);Ct(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:ty(t,e,{isValuesIterator:!0})}},entries(){const t=Ee(this);Ct(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:ty(t,e,{isValuesIterator:!1})}},keys(){return this.values()},[pl](){return this.values()},forEach(t,e){const i=this.values();let o=i.next();for(;!o.done;)t.call(e,o.value,o.value,this),o=i.next()}};Set.prototype.difference&&Object.assign(Cl,{intersection(t){return Set.prototype.intersection.call(new Set(this.values()),t)},union(t){return Set.prototype.union.call(new Set(this.values()),t)},difference(t){return Set.prototype.difference.call(new Set(this.values()),t)},symmetricDifference(t){return Set.prototype.symmetricDifference.call(new Set(this.values()),t)},isSubsetOf(t){return Set.prototype.isSubsetOf.call(new Set(this.values()),t)},isSupersetOf(t){return Set.prototype.isSupersetOf.call(new Set(this.values()),t)},isDisjointFrom(t){return Set.prototype.isDisjointFrom.call(new Set(this.values()),t)}});const rA=Reflect.ownKeys(Cl),O0={get(t,e,i){var o,r;const l=(o=t.copy)===null||o===void 0?void 0:o[e];if(l&&t.finalities.draftsCache.has(l))return l;if(e===U0)return t;let c;if(t.options.mark){const h=e==="size"&&(t.original instanceof Map||t.original instanceof Set)?Reflect.get(t.original,e):Reflect.get(t.original,e,i);if(c=t.options.mark(h,Yt),c===Yt.mutable)return t.options.strict&&El(h,t.options,!0),h}const d=Ft(t);if(d instanceof Map&&sA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Mf,"size").get.call(t.proxy):Mf[e].bind(t.proxy);if(d instanceof Set&&rA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Cl,"size").get.call(t.proxy):Cl[e].bind(t.proxy);if(!br(d,e)){const h=jg(d,e);return h?"value"in h?h.value:(r=h.get)===null||r===void 0?void 0:r.call(t.proxy):void 0}const p=d[e];if(t.options.strict&&El(p,t.options),t.finalized||!fn(p,t.options))return p;if(p===df(t.original,e)){if(Ct(t),t.copy[e]=_d({original:t.original[e],parentDraft:t,key:t.type===1?Number(e):e,finalities:t.finalities,options:t.options}),typeof c=="function"){const h=Ee(t.copy[e]);return Ct(h),Tn(h),h.copy}return t.copy[e]}return Ri(p)&&t.finalities.draftsCache.add(p),p},set(t,e,i){var o;if(t.type===3||t.type===2)throw new Error("Map/Set draft does not support any property assignment.");let r;if(t.type===1&&e!=="length"&&!(Number.isInteger(r=Number(e))&&r>=0&&(e===0||r===0||String(r)===String(e))))throw new Error("Only supports setting array indices and the 'length' property.");const l=jg(Ft(t),e);if(l?.set)return l.set.call(t.proxy,i),!0;const c=df(Ft(t),e),d=Ee(c);return d&&$n(d.original,i)?(t.copy[e]=i,t.assignedMap=(o=t.assignedMap)!==null&&o!==void 0?o:new Map,t.assignedMap.set(e,!1),!0):($n(i,c)&&(i!==void 0||br(t.original,e))||(Ct(t),Tn(t),br(t.original,e)&&$n(i,t.original[e])?t.assignedMap.delete(e):t.assignedMap.set(e,!0),t.copy[e]=i,vd(t,e,i,Lr)),!0)},has(t,e){return e in Ft(t)},ownKeys(t){return Reflect.ownKeys(Ft(t))},getOwnPropertyDescriptor(t,e){const i=Ft(t),o=Reflect.getOwnPropertyDescriptor(i,e);return o&&{writable:!0,configurable:t.type!==1||e!=="length",enumerable:o.enumerable,value:i[e]}},getPrototypeOf(t){return Reflect.getPrototypeOf(t.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(t,e){var i;return t.type===1?O0.set.call(this,t,e,void 0,t.proxy):(df(t.original,e)!==void 0||e in t.original?(Ct(t),Tn(t),t.assignedMap.set(e,!1)):(t.assignedMap=(i=t.assignedMap)!==null&&i!==void 0?i:new Map,t.assignedMap.delete(e)),t.copy&&delete t.copy[e],!0)}};function _d(t){const{original:e,parentDraft:i,key:o,finalities:r,options:l}=t,c=so(e),d={type:c,finalized:!1,parent:i,original:e,copy:null,proxy:null,finalities:r,options:l,setMap:c===3?new Map(e.entries()):void 0};(o||"key"in t)&&(d.key=o);const{proxy:p,revoke:h}=Proxy.revocable(c===1?Object.assign([],d):d,O0);if(r.revoke.push(h),d.proxy=p,i){const y=i;y.finalities.draft.push((_,T)=>{var E,b;const M=Ee(p);let w=y.type===3?y.setMap:y.copy;const R=Kn(w,o),D=Ee(R);if(D){let U=D.original;D.operated&&(U=gd(R)),Af(D),bf(D,Lr,_,T),y.options.enableAutoFreeze&&(y.options.updatedValues=(E=y.options.updatedValues)!==null&&E!==void 0?E:new WeakMap,y.options.updatedValues.set(U,D.original)),Gr(w,o,U)}(b=M.callbacks)===null||b===void 0||b.forEach(U=>{U(_,T)})})}else{const y=Ee(p);y.finalities.draft.push((_,T)=>{Af(y),bf(y,Lr,_,T)})}return p}hd.createDraft=_d;function aA(t,e,i,o,r){var l;const c=Ee(t),d=(l=c?.original)!==null&&l!==void 0?l:t,p=!!e.length;if(c?.operated)for(;c.finalities.draft.length>0;)c.finalities.draft.pop()(i,o);const h=p?e[0]:c?c.operated?c.copy:c.original:t;return c&&Cf(c),r&&Xo(h,h,c?.options.updatedValues),[h,i&&p?[{op:We.Replace,path:[],value:e[0]}]:i,o&&p?[{op:We.Replace,path:[],value:d}]:o]}function lA(t,e){var i;const o={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let r,l;e.enablePatches&&(r=[],l=[]);const d=((i=e.mark)===null||i===void 0?void 0:i.call(e,t,Yt))===Yt.mutable||!fn(t,e)?t:_d({original:t,parentDraft:null,finalities:o,options:e});return[d,(p=[])=>{const[h,y,_]=aA(d,p,r,l,e.enableAutoFreeze);return e.enablePatches?[h,y,_]:h}]}function wf(t){const{rootDraft:e,value:i,useRawReturn:o=!1,isRoot:r=!0}=t;yd(i,(l,c,d)=>{const p=Ee(c);if(p&&e&&p.finalities===e.finalities){t.isContainDraft=!0;const h=p.original;if(d instanceof Set){const y=Array.from(d);d.clear(),y.forEach(_=>d.add(l===_?h:_))}else Gr(d,l,h)}else typeof c=="object"&&c!==null&&(t.value=c,t.isRoot=!1,wf(t))}),r&&(t.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function q0(t){var e;const i=Ee(t);if(!fn(t,i?.options))return t;const o=so(t);if(i&&!i.operated)return i.original;let r;function l(){r=o===2?md(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):o===3?Array.from(i.setMap.values()):L0(t,i?.options)}if(i){i.finalized=!0;try{l()}finally{i.finalized=!1}}else r=t;if(yd(r,(c,d)=>{if(i&&$n(Kn(i.original,c),d))return;const p=q0(d);p!==d&&(r===t&&l(),Gr(r,c,p))}),o===3){const c=(e=i?.original)!==null&&e!==void 0?e:r;return pd(c)?new Set(r):new(Object.getPrototypeOf(c)).constructor(r)}return r}function ny(t){if(!Ri(t))throw new Error(`current() is only used for Draft, parameter: ${t}`);return q0(t)}const uA=t=>function e(i,o,r){var l,c,d;if(typeof i=="function"&&typeof o!="function")return function(B,...X){return e(B,K=>i.call(this,K,...X),o)};const p=i,h=o;let y=r;if(typeof o!="function"&&(y=o),y!==void 0&&Object.prototype.toString.call(y)!=="[object Object]")throw new Error(`Invalid options: ${y}, 'options' should be an object.`);y=Object.assign(Object.assign({},t),y);const _=Ri(p)?ny(p):p,T=Array.isArray(y.mark)?((B,X)=>{for(const K of y.mark){if(typeof K!="function")throw new Error(`Invalid mark: ${K}, 'mark' should be a function.`);const ne=K(B,X);if(ne)return ne}}):y.mark,E=(l=y.enablePatches)!==null&&l!==void 0?l:!1,b=(c=y.strict)!==null&&c!==void 0?c:!1,w={enableAutoFreeze:(d=y.enableAutoFreeze)!==null&&d!==void 0?d:!1,mark:T,strict:b,enablePatches:E};if(!fn(_,w)&&typeof _=="object"&&_!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[R,D]=lA(_,w);if(typeof o!="function"){if(!fn(_,w))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[R,D]}let U;try{U=h(R)}catch(B){throw Cf(Ee(R)),B}const J=B=>{const X=Ee(R);if(!Ri(B)){if(B!==void 0&&!$n(B,R)&&X?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const ne=B?.[ZC];if(ne){const j=ne[0];return w.strict&&typeof B=="object"&&B!==null&&wf({rootDraft:X,value:B,useRawReturn:!0}),D([j])}if(B!==void 0)return typeof B=="object"&&B!==null&&wf({rootDraft:X,value:B}),D([B])}if(B===R||B===void 0)return D([]);const K=Ee(B);if(w===K.options){if(K.operated)throw new Error("Cannot return a modified child draft.");return D([ny(B)])}return D([B])};return U instanceof Promise?U.then(J,B=>{throw Cf(Ee(R)),B}):J(U)},Al=uA();Object.prototype.constructor.toString();function G0(t,e){const i=Object.keys(t),o=Object.keys(e);return i.length===o.length&&Object.keys(t).every(r=>e.hasOwnProperty(r))}function iy(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(i=>e.hasOwnProperty(i)&&t[i]===e[i])}function gl(t,e){return typeof t!="object"||typeof e!="object"||t===null||e===null?t===e:G0(t,e)?Object.keys(t).every(i=>gl(t[i],e[i])):!1}function Td(t){if(!Sr(t))return t;const e={};for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=o);return e}function H0(t,e){if(!Sr(t)||!Sr(e))return e;const i=Object.assign({},t);for(const o of Object.keys(e)){if(e[o]===void 0)continue;if(e[o]===null){delete i[o];continue}const r=Sr(t[o])&&Sr(e[o]);i[o]=r?H0(t[o],e[o]):e[o]}return i}function Sr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function cA(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let l=0;l<e.length-1;l++){const c=e[l];(!(c in o)||typeof o[c]!="object")&&(o[c]=typeof e[l+1]=="number"?[]:{}),o=o[c]}const r=e[e.length-1];Array.isArray(o)&&typeof r=="number"?o.splice(r,0,i):o[r]=i}function oy(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let r=0;r<e.length-1;r++){const l=e[r];(!(l in o)||typeof o[l]!="object")&&(o[l]=typeof e[r+1]=="number"?[]:{}),o=o[l]}o[e[e.length-1]]=i}function V0(t,e){if(!t||e.length===0)return;const[i,...o]=e;if(i in t){if(o.length===0){Array.isArray(t)?t.splice(i,1):delete t[i];return}V0(t[i],o),fA(t[i])&&delete t[i]}}function fA(t){return t&&Object.keys(t).length===0}const sy=/ZULU|YEKT|YEKST|YAPT|YAKT|YAKST|XJT|WGT|WGST|WFT|WETDST|WET|WDT|WAT|WAST|WAKT|WADT|VUT|VOLT|VLAT|VLAST|VET|UZT|UZST|UYT|UYST|UTC|UT|ULAT|ULAST|UCT|TVT|TRUT|TOT|TMT|TKT|TJT|TFT|TAHT|SGT|SCT|SAST|SADT|RET|PYT|PYST|PWT|PST|PONT|PMST|PMDT|PKT|PKST|PHT|PGT|PETT|PETST|PET|PDT|OMST|OMSST|NZT|NZST|NZDT|NUT|NST|NPT|NOVT|NOVST|NFT|NDT|MYT|MVT|MUT|MUST|MST|MSK|MSD|MPT|MMT|MHT|MEZ|METDST|MET|MESZ|MEST|MDT|MAWT|MART|MAGT|MAGST|LKT|LINT|LIGT|LHST|LHDT|KST|KRAT|KRAST|KOST|KGT|KGST|KDT|JST|JAYT|IST|IRT|IRKT|IRKST|IOT|IDT|ICT|HST|HKT|GYT|GMT|GILT|GFT|GET|GEST|GAMT|GALT|FNT|FNST|FKT|FKST|FJT|FJST|FET|EST|EGT|EGST|EETDST|EET|EEST|EDT|EAT|EAST|EASST|DDUT|DAVT|CXT|CST|COT|CLT|CLST|CKT|CHUT|CHAST|CHADT|CETDST|CET|CEST|CDT|CCT|CAST|CADT|BTT|BST|BRT|BRST|BRA|BOT|BORT|BNT|BDT|BDST|AZT|AZST|AZOT|AZOST|AWST|AWSST|AST|ART|ARST|ANAT|ANAST|AMT|AMST|ALMT|ALMST|AKST|AKDT|AFT|AEST|AESST|AEDT|ADT|ACWST|ACT|ACST|ACSST|ACDT$/,dA={ZULU:0,YEKT:18e3,YEKST:21600,YAPT:36e3,YAKT:32400,YAKST:32400,XJT:21600,WGT:-10800,WGST:-7200,WFT:43200,WETDST:3600,WET:0,WDT:32400,WAT:3600,WAST:25200,WAKT:43200,WADT:28800,VUT:39600,VOLT:10800,VLAT:36e3,VLAST:36e3,VET:-14400,UZT:18e3,UZST:21600,UYT:-10800,UYST:-7200,UTC:0,UT:0,ULAT:28800,ULAST:32400,UCT:0,TVT:43200,TRUT:36e3,TOT:46800,TMT:18e3,TKT:46800,TJT:18e3,TFT:18e3,TAHT:-36e3,SGT:28800,SCT:14400,SAST:7200,SADT:37800,RET:14400,PYT:-14400,PYST:-10800,PWT:32400,PST:-28800,PONT:39600,PMST:-10800,PMDT:-7200,PKT:18e3,PKST:21600,PHT:28800,PGT:36e3,PETT:43200,PETST:43200,PET:-18e3,PDT:-25200,OMST:21600,OMSST:21600,NZT:43200,NZST:43200,NZDT:46800,NUT:-39600,NST:-12600,NPT:20700,NOVT:25200,NOVST:25200,NFT:-12600,NDT:-9e3,MYT:28800,MVT:18e3,MUT:14400,MUST:18e3,MST:-25200,MSK:10800,MSD:14400,MPT:36e3,MMT:23400,MHT:43200,MEZ:3600,METDST:7200,MET:3600,MESZ:7200,MEST:7200,MDT:-21600,MAWT:18e3,MART:-34200,MAGT:39600,MAGST:39600,LKT:19800,LINT:50400,LIGT:36e3,LHST:37800,LHDT:37800,KST:32400,KRAT:25200,KRAST:25200,KOST:39600,KGT:21600,KGST:21600,KDT:36e3,JST:32400,JAYT:32400,IST:7200,IRT:12600,IRKT:28800,IRKST:28800,IOT:21600,IDT:10800,ICT:25200,HST:-36e3,HKT:28800,GYT:-14400,GMT:0,GILT:43200,GFT:-10800,GET:14400,GEST:14400,GAMT:-32400,GALT:-21600,FNT:-7200,FNST:-3600,FKT:-10800,FKST:-10800,FJT:43200,FJST:46800,FET:10800,EST:-18e3,EGT:-3600,EGST:0,EETDST:10800,EET:7200,EEST:10800,EDT:-14400,EAT:10800,EAST:-21600,EASST:-21600,DDUT:36e3,DAVT:25200,CXT:25200,CST:-21600,COT:-18e3,CLT:-14400,CLST:-10800,CKT:-36e3,CHUT:36e3,CHAST:45900,CHADT:49500,CETDST:7200,CET:3600,CEST:7200,CDT:-18e3,CCT:28800,CAST:34200,CADT:37800,BTT:21600,BST:3600,BRT:-10800,BRST:-7200,BRA:-10800,BOT:-14400,BORT:28800,BNT:28800,BDT:21600,BDST:7200,AZT:14400,AZST:14400,AZOT:-3600,AZOST:0,AWST:28800,AWSST:32400,AST:-14400,ART:-10800,ARST:-10800,ANAT:43200,ANAST:43200,AMT:-14400,AMST:14400,ALMT:21600,ALMST:25200,AKST:-32400,AKDT:-28800,AFT:16200,AEST:36e3,AESST:39600,AEDT:39600,ADT:-10800,ACWST:31500,ACT:-18e3,ACST:34200,ACSST:37800,ACDT:37800};function hA(t){return new Date(t)}function pA(t){return new Date(t+"Z")}const mA=/^(\d+)[\./-](\d+)[\./-](\d+)$/;function gA(t){const e=t.match(mA);if(!e)return null;const[i,o,r,l]=e;return o<=0||r<=0||l<=0?null:o>999?new Date(Date.UTC(o,r-1,l,0,0,0,0)):new Date(Date.UTC(l,o-1,r,0,0,0,0))}function yA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function vA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function _A(t){return new Date(t)}function TA(t){const e=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!t.match(e))throw new Error(`Unable to parse \`${t}\` as a date.`);const o=new Date(t+" UTC");return new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0,0))}function SA(t){const e=/^(.+T.+)([+-])(\d{2})$/,i=t.match(e);if(i){const[,o,r,l]=i,c=`${o}${r}${l}:00`;return new Date(c)}return null}function EA(t){const[e,i]=t.split(", "),[o,r,l]=e.split("/").map(Number),c=i.match(/(\d{1,2}):(\d{2}):(\d{2}) (AM|PM)/);if(!c)throw new Error(`Unable to parse time from: ${t}`);let[,d,p,h,y]=c;return d=Number(d),p=Number(p),h=Number(h),y==="PM"&&d!==12?d+=12:y==="AM"&&d===12&&(d=0),new Date(Date.UTC(l,o-1,r,d,p,h))}function CA(t){switch(t){case"epoch":return new Date(0);case"infinity":case"-infinity":case"today":case"tomorrow":case"yesterday":return null}}function AA(t){const e=t.match(sy);if(!e)return null;const[i]=e,o=dA[i],r=new Date(t.replace(sy,"Z"));return new Date(r.getTime()-o*1e3)}const bA=[gA,vA,TA,EA,_A,pA,SA,yA,hA,CA,AA];function MA(t,e){try{const i=t(e);return i instanceof Date&&!isNaN(i.getTime())?i:null}catch{return null}}function Rf(t){for(const e of bA){const i=MA(e,t);if(i)return i}return null}function wA(t){try{const e=JSON.parse(t);return typeof e=="string"?Rf(e):null}catch{return null}}function kl(t){if(t!==void 0){if(t===null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Rf(t)||wA(t)||Rf(t.trim());if(!e)throw new Error(`Unable to parse \`${t}\` as a date.`);return e}else if(typeof t=="number")return new Date(t);throw new Error(`Invalid date value \`${t}\`. Expected a date, number, or string, got type ${typeof t}.`)}}function RA(t){return t.cardinality==="one"}function Sd(t){return t["value-type"]==="ref"}function Ed(t){return t["value-type"]==="blob"}function ds(t,e){return t[e]}function hs(t,e){return e.reduce((i,o)=>i&&i.get(o),t)}function cn(t,e){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.delete(e[0]);return}const[i,...o]=e;t.has(i)&&cn(t.get(i),o)}function Dt(t,e,i){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.set(e[0],i);return}const[o,...r]=e;let l=t.get(o);l||(l=new Map,t.set(o,l)),Dt(l,r,i)}function z0(t,e,i){const o=new Map,r=new Map,l=new Map;for(const c of e){let[d,p,h,y]=c;const _=ds(t,p);if(!_){console.warn("no such attr",d,t);continue}_["checked-data-type"]==="date"&&i&&(h=kl(h),c[2]=h),Sd(_)&&Dt(l,[h,p,d],c),Dt(o,[d,p,h],c),Dt(r,[p,d,h],c)}return{eav:o,aev:r,vae:l}}function B0(t){const e=new Map,i=new Map,o=new Map,r=new Map;for(const l of Object.values(t)){const c=l["forward-identity"],[d,p,h]=c,y=l["reverse-identity"];if(Dt(o,[p,h],l),Ed(l)&&Dt(e,[p,h],l),l["primary?"]&&Dt(i,[p],l),y){const[_,T,E]=y;Dt(r,[T,E],l)}}return{blobAttrs:e,primaryKeys:i,forwardIdents:o,revIdents:r}}function F0(t){return{__type:t.__type,attrs:t.attrs,triples:Ut(t.eav,3),cardinalityInference:t.cardinalityInference,linkIndex:t.linkIndex,useDateObjects:t.useDateObjects}}function Y0(t){return yl(t.attrs,t.triples,t.cardinalityInference,t.linkIndex,t.useDateObjects)}function NA(t,e){return hs(t.eav,[e])!==void 0}function Cd(t){t.attrIndexes=B0(t.attrs)}function yl(t,e,i,o,r){const l=z0(t,e,r);return l.useDateObjects=r,l.attrs=t,l.attrIndexes=B0(t),l.cardinalityInference=i,l.linkIndex=o,l.__type="store",l}function Hr(t,e){var i,o;let r;if(Array.isArray(e[0])){const[c,d]=e[0],p=t.aev.get(c);if(!p)return null;r=(i=Ut(p,2).find(y=>y[2]===d))===null||i===void 0?void 0:i[0]}else r=e[0];if(!r)return null;const l=e[2];if(Array.isArray(l)&&l.length===2&&t.aev.get(l[0])){const[c,d]=l,p=t.aev.get(c);if(!p)return null;const y=(o=Ut(p,2).find(M=>M[2]===d))===null||o===void 0?void 0:o[0];if(!y)return null;const[_,T,E,...b]=e;return[r,T,y,...b]}else{const[c,...d]=e;return[r,...d]}}function $0(t,e){const i=Hr(t,e);if(!i)return;const[o,r,l]=i,c=ds(t.attrs,r);c&&(cn(t.eav,[o,r,l]),cn(t.aev,[r,o,l]),Sd(c)&&cn(t.vae,[l,r,o]))}let xA=0;function J0(t,e,i){const[o,r,l]=i;let c;const d=hs(t.ea,[o,r,l]);return d&&(c=d[3]),c||Date.now()*10+xA++}function K0(t,e){var i;const o=Hr(t,e);if(!o)return;let[r,l,c]=o;const d=ds(t.attrs,l);if(!d)return;d["checked-data-type"]==="date"&&t.useDateObjects&&(c=kl(c));const p=hs(t.eav,[r,l,c]),h=(i=p?.[3])!==null&&i!==void 0?i:J0(t,d,o),y=[r,l,c,h];RA(d)?(Dt(t.eav,[r,l],new Map([[c,y]])),Dt(t.aev,[l,r],new Map([[c,y]]))):(Dt(t.eav,[r,l,c],y),Dt(t.aev,[l,r,c],y)),Sd(d)&&Dt(t.vae,[c,l,r],y)}function IA(t,e){var i;const o=Hr(t,e);if(!o)return;const[r,l,c]=o,d=ds(t.attrs,l);if(!d)return;if(!Ed(d))throw new Error("merge operation is not supported for links");const p=hs(t.eav,[r,l]);if(!p)return;const h=(i=p.values().next())===null||i===void 0?void 0:i.value;if(!h)return;const y=h[2],_=H0(y,c),T=[r,l,_,J0(t,d,h)];Dt(t.eav,[r,l],new Map([[_,T]]))}function Nf(t,e){var i,o;const[r,l]=e,c=Hr(t,[r]);if(!c)return;const[d]=c,p=t.eav.get(d);if(p){for(const y of p.keys()){const _=t.attrs[y];_&&_["on-delete-reverse"]==="cascade"&&Ut(p.get(y),1).forEach(([T,E,b])=>{var M;return Nf(t,[b,(M=_["reverse-identity"])===null||M===void 0?void 0:M[1]])}),(!l||!_||((i=_["forward-identity"])===null||i===void 0?void 0:i[1])===l)&&(cn(t.aev,[y,d]),cn(t.eav,[d,y]))}p.size===0&&cn(t.eav,[d])}const h=t.vae.get(d)&&Ut(t.vae.get(d),2);h&&h.forEach(y=>{var _,T,E;const[b,M,w]=y,R=t.attrs[M];(!l||!R||((_=R["reverse-identity"])===null||_===void 0?void 0:_[1])===l)&&(cn(t.eav,[b,M,w]),cn(t.aev,[M,b,w]),cn(t.vae,[w,M,b])),R&&R["on-delete"]==="cascade"&&((T=R["reverse-identity"])===null||T===void 0?void 0:T[1])===l&&Nf(t,[b,(E=R["forward-identity"])===null||E===void 0?void 0:E[1]])}),((o=t.vae.get(d))===null||o===void 0?void 0:o.size)===0&&cn(t.vae,[d])}function Q0(t,e){const i=z0(t.attrs,e,t.useDateObjects);Object.keys(i).forEach(o=>{t[o]=i[o]})}function DA(t,[e]){t.attrs[e.id]=e,Cd(t)}function X0(t){return Ut(t.eav,3)}function UA(t,[e]){if(!t.attrs[e])return;const i=X0(t).filter(([o,r])=>r!==e);delete t.attrs[e],Cd(t),Q0(t,i)}function PA(t,[e]){const i=t.attrs[e.id];i&&(t.attrs[e.id]=Object.assign(Object.assign({},i),e),Cd(t),Q0(t,X0(t)))}function LA(t,e){const[i,...o]=e;switch(i){case"add-triple":K0(t,o);break;case"deep-merge-triple":IA(t,o);break;case"retract-triple":$0(t,o);break;case"delete-entity":Nf(t,o);break;case"add-attr":DA(t,o);break;case"delete-attr":UA(t,o);break;case"update-attr":PA(t,o);break;case"restore-attr":break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${i}`)}}function Ut(t,e,i=[]){if(!t||e===0)return i;if(e===1){for(const o of t.values())i.push(o);return i}for(const o of t.values())Ut(o,e-1,i);return i}function ll(t,e,i){var o,r;const l=[];if(i?.hasOwnProperty("$not")){for(const d of e.keys())i.$not!==d&&l.push(e.get(d));return l}if(i?.hasOwnProperty("$isNull")){const{attrId:d,isNull:p,reverse:h}=i.$isNull;if(h)for(const y of e.keys()){const _=t.vae.get(y),T=!_||((o=_.get(d))===null||o===void 0?void 0:o.get(null))||!_.get(d);(p?T:!T)&&l.push(e.get(y))}else{const y=t.aev.get(d);for(const _ of e.keys()){const T=!y||((r=y.get(_))===null||r===void 0?void 0:r.get(null))||!y.get(_);(p?T:!T)&&l.push(e.get(_))}}return l}if(i?.$comparator)return Ut(e,1).filter(i.$op);const c=i.in||i.$in||[i];for(const d of c){const p=e.get(d);p&&l.push(p)}return l}function kA(t,e,i){let o="";return t!==void 0&&(o+="e"),e!==void 0&&(o+="a"),i!==void 0&&(o+="v"),o}function OA(t,[e,i,o]){var r,l;switch(kA(e,i,o)){case"e":{const d=t.eav.get(e);return Ut(d,2)}case"ea":{const d=(r=t.eav.get(e))===null||r===void 0?void 0:r.get(i);return Ut(d,1)}case"eav":{const d=(l=t.eav.get(e))===null||l===void 0?void 0:l.get(i);return d?ll(t,d,o):[]}case"ev":{const d=t.eav.get(e);if(!d)return[];const p=[];for(const h of d.values())p.push(...ll(t,h,o));return p}case"a":{const d=t.aev.get(i);return Ut(d,2)}case"av":{const d=t.aev.get(i);if(!d)return[];const p=[];for(const h of d.values())p.push(...ll(t,h,o));return p}case"v":{const d=[];for(const p of t.eav.values())for(const h of p.values())d.push(...ll(t,h,o));return d}default:return Ut(t.eav,3)}}function qA(t,e,i){var o;const r={};for(const[l,c]of e.entries()){const d=(o=t.eav.get(i))===null||o===void 0?void 0:o.get(c.id),p=Ut(d,1);for(const h of p)r[l]=h[2]}return r}function Ni(t,e,i){var o;return(o=t.attrIndexes.forwardIdents.get(e))===null||o===void 0?void 0:o.get(i)}function Z0(t,e,i){var o;return(o=t.attrIndexes.revIdents.get(e))===null||o===void 0?void 0:o.get(i)}function GA(t,e){return t.attrIndexes.blobAttrs.get(e)}function W0(t,e){var i;const o=t.attrIndexes.primaryKeys.get(e);return o||((i=t.attrIndexes.forwardIdents.get(e))===null||i===void 0?void 0:i.get("id"))}function HA(t,e){const i=Hr(t,e);if(!i)return;const[o,r,l]=i;if(ds(t.attrs,r))return hs(t.eav,[o,r])}function VA(t,e){const i=e.filter(([o,r,l,c,d])=>{if(o!=="add-triple"&&o!=="deep-merge-triple")return!0;const p=d?.mode;if(p!=="create"&&p!=="update")return!0;let h=!1;const y=ds(t.attrs,l);if(y){const _=W0(t,y["forward-identity"][1]);h=!!HA(t,[r,_.id,r])}return!(p==="create"&&h||p==="update"&&!h)});return Al(t,o=>{i.forEach(r=>{LA(o,r)})})}function zA(t){return typeof t=="string"&&t.startsWith("?")}function BA(t,e,i){if(i.hasOwnProperty(t)){const o=i[t];return j0(o,e,i)}return Object.assign(Object.assign({},i),{[t]:e})}function ry(t,e,i){return t===e?i:null}function FA(t){switch(typeof t){case"string":return t.startsWith("?")?BA:ry;default:return ry}}const YA=["in","$in","$not","$isNull","$comparator"];function $A(t){for(const e of YA)if(t.hasOwnProperty(e))return!0;return!1}function j0(t,e,i){return i?typeof t=="object"?$A(t)?i:null:FA(t)(t,e,i):null}function JA(t,e,i){return t.reduce((o,r,l)=>{const c=e[l];return j0(r,c,o)},i)}function KA(t,e,i){return ZA(t,e,i).map(o=>JA(e,o,i)).filter(o=>o)}function QA(t,e,i){return e.or?e.or.patterns.flatMap(o=>xf(t,o,i)):e.and?e.and.patterns.reduce((o,r)=>xf(t,r,o),i):i.flatMap(o=>KA(t,e,o))}function xf(t,e,i=[{}]){return e.reduce((o,r)=>QA(t,r,o),i)}function Ad(t,e){return Array.isArray(e)?e.map(i=>Ad(t,i)):zA(e)?t[e]:e}function XA(t,{find:e,where:i}){return xf(t,i).map(r=>Ad(r,e))}function ZA(t,e,i){return OA(t,Ad(i,e))}const WA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function as(t){return typeof t=="string"&&WA.test(t)}const mt=[];for(let t=0;t<256;++t)mt.push((t+256).toString(16).slice(1));function jA(t,e=0){return(mt[t[e+0]]+mt[t[e+1]]+mt[t[e+2]]+mt[t[e+3]]+"-"+mt[t[e+4]]+mt[t[e+5]]+"-"+mt[t[e+6]]+mt[t[e+7]]+"-"+mt[t[e+8]]+mt[t[e+9]]+"-"+mt[t[e+10]]+mt[t[e+11]]+mt[t[e+12]]+mt[t[e+13]]+mt[t[e+14]]+mt[t[e+15]]).toLowerCase()}let hf;const eb=new Uint8Array(16);function tb(){if(!hf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");hf=crypto.getRandomValues.bind(crypto)}return hf(eb)}const nb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ay={randomUUID:nb};function ib(t,e,i){if(ay.randomUUID&&!t)return ay.randomUUID();t=t||{};const o=t.random??t.rng?.()??tb();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,jA(o)}function ly(t){const e=t.replace(/-/g,""),i=[];for(let o=0;o<e.length;o+=2)i.push(parseInt(e.substring(o,o+2),16));return i}function ob(t,e){for(let i=0;i<t.length;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}function sb(t,e){return ob(ly(t),ly(e))}function ut(){return ib()}function rb(t,e){return t.localeCompare(e)}function ab(){let t=rb;if(typeof Intl=="object"&&Intl.hasOwnProperty("Collator"))try{t=Intl.Collator("en-US").compare}catch{}return t}const lb=ab();let ub=0;function Mr(t){return Ol(`_${t}`,ub++)}function Ol(t,e){return`?${t}-${e}`}class ls extends Error{constructor(e){super(e),this.name="AttrNotFoundError"}}function cb(t,e){const i=W0(t,e);if(!i)throw new ls(`Could not find id attr for ${e}`);return i}function uy(t,e,i,o){return[fb(t,e,i,o)]}function fb(t,e,i,o){return[t(i,o),cb(e,i).id,t(i,o),t("time",o)]}function db(t,e,i){return t.map(o=>o===e?i:o)}function e_(t,e,i,o,r){const l=Ni(e,i,r),c=Z0(e,i,r),d=l||c;if(!d)throw new ls(`Could not find attr for ${[i,r]}`);if(d["value-type"]!=="ref")throw new Error(`Attr ${d.id} is not a ref`);const[p,h]=d["forward-identity"],[y,_]=d["reverse-identity"],T=o+1,E=l?[t(h,o),d.id,t(_,T),Mr("time")]:[t(h,T),d.id,t(_,o),Mr("time")];return[l?_:h,T,E,d,!!l]}function cy(t,e){if(typeof e!="string")return function(c){return!1};const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),r=new RegExp(`^${o}$`,t?void 0:"i");return function(c){return typeof c!="string"?!1:r.test(c)}}function hb(t,e){if(typeof e!="object"||e.hasOwnProperty("$in")||e.hasOwnProperty("in"))return e;const i=t["checked-data-type"]==="date";if(e.hasOwnProperty("$gt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>new Date(e.$gt)}:function(r){return r[2]>e.$gt}};if(e.hasOwnProperty("$gte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>=new Date(e.$gte)}:function(r){return r[2]>=e.$gte}};if(e.hasOwnProperty("$lt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<new Date(e.$lt)}:function(r){return r[2]<e.$lt}};if(e.hasOwnProperty("$lte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<=new Date(e.$lte)}:function(r){return r[2]<=e.$lte}};if(e.hasOwnProperty("$like")){const o=cy(!0,e.$like);return{$comparator:!0,$op:function(l){return o(l[2])}}}if(e.hasOwnProperty("$ilike")){const o=cy(!1,e.$ilike);return{$comparator:!0,$op:function(l){return o(l[2])}}}return e}function pb(t,e,i,o,r,l){const c=Ni(e,i,r),d=Z0(e,i,r),p=c||d;if(!p)throw new ls(`No attr for etype = ${i} label = ${r}`);if(l?.hasOwnProperty("$isNull")){const h=Ni(e,i,"id");if(!h)throw new ls(`No attr for etype = ${i} label = id`);return[t(i,o),h.id,{$isNull:{attrId:p.id,isNull:l.$isNull,reverse:!c}},Mr("time")]}return c?[t(i,o),p.id,hb(p,l),Mr("time")]:[l,p.id,t(i,o),Mr("time")]}function mb(t,e,i,o,r){const[l,c,d]=r.reduce((p,h)=>{const[y,_,T]=p,[E,b,M]=e_(t,e,y,_,h);return[E,b,[...T,M]]},[i,o,[]]);return[l,c,d]}function If(t,e,i,o,r,l){const c=r.slice(0,r.length-1),d=r[r.length-1],[p,h,y]=mb(t,e,i,o,c),_=pb(t,e,p,h,d,l);return y.concat([_])}function gb(t,e){return e?[e].concat(t):t}function yb([t,e]){return t==="or"&&Array.isArray(e)}function vb([t,e]){return t==="and"&&Array.isArray(e)}function _b(t,e,i){return(o,r)=>{const l=t(o,r);return e==l?l:`${l}-${i}`}}function fy(t,e,i,o,r,l){const c=t(o,r),d=l.map((p,h)=>{const y=_b(t,c,h);return t_(y,i,o,r,p)});return{[e]:{patterns:d,joinSym:c}}}function Tb(t){const e=[];for(let i=1;i<=t.length;i++)e.push(t.slice(0,i));return e}function dy(t,e,i,o,r){return Tb(r).map(l=>If(t,e,i,o,l,{$isNull:!0}))}function t_(t,e,i,o,r){return Object.entries(r).flatMap(([l,c])=>{if(yb([l,c]))return fy(t,"or",e,i,o,c);if(vb([l,c]))return fy(t,"and",e,i,o,c);if(l==="$entityIdStartsWith")return[];const d=l.split(".");if(c?.hasOwnProperty("$ne")&&(c=Object.assign(Object.assign({},c),{$not:c.$ne}),delete c.$ne),c?.hasOwnProperty("$not")){const p=If(t,e,i,o,d,c),h=dy(t,e,i,o,d);return[{or:{patterns:[p,...h],joinSym:t(i,o)}}]}return c?.hasOwnProperty("$isNull")&&c.$isNull===!0&&d.length>1?[{or:{patterns:dy(t,e,i,o,d),joinSym:t(i,o)}}]:If(t,e,i,o,d,c)})}function Sb(t,e,i,o){const r=Ol;return o?t_(r,t,e,i,o).concat(uy(r,t,e,i)):uy(r,t,e,i)}function Eb(t,e,i){return[t(e,i),t("time",i)]}function Cb(t,e,i,o,r,l){const[c,d,p,h,y]=e_(t,e,i,o,r),_=db(p,t(i,o),l);return[c,d,_,h,y]}function Ab(t,e,{etype:i,level:o,form:r},l){const c=Object.keys(r).filter(d=>d!=="$");return c.length?Object.entries(l).map(function([p,h]){return c.map(function(T){var E,b,M;const w=!!(e.cardinalityInference&&(!((M=(b=(E=e.linkIndex)===null||E===void 0?void 0:E[i])===null||b===void 0?void 0:b[T])===null||M===void 0)&&M.isSingular));try{const[R,D,U]=Cb(t,e,i,o,T,p),J=i_(e,{etype:R,level:D,form:r[T],join:U}),B=w?J[0]:J;return{[T]:B}}catch(R){if(R instanceof ls)return{[T]:w?void 0:[]};throw R}}).reduce(function(T,E){return Object.assign(Object.assign({},T),E)},h)}):Object.values(l)}function bb(t,e,i){return i==="string"?lb(t,e):t>e?1:-1}function Er(t,e,i,o,r){return e===o||e==null&&o==null?sb(t,i):o==null?1:e==null?-1:bb(e,o,r)}function bl([t,e],[i,o],r){return Er(t,e,i,o,r)}function Df(t){return t==null?t:new Date(t).getTime()}function Mb(t,e,i,o){var r;const[l,c,d,p]=t,h=i==="desc"?1:-1;if(((r=e["forward-identity"])===null||r===void 0?void 0:r[2])==="id")return bl(o,[l,p],null)===h;const[y,_]=o,T=e["checked-data-type"],E=T==="date"?Df(_):_,b=T==="date"?Df(d):d;return bl([y,E],[l,b],T)===h}function wb(t,e){const i=e[1];return t.attrs[i]}function Rb(t,e,i){const o=Object.keys(i)[0];return Ni(t,e,o)}function Nb(t,e,i,o){if(i)return wb(t,i);if(o)return Rb(t,e,o)}function xb(t,e,i){var o,r;if(!Array.isArray(i.fields))return GA(t,e);const l=new Map;for(const c of i.fields){const d=Ni(t,e,c),p=(o=d?.["forward-identity"])===null||o===void 0?void 0:o[2];p&&Ed(d)&&l.set(p,d)}if(!l.has("id")){const c=Ni(t,e,"id"),d=(r=c?.["forward-identity"])===null||r===void 0?void 0:r[2];d&&l.set(d,c)}return l}function Ib(t,{etype:e,pageInfo:i,dq:o,form:r}){var l,c;const d=(l=r?.$)===null||l===void 0?void 0:l.order,p=n_(r),h=Db(r);let y=XA(t,o);const _=i?.["start-cursor"],T=Nb(t,e,_,d);if(T&&((c=T?.["forward-identity"])===null||c===void 0?void 0:c[2])!=="id"){const M=T["checked-data-type"]==="date",w=T.id;y=y.map(([R])=>{var D,U,J,B,X;let K=(X=(B=(J=(U=(D=t.eav.get(R))===null||D===void 0?void 0:D.get(w))===null||U===void 0?void 0:U.values())===null||J===void 0?void 0:J.next())===null||B===void 0?void 0:B.value)===null||X===void 0?void 0:X[2];return M&&(K=Df(K)),[R,K]})}y.sort(h==="asc"?function(w,R){return bl(w,R,T?.["checked-data-type"])}:function(w,R){return bl(R,w,T?.["checked-data-type"])});let E={};const b=xb(t,e,o);for(const M of y){const[w]=M;if(E[w]||!p&&_&&T&&Mb(_,T,h,M))continue;const R=qA(t,b,w);R&&(E[w]=R)}return E}function Db(t){var e;const i=(e=t.$)===null||e===void 0?void 0:e.order;return i&&i[Object.keys(i)[0]]||"asc"}function n_(t){var e,i,o;const r=(e=t.$)===null||e===void 0?void 0:e.offset,l=(i=t.$)===null||i===void 0?void 0:i.before,c=(o=t.$)===null||o===void 0?void 0:o.after;return!r&&!l&&!c}function Ub(t,{etype:e,level:i,form:o,join:r,pageInfo:l}){var c,d,p,h,y;if(!n_(o)&&(!l||!l["start-cursor"]))return[];const _=gb(Sb(t,e,i,(c=o.$)===null||c===void 0?void 0:c.where),r),T=Eb(Ol,e,i),E=(d=o.$)===null||d===void 0?void 0:d.fields,b=Ib(t,{etype:e,pageInfo:l,form:o,dq:{where:_,find:T,fields:E}}),M=((p=o.$)===null||p===void 0?void 0:p.limit)||((h=o.$)===null||h===void 0?void 0:h.first)||((y=o.$)===null||y===void 0?void 0:y.last);if(M!=null){i>0&&console.warn("WARNING: Limits in child queries are only run client-side. Data returned from the server will not have a limit.");const w=Object.entries(b);return w.length<=M?b:Object.fromEntries(w.slice(0,M))}return b}function Pb(t,e){try{return Ub(t,e)}catch(i){if(i instanceof ls)return{};throw i}}function i_(t,e){const i=Pb(t,e);return Ab(Ol,t,e,i)}function Lb(t){const e={};for(const[i,o]of Object.entries(t))e[i]={startCursor:o["start-cursor"],endCursor:o["end-cursor"],hasNextPage:o["has-next-page?"],hasPreviousPage:o["has-previous-page?"]};return e}function o_({store:t,pageInfo:e,aggregate:i},o){const l={data:Object.keys(o).reduce(function(d,p){return i?.[p]||p==="$$ruleParams"||(d[p]=i_(t,{etype:p,form:o[p],level:0,pageInfo:e?.[p]})),d},{})};return e&&(l.pageInfo=Lb(e)),i&&(l.aggregate=i),l}function kb(){const e={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(e))}const Ob=kb();function Uf(t,e,i){const o={__etype:t,__ops:i};return new Proxy(o,{get:(r,l)=>{if(l==="__ops")return i;if(l==="__etype")return t;if(Ob.has(l))return(c,d)=>Uf(t,e,[...i,d?[l,t,e,c,d]:[l,t,e,c]])}})}function Ml(t){return t.startsWith("lookup__")}function s_(t){const[e,i,...o]=t.split("__");return[i,JSON.parse(o.join("__"))]}function qb(t){return new Proxy({__etype:t},{get(e,i){if(i==="__etype")return t;const o=i;return Ml(o)?Uf(t,s_(o),[]):Uf(t,o,[])}})}function bd(){return new Proxy({},{get(t,e){return qb(e)}})}bd();function Gb(t){return t.__ops}function Hb(t,e){const{attrIdMap:i,refSwapAttrIds:o}=t,r=[];for(const c of e){const d=i[c];if(d)r.push(d);else if(Array.isArray(c)&&c.length==2&&i[c[0]]){const[p,h]=c;r.push([i[p],h])}else r.push(c)}const[l]=e;if((l==="add-triple"||l==="retract-triple")&&o.has(e[2])){const c=r[1];r[1]=r[3],r[3]=c}return r}function yt(t,e,i){return Object.values(t).find(o=>{const[r,l,c]=o["forward-identity"];return l===e&&c===i})}function oo(t,e,i){return Object.values(t).find(o=>{const r=o["reverse-identity"];if(!r)return!1;const[l,c,d]=r;return c===e&&d===i})}function Vb(t){if(Array.isArray(t))return t;const e=Object.entries(t);if(e.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return e[0]}function Pf(t,e,i){return i.indexOf(".")!==-1&&!yt(t,e,i)}function Lf(t){const[e,i,...o]=t.split(".");if(o.length>0||i!=="id")throw new Error(`${t} is not a valid lookup attribute.`);return e}function zb(t,e,i){if(!Pf(t,e,i))return yt(t,e,i);const o=Lf(i),r=yt(t,e,o)||oo(t,e,o);if(r&&r["value-type"]!=="ref")throw new Error(`${i} does not reference a valid link attribute.`);return r}function kf(t){return typeof t=="string"&&!Ml(t)?null:typeof t=="string"&&Ml(t)?s_(t):Vb(t)}function Pt(t,e,i){const o=kf(i);if(o===null)return i;const[r,l]=o,c=zb(t,e,r);if(!c||!c["unique?"])throw new Error(`${r} is not a unique attribute.`);return[c.id,l]}function r_(t,e,i,o){const r=Pt(t,e,i);return Array.isArray(r)?[["add-triple",r,yt(t,e,"id").id,r]].concat(o):o}function Bb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=yt(t,e,l),h=oo(t,e,l);return d.map(y=>p?["add-triple",Pt(t,e,i),p.id,Pt(t,p["reverse-identity"][1],y)]:["add-triple",Pt(t,h["forward-identity"][1],y),h.id,Pt(t,e,i)])});return r_(t,e,i,r)}function Fb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const d=Array.isArray(c)?c:[c],p=yt(t,e,l),h=oo(t,e,l);return d.map(y=>p?["retract-triple",Pt(t,e,i),p.id,Pt(t,p["reverse-identity"][1],y)]:["retract-triple",Pt(t,h["forward-identity"][1],y),h.id,Pt(t,e,i)])});return r_(t,e,i,r)}function Yb(t,e,i){if(Array.isArray(i)){const[o,r]=i;for(const l of t||[]){const c=l?.aev.get(o);if(c){for(const[d,p,h]of Ut(c,2))if(h===r)return!0}}}else for(const o of t||[]){const r=o?.eav.get(i);if(r){for(const l of r.keys())if(o.attrs[l]["forward-identity"][1]==e)return!0}}return!1}function a_({stores:t,attrs:e},[i,o,r,l]){return l?.upsert===!1?{mode:"update"}:l?.upsert===!0?null:Yb(t,i,o)?{mode:"update"}:null}function $b(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=Td(c),h=Pt(o,r,l);return[["id",h]].concat(Object.entries(p)).map(([_,T])=>{const E=yt(o,r,_);return E["checked-data-type"]==="date"&&t.useDateObjects&&(T=kl(T)),["add-triple",h,E.id,T,{mode:"create"}]})}function Jb(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=Td(c),h=Pt(o,r,l),y=a_(t,[r,h,c,d]);return[["id",h]].concat(Object.entries(p)).map(([T,E])=>{const b=yt(o,r,T);return b["checked-data-type"]==="date"&&t.useDateObjects&&(E=kl(E)),["add-triple",h,b.id,E,...y?[y]:[]]})}function Kb({attrs:t},[e,i]){return[["delete-entity",Pt(t,e,i),e]]}function Qb(t,e){const{stores:i,attrs:o}=t,[r,l,c,d]=e,p=Td(c),h=Pt(o,r,l),y=a_(t,[r,h,c,d]),_=Object.entries(p).map(([E,b])=>{const M=yt(o,r,E);return["deep-merge-triple",h,M.id,b,...y?[y]:[]]});return[["add-triple",h,yt(o,r,"id").id,h,...y?[y]:[]]].concat(_)}function Xb({attrs:t},[e,i,o]){return[["rule-params",Pt(t,e,i),e,o]]}function Zb(t){const[e,i,o,r,l]=t;if(!r)return t;const c=Object.assign({},r);return delete c.id,[e,i,o,c,...l?[l]:[]]}function Wb(t,e){const[i,...o]=Zb(e);switch(i){case"merge":return Qb(t,o);case"create":return $b(t,o);case"update":return Jb(t,o);case"link":return Bb(t,o);case"unlink":return Fb(t,o);case"delete":return Kb(t,o);case"ruleParams":return Xb(t,o);default:throw new Error(`unsupported action ${i}`)}}function jb(t){switch(t){case"string":case"date":case"boolean":case"number":return t;default:return}}function eM(t,e,i){var o,r;const l=(r=(o=t.entities[e])===null||o===void 0?void 0:o.attrs)===null||r===void 0?void 0:r[i];if(i==="id")return null;if(!l)throw new Error(`${e}.${i} does not exist in your schema`);const{unique:c,indexed:d}=l?.config,p=jb(l?.valueType);return{"index?":d,"unique?":c,"checked-data-type":p}}function ul(t,e,i,o){const r=t?eM(t,e,i):null,l=ut(),d=[ut(),e,i];return Object.assign(Object.assign({id:l,"forward-identity":d,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}function tM(t,e,i){return Object.values(t.links).find(r=>r.forward.on===e&&r.forward.label===i||r.reverse.on===e&&r.reverse.label===i)}function nM(t,e,i){const o=tM(t,e,i);if(!o)throw new Error(`Couldn't find the link ${e}.${i} in your schema`);const{forward:r,reverse:l}=o;return{"forward-identity":[ut(),r.on,r.label],"reverse-identity":[ut(),l.on,l.label],cardinality:r.has==="one"?"one":"many","unique?":l.has==="one","on-delete":r.onDelete,"on-delete-reverse":l.onDelete}}function hy(t,e,i,o){const r=t?nM(t,e,i):null,l=ut(),c=[ut(),e,i],d=[ut(),i,e];return Object.assign(Object.assign({id:l,"forward-identity":c,"reverse-identity":d,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}const iM=new Set(["create","update","merge","link","unlink"]),oM=new Set(["link","unlink"]),sM=new Set(["create","update","merge"]),rM=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Of={"unique?":!0,"index?":!0},aM=Object.assign(Object.assign({},Of),{cardinality:"one"});function lM(t){const e=[],[i,o,r,l]=t;if(!rM.has(i))return e;const c=kf(r);if(c&&e.push({etype:o,lookupPair:c}),i==="link")for(const[d,p]of Object.entries(l)){const h=Array.isArray(p)?p:[p];for(const y of h){const _=kf(y);_&&e.push({etype:o,lookupPair:_,linkLabel:d})}}return e}function uM({attrs:t,schema:e},i){var o,r;const[l,c,d]=[new Set,Object.assign({},t),[]];function p(_){c[_.id]=_,d.push(["add-attr",_]),l.add(_.id)}function h(_){_?.isUnsynced&&!l.has(_.id)&&(d.push(["add-attr",_]),l.add(_.id))}function y(_,T){const E=yt(c,_,T),b=oo(c,_,T);h(E),h(b),!E&&!b&&p(hy(e,_,T,aM))}for(const _ of i)for(const{etype:T,lookupPair:E,linkLabel:b}of lM(_)){const M=E[0];if(b){y(T,b);const w=yt(c,T,b),R=oo(c,T,b);h(w),h(R);const D=((o=w?.["reverse-identity"])===null||o===void 0?void 0:o[1])||((r=R?.["forward-identity"])===null||r===void 0?void 0:r[1])||b;if(Pf(c,D,M))y(D,Lf(M));else{const U=yt(c,D,M);U||p(ul(e,D,M,Of)),h(U)}}else if(Pf(c,T,M))y(T,Lf(M));else{const w=yt(c,T,M);w||p(ul(e,T,M,Of)),h(w)}}for(const _ of i){const[T,E,b,M]=_;if(iM.has(T)){const w=yt(c,E,"id");h(w),w||p(ul(e,E,"id",{"unique?":!0}));for(const R of Object.keys(M)){const D=yt(c,E,R);if(h(D),sM.has(T)&&(D||p(ul(e,E,R,R==="id"?{"unique?":!0}:null))),oM.has(T)){const U=oo(c,E,R);!D&&!U&&p(hy(e,E,R)),h(U)}}}}return[c,d]}function cM(t,e){const o=(Array.isArray(e)?e:[e]).flatMap(p=>Gb(p)),[r,l]=uM(t,o),c=Object.assign(Object.assign({},t),{attrs:r}),d=o.flatMap(p=>Wb(c,p));return[...l,...d]}var _n=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function py(t,e){typeof requestIdleCallback>"u"?t():requestIdleCallback(t,{timeout:e})}const wr="__meta";class fM{constructor(e,i){}}class qf{constructor(e){var i,o;this._subs=[],this._nextSave=null,this._nextGc=null,this._pendingSaveKeys=new Set,this._loadedKeys=new Set,this._version=0,this._meta={isLoading:!0,onLoadCbs:[],value:null,error:null,attempts:0},this._persister=e.persister,this._merge=e.merge,this.serialize=e.serialize,this.parse=e.parse,this._objectSize=e.objectSize,this._log=e.logger,this._saveThrottleMs=(i=e.saveThrottleMs)!==null&&i!==void 0?i:100,this._idleCallbackMaxWaitMs=(o=e.idleCallbackMaxWaitMs)!==null&&o!==void 0?o:1e3,this._gcOpts=e.gc,this.currentValue={},this._loadedKeys=new Set,this._loadingKeys={},this._initMeta(),e.preloadEntryCount&&this._preloadEntries(e.preloadEntryCount)}_initMeta(){return _n(this,void 0,void 0,function*(){var e,i,o;this._meta.loadingPromise&&(yield this._meta.loadingPromise);try{const r=this._persister.getItem(wr);this._meta.loadingPromise=r;const l=yield r;this._meta.isLoading=!1,this._meta.error=null,this._meta.loadingPromise=null,this._meta.attempts=0;const c=(i=(e=this._meta.value)===null||e===void 0?void 0:e.objects)!==null&&i!==void 0?i:{},d=l??{},p=(o=d.objects)!==null&&o!==void 0?o:{};this._meta.value=Object.assign(Object.assign({},d),{objects:Object.assign(Object.assign({},c),p)})}catch(r){this._meta.error=r,this._meta.attempts++,this._meta.loadingPromise=null}})}_getMeta(){return _n(this,void 0,void 0,function*(){return this._meta.value?this._meta.value:this._meta.loadingPromise?(yield this._meta.loadingPromise,this._meta.value):(this._initMeta(),yield this._meta.loadingPromise,this._meta.value)})}_refreshMeta(){return _n(this,void 0,void 0,function*(){return yield this._initMeta(),this._meta.value})}_preloadEntries(e){return _n(this,void 0,void 0,function*(){const i=yield this.waitForMetaToLoad();if(!i)return;const o=Object.entries(i.objects);o.sort(([r,l],[c,d])=>d.updatedAt-l.updatedAt);for(const[r]of o.slice(0,e))this._loadKey(r)})}_getFromStorage(e){return _n(this,void 0,void 0,function*(){try{const i=yield this._persister.getItem(e);return i&&this.parse(e,i)}catch(i){return console.error(`Unable to read from storage for key=${e}`,i),null}})}waitForKeyToLoad(e){return _n(this,void 0,void 0,function*(){return this._loadedKeys.has(e)?this.currentValue[e]:(yield this._loadingKeys[e]||this._loadKey(e),this.currentValue[e])})}waitForMetaToLoad(){return _n(this,void 0,void 0,function*(){return this._getMeta()})}unloadKey(e){this._loadedKeys.delete(e),delete this._loadingKeys[e],delete this.currentValue[e]}_loadKey(e){return _n(this,void 0,void 0,function*(){if(this._loadedKeys.has(e)||e in this._loadingKeys)return;const i=this._getFromStorage(e);this._loadingKeys[e]=i;const o=yield i;if(delete this._loadingKeys[e],this._loadedKeys.add(e),o){const r=this._merge(e,o,this.currentValue[e]);r&&(this.currentValue[e]=r)}this.onKeyLoaded&&this.onKeyLoaded(e)})}_writeToStorage(e){var i,o;const r=[],l=e?.skipGc;if(this._meta.isLoading){const E=new Promise((b,M)=>{var w;setTimeout(()=>this._enqueuePersist(e?Object.assign(Object.assign({},e),{attempts:(e.attempts||0)+1}):{attempts:1}).then(b).catch(M),10+((w=e?.attempts)!==null&&w!==void 0?w:0)*1e3)});return r.push(E),Promise.all(r).then(b=>b.reduce((M,w)=>M+w,0))}const c=this._meta.value;if(!c)return Promise.resolve(0);const d=[],p=[];for(const E of this._pendingSaveKeys)E in this.currentValue?p.push(E):(d.push(E),delete c.objects[E]);for(const E of d){const b=this._persister.removeItem(E);r.push(b.then(()=>1)),this._loadedKeys.delete(E),this._pendingSaveKeys.delete(E)}const h=[],y=[[wr,c]],_=(i=c.objects)!==null&&i!==void 0?i:{};c.objects=_;for(const E of p)if(this._loadedKeys.has(E)){const b=this.serialize(E,this.currentValue[E]);y.push([E,b]);const M=this._objectSize(b),w=(o=_[E])!==null&&o!==void 0?o:{createdAt:Date.now(),updatedAt:Date.now(),size:M};w.updatedAt=Date.now(),w.size=M,_[E]=w,this._pendingSaveKeys.delete(E)}else h.push(E);const T=this._persister.multiSet(y);r.push(T.then(()=>1));for(const E of h){const b=this._loadKey(E).then(()=>this._enqueuePersist(e));r.push(b)}return l||this.gc(),Promise.all(r).then(E=>E.reduce((b,M)=>b+M,0))}flush(){return _n(this,void 0,void 0,function*(){return this._nextSave?(clearTimeout(this._nextSave),this._nextSave=null,this._writeToStorage()):void 0})}_gc(){return _n(this,void 0,void 0,function*(){if(!this._gcOpts)return;const e=new Set(yield this._persister.getAllKeys());e.delete(wr);const i=new Set(Object.keys(this.currentValue));for(const T of Object.keys(this._loadingKeys))i.add(T);for(const T of this._loadedKeys)i.add(T);const o=yield this._refreshMeta();if(!o){this._log.info("Could not gc because we were not able to load meta");return}const r=[],l={gcOpts:this._gcOpts,keys:e,sacredKeys:i,removed:[],metaRemoved:[],removedMissingCount:0,removedOldCount:0,removedThresholdCount:0,removedSizeCount:0};for(const T of e)i.has(T)||T in o.objects||(this._log.info("Lost track of key in meta",T),r.push(this._persister.removeItem(T)),l.removed.push(T),l.removedMissingCount++);const c=Date.now();for(const[T,E]of Object.entries(o.objects))!i.has(T)&&E.updatedAt<c-this._gcOpts.maxAgeMs&&(r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedOldCount++);const d=Object.entries(o.objects);d.sort(([T,E],[b,M])=>E.updatedAt-M.updatedAt);const p=d.filter(([T])=>!i.has(T));if(d.length>this._gcOpts.maxEntries)for(const[T]of p.slice(0,d.length-this._gcOpts.maxEntries))r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedThresholdCount++;const h=Object.entries(o.objects);h.sort(([T,E],[b,M])=>E.updatedAt-M.updatedAt);const y=h.filter(([T])=>!i.has(T));let _=h.reduce((T,[E,b])=>T+b.size,0);for(;_>0&&_>this._gcOpts.maxSize&&y.length;){const[[T,E]]=y.splice(0,1);_-=E.size,r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedSizeCount++}for(const T of Object.keys(o.objects))!e.has(T)&&!i.has(T)&&delete o.objects[T];return(l.removed.length||l.metaRemoved.length)&&r.push(this._enqueuePersist({skipGc:!0})),this._log.info("Completed GC",l),yield Promise.all(r),l})}gc(){this._nextGc||(this._nextGc=setTimeout(()=>{py(()=>{this._nextGc=null,this._gc()},30*1e3)},1e3*60+Math.random()*500))}_enqueuePersist(e){return new Promise((i,o)=>{if(this._nextSave){i(0);return}this._nextSave=setTimeout(()=>{py(()=>{this._nextSave=null,this._writeToStorage(e).then(i).catch(o)},this._idleCallbackMaxWaitMs)},this._saveThrottleMs)})}version(){return this._version}updateInPlace(e){this._version++;const[i,o]=Al(this.currentValue,e,{enablePatches:!0});for(const r of o){const l=r.path[0];l&&typeof l=="string"&&(this._pendingSaveKeys.add(l),this._loadedKeys.has(l)||this._loadKey(l))}for(const r of Object.keys(i))if(!i[r])debugger;this.currentValue=i,this._enqueuePersist();for(const r of this._subs)r(this.currentValue);return i}subscribe(e){return this._subs.push(e),e(this.currentValue),()=>{this._subs=this._subs.filter(i=>i!==e)}}}var Bn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const dM=6,hM=["kv","querySubs","syncSubs"];function pM(t){return function(i){console.error("Error in IndexedDB event",{source:t,event:i})}}function mM(t){return Bn(this,void 0,void 0,function*(){return new Promise(e=>{const i=indexedDB.open(t);i.onerror=o=>{e(null)},i.onsuccess=o=>{const l=o.target.result;e(l)},i.onupgradeneeded=o=>{var r;(r=o.target.transaction)===null||r===void 0||r.abort(),e(null)}})})}function gM(t,e,i){return Bn(this,void 0,void 0,function*(){const o=typeof e=="string"?JSON.parse(e):e;if(!o)return;const r=new Set;return new Promise((l,c)=>{var d,p,h,y;const _={};for(const[b,M]of Object.entries(o)){const w=typeof M=="string"?JSON.parse(M):M;if(w.lastAccessed){const D={createdAt:w.lastAccessed,updatedAt:w.lastAccessed,size:(y=(h=(p=(d=w.result)===null||d===void 0?void 0:d.store)===null||p===void 0?void 0:p.triples)===null||h===void 0?void 0:h.length)!==null&&y!==void 0?y:0};_[b]=D}const R=i.put(w,b);r.add(R)}const T={objects:_},E=i.put(T,wr);r.add(E);for(const b of r)b.onsuccess=()=>{r.delete(b),r.size===0&&l()},b.onerror=M=>{c(M)}})})}function my(t,e,i){return Bn(this,void 0,void 0,function*(){const o=i.put(e,t);return new Promise((r,l)=>{o.onsuccess=()=>r(),o.onerror=c=>l(c)})})}function yM(t,e){return Bn(this,void 0,void 0,function*(){const i=yield mM(`instant_${t}_5`);if(!i)return;const o=yield new Promise((y,_)=>{const b=i.transaction(["kv"],"readonly").objectStore("kv").openCursor();b.onerror=w=>{_(w)};const M=[];b.onsuccess=()=>{const w=b.result;if(w){const R=w.key,D=w.value;M.push([R,D]),w.continue()}else y(M)},b.onerror=w=>{_(w)}}),r=e.transaction(["kv","querySubs"],"readwrite"),l=r.objectStore("kv"),c=r.objectStore("querySubs"),d=[],p={objects:{}};for(const[y,_]of o)switch(y){case"querySubs":{const T=gM(y,_,c);d.push(T);break}default:{const T=my(y,_,l);d.push(T);const E={createdAt:Date.now(),updatedAt:Date.now(),size:0};p.objects[y]=E;break}}const h=my(wr,p,l);d.push(h),yield Promise.all(d),yield new Promise((y,_)=>{r.oncomplete=T=>y(T),r.onerror=T=>_(T),r.onabort=T=>_(T)})})}const gy=new Map;class l_ extends fM{constructor(e,i){super(e,i),this.dbName=`instant_${e}_${dM}`,this._storeName=i,this._appId=e,this._dbPromise=this._init()}_init(){return new Promise((e,i)=>{let o=!1;const r=indexedDB.open(this.dbName,1);r.onerror=l=>{i(l)},r.onsuccess=l=>{const d=l.target.result;if(o){const p=yM(this._appId,d).catch(h=>{pM("Error upgrading store from version 5 to 6.")(h)});gy.set(this.dbName,p),p.then(()=>e(d)).catch(()=>e(d))}else{const p=gy.get(this.dbName);p?p.then(()=>e(d)).catch(()=>e(d)):e(d)}},r.onupgradeneeded=l=>{o=!0,this._upgradeStore(l)}})}_upgradeStore(e){const o=e.target.result;for(const r of hM)o.objectStoreNames.contains(r)||o.createObjectStore(r)}getItem(e){return Bn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readonly").objectStore(this._storeName).get(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{d.result?o(d.result):o(null)}})})}setItem(e,i){return Bn(this,void 0,void 0,function*(){const o=yield this._dbPromise;return new Promise((r,l)=>{const p=o.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(i,e);p.onerror=h=>{l(h)},p.onsuccess=h=>{r()}})})}multiSet(e){return Bn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const l=i.transaction([this._storeName],"readwrite"),c=l.objectStore(this._storeName),d=new Set;for(const[p,h]of e){const y=c.put(h,p);d.add(y)}for(const p of d)p.onerror=h=>{l.abort(),r(h)},p.onsuccess=h=>{d.delete(p),d.size===0&&o()}})})}removeItem(e){return Bn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const d=i.transaction([this._storeName],"readwrite").objectStore(this._storeName).delete(e);d.onerror=p=>{r(p)},d.onsuccess=p=>{o()}})})}getAllKeys(){return Bn(this,void 0,void 0,function*(){const e=yield this._dbPromise;return new Promise((i,o)=>{const c=e.transaction([this._storeName],"readonly").objectStore(this._storeName).getAllKeys();c.onerror=d=>{o(d)},c.onsuccess=d=>{i(c.result.filter(p=>typeof p=="string"))}})})}}var vM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class u_{static getIsOnline(){return vM(this,void 0,void 0,function*(){return navigator.onLine})}static listen(e){const i=()=>{e(!0)},o=()=>{e(!1)};return addEventListener("online",i),addEventListener("offline",o),()=>{removeEventListener("online",i),removeEventListener("offline",o)}}}class us extends Error{constructor(e,i){super(e),this.hint=i;const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,us),this.name="InstantError"}get[Symbol.toStringTag](){return"InstantError"}}var _M=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};class ql extends us{constructor(e){var i;const o=((i=e.body)===null||i===void 0?void 0:i.message)||`API Error (${e.status})`;super(o,e.body.hint);const r=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,ql),this.name="InstantAPIError",this.status=e.status,this.body=e.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function dn(t,e){return _M(this,void 0,void 0,function*(){const i=yield fetch(t,e),o=yield i.json();return i.status===200?Promise.resolve(o):Promise.reject(new ql({status:i.status,body:o}))})}var ps=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function TM({apiURI:t,appId:e,email:i}){return dn(`${t}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":e,email:i})})}function SM(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i,email:o,code:r,refreshToken:l}){return yield dn(`${e}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object.assign({"app-id":i,email:o,code:r},l?{"refresh-token":l}:{}))})})}function EM(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield dn(`${e}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i,"refresh-token":o})})})}function CM(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i}){return yield dn(`${e}/runtime/auth/sign_in_guest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i})})})}function yy(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i,code:o,codeVerifier:r,refreshToken:l}){return yield dn(`${e}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,code:o,code_verifier:r,refresh_token:l})})})}function AM(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i,nonce:o,idToken:r,clientName:l,refreshToken:c}){return yield dn(`${e}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,nonce:o,id_token:r,client_name:l,refresh_token:c})})})}function bM(t){return ps(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield dn(`${e}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,refresh_token:o})})})}var Vr=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function MM(t){return Vr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,file:r,refreshToken:l,contentType:c,contentDisposition:d}){const p={app_id:i,path:o,authorization:`Bearer ${l}`,"content-type":c||r.type};return d&&(p["content-disposition"]=d),yield dn(`${e}/storage/upload`,{method:"PUT",headers:p,body:r})})}function wM(t){return Vr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield dn(`${e}/storage/files?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}function RM(t){return Vr(this,arguments,void 0,function*({apiURI:e,appId:i,fileName:o,refreshToken:r,metadata:l={}}){const{data:c}=yield dn(`${e}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({app_id:i,filename:o})});return c})}function NM(t,e){return Vr(this,void 0,void 0,function*(){return(yield fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok})}function xM(t){return Vr(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield dn(`${e}/storage/signed-download-url?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}let Md=!1,c_=!1,f_=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(Md=!!window.localStorage.getItem("devBackend"),c_=!!window.localStorage.getItem("__instantLogging"),f_=!!window.localStorage.getItem("__devtoolLocalDash"));function vy(t,e){if(!e)return t;const i={};return e.forEach(o=>{i[o]=t[o]}),i}function IM(t,e,i){var o,r;const l={peers:{}};if(e&&"user"in e?e.user:!0){const d=vy((o=t.user)!==null&&o!==void 0?o:{},e?.keys);l.user=Object.assign(Object.assign({},d),{peerId:i})}for(const d of Object.keys((r=t.peers)!==null&&r!==void 0?r:{})){const p=e?.peers===void 0,h=Array.isArray(e?.peers)&&e?.peers.includes(d);if(p||h){const y=vy(t.peers[d],e?.keys);l.peers[d]=Object.assign(Object.assign({},y),{peerId:d})}}return l}function DM(t,e){if(t.isLoading!==e.isLoading||t.error!==e.error||(t.user||e.user)&&(!t.user||!e.user||!iy(t.user,e.user))||!G0(t.peers,e.peers))return!0;for(const o of Object.keys(t.peers))if(!iy(t.peers[o],e.peers[o]))return!0;return!1}class _y{constructor(){this.promise=new Promise((e,i)=>{this._resolve=e,this._reject=i})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function d_(t,e=[]){t.forEach(i=>{const{data:o}=i,{"datalog-result":r}=o,{"join-rows":l}=r;for(const c of l)for(const d of c)e.push(d);d_(i["child-nodes"],e)})}function Ty(t){const e=[];return d_(t,e),e}function Sy(t){return Object.values(t.links).reduce((e,i)=>{var o,r,l,c;return(o=e[l=i.forward.on])!==null&&o!==void 0||(e[l]={}),e[i.forward.on][i.forward.label]={isForward:!0,isSingular:i.forward.has==="one",link:i},(r=e[c=i.reverse.on])!==null&&r!==void 0||(e[c]={}),e[i.reverse.on][i.reverse.label]={isForward:!1,isSingular:i.reverse.has==="one",link:i},e},{})}const wd="v0.22.73";function UM(t,e){return{info:t?(...i)=>console.info(...i,e()):()=>{},debug:t?(...i)=>console.debug(...i,e()):()=>{},error:t?(...i)=>console.error(...i,e()):()=>{}}}class Fn{constructor(e,i,o,r={indexed:!1,unique:!1}){this.valueType=e,this.required=i,this.isIndexed=o,this.config=r,this.metadata={}}clientRequired(){return new Fn(this.valueType,!1,this.isIndexed,this.config)}optional(){return new Fn(this.valueType,!1,this.isIndexed,this.config)}unique(){return new Fn(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new Fn(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class Ve extends Error{constructor(e,i){const o=i?`At path '${i}': ${e}`:e;super(o),this.name="QueryValidationError"}}const Ey=["where","order","limit","last","first","offset","after","before","fields","aggregate"],PM=t=>t.valueType||"unknown",h_=(t,e,i=!1)=>{if(i||t==null)return!0;switch(e){case"string":return typeof t=="string";case"number":return typeof t=="number"&&!isNaN(t);case"boolean":return typeof t=="boolean";case"date":return t instanceof Date||typeof t=="string"||typeof t=="number";default:return!0}},LM=(t,e,i,o,r,l,c)=>{const d=l.valueType==="json",p=(h,y,_)=>{if(!h_(_,y,d))throw new Ve(`Invalid value for operator '${h}' on attribute '${o}' in entity '${r}'. Expected ${y}, but received: ${typeof _}`,c)};switch(t){case"in":case"$in":if(!Array.isArray(e))throw new Ve(`Operator '${t}' for attribute '${o}' in entity '${r}' must be an array, but received: ${typeof e}`,c);for(const h of e)p(t,i,h);break;case"$not":case"$ne":case"$gt":case"$lt":case"$gte":case"$lte":p(t,i,e);break;case"$like":case"$ilike":if(p(t,"string",e),t==="$ilike"&&!l.isIndexed)throw new Ve(`Operator '${t}' can only be used with indexed attributes, but '${o}' in entity '${r}' is not indexed`,c);break;case"$isNull":p(t,"boolean",e);break;default:throw new Ve(`Unknown operator '${t}' for attribute '${o}' in entity '${r}'`,c)}},ns=(t,e,i,o,r)=>{const l=PM(i),c=i.valueType==="json";if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(c)return;const p=t;for(const[h,y]of Object.entries(p))LM(h,y,l,e,o,i,`${r}.${h}`)}else if(!h_(t,l,c))throw new Ve(`Invalid value for attribute '${e}' in entity '${o}'. Expected ${l}, but received: ${typeof t}`,r)},kM=(t,e,i,o,r)=>{const l=t.split(".");if(l.length<2)throw new Ve(`Invalid dot notation path '${t}'. Must contain at least one dot.`,r);let c=i;for(let y=0;y<l.length-1;y++){const _=l[y],T=o.entities[c];if(!T)throw new Ve(`Entity '${c}' does not exist in schema while traversing dot notation path '${t}'.`,r);const E=T.links[_];if(!E){const b=Object.keys(T.links);throw new Ve(`Link '${_}' does not exist on entity '${c}' in dot notation path '${t}'. Available links: ${b.length>0?b.join(", "):"none"}`,r)}c=E.entityName}const d=l[l.length-1],p=o.entities[c];if(!p)throw new Ve(`Target entity '${c}' does not exist in schema for dot notation path '${t}'.`,r);if(d==="id"){if(typeof e=="string"&&!as(e))throw new Ve(`Invalid value for id field in entity '${c}'. Expected a UUID, but received: ${e}`,r);ns(e,t,new Fn("string",!1,!0),i,r);return}const h=p.attrs[d];if(Object.keys(p.links).includes(d)){if(typeof e=="string"&&!as(e))throw new Ve(`Invalid value for link '${d}' in entity '${c}'. Expected a UUID, but received: ${e}`,r);ns(e,t,new Fn("string",!1,!0),i,r);return}if(!h){const y=Object.keys(p.attrs);throw new Ve(`Attribute '${d}' does not exist on entity '${c}' in dot notation path '${t}'. Available attributes: ${y.length>0?y.join(", ")+", id":"id"}`,r)}ns(e,t,h,i,r)},p_=(t,e,i,o)=>{for(const[r,l]of Object.entries(t)){if(r==="or"||r==="and"){if(Array.isArray(l))for(const h of l)typeof h=="object"&&h!==null&&p_(h,e,i,`${o}.${r}[${h}]`);continue}if(r==="id"){ns(l,"id",new Fn("string",!1,!0),e,`${o}.id`);continue}if(r.includes(".")){kM(r,l,e,i,`${o}.${r}`);continue}const c=i.entities[e];if(!c)continue;const d=c.attrs[r],p=c.links[r];if(!d&&!p){const h=Object.keys(c.attrs),y=Object.keys(c.links);throw new Ve(`Attribute or link '${r}' does not exist on entity '${e}'. Available attributes: ${h.length>0?h.join(", "):"none"}. Available links: ${y.length>0?y.join(", "):"none"}`,`${o}.${r}`)}if(d)ns(l,r,d,e,`${o}.${r}`);else if(p){if(typeof l=="string"&&!as(l))throw new Ve(`Invalid value for link '${r}' in entity '${e}'. Expected a UUID, but received: ${l}`,`${o}.${r}`);const h=new Fn("string",!1,!0);ns(l,r,h,e,`${o}.${r}`)}}},OM=(t,e,i,o,r=0)=>{for(const c of Object.keys(t))if(!Ey.includes(c))throw new Ve(`Invalid query parameter '${c}' in $ object. Valid parameters are: ${Ey.join(", ")}. Found: ${c}`,o);const l=["offset","before","after","first","last"];for(const c of l)if(t[c]!==void 0&&r>0)throw new Ve(`'${c}' can only be used on top-level namespaces. It cannot be used in nested queries.`,o);if(t.where&&i){if(typeof t.where!="object"||t.where===null)throw new Ve(`'where' clause must be an object in entity '${e}', but received: ${typeof t.where}`,o?`${o}.where`:void 0);p_(t.where,e,i,o?`${o}.where`:"where")}},m_=(t,e,i,o,r=0)=>{var l;if(!t||typeof t!="object")throw new Ve(`Query part for entity '${e}' must be an object, but received: ${typeof t}`,o);for(const c of Object.keys(t))if(c!=="$"){if(i&&!(c in i.entities[e].links)){const p=Object.keys(i.entities[e].links);throw new Ve(`Link '${c}' does not exist on entity '${e}'. Available links: ${p.length>0?p.join(", "):"none"}`,`${o}.${c}`)}const d=t[c];if(typeof d=="object"&&d!==null){const p=(l=i?.entities[e].links[c])===null||l===void 0?void 0:l.entityName;p&&m_(d,p,i,`${o}.${c}`,r+1)}}else{const d=t[c];if(typeof d!="object"||d===null)throw new Ve(`Query parameter '$' must be an object in entity '${e}', but received: ${typeof d}`,`${o}.$`);OM(d,e,i,`${o}.$`,r)}},Cy=(t,e)=>{if(typeof t!="object"||t===null)throw new Ve(`Query must be an object, but received: ${typeof t}${t===null?" (null)":""}`);if(Array.isArray(t))throw new Ve(`Query must be an object, but received: ${typeof t}`);const i=t;for(const o of Object.keys(i)){if(Array.isArray(t[o]))throw new Ve(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(typeof o!="string")throw new Ve(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(o!=="$$ruleParams"){if(e&&!e.entities[o]){const r=Object.keys(e.entities);throw new Ve(`Entity '${o}' does not exist in schema. Available entities: ${r.length>0?r.join(", "):"none"}`,o)}m_(i[o],o,e,o,0)}}},Ay=t=>typeof t!="string"?!1:Ml(t)?!0:as(t);class nn extends Error{constructor(e){super(e),this.name="TransactionValidationError"}}const g_=t=>t.length>0?t.join(", "):"none",qM=(t,e)=>new nn(`Entity '${t}' does not exist in schema. Available entities: ${g_(e)}`),by={string:t=>typeof t=="string",number:t=>typeof t=="number"&&!isNaN(t),boolean:t=>typeof t=="boolean",date:t=>t instanceof Date||typeof t=="string"||typeof t=="number",json:()=>!0},GM=(t,e)=>{var i,o;return t==null?!0:(o=(i=by[e.valueType])===null||i===void 0?void 0:i.call(by,t))!==null&&o!==void 0?o:!1},y_=(t,e)=>{const i=e.entities[t];if(!i)throw qM(t,Object.keys(e.entities));return i},pf=(t,e,i)=>{const o=y_(t,i);if(typeof e!="object"||e===null)throw new nn(`Arguments for data operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(r==="id")continue;const c=o.attrs[r];if(c&&!GM(l,c))throw new nn(`Invalid value for attribute '${r}' in entity '${t}'. Expected ${c.valueType}, but received: ${typeof l}`)}},My=(t,e,i)=>{const o=y_(t,i);if(typeof e!="object"||e===null)throw new nn(`Arguments for link operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(!o.links[r]){const d=Object.keys(o.links);throw new nn(`Link '${r}' does not exist on entity '${t}'. Available links: ${g_(d)}`)}if(l!=null){if(Array.isArray(l)){for(const d of l)if(!Ay(d))throw new nn(`Invalid entity ID in link '${r}' for entity '${t}'. Expected a UUID or a lookup, but received: ${d}`)}else if(!Ay(l))throw new nn(`Invalid UUID in link '${r}' for entity '${t}'. Expected a UUID, but received: ${l}`)}}},HM={create:pf,update:pf,merge:pf,link:My,unlink:My,delete:()=>{}},VM=(t,e)=>{if(!e)return;const[i,o,r,l]=t;if(!Array.isArray(r)&&!as(r))throw new nn(`Invalid id for entity '${o}'. Expected a UUID, but received: ${r}`);if(typeof o!="string")throw new nn(`Entity name must be a string, but received: ${typeof o}`);const c=HM[i];c&&l!==void 0&&c(o,l,e)},zM=(t,e)=>{const i=Array.isArray(t)?t:[t];for(const o of i){if(!o||typeof o!="object")throw new nn(`Transaction chunk must be an object, but received: ${typeof o}`);if(!Array.isArray(o.__ops))throw new nn(`Transaction chunk must have __ops array, but received: ${typeof o.__ops}`);for(const r of o.__ops){if(!Array.isArray(r))throw new nn(`Transaction operation must be an array, but received: ${typeof r}`);VM(r,e)}}};var wy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};let v_=0;class Ry{constructor(e){this.type="ws",this.id=`${this.type}_${v_++}`,this.conn=new WebSocket(e),this.conn.onopen=i=>{this.onopen&&this.onopen({target:this})},this.conn.onmessage=i=>{this.onmessage&&this.onmessage({target:this,message:JSON.parse(i.data.toString())})},this.conn.onclose=i=>{this.onclose&&this.onclose({target:this})},this.conn.onerror=i=>{this.onerror&&this.onerror({target:this})}}close(){this.conn.close()}isOpen(){var e;return this.conn.readyState===((e=WebSocket.OPEN)!==null&&e!==void 0?e:1)}isConnecting(){var e;return this.conn.readyState===((e=WebSocket.CONNECTING)!==null&&e!==void 0?e:0)}send(e){return this.conn.send(JSON.stringify(e))}}class BM{constructor(e,i){this.type="sse",this.initParams=null,this.sendQueue=[],this.closeFired=!1,this.sseInitTimeout=void 0,this.id=`${this.type}_${v_++}`,this.url=i,this.ES=e,this.conn=new e(i),this.sseInitTimeout=setTimeout(()=>{this.initParams||this.handleError()},1e4),this.conn.onmessage=o=>{const r=JSON.parse(o.data);if(r.op==="sse-init"){this.initParams={machineId:r["machine-id"],sessionId:r["session-id"],sseToken:r["sse-token"]},this.onopen&&this.onopen({target:this}),clearTimeout(this.sseInitTimeout);return}this.onmessage&&this.onmessage({target:this,message:r})},this.conn.onerror=o=>{this.handleError()}}handleError(){try{this.onerror&&this.onerror({target:this})}finally{this.handleClose()}}handleClose(){this.conn.close(),this.onclose&&!this.closeFired&&(this.closeFired=!0,this.onclose({target:this}))}postMessages(e){return wy(this,void 0,void 0,function*(){var i,o,r;try{(yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machine_id:(i=this.initParams)===null||i===void 0?void 0:i.machineId,session_id:(o=this.initParams)===null||o===void 0?void 0:o.sessionId,sse_token:(r=this.initParams)===null||r===void 0?void 0:r.sseToken,messages:e})})).ok||this.handleError()}catch{this.handleError()}})}flushQueue(){return wy(this,void 0,void 0,function*(){if(this.sendPromise||!this.sendQueue.length)return;const e=this.sendQueue;this.sendQueue=[];const i=this.postMessages(e);this.sendPromise=i,i.then(()=>{this.sendPromise=null,this.flushQueue()})})}send(e){if(!this.isOpen()||!this.initParams)throw this.isConnecting()?new Error("Failed to execute 'send' on 'EventSource': Still in CONNECTING state."):this.conn.readyState===this.ES.CLOSED?new Error("EventSource is already in CLOSING or CLOSED state."):new Error("EventSource is in invalid state.");this.sendQueue.push(e),this.flushQueue()}isOpen(){return this.conn.readyState===this.ES.OPEN&&this.initParams!==null}isConnecting(){return this.conn.readyState===this.ES.CONNECTING||this.conn.readyState===this.ES.OPEN&&this.initParams===null}close(){this.handleClose()}}var Ny=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};function FM(t,e){const i=t.values;if(i)for(const o of i.entities||[])o.store.useDateObjects=e,o.store.attrs=i.attrs,o.store=Y0(o.store);return t}function YM(t,e){var i,o;if(!((i=e.values)===null||i===void 0)&&i.entities){const r=[];for(const l of(o=e.values)===null||o===void 0?void 0:o.entities){const c=F0(l.store);delete c.attrs,r.push(Object.assign(Object.assign({},l),{store:c}))}return Object.assign(Object.assign({},e),{values:Object.assign(Object.assign({},e.values),{entities:r})})}else return e}function $M(t,e,i){var o,r;const l=(o=e?.state)===null||o===void 0?void 0:o.txId,c=(r=i?.state)===null||r===void 0?void 0:r.txId;return l&&(!c||l>c)?e:c&&(!l||c>l)?i:e||i}function mf(t,e){return o_({store:e,pageInfo:null,aggregate:null},t.query).data[t.table][0]}function xy(t,e,i){var o;const r=(o=Ni(e,t.table,"id"))===null||o===void 0?void 0:o.id;if(!r)return-1;const l=hs(e.eav,[i,r,i]);return l?l[3]:-1}function Iy(t,e){for(const{action:i,triple:o}of e)switch(i){case"added":K0(t,o);break;case"removed":$0(t,o);break}}function JM(t,e){var i,o,r,l;const c={};for(const{action:d,triple:p}of e){const[h,y,_]=p,T=(o=(i=t.attrs[y])===null||i===void 0?void 0:i["forward-identity"])===null||o===void 0?void 0:o[2];if(!T)continue;const E=(r=c[h])!==null&&r!==void 0?r:{};c[h]=E;const b=(l=E[T])!==null&&l!==void 0?l:{};switch(E[T]=b,d){case"added":b.newValue=_;break;case"removed":b.oldValue===void 0&&(b.oldValue=_);break}}for(const d of Object.keys(c)){const{oldValue:p,newValue:h}=c[d];p===h&&delete c[d]}return c}function cl(t,e){return{[t.table]:e.map(i=>i.entity)}}function KM(t,e){var i;if(t.orderFieldType)return t.orderFieldType;const o=t.orderField==="serverCreatedAt"?"number":(i=Ni(e([]),t.table,t.orderField))===null||i===void 0?void 0:i["checked-data-type"];return t.orderFieldType=o,o}function QM(t,e,i){const o=e;if(t.orderField==="serverCreatedAt"){i.sort(t.orderDirection==="asc"?function(c,d){return Er(c.entity.id,c.serverCreatedAt,d.entity.id,d.serverCreatedAt,o)}:function(c,d){return Er(d.entity.id,d.serverCreatedAt,c.entity.id,c.serverCreatedAt,o)});return}const r=t.orderField;i.sort(t.orderDirection==="asc"?function(c,d){return Er(c.entity.id,c.entity[r],d.entity.id,d.entity[r],o)}:function(c,d){return Er(d.entity.id,d.entity[r],c.entity.id,c.entity[r],o)})}var Wi;(function(t){t.InitialSyncBatch="InitialSyncBatch",t.InitialSyncComplete="InitialSyncComplete",t.LoadFromStorage="LoadFromStorage",t.SyncTransaction="SyncTransaction",t.Error="Error"})(Wi||(Wi={}));class XM{constructor(e,i,o,r,l){this.callbacks={},this.idToHash={},this.trySend=e,this.config=o,this.log=r,this.createStore=l,this.subs=new qf({persister:i,merge:$M,serialize:YM,parse:(c,d)=>FM(d,this.config.useDateObjects),objectSize:c=>{var d;return((d=c.values)===null||d===void 0?void 0:d.entities.length)||0},logger:r,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}})}beforeUnload(){this.subs.flush()}subscribe(e,i){const o=gt(e);return this.callbacks[o]=this.callbacks[o]||[],this.callbacks[o].push(i),this.initSubscription(e,o,i),r=>{this.unsubscribe(o,i,r?.keepSubscription)}}unsubscribe(e,i,o){const r=(this.callbacks[e]||[]).filter(l=>l!==i);if(this.callbacks[e]=r,!r.length){delete this.callbacks[e];const l=this.subs.currentValue[e];l?.state&&this.clearSubscriptionData(l.state.subscriptionId,!!o),o||this.subs.updateInPlace(c=>{delete c[e]})}}sendStart(e){this.trySend(ut(),{op:"start-sync",q:e})}sendResync(e,i,o){this.idToHash[i.subscriptionId]=e.hash,this.trySend(i.subscriptionId,{op:"resync-table","subscription-id":i.subscriptionId,"tx-id":o,token:i.token})}sendRemove(e,i){this.trySend(ut(),{op:"remove-sync","subscription-id":e.subscriptionId,"keep-subscription":i})}initSubscription(e,i,o){return Ny(this,void 0,void 0,function*(){var r,l,c,d;yield this.subs.waitForKeyToLoad(i);const p=this.subs.currentValue[i];if(p&&p.state&&p.state.txId){this.sendResync(p,p.state,p.state.txId),!((r=p.values)===null||r===void 0)&&r.entities&&o&&o({type:Wi.LoadFromStorage,data:cl(p,(l=p.values)===null||l===void 0?void 0:l.entities)});return}const h=Object.keys(e)[0],y=((d=(c=e[h])===null||c===void 0?void 0:c.$)===null||d===void 0?void 0:d.order)||{serverCreatedAt:"asc"},[_,T]=Object.entries(y)[0];this.subs.updateInPlace(E=>{E[i]={query:e,hash:i,table:h,orderDirection:T,orderField:_,createdAt:Date.now(),updatedAt:Date.now()}}),this.sendStart(e)})}flushPending(){return Ny(this,void 0,void 0,function*(){for(const e of Object.keys(this.callbacks)){yield this.subs.waitForKeyToLoad(e);const i=this.subs.currentValue[e];i?yield this.initSubscription(i.query,i.hash):this.log.error("Missing sub for hash in flushPending",e)}})}onStartSyncOk(e){const i=e["subscription-id"],o=e.q,r=gt(o);this.idToHash[i]=r,this.subs.updateInPlace(l=>{const c=l[r];if(!c)return this.log.error("Missing sub for hash",r,"subscription-id",i,"query",o),l;c.state={subscriptionId:i,token:e.token}})}notifyCbs(e,i){for(const o of this.callbacks[e]||[])o(i)}onSyncLoadBatch(e){var i;const o=e["subscription-id"],r=e["join-rows"],l=this.idToHash[o];if(!l){this.log.error("Missing hash for subscription",e);return}const c=[],d=this.subs.currentValue[l];if(!d){this.log.error("Missing sub for hash",l,e);return}const p=(i=d.values)!==null&&i!==void 0?i:{entities:[],attrs:this.createStore([]).attrs};d.values=p;const h=p.entities;for(const y of r){const _=this.createStore(y);p.attrs=_.attrs;const T=mf(d,_);h.push({store:_,entity:T,serverCreatedAt:xy(d,_,T.id)}),c.push(T)}this.subs.updateInPlace(y=>{y[l]=d,y[l].updatedAt=Date.now()}),d.values&&this.notifyCbs(l,{type:Wi.InitialSyncBatch,data:cl(d,d.values.entities),batch:c})}onSyncInitFinish(e){var i;const o=e["subscription-id"],r=this.idToHash[o];if(!r){this.log.error("Missing hash for subscription",e);return}this.subs.updateInPlace(c=>{const d=c[r];if(!d){this.log.error("Missing sub for hash",r,e);return}const p=d.state;if(!p)return this.log.error("Sub never set init, missing result",d,e),c;p.txId=e["tx-id"],d.updatedAt=Date.now()});const l=this.subs.currentValue[r];l&&this.notifyCbs(r,{type:Wi.InitialSyncComplete,data:cl(l,((i=l.values)===null||i===void 0?void 0:i.entities)||[])})}onSyncUpdateTriples(e){var i,o,r;const l=e["subscription-id"],c=this.idToHash[l];if(!c){this.log.error("Missing hash for subscription",e);return}const d=this.subs.currentValue[c];if(!d){this.log.error("Missing sub for hash",c,e);return}const p=d.state;if(!p){this.log.error("Missing state for sub",d,e);return}for(const h of e.txes){if(p.txId&&p.txId>=h["tx-id"])continue;p.txId=h["tx-id"];const y=[],_={};for(const D of h.changes){const U=(i=_[D.triple[0]])!==null&&i!==void 0?i:[];_[D.triple[0]]=U,U.push(D)}const T=(o=d.values)!==null&&o!==void 0?o:{entities:[],attrs:this.createStore([]).attrs},E=T.entities;d.values=T;const b=[];e:for(const[D,U]of Object.entries(_))for(let J=0;J<E.length;J++){const B=E[J];if(NA(B.store,D)){Iy(B.store,U);const X=mf(d,B.store),K=JM(B.store,U)[D];X?(b.push({oldEntity:B.entity,newEntity:X,changedFields:K||{}}),B.entity=X):y.push(J),delete _[D];continue e}}const M=[];for(const[D,U]of Object.entries(_)){const J=this.createStore([]);T.attrs=J.attrs,Iy(J,U);const B=mf(d,J);if(!B){this.log.error("No entity found after applying change",{sub:d,changes:U,store:J});continue}E.push({store:J,entity:B,serverCreatedAt:xy(d,J,B.id)}),M.push(B)}const w=[];for(const D of y.sort().reverse())w.push(E[D].entity),E.splice(D,1);const R=KM(d,this.createStore);QM(d,R,E),this.notifyCbs(c,{type:Wi.SyncTransaction,data:cl(d,(r=d.values)===null||r===void 0?void 0:r.entities),added:M,removed:w,updated:b})}this.subs.updateInPlace(h=>{h[c]=d,h[c].updatedAt=Date.now()})}clearSubscriptionData(e,i){const o=this.idToHash[e];if(o){delete this.idToHash[e];const r=this.subs.currentValue[o];if(r.state&&this.sendRemove(r.state,i),i?this.subs.unloadKey(o):this.subs.updateInPlace(l=>{delete l[o]}),r)return r}}onStartSyncError(e){const i=gt(e["original-event"].q),o={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa.",status:e.status,type:e.type,hint:e.hint},r=Object.keys(e["original-event"].q)[0];this.notifyCbs(i,{type:Wi.Error,data:{[r]:[]},error:o})}onResyncError(e){const i=e["original-event"]["subscription-id"],o=this.clearSubscriptionData(i,!1);o&&this.initSubscription(o.query,o.hash)}}var it=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})},ZM=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i};const Hn={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},WM=3e4,jM=3e4,ew=200,tw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},gf="_instant_oauth_redirect",yr="currentUser";function nw({transportType:t,appId:e,apiURI:i,wsURI:o,EventSourceImpl:r}){if(!r)return new Ry(`${o}?app_id=${e}`);switch(t){case"ws":return new Ry(`${o}?app_id=${e}`);case"sse":return new BM(r,`${i}/runtime/sse?app_id=${e}`);default:throw new Error("Unknown transport type "+t)}}function iw(){return typeof window<"u"||typeof chrome<"u"}const Dy={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function ow(t,e){var i;const o=typeof t=="string"?JSON.parse(t):t;if(!((i=o?.result)===null||i===void 0)&&i.store){const r=o.result.store;o.result.store=Y0(Object.assign(Object.assign({},r),{useDateObjects:e}))}return o}function sw(t,e){var i;const o=Object.assign({},e);return!((i=e.result)===null||i===void 0)&&i.store&&(o.result=Object.assign(Object.assign({},e.result),{store:F0(e.result.store)})),o}function rw(t,e){switch(t){case"pendingMutations":return new Map(typeof e=="string"?JSON.parse(e):e);default:return e}}function aw(t,e){switch(t){case"pendingMutations":return[...e.entries()];default:return e}}function lw(t,e,i){const o=e?.result,r=i?.result;return o&&!r&&i&&(i.result=o),i||e}function Uy(t){return[...t].sort((e,i)=>{const[o,r]=e,[l,c]=i,d=r.order||0,p=c.order||0;return d==p?o<l?-1:o>l?1:0:d-p})}class uw{constructor(e,i=l_,o=u_,r,l){var c,d,p;if(this._isOnline=!0,this._isShutdown=!1,this.status=Hn.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._transportType="ws",this._wsOk=null,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._inFlightMutationEventIds=new Set,this._onMergeKv=(h,y,_)=>{var T,E;switch(h){case"pendingMutations":{const b=(T=y?.entries())!==null&&T!==void 0?T:[],M=(E=_?.entries())!==null&&E!==void 0?E:[],w=new Map([...b,...M]);return(y?this._rewriteMutationsSorted(this.attrs,y):[]).forEach(([D,U])=>{var J;!(!((J=_?.pendingMutations)===null||J===void 0)&&J.has(D))&&!U["tx-id"]&&this._sendMutation(D,U)}),w}default:return _||y}},this.getPreviousResult=h=>{const y=gt(h);return this.dataForQuery(y)},this.notifyOne=h=>{var y,_;const T=(y=this.queryCbs[h])!==null&&y!==void 0?y:[],E=(_=this._dataForQueryCache[h])===null||_===void 0?void 0:_.data,b=this.dataForQuery(h);b&&(gl(b,E)||T.forEach(M=>M.cb(b)))},this.notifyOneQueryOnce=h=>{var y;const _=(y=this.queryOnceDfds[h])!==null&&y!==void 0?y:[],T=this.dataForQuery(h);_.forEach(E=>{this._completeQueryOnce(E.q,h,E.dfd),E.dfd.resolve(T)})},this.notifyQueryError=(h,y)=>{(this.queryCbs[h]||[]).forEach(T=>T.cb({error:y}))},this.pushTx=h=>{this.config.disableValidation||zM(h,this.config.schema);try{const y=cM({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(_=>{var T;return(T=_?.result)===null||T===void 0?void 0:T.store}),useDateObjects:this.config.useDateObjects},h);return this.pushOps(y)}catch(y){return this.pushOps([],y)}},this.pushOps=(h,y)=>{const _=ut(),T=[...this._pendingMutations().values()],E=Math.max(0,...T.map(w=>w.order||0))+1,b={op:"transact","tx-steps":h,created:Date.now(),error:y,order:E};this._updatePendingMutations(w=>{w.set(_,b)});const M=new _y;return this.mutationDeferredStore.set(_,M),this._sendMutation(_,b),this.notifyAll(),M.promise},this._transportOnOpen=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][open]",y.id,"skip; this is no longer the current transport");return}this._log.info("[socket][open]",this._transport.id),this._setStatus(Hn.OPENED),this.getCurrentUser().then(_=>{var T;this._trySend(ut(),{op:"init","app-id":this.config.appId,"refresh-token":(T=_.user)===null||T===void 0?void 0:T.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(_=>{this._log.error("[socket][error]",y.id,_)})},this._transportOnMessage=h=>{const y=h.target,_=h.message;if(this._transport!==y){this._log.info("[socket][message]",y.id,_,"skip; this is no longer the current transport");return}!this._wsOk&&y.type==="ws"&&(this._wsOk=!0),this._transportType="ws",this._handleReceive(y.id,h.message)},this._transportOnError=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][error]",y.id,"skip; this is no longer the current transport");return}this._log.error("[socket][error]",y.id,h)},this._scheduleReconnect=()=>{!this._wsOk&&this._transportType!=="sse"&&(this._transportType="sse",this._reconnectTimeoutMs=0),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",this._transport.id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this._transportOnClose=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][close]",y.id,"skip; this is no longer the current transport");return}this._setStatus(Hn.CLOSED);for(const _ of Object.values(this._rooms))_.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",y.id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",y.id,"schedule reconnect, ms =",this._reconnectTimeoutMs),this._scheduleReconnect()},this._EventSource=l,this.config=Object.assign(Object.assign({},tw),e),this.queryCacheLimit=(c=this.config.queryCacheLimit)!==null&&c!==void 0?c:10,this._pendingTxCleanupTimeout=(d=this.config.pendingTxCleanupTimeout)!==null&&d!==void 0?d:jM,this._pendingMutationCleanupThreshold=(p=this.config.pendingMutationCleanupThreshold)!==null&&p!==void 0?p:ew,this._log=UM(e.verbose||Md||c_,()=>this._reactorStats()),this.versions=Object.assign(Object.assign({},r||{}),{"@instantdb/core":wd}),this.config.schema&&(this._linkIndex=Sy(this.config.schema)),!!iw()){if(!e.appId)throw new Error("Instant must be initialized with an appId.");if(!as(e.appId))throw new Error(`Instant must be initialized with a valid appId. \`${e.appId}\` is not a valid uuid.`);typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",h=>it(this,void 0,void 0,function*(){var y;try{if(((y=h.data)===null||y===void 0?void 0:y.type)==="auth"){const _=yield this.getCurrentUser();this.updateUser(_.user)}}catch(_){this._log.error("[error] handle broadcast channel",_)}}))),this._initStorage(i),this._syncTable=new XM(this._trySendAuthed.bind(this),new i(this.config.appId,"syncSubs"),{useDateObjects:this.config.useDateObjects},this._log,h=>yl(this.attrs,h,this.config.enableCardinalityInference,this._linkIndex,this.config.useDateObjects)),this._oauthCallbackResponse=this._oauthLoginInit(),this.getCurrentUser(),o.getIsOnline().then(h=>{this._isOnline=h,this._startSocket(),o.listen(y=>{y!==this._isOnline&&(this._log.info("[network] online =",y),this._isOnline=y,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Hn.CLOSED),this._setStatus(Hn.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload))}}updateSchema(e){this.config=Object.assign(Object.assign({},this.config),{schema:e,cardinalityInference:!!e}),this._linkIndex=e?Sy(this.config.schema):null}_reactorStats(){return{inFlightMutationCount:this._inFlightMutationEventIds.size,pendingMutationCount:this._pendingMutations().size,transportType:this._transportType}}_onQuerySubLoaded(e){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyOne(e))}_initStorage(e){this.querySubs=new qf({persister:new e(this.config.appId,"querySubs"),merge:lw,serialize:sw,parse:(i,o)=>ow(o,this.config.useDateObjects),objectSize:i=>{var o,r,l,c;return(c=(l=(r=(o=i.result)===null||o===void 0?void 0:o.store)===null||r===void 0?void 0:r.triples)===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},logger:this._log,preloadEntryCount:10,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}}),this.querySubs.onKeyLoaded=i=>this._onQuerySubLoaded(i),this.kv=new qf({persister:new e(this.config.appId,"kv"),merge:this._onMergeKv,serialize:aw,parse:rw,objectSize:()=>0,logger:this._log,saveThrottleMs:100,idleCallbackMaxWaitMs:100,gc:null}),this.kv.onKeyLoaded=i=>{i==="pendingMutations"&&this.notifyAll()},this.kv.waitForKeyToLoad("pendingMutations"),this.kv.waitForKeyToLoad(yr),this._beforeUnloadCbs.push(()=>{this.kv.flush(),this.querySubs.flush()})}_beforeUnload(){for(const e of this._beforeUnloadCbs)e();this._syncTable.beforeUnload()}_finishTransaction(e,i,o){const r=this.mutationDeferredStore.get(i);this.mutationDeferredStore.delete(i);const l=e!=="error"&&e!=="timeout";if(!r&&!l&&console.error("Mutation failed",Object.assign({status:e,eventId:i},o)),!!r)if(l)r.resolve({status:e,eventId:i});else if(o?.type){const{status:c}=o,d=ZM(o,["status"]);r.reject(new ql({body:d,status:c??0}))}else r.reject(new us(o?.message||"Unknown error",o?.hint))}_setStatus(e,i){this.status=e,this._errorMessage=i,this.notifyConnectionStatusSubs(e)}_flushEnqueuedRoomData(e){var i,o;const r=(o=(i=this._presence[e])===null||i===void 0?void 0:i.result)===null||o===void 0?void 0:o.user,l=this._broadcastQueue[e];if(this._broadcastQueue[e]=[],r&&this._trySetPresence(e,r),l)for(const c of l){const{topic:d,roomType:p,data:h}=c;this._tryBroadcast(e,p,d,h)}}_handleReceive(e,i){var o,r,l,c,d,p;const h=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(Dy[i.op]||this._log.info("[receive]",e,i.op,i),i.op){case"init-ok":{this._setStatus(Hn.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(i.attrs),this._flushPendingMessages(),this._sessionId=i["session-id"];for(const T of Object.keys(this._rooms)){const E=(r=(o=this._presence[T])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.user;this._tryJoinRoom(T,E)}break}case"add-query-exists":{this.notifyOneQueryOnce(gt(i.q));break}case"add-query-ok":{const{q:T,result:E}=i,b=gt(T);if(!this._hasQueryListeners()&&!this.querySubs.currentValue[b])break;const M=(c=(l=E?.[0])===null||l===void 0?void 0:l.data)===null||c===void 0?void 0:c["page-info"],w=(p=(d=E?.[0])===null||d===void 0?void 0:d.data)===null||p===void 0?void 0:p.aggregate,R=Ty(E),D=yl(this.attrs,R,h,this._linkIndex,this.config.useDateObjects);this.querySubs.updateInPlace(U=>{if(!U[b]){this._log.info("Missing value in querySubs",{hash:b,q:T});return}U[b].result={store:D,pageInfo:M,aggregate:w,processedTxId:i["processed-tx-id"]}}),this._cleanupPendingMutationsQueries(),this.notifyOne(b),this.notifyOneQueryOnce(b),this._cleanupPendingMutationsTimeout();break}case"start-sync-ok":{this._syncTable.onStartSyncOk(i);break}case"sync-load-batch":{this._syncTable.onSyncLoadBatch(i);break}case"sync-init-finish":{this._syncTable.onSyncInitFinish(i);break}case"sync-update-triples":{this._syncTable.onSyncUpdateTriples(i);break}case"refresh-ok":{const{computations:T,attrs:E}=i,b=i["processed-tx-id"];E&&this._setAttrs(E),this._cleanupPendingMutationsTimeout();const M=this._rewriteMutations(this.attrs,this._pendingMutations(),b);M!==this._pendingMutations()&&this.kv.updateInPlace(D=>{D.pendingMutations=M});const w=Uy(M.entries()),R=T.map(D=>{var U,J,B,X;const K=D["instaql-query"],ne=D["instaql-result"],j=gt(K),ae=Ty(ne),me=yl(this.attrs,ae,h,this._linkIndex,this.config.useDateObjects),ue=this._applyOptimisticUpdates(me,w,b),be=(J=(U=ne?.[0])===null||U===void 0?void 0:U.data)===null||J===void 0?void 0:J["page-info"],$e=(X=(B=ne?.[0])===null||B===void 0?void 0:B.data)===null||X===void 0?void 0:X.aggregate;return{q:K,hash:j,store:ue,pageInfo:be,aggregate:$e}});R.forEach(({hash:D,q:U,store:J,pageInfo:B,aggregate:X})=>{this.querySubs.updateInPlace(K=>{if(!K[D]){this._log.error("Missing value in querySubs",{hash:D,q:U});return}K[D].result={store:J,pageInfo:B,aggregate:X,processedTxId:b}})}),this._cleanupPendingMutationsQueries(),R.forEach(({hash:D})=>{this.notifyOne(D)});break}case"transact-ok":{const{"client-event-id":T,"tx-id":E}=i;this._inFlightMutationEventIds.delete(T);const M=this._rewriteMutations(this.attrs,this._pendingMutations()).get(T);if(!M)break;this._updatePendingMutations(R=>{R.set(T,Object.assign(Object.assign({},R.get(T)),{"tx-id":E,confirmed:Date.now()}))});const w=M["tx-steps"].filter(([R,...D])=>R==="add-attr").map(([R,D])=>D).concat(Object.values(this.attrs));this._setAttrs(w),this._finishTransaction("synced",T),this._cleanupPendingMutationsTimeout();break}case"patch-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._patchPresencePeers(T,i.edits),this._notifyPresenceSubs(T);break}case"refresh-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._setPresencePeers(T,i.data),this._notifyPresenceSubs(T);break}case"server-broadcast":{const T=i["room-id"],E=i.topic;this._trySetRoomConnected(T,!0),this._notifyBroadcastSubs(T,E,i);break}case"join-room-ok":{const T=i["room-id"];if(!this._rooms[T]){this._roomsPendingLeave[T]&&(this._tryLeaveRoom(T),delete this._roomsPendingLeave[T]);break}this._trySetRoomConnected(T,!0),this._flushEnqueuedRoomData(T);break}case"leave-room-ok":{const T=i["room-id"];this._trySetRoomConnected(T,!1);break}case"join-room-error":const y=i["room-id"],_=this._rooms[y];_&&(_.error=i.error),this._notifyPresenceSubs(y);break;case"error":this._handleReceiveError(i);break;default:this._log.info("Uknown op",i.op,i);break}}_pendingMutations(){var e;return(e=this.kv.currentValue.pendingMutations)!==null&&e!==void 0?e:new Map}_updatePendingMutations(e){this.kv.updateInPlace(i=>{var o;const r=(o=i.pendingMutations)!==null&&o!==void 0?o:new Map;i.pendingMutations=r,e(r)})}_handleMutationError(e,i,o){const r=this._pendingMutations().get(i);if(r&&(e!=="timeout"||!r["tx-id"])){this._updatePendingMutations(c=>(c.delete(i),c)),this._inFlightMutationEventIds.delete(i);const l={message:o.message,hint:o.hint};this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(l),this._finishTransaction(e,i,o)}}_handleReceiveError(e){var i,o,r,l,c,d,p;console.log("error",e);const h=e["client-event-id"];this._inFlightMutationEventIds.delete(h);const y=this._pendingMutations().get(h),_={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(e.hint&&(_.hint=e.hint),y){this._handleMutationError("error",h,e);return}if(!((i=e["original-event"])===null||i===void 0)&&i.hasOwnProperty("q")&&((o=e["original-event"])===null||o===void 0?void 0:o.op)==="add-query"){const b=(r=e["original-event"])===null||r===void 0?void 0:r.q,M=gt(b);this.notifyQueryError(gt(b),_),this.notifyQueryOnceError(b,M,h,_);return}if(((l=e["original-event"])===null||l===void 0?void 0:l.op)==="init"){if(e.type==="record-not-found"&&((c=e.hint)===null||c===void 0?void 0:c["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Hn.ERRORED,_),this.notifyAll();return}if(((d=e["original-event"])===null||d===void 0?void 0:d.op)==="resync-table"){this._syncTable.onResyncError(e);return}if(((p=e["original-event"])===null||p===void 0?void 0:p.op)==="start-sync"){this._syncTable.onStartSyncError(e);return}const E=Object.assign({},e);delete E.message,delete E.hint,console.error(e.message,E),e.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,e.hint)}notifyQueryOnceError(e,i,o,r){var l;const c=(l=this.queryOnceDfds[i])===null||l===void 0?void 0:l.find(d=>d.eventId===o);c&&(c.dfd.reject(r),this._completeQueryOnce(e,i,c.dfd))}_setAttrs(e){this.attrs=e.reduce((i,o)=>(i[o.id]=o,i),{}),this.notifyAttrsSubs()}_startQuerySub(e,i){const o=ut();return this.querySubs.updateInPlace(r=>{r[i]=r[i]||{q:e,result:null,eventId:o},r[i].lastAccessed=Date.now()}),this._trySendAuthed(o,{op:"add-query",q:e}),o}subscribeTable(e,i){return this._syncTable.subscribe(e,i)}subscribeQuery(e,i,o){var r;this.config.disableValidation||Cy(e,this.config.schema),o&&"ruleParams"in o&&(e=Object.assign({$$ruleParams:o.ruleParams},e));const l=gt(e),c=this.getPreviousResult(e);return c&&i(c),this.queryCbs[l]=(r=this.queryCbs[l])!==null&&r!==void 0?r:[],this.queryCbs[l].push({q:e,cb:i}),this._startQuerySub(e,l),()=>{this._unsubQuery(e,l,i)}}queryOnce(e,i){var o;this.config.disableValidation||Cy(e,this.config.schema),i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const r=new _y;if(!this._isOnline)return r.reject(new Error("We can't run `queryOnce`, because the device is offline.")),r.promise;if(!this.querySubs)return r.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),r.promise;const l=gt(e),c=this._startQuerySub(e,l);return this.queryOnceDfds[l]=(o=this.queryOnceDfds[l])!==null&&o!==void 0?o:[],this.queryOnceDfds[l].push({q:e,dfd:r,eventId:c}),setTimeout(()=>r.reject(new Error("Query timed out")),WM),r.promise}_completeQueryOnce(e,i,o){this.queryOnceDfds[i]&&(this.queryOnceDfds[i]=this.queryOnceDfds[i].filter(r=>r.dfd!==o),this._cleanupQuery(e,i))}_unsubQuery(e,i,o){this.queryCbs[i]&&(this.queryCbs[i]=this.queryCbs[i].filter(r=>r.cb!==o),this._cleanupQuery(e,i))}_hasQueryListeners(e){var i,o;return!!(!((i=this.queryCbs[e])===null||i===void 0)&&i.length||!((o=this.queryOnceDfds[e])===null||o===void 0)&&o.length)}_cleanupQuery(e,i){this._hasQueryListeners(i)||(delete this.queryCbs[i],delete this.queryOnceDfds[i],delete this._dataForQueryCache[i],this.querySubs.unloadKey(i),this._trySendAuthed(ut(),{op:"remove-query",q:e}))}_rewriteMutations(e,i,o){if(!e)return i;if(!i)return new Map;const r=y=>{const[_,T,E]=y["forward-identity"];return yt(e,T,E)},l=y=>{const[_,T,E]=y["forward-identity"];return oo(e,T,E)},c={attrIdMap:{},refSwapAttrIds:new Set};let d=!1;const p=(y,_)=>{const T=[];for(const E of y){const[b]=E;if(b==="add-attr"){const[w,R]=E,D=r(R);if(D&&R.id!==D.id){c.attrIdMap[R.id]=D.id,d=!0;continue}if(R["value-type"]==="ref"){const U=l(R);if(U){c.attrIdMap[R.id]=U.id,c.refSwapAttrIds.add(R.id),d=!0;continue}}}if(o&&_&&o>=_&&b==="add-attr"||b==="update-attr"||b==="delete-attr"){d=!0;continue}const M=d?Hb(c,E):E;T.push(M)}return d?T:y},h=new Map;for(const[y,_]of i.entries())h.set(y,Object.assign(Object.assign({},_),{"tx-steps":p(_["tx-steps"],_["tx-id"])}));return d?h:i}_rewriteMutationsSorted(e,i){return Uy(this._rewriteMutations(e,i).entries())}optimisticAttrs(){var e;const i=[...this._pendingMutations().values()].flatMap(d=>d["tx-steps"]),o=new Set(i.filter(([d,p])=>d==="delete-attr").map(([d,p])=>p)),r=[];for(const[d,p]of i)if(d==="add-attr")r.push(p);else if(d==="update-attr"&&p.id&&(!((e=this.attrs)===null||e===void 0)&&e[p.id])){const h=Object.assign(Object.assign({},this.attrs[p.id]),p);r.push(h)}const l=[...Object.values(this.attrs||{}),...r].filter(d=>!o.has(d.id));return Object.fromEntries(l.map(d=>[d.id,d]))}dataForQuery(e){const i=this._errorMessage;if(i)return{error:i};if(!this.querySubs||!this.kv.currentValue.pendingMutations)return;const o=this.querySubs.version(),r=this.querySubs.currentValue,l=this.kv.version(),c=this._pendingMutations(),{q:d,result:p}=r[e]||{};if(!p)return;const h=this._dataForQueryCache[e];if(h&&o===h.querySubVersion&&l===h.pendingMutationsVersion)return h.data;const{store:y,pageInfo:_,aggregate:T,processedTxId:E}=p,b=this._rewriteMutationsSorted(y.attrs,c),M=this._applyOptimisticUpdates(y,b,E),w=o_({store:M,pageInfo:_,aggregate:T},d);return this._dataForQueryCache[e]={querySubVersion:o,pendingMutationsVersion:l,data:w},w}_applyOptimisticUpdates(e,i,o){for(const[r,l]of i)(!l["tx-id"]||o&&l["tx-id"]>o)&&(e=VA(e,l["tx-steps"]));return e}notifyAll(){Object.keys(this.queryCbs).forEach(e=>{this.querySubs.waitForKeyToLoad(e).then(()=>this.notifyOne(e)).catch(()=>this.notifyOne(e))})}loadedNotifyAll(){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyAll()).catch(()=>this.notifyAll())}shutdown(){var e;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(e=this._transport)===null||e===void 0||e.close()}_sendMutation(e,i){if(i.error){this._handleMutationError("error",e,{message:i.error.message});return}if(this.status!==Hn.AUTHENTICATED){this._finishTransaction("enqueued",e);return}const o=Math.max(6e3,Math.min(this._inFlightMutationEventIds.size+1,this._pendingMutations().size+1)*6e3);this._isOnline?(this._trySend(e,i),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",e,{message:"transaction timed out"})},o)):this._finishTransaction("enqueued",e)}_flushPendingMessages(){Object.keys(this.queryCbs).map(r=>this.querySubs.currentValue[r]).filter(r=>r).forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),this._rewriteMutationsSorted(this.attrs,this._pendingMutations()).forEach(([r,l])=>{l["tx-id"]||this._sendMutation(r,l)}),this._syncTable.flushPending()}_cleanupPendingMutationsQueries(){let e=Number.MAX_SAFE_INTEGER;for(const{result:i}of Object.values(this.querySubs.currentValue))i?.processedTxId&&(e=Math.min(e,i?.processedTxId));this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r["tx-id"]&&r["tx-id"]<=e&&i.delete(o)})}_cleanupPendingMutationsTimeout(){if(this._pendingMutations().size<this._pendingMutationCleanupThreshold)return;const e=Date.now();this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r.confirmed&&r.confirmed+this._pendingTxCleanupTimeout<e&&i.delete(o)})}_trySendAuthed(...e){this.status===Hn.AUTHENTICATED&&this._trySend(...e)}_trySend(e,i,o){if(this._transport.isOpen()){switch(Dy[i.op]||this._log.info("[send]",this._transport.id,i.op,i),i.op){case"transact":{this._inFlightMutationEventIds.add(e);break}case"init":this._inFlightMutationEventIds.clear()}this._transport.send(Object.assign({"client-event-id":e},i))}}_startSocket(){if(this._wsOk=null,this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._transport&&this._transport.isConnecting()){this._log.info("[socket][start]",this._transport.id,"maintained as current transport, we were still in a connecting state");return}const e=this._transport;this._transport=nw({transportType:this._transportType,appId:this.config.appId,apiURI:this.config.apiURI,wsURI:this.config.websocketURI,EventSourceImpl:this._EventSource}),this._transport.onopen=this._transportOnOpen,this._transport.onmessage=this._transportOnMessage,this._transport.onclose=this._transportOnClose,this._transport.onerror=this._transportOnError,this._log.info("[socket][start]",this._transport.id),e?.isOpen()&&(this._log.info("[socket][start]",this._transport.id,"close previous transport id = ",e.id),e.close())}getLocalId(e){return it(this,void 0,void 0,function*(){const i=`localToken_${e}`;if(this.kv.currentValue[i])return this.kv.currentValue[i];const o=yield this.kv.waitForKeyToLoad(i);if(o)return o;const r=ut();return this.kv.updateInPlace(l=>{l[i]||(l[i]=r)}),yield this.kv.waitForKeyToLoad(i)})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const e=new URL(window.location.href);if(e.searchParams.get(gf)){const i=e.toString();e.searchParams.delete(gf),e.searchParams.delete("code"),e.searchParams.delete("error");const o=e.pathname+(e.searchParams.size?"?"+e.searchParams:"")+e.hash;if(history.replaceState(history.state,"",o),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let r=!1;const l=c=>{var d;r||(r=!0,navigation.removeEventListener("navigate",l),!c.userInitiated&&c.navigationType==="replace"&&((d=c.destination)===null||d===void 0?void 0:d.url)===i&&history.replaceState(history.state,"",o))};navigation.addEventListener("navigate",l)}}}_oauthLoginInit(){return it(this,void 0,void 0,function*(){var e,i,o,r;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const l=new URLSearchParams(window.location.search);if(!l.get(gf))return null;const c=l.get("error");if(c)return this._replaceUrlAfterOAuth(),{error:{message:c}};const d=l.get("code");if(!d)return null;this._replaceUrlAfterOAuth();try{const p=yield this._getCurrentUser(),h=p?.type==="guest",{user:y}=yield yy({apiURI:this.config.apiURI,appId:this.config.appId,code:d,refreshToken:h?p.refresh_token:void 0});return this.setCurrentUser(y),null}catch(p){return((e=p?.body)===null||e===void 0?void 0:e.type)==="record-not-found"&&((o=(i=p?.body)===null||i===void 0?void 0:i.hint)===null||o===void 0?void 0:o["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((r=p?.body)===null||r===void 0?void 0:r.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return it(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(e){return this.mutationErrorCbs.push(e),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(i=>i!==e)}}subscribeAuth(e){this.authCbs.push(e);const i=this._currentUserCached;i.isLoading||e(this._currentUserCached);let o=!1;return this.getCurrentUser().then(r=>{o||gl(r,i)||e(r)}),()=>{o=!0,this.authCbs=this.authCbs.filter(r=>r!==e)}}getAuth(){return it(this,void 0,void 0,function*(){const{user:e,error:i}=yield this.getCurrentUser();if(i)throw new us("Could not get current user: "+i.message);return e})}subscribeConnectionStatus(e){return this.connectionStatusCbs.push(e),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(i=>i!==e)}}subscribeAttrs(e){return this.attrsCbs.push(e),this.attrs&&e(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(i=>i!==e)}}notifyAuthSubs(e){this.authCbs.forEach(i=>i(e))}notifyMutationErrorSubs(e){this.mutationErrorCbs.forEach(i=>i(e))}notifyAttrsSubs(){if(!this.attrs)return;const e=this.optimisticAttrs();this.attrsCbs.forEach(i=>i(e))}notifyConnectionStatusSubs(e){this.connectionStatusCbs.forEach(i=>i(e))}setCurrentUser(e){return it(this,void 0,void 0,function*(){this.kv.updateInPlace(i=>{i[yr]=e}),yield this.kv.waitForKeyToLoad(yr)})}getCurrentUserCached(){return this._currentUserCached}_getCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(yr);return typeof e=="string"?JSON.parse(e):e})}getCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this._waitForOAuthCallbackResponse();if(e?.error){const i={error:e.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}try{const o={user:yield this._getCurrentUser(),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}catch(i){return{user:void 0,isLoading:!1,error:{message:i?.message||"Error loading user"}}}})}_hasCurrentUser(){return it(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(yr);return typeof e=="string"?JSON.parse(e)!=null:e!=null})}changeCurrentUser(e){return it(this,void 0,void 0,function*(){var i;const{user:o}=yield this.getCurrentUser();if(!gl(o,e)){yield this.setCurrentUser(e),this.updateUser(e);try{(i=this._broadcastChannel)===null||i===void 0||i.postMessage({type:"auth"})}catch(r){console.error("Error posting message to broadcast channel",r)}}})}updateUser(e){const i={error:void 0,user:e};this._currentUserCached=Object.assign({isLoading:!1},i),this._dataForQueryCache={},this.querySubs.updateInPlace(o=>{Object.keys(o).forEach(r=>{delete o[r].result})}),this._reconnectTimeoutMs=0,this._transport.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(i)}sendMagicCode({email:e}){return TM({apiURI:this.config.apiURI,appId:this.config.appId,email:e})}signInWithMagicCode(e){return it(this,arguments,void 0,function*({email:i,code:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield SM({apiURI:this.config.apiURI,appId:this.config.appId,email:i,code:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}signInWithCustomToken(e){return it(this,void 0,void 0,function*(){const i=yield EM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:e});return yield this.changeCurrentUser(i.user),i})}signInAsGuest(){return it(this,void 0,void 0,function*(){const e=yield CM({apiURI:this.config.apiURI,appId:this.config.appId});return yield this.changeCurrentUser(e.user),e})}potentiallyInvalidateToken(e,i){var o;const r=(o=e?.user)===null||o===void 0?void 0:o.refresh_token;if(!r)return;if(i.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}bM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:r}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(c=>{})}signOut(e){return it(this,void 0,void 0,function*(){const i=yield this.getCurrentUser();this.potentiallyInvalidateToken(i,e),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:e,redirectURL:i}){const{apiURI:o,appId:r}=this.config;return`${o}/runtime/oauth/start?app_id=${r}&client_name=${e}&redirect_uri=${i}`}exchangeCodeForToken(e){return it(this,arguments,void 0,function*({code:i,codeVerifier:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",d=yield yy({apiURI:this.config.apiURI,appId:this.config.appId,code:i,codeVerifier:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(d.user),d})}issuerURI(){const{apiURI:e,appId:i}=this.config;return`${e}/runtime/${i}`}signInWithIdToken(e){return it(this,arguments,void 0,function*({idToken:i,clientName:o,nonce:r}){var l;const c=yield this.getCurrentUser(),d=(l=c?.user)===null||l===void 0?void 0:l.refresh_token,p=yield AM({apiURI:this.config.apiURI,appId:this.config.appId,idToken:i,clientName:o,nonce:r,refreshToken:d});return yield this.changeCurrentUser(p.user),p})}joinRoom(e,i){let o=!1;this._rooms[e]||(o=!0,this._rooms[e]={isConnected:!1,error:void 0}),this._presence[e]=this._presence[e]||{};const r=this._presence[e].result;return i&&!r&&(this._presence[e].result=this._presence[e].result||{},this._presence[e].result.user=i,this._notifyPresenceSubs(e)),o&&this._tryJoinRoom(e,i),()=>{this._cleanupRoom(e)}}_cleanupRoom(e){var i,o,r,l;if(!(!((o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0)&&o.length)&&!Object.keys((r=this._broadcastSubs[e])!==null&&r!==void 0?r:{}).length){const c=(l=this._rooms[e])===null||l===void 0?void 0:l.isConnected;delete this._rooms[e],delete this._presence[e],delete this._broadcastSubs[e],c?this._tryLeaveRoom(e):this._roomsPendingLeave[e]=!0}}getPresence(e,i,o={}){const r=this._rooms[i],l=this._presence[i];return!r||!l||!l.result?null:Object.assign(Object.assign({},IM(l.result,o,this._sessionId)),{isLoading:!r.isConnected,error:r.error})}publishPresence(e,i,o){const r=this._rooms[i],l=this._presence[i];if(!r||!l)return;l.result=l.result||{};const c=Object.assign(Object.assign({},l.result.user),o);l.result.user=c,r.isConnected&&(this._trySetPresence(i,c),this._notifyPresenceSubs(i))}_trySetPresence(e,i){this._trySendAuthed(ut(),{op:"set-presence","room-id":e,data:i})}_tryJoinRoom(e,i){this._trySendAuthed(ut(),{op:"join-room","room-id":e,data:i}),delete this._roomsPendingLeave[e]}_tryLeaveRoom(e){this._trySendAuthed(ut(),{op:"leave-room","room-id":e})}_trySetRoomConnected(e,i){const o=this._rooms[e];o&&(o.isConnected=i)}subscribePresence(e,i,o,r){const l=this.joinRoom(i,o.initialPresence||o.initialData),c=Object.assign(Object.assign({},o),{roomId:i,cb:r,prev:null});return this._presence[i]=this._presence[i]||{},this._presence[i].handlers=this._presence[i].handlers||[],this._presence[i].handlers.push(c),this._notifyPresenceSub(i,c),()=>{var d,p,h;this._presence[i].handlers=(h=(p=(d=this._presence[i])===null||d===void 0?void 0:d.handlers)===null||p===void 0?void 0:p.filter(y=>y!==c))!==null&&h!==void 0?h:[],l()}}_notifyPresenceSubs(e){var i,o;(o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0||o.forEach(r=>{this._notifyPresenceSub(e,r)})}_notifyPresenceSub(e,i){const o=this.getPresence("",e,i);o&&(i.prev&&!DM(o,i.prev)||(i.prev=o,i.cb(o)))}_patchPresencePeers(e,i){var o,r,l;const c=((r=(o=this._presence[e])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.peers)||{};let d=Object.fromEntries(Object.entries(c).map(([h,y])=>[h,{data:y}]));(l=this._presence[e])===null||l===void 0||l.result;const p=Al(d,h=>{for(let[y,_,T]of i)switch(_){case"+":cA(h,y,T);break;case"r":oy(h,y,T);break;case"-":V0(h,y);break}delete h[this._sessionId]});this._setPresencePeers(e,p)}_setPresencePeers(e,i){const o=Object.assign({},i);delete o[this._sessionId];const r=Object.fromEntries(Object.entries(o).map(([l,c])=>[l,c.data]));this._presence=Al(this._presence,l=>{oy(l,[e,"result","peers"],r)})}publishTopic({roomType:e,roomId:i,topic:o,data:r}){var l;const c=this._rooms[i];if(c){if(!c.isConnected){this._broadcastQueue[i]=(l=this._broadcastQueue[i])!==null&&l!==void 0?l:[],this._broadcastQueue[i].push({topic:o,roomType:e,data:r});return}this._tryBroadcast(i,e,o,r)}}_tryBroadcast(e,i,o,r){this._trySendAuthed(ut(),{op:"client-broadcast","room-id":e,roomType:i,topic:o,data:r})}subscribeTopic(e,i,o){const r=this.joinRoom(e);return this._broadcastSubs[e]=this._broadcastSubs[e]||{},this._broadcastSubs[e][i]=this._broadcastSubs[e][i]||[],this._broadcastSubs[e][i].push(o),this._presence[e]=this._presence[e]||{},()=>{this._broadcastSubs[e][i]=this._broadcastSubs[e][i].filter(l=>l!==o),this._broadcastSubs[e][i].length||delete this._broadcastSubs[e][i],r()}}_notifyBroadcastSubs(e,i,o){var r,l,c;(c=(l=(r=this._broadcastSubs)===null||r===void 0?void 0:r[e])===null||l===void 0?void 0:l[i])===null||c===void 0||c.forEach(d=>{var p,h,y,_,T,E;const b=(p=o.data)===null||p===void 0?void 0:p.data,M=o.data["peer-id"]===this._sessionId?(y=(h=this._presence[e])===null||h===void 0?void 0:h.result)===null||y===void 0?void 0:y.user:(E=(T=(_=this._presence[e])===null||_===void 0?void 0:_.result)===null||T===void 0?void 0:T.peers)===null||E===void 0?void 0:E[o.data["peer-id"]];return d(b,M)})}uploadFile(e,i,o){return it(this,void 0,void 0,function*(){var r;const l=yield this.getCurrentUser(),c=(r=l?.user)===null||r===void 0?void 0:r.refresh_token;return MM(Object.assign(Object.assign({},o),{apiURI:this.config.apiURI,appId:this.config.appId,path:e,file:i,refreshToken:c}))})}deleteFile(e){return it(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield wM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}upload(e,i){return it(this,void 0,void 0,function*(){var o;const r=yield this.getCurrentUser(),l=(o=r?.user)===null||o===void 0?void 0:o.refresh_token,c=e||i.name,d=yield RM({apiURI:this.config.apiURI,appId:this.config.appId,fileName:c,refreshToken:l});return yield NM(d,i)})}getDownloadUrl(e){return it(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield xM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}}let fl;function cw(t,e){fl?.dispose();const i=gw(e),o=hw(e,d),r=dw(fw(t));function l(y){var _;y.source===r.element.contentWindow&&((_=y.data)===null||_===void 0?void 0:_.type)==="close"&&i.isVisible()&&d()}function c(y){const _=y.shiftKey&&y.ctrlKey&&y.key==="0",T=y.key==="Escape"||y.key==="Esc";(_||T&&i.isVisible())&&d()}function d(){i.isVisible()?i.element.style.display="none":(i.element.style.display="block",i.element.contains(r.element)||i.element.appendChild(r.element))}function p(){i.element.remove(),o.element.remove(),removeEventListener("keydown",c),removeEventListener("message",l)}function h(){document.body.appendChild(i.element),document.body.appendChild(o.element),addEventListener("keydown",c),addEventListener("message",l),fl={dispose:p}}return h()}function fw(t){return`${Md||f_?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${t}`}function dw(t){const e=document.createElement("iframe");return e.src=t,e.className="instant-devtool-iframe",Object.assign(e.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:e}}function hw(t,e){const i=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,o=document.createElement("button");return o.innerHTML=i,o.className="instant-devtool-toggler",Object.assign(o.style,Object.assign(Object.assign({position:"fixed"},pw(t.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),o.addEventListener("click",e),{element:o}}function pw(t){switch(t){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function mw(t){switch(t){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function gw(t){const e=document.createElement("div");Object.assign(e.style,Object.assign(Object.assign({position:"fixed"},mw(t.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),e.style.display="none",e.className="instant-devtool-container";function i(){return e.style.display!=="none"}return{element:e,isVisible:i}}const yw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function vw(){var t;return globalThis.__instantDbSchemaHashStore=(t=globalThis.__instantDbSchemaHashStore)!==null&&t!==void 0?t:new WeakMap,globalThis.__instantDbSchemaHashStore}function _w(){var t;return globalThis.__instantDbStore=(t=globalThis.__instantDbStore)!==null&&t!==void 0?t:{},globalThis.__instantDbStore}function Gf(t){const e=t.__adminToken;return t.appId+"_"+(t.websocketURI||"default_ws_uri")+"_"+(t.apiURI||"default_api_uri")+"_"+(e||"client_only")+"_"+t.useDateObjects}const Hf=_w(),Py=vw();class Tw{constructor(e){this.db=e,this.sendMagicCode=i=>this.db.sendMagicCode(i),this.signInWithMagicCode=i=>this.db.signInWithMagicCode(i),this.signInWithToken=i=>this.db.signInWithCustomToken(i),this.signInAsGuest=()=>this.db.signInAsGuest(),this.createAuthorizationURL=i=>this.db.createAuthorizationURL(i),this.signInWithIdToken=i=>this.db.signInWithIdToken(i),this.exchangeOAuthCode=i=>this.db.exchangeCodeForToken(i),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(i={invalidateToken:!0})=>this.db.signOut(i)}}class Sw{constructor(e){this.db=e,this.uploadFile=(i,o,r={})=>this.db.uploadFile(i,o,r),this.delete=i=>this.db.deleteFile(i),this.upload=(i,o)=>this.db.upload(i,o),this.put=this.upload,this.getDownloadUrl=i=>this.db.getDownloadUrl(i)}}function Ew(t){return JSON.parse(JSON.stringify(t))}class Cw{constructor(e){this.tx=bd(),this._reactor=e,this.auth=new Tw(this._reactor),this.storage=new Sw(this._reactor)}transact(e){return this._reactor.pushTx(e)}getLocalId(e){return this._reactor.getLocalId(e)}subscribeQuery(e,i,o){return this._reactor.subscribeQuery(e,i,o)}subscribeAuth(e){return this._reactor.subscribeAuth(e)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(e){return this._reactor.subscribeConnectionStatus(e)}joinRoom(e="_defaultRoomType",i="_defaultRoomId",o){return{leaveRoom:this._reactor.joinRoom(i,o?.initialPresence),subscribeTopic:(l,c)=>this._reactor.subscribeTopic(i,l,c),subscribePresence:(l,c)=>this._reactor.subscribePresence(e,i,l,c),publishTopic:(l,c)=>this._reactor.publishTopic({roomType:e,roomId:i,topic:l,data:c}),publishPresence:l=>this._reactor.publishPresence(e,i,l),getPresence:l=>this._reactor.getPresence(e,i,l)}}shutdown(){delete Hf[Gf(this._reactor.config)],this._reactor.shutdown()}queryOnce(e,i){return this._reactor.queryOnce(e,i)}_syncTableExperimental(e,i){return this._reactor.subscribeTable(e,i)}}function Ly(t){if(!t)return"0";const e=Py.get(t);if(e)return e;const i=gt(t);return Py.set(t,i),i}function Aw(t,e){return Ly(t._reactor.config.schema)!==Ly(e)}function bw(t,e,i,o,r){const l=Hf[Gf(t)];if(l)return Aw(l,t.schema)&&l._reactor.updateSchema(t.schema),l;const c=new uw(Object.assign(Object.assign(Object.assign({},yw),t),{cardinalityInference:!!t.schema}),e||l_,i||u_,Object.assign(Object.assign({},o||{}),{"@instantdb/core":wd}),r),d=new Cw(c);return Hf[Gf(t)]=d,Mw(t.appId,t.devtool),d}function Mw(t,e){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof e=="boolean"&&!e)return;const i=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof e=="object"?e:{});i.allowedHosts.includes(window.location.hostname)&&cw(t,i)}const ww={isLoading:!0,data:void 0,pageInfo:void 0,error:void 0};function ky(t){return Object.assign({isLoading:!t,data:void 0,pageInfo:void 0,error:void 0},t||{})}function Rw(t,e,i){e&&i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const o=e?Ew(e):null,r=gt(o),l=P.useRef(ky(t._reactor.getPreviousResult(o))),c=P.useCallback(p=>(l.current=ky(t._reactor.getPreviousResult(o)),o?t.subscribeQuery(o,y=>{l.current=Object.assign({isLoading:!y,data:void 0,pageInfo:void 0,error:void 0},y),p()}):()=>{}),[r]);return{state:P.useSyncExternalStore(c,()=>l.current,()=>ww),query:o}}function Nw(){const t=P.useRef(null);P.useEffect(()=>{i()},[]);function e(o,r){clearTimeout(t.current),t.current=setTimeout(r,o)}function i(){clearTimeout(t.current)}return{set:e,clear:i}}const xw=1e3;function Iw(t,e,i){const o=P.useRef(i);o.current=i,P.useEffect(()=>t.core._reactor.subscribeTopic(t.id,e,(l,c)=>{o.current(l,c)}),[t.id,e])}function Dw(t,e){return P.useEffect(()=>t.core._reactor.joinRoom(t.id),[t.id]),P.useCallback(o=>{t.core._reactor.publishTopic({roomType:t.type,roomId:t.id,topic:e,data:o})},[t.id,e])}function Uw(t,e={}){var i,o;const[r,l]=P.useState(()=>{var p;return(p=t.core._reactor.getPresence(t.type,t.id,e))!==null&&p!==void 0?p:{peers:{},isLoading:!0}});P.useEffect(()=>t.core._reactor.subscribePresence(t.type,t.id,e,h=>{l(h)}),[t.id,e.user,(i=e.peers)===null||i===void 0?void 0:i.join(),(o=e.keys)===null||o===void 0?void 0:o.join()]);const c=P.useCallback(p=>{t.core._reactor.publishPresence(t.type,t.id,p)},[t.type,t.id]);return P.useMemo(()=>Object.assign(Object.assign({},r),{publishPresence:c}),[r,c])}function Pw(t,e,i){P.useEffect(()=>t.core._reactor.joinRoom(t.id,e),[t.id]),P.useEffect(()=>t.core._reactor.publishPresence(t.type,t.id,e),[t.type,t.id,i??JSON.stringify(e)])}function Lw(t,e,i={}){const o=Nw(),r=ji.usePresence(t,{keys:[e]}),l=P.useMemo(()=>{var y;const _=t._core._reactor.getPresence(t.type,t.id);return i?.writeOnly?[]:Object.values((y=_?.peers)!==null&&y!==void 0?y:{}).filter(T=>T[e]===!0)},[i?.writeOnly,r]),c=P.useCallback(y=>{var _;t.core._reactor.publishPresence(t.type,t.id,{[e]:y}),y&&(i?.timeout===null||i?.timeout===0||o.set((_=i?.timeout)!==null&&_!==void 0?_:xw,()=>{t.core._reactor.publishPresence(t.type,t.id,{[e]:null})}))},[t.type,t.id,e,i?.timeout,o]),d=P.useCallback(y=>{const T=!(i?.stopOnEnter&&y.key==="Enter");c(T)},[i.stopOnEnter,c]),p=P.useCallback(()=>{c(!1)},[c]),h=P.useMemo(()=>({onKeyDown:d,onBlur:p}),[d,p]);return{active:l,setActive:c,inputProps:h}}const ji={useTopicEffect:Iw,usePublishTopic:Dw,usePresence:Uw,useSyncPresence:Pw,useTypingIndicator:Lw};class kw{constructor(e,i,o){this.useTopicEffect=(r,l)=>{ji.useTopicEffect(this,r,l)},this.usePublishTopic=r=>ji.usePublishTopic(this,r),this.usePresence=(r={})=>ji.usePresence(this,r),this.useSyncPresence=(r,l)=>ji.useSyncPresence(this,r,l),this.useTypingIndicator=(r,l={})=>ji.useTypingIndicator(this,r,l),this.core=e,this._core=this.core,this.type=i,this.id=o}}var Ow=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function d(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(d,p)}h((o=o.apply(t,e||[])).next())})};const qw={isLoading:!0,user:void 0,error:void 0};class Gw{constructor(e,i){this.tx=bd(),this.getLocalId=o=>this.core.getLocalId(o),this.useLocalId=o=>{const[r,l]=P.useState(null);return P.useEffect(()=>{Ow(this,void 0,void 0,function*(){const d=yield this.getLocalId(o);l(d)})},[o]),r},this.rooms=ji,this.transact=o=>this.core.transact(o),this.useQuery=(o,r)=>Rw(this.core,o,r).state,this.useAuth=()=>{const o=P.useRef(this.core._reactor._currentUserCached),r=P.useCallback(c=>this.core.subscribeAuth(p=>{o.current=Object.assign({isLoading:!1},p),c()}),[]);return P.useSyncExternalStore(r,()=>o.current,()=>qw)},this.useUser=()=>{const{user:o}=this.useAuth();if(!o)throw new us("useUser must be used within an auth-protected route");return o},this.useConnectionStatus=()=>{const o=P.useRef(this.core._reactor.status),r=P.useCallback(c=>this.core.subscribeConnectionStatus(p=>{p!==o.current&&(o.current=p,c())}),[]);return P.useSyncExternalStore(r,()=>o.current,()=>"connecting")},this.queryOnce=(o,r)=>this.core.queryOnce(o,r),this.SignedIn=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||!r.user?null:C.jsx(C.Fragment,{children:o})},this.SignedOut=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||r.user?null:C.jsx(C.Fragment,{children:o})},this.core=bw(e,this.constructor.Storage,this.constructor.NetworkListener,i,this.constructor.EventSourceImpl),this._core=this.core,this.auth=this.core.auth,this.storage=this.core.storage}room(e="_defaultRoomType",i="_defaultRoomId"){return new kw(this.core,e,i)}getAuth(){return this.core.getAuth()}}class Oy extends Error{constructor(e,i){super(e),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function yf(t){}function Hw(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=yf,onError:i=yf,onRetry:o=yf,onComment:r}=t;let l="",c=!0,d,p="",h="";function y(M){const w=c?M.replace(/^\xEF\xBB\xBF/,""):M,[R,D]=Vw(`${l}${w}`);for(const U of R)_(U);l=D,c=!1}function _(M){if(M===""){E();return}if(M.startsWith(":")){r&&r(M.slice(M.startsWith(": ")?2:1));return}const w=M.indexOf(":");if(w!==-1){const R=M.slice(0,w),D=M[w+1]===" "?2:1,U=M.slice(w+D);T(R,U,M);return}T(M,"",M)}function T(M,w,R){switch(M){case"event":h=w;break;case"data":p=`${p}${w}
`;break;case"id":d=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?o(parseInt(w,10)):i(new Oy(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:R}));break;default:i(new Oy(`Unknown field "${M.length>20?`${M.slice(0,20)}`:M}"`,{type:"unknown-field",field:M,value:w,line:R}));break}}function E(){p.length>0&&e({id:d,event:h||void 0,data:p.endsWith(`
`)?p.slice(0,-1):p}),d=void 0,p="",h=""}function b(M={}){l&&M.consume&&_(l),c=!0,d=void 0,p="",h="",l=""}return{feed:y,reset:b}}function Vw(t){const e=[];let i="",o=0;for(;o<t.length;){const r=t.indexOf("\r",o),l=t.indexOf(`
`,o);let c=-1;if(r!==-1&&l!==-1?c=Math.min(r,l):r!==-1?r===t.length-1?c=-1:c=r:l!==-1&&(c=l),c===-1){i=t.slice(o);break}else{const d=t.slice(o,c);e.push(d),o=c+1,t[o-1]==="\r"&&t[o]===`
`&&o++}}return[e,i]}class qy extends Event{constructor(e,i){var o,r;super(e),this.code=(o=i?.code)!=null?o:void 0,this.message=(r=i?.message)!=null?r:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,i,o){return o(Gy(this),i)}[Symbol.for("Deno.customInspect")](e,i){return e(Gy(this),i)}}function zw(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function Vf(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Vf).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Vf(t.cause)}`:t.message:`${t}`}function Gy(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var __=t=>{throw TypeError(t)},Rd=(t,e,i)=>e.has(t)||__("Cannot "+i),_e=(t,e,i)=>(Rd(t,e,"read from private field"),i?i.call(t):e.get(t)),st=(t,e,i)=>e.has(t)?__("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Fe=(t,e,i,o)=>(Rd(t,e,"write to private field"),e.set(t,i),i),zn=(t,e,i)=>(Rd(t,e,"access private method"),i),It,eo,Zo,vl,wl,Rr,es,Nr,Mi,Wo,is,jo,Cr,un,zf,Bf,Ff,Hy,Yf,$f,Ar,Jf,Kf;class xr extends EventTarget{constructor(e,i){var o,r;super(),st(this,un),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,st(this,It),st(this,eo),st(this,Zo),st(this,vl),st(this,wl),st(this,Rr),st(this,es),st(this,Nr,null),st(this,Mi),st(this,Wo),st(this,is,null),st(this,jo,null),st(this,Cr,null),st(this,Bf,async l=>{var c;_e(this,Wo).reset();const{body:d,redirected:p,status:h,headers:y}=l;if(h===204){zn(this,un,Ar).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(p?Fe(this,Zo,new URL(l.url)):Fe(this,Zo,void 0),h!==200){zn(this,un,Ar).call(this,`Non-200 status code (${h})`,h);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){zn(this,un,Ar).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(_e(this,It)===this.CLOSED)return;Fe(this,It,this.OPEN);const _=new Event("open");if((c=_e(this,Cr))==null||c.call(this,_),this.dispatchEvent(_),typeof d!="object"||!d||!("getReader"in d)){zn(this,un,Ar).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const T=new TextDecoder,E=d.getReader();let b=!0;do{const{done:M,value:w}=await E.read();w&&_e(this,Wo).feed(T.decode(w,{stream:!M})),M&&(b=!1,_e(this,Wo).reset(),zn(this,un,Jf).call(this))}while(b)}),st(this,Ff,l=>{Fe(this,Mi,void 0),!(l.name==="AbortError"||l.type==="aborted")&&zn(this,un,Jf).call(this,Vf(l))}),st(this,Yf,l=>{typeof l.id=="string"&&Fe(this,Nr,l.id);const c=new MessageEvent(l.event||"message",{data:l.data,origin:_e(this,Zo)?_e(this,Zo).origin:_e(this,eo).origin,lastEventId:l.id||""});_e(this,jo)&&(!l.event||l.event==="message")&&_e(this,jo).call(this,c),this.dispatchEvent(c)}),st(this,$f,l=>{Fe(this,Rr,l)}),st(this,Kf,()=>{Fe(this,es,void 0),_e(this,It)===this.CONNECTING&&zn(this,un,zf).call(this)});try{if(e instanceof URL)Fe(this,eo,e);else if(typeof e=="string")Fe(this,eo,new URL(e,Bw()));else throw new Error("Invalid URL")}catch{throw zw("An invalid or illegal string was specified")}Fe(this,Wo,Hw({onEvent:_e(this,Yf),onRetry:_e(this,$f)})),Fe(this,It,this.CONNECTING),Fe(this,Rr,3e3),Fe(this,wl,(o=i?.fetch)!=null?o:globalThis.fetch),Fe(this,vl,(r=i?.withCredentials)!=null?r:!1),zn(this,un,zf).call(this)}get readyState(){return _e(this,It)}get url(){return _e(this,eo).href}get withCredentials(){return _e(this,vl)}get onerror(){return _e(this,is)}set onerror(e){Fe(this,is,e)}get onmessage(){return _e(this,jo)}set onmessage(e){Fe(this,jo,e)}get onopen(){return _e(this,Cr)}set onopen(e){Fe(this,Cr,e)}addEventListener(e,i,o){const r=i;super.addEventListener(e,r,o)}removeEventListener(e,i,o){const r=i;super.removeEventListener(e,r,o)}close(){_e(this,es)&&clearTimeout(_e(this,es)),_e(this,It)!==this.CLOSED&&(_e(this,Mi)&&_e(this,Mi).abort(),Fe(this,It,this.CLOSED),Fe(this,Mi,void 0))}}It=new WeakMap,eo=new WeakMap,Zo=new WeakMap,vl=new WeakMap,wl=new WeakMap,Rr=new WeakMap,es=new WeakMap,Nr=new WeakMap,Mi=new WeakMap,Wo=new WeakMap,is=new WeakMap,jo=new WeakMap,Cr=new WeakMap,un=new WeakSet,zf=function(){Fe(this,It,this.CONNECTING),Fe(this,Mi,new AbortController),_e(this,wl)(_e(this,eo),zn(this,un,Hy).call(this)).then(_e(this,Bf)).catch(_e(this,Ff))},Bf=new WeakMap,Ff=new WeakMap,Hy=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",..._e(this,Nr)?{"Last-Event-ID":_e(this,Nr)}:void 0},cache:"no-store",signal:(t=_e(this,Mi))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},Yf=new WeakMap,$f=new WeakMap,Ar=function(t,e){var i;_e(this,It)!==this.CLOSED&&Fe(this,It,this.CLOSED);const o=new qy("error",{code:e,message:t});(i=_e(this,is))==null||i.call(this,o),this.dispatchEvent(o)},Jf=function(t,e){var i;if(_e(this,It)===this.CLOSED)return;Fe(this,It,this.CONNECTING);const o=new qy("error",{code:e,message:t});(i=_e(this,is))==null||i.call(this,o),this.dispatchEvent(o),Fe(this,es,setTimeout(_e(this,Kf),_e(this,Rr)))},Kf=new WeakMap,xr.CONNECTING=0,xr.OPEN=1,xr.CLOSED=2;Object.defineProperty(xr,Symbol.for("eventsource.supports-fetch-override"),{value:!0,writable:!1,configurable:!1,enumerable:!1});function Bw(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}class T_ extends Gw{}T_.EventSourceImpl=xr;function Fw(t){return new T_(t,{"@instantdb/react":wd})}const Yw="fb13a3d0-35ab-493b-9aa6-64a77363fe93",Ie=Fw({appId:Yw}),Qf={calories_min:1600,calories_max:2e3,purines_min:0,purines_max:400,protein_target:50,carbs_target:250,fat_target:65,fiber_target:25,sodium_max:2300,sugar_max:50,hydration_target:2e3},$w={calories:{icon:"",unit:"kcal",label:"Calories"},purines:{icon:"",unit:"mg",label:"Purines"},protein:{icon:"",unit:"g",label:"Protein"},carbs:{icon:"",unit:"g",label:"Carbs"},fat:{icon:"",unit:"g",label:"Fat"},fiber:{icon:"",unit:"g",label:"Fiber"},sodium:{icon:"",unit:"mg",label:"Sodium"},sugar:{icon:"",unit:"g",label:"Sugar"},hydration:{icon:"",unit:"ml",label:"Water"}};function Jw(t,e,i,o){const r=10*t+6.25*e-5*i;return o==="male"?r+5:r-161}const Kw={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};function Qw(t,e,i,o,r){const l=Jw(t,e,i,o),c=Kw[r]||1.55;return Math.round(l*c)}function Xw(t=[]){return t.includes("kidney_disease")?150:t.includes("gout")?200:400}function Zw(t,e){const i=t*30;return Math.round(i+({sedentary:0,light:200,moderate:400,active:600,very_active:800}[e]||0))}function Ww(t){const{weight_kg:e,height_cm:i,age:o,sex:r,activity_level:l,dietary_conditions:c=[]}=t,d=Qw(e,i,o,r,l),p=Xw(c),h=Zw(e,l),_=Math.round(e*({sedentary:.8,light:.9,moderate:1,active:1.2,very_active:1.4}[l]||1));let T=.5;c.includes("diabetes")&&(T=.4);const E=Math.round(d*T/4),b=Math.round(d*.275/9);let M=r==="female"?25:38;o>50&&(M=r==="female"?21:30);let w=2300;c.includes("kidney_disease")&&(w=1500);let R=r==="female"?25:36;return(c.includes("diabetes")||c.includes("gout"))&&(R=Math.round(R*.6)),{calories_min:Math.round(d*.85),calories_max:d,purines_min:0,purines_max:p,protein_target:_,carbs_target:E,fat_target:b,fiber_target:M,sodium_max:w,sugar_max:R,hydration_target:h}}function jw(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`}function Vy(){return jw(new Date)}function eR(t){t=t.replace(/^#/,"");const e=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255,r=Math.max(e,i,o),l=Math.min(e,i,o);let c,d,p=(r+l)/2;if(r===l)c=d=0;else{const h=r-l;switch(d=p>.5?h/(2-r-l):h/(r+l),r){case e:c=((i-o)/h+(i<o?6:0))/6;break;case i:c=((o-e)/h+2)/6;break;case o:c=((e-i)/h+4)/6;break}}return{h:Math.round(c*360),s:Math.round(d*100),l:Math.round(p*100)}}function lt(t,e,i){e/=100,i/=100;const o=(1-Math.abs(2*i-1))*e,r=o*(1-Math.abs(t/60%2-1)),l=i-o/2;let c=0,d=0,p=0;return 0<=t&&t<60?(c=o,d=r,p=0):60<=t&&t<120?(c=r,d=o,p=0):120<=t&&t<180?(c=0,d=o,p=r):180<=t&&t<240?(c=0,d=r,p=o):240<=t&&t<300?(c=r,d=0,p=o):300<=t&&t<360&&(c=o,d=0,p=r),c=Math.round((c+l)*255).toString(16).padStart(2,"0"),d=Math.round((d+l)*255).toString(16).padStart(2,"0"),p=Math.round((p+l)*255).toString(16).padStart(2,"0"),`#${c}${d}${p}`}function to(t,e=!1){const i=eR(t);return e?{primary:t,primaryLight:lt(i.h,i.s*.8,Math.min(i.l+15,80)),primaryDark:lt(i.h,i.s,Math.max(i.l-15,20)),background:lt(i.h,i.s*.2,12),surface:lt(i.h,i.s*.15,18),surfaceVariant:lt(i.h,i.s*.2,25),secondary:lt((i.h+180)%360,i.s*.7,60),text:lt(i.h,i.s*.1,95),textSecondary:lt(i.h,i.s*.15,70),border:lt(i.h,i.s*.2,30),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}:{primary:t,primaryLight:lt(i.h,i.s*.6,Math.min(i.l+20,90)),primaryDark:lt(i.h,i.s,Math.max(i.l-20,30)),background:lt(i.h,i.s*.3,97),surface:lt(i.h,i.s*.1,100),surfaceVariant:lt(i.h,i.s*.2,95),secondary:lt((i.h+180)%360,i.s*.7,i.l),text:lt(i.h,i.s*.5,15),textSecondary:lt(i.h,i.s*.3,40),border:lt(i.h,i.s*.2,85),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}}const Ir={emerald:{name:"Emerald Dragon",description:"Bright, cheerful, default",seedColor:"#66BB6A",isDark:!1},midnight:{name:"Midnight Dragon",description:"Sleek, easy on eyes",seedColor:"#7B2CBF",isDark:!0},crystal:{name:"Crystal Dragon",description:"High contrast, accessible",seedColor:"#2196F3",isDark:!1}};function no(t){const e=document.documentElement;Object.entries(t).forEach(([i,o])=>{const r=`--color-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`;e.style.setProperty(r,o)})}function tR(t,e,i){return t>i?"danger":t>i*.8||e&&t<e*.8?"warning":"success"}const S_=P.createContext(null),vr={id:"local-user",name:"Dragon Keeper",profile:{sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]},thresholds:Qf,theme:{preset:"emerald",seed_color_hex:"#66BB6A"},badges:[],stats:{total_meals_logged:0,current_streak_days:0,longest_streak_days:0,meals_saved_to_stash:0}};function nR({children:t}){const[e,i]=P.useState(null),[o,r]=P.useState(!0),[l,c]=P.useState(!1),{isLoading:d,error:p,data:h}=Ie.useQuery({users:{}});P.useEffect(()=>{if(!d){if(h?.users&&h.users.length>0){const M=h.users[0];if(i({...vr,...M,profile:{...vr.profile,...M.profile},thresholds:{...vr.thresholds,...M.thresholds},theme:{...vr.theme,...M.theme}}),c(!0),M.theme?.preset){const w=Ir[M.theme.preset];if(w){const R=to(w.seedColor,w.isDark);no(R)}else if(M.theme.seed_color_hex){const R=to(M.theme.seed_color_hex,!1);no(R)}}}else{i(vr),c(!1);const M=Ir.emerald,w=to(M.seedColor,M.isDark);no(w)}r(!1)}},[d,h]);const b={user:e,isLoading:o||d,isAuthenticated:l,error:p,updateProfile:async M=>{const w={...e,profile:{...e.profile,...M}};i(w),e.id&&e.id!=="local-user"&&await Ie.transact([Ie.tx.users[e.id].update({profile:w.profile})])},updateThresholds:async M=>{const w={...e,thresholds:{...e.thresholds,...M}};i(w),e.id&&e.id!=="local-user"&&await Ie.transact([Ie.tx.users[e.id].update({thresholds:w.thresholds})])},updateTheme:async(M,w=null)=>{const R={preset:M,seed_color_hex:w||e.theme.seed_color_hex},D={...e,theme:R};if(i(D),M==="custom"&&w){const U=to(w,!1);no(U)}else{const U=Ir[M];if(U){const J=to(U.seedColor,U.isDark);no(J)}}e.id&&e.id!=="local-user"&&await Ie.transact([Ie.tx.users[e.id].update({theme:R})])},saveUser:async(M=null)=>{const w=M||e;if(e.id==="local-user"){const R=crypto.randomUUID(),D={...w,id:R};return await Ie.transact([Ie.tx.users[R].update({id:R,name:D.name,profile:D.profile,thresholds:D.thresholds,theme:D.theme,badges:D.badges||[],stats:D.stats||{},created_at:Date.now()})]),i(D),c(!0),R}else return await Ie.transact([Ie.tx.users[e.id].update({name:w.name,profile:w.profile,thresholds:w.thresholds,theme:w.theme,updated_at:Date.now()})]),e.id},setUser:i};return C.jsx(S_.Provider,{value:b,children:t})}function zr(){const t=P.useContext(S_);if(!t)throw new Error("useUser must be used within a UserProvider");return t}const iR=[{path:"/",icon:"",label:"Diary"},{path:"/charts",icon:"",label:"Scroll"},{path:"/oracle",icon:"",label:"Oracle"},{path:"/settings",icon:"",label:"Lair"}];function oR(){return C.jsx("nav",{className:"nav-bar",children:iR.map(t=>C.jsxs(I0,{to:t.path,className:({isActive:e})=>`nav-item ${e?"active":""}`,children:[C.jsx("span",{className:"nav-icon",children:t.icon}),C.jsx("span",{className:"nav-label",children:t.label})]},t.path))})}function xi({title:t,subtitle:e,action:i,showBack:o,onBack:r}){return C.jsx("header",{className:"header",children:C.jsxs("div",{className:"header-content",children:[o&&C.jsx("button",{className:"header-back",onClick:r,"aria-label":"Go back",children:""}),C.jsxs("div",{className:"header-title-group",children:[C.jsxs("h1",{className:"header-title",children:[C.jsx("span",{className:"header-dragon",children:""})," ",t]}),e&&C.jsx("p",{className:"header-subtitle",children:e})]}),i&&C.jsx("div",{className:"header-action",children:i})]})})}function Vn({nutrient:t,value:e,target:i,min:o=0,max:r,showLabel:l=!0,compact:c=!1}){const d=$w[t]||{icon:"",unit:"",label:t},p=r||i,h=Math.min(e/p*100,100),y=tR(e,o,p);return C.jsxs("div",{className:`nutrient-progress ${c?"compact":""}`,children:[l&&C.jsxs("div",{className:"nutrient-header",children:[C.jsxs("span",{className:"nutrient-label",children:[C.jsx("span",{className:"nutrient-icon",children:d.icon}),C.jsx("span",{className:"nutrient-name",children:d.label})]}),C.jsxs("span",{className:"nutrient-value",children:[C.jsx("span",{className:"current",children:Math.round(e)}),C.jsx("span",{className:"separator",children:"/"}),C.jsx("span",{className:"target",children:Math.round(p)}),C.jsx("span",{className:"unit",children:d.unit})]})]}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:`progress-bar-fill ${y}`,style:{width:`${h}%`}})}),!c&&C.jsxs("div",{className:"nutrient-footer",children:[C.jsxs("span",{className:`status-indicator ${y}`,children:[y==="success"&&"",y==="warning"&&"",y==="danger"&&""]}),C.jsxs("span",{className:"percentage",children:[Math.round(h),"%"]})]})]})}const zy={curious:{emoji:"",animation:"sniff",message:"Your dragon is looking for food..."},happy:{emoji:"",animation:"bounce",message:"Your dragon is happy!"},satisfied:{emoji:"",animation:"pulse",message:"Your dragon is satisfied and content."},stuffed:{emoji:"",animation:"wobble",message:"Your dragon ate too much!"},sick:{emoji:"",animation:"shake",message:"Your dragon isn't feeling well..."},celebrating:{emoji:"",animation:"celebrate",message:"Your dragon is celebrating! "},hoarding:{emoji:"",animation:"hoard",message:"Saved to your dragon's hoard!"}};function Rl({state:t="happy",showMessage:e=!0,size:i="medium"}){const o=zy[t]||zy.happy;return C.jsxs("div",{className:`ember-mascot ${i}`,children:[C.jsxs("div",{className:`ember-emoji ${o.animation}`,children:[o.emoji,t==="sick"&&C.jsx("span",{className:"ember-effect",children:""}),t==="celebrating"&&C.jsx("span",{className:"ember-effect",children:""}),t==="happy"&&C.jsx("span",{className:"ember-effect",children:""})]}),e&&C.jsx("p",{className:"ember-message",children:o.message})]})}function sR(t,e){if(!t||!e)return"curious";const i=t.calories/e.calories_max,o=t.purines/e.purines_max;return o>1?"sick":i>1?"stuffed":o>.8||i>.8?"satisfied":t.calories===0?"curious":"happy"}const Xf=()=>{const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`},By={breakfast:1,lunch:2,dinner:3,snack:4,hydration:5};function E_(t=null){const{user:e}=zr(),i=e?.id,o=t?{meals:{$:{where:{user_id:i,date:t}}}}:{meals:{$:{where:{user_id:i}}}},{isLoading:r,error:l,data:c}=Ie.useQuery(i?o:null),d=c?.meals||[];return{meals:P.useMemo(()=>[...d].sort((E,b)=>{const M=By[E.meal_type]||99,w=By[b.meal_type]||99;return M-w}),[d]),isLoading:r,error:l,addMeal:async E=>{if(!i)return null;const b=crypto.randomUUID(),M={id:b,user_id:i,date:E.date||Xf(),timestamp:Date.now(),meal_type:E.meal_type||"snack",meal_name:E.meal_name||"Unnamed Meal",ingredients:E.ingredients||[],total_nutrients:E.total_nutrients||{},hydration_ml:E.hydration_ml||0,image_urls:E.image_urls||[],analysis_method:E.analysis_method||"manual"};return await Ie.transact([Ie.tx.meals[b].update(M)]),b},updateMeal:async(E,b)=>{await Ie.transact([Ie.tx.meals[E].update({...b,updated_at:Date.now()})])},deleteMeal:async E=>{await Ie.transact([Ie.tx.meals[E].delete()])},getDailyTotals:(E=t||Xf())=>d.filter(w=>w.date===E).reduce((w,R)=>(R.total_nutrients&&Object.keys(R.total_nutrients).forEach(D=>{w[D]=(w[D]||0)+(R.total_nutrients[D]||0)}),w.hydration=(w.hydration||0)+(R.hydration_ml||0),w),{})}}function C_(t=Xf()){const{user:e}=zr(),i=e?.id,{isLoading:o,data:r}=Ie.useQuery(i?{hydration:{$:{where:{user_id:i,date:t}}}}:null),c=(r?.hydration||[])[0],d=c?.amount_ml||0,p=async y=>{if(i)if(c)await Ie.transact([Ie.tx.hydration[c.id].update({amount_ml:Math.max(0,y),updated_at:Date.now()})]);else{const _=crypto.randomUUID();await Ie.transact([Ie.tx.hydration[_].update({id:_,user_id:i,date:t,amount_ml:Math.max(0,y),created_at:Date.now(),updated_at:Date.now()})])}};return{totalHydration:d,isLoading:o,setHydration:p,adjustHydration:async y=>{if(!i)return;const _=Math.max(0,d+y);await p(_)}}}function Nd(){const{user:t}=zr(),e=t?.id,{isLoading:i,error:o,data:r}=Ie.useQuery(e?{customItems:{$:{where:{user_id:e}}}}:null),l=r?.customItems||[],c=l.filter(T=>T.type==="meal"),d=l.filter(T=>T.type==="ingredient"),p=l.filter(T=>T.type==="container");return{savedMeals:c,customIngredients:d,bottles:p,items:l,isLoading:i,error:o,addToStash:async T=>{if(!e)return null;const E=crypto.randomUUID();return await Ie.transact([Ie.tx.customItems[E].update({id:E,user_id:e,type:T.type,name:T.name,icon:T.icon||null,ingredients:T.ingredients||[],total_nutrients:T.total_nutrients||{},capacity_ml:T.capacity_ml||0,use_count:T.use_count||0,created_at:Date.now()})]),E},removeFromStash:async T=>{await Ie.transact([Ie.tx.customItems[T].delete()])},updateStashItem:async(T,E)=>{await Ie.transact([Ie.tx.customItems[T].update({...E,updated_at:Date.now()})])}}}let rR,aR;function lR(){return{geminiUrl:rR,vertexUrl:aR}}function uR(t,e,i,o){var r,l;if(!t?.baseUrl){const c=lR();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class Zn{}function te(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(i))t[d]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];m(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(o+1),i)):i}else return i}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function cR(t,e){for(const[i,o]of Object.entries(e)){const r=i.split("."),l=o.split("."),c=new Set;let d=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}Zf(t,r,l,0,c)}}function Zf(t,e,i,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])Zf(p,e,i,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of d)p[h]=c[h];for(const[h,y]of Object.entries(p)){const _=[];for(const T of i.slice(o))T==="*"?_.push(h):_.push(T);m(c,_,y)}for(const h of d)delete c[h]}}else{const c=t;l in c&&Zf(c[l],e,i,o+1,r)}}function xd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function fR(t){const e={},i=f(t,["operationName"]);i!=null&&m(e,["operationName"],i);const o=f(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function dR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],pR(c)),e}function hR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],mR(c)),e}function pR(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>gR(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function mR(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>yR(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function gR(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],CR(i)),e}function yR(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],AR(i)),e}function vR(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function _R(t){const e={},i=f(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function TR(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],SR(c)),e}function SR(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function A_(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],ER(c)),e}function ER(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function CR(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],xd(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function AR(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],xd(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}var Fy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fy||(Fy={}));var Yy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Yy||(Yy={}));var $y;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($y||($y={}));var wi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(wi||(wi={}));var Jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Jy||(Jy={}));var Ky;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ky||(Ky={}));var Qy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Qy||(Qy={}));var Xy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Xy||(Xy={}));var Zy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Zy||(Zy={}));var Wy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Wy||(Wy={}));var jy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(jy||(jy={}));var ev;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ev||(ev={}));var tv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(tv||(tv={}));var nv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(nv||(nv={}));var iv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(iv||(iv={}));var ov;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ov||(ov={}));var sv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sv||(sv={}));var rv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(rv||(rv={}));var av;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(av||(av={}));var Nl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Nl||(Nl={}));var lv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lv||(lv={}));var uv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(uv||(uv={}));var cv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(cv||(cv={}));var Wf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wf||(Wf={}));var fv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fv||(fv={}));var dv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dv||(dv={}));var hv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(hv||(hv={}));var pv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pv||(pv={}));var mv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mv||(mv={}));var gv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(gv||(gv={}));var yv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(yv||(yv={}));var vv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vv||(vv={}));var _v;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(_v||(_v={}));var Tv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Tv||(Tv={}));var Sv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Sv||(Sv={}));var Ev;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ev||(Ev={}));var Cv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Cv||(Cv={}));var Av;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Av||(Av={}));var bv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(bv||(bv={}));var Mv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Mv||(Mv={}));var wv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(wv||(wv={}));var Rv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Rv||(Rv={}));var Nv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Nv||(Nv={}));var xv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(xv||(xv={}));var Iv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Iv||(Iv={}));var Dv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Dv||(Dv={}));var Uv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Uv||(Uv={}));var Pv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Pv||(Pv={}));var Lv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Lv||(Lv={}));var kv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kv||(kv={}));var Ov;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ov||(Ov={}));var qv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qv||(qv={}));var Gv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Gv||(Gv={}));var Hv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Hv||(Hv={}));var ts;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ts||(ts={}));class jf{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class _r{get text(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const T of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,b]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,o,r,l,c,d,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,o,r,l,c,d,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class Vv{}class zv{}class bR{}class MR{}class wR{}class RR{}class Bv{}class Fv{}class Yv{}class NR{}class xl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new xl;let r;const l=e;return i?r=hR(l):r=dR(l),Object.assign(o,r),o}}class $v{}class Jv{}class Kv{}class xR{}class IR{}class DR{}class Id{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Id,l=TR(e);return Object.assign(o,l),o}}class UR{}class PR{}class LR{}class Qv{}class kR{get text(){var e,i,o;let r="",l=!1;const c=[];for(const d of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,o;let r="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class OR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Dd,l=A_(e);return Object.assign(o,l),o}}function Re(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function b_(t,e){const i=Re(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function M_(t){return Array.isArray(t)?t.map(e=>Il(e)):[Il(t)]}function Il(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function w_(t){const e=Il(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function R_(t){const e=Il(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function N_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Xv(e)):[Xv(t)]}function ed(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Zv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Wv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Tt(t){if(t==null)throw new Error("ContentUnion is required");return ed(t)?t:{role:"user",parts:N_(t)}}function Ud(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Tt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Tt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Tt(i)):[Tt(e)]}function on(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Zv(t)||Wv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tt(t)]}const e=[],i=[],o=ed(t[0]);for(const r of t){const l=ed(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(Zv(r)||Wv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||e.push({role:"user",parts:N_(i)}),e}function qR(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(wi).includes(i[0].toUpperCase())?i[0].toUpperCase():wi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(wi).includes(o.toUpperCase())?o.toUpperCase():wi.TYPE_UNSPECIFIED})}}function os(t){const e={},i=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&qR(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(wi).includes(d.toUpperCase())?d.toUpperCase():wi.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=os(d);else if(o.includes(c)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(os(h))}e[c]=p}else if(r.includes(c)){const p={};for(const[h,y]of Object.entries(d))p[h]=os(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Pd(t){return os(t)}function Ld(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ms(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=os(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=os(e.response));return t}function gs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function GR(t,e,i,o=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function Wn(t,e){if(typeof e!="string")throw new Error("name must be a string");return GR(t,e,"cachedContents")}function x_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Di(t){return xd(t)}function HR(t){return t!=null&&typeof t=="object"&&"name"in t}function VR(t){return t!=null&&typeof t=="object"&&"video"in t}function zR(t){return t!=null&&typeof t=="object"&&"uri"in t}function I_(t){var e;let i;if(HR(t)&&(i=t.name),!(zR(t)&&(i=t.uri,i===void 0))&&!(VR(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function D_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function U_(t){for(const e of["models","tunedModels","publisherModels"])if(BR(t,e))return t[e];return[]}function BR(t,e){return t!==null&&typeof t=="object"&&e in t}function FR(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function YR(t,e={}){const i=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=FR(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function P_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function $R(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function L_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ys(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function k_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function JR(t){const e={},i=f(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>wN(c))),m(e,["inlinedResponses"],l)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function KR(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function QR(t){const e={},i=f(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function _l(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["metadata","state"]);r!=null&&m(e,["state"],k_(r));const l=f(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const d=f(t,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(t,["metadata","output"]);return h!=null&&m(e,["dest"],JR(L_(h))),e}function td(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["state"]);r!=null&&m(e,["state"],k_(r));const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["createTime"]);c!=null&&m(e,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(t,["model"]);y!=null&&m(e,["model"],y);const _=f(t,["inputConfig"]);_!=null&&m(e,["src"],XR(_));const T=f(t,["outputConfig"]);T!=null&&m(e,["dest"],KR(L_(T)));const E=f(t,["completionStats"]);return E!=null&&m(e,["completionStats"],E),e}function XR(t){const e={},i=f(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const o=f(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function ZR(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&m(i,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>MN(t,c))),m(i,["requests","requests"],l)}return i}function WR(t){const e={},i=f(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const o=f(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=f(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jR(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function eN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function tN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function nN(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],iN(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function iN(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function O_(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>PN(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function oN(t,e){const i={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function sN(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],QR($R(r))),i}function jv(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],ZR(t,P_(t,r)));const l=f(e,["config"]);return l!=null&&oN(l,i),i}function rN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],Re(t,o));const r=f(e,["src"]);r!=null&&m(i,["inputConfig"],WR(P_(t,r)));const l=f(e,["config"]);return l!=null&&sN(l,i),i}function aN(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),i}function lN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["src"]);r!=null&&m(i,["batch","inputConfig"],mN(t,r));const l=f(e,["config"]);return l!=null&&aN(l,i),i}function uN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function cN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function fN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function dN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);return l!=null&&m(e,["error"],l),e}function hN(t,e){const i={},o=f(e,["contents"]);if(o!=null){let l=Ud(t,o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(m(i,["_self"],pN(r,i)),cR(i,{"requests[].*":"requests[].request.*"})),i}function pN(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function mN(t,e){const i={},o=f(e,["fileName"]);o!=null&&m(i,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&m(i,["requests"],hN(t,r)),i}function gN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function yN(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vN(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _N(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],O_(Tt(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Pd(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=f(e,["safetySettings"]);if(i!==void 0&&U!=null){let ue=U;Array.isArray(ue)&&(ue=ue.map(be=>LN(be))),m(i,["safetySettings"],ue)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let ue=gs(J);Array.isArray(ue)&&(ue=ue.map(be=>ON(ms(be)))),m(i,["tools"],ue)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],kN(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=f(e,["cachedContent"]);i!==void 0&&X!=null&&m(i,["cachedContent"],Wn(t,X));const K=f(e,["responseModalities"]);K!=null&&m(o,["responseModalities"],K);const ne=f(e,["mediaResolution"]);ne!=null&&m(o,["mediaResolution"],ne);const j=f(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],Ld(j)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=f(e,["thinkingConfig"]);ae!=null&&m(o,["thinkingConfig"],ae);const me=f(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],bN(me)),o}function TN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>nN(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function SN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function EN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],ys(t,o)),i}function CN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function AN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function bN(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function MN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["request","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let d=on(r);Array.isArray(d)&&(d=d.map(p=>O_(p))),m(i,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(e,["config"]);return c!=null&&m(i,["request","generationConfig"],_N(t,c,f(i,["request"],{}))),i}function wN(t){const e={},i=f(t,["response"]);i!=null&&m(e,["response"],TN(i));const o=f(t,["error"]);return o!=null&&m(e,["error"],o),e}function RN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function NN(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=f(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function xN(t){const e={},i=f(t,["config"]);return i!=null&&RN(i,e),e}function IN(t){const e={},i=f(t,["config"]);return i!=null&&NN(i,e),e}function DN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>_l(c))),m(e,["batchJobs"],l)}return e}function UN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>td(c))),m(e,["batchJobs"],l)}return e}function PN(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],gN(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],yN(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],jR(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function LN(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function kN(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],vN(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function ON(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],CN(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],AN(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var Qn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Qn||(Qn={}));class ro{constructor(e,i,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,r)}init(e,i,o){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class qN extends Zn{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new ro(Qn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=jv(this.apiClient,e),o=i._url,r=te("{model}:batchGenerateContent",o),d=i.batch.inputConfig.requests,p=d.requests,h=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}h.push(_)}return d.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=rN(this.apiClient,e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>td(y))}else{const h=jv(this.apiClient,e);return d=te("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>_l(y))}}async createEmbeddingsInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lN(this.apiClient,e);return l=te("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>_l(p))}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=EN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>td(y))}else{const h=SN(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>_l(y))}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=tN(this.apiClient,e);c=te("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=eN(this.apiClient,e);c=te("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=IN(e);return d=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=UN(y),T=new Qv;return Object.assign(T,_),T})}else{const h=xN(e);return d=te("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=DN(y),T=new Qv;return Object.assign(T,_),T})}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=cN(this.apiClient,e);return d=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>dN(y))}else{const h=uN(this.apiClient,e);return d=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>fN(y))}}}function GN(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function e0(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>lx(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function HN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let y=on(c);Array.isArray(y)&&(y=y.map(_=>e0(_))),m(e,["contents"],y)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],e0(Tt(d)));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>cx(_))),m(e,["tools"],y)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],ux(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function VN(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=f(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let _=on(c);Array.isArray(_)&&(_=_.map(T=>T)),m(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],Tt(d));const p=f(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>fx(T))),m(e,["tools"],_)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=f(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function zN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],b_(t,o));const r=f(e,["config"]);return r!=null&&HN(r,i),i}function BN(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["model"],b_(t,o));const r=f(e,["config"]);return r!=null&&VN(r,i),i}function FN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],Wn(t,o)),i}function YN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],Wn(t,o)),i}function $N(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function JN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function KN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function QN(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XN(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZN(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function WN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],Wn(t,o)),i}function jN(t,e){const i={},o=f(e,["name"]);return o!=null&&m(i,["_url","name"],Wn(t,o)),i}function ex(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function tx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function nx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function ix(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function ox(t){const e={},i=f(t,["config"]);return i!=null&&nx(i,e),e}function sx(t){const e={},i=f(t,["config"]);return i!=null&&ix(i,e),e}function rx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function ax(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function lx(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],KN(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],QN(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],GN(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function ux(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],XN(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function cx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],ex(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],tx(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function fx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>ZN(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function dx(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function hx(t,e){const i={},o=f(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function px(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],Wn(t,o));const r=f(e,["config"]);return r!=null&&dx(r,i),i}function mx(t,e){const i={},o=f(e,["name"]);o!=null&&m(i,["_url","name"],Wn(t,o));const r=f(e,["config"]);return r!=null&&hx(r,i),i}class gx extends Zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ro(Qn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=BN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=zN(this.apiClient,e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=jN(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=WN(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=YN(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=JN(y),T=new Jv;return Object.assign(T,_),T})}else{const h=FN(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=$N(y),T=new Jv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=mx(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=px(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=sx(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=ax(y),T=new Kv;return Object.assign(T,_),T})}else{const h=ox(e);return d=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=rx(y),T=new Kv;return Object.assign(T,_),T})}}}function t0(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(t){return this instanceof He?(this.v=t,this):new He(t)}function ss(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(E){return function(b){return Promise.resolve(b).then(E,_)}}function d(E,b){o[E]&&(r[E]=function(M){return new Promise(function(w,R){l.push([E,M,w,R])>1||p(E,M)})},b&&(r[E]=b(r[E])))}function p(E,b){try{h(o[E](b))}catch(M){T(l[0][3],M)}}function h(E){E.value instanceof He?Promise.resolve(E.value.v).then(y,_):T(l[0][2],E)}function y(E){p("next",E)}function _(E){p("throw",E)}function T(E,b){E(b),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Dr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof t0=="function"?t0(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(d,p){c=t[l](c),r(d,p,c.done,c.value)})}}function r(l,c,d,p){Promise.resolve(p).then(function(h){l({value:h,done:d})},c)}}function yx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:q_(i)}function q_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function n0(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<i&&t[o].role==="model";)r.push(t[o]),l&&!q_(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class _x{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Tx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Tx{constructor(e,i,o,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),vx(l)}async sendMessage(e){var i;await this.sendPromise;const o=Tt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,d;const p=await r,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(d=y.slice(_))!==null&&d!==void 0?d:[]);const E=h?[h]:[];this.recordHistory(o,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const o=Tt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?n0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,r;return ss(this,arguments,function*(){var c,d,p,h;const y=[];try{for(var _=!0,T=Dr(e),E;E=yield He(T.next()),c=E.done,!c;_=!0){h=E.value,_=!1;const b=h;if(yx(b)){const M=(r=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;M!==void 0&&y.push(M)}yield yield He(b)}}catch(b){d={error:b}}finally{try{!_&&!c&&(p=T.return)&&(yield He(p.call(T)))}finally{if(d)throw d.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...n0(o)):this.history.push(e),this.history.push(...r)}}class Gl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gl.prototype)}}function Sx(t){const e={},i=f(t,["file"]);return i!=null&&m(e,["file"],i),e}function Ex(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function Cx(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],I_(i)),e}function Ax(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bx(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","file"],I_(i)),e}function Mx(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function wx(t){const e={},i=f(t,["config"]);return i!=null&&Mx(i,e),e}function Rx(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}class Nx extends Zn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ro(Qn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wx(e);return l=te("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Rx(p),y=new UR;return Object.assign(y,h),y})}}async createInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Sx(e);return l=te("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Ex(p),y=new PR;return Object.assign(y,h),y})}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bx(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Cx(e);return l=te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Ax(p),y=new LR;return Object.assign(y,h),y})}}}function Tl(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function xx(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>$x(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function Ix(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Dx(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ux(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function Px(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const E=f(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],G_(D));const U=f(t,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const X=f(t,["topK"]);X!=null&&m(e,["topK"],X);const K=f(t,["topP"]);if(K!=null&&m(e,["topP"],K),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Lx(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function kx(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Ox(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],kd(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],xx(Tt(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let X=gs(M);Array.isArray(X)&&(X=X.map(K=>Kx(ms(K)))),m(e,["setup","tools"],X)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Jx(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function qx(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],Px(o));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],G_(kd(_)));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Tt(b));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let X=gs(M);Array.isArray(X)&&(X=X.map(K=>Qx(ms(K)))),m(e,["setup","tools"],X)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Gx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],Ox(r,i)),i}function Hx(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],qx(r,i)),i}function Vx(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function zx(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function Bx(t){const e={},i=f(t,["media"]);if(i!=null){let h=M_(i);Array.isArray(h)&&(h=h.map(y=>Tl(y))),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],Tl(R_(o)));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],Tl(w_(l)));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Fx(t){const e={},i=f(t,["media"]);if(i!=null){let h=M_(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const o=f(t,["audio"]);o!=null&&m(e,["audio"],R_(o));const r=f(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=f(t,["video"]);l!=null&&m(e,["video"],w_(l));const c=f(t,["text"]);c!=null&&m(e,["text"],c);const d=f(t,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Yx(t){const e={},i=f(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const o=f(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=f(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=f(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],Xx(c));const d=f(t,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function $x(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],Ix(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],Dx(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Tl(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Jx(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function G_(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Kx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],Lx(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],kx(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Qx(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>Ux(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Xx(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const o=f(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=f(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const d=f(t,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(t,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["promptTokensDetails"],E)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["cacheTokensDetails"],E)}const y=f(t,["candidatesTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["responseTokensDetails"],E)}const _=f(t,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(b=>b)),m(e,["toolUsePromptTokensDetails"],E)}const T=f(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function Zx(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Wx(t){const e={},i=f(t,["content"]);i!=null&&m(e,["content"],i);const o=f(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],jx(o));const r=f(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=f(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const d=f(t,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(t,["index"]);p!=null&&m(e,["index"],p);const h=f(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=f(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),m(e,["safetyRatings"],T)}const _=f(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function jx(t){const e={},i=f(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function eI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let l=on(r);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function tI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["tokensInfo"],r)}return e}function nI(t){const e={},i=f(t,["values"]);i!=null&&m(e,["values"],i);const o=f(t,["statistics"]);return o!=null&&m(e,["statistics"],iI(o)),e}function iI(t){const e={},i=f(t,["truncated"]);i!=null&&m(e,["truncated"],i);const o=f(t,["token_count"]);return o!=null&&m(e,["tokenCount"],o),e}function Hl(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>dD(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function oI(t){const e={},i=f(t,["controlType"]);i!=null&&m(e,["controlType"],i);const o=f(t,["enableControlImageComputation"]);return o!=null&&m(e,["computeControl"],o),e}function sI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rI(t,e){const i={},o=f(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],Tt(o));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>F_(d))),m(e,["tools"],c)}const l=f(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],ZI(l)),i}function aI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(d=>Hl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&sI(l),i}function lI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&rI(l,i),i}function uI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);o!=null&&m(e,["totalTokens"],o);const r=f(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function cI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["totalTokens"]);return o!=null&&m(e,["totalTokens"],o),e}function fI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function dI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function hI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function pI(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function mI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const E=f(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const U=f(t,["baseSteps"]);return e!==void 0&&U!=null&&m(e,["parameters","editConfig","baseSteps"],U),i}function gI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>vD(p))),m(i,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&mI(c,i),i}function yI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Vl(l))),m(e,["generatedImages"],r)}return e}function vI(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function _I(t,e){const i={},o=f(t,["taskType"]);e!==void 0&&o!=null&&m(e,["instances[]","task_type"],o);const r=f(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const l=f(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=f(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),i}function TI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let d=Ud(t,r);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&vI(l,i);const c=f(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Re(t,c)),i}function SI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let c=Ud(t,r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&_I(l,i),i}function EI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function CI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>nI(c))),m(e,["embeddings"],l)}const r=f(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function AI(t){const e={},i=f(t,["endpoint"]);i!=null&&m(e,["name"],i);const o=f(t,["deployedModelId"]);return o!=null&&m(e,["deployedModelId"],o),e}function bI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function MI(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wI(t){const e={},i=f(t,["mode"]);i!=null&&m(e,["mode"],i);const o=f(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RI(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["name"]);o!=null&&m(e,["name"],o);const r=f(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=f(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&m(e,["response"],c);const d=f(t,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function NI(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Hl(Tt(r)));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Pd(R));const D=f(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=f(e,["safetySettings"]);if(i!==void 0&&U!=null){let ue=U;Array.isArray(ue)&&(ue=ue.map(be=>_D(be))),m(i,["safetySettings"],ue)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let ue=gs(J);Array.isArray(ue)&&(ue=ue.map(be=>MD(ms(be)))),m(i,["tools"],ue)}const B=f(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],bD(B)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=f(e,["cachedContent"]);i!==void 0&&X!=null&&m(i,["cachedContent"],Wn(t,X));const K=f(e,["responseModalities"]);K!=null&&m(o,["responseModalities"],K);const ne=f(e,["mediaResolution"]);ne!=null&&m(o,["mediaResolution"],ne);const j=f(e,["speechConfig"]);if(j!=null&&m(o,["speechConfig"],Ld(j)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=f(e,["thinkingConfig"]);ae!=null&&m(o,["thinkingConfig"],ae);const me=f(e,["imageConfig"]);return me!=null&&m(o,["imageConfig"],nD(me)),o}function xI(t,e,i){const o={},r=f(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Tt(r));const l=f(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(o,["topP"],c);const d=f(e,["topK"]);d!=null&&m(o,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=f(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=f(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&m(o,["presencePenalty"],E);const b=f(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=f(e,["seed"]);M!=null&&m(o,["seed"],M);const w=f(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=f(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Pd(R));const D=f(e,["responseJsonSchema"]);D!=null&&m(o,["responseJsonSchema"],D);const U=f(e,["routingConfig"]);U!=null&&m(o,["routingConfig"],U);const J=f(e,["modelSelectionConfig"]);J!=null&&m(o,["modelConfig"],J);const B=f(e,["safetySettings"]);if(i!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(Z=>Z)),m(i,["safetySettings"],V)}const X=f(e,["tools"]);if(i!==void 0&&X!=null){let V=gs(X);Array.isArray(V)&&(V=V.map(Z=>F_(ms(Z)))),m(i,["tools"],V)}const K=f(e,["toolConfig"]);i!==void 0&&K!=null&&m(i,["toolConfig"],K);const ne=f(e,["labels"]);i!==void 0&&ne!=null&&m(i,["labels"],ne);const j=f(e,["cachedContent"]);i!==void 0&&j!=null&&m(i,["cachedContent"],Wn(t,j));const ae=f(e,["responseModalities"]);ae!=null&&m(o,["responseModalities"],ae);const me=f(e,["mediaResolution"]);me!=null&&m(o,["mediaResolution"],me);const ue=f(e,["speechConfig"]);ue!=null&&m(o,["speechConfig"],B_(Ld(ue)));const be=f(e,["audioTimestamp"]);be!=null&&m(o,["audioTimestamp"],be);const $e=f(e,["thinkingConfig"]);$e!=null&&m(o,["thinkingConfig"],$e);const Qe=f(e,["imageConfig"]);return Qe!=null&&m(o,["imageConfig"],iD(Qe)),o}function i0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(d=>Hl(d))),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],NI(t,l,i)),i}function o0(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["contents"]);if(r!=null){let c=on(r);Array.isArray(c)&&(c=c.map(d=>d)),m(i,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(i,["generationConfig"],xI(t,l,i)),i}function s0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>Wx(h))),m(e,["candidates"],p)}const r=f(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=f(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&m(e,["responseId"],c);const d=f(t,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function r0(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const l=f(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const d=f(t,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function II(t,e){const i={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const l=f(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=f(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=f(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function DI(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=f(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=f(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const E=f(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=f(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=f(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=f(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const U=f(t,["enhancePrompt"]);return e!==void 0&&U!=null&&m(e,["parameters","enhancePrompt"],U),i}function UI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&II(l,i),i}function PI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&DI(l,i),i}function LI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>JI(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],V_(r)),e}function kI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Vl(c))),m(e,["generatedImages"],l)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],z_(r)),e}function OI(t,e){const i={},o=f(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=f(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=f(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],zl(y));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>GD(E))),m(e,["instances[0]","referenceImages"],T)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function qI(t,e){const i={},o=f(t,["numberOfVideos"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=f(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=f(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const d=f(t,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=f(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const T=f(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const E=f(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=f(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const M=f(t,["lastFrame"]);e!==void 0&&M!=null&&m(e,["instances[0]","lastFrame"],hn(M));const w=f(t,["referenceImages"]);if(e!==void 0&&w!=null){let U=w;Array.isArray(U)&&(U=U.map(J=>HD(J))),m(e,["instances[0]","referenceImages"],U)}const R=f(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],qD(R));const D=f(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function GI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],BI(c)),e}function HI(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],FI(c)),e}function VI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],zl(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],Y_(c));const d=f(e,["source"]);d!=null&&YI(d,i);const p=f(e,["config"]);return p!=null&&OI(p,i),i}function zI(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&m(i,["instances[0]","image"],hn(l));const c=f(e,["video"]);c!=null&&m(i,["instances[0]","video"],$_(c));const d=f(e,["source"]);d!=null&&$I(d,i);const p=f(e,["config"]);return p!=null&&qI(p,i),i}function BI(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>QI(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function FI(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>XI(c))),m(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function YI(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],zl(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],Y_(l)),i}function $I(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],hn(r));const l=f(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],$_(l)),i}function JI(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],oD(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],V_(r)),e}function Vl(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["image"],H_(i));const o=f(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=f(t,["_self"]);r!=null&&m(e,["safetyAttributes"],z_(r));const l=f(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function KI(t){const e={},i=f(t,["_self"]);i!=null&&m(e,["mask"],H_(i));const o=f(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["labels"],r)}return e}function QI(t){const e={},i=f(t,["video"]);return i!=null&&m(e,["video"],kD(i)),e}function XI(t){const e={},i=f(t,["_self"]);return i!=null&&m(e,["video"],OD(i)),e}function ZI(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=f(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=f(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=f(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const d=f(t,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=f(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=f(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=f(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const E=f(t,["responseMimeType"]);E!=null&&m(e,["responseMimeType"],E);const b=f(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=f(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=f(t,["seed"]);R!=null&&m(e,["seed"],R);const D=f(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],B_(D));const U=f(t,["stopSequences"]);U!=null&&m(e,["stopSequences"],U);const J=f(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=f(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const X=f(t,["topK"]);X!=null&&m(e,["topK"],X);const K=f(t,["topP"]);if(K!=null&&m(e,["topP"],K),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function jI(t,e){const i={},o=f(e,["model"]);return o!=null&&m(i,["_url","name"],Re(t,o)),i}function eD(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function tD(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function nD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function iD(t){const e={},i=f(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=f(t,["imageSize"]);o!=null&&m(e,["imageSize"],o);const r=f(t,["outputMimeType"]);r!=null&&m(e,["imageOutputOptions","mimeType"],r);const l=f(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function oD(t){const e={},i=f(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Di(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function H_(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],Di(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function zl(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Di(i));const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function hn(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Di(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function sD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],D_(t,d)),o}function rD(t,e,i){const o={},r=f(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=f(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=f(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const d=f(e,["queryBase"]);return i!==void 0&&d!=null&&m(i,["_url","models_url"],D_(t,d)),o}function aD(t,e){const i={},o=f(e,["config"]);return o!=null&&sD(t,o,i),i}function lD(t,e){const i={},o=f(e,["config"]);return o!=null&&rD(t,o,i),i}function uD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=U_(r);Array.isArray(l)&&(l=l.map(c=>nd(c))),m(e,["models"],l)}return e}function cD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["_self"]);if(r!=null){let l=U_(r);Array.isArray(l)&&(l=l.map(c=>id(c))),m(e,["models"],l)}return e}function fD(t){const e={},i=f(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const o=f(t,["segmentationClasses"]);o!=null&&m(e,["maskClasses"],o);const r=f(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function nd(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["version"]);l!=null&&m(e,["version"],l);const c=f(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],wD(c));const d=f(t,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=f(t,["temperature"]);y!=null&&m(e,["temperature"],y);const _=f(t,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const T=f(t,["topP"]);T!=null&&m(e,["topP"],T);const E=f(t,["topK"]);E!=null&&m(e,["topK"],E);const b=f(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function id(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);r!=null&&m(e,["description"],r);const l=f(t,["versionId"]);l!=null&&m(e,["version"],l);const c=f(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>AI(T))),m(e,["endpoints"],_)}const d=f(t,["labels"]);d!=null&&m(e,["labels"],d);const p=f(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],RD(p));const h=f(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=f(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["checkpoints"],_)}return e}function dD(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],bI(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],MI(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],Zx(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function hD(t){const e={},i=f(t,["productImage"]);return i!=null&&m(e,["image"],hn(i)),e}function pD(t,e){const i={},o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const T=f(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const E=f(t,["labels"]);return e!==void 0&&E!=null&&m(e,["labels"],E),i}function mD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["source"]);r!=null&&yD(r,i);const l=f(e,["config"]);return l!=null&&pD(l,i),i}function gD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Vl(r))),m(e,["generatedImages"],o)}return e}function yD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],hn(r));const l=f(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>hD(d))),m(e,["instances[0]","productImages"],c)}return i}function vD(t){const e={},i=f(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],hn(i));const o=f(t,["referenceId"]);o!=null&&m(e,["referenceId"],o);const r=f(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const l=f(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],fD(l));const c=f(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],oI(c));const d=f(t,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function V_(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function z_(t){const e={},i=f(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=f(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=f(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function _D(t){const e={},i=f(t,["category"]);if(i!=null&&m(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function TD(t){const e={},i=f(t,["image"]);return i!=null&&m(e,["image"],hn(i)),e}function SD(t,e){const i={},o=f(t,["mode"]);e!==void 0&&o!=null&&m(e,["parameters","mode"],o);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const l=f(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=f(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function ED(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["source"]);r!=null&&AD(r,i);const l=f(e,["config"]);return l!=null&&SD(l,i),i}function CD(t){const e={},i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>KI(r))),m(e,["generatedMasks"],o)}return e}function AD(t,e){const i={},o=f(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=f(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],hn(r));const l=f(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],TD(l)),i}function B_(t){const e={},i=f(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=f(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),f(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bD(t){const e={},i=f(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],wI(i));const o=f(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function MD(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],eD(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],tD(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function F_(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>RI(T))),m(e,["functionDeclarations"],_)}const o=f(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=f(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const d=f(t,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=f(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function wD(t){const e={},i=f(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function RD(t){const e={},i=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=f(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function ND(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function xD(t,e){const i={},o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=f(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=f(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function ID(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","name"],Re(t,o));const r=f(e,["config"]);return r!=null&&ND(r,i),i}function DD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["config"]);return r!=null&&xD(r,i),i}function UD(t,e){const i={},o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=f(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const E=f(t,["mode"]);return e!==void 0&&E!=null&&m(e,["parameters","mode"],E),i}function PD(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["_url","model"],Re(t,o));const r=f(e,["image"]);r!=null&&m(i,["instances[0]","image"],hn(r));const l=f(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&UD(c,i),i}function LD(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Vl(l))),m(e,["generatedImages"],r)}return e}function kD(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Di(o));const r=f(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function OD(t){const e={},i=f(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=f(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Di(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function qD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["_self"],hn(i));const o=f(t,["maskMode"]);return o!=null&&m(e,["maskMode"],o),e}function GD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],zl(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function HD(t){const e={},i=f(t,["image"]);i!=null&&m(e,["image"],hn(i));const o=f(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function Y_(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["uri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["encodedVideo"],Di(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function $_(t){const e={},i=f(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const o=f(t,["videoBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Di(o));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}const VD="Content-Type",zD="X-Server-Timeout",BD="User-Agent",od="x-goog-api-client",FD="1.30.0",YD=`google-genai-sdk/${FD}`,$D="v1beta1",JD="v1beta",a0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class KD{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:$D,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:JD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const r=[this.getRequestUrlInternal(i)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const d=setTimeout(()=>l.abort(),i.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&QD(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await l0(r),new jf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await l0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return ss(this,arguments,function*(){const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield He(r.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),E=T.status,b=T.code,M=`got status: ${E}. ${JSON.stringify(_)}`;if(b>=400&&b<600)throw new Gl({message:M,status:b})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let y=c.match(a0);for(;y;){const _=y[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield He(new jf(T)),c=c.slice(y[0].length),y=c.match(a0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=YD+" "+this.clientOptions.userAgentExtra;return e[BD]=i,e[od]=i,e[VD]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(zD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const p={file:r},h=this.getFileName(e),y=te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,p,i?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var r;const l=this.clientOptions.uploader,c=await l.stat(i),d=String(c.size),p=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o?.customMetadata&&(_.customMetadata=o.customMetadata),o?.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const T=await this.fetchUploadUrl(h,d,p,y,_,o?.httpOptions);return l.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,r,l,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function l0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw i>=400&&i<600?new Gl({message:r,status:i}):new Error(r)}}function QD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[p]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const r=o(i,e);t.body=JSON.stringify(r)}const XD="mcp_used/unknown";let ZD=!1;function J_(t){for(const e of t)if(WD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ZD}function K_(t){var e;const i=(e=t[od])!==null&&e!==void 0?e:"";t[od]=(i+` ${XD}`).trimStart()}function WD(t){return t!==null&&typeof t=="object"&&t instanceof Od}function jD(t,e=100){return ss(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield He(t.listTools({cursor:o}));for(const c of l.tools)yield yield He(c),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Od{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Od(e,i)}async initialize(){var e,i,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var d=!0,p=(i=void 0,Dr(jD(y))),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){i={error:_}}finally{try{!d&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),YR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}async function e1(t,e,i){const o=new OR;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(o,r),e(o)}class t1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=o1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(U=>{h=U}),_=e.callbacks,T=function(){h({})},E=this.apiClient,b={onopen:T,onmessage:U=>{e1(E,_.onmessage,U)},onerror:(i=_?.onerror)!==null&&i!==void 0?i:function(U){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(U){}},M=this.webSocketFactory.create(p,i1(c),b);M.connect(),await y;const D={setup:{model:Re(this.apiClient,e.model)}};return M.send(JSON.stringify(D)),new n1(M,this.apiClient)}}class n1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=zx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Vx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ts.PLAY)}pause(){this.sendPlaybackControl(ts.PAUSE)}stop(){this.sendPlaybackControl(ts.STOP)}resetContext(){this.sendPlaybackControl(ts.RESET_CONTEXT)}close(){this.conn.close()}}function i1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function o1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const s1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function r1(t,e,i){const o=new kR;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=Yx(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class a1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new t1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&J_(e.config.tools)&&K_(_);const T=f1(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const j=this.apiClient.getApiKey();let ae="BidiGenerateContent",me="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ae="BidiGenerateContentConstrained",me="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ae}?${me}=${j}`}let E=()=>{};const b=new Promise(j=>{E=j}),M=e.callbacks,w=function(){var j;(j=M?.onopen)===null||j===void 0||j.call(M),E({})},R=this.apiClient,D={onopen:w,onmessage:j=>{r1(R,M.onmessage,j)},onerror:(i=M?.onerror)!==null&&i!==void 0?i:function(j){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(j){}},U=this.webSocketFactory.create(y,c1(T),D);U.connect(),await b;let J=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const j=this.apiClient.getProject(),ae=this.apiClient.getLocation();J=`projects/${j}/locations/${ae}/`+J}let B={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Nl.AUDIO]}:e.config.responseModalities=[Nl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const X=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],K=[];for(const j of X)if(this.isCallableTool(j)){const ae=j;K.push(await ae.tool())}else K.push(j);K.length>0&&(e.config.tools=K);const ne={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=Hx(this.apiClient,ne):B=Gx(this.apiClient,ne),delete B.config,U.send(JSON.stringify(B)),new u1(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l1={turnComplete:!0};class u1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=on(i.turns),e.isVertexAI()||(o=o.map(r=>Hl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(s1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},l1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Fx(e)}:i={realtimeInput:Bx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function c1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function f1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const u0=10;function c0(t){var e,i,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(rs(c)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function rs(t){return"callTool"in t&&typeof t.callTool=="function"}function d1(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>rs(r)))!==null&&o!==void 0?o:!1}function f0(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(rs(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function d0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class h1 extends Zn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,r,l,c,d;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!d1(i)||c0(i.config))return await this.generateContentInternal(p);const h=f0(i);if(h.length>0){const M=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let y,_;const T=on(p.contents),E=(l=(r=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:u0;let b=0;for(;b<E&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const M=y.candidates[0].content,w=[];for(const R of(d=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(rs(R)){const U=await R.callTool(y.functionCalls);w.push(...U)}b++,_={role:"user",parts:w},p.contents=on(p.contents),p.contents.push(M),p.contents.push(_),d0(p.config)&&(T.push(M),T.push(_))}return d0(p.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async i=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(i),c0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=f0(i);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=i?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(d=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((r=p?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=p?.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ro(Qn.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var o,r,l,c,d,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(d=i.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>rs(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&J_(e.config.tools)){const p=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),K_(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var i,o,r;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(rs(c)){const d=c,p=await d.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var i,o,r;const l=(r=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:u0;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,y,_){var T,E;return ss(this,arguments,function*(){for(var b,M,w,R;d<l;){c&&(d++,c=!1);const B=yield He(h.processParamsMaybeAddMcpUsage(_)),X=yield He(h.generateContentStreamInternal(B)),K=[],ne=[];try{for(var D=!0,U=(M=void 0,Dr(X)),J;J=yield He(U.next()),b=J.done,!b;D=!0){R=J.value,D=!1;const j=R;if(yield yield He(j),j.candidates&&(!((T=j.candidates[0])===null||T===void 0)&&T.content)){ne.push(j.candidates[0].content);for(const ae of(E=j.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(d<l&&ae.functionCall){if(!ae.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ae.functionCall.name)){const me=yield He(y.get(ae.functionCall.name).callTool([ae.functionCall]));K.push(...me)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ae.functionCall.name}`)}}}}catch(j){M={error:j}}finally{try{!D&&!b&&(w=U.return)&&(yield He(w.call(U)))}finally{if(M)throw M.error}}if(K.length>0){c=!0;const j=new _r;j.candidates=[{content:{role:"user",parts:K}}],yield yield He(j);const ae=[];ae.push(...ne),ae.push({role:"user",parts:K});const me=on(_.contents).concat(ae);_.contents=me}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=o0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=r0(y),T=new _r;return Object.assign(T,_),T})}else{const h=i0(this.apiClient,e);return d=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=s0(y),T=new _r;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=o0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return ss(this,arguments,function*(){var T,E,b,M;try{for(var w=!0,R=Dr(_),D;D=yield He(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const U=M,J=r0(yield He(U.json()));J.sdkHttpResponse={headers:U.headers};const B=new _r;Object.assign(B,J),yield yield He(B)}}catch(U){E={error:U}}finally{try{!w&&!T&&(b=R.return)&&(yield He(b.call(R)))}finally{if(E)throw E.error}}})})}else{const h=i0(this.apiClient,e);return d=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return ss(this,arguments,function*(){var T,E,b,M;try{for(var w=!0,R=Dr(_),D;D=yield He(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const U=M,J=s0(yield He(U.json()));J.sdkHttpResponse={headers:U.headers};const B=new _r;Object.assign(B,J),yield yield He(B)}}catch(U){E={error:U}}finally{try{!w&&!T&&(b=R.return)&&(yield He(b.call(R)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=SI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=CI(y),T=new Vv;return Object.assign(T,_),T})}else{const h=TI(this.apiClient,e);return d=te("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=EI(y),T=new Vv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=PI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=kI(y),T=new zv;return Object.assign(T,_),T})}else{const h=UI(this.apiClient,e);return d=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=LI(y),T=new zv;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=gI(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=yI(p),y=new bR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=PD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=LD(p),y=new MR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=mD(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=gD(p),y=new wR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=ED(this.apiClient,e);return l=te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=CD(p),y=new RR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=jI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>id(y))}else{const h=WI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>nd(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=lD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=cD(y),T=new Bv;return Object.assign(T,_),T})}else{const h=aD(this.apiClient,e);return d=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=uD(y),T=new Bv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=DD(this.apiClient,e);return d=te("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>id(y))}else{const h=ID(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>nd(y))}}async delete(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=dI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=pI(y),T=new Fv;return Object.assign(T,_),T})}else{const h=fI(this.apiClient,e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=hI(y),T=new Fv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=lI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=cI(y),T=new Yv;return Object.assign(T,_),T})}else{const h=aI(this.apiClient,e);return d=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=uI(y),T=new Yv;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=eI(this.apiClient,e);return l=te("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=tI(p),y=new NR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=zI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=HI(y),T=new xl;return Object.assign(T,_),T})}else{const h=VI(this.apiClient,e);return d=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=GI(y),T=new xl;return Object.assign(T,_),T})}}}class p1 extends Zn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=_R(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=vR(e);return d=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=fR(e);return l=te("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function m1(t){const e={},i=f(t,["data"]);if(i!=null&&m(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function g1(t){const e={},i=f(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>b1(l))),m(e,["parts"],r)}const o=f(t,["role"]);return o!=null&&m(e,["role"],o),e}function y1(t,e,i){const o={},r=f(e,["expireTime"]);i!==void 0&&r!=null&&m(i,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=f(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const d=f(e,["liveConnectConstraints"]);i!==void 0&&d!=null&&m(i,["bidiGenerateContentSetup"],A1(t,d));const p=f(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),o}function v1(t,e){const i={},o=f(e,["config"]);return o!=null&&m(i,["config"],y1(t,o,i)),i}function _1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=f(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function T1(t){const e={},i=f(t,["id"]);i!=null&&m(e,["id"],i);const o=f(t,["args"]);o!=null&&m(e,["args"],o);const r=f(t,["name"]);if(r!=null&&m(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function S1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function E1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function C1(t,e){const i={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=f(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const d=f(t,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=f(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=f(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],kd(_));const T=f(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],E);const b=f(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],g1(Tt(b)));const M=f(t,["tools"]);if(e!==void 0&&M!=null){let X=gs(M);Array.isArray(X)&&(X=X.map(K=>w1(ms(K)))),m(e,["setup","tools"],X)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],M1(w));const R=f(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=f(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&m(e,["setup","realtimeInputConfig"],U);const J=f(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=f(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function A1(t,e){const i={},o=f(e,["model"]);o!=null&&m(i,["setup","model"],Re(t,o));const r=f(e,["config"]);return r!=null&&m(i,["config"],C1(r,i)),i}function b1(t){const e={},i=f(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=f(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=f(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=f(t,["fileData"]);l!=null&&m(e,["fileData"],_1(l));const c=f(t,["functionCall"]);c!=null&&m(e,["functionCall"],T1(c));const d=f(t,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(t,["inlineData"]);p!=null&&m(e,["inlineData"],m1(p));const h=f(t,["text"]);h!=null&&m(e,["text"],h);const y=f(t,["thought"]);y!=null&&m(e,["thought"],y);const _=f(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=f(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function M1(t){const e={},i=f(t,["handle"]);if(i!=null&&m(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function w1(t){const e={},i=f(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=f(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=f(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=f(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&m(e,["googleMaps"],S1(d));const p=f(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],E1(p));const h=f(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function R1(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function N1(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=R1(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class x1 extends Zn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=v1(this.apiClient,e);l=te("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=N1(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}function I1(t,e){const i={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),i}function D1(t){const e={},i=f(t,["config"]);return i!=null&&I1(i,e),e}function U1(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function P1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&U1(o,e),e}function L1(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function k1(t,e){const i={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),i}function O1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["name"],i);const o=f(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=f(t,["done"]);r!=null&&m(e,["done"],r);const l=f(t,["error"]);l!=null&&m(e,["error"],l);const c=f(t,["response"]);return c!=null&&m(e,["response"],G1(c)),e}function q1(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=f(t,["config"]);return r!=null&&k1(r,e),e}function G1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["parent"]);o!=null&&m(e,["parent"],o);const r=f(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function H1(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function V1(t){const e={},i=f(t,["config"]);return i!=null&&H1(i,e),e}function z1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function B1(t,e){const i={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function F1(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=f(t,["config"]);return o!=null&&B1(o,e),e}function Y1(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function $1(t,e){const i={},o=f(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function J1(t){const e={},i=f(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=f(t,["config"]);return o!=null&&$1(o,e),e}function K1(t){const e={},i=f(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Q1(t,e){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function X1(t){const e={},i=f(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const o=f(t,["config"]);return o!=null&&Q1(o,e),e}function Z1(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=f(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}class W1 extends Zn{constructor(e){super(),this.apiClient=e,this.list=async i=>new ro(Qn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=K1(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=J1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=X1(e);return l=te("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Z1(p),y=new xR;return Object.assign(y,h),y})}}}class j1 extends Zn{constructor(e,i=new W1(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new ro(Qn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=D1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L1(e);return l=te("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=P1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=V1(e);return l=te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=z1(p),y=new IR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F1(e);return l=te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Y1(p),y=new DR;return Object.assign(y,h),y})}}async importFile(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=q1(e);return l=te("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=O1(p),y=new Id;return Object.assign(y,h),y})}}}function eU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function tU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function nU(t,e,i){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function iU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=f(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec"],h0(E))}else if(r==="PREFERENCE_TUNING"){const E=f(t,["validationDataset"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec"],h0(E))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let d=f(i,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const E=f(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(d==="PREFERENCE_TUNING"){const E=f(t,["epochCount"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=f(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=f(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=f(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(h==="PREFERENCE_TUNING"){const E=f(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let y=f(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const E=f(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(y==="PREFERENCE_TUNING"){const E=f(t,["adapterSize"]);e!==void 0&&E!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=f(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function oU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&mU(l);const c=f(t,["config"]);return c!=null&&nU(c,i),i}function sU(t,e){const i={},o=f(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=f(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=f(t,["trainingDataset"]);l!=null&&gU(l,i,e);const c=f(t,["config"]);return c!=null&&iU(c,i,e),i}function rU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function aU(t,e){const i={},o=f(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function lU(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function uU(t,e,i){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function cU(t,e){const i={},o=f(t,["config"]);return o!=null&&lU(o,i),i}function fU(t,e){const i={},o=f(t,["config"]);return o!=null&&uU(o,i),i}function dU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Q_(d))),m(i,["tuningJobs"],c)}return i}function hU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>sd(d))),m(i,["tuningJobs"],c)}return i}function pU(t,e){const i={},o=f(t,["name"]);o!=null&&m(i,["model"],o);const r=f(t,["name"]);return r!=null&&m(i,["endpoint"],r),i}function mU(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(i,["examples","examples"],r)}return i}function gU(t,e,i){const o={};let r=f(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Q_(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],x_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["tuningTask","startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["description"]);y!=null&&m(i,["description"],y);const _=f(t,["baseModel"]);_!=null&&m(i,["baseModel"],_);const T=f(t,["_self"]);return T!=null&&m(i,["tunedModel"],pU(T)),i}function sd(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["state"]);l!=null&&m(i,["state"],x_(l));const c=f(t,["createTime"]);c!=null&&m(i,["createTime"],c);const d=f(t,["startTime"]);d!=null&&m(i,["startTime"],d);const p=f(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=f(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=f(t,["error"]);y!=null&&m(i,["error"],y);const _=f(t,["description"]);_!=null&&m(i,["description"],_);const T=f(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const E=f(t,["tunedModel"]);E!=null&&m(i,["tunedModel"],E);const b=f(t,["preTunedModel"]);b!=null&&m(i,["preTunedModel"],b);const M=f(t,["supervisedTuningSpec"]);M!=null&&m(i,["supervisedTuningSpec"],M);const w=f(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const R=f(t,["tuningDataStats"]);R!=null&&m(i,["tuningDataStats"],R);const D=f(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const U=f(t,["partnerModelTuningSpec"]);U!=null&&m(i,["partnerModelTuningSpec"],U);const J=f(t,["customBaseModel"]);J!=null&&m(i,["customBaseModel"],J);const B=f(t,["experiment"]);B!=null&&m(i,["experiment"],B);const X=f(t,["labels"]);X!=null&&m(i,["labels"],X);const K=f(t,["outputUri"]);K!=null&&m(i,["outputUri"],K);const ne=f(t,["pipelineJob"]);ne!=null&&m(i,["pipelineJob"],ne);const j=f(t,["serviceAccount"]);j!=null&&m(i,["serviceAccount"],j);const ae=f(t,["tunedModelDisplayName"]);ae!=null&&m(i,["tunedModelDisplayName"],ae);const me=f(t,["veoTuningSpec"]);return me!=null&&m(i,["veoTuningSpec"],me),i}function yU(t,e){const i={},o=f(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=f(t,["name"]);r!=null&&m(i,["name"],r);const l=f(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=f(t,["done"]);c!=null&&m(i,["done"],c);const d=f(t,["error"]);return d!=null&&m(i,["error"],d),i}function h0(t,e){const i={},o=f(t,["gcsUri"]);o!=null&&m(i,["validationDatasetUri"],o);const r=f(t,["vertexDatasetResource"]);return r!=null&&m(i,["validationDatasetUri"],r),i}class vU extends Zn{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new ro(Qn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Wf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=aU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>sd(y))}else{const h=rU(e);return d=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>Q_(y))}}async listInternal(e){var i,o,r,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const h=fU(e);return d=te("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=hU(y),T=new $v;return Object.assign(T,_),T})}else{const h=cU(e);return d=te("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dU(y),T=new $v;return Object.assign(T,_),T})}}async cancel(e){var i,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const p=tU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=eU(e);c=te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=sU(e,e);return l=te("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>sd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oU(e);return l=te("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>yU(p))}}}class _U{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const TU=1024*1024*8,SU=3,EU=1e3,CU=2,Dl="x-goog-upload-status";async function AU(t,e,i){var o;const r=await X_(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function bU(t,e,i){var o;const r=await X_(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=A_(l),d=new Dd;return Object.assign(d,c),d}async function X_(t,e,i){var o,r;let l=0,c=0,d=new jf(new Response),p="upload";for(l=t.size;c<l;){const h=Math.min(TU,l-c),y=t.slice(c,c+h);c+h>=l&&(p+=", finalize");let _=0,T=EU;for(;_<SU&&(d=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[Dl]));)_++,await wU(T),T=T*CU;if(c+=h,((r=d?.headers)===null||r===void 0?void 0:r[Dl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function MU(t){return{size:t.size,type:t.type}}function wU(t){return new Promise(e=>setTimeout(e,t))}class RU{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AU(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bU(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MU(e)}}class NU{create(e,i,o){return new xU(e,i,o)}}class xU{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const p0="x-goog-api-key";class IU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(p0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(p0,this.apiKey)}}}const DU="gl-node/";class Z_{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=uR(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new IU(this.apiKey);this.apiClient=new KD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:DU+"web",uploader:new RU,downloader:new _U}),this.models=new h1(this.apiClient),this.live=new a1(this.apiClient,r,new NU),this.batches=new qN(this.apiClient),this.chats=new _x(this.models,this.apiClient),this.caches=new gx(this.apiClient),this.files=new Nx(this.apiClient),this.operations=new p1(this.apiClient),this.authTokens=new x1(this.apiClient),this.tunings=new vU(this.apiClient),this.fileSearchStores=new j1(this.apiClient)}}let Ur=null;function UU(t){localStorage.setItem("gemini_api_key",t),Ur=new Z_({apiKey:t})}function W_(){return localStorage.getItem("gemini_api_key")}function rd(){return!!W_()}function PU(){Ur=null,localStorage.removeItem("gemini_api_key")}function LU(){if(!Ur){const t=W_();if(!t)throw new Error("Gemini API key not set. Add your key in Settings.");Ur=new Z_({apiKey:t})}return Ur}function kU(t){return t.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim()}async function OU(t){const e=LU(),i=`Analyze this meal and provide complete nutritional breakdown:

"${t}"

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece",
      "grams": number,
      "nutrients": {
        "calories": number,
        "purines": number,
        "protein": number,
        "carbs": number,
        "fat": number,
        "fiber": number,
        "sodium": number,
        "sugar": number
      }
    }
  ],
  "total_nutrients": {
    "calories": number,
    "purines": number,
    "protein": number,
    "carbs": number,
    "fat": number,
    "fiber": number,
    "sodium": number,
    "sugar": number
  }
}

Rules:
- Make reasonable portion estimates if not specified (e.g., "an egg" = 50g, "a glass of juice" = 250ml)
- "grams" is the converted weight in grams for the specified quantity
- "nutrients" are the values for THAT ingredient's quantity (not per 100g)
- "total_nutrients" is the sum of all ingredients
- Use USDA database values. For purines, use medical references (high purine foods: organ meats, sardines, anchovies ~300-800mg/100g; moderate: beef, pork ~100-200mg/100g; low: eggs, dairy, most vegetables ~0-50mg/100g)
- All values: calories=kcal, purines/sodium=mg, all others=grams`;try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i})).text;return JSON.parse(kU(r))}catch(o){throw console.error("Failed to analyze meal:",o),new Error(`Failed to analyze meal: ${o.message}`)}}async function qU(t){const e=await OU(t),i=e.ingredients.map(o=>{const r=o.grams||100,l=100/r,c=HU(o.nutrients,l);return{name:o.name,normalized_name:GU(o.name),quantity:o.quantity,unit:o.unit,grams:r,nutrients_per_100g:c,nutrients_per_unit:o.nutrients}});return{meal_name:e.meal_name,ingredients:i,total_nutrients:e.total_nutrients}}function GU(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}function HU(t,e){const i={};return Object.keys(t).forEach(o=>{i[o]=Math.round(t[o]*e*10)/10}),i}const vf=[{key:"breakfast",icon:"",label:"Brekkie"},{key:"lunch",icon:"",label:"Lunch"},{key:"dinner",icon:"",label:"Dinner"},{key:"snack",icon:"",label:"Snack"}],_f=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},VU=t=>{const e=[];for(let i=-3;i<=3;i++){const o=new Date(t);o.setDate(o.getDate()+i),e.push({date:o,dateKey:_f(o),dayName:o.toLocaleDateString("en-US",{weekday:"short"}).charAt(0),dayNum:o.getDate(),isToday:_f(o)===_f(new Date)})}return e};function zU(){const{user:t,isLoading:e}=zr(),[i,o]=P.useState(Vy()),[r,l]=P.useState(new Date),[c,d]=P.useState("breakfast"),[p,h]=P.useState(""),[y,_]=P.useState(!1),[T,E]=P.useState(!1),[b,M]=P.useState(null),[w,R]=P.useState(null),[D,U]=P.useState(""),[J,B]=P.useState("snack"),[X,K]=P.useState(""),[ne,j]=P.useState(null),[ae,me]=P.useState(""),{meals:ue,isLoading:be,addMeal:$e,updateMeal:Qe,deleteMeal:V,getDailyTotals:Z}=E_(i),{totalHydration:se,adjustHydration:Q,isLoading:fe}=C_(i),{addToStash:x,bottles:Y}=Nd(),ee=[...[{id:"quick-250",name:"+250ml",capacity_ml:250,icon:null},{id:"quick-500",name:"+500ml",capacity_ml:500,icon:null}],...Y],de=VU(r),re=t?.thresholds||{},Ae=ue.filter(W=>W.meal_type!=="hydration"),Ne={...Z(i)},Ui=sR(Ne,re),ao=e||be||fe,lo=async W=>{await Q(W)},Br=W=>{o(W)},pn=W=>{const ze=new Date(r);ze.setDate(ze.getDate()+(W==="next"?7:-7)),l(ze)},vs=async W=>{if(W.preventDefault(),!!p.trim()){if(M(null),!rd()){await $e({date:i,meal_type:c,meal_name:p,ingredients:[],total_nutrients:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},hydration_ml:0,analysis_method:"manual"}),h("");return}E(!0);try{const{meal_name:ze,ingredients:jn,total_nutrients:ei}=await qU(p);await $e({date:i,meal_type:c,meal_name:ze,description:p,ingredients:jn,total_nutrients:ei,hydration_ml:0,analysis_method:"ai"}),h("")}catch(ze){console.error("AI parsing failed:",ze),M(ze.message||"Failed to analyze meal. Try again or check your API key.")}finally{E(!1)}}},_s=async W=>{confirm("Delete this meal?")&&await V(W)},Bl=W=>{R(W),U(W.meal_name),B(W.meal_type),K(W.date)},Fr=async()=>{w&&(await Qe(w.id,{meal_name:D,meal_type:J,date:X}),R(null))},uo=()=>{R(null),U(""),B("snack"),K("")},Ts=W=>{j(W),me(Vy())},Ss=async()=>{if(!ne||!ae)return;const W={date:ae,meal_type:ne.meal_type,meal_name:ne.meal_name,description:ne.description,ingredients:ne.ingredients,total_nutrients:ne.total_nutrients,hydration_ml:0,analysis_method:"copy"};await $e(W),j(null),alert(`Meal copied to ${ae}! `)},Fl=async W=>{await x({type:"meal",name:W.meal_name,ingredients:W.ingredients||[],total_nutrients:W.total_nutrients||{},use_count:0}),alert(`"${W.meal_name}" saved to your Dragon's Hoard! `)},St=(W=>{const[ze,jn,ei]=W.split("-").map(Number);return new Date(ze,jn-1,ei)})(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});return ao?C.jsxs("div",{className:"page diary-page",children:[C.jsx(xi,{title:"Dragon Keeper",subtitle:"Loading..."}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Waking up the dragon..."})]})]}):C.jsxs("div",{className:"page diary-page",children:[C.jsx(xi,{title:"Dragon Keeper",subtitle:`Feeding log for ${St}`}),C.jsxs("div",{className:"calendar-ribbon card",children:[C.jsx("button",{className:"cal-nav",onClick:()=>pn("prev"),"aria-label":"Previous week",children:""}),C.jsx("div",{className:"cal-days",children:de.map(W=>{const ze=W.dateKey===i;return C.jsxs("button",{className:`cal-day ${ze?"active":""} ${W.isToday?"today":""}`,onClick:()=>Br(W.dateKey),children:[C.jsx("span",{className:"cal-day-name",children:W.dayName}),C.jsx("span",{className:"cal-day-num",children:W.dayNum}),W.isToday&&C.jsx("span",{className:"cal-day-indicator",children:""})]},W.dateKey)})}),C.jsx("button",{className:"cal-nav",onClick:()=>pn("next"),"aria-label":"Next week",children:""})]}),C.jsx("div",{className:"meal-type-selector",children:vf.map(W=>C.jsxs("button",{className:`meal-type-btn ${c===W.key?"active":""}`,onClick:()=>d(W.key),children:[C.jsx("span",{className:"meal-icon",children:W.icon}),C.jsx("span",{className:"meal-label",children:W.label})]},W.key))}),C.jsxs("form",{className:"meal-input-section card",onSubmit:vs,children:[C.jsx("label",{className:"input-label",children:"What did your dragon eat? "}),C.jsx("div",{className:"input-row",children:C.jsx("input",{type:"text",placeholder:"e.g., grilled chicken with rice...",value:p,onChange:W=>h(W.target.value),disabled:T})}),b&&C.jsx("div",{className:"ai-error",children:C.jsxs("span",{children:[" ",b]})}),C.jsxs("div",{className:"input-actions",children:[C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),C.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:T||!p.trim(),children:T?C.jsx(C.Fragment,{children:" Analyzing..."}):C.jsx(C.Fragment,{children:"Log It! "})})]}),!rd()&&C.jsx("p",{className:"no-api-hint text-muted text-sm",children:" Set up AI in Settings  Dragon's Intelligence to auto-analyze meals!"})]}),C.jsxs("div",{className:"hydration-section card",children:[C.jsxs("div",{className:"hydration-header",children:[C.jsx("span",{className:"hydration-title",children:" Dragon's Hydration"}),C.jsxs("span",{className:"hydration-value",children:[se,"/",re.hydration_target||2e3,"ml"]})]}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:`progress-bar-fill ${se>=(re.hydration_target||2e3)?"success":"warning"}`,style:{width:`${Math.min(se/(re.hydration_target||2e3)*100,100)}%`}})}),C.jsxs("div",{className:"hydration-buttons",children:[C.jsx("button",{className:"btn btn-secondary btn-danger-outline",onClick:()=>lo(-250),children:"250"}),ee.map(W=>C.jsxs("button",{className:"btn btn-secondary",onClick:()=>lo(W.capacity_ml),children:[W.icon||"",W.icon?" ":"",W.name||`+${W.capacity_ml}ml`]},W.id))]})]}),C.jsxs("section",{className:"meals-section",children:[C.jsx("h2",{className:"section-title",children:"Today's Feast"}),Ae.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx(Rl,{state:"curious"}),C.jsx("p",{children:"No meals logged yet today!"}),C.jsx("p",{className:"text-muted",children:"Feed your dragon to get started."})]}):C.jsx("div",{className:"meals-list",children:Ae.map(W=>C.jsxs("div",{className:"meal-card card",children:[C.jsxs("div",{className:"meal-header",children:[C.jsx("span",{className:"meal-type-badge",children:vf.find(ze=>ze.key===W.meal_type)?.icon||""}),C.jsx("h3",{className:"meal-name",children:W.meal_name})]}),W.ingredients&&W.ingredients.length>0&&C.jsx("ul",{className:"meal-ingredients",children:W.ingredients.map((ze,jn)=>C.jsxs("li",{children:[C.jsxs("span",{className:"ing-name",children:[" ",ze.name]}),C.jsxs("span",{className:"ing-qty",children:["(",ze.quantity,ze.unit,")"]}),C.jsxs("span",{className:"ing-nutrients",children:["",Math.round(ze.nutrients_per_unit?.calories||0),"  ",Math.round(ze.nutrients_per_unit?.purines||0)]})]},jn))}),C.jsxs("div",{className:"meal-nutrients meal-totals",children:[C.jsx("span",{className:"total-label",children:"Total:"}),C.jsxs("span",{children:[" ",Math.round(W.total_nutrients?.calories||0)," cal"]}),C.jsxs("span",{children:[" ",Math.round(W.total_nutrients?.purines||0),"mg"]})]}),C.jsxs("div",{className:"meal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>Bl(W),children:" Edit"}),C.jsx("button",{className:"btn btn-secondary",onClick:()=>Ts(W),children:" Copy"}),C.jsx("button",{className:"btn btn-secondary",onClick:()=>_s(W.id),children:""}),C.jsx("button",{className:"btn btn-secondary",onClick:()=>Fl(W),children:" Stash"})]})]},W.id))})]}),C.jsxs("section",{className:"daily-status card",children:[C.jsxs("div",{className:"status-header",onClick:()=>_(!y),children:[C.jsx("h3",{children:" Dragon's Daily Status"}),C.jsx(Rl,{state:Ui,showMessage:!1,size:"small"}),C.jsx("span",{className:"toggle-hint",children:y?"":""})]}),C.jsx(Vn,{nutrient:"calories",value:Ne.calories||0,target:re.calories_max||2e3,min:re.calories_min||1500,max:re.calories_max||2e3}),C.jsx(Vn,{nutrient:"purines",value:Ne.purines||0,target:re.purines_max||400,max:re.purines_max||400}),y&&C.jsxs("div",{className:"all-nutrients animate-fade-in",children:[C.jsx(Vn,{nutrient:"protein",value:Ne.protein||0,target:re.protein_target||60,compact:!0}),C.jsx(Vn,{nutrient:"carbs",value:Ne.carbs||0,target:re.carbs_target||250,compact:!0}),C.jsx(Vn,{nutrient:"fat",value:Ne.fat||0,target:re.fat_target||65,compact:!0}),C.jsx(Vn,{nutrient:"fiber",value:Ne.fiber||0,target:re.fiber_target||30,compact:!0}),C.jsx(Vn,{nutrient:"sodium",value:Ne.sodium||0,target:re.sodium_max||2300,max:re.sodium_max||2300,compact:!0}),C.jsx(Vn,{nutrient:"sugar",value:Ne.sugar||0,target:re.sugar_max||50,max:re.sugar_max||50,compact:!0}),C.jsx(Vn,{nutrient:"hydration",value:se,target:re.hydration_target||2e3,compact:!0})]})]}),w&&C.jsx("div",{className:"modal-overlay",onClick:uo,children:C.jsxs("div",{className:"modal-content card",onClick:W=>W.stopPropagation(),children:[C.jsx("h2",{children:" Edit Meal"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Meal Name"}),C.jsx("input",{type:"text",value:D,onChange:W=>U(W.target.value),placeholder:"e.g., Grilled Chicken"})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Meal Type"}),C.jsx("select",{value:J,onChange:W=>B(W.target.value),children:vf.map(W=>C.jsxs("option",{value:W.key,children:[W.icon," ",W.label]},W.key))})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Date (move to different day)"}),C.jsx("input",{type:"date",value:X,onChange:W=>K(W.target.value)})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:uo,children:"Cancel"}),C.jsx("button",{className:"btn btn-primary",onClick:Fr,children:" Save"})]})]})}),ne&&C.jsx("div",{className:"modal-overlay",onClick:()=>j(null),children:C.jsxs("div",{className:"modal-content card",onClick:W=>W.stopPropagation(),children:[C.jsx("h2",{children:" Copy Meal"}),C.jsxs("p",{children:['Copy "',ne.meal_name,'" to another date:']}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Target Date"}),C.jsx("input",{type:"date",value:ae,onChange:W=>me(W.target.value)})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:()=>j(null),children:"Cancel"}),C.jsx("button",{className:"btn btn-primary",onClick:Ss,children:" Copy Meal"})]})]})})]})}function BU(){return C.jsxs("div",{className:"page charts-page",children:[C.jsx(xi,{title:"Dragon's Scroll",subtitle:"View your nutrition history"}),C.jsxs("div",{className:"coming-soon card",children:[C.jsx(Rl,{state:"curious"}),C.jsx("h2",{children:"Coming Soon!"}),C.jsx("p",{className:"text-muted",children:"The Dragon's Scroll will show beautiful charts of your nutrition history."}),C.jsxs("ul",{className:"feature-list",children:[C.jsx("li",{children:" View by week, month, or custom range"}),C.jsx("li",{children:" Daily, weekly, or monthly grouping"}),C.jsx("li",{children:" Filter by nutrient type"}),C.jsx("li",{children:" Export your data"})]})]})]})}function FU(){return C.jsxs("div",{className:"page oracle-page",children:[C.jsx(xi,{title:"Dragon Oracle",subtitle:"Get meal recommendations"}),C.jsxs("div",{className:"coming-soon card",children:[C.jsx(Rl,{state:"curious"}),C.jsx("h2",{children:"Coming Soon!"}),C.jsx("p",{className:"text-muted",children:"The Dragon Oracle will suggest meals based on your remaining nutrition budget."}),C.jsxs("ul",{className:"feature-list",children:[C.jsx("li",{children:" Familiar meals you love"}),C.jsx("li",{children:" Twisted versions of favorites"}),C.jsx("li",{children:" Wild new adventures"}),C.jsx("li",{children:" AI-powered recommendations"})]})]})]})}function YU(){const t=Pl(),{user:e,isLoading:i,updateProfile:o,updateThresholds:r,updateTheme:l,saveUser:c}=zr(),{savedMeals:d,bottles:p}=Nd(),[h,y]=P.useState({name:"Dragon Keeper",sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]}),[_,T]=P.useState(Qf),[E,b]=P.useState("emerald"),[M,w]=P.useState("#66BB6A"),[R,D]=P.useState(!1),[U,J]=P.useState(!1),[B,X]=P.useState(""),[K,ne]=P.useState(!1),[j,ae]=P.useState(rd()?"saved":"none");P.useEffect(()=>{e&&(y({name:e.name||"Dragon Keeper",...e.profile}),T(e.thresholds||Qf),b(e.theme?.preset||"emerald"),w(e.theme?.seed_color_hex||"#66BB6A"))},[e]);const me=()=>{const Q=Ww(h);T(Q),J(!0)},ue=(Q,fe)=>{T(x=>({...x,[Q]:Number(fe)})),J(!0)},be=Q=>{y(fe=>({...fe,...Q})),J(!0)},$e=async Q=>{b(Q);const fe=Ir[Q],x=to(fe.seedColor,fe.isDark);no(x),await l(Q,fe.seedColor)},Qe=async Q=>{w(Q),b("custom");const fe=to(Q,!1);no(fe),await l("custom",Q)},V=()=>{B.trim()&&(UU(B.trim()),ae("saved"),X(""),ne(!1),alert("AI API key saved! Your dragon can now analyze meals. "))},Z=()=>{confirm("Remove your AI API key? Your dragon won't be able to analyze meals.")&&(PU(),ae("none"),X(""))},se=async()=>{const Q={...e,name:h.name,profile:{sex:h.sex,age:h.age,weight_kg:h.weight_kg,height_cm:h.height_cm,activity_level:h.activity_level,dietary_conditions:h.dietary_conditions},thresholds:_};await o(Q.profile),await r(_),await c(Q),J(!1),alert("Dragon's settings saved! ")};return i?C.jsxs("div",{className:"page settings-page",children:[C.jsx(xi,{title:"Dragon's Lair",subtitle:"Loading..."}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Opening the lair..."})]})]}):C.jsxs("div",{className:"page settings-page",children:[C.jsx(xi,{title:"Dragon's Lair",subtitle:"Configure your dragon's needs"}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Keeper's Profile"}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Name"}),C.jsx("input",{type:"text",value:h.name,onChange:Q=>be({name:Q.target.value})})]}),C.jsxs("div",{className:"form-row",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Sex"}),C.jsxs("select",{value:h.sex,onChange:Q=>be({sex:Q.target.value}),children:[C.jsx("option",{value:"male",children:"Male"}),C.jsx("option",{value:"female",children:"Female"}),C.jsx("option",{value:"other",children:"Other"})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Age"}),C.jsx("input",{type:"number",value:h.age,onChange:Q=>be({age:parseInt(Q.target.value)})})]})]}),C.jsxs("div",{className:"form-row",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Weight (kg)"}),C.jsx("input",{type:"number",value:h.weight_kg,onChange:Q=>be({weight_kg:parseInt(Q.target.value)})})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Height (cm)"}),C.jsx("input",{type:"number",value:h.height_cm,onChange:Q=>be({height_cm:parseInt(Q.target.value)})})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Activity Level"}),C.jsxs("select",{value:h.activity_level,onChange:Q=>be({activity_level:Q.target.value}),children:[C.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),C.jsx("option",{value:"light",children:"Light (1-3 days/week)"}),C.jsx("option",{value:"moderate",children:"Moderate (3-5 days/week)"}),C.jsx("option",{value:"active",children:"Active (6-7 days/week)"}),C.jsx("option",{value:"very_active",children:"Very Active (intense daily)"})]})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Dietary Conditions"}),C.jsx("div",{className:"checkbox-group",children:["gout","diabetes","kidney_disease","vegetarian","vegan"].map(Q=>C.jsxs("label",{className:"checkbox-label",children:[C.jsx("input",{type:"checkbox",checked:h.dietary_conditions?.includes(Q)||!1,onChange:fe=>{const x=fe.target.checked?[...h.dietary_conditions||[],Q]:(h.dietary_conditions||[]).filter(Y=>Y!==Q);be({dietary_conditions:x})}}),C.jsx("span",{children:Q.replace("_"," ")})]},Q))})]}),C.jsx("button",{className:"btn btn-primary w-full",onClick:me,children:"Calculate Dragon's Needs "}),U&&C.jsx("button",{className:"btn btn-primary w-full mt-sm",onClick:se,children:" Save All Changes"})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon's Hoard"}),C.jsx("p",{className:"text-muted",children:"Manage your saved meals and custom bottles."}),C.jsxs("div",{className:"stash-buttons",children:[C.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash"),children:[" Saved Meals (",d?.length||0,")"]}),C.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash?tab=bottles"),children:[" Custom Bottles (",p?.length||0,")"]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsxs("div",{className:"section-header-row",children:[C.jsx("h2",{className:"section-title",children:" Nutrition Thresholds"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>D(!R),children:R?"Done":"Edit"})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Calories"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.calories_min,onChange:Q=>ue("calories_min",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"-"}),C.jsx("input",{type:"number",value:_.calories_max,onChange:Q=>ue("calories_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"kcal"})]}):C.jsxs("span",{className:"threshold-value",children:[_.calories_min," - ",_.calories_max," kcal"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Purines"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.purines_max,onChange:Q=>ue("purines_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"mg max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.purines_max," mg max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Protein"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.protein_target,onChange:Q=>ue("protein_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.protein_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Carbs"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.carbs_target,onChange:Q=>ue("carbs_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.carbs_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Fat"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.fat_target,onChange:Q=>ue("fat_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.fat_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Fiber"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.fiber_target,onChange:Q=>ue("fiber_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.fiber_target," g target"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Sodium"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.sodium_max,onChange:Q=>ue("sodium_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"mg max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.sodium_max," mg max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Sugar"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.sugar_max,onChange:Q=>ue("sugar_max",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"g max"})]}):C.jsxs("span",{className:"threshold-value",children:[_.sugar_max," g max"]})]}),C.jsxs("div",{className:"threshold-row",children:[C.jsx("span",{className:"threshold-label",children:" Hydration"}),R?C.jsxs("div",{className:"threshold-inputs",children:[C.jsx("input",{type:"number",value:_.hydration_target,onChange:Q=>ue("hydration_target",Q.target.value),className:"threshold-input"}),C.jsx("span",{children:"ml target"})]}):C.jsxs("span",{className:"threshold-value",children:[_.hydration_target," ml target"]})]}),R&&C.jsx("p",{className:"text-muted text-center mt-sm",children:`Tip: Use "Calculate Dragon's Needs" to auto-fill based on your profile.`})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon Scale Theme"}),C.jsx("div",{className:"theme-presets",children:Object.entries(Ir).map(([Q,fe])=>C.jsxs("button",{className:`theme-preset ${E===Q?"active":""}`,onClick:()=>$e(Q),style:{"--preset-color":fe.seedColor},children:[C.jsx("span",{className:"preset-swatch",style:{background:fe.seedColor}}),C.jsx("span",{className:"preset-name",children:fe.name}),C.jsx("span",{className:"preset-desc",children:fe.description})]},Q))}),C.jsxs("div",{className:"custom-color-section",children:[C.jsx("label",{children:"Custom Dragon Scale Color"}),C.jsxs("div",{className:"color-picker-row",children:[C.jsx("input",{type:"color",value:M,onChange:Q=>Qe(Q.target.value),className:"color-picker"}),C.jsx("input",{type:"text",value:M,onChange:Q=>Qe(Q.target.value),className:"color-input",placeholder:"#66BB6A"})]})]}),C.jsxs("div",{className:"theme-preview card",children:[C.jsx("p",{className:"preview-label",children:"Preview"}),C.jsxs("div",{className:"preview-content",children:[C.jsx("div",{className:"preview-text",children:"Sample text"}),C.jsx("button",{className:"btn btn-primary",children:"Button"}),C.jsx("div",{className:"progress-bar",children:C.jsx("div",{className:"progress-bar-fill success",style:{width:"60%"}})})]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon Statistics"}),C.jsxs("div",{className:"stats-grid",children:[C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.stats?.total_meals_logged||0}),C.jsx("span",{className:"stat-label",children:"Meals logged"})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.stats?.current_streak_days||0}),C.jsx("span",{className:"stat-label",children:"Day streak "})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:(d?.length||0)+(p?.length||0)}),C.jsx("span",{className:"stat-label",children:"In hoard"})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-value",children:e?.badges?.length||0}),C.jsx("span",{className:"stat-label",children:"Badges"})]})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" Dragon's Intelligence"}),C.jsx("p",{className:"text-muted mb-md",children:"Connect your dragon to Google's AI to automatically analyze meals from text descriptions or photos."}),j==="saved"?C.jsxs("div",{className:"api-key-status",children:[C.jsx("div",{className:"status-badge success",children:C.jsx("span",{children:" AI Connected"})}),C.jsx("p",{className:"text-muted text-sm mt-sm",children:"Your dragon can analyze meals. Key stored locally on this device."}),C.jsx("button",{className:"btn btn-secondary btn-danger-outline mt-sm",onClick:Z,children:" Remove API Key"})]}):C.jsxs("div",{className:"api-key-form",children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Google AI Studio API Key"}),C.jsxs("div",{className:"input-with-toggle",children:[C.jsx("input",{type:K?"text":"password",value:B,onChange:Q=>X(Q.target.value),placeholder:"AIza...",className:"api-key-input"}),C.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>ne(!K),children:K?"":""})]}),C.jsxs("p",{className:"input-help",children:["Get your free key at"," ",C.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio "})]})]}),C.jsx("button",{className:"btn btn-primary w-full",onClick:V,disabled:!B.trim(),children:" Save API Key"})]})]}),C.jsxs("section",{className:"settings-section card",children:[C.jsx("h2",{className:"section-title",children:" About"}),C.jsxs("p",{className:"text-center text-muted",children:["Purine Control v1.0.0",C.jsx("br",{}),`"The Dragon Keeper's Nutrition Tracker"`]}),C.jsx("p",{className:"text-center text-muted mt-md",children:"Made with  for your dragon"})]})]})}const $U=[{id:"default-1",name:"Water Glass",capacity_ml:250,icon:"",type:"container"},{id:"default-2",name:"Water Bottle",capacity_ml:500,icon:"",type:"container"},{id:"default-3",name:"Dragon Chalice",capacity_ml:750,icon:"",type:"container"}],JU=[{key:"meals",label:" Saved Meals",icon:""},{key:"bottles",label:" Bottles",icon:""}],KU=["","","","","","","",""];function QU(){const t=Pl(),[e,i]=YC(),o=e.get("tab")||"meals",[r,l]=P.useState(o),[c,d]=P.useState(""),[p,h]=P.useState(!1),[y,_]=P.useState(null),[T,E]=P.useState(""),[b,M]=P.useState(""),[w,R]=P.useState(250),[D,U]=P.useState({calories:0,purines:0,protein:0,carbs:0,fat:0}),{savedMeals:J,bottles:B,isLoading:X,addToStash:K,removeFromStash:ne,updateStashItem:j}=Nd(),{adjustHydration:ae}=C_(),{addMeal:me}=E_(),ue=[...$U,...B],be=G=>{l(G),i({tab:G})},$e=async G=>{const ee=G.capacity_ml||G.amount_ml;await ae(ee),alert(`Added ${ee}ml to hydration! `)},Qe=async G=>{await me({meal_type:"snack",meal_name:G.name,ingredients:G.ingredients||[],total_nutrients:G.total_nutrients||{}}),G.id&&!G.id.startsWith("default-")&&await j(G.id,{use_count:(G.use_count||0)+1}),alert(`${G.name} added to diary! `),t("/")},V=async G=>{confirm("Remove this item from your hoard?")&&await ne(G)},Z=()=>{E(""),M(""),R(250),U({calories:0,purines:0,protein:0,carbs:0,fat:0}),_(null),h(!1)},se=()=>{Z(),h(!0)},Q=G=>{_(G),E(G.name||""),M(G.icon||""),R(G.capacity_ml||G.amount_ml||250),U(G.nutrients||G.total_nutrients||{calories:0,purines:0,protein:0,carbs:0,fat:0}),h(!0)},fe=async()=>{if(!T.trim()){alert("Please enter a name");return}const G=y?.id?.startsWith("default-");if(y&&!G){const ee={name:T};r==="bottles"&&(ee.icon=b,ee.capacity_ml=w),await j(y.id,ee),alert("Item updated! ")}else{const ee=r==="meals"?"meal":"container",de={type:ee,name:T,icon:b,capacity_ml:ee==="container"?w:void 0,ingredients:ee==="meal"?y?.ingredients||[]:void 0,total_nutrients:ee==="meal"?D:void 0,use_count:0};await K(de),alert(G?"Custom bottle created! ":"Added to your hoard! ")}Z()},x=J.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase())),Y=ue.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase()));return X?C.jsxs("div",{className:"page stash-page",children:[C.jsx(xi,{title:"Dragon's Hoard",subtitle:"Loading...",showBack:!0,onBack:()=>t("/settings")}),C.jsxs("div",{className:"loading-state card",children:[C.jsx("div",{className:"spinner"}),C.jsx("p",{children:"Opening the hoard..."})]})]}):C.jsxs("div",{className:"page stash-page",children:[C.jsx(xi,{title:"Dragon's Hoard",subtitle:"Your saved meals and custom ingredients",showBack:!0,onBack:()=>t("/settings")}),C.jsx("div",{className:"stash-tabs",children:JU.map(G=>C.jsx("button",{className:`stash-tab ${r===G.key?"active":""}`,onClick:()=>be(G.key),children:G.label},G.key))}),C.jsx("div",{className:"stash-search",children:C.jsx("input",{type:"text",placeholder:`Search ${r==="meals"?"meals":"ingredients"}...`,value:c,onChange:G=>d(G.target.value)})}),r==="meals"&&C.jsxs("section",{className:"stash-content",children:[x.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx("p",{children:" No saved meals yet!"}),C.jsx("p",{className:"text-muted",children:"Save meals from your diary to reuse them."})]}):C.jsx("div",{className:"stash-list",children:x.map(G=>C.jsxs("div",{className:"stash-item card",children:[C.jsxs("div",{className:"stash-item-header",children:[C.jsx("h3",{children:G.name}),C.jsxs("span",{className:"use-count",children:["Used ",G.use_count||0,"x"]})]}),C.jsx("p",{className:"stash-item-ingredients",children:Array.isArray(G.ingredients)?G.ingredients.map(ee=>typeof ee=="string"?ee:ee.name).join(", "):"No ingredients"}),C.jsxs("div",{className:"stash-item-nutrients",children:[C.jsxs("span",{children:[" ",G.total_nutrients?.calories||0," cal"]}),C.jsxs("span",{children:[" ",G.total_nutrients?.purines||0,"mg"]}),C.jsxs("span",{children:[" ",G.total_nutrients?.protein||0,"g"]})]}),C.jsxs("div",{className:"stash-item-actions",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Qe(G),children:" Use"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Q(G),children:" Edit"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(G.id),children:""})]})]},G.id))}),C.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:se,children:" Create New Meal"})]}),r==="bottles"&&C.jsxs("section",{className:"stash-content",children:[C.jsx("p",{className:"text-muted",children:"Custom hydration containers for quick logging."}),Y.length===0?C.jsxs("div",{className:"empty-state card",children:[C.jsx("p",{children:" No custom bottles yet!"}),C.jsx("p",{className:"text-muted",children:"Add your favorite containers."})]}):C.jsx("div",{className:"stash-list",children:Y.map(G=>C.jsxs("div",{className:"stash-item card bottle-item",children:[C.jsxs("div",{className:"bottle-info",children:[C.jsx("span",{className:"bottle-icon",children:G.icon||""}),C.jsxs("div",{className:"bottle-details",children:[C.jsx("h3",{children:G.name}),C.jsxs("span",{className:"bottle-amount",children:[G.capacity_ml||G.amount_ml," ml"]})]})]}),C.jsxs("div",{className:"stash-item-actions",children:[C.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>$e(G),children:" Use"}),C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Q(G),children:""}),!G.id.startsWith("default-")&&C.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>V(G.id),children:""})]})]},G.id))}),C.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:se,children:" Add Custom Bottle"})]}),p&&C.jsx("div",{className:"modal-overlay",onClick:Z,children:C.jsxs("div",{className:"modal-content card",onClick:G=>G.stopPropagation(),children:[C.jsxs("h2",{children:[y?" Edit":" Create"," ",r==="meals"?"Meal":r==="ingredients"?"Ingredient":"Bottle"]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Name"}),C.jsx("input",{type:"text",value:T,onChange:G=>E(G.target.value),placeholder:`e.g., ${r==="meals"?"Chicken Salad":r==="ingredients"?"Olive Oil":"Sports Bottle"}`})]}),r==="bottles"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Icon"}),C.jsx("div",{className:"icon-picker",children:KU.map(G=>C.jsx("button",{type:"button",className:`icon-btn ${b===G?"active":""}`,onClick:()=>M(G),children:G},G))})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{children:"Capacity (ml)"}),C.jsx("input",{type:"number",value:w,onChange:G=>R(parseInt(G.target.value)||0),min:"0",step:"50"})]})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"btn btn-secondary",onClick:Z,children:"Cancel"}),C.jsxs("button",{className:"btn btn-primary",onClick:fe,children:[" ",y?"Update":"Save"]})]})]})})]})}function XU(){return C.jsx(nR,{children:C.jsx(VC,{basename:"/purine-control",children:C.jsxs("div",{className:"app",children:[C.jsxs(yC,{children:[C.jsx(Qo,{path:"/",element:C.jsx(zU,{})}),C.jsx(Qo,{path:"/charts",element:C.jsx(BU,{})}),C.jsx(Qo,{path:"/oracle",element:C.jsx(FU,{})}),C.jsx(Qo,{path:"/settings",element:C.jsx(YU,{})}),C.jsx(Qo,{path:"/stash",element:C.jsx(QU,{})})]}),C.jsx(oR,{})]})})})}ME.createRoot(document.getElementById("root")).render(C.jsx(P.StrictMode,{children:C.jsx(XU,{})}));
