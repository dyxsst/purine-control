(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var hf={exports:{}},gr={};var Bg;function _E(){if(Bg)return gr;Bg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:l}}return gr.Fragment=e,gr.jsx=i,gr.jsxs=i,gr}var Fg;function TE(){return Fg||(Fg=1,hf.exports=_E()),hf.exports}var E=TE(),pf={exports:{}},he={};var $g;function SE(){if($g)return he;$g=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,w={};function R(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}R.prototype.isReactComponent={},R.prototype.setState=function(x,F){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,F,"setState")},R.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function D(){}D.prototype=R.prototype;function P(x,F,G){this.props=x,this.context=F,this.refs=w,this.updater=G||b}var J=P.prototype=new D;J.constructor=P,M(J,R.prototype),J.isPureReactComponent=!0;var B=Array.isArray;function W(){}var Q={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function ee(x,F,G){var j=G.ref;return{$$typeof:t,type:x,key:F,ref:j!==void 0?j:null,props:G}}function le(x,F){return ee(x.type,F,x.props)}function pe(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function oe(x){var F={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(G){return F[G]})}var Ae=/\/+/g;function Je(x,F){return typeof x=="object"&&x!==null&&x.key!=null?oe(""+x.key):F.toString(36)}function Xe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(W,W):(x.status="pending",x.then(function(F){x.status==="pending"&&(x.status="fulfilled",x.value=F)},function(F){x.status==="pending"&&(x.status="rejected",x.reason=F)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function H(x,F,G,j,de){var me=typeof x;(me==="undefined"||me==="boolean")&&(x=null);var we=!1;if(x===null)we=!0;else switch(me){case"bigint":case"string":case"number":we=!0;break;case"object":switch(x.$$typeof){case t:case e:we=!0;break;case y:return we=x._init,H(we(x._payload),F,G,j,de)}}if(we)return de=de(x),we=j===""?"."+Je(x,0):j,B(de)?(G="",we!=null&&(G=we.replace(Ae,"$&/")+"/"),H(de,F,G,"",function(ki){return ki})):de!=null&&(pe(de)&&(de=le(de,G+(de.key==null||x&&x.key===de.key?"":(""+de.key).replace(Ae,"$&/")+"/")+we)),F.push(de)),1;we=0;var ht=j===""?".":j+":";if(B(x))for(var Ke=0;Ke<x.length;Ke++)j=x[Ke],me=ht+Je(j,Ke),we+=H(j,F,G,me,de);else if(Ke=C(x),typeof Ke=="function")for(x=Ke.call(x),Ke=0;!(j=x.next()).done;)j=j.value,me=ht+Je(j,Ke++),we+=H(j,F,G,me,de);else if(me==="object"){if(typeof x.then=="function")return H(Xe(x),F,G,j,de);throw F=String(x),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return we}function Z(x,F,G){if(x==null)return x;var j=[],de=0;return H(x,j,"","",function(me){return F.call(G,me,de++)}),j}function ie(x){if(x._status===-1){var F=x._result;F=F(),F.then(function(G){(x._status===0||x._status===-1)&&(x._status=1,x._result=G)},function(G){(x._status===0||x._status===-1)&&(x._status=2,x._result=G)}),x._status===-1&&(x._status=0,x._result=F)}if(x._status===1)return x._result.default;throw x._result}var X=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},ce={map:Z,forEach:function(x,F,G){Z(x,function(){F.apply(this,arguments)},G)},count:function(x){var F=0;return Z(x,function(){F++}),F},toArray:function(x){return Z(x,function(F){return F})||[]},only:function(x){if(!pe(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return he.Activity=_,he.Children=ce,he.Component=R,he.Fragment=i,he.Profiler=r,he.PureComponent=P,he.StrictMode=o,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,he.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Q.H.useMemoCache(x)}},he.cache=function(x){return function(){return x.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(x,F,G){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var j=M({},x.props),de=x.key;if(F!=null)for(me in F.key!==void 0&&(de=""+F.key),F)!re.call(F,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&F.ref===void 0||(j[me]=F[me]);var me=arguments.length-2;if(me===1)j.children=G;else if(1<me){for(var we=Array(me),ht=0;ht<me;ht++)we[ht]=arguments[ht+2];j.children=we}return ee(x.type,de,j)},he.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},he.createElement=function(x,F,G){var j,de={},me=null;if(F!=null)for(j in F.key!==void 0&&(me=""+F.key),F)re.call(F,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(de[j]=F[j]);var we=arguments.length-2;if(we===1)de.children=G;else if(1<we){for(var ht=Array(we),Ke=0;Ke<we;Ke++)ht[Ke]=arguments[Ke+2];de.children=ht}if(x&&x.defaultProps)for(j in we=x.defaultProps,we)de[j]===void 0&&(de[j]=we[j]);return ee(x,me,de)},he.createRef=function(){return{current:null}},he.forwardRef=function(x){return{$$typeof:f,render:x}},he.isValidElement=pe,he.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:ie}},he.memo=function(x,F){return{$$typeof:h,type:x,compare:F===void 0?null:F}},he.startTransition=function(x){var F=Q.T,G={};Q.T=G;try{var j=x(),de=Q.S;de!==null&&de(G,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(W,X)}catch(me){X(me)}finally{F!==null&&G.types!==null&&(F.types=G.types),Q.T=F}},he.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},he.use=function(x){return Q.H.use(x)},he.useActionState=function(x,F,G){return Q.H.useActionState(x,F,G)},he.useCallback=function(x,F){return Q.H.useCallback(x,F)},he.useContext=function(x){return Q.H.useContext(x)},he.useDebugValue=function(){},he.useDeferredValue=function(x,F){return Q.H.useDeferredValue(x,F)},he.useEffect=function(x,F){return Q.H.useEffect(x,F)},he.useEffectEvent=function(x){return Q.H.useEffectEvent(x)},he.useId=function(){return Q.H.useId()},he.useImperativeHandle=function(x,F,G){return Q.H.useImperativeHandle(x,F,G)},he.useInsertionEffect=function(x,F){return Q.H.useInsertionEffect(x,F)},he.useLayoutEffect=function(x,F){return Q.H.useLayoutEffect(x,F)},he.useMemo=function(x,F){return Q.H.useMemo(x,F)},he.useOptimistic=function(x,F){return Q.H.useOptimistic(x,F)},he.useReducer=function(x,F,G){return Q.H.useReducer(x,F,G)},he.useRef=function(x){return Q.H.useRef(x)},he.useState=function(x){return Q.H.useState(x)},he.useSyncExternalStore=function(x,F,G){return Q.H.useSyncExternalStore(x,F,G)},he.useTransition=function(){return Q.H.useTransition()},he.version="19.2.0",he}var Yg;function gd(){return Yg||(Yg=1,pf.exports=SE()),pf.exports}var U=gd(),mf={exports:{}},yr={},gf={exports:{}},yf={};var Jg;function EE(){return Jg||(Jg=1,(function(t){function e(H,Z){var ie=H.length;H.push(Z);e:for(;0<ie;){var X=ie-1>>>1,ce=H[X];if(0<r(ce,Z))H[X]=Z,H[ie]=ce,ie=X;else break e}}function i(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var Z=H[0],ie=H.pop();if(ie!==Z){H[0]=ie;e:for(var X=0,ce=H.length,x=ce>>>1;X<x;){var F=2*(X+1)-1,G=H[F],j=F+1,de=H[j];if(0>r(G,ie))j<ce&&0>r(de,G)?(H[X]=de,H[j]=ie,X=j):(H[X]=G,H[F]=ie,X=F);else if(j<ce&&0>r(de,ie))H[X]=de,H[j]=ie,X=j;else break e}}return Z}function r(H,Z){var ie=H.sortIndex-Z.sortIndex;return ie!==0?ie:H.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],h=[],y=1,_=null,T=3,C=!1,b=!1,M=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function J(H){for(var Z=i(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=H)o(h),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=i(h)}}function B(H){if(M=!1,J(H),!b)if(i(p)!==null)b=!0,W||(W=!0,oe());else{var Z=i(h);Z!==null&&Xe(B,Z.startTime-H)}}var W=!1,Q=-1,re=5,ee=-1;function le(){return w?!0:!(t.unstable_now()-ee<re)}function pe(){if(w=!1,W){var H=t.unstable_now();ee=H;var Z=!0;try{e:{b=!1,M&&(M=!1,D(Q),Q=-1),C=!0;var ie=T;try{t:{for(J(H),_=i(p);_!==null&&!(_.expirationTime>H&&le());){var X=_.callback;if(typeof X=="function"){_.callback=null,T=_.priorityLevel;var ce=X(_.expirationTime<=H);if(H=t.unstable_now(),typeof ce=="function"){_.callback=ce,J(H),Z=!0;break t}_===i(p)&&o(p),J(H)}else o(p);_=i(p)}if(_!==null)Z=!0;else{var x=i(h);x!==null&&Xe(B,x.startTime-H),Z=!1}}break e}finally{_=null,T=ie,C=!1}Z=void 0}}finally{Z?oe():W=!1}}}var oe;if(typeof P=="function")oe=function(){P(pe)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Je=Ae.port2;Ae.port1.onmessage=pe,oe=function(){Je.postMessage(null)}}else oe=function(){R(pe,0)};function Xe(H,Z){Q=R(function(){H(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(H){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var ie=T;T=Z;try{return H()}finally{T=ie}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=T;T=H;try{return Z()}finally{T=ie}},t.unstable_scheduleCallback=function(H,Z,ie){var X=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?X+ie:X):ie=X,H){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ie+ce,H={id:y++,callback:Z,priorityLevel:H,startTime:ie,expirationTime:ce,sortIndex:-1},ie>X?(H.sortIndex=ie,e(h,H),i(p)===null&&H===i(h)&&(M?(D(Q),Q=-1):M=!0,Xe(B,ie-X))):(H.sortIndex=ce,e(p,H),b||C||(b=!0,W||(W=!0,oe()))),H},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(H){var Z=T;return function(){var ie=T;T=Z;try{return H.apply(this,arguments)}finally{T=ie}}}})(yf)),yf}var Kg;function CE(){return Kg||(Kg=1,gf.exports=EE()),gf.exports}var vf={exports:{}},Ct={};var Qg;function AE(){if(Qg)return Ct;Qg=1;var t=gd();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ct.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(p,h,null,y)},Ct.flushSync=function(p){var h=c.T,y=o.p;try{if(c.T=null,o.p=2,p)return p()}finally{c.T=h,o.p=y,o.d.f()}},Ct.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(p,h))},Ct.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},Ct.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?o.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:C}):y==="script"&&o.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=f(h.as,h.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(p)},Ct.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin);o.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=f(h.as,h.crossOrigin);o.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(p)},Ct.requestFormReset=function(p){o.d.r(p)},Ct.unstable_batchedUpdates=function(p,h){return p(h)},Ct.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},Ct.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var Xg;function bE(){if(Xg)return vf.exports;Xg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vf.exports=AE(),vf.exports}var Zg;function ME(){if(Zg)return yr;Zg=1;var t=CE(),e=gd(),i=bE();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(o(188))}function h(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(o(188));return s!==n?null:n}for(var a=n,u=s;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return p(g),n;if(v===u)return p(g),s;v=v.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=v;else{for(var S=!1,A=g.child;A;){if(A===a){S=!0,a=g,u=v;break}if(A===u){S=!0,u=g,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,u=g;break}if(A===u){S=!0,u=v,a=g;break}A=A.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=pe&&n[pe]||n["@@iterator"],typeof n=="function"?n:null)}var Ae=Symbol.for("react.client.reference");function Je(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case ee:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case P:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Q:return s=n.displayName||null,s!==null?s:Je(n.type)||"Memo";case re:s=n._payload,n=n._init;try{return Je(n(s))}catch{}}return null}var Xe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},X=[],ce=-1;function x(n){return{current:n}}function F(n){0>ce||(n.current=X[ce],X[ce]=null,ce--)}function G(n,s){ce++,X[ce]=n.current,n.current=s}var j=x(null),de=x(null),me=x(null),we=x(null);function ht(n,s){switch(G(me,s),G(de,n),G(j,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?dg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=dg(s),n=hg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(j),G(j,n)}function Ke(){F(j),F(de),F(me)}function ki(n){n.memoizedState!==null&&G(we,n);var s=j.current,a=hg(s,n.type);s!==a&&(G(de,n),G(j,a))}function Es(n){de.current===n&&(F(j),F(de)),we.current===n&&(F(we),dr._currentValue=ie)}var Cs,$r;function He(n){if(Cs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Cs=s&&s[1]||"",$r=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+n+$r}var co=!1;function Yr(n,s){if(!n||co)return"";co=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(V){var q=V}Reflect.construct(n,[],Y)}else{try{Y.call()}catch(V){q=V}n.call(Y.prototype)}}else{try{throw Error()}catch(V){q=V}(Y=n())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(V){if(V&&q&&typeof V.stack=="string")return[V.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],A=v[1];if(S&&A){var N=S.split(`
`),O=A.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<O.length&&!O[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===O.length)for(u=N.length-1,g=O.length-1;1<=u&&0<=g&&N[u]!==O[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==O[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==O[g]){var z=`
`+N[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=g);break}}}finally{co=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?He(a):""}function fn(n,s){switch(n.tag){case 26:case 27:case 5:return He(n.type);case 16:return He("Lazy");case 13:return n.child!==s&&s!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Yr(n.type,!1);case 11:return Yr(n.type.render,!1);case 1:return Yr(n.type,!0);case 31:return He("Activity");default:return""}}function Jr(n){try{var s="",a=null;do s+=fn(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var As=Object.prototype.hasOwnProperty,fo=t.unstable_scheduleCallback,bs=t.unstable_cancelCallback,Kr=t.unstable_shouldYield,Qr=t.unstable_requestPaint,bt=t.unstable_now,Ql=t.unstable_getCurrentPriorityLevel,Xr=t.unstable_ImmediatePriority,Zr=t.unstable_UserBlockingPriority,ho=t.unstable_NormalPriority,Wr=t.unstable_LowPriority,jr=t.unstable_IdlePriority,Xl=t.log,Zl=t.unstable_setDisableYieldValue,Oi=null,Mt=null;function Tn(n){if(typeof Xl=="function"&&Zl(n),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Oi,n)}catch{}}var wt=Math.clz32?Math.clz32:jl,Wl=Math.log,Jd=Math.LN2;function jl(n){return n>>>=0,n===0?32:31-(Wl(n)/Jd|0)|0}var K=256,fe=262144,be=4194304;function Ie(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Et(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~v,u!==0?g=Ie(u):(S&=A,S!==0?g=Ie(S):a||(a=A&~n,a!==0&&(g=Ie(a))))):(A=u&~v,A!==0?g=Ie(A):S!==0?g=Ie(S):a||(a=u&~n,a!==0&&(g=Ie(a)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:g}function Rt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function eu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ea(){var n=be;return be<<=1,(be&62914560)===0&&(be=4194304),n}function po(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ms(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function aT(n,s,a,u,g,v){var S=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,N=n.expirationTimes,O=n.hiddenUpdates;for(a=S&~a;0<a;){var z=31-wt(a),Y=1<<z;A[z]=0,N[z]=-1;var q=O[z];if(q!==null)for(O[z]=null,z=0;z<q.length;z++){var V=q[z];V!==null&&(V.lane&=-536870913)}a&=~Y}u!==0&&Kd(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(S&~s))}function Kd(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-wt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Qd(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-wt(a),g=1<<u;g&s|n[u]&s&&(n[u]|=s),a&=~g}}function Xd(n,s){var a=s&-s;return a=(a&42)!==0?1:tu(a),(a&(n.suspendedLanes|s))!==0?0:a}function tu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Zd(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:kg(n.type))}function Wd(n,s){var a=Z.p;try{return Z.p=n,s()}finally{Z.p=a}}var si=Math.random().toString(36).slice(2),pt="__reactFiber$"+si,It="__reactProps$"+si,mo="__reactContainer$"+si,iu="__reactEvents$"+si,lT="__reactListeners$"+si,uT="__reactHandles$"+si,jd="__reactResources$"+si,ws="__reactMarker$"+si;function ou(n){delete n[pt],delete n[It],delete n[iu],delete n[lT],delete n[uT]}function go(n){var s=n[pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[mo]||a[pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Tg(n);n!==null;){if(a=n[pt])return a;n=Tg(n)}return s}n=a,a=n.parentNode}return null}function yo(n){if(n=n[pt]||n[mo]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Rs(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function vo(n){var s=n[jd];return s||(s=n[jd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ut(n){n[ws]=!0}var eh=new Set,th={};function qi(n,s){_o(n,s),_o(n+"Capture",s)}function _o(n,s){for(th[n]=s,n=0;n<s.length;n++)eh.add(s[n])}var cT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nh={},ih={};function fT(n){return As.call(ih,n)?!0:As.call(nh,n)?!1:cT.test(n)?ih[n]=!0:(nh[n]=!0,!1)}function ta(n,s,a){if(fT(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function na(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Rn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function Zt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dT(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function su(n){if(!n._valueTracker){var s=oh(n)?"checked":"value";n._valueTracker=dT(n,s,""+n[s])}}function sh(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=oh(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function ia(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var hT=/[\n"\\]/g;function Wt(n){return n.replace(hT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ru(n,s,a,u,g,v,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Zt(s)):n.value!==""+Zt(s)&&(n.value=""+Zt(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?au(n,S,Zt(s)):a!=null?au(n,S,Zt(a)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Zt(A):n.removeAttribute("name")}function rh(n,s,a,u,g,v,S,A){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){su(n);return}a=a!=null?""+Zt(a):"",s=s!=null?""+Zt(s):a,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),su(n)}function au(n,s,a){s==="number"&&ia(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function To(n,s,a,u){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Zt(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function ah(n,s,a){if(s!=null&&(s=""+Zt(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Zt(a):""}function lh(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(Xe(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Zt(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),su(n)}function So(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var pT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uh(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||pT.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function ch(n,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&uh(n,g,u)}else for(var v in s)s.hasOwnProperty(v)&&uh(n,v,s[v])}function lu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oa(n){return gT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Nn(){}var uu=null;function cu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Eo=null,Co=null;function fh(n){var s=yo(n);if(s&&(n=s.stateNode)){var a=n[It]||null;e:switch(n=s.stateNode,s.type){case"input":if(ru(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Wt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var g=u[It]||null;if(!g)throw Error(o(90));ru(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&sh(u)}break e;case"textarea":ah(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&To(n,!!a.multiple,s,!1)}}}var fu=!1;function dh(n,s,a){if(fu)return n(s,a);fu=!0;try{var u=n(s);return u}finally{if(fu=!1,(Eo!==null||Co!==null)&&($a(),Eo&&(s=Eo,n=Co,Co=Eo=null,fh(s),n)))for(s=0;s<n.length;s++)fh(n[s])}}function Ns(n,s){var a=n.stateNode;if(a===null)return null;var u=a[It]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=!1;if(xn)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){du=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{du=!1}var ri=null,hu=null,sa=null;function hh(){if(sa)return sa;var n,s=hu,a=s.length,u,g="value"in ri?ri.value:ri.textContent,v=g.length;for(n=0;n<a&&s[n]===g[n];n++);var S=a-n;for(u=1;u<=S&&s[a-u]===g[v-u];u++);return sa=g.slice(n,1<u?1-u:void 0)}function ra(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function aa(){return!0}function ph(){return!1}function Dt(n){function s(a,u,g,v,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?aa:ph,this.isPropagationStopped=ph,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=Dt(Gi),Is=_({},Gi,{view:0,detail:0}),yT=Dt(Is),pu,mu,Ds,ua=_({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ds&&(Ds&&n.type==="mousemove"?(pu=n.screenX-Ds.screenX,mu=n.screenY-Ds.screenY):mu=pu=0,Ds=n),pu)},movementY:function(n){return"movementY"in n?n.movementY:mu}}),mh=Dt(ua),vT=_({},ua,{dataTransfer:0}),_T=Dt(vT),TT=_({},Is,{relatedTarget:0}),gu=Dt(TT),ST=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),ET=Dt(ST),CT=_({},Gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),AT=Dt(CT),bT=_({},Gi,{data:0}),gh=Dt(bT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NT(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=RT[n])?!!s[n]:!1}function yu(){return NT}var xT=_({},Is,{key:function(n){if(n.key){var s=MT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(n){return n.type==="keypress"?ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),IT=Dt(xT),DT=_({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yh=Dt(DT),UT=_({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),PT=Dt(UT),LT=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kT=Dt(LT),OT=_({},ua,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qT=Dt(OT),GT=_({},Gi,{newState:0,oldState:0}),HT=Dt(GT),VT=[9,13,27,32],vu=xn&&"CompositionEvent"in window,Us=null;xn&&"documentMode"in document&&(Us=document.documentMode);var zT=xn&&"TextEvent"in window&&!Us,vh=xn&&(!vu||Us&&8<Us&&11>=Us),_h=" ",Th=!1;function Sh(n,s){switch(n){case"keyup":return VT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ao=!1;function BT(n,s){switch(n){case"compositionend":return Eh(s);case"keypress":return s.which!==32?null:(Th=!0,_h);case"textInput":return n=s.data,n===_h&&Th?null:n;default:return null}}function FT(n,s){if(Ao)return n==="compositionend"||!vu&&Sh(n,s)?(n=hh(),sa=hu=ri=null,Ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vh&&s.locale!=="ko"?null:s.data;default:return null}}var $T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ch(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!$T[n.type]:s==="textarea"}function Ah(n,s,a,u){Eo?Co?Co.push(u):Co=[u]:Eo=u,s=Wa(s,"onChange"),0<s.length&&(a=new la("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Ps=null,Ls=null;function YT(n){rg(n,0)}function ca(n){var s=Rs(n);if(sh(s))return n}function bh(n,s){if(n==="change")return s}var Mh=!1;if(xn){var _u;if(xn){var Tu="oninput"in document;if(!Tu){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),Tu=typeof wh.oninput=="function"}_u=Tu}else _u=!1;Mh=_u&&(!document.documentMode||9<document.documentMode)}function Rh(){Ps&&(Ps.detachEvent("onpropertychange",Nh),Ls=Ps=null)}function Nh(n){if(n.propertyName==="value"&&ca(Ls)){var s=[];Ah(s,Ls,n,cu(n)),dh(YT,s)}}function JT(n,s,a){n==="focusin"?(Rh(),Ps=s,Ls=a,Ps.attachEvent("onpropertychange",Nh)):n==="focusout"&&Rh()}function KT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ca(Ls)}function QT(n,s){if(n==="click")return ca(s)}function XT(n,s){if(n==="input"||n==="change")return ca(s)}function ZT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var zt=typeof Object.is=="function"?Object.is:ZT;function ks(n,s){if(zt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!As.call(s,g)||!zt(n[g],s[g]))return!1}return!0}function xh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ih(n,s){var a=xh(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xh(a)}}function Dh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Dh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Uh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ia(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ia(n.document)}return s}function Su(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var WT=xn&&"documentMode"in document&&11>=document.documentMode,bo=null,Eu=null,Os=null,Cu=!1;function Ph(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cu||bo==null||bo!==ia(u)||(u=bo,"selectionStart"in u&&Su(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Os&&ks(Os,u)||(Os=u,u=Wa(Eu,"onSelect"),0<u.length&&(s=new la("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=bo)))}function Hi(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Mo={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Au={},Lh={};xn&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Vi(n){if(Au[n])return Au[n];if(!Mo[n])return n;var s=Mo[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Lh)return Au[n]=s[a];return n}var kh=Vi("animationend"),Oh=Vi("animationiteration"),qh=Vi("animationstart"),jT=Vi("transitionrun"),eS=Vi("transitionstart"),tS=Vi("transitioncancel"),Gh=Vi("transitionend"),Hh=new Map,bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bu.push("scrollEnd");function dn(n,s){Hh.set(n,s),qi(s,[n])}var fa=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},jt=[],wo=0,Mu=0;function da(){for(var n=wo,s=Mu=wo=0;s<n;){var a=jt[s];jt[s++]=null;var u=jt[s];jt[s++]=null;var g=jt[s];jt[s++]=null;var v=jt[s];if(jt[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}v!==0&&Vh(a,g,v)}}function ha(n,s,a,u){jt[wo++]=n,jt[wo++]=s,jt[wo++]=a,jt[wo++]=u,Mu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function wu(n,s,a,u){return ha(n,s,a,u),pa(n)}function zi(n,s){return ha(n,null,null,s),pa(n)}function Vh(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,v=n.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&s!==null&&(g=31-wt(a),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[s]:u.push(s),s.lane=a|536870912),v):null}function pa(n){if(50<sr)throw sr=0,kc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ro={};function nS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(n,s,a,u){return new nS(n,s,a,u)}function Ru(n){return n=n.prototype,!(!n||!n.isReactComponent)}function In(n,s){var a=n.alternate;return a===null?(a=Bt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function zh(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ma(n,s,a,u,g,v){var S=0;if(u=n,typeof n=="function")Ru(n)&&(S=1);else if(typeof n=="string")S=aE(n,a,j.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ee:return n=Bt(31,a,s,g),n.elementType=ee,n.lanes=v,n;case M:return Bi(a.children,g,v,s);case w:S=8,g|=24;break;case R:return n=Bt(12,a,s,g|2),n.elementType=R,n.lanes=v,n;case B:return n=Bt(13,a,s,g),n.elementType=B,n.lanes=v,n;case W:return n=Bt(19,a,s,g),n.elementType=W,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:S=10;break e;case D:S=9;break e;case J:S=11;break e;case Q:S=14;break e;case re:S=16,u=null;break e}S=29,a=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=Bt(S,a,s,g),s.elementType=n,s.type=u,s.lanes=v,s}function Bi(n,s,a,u){return n=Bt(7,n,u,s),n.lanes=a,n}function Nu(n,s,a){return n=Bt(6,n,null,s),n.lanes=a,n}function Bh(n){var s=Bt(18,null,null,0);return s.stateNode=n,s}function xu(n,s,a){return s=Bt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Fh=new WeakMap;function en(n,s){if(typeof n=="object"&&n!==null){var a=Fh.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Jr(s)},Fh.set(n,s),s)}return{value:n,source:s,stack:Jr(s)}}var No=[],xo=0,ga=null,qs=0,tn=[],nn=0,ai=null,Sn=1,En="";function Dn(n,s){No[xo++]=qs,No[xo++]=ga,ga=n,qs=s}function $h(n,s,a){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=ai,ai=n;var u=Sn;n=En;var g=32-wt(u)-1;u&=~(1<<g),a+=1;var v=32-wt(s)+g;if(30<v){var S=g-g%5;v=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Sn=1<<32-wt(s)+g|a<<g|u,En=v+n}else Sn=1<<v|a<<g|u,En=n}function Iu(n){n.return!==null&&(Dn(n,1),$h(n,1,0))}function Du(n){for(;n===ga;)ga=No[--xo],No[xo]=null,qs=No[--xo],No[xo]=null;for(;n===ai;)ai=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Yh(n,s){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=ai,Sn=s.id,En=s.overflow,ai=n}var mt=null,Ve=null,Me=!1,li=null,on=!1,Uu=Error(o(519));function ui(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gs(en(s,n)),Uu}function Jh(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[pt]=n,s[It]=u,a){case"dialog":_e("cancel",s),_e("close",s);break;case"iframe":case"object":case"embed":_e("load",s);break;case"video":case"audio":for(a=0;a<ar.length;a++)_e(ar[a],s);break;case"source":_e("error",s);break;case"img":case"image":case"link":_e("error",s),_e("load",s);break;case"details":_e("toggle",s);break;case"input":_e("invalid",s),rh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":_e("invalid",s);break;case"textarea":_e("invalid",s),lh(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||cg(s.textContent,a)?(u.popover!=null&&(_e("beforetoggle",s),_e("toggle",s)),u.onScroll!=null&&_e("scroll",s),u.onScrollEnd!=null&&_e("scrollend",s),u.onClick!=null&&(s.onclick=Nn),s=!0):s=!1,s||ui(n,!0)}function Kh(n){for(mt=n.return;mt;)switch(mt.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:mt=mt.return}}function Io(n){if(n!==mt)return!1;if(!Me)return Kh(n),Me=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Zc(n.type,n.memoizedProps)),a=!a),a&&Ve&&ui(n),Kh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ve=_g(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Ve=_g(n)}else s===27?(s=Ve,Ci(n.type)?(n=nf,nf=null,Ve=n):Ve=s):Ve=mt?rn(n.stateNode.nextSibling):null;return!0}function Fi(){Ve=mt=null,Me=!1}function Pu(){var n=li;return n!==null&&(kt===null?kt=n:kt.push.apply(kt,n),li=null),n}function Gs(n){li===null?li=[n]:li.push(n)}var Lu=x(null),$i=null,Un=null;function ci(n,s,a){G(Lu,s._currentValue),s._currentValue=a}function Pn(n){n._currentValue=Lu.current,F(Lu)}function ku(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Ou(n,s,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var A=v;v=g;for(var N=0;N<s.length;N++)if(A.context===s[N]){v.lanes|=a,A=v.alternate,A!==null&&(A.lanes|=a),ku(v.return,a,n),u||(S=null);break e}v=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,v=S.alternate,v!==null&&(v.lanes|=a),ku(S,a,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Do(n,s,a,u){n=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var A=g.type;zt(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===we.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(dr):n=[dr])}g=g.return}n!==null&&Ou(s,n,a,u),s.flags|=262144}function ya(n){for(n=n.firstContext;n!==null;){if(!zt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Yi(n){$i=n,Un=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function gt(n){return Qh($i,n)}function va(n,s){return $i===null&&Yi(n),Qh(n,s)}function Qh(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Un===null){if(n===null)throw Error(o(308));Un=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Un=Un.next=s;return a}var iS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},oS=t.unstable_scheduleCallback,sS=t.unstable_NormalPriority,nt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new iS,data:new Map,refCount:0}}function Hs(n){n.refCount--,n.refCount===0&&oS(sS,function(){n.controller.abort()})}var Vs=null,Gu=0,Uo=0,Po=null;function rS(n,s){if(Vs===null){var a=Vs=[];Gu=0,Uo=zc(),Po={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Gu++,s.then(Xh,Xh),s}function Xh(){if(--Gu===0&&Vs!==null){Po!==null&&(Po.status="fulfilled");var n=Vs;Vs=null,Uo=0,Po=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function aS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Zh=H.S;H.S=function(n,s){Pm=bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&rS(n,s),Zh!==null&&Zh(n,s)};var Ji=x(null);function Hu(){var n=Ji.current;return n!==null?n:Ge.pooledCache}function _a(n,s){s===null?G(Ji,Ji.current):G(Ji,s.pool)}function Wh(){var n=Hu();return n===null?null:{parent:nt._currentValue,pool:n}}var Lo=Error(o(460)),Vu=Error(o(474)),Ta=Error(o(542)),Sa={then:function(){}};function jh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ep(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Nn,Nn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,np(n),n;default:if(typeof s.status=="string")s.then(Nn,Nn);else{if(n=Ge,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,np(n),n}throw Qi=s,Lo}}function Ki(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qi=a,Lo):a}}var Qi=null;function tp(){if(Qi===null)throw Error(o(459));var n=Qi;return Qi=null,n}function np(n){if(n===Lo||n===Ta)throw Error(o(483))}var ko=null,zs=0;function Ea(n){var s=zs;return zs+=1,ko===null&&(ko=[]),ep(ko,n,s)}function Bs(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Ca(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function ip(n){function s(L,I){if(n){var k=L.deletions;k===null?(L.deletions=[I],L.flags|=16):k.push(I)}}function a(L,I){if(!n)return null;for(;I!==null;)s(L,I),I=I.sibling;return null}function u(L){for(var I=new Map;L!==null;)L.key!==null?I.set(L.key,L):I.set(L.index,L),L=L.sibling;return I}function g(L,I){return L=In(L,I),L.index=0,L.sibling=null,L}function v(L,I,k){return L.index=k,n?(k=L.alternate,k!==null?(k=k.index,k<I?(L.flags|=67108866,I):k):(L.flags|=67108866,I)):(L.flags|=1048576,I)}function S(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,I,k,$){return I===null||I.tag!==6?(I=Nu(k,L.mode,$),I.return=L,I):(I=g(I,k),I.return=L,I)}function N(L,I,k,$){var ae=k.type;return ae===M?z(L,I,k.props.children,$,k.key):I!==null&&(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===re&&Ki(ae)===I.type)?(I=g(I,k.props),Bs(I,k),I.return=L,I):(I=ma(k.type,k.key,k.props,null,L.mode,$),Bs(I,k),I.return=L,I)}function O(L,I,k,$){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=xu(k,L.mode,$),I.return=L,I):(I=g(I,k.children||[]),I.return=L,I)}function z(L,I,k,$,ae){return I===null||I.tag!==7?(I=Bi(k,L.mode,$,ae),I.return=L,I):(I=g(I,k),I.return=L,I)}function Y(L,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Nu(""+I,L.mode,k),I.return=L,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case C:return k=ma(I.type,I.key,I.props,null,L.mode,k),Bs(k,I),k.return=L,k;case b:return I=xu(I,L.mode,k),I.return=L,I;case re:return I=Ki(I),Y(L,I,k)}if(Xe(I)||oe(I))return I=Bi(I,L.mode,k,null),I.return=L,I;if(typeof I.then=="function")return Y(L,Ea(I),k);if(I.$$typeof===P)return Y(L,va(L,I),k);Ca(L,I)}return null}function q(L,I,k,$){var ae=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ae!==null?null:A(L,I,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===ae?N(L,I,k,$):null;case b:return k.key===ae?O(L,I,k,$):null;case re:return k=Ki(k),q(L,I,k,$)}if(Xe(k)||oe(k))return ae!==null?null:z(L,I,k,$,null);if(typeof k.then=="function")return q(L,I,Ea(k),$);if(k.$$typeof===P)return q(L,I,va(L,k),$);Ca(L,k)}return null}function V(L,I,k,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(k)||null,A(I,L,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return L=L.get($.key===null?k:$.key)||null,N(I,L,$,ae);case b:return L=L.get($.key===null?k:$.key)||null,O(I,L,$,ae);case re:return $=Ki($),V(L,I,k,$,ae)}if(Xe($)||oe($))return L=L.get(k)||null,z(I,L,$,ae,null);if(typeof $.then=="function")return V(L,I,k,Ea($),ae);if($.$$typeof===P)return V(L,I,k,va(I,$),ae);Ca(I,$)}return null}function ne(L,I,k,$){for(var ae=null,Re=null,se=I,ye=I=0,Ee=null;se!==null&&ye<k.length;ye++){se.index>ye?(Ee=se,se=null):Ee=se.sibling;var Ne=q(L,se,k[ye],$);if(Ne===null){se===null&&(se=Ee);break}n&&se&&Ne.alternate===null&&s(L,se),I=v(Ne,I,ye),Re===null?ae=Ne:Re.sibling=Ne,Re=Ne,se=Ee}if(ye===k.length)return a(L,se),Me&&Dn(L,ye),ae;if(se===null){for(;ye<k.length;ye++)se=Y(L,k[ye],$),se!==null&&(I=v(se,I,ye),Re===null?ae=se:Re.sibling=se,Re=se);return Me&&Dn(L,ye),ae}for(se=u(se);ye<k.length;ye++)Ee=V(se,L,ye,k[ye],$),Ee!==null&&(n&&Ee.alternate!==null&&se.delete(Ee.key===null?ye:Ee.key),I=v(Ee,I,ye),Re===null?ae=Ee:Re.sibling=Ee,Re=Ee);return n&&se.forEach(function(Ri){return s(L,Ri)}),Me&&Dn(L,ye),ae}function ue(L,I,k,$){if(k==null)throw Error(o(151));for(var ae=null,Re=null,se=I,ye=I=0,Ee=null,Ne=k.next();se!==null&&!Ne.done;ye++,Ne=k.next()){se.index>ye?(Ee=se,se=null):Ee=se.sibling;var Ri=q(L,se,Ne.value,$);if(Ri===null){se===null&&(se=Ee);break}n&&se&&Ri.alternate===null&&s(L,se),I=v(Ri,I,ye),Re===null?ae=Ri:Re.sibling=Ri,Re=Ri,se=Ee}if(Ne.done)return a(L,se),Me&&Dn(L,ye),ae;if(se===null){for(;!Ne.done;ye++,Ne=k.next())Ne=Y(L,Ne.value,$),Ne!==null&&(I=v(Ne,I,ye),Re===null?ae=Ne:Re.sibling=Ne,Re=Ne);return Me&&Dn(L,ye),ae}for(se=u(se);!Ne.done;ye++,Ne=k.next())Ne=V(se,L,ye,Ne.value,$),Ne!==null&&(n&&Ne.alternate!==null&&se.delete(Ne.key===null?ye:Ne.key),I=v(Ne,I,ye),Re===null?ae=Ne:Re.sibling=Ne,Re=Ne);return n&&se.forEach(function(vE){return s(L,vE)}),Me&&Dn(L,ye),ae}function qe(L,I,k,$){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:e:{for(var ae=k.key;I!==null;){if(I.key===ae){if(ae=k.type,ae===M){if(I.tag===7){a(L,I.sibling),$=g(I,k.props.children),$.return=L,L=$;break e}}else if(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===re&&Ki(ae)===I.type){a(L,I.sibling),$=g(I,k.props),Bs($,k),$.return=L,L=$;break e}a(L,I);break}else s(L,I);I=I.sibling}k.type===M?($=Bi(k.props.children,L.mode,$,k.key),$.return=L,L=$):($=ma(k.type,k.key,k.props,null,L.mode,$),Bs($,k),$.return=L,L=$)}return S(L);case b:e:{for(ae=k.key;I!==null;){if(I.key===ae)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){a(L,I.sibling),$=g(I,k.children||[]),$.return=L,L=$;break e}else{a(L,I);break}else s(L,I);I=I.sibling}$=xu(k,L.mode,$),$.return=L,L=$}return S(L);case re:return k=Ki(k),qe(L,I,k,$)}if(Xe(k))return ne(L,I,k,$);if(oe(k)){if(ae=oe(k),typeof ae!="function")throw Error(o(150));return k=ae.call(k),ue(L,I,k,$)}if(typeof k.then=="function")return qe(L,I,Ea(k),$);if(k.$$typeof===P)return qe(L,I,va(L,k),$);Ca(L,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,I!==null&&I.tag===6?(a(L,I.sibling),$=g(I,k),$.return=L,L=$):(a(L,I),$=Nu(k,L.mode,$),$.return=L,L=$),S(L)):a(L,I)}return function(L,I,k,$){try{zs=0;var ae=qe(L,I,k,$);return ko=null,ae}catch(se){if(se===Lo||se===Ta)throw se;var Re=Bt(29,se,null,L.mode);return Re.lanes=$,Re.return=L,Re}finally{}}}var Xi=ip(!0),op=ip(!1),fi=!1;function zu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function di(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function hi(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=pa(n),Vh(n,null,a),s}return ha(n,u,s,a),pa(n)}function Fs(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Qd(n,a)}}function Fu(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?g=v=s:v=v.next=s}else g=v=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var $u=!1;function $s(){if($u){var n=Po;if(n!==null)throw n}}function Ys(n,s,a,u){$u=!1;var g=n.updateQueue;fi=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var N=A,O=N.next;N.next=null,S===null?v=O:S.next=O,S=N;var z=n.alternate;z!==null&&(z=z.updateQueue,A=z.lastBaseUpdate,A!==S&&(A===null?z.firstBaseUpdate=O:A.next=O,z.lastBaseUpdate=N))}if(v!==null){var Y=g.baseState;S=0,z=O=N=null,A=v;do{var q=A.lane&-536870913,V=q!==A.lane;if(V?(Se&q)===q:(u&q)===q){q!==0&&q===Uo&&($u=!0),z!==null&&(z=z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ne=n,ue=A;q=s;var qe=a;switch(ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){Y=ne.call(qe,Y,q);break e}Y=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=ue.payload,q=typeof ne=="function"?ne.call(qe,Y,q):ne,q==null)break e;Y=_({},Y,q);break e;case 2:fi=!0}}q=A.callback,q!==null&&(n.flags|=64,V&&(n.flags|=8192),V=g.callbacks,V===null?g.callbacks=[q]:V.push(q))}else V={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},z===null?(O=z=V,N=Y):z=z.next=V,S|=q;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;V=A,A=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);z===null&&(N=Y),g.baseState=N,g.firstBaseUpdate=O,g.lastBaseUpdate=z,v===null&&(g.shared.lanes=0),vi|=S,n.lanes=S,n.memoizedState=Y}}function sp(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function rp(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)sp(a[n],s)}var Oo=x(null),Aa=x(0);function ap(n,s){n=Bn,G(Aa,n),G(Oo,s),Bn=n|s.baseLanes}function Yu(){G(Aa,Bn),G(Oo,Oo.current)}function Ju(){Bn=Aa.current,F(Oo),F(Aa)}var Ft=x(null),sn=null;function pi(n){var s=n.alternate;G(je,je.current&1),G(Ft,n),sn===null&&(s===null||Oo.current!==null||s.memoizedState!==null)&&(sn=n)}function Ku(n){G(je,je.current),G(Ft,n),sn===null&&(sn=n)}function lp(n){n.tag===22?(G(je,je.current),G(Ft,n),sn===null&&(sn=n)):mi()}function mi(){G(je,je.current),G(Ft,Ft.current)}function $t(n){F(Ft),sn===n&&(sn=null),F(je)}var je=x(0);function ba(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ef(a)||tf(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ln=0,ge=null,ke=null,it=null,Ma=!1,qo=!1,Zi=!1,wa=0,Js=0,Go=null,lS=0;function Ze(){throw Error(o(321))}function Qu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!zt(n[a],s[a]))return!1;return!0}function Xu(n,s,a,u,g,v){return Ln=v,ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?$p:fc,Zi=!1,v=a(u,g),Zi=!1,qo&&(v=cp(s,a,u,g)),up(n),v}function up(n){H.H=Xs;var s=ke!==null&&ke.next!==null;if(Ln=0,it=ke=ge=null,Ma=!1,Js=0,Go=null,s)throw Error(o(300));n===null||ot||(n=n.dependencies,n!==null&&ya(n)&&(ot=!0))}function cp(n,s,a,u){ge=n;var g=0;do{if(qo&&(Go=null),Js=0,qo=!1,25<=g)throw Error(o(301));if(g+=1,it=ke=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=Yp,v=s(a,u)}while(qo);return v}function uS(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?Ks(s):s,n=n.useState()[0],(ke!==null?ke.memoizedState:null)!==n&&(ge.flags|=1024),s}function Zu(){var n=wa!==0;return wa=0,n}function Wu(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function ju(n){if(Ma){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ma=!1}Ln=0,it=ke=ge=null,qo=!1,Js=wa=0,Go=null}function Nt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ge.memoizedState=it=n:it=it.next=n,it}function et(){if(ke===null){var n=ge.alternate;n=n!==null?n.memoizedState:null}else n=ke.next;var s=it===null?ge.memoizedState:it.next;if(s!==null)it=s,ke=n;else{if(n===null)throw ge.alternate===null?Error(o(467)):Error(o(310));ke=n,n={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},it===null?ge.memoizedState=it=n:it=it.next=n}return it}function Ra(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ks(n){var s=Js;return Js+=1,Go===null&&(Go=[]),n=ep(Go,n,s),s=ge,(it===null?s.memoizedState:it.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?$p:fc),n}function Na(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ks(n);if(n.$$typeof===P)return gt(n)}throw Error(o(438,String(n)))}function ec(n){var s=null,a=ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=ge.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ra(),ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=le;return s.index++,a}function kn(n,s){return typeof s=="function"?s(n):s}function xa(n){var s=et();return tc(s,ke,n)}function tc(n,s,a){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}s.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{s=g.next;var A=S=null,N=null,O=s,z=!1;do{var Y=O.lane&-536870913;if(Y!==O.lane?(Se&Y)===Y:(Ln&Y)===Y){var q=O.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),Y===Uo&&(z=!0);else if((Ln&q)===q){O=O.next,q===Uo&&(z=!0);continue}else Y={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=Y,S=v):N=N.next=Y,ge.lanes|=q,vi|=q;Y=O.action,Zi&&a(v,Y),v=O.hasEagerState?O.eagerState:a(v,Y)}else q={lane:Y,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(A=N=q,S=v):N=N.next=q,ge.lanes|=Y,vi|=Y;O=O.next}while(O!==null&&O!==s);if(N===null?S=v:N.next=A,!zt(v,n.memoizedState)&&(ot=!0,z&&(a=Po,a!==null)))throw a;n.memoizedState=v,n.baseState=S,n.baseQueue=N,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function nc(n){var s=et(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,v=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);zt(v,s.memoizedState)||(ot=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,u]}function fp(n,s,a){var u=ge,g=et(),v=Me;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!zt((ke||g).memoizedState,a);if(S&&(g.memoizedState=a,ot=!0),g=g.queue,sc(pp.bind(null,u,g,n),[n]),g.getSnapshot!==s||S||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,Ho(9,{destroy:void 0},hp.bind(null,u,g,a,s),null),Ge===null)throw Error(o(349));v||(Ln&127)!==0||dp(u,s,a)}return a}function dp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ge.updateQueue,s===null?(s=Ra(),ge.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function hp(n,s,a,u){s.value=a,s.getSnapshot=u,mp(s)&&gp(n)}function pp(n,s,a){return a(function(){mp(s)&&gp(n)})}function mp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!zt(n,a)}catch{return!0}}function gp(n){var s=zi(n,2);s!==null&&Ot(s,n,2)}function ic(n){var s=Nt();if(typeof n=="function"){var a=n;if(n=a(),Zi){Tn(!0);try{a()}finally{Tn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:n},s}function yp(n,s,a,u){return n.baseState=a,tc(n,ke,typeof u=="function"?u:kn)}function cS(n,s,a,u,g){if(Ua(n))throw Error(o(485));if(n=s.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};H.T!==null?a(!0):v.isTransition=!1,u(v),a=s.pending,a===null?(v.next=s.pending=v,vp(s,v)):(v.next=a.next,s.pending=a.next=v)}}function vp(n,s){var a=s.action,u=s.payload,g=n.state;if(s.isTransition){var v=H.T,S={};H.T=S;try{var A=a(g,u),N=H.S;N!==null&&N(S,A),_p(n,s,A)}catch(O){oc(n,s,O)}finally{v!==null&&S.types!==null&&(v.types=S.types),H.T=v}}else try{v=a(g,u),_p(n,s,v)}catch(O){oc(n,s,O)}}function _p(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Tp(n,s,u)},function(u){return oc(n,s,u)}):Tp(n,s,a)}function Tp(n,s,a){s.status="fulfilled",s.value=a,Sp(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,vp(n,a)))}function oc(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Sp(s),s=s.next;while(s!==u)}n.action=null}function Sp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ep(n,s){return s}function Cp(n,s){if(Me){var a=Ge.formState;if(a!==null){e:{var u=ge;if(Me){if(Ve){t:{for(var g=Ve,v=on;g.nodeType!==8;){if(!v){g=null;break t}if(g=rn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Ve=rn(g.nextSibling),u=g.data==="F!";break e}}ui(u)}u=!1}u&&(s=a[0])}}return a=Nt(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:s},a.queue=u,a=zp.bind(null,ge,u),u.dispatch=a,u=ic(!1),v=cc.bind(null,ge,!1,u.queue),u=Nt(),g={state:s,dispatch:null,action:n,pending:null},u.queue=g,a=cS.bind(null,ge,g,v,a),g.dispatch=a,u.memoizedState=n,[s,a,!1]}function Ap(n){var s=et();return bp(s,ke,n)}function bp(n,s,a){if(s=tc(n,s,Ep)[0],n=xa(kn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ks(s)}catch(S){throw S===Lo?Ta:S}else u=s;s=et();var g=s.queue,v=g.dispatch;return a!==s.memoizedState&&(ge.flags|=2048,Ho(9,{destroy:void 0},fS.bind(null,g,a),null)),[u,v,n]}function fS(n,s){n.action=s}function Mp(n){var s=et(),a=ke;if(a!==null)return bp(s,a,n);et(),s=s.memoizedState,a=et();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Ho(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=ge.updateQueue,s===null&&(s=Ra(),ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function wp(){return et().memoizedState}function Ia(n,s,a,u){var g=Nt();ge.flags|=n,g.memoizedState=Ho(1|s,{destroy:void 0},a,u===void 0?null:u)}function Da(n,s,a,u){var g=et();u=u===void 0?null:u;var v=g.memoizedState.inst;ke!==null&&u!==null&&Qu(u,ke.memoizedState.deps)?g.memoizedState=Ho(s,v,a,u):(ge.flags|=n,g.memoizedState=Ho(1|s,v,a,u))}function Rp(n,s){Ia(8390656,8,n,s)}function sc(n,s){Da(2048,8,n,s)}function dS(n){ge.flags|=4;var s=ge.updateQueue;if(s===null)s=Ra(),ge.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Np(n){var s=et().memoizedState;return dS({ref:s,nextImpl:n}),function(){if((De&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function xp(n,s){return Da(4,2,n,s)}function Ip(n,s){return Da(4,4,n,s)}function Dp(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Up(n,s,a){a=a!=null?a.concat([n]):null,Da(4,4,Dp.bind(null,s,n),a)}function rc(){}function Pp(n,s){var a=et();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Qu(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Lp(n,s){var a=et();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Qu(s,u[1]))return u[0];if(u=n(),Zi){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[u,s],u}function ac(n,s,a){return a===void 0||(Ln&1073741824)!==0&&(Se&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=km(),ge.lanes|=n,vi|=n,a)}function kp(n,s,a,u){return zt(a,s)?a:Oo.current!==null?(n=ac(n,a,u),zt(n,s)||(ot=!0),n):(Ln&42)===0||(Ln&1073741824)!==0&&(Se&261930)===0?(ot=!0,n.memoizedState=a):(n=km(),ge.lanes|=n,vi|=n,s)}function Op(n,s,a,u,g){var v=Z.p;Z.p=v!==0&&8>v?v:8;var S=H.T,A={};H.T=A,cc(n,!1,s,a);try{var N=g(),O=H.S;if(O!==null&&O(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=aS(N,u);Qs(n,s,z,Kt(n))}else Qs(n,s,u,Kt(n))}catch(Y){Qs(n,s,{then:function(){},status:"rejected",reason:Y},Kt())}finally{Z.p=v,S!==null&&A.types!==null&&(S.types=A.types),H.T=S}}function hS(){}function lc(n,s,a,u){if(n.tag!==5)throw Error(o(476));var g=qp(n).queue;Op(n,g,s,ie,a===null?hS:function(){return Gp(n),a(u)})}function qp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:ie},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Gp(n){var s=qp(n);s.next===null&&(s=n.alternate.memoizedState),Qs(n,s.next.queue,{},Kt())}function uc(){return gt(dr)}function Hp(){return et().memoizedState}function Vp(){return et().memoizedState}function pS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Kt();n=di(a);var u=hi(s,n,a);u!==null&&(Ot(u,s,a),Fs(u,s,a)),s={cache:qu()},n.payload=s;return}s=s.return}}function mS(n,s,a){var u=Kt();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ua(n)?Bp(s,a):(a=wu(n,s,a,u),a!==null&&(Ot(a,n,u),Fp(a,s,u)))}function zp(n,s,a){var u=Kt();Qs(n,s,a,u)}function Qs(n,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ua(n))Bp(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,A=v(S,a);if(g.hasEagerState=!0,g.eagerState=A,zt(A,S))return ha(n,s,g,0),Ge===null&&da(),!1}catch{}finally{}if(a=wu(n,s,g,u),a!==null)return Ot(a,n,u),Fp(a,s,u),!0}return!1}function cc(n,s,a,u){if(u={lane:2,revertLane:zc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ua(n)){if(s)throw Error(o(479))}else s=wu(n,a,u,2),s!==null&&Ot(s,n,2)}function Ua(n){var s=n.alternate;return n===ge||s!==null&&s===ge}function Bp(n,s){qo=Ma=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fp(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Qd(n,a)}}var Xs={readContext:gt,use:Na,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Xs.useEffectEvent=Ze;var $p={readContext:gt,use:Na,useCallback:function(n,s){return Nt().memoizedState=[n,s===void 0?null:s],n},useContext:gt,useEffect:Rp,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Ia(4194308,4,Dp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ia(4194308,4,n,s)},useInsertionEffect:function(n,s){Ia(4,2,n,s)},useMemo:function(n,s){var a=Nt();s=s===void 0?null:s;var u=n();if(Zi){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=Nt();if(a!==void 0){var g=a(s);if(Zi){Tn(!0);try{a(s)}finally{Tn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=mS.bind(null,ge,n),[u.memoizedState,n]},useRef:function(n){var s=Nt();return n={current:n},s.memoizedState=n},useState:function(n){n=ic(n);var s=n.queue,a=zp.bind(null,ge,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:rc,useDeferredValue:function(n,s){var a=Nt();return ac(a,n,s)},useTransition:function(){var n=ic(!1);return n=Op.bind(null,ge,n.queue,!0,!1),Nt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=ge,g=Nt();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),Ge===null)throw Error(o(349));(Se&127)!==0||dp(u,s,a)}g.memoizedState=a;var v={value:a,getSnapshot:s};return g.queue=v,Rp(pp.bind(null,u,v,n),[n]),u.flags|=2048,Ho(9,{destroy:void 0},hp.bind(null,u,v,a,s),null),a},useId:function(){var n=Nt(),s=Ge.identifierPrefix;if(Me){var a=En,u=Sn;a=(u&~(1<<32-wt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=wa++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=lS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:uc,useFormState:Cp,useActionState:Cp,useOptimistic:function(n){var s=Nt();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=cc.bind(null,ge,!0,a),a.dispatch=s,[n,s]},useMemoCache:ec,useCacheRefresh:function(){return Nt().memoizedState=pS.bind(null,ge)},useEffectEvent:function(n){var s=Nt(),a={impl:n};return s.memoizedState=a,function(){if((De&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},fc={readContext:gt,use:Na,useCallback:Pp,useContext:gt,useEffect:sc,useImperativeHandle:Up,useInsertionEffect:xp,useLayoutEffect:Ip,useMemo:Lp,useReducer:xa,useRef:wp,useState:function(){return xa(kn)},useDebugValue:rc,useDeferredValue:function(n,s){var a=et();return kp(a,ke.memoizedState,n,s)},useTransition:function(){var n=xa(kn)[0],s=et().memoizedState;return[typeof n=="boolean"?n:Ks(n),s]},useSyncExternalStore:fp,useId:Hp,useHostTransitionStatus:uc,useFormState:Ap,useActionState:Ap,useOptimistic:function(n,s){var a=et();return yp(a,ke,n,s)},useMemoCache:ec,useCacheRefresh:Vp};fc.useEffectEvent=Np;var Yp={readContext:gt,use:Na,useCallback:Pp,useContext:gt,useEffect:sc,useImperativeHandle:Up,useInsertionEffect:xp,useLayoutEffect:Ip,useMemo:Lp,useReducer:nc,useRef:wp,useState:function(){return nc(kn)},useDebugValue:rc,useDeferredValue:function(n,s){var a=et();return ke===null?ac(a,n,s):kp(a,ke.memoizedState,n,s)},useTransition:function(){var n=nc(kn)[0],s=et().memoizedState;return[typeof n=="boolean"?n:Ks(n),s]},useSyncExternalStore:fp,useId:Hp,useHostTransitionStatus:uc,useFormState:Mp,useActionState:Mp,useOptimistic:function(n,s){var a=et();return ke!==null?yp(a,ke,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Vp};Yp.useEffectEvent=Np;function dc(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var hc={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Kt(),g=di(u);g.payload=s,a!=null&&(g.callback=a),s=hi(n,g,u),s!==null&&(Ot(s,n,u),Fs(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Kt(),g=di(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=hi(n,g,u),s!==null&&(Ot(s,n,u),Fs(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),u=di(a);u.tag=2,s!=null&&(u.callback=s),s=hi(n,u,a),s!==null&&(Ot(s,n,a),Fs(s,n,a))}};function Jp(n,s,a,u,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,S):s.prototype&&s.prototype.isPureReactComponent?!ks(a,u)||!ks(g,v):!0}function Kp(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&hc.enqueueReplaceState(s,s.state,null)}function Wi(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function Qp(n){fa(n)}function Xp(n){console.error(n)}function Zp(n){fa(n)}function Pa(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Wp(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function pc(n,s,a){return a=di(a),a.tag=3,a.payload={element:null},a.callback=function(){Pa(n,s)},a}function jp(n){return n=di(n),n.tag=3,n}function em(n,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){Wp(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Wp(s,a,u),typeof g!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function gS(n,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Do(s,a,g,!0),a=Ft.current,a!==null){switch(a.tag){case 31:case 13:return sn===null?Ya():a.alternate===null&&We===0&&(We=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Sa?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Gc(n,u,g)),!1;case 22:return a.flags|=65536,u===Sa?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Gc(n,u,g)),!1}throw Error(o(435,a.tag))}return Gc(n,u,g),Ya(),!1}if(Me)return s=Ft.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Uu&&(n=Error(o(422),{cause:u}),Gs(en(n,a)))):(u!==Uu&&(s=Error(o(423),{cause:u}),Gs(en(s,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=en(u,a),g=pc(n.stateNode,u,g),Fu(n,g),We!==4&&(We=2)),!1;var v=Error(o(520),{cause:u});if(v=en(v,a),or===null?or=[v]:or.push(v),We!==4&&(We=2),s===null)return!0;u=en(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=pc(a.stateNode,u,n),Fu(a,n),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_i===null||!_i.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=jp(g),em(g,n,a,u),Fu(a,g),!1}a=a.return}while(a!==null);return!1}var mc=Error(o(461)),ot=!1;function yt(n,s,a,u){s.child=n===null?op(s,null,a,u):Xi(s,n.child,a,u)}function tm(n,s,a,u,g){a=a.render;var v=s.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return Yi(s),u=Xu(n,s,a,S,v,g),A=Zu(),n!==null&&!ot?(Wu(n,s,g),On(n,s,g)):(Me&&A&&Iu(s),s.flags|=1,yt(n,s,u,g),s.child)}function nm(n,s,a,u,g){if(n===null){var v=a.type;return typeof v=="function"&&!Ru(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,im(n,s,v,u,g)):(n=ma(a.type,null,u,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!Cc(n,g)){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:ks,a(S,u)&&n.ref===s.ref)return On(n,s,g)}return s.flags|=1,n=In(v,u),n.ref=s.ref,n.return=s,s.child=n}function im(n,s,a,u,g){if(n!==null){var v=n.memoizedProps;if(ks(v,u)&&n.ref===s.ref)if(ot=!1,s.pendingProps=u=v,Cc(n,g))(n.flags&131072)!==0&&(ot=!0);else return s.lanes=n.lanes,On(n,s,g)}return gc(n,s,a,u,g)}function om(n,s,a,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,n!==null){for(u=s.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,s.child=null;return sm(n,s,v,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&_a(s,v!==null?v.cachePool:null),v!==null?ap(s,v):Yu(),lp(s);else return u=s.lanes=536870912,sm(n,s,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(_a(s,v.cachePool),ap(s,v),mi(),s.memoizedState=null):(n!==null&&_a(s,null),Yu(),mi());return yt(n,s,g,a),s.child}function Zs(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sm(n,s,a,u,g){var v=Hu();return v=v===null?null:{parent:nt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},n!==null&&_a(s,null),Yu(),lp(s),n!==null&&Do(n,s,u,!0),s.childLanes=g,null}function La(n,s){return s=Oa({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function rm(n,s,a){return Xi(s,n.child,null,a),n=La(s,s.pendingProps),n.flags|=2,$t(s),s.memoizedState=null,n}function yS(n,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(u.mode==="hidden")return n=La(s,u),s.lanes=536870912,Zs(null,n);if(Ku(s),(n=Ve)?(n=vg(n,on),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ai!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},a=Bh(n),a.return=s,s.child=a,mt=s,Ve=null)):n=null,n===null)throw ui(s);return s.lanes=536870912,null}return La(s,u)}var v=n.memoizedState;if(v!==null){var S=v.dehydrated;if(Ku(s),g)if(s.flags&256)s.flags&=-257,s=rm(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(ot||Do(n,s,a,!1),g=(a&n.childLanes)!==0,ot||g){if(u=Ge,u!==null&&(S=Xd(u,a),S!==0&&S!==v.retryLane))throw v.retryLane=S,zi(n,S),Ot(u,n,S),mc;Ya(),s=rm(n,s,a)}else n=v.treeContext,Ve=rn(S.nextSibling),mt=s,Me=!0,li=null,on=!1,n!==null&&Yh(s,n),s=La(s,u),s.flags|=4096;return s}return n=In(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ka(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function gc(n,s,a,u,g){return Yi(s),a=Xu(n,s,a,u,void 0,g),u=Zu(),n!==null&&!ot?(Wu(n,s,g),On(n,s,g)):(Me&&u&&Iu(s),s.flags|=1,yt(n,s,a,g),s.child)}function am(n,s,a,u,g,v){return Yi(s),s.updateQueue=null,a=cp(s,u,a,g),up(n),u=Zu(),n!==null&&!ot?(Wu(n,s,v),On(n,s,v)):(Me&&u&&Iu(s),s.flags|=1,yt(n,s,a,v),s.child)}function lm(n,s,a,u,g){if(Yi(s),s.stateNode===null){var v=Ro,S=a.contextType;typeof S=="object"&&S!==null&&(v=gt(S)),v=new a(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=hc,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},zu(s),S=a.contextType,v.context=typeof S=="object"&&S!==null?gt(S):Ro,v.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(dc(s,a,S,u),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&hc.enqueueReplaceState(v,v.state,null),Ys(s,u,v,g),$s(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){v=s.stateNode;var A=s.memoizedProps,N=Wi(a,A);v.props=N;var O=v.context,z=a.contextType;S=Ro,typeof z=="object"&&z!==null&&(S=gt(z));var Y=a.getDerivedStateFromProps;z=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A||O!==S)&&Kp(s,v,u,S),fi=!1;var q=s.memoizedState;v.state=q,Ys(s,u,v,g),$s(),O=s.memoizedState,A||q!==O||fi?(typeof Y=="function"&&(dc(s,a,Y,u),O=s.memoizedState),(N=fi||Jp(s,a,N,u,q,O,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=S,u=N):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Bu(n,s),S=s.memoizedProps,z=Wi(a,S),v.props=z,Y=s.pendingProps,q=v.context,O=a.contextType,N=Ro,typeof O=="object"&&O!==null&&(N=gt(O)),A=a.getDerivedStateFromProps,(O=typeof A=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||q!==N)&&Kp(s,v,u,N),fi=!1,q=s.memoizedState,v.state=q,Ys(s,u,v,g),$s();var V=s.memoizedState;S!==Y||q!==V||fi||n!==null&&n.dependencies!==null&&ya(n.dependencies)?(typeof A=="function"&&(dc(s,a,A,u),V=s.memoizedState),(z=fi||Jp(s,a,z,u,q,V,N)||n!==null&&n.dependencies!==null&&ya(n.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,V,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,V,N)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=V),v.props=u,v.state=V,v.context=N,u=z):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),u=!1)}return v=u,ka(n,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,n!==null&&u?(s.child=Xi(s,n.child,null,g),s.child=Xi(s,null,a,g)):yt(n,s,a,g),s.memoizedState=v.state,n=s.child):n=On(n,s,g),n}function um(n,s,a,u){return Fi(),s.flags|=256,yt(n,s,a,u),s.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(n){return{baseLanes:n,cachePool:Wh()}}function _c(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Jt),n}function cm(n,s,a){var u=s.pendingProps,g=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(je.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(g?pi(s):mi(),(n=Ve)?(n=vg(n,on),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ai!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},a=Bh(n),a.return=s,s.child=a,mt=s,Ve=null)):n=null,n===null)throw ui(s);return tf(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(mi(),g=s.mode,A=Oa({mode:"hidden",children:A},g),u=Bi(u,g,a,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=vc(a),u.childLanes=_c(n,S,a),s.memoizedState=yc,Zs(null,u)):(pi(s),Tc(s,A))}var N=n.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(v)s.flags&256?(pi(s),s.flags&=-257,s=Sc(n,s,a)):s.memoizedState!==null?(mi(),s.child=n.child,s.flags|=128,s=null):(mi(),A=u.fallback,g=s.mode,u=Oa({mode:"visible",children:u.children},g),A=Bi(A,g,a,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Xi(s,n.child,null,a),u=s.child,u.memoizedState=vc(a),u.childLanes=_c(n,S,a),s.memoizedState=yc,s=Zs(null,u));else if(pi(s),tf(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var O=S.dgst;S=O,u=Error(o(419)),u.stack="",u.digest=S,Gs({value:u,source:null,stack:null}),s=Sc(n,s,a)}else if(ot||Do(n,s,a,!1),S=(a&n.childLanes)!==0,ot||S){if(S=Ge,S!==null&&(u=Xd(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,zi(n,u),Ot(S,n,u),mc;ef(A)||Ya(),s=Sc(n,s,a)}else ef(A)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,Ve=rn(A.nextSibling),mt=s,Me=!0,li=null,on=!1,n!==null&&Yh(s,n),s=Tc(s,u.children),s.flags|=4096);return s}return g?(mi(),A=u.fallback,g=s.mode,N=n.child,O=N.sibling,u=In(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,O!==null?A=In(O,A):(A=Bi(A,g,a,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Zs(null,u),u=s.child,A=n.child.memoizedState,A===null?A=vc(a):(g=A.cachePool,g!==null?(N=nt._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=Wh(),A={baseLanes:A.baseLanes|a,cachePool:g}),u.memoizedState=A,u.childLanes=_c(n,S,a),s.memoizedState=yc,Zs(n.child,u)):(pi(s),a=n.child,n=a.sibling,a=In(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=a,s.memoizedState=null,a)}function Tc(n,s){return s=Oa({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Oa(n,s){return n=Bt(22,n,null,s),n.lanes=0,n}function Sc(n,s,a){return Xi(s,n.child,null,a),n=Tc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function fm(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),ku(n.return,s,a)}function Ec(n,s,a,u,g,v){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=v)}function dm(n,s,a){var u=s.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var S=je.current,A=(S&2)!==0;if(A?(S=S&1|2,s.flags|=128):S&=1,G(je,S),yt(n,s,u,a),u=Me?qs:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fm(n,a,s);else if(n.tag===19)fm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&ba(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Ec(s,!1,g,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&ba(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Ec(s,!0,a,null,v,u);break;case"together":Ec(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function On(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),vi|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Do(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,a=In(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=In(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Cc(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ya(n)))}function vS(n,s,a){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),ci(s,nt,n.memoizedState.cache),Fi();break;case 27:case 5:ki(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:ci(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ku(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(pi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?cm(n,s,a):(pi(s),n=On(n,s,a),n!==null?n.sibling:null);pi(s);break;case 19:var g=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Do(n,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return dm(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(je,je.current),u)break;return null;case 22:return s.lanes=0,om(n,s,a,s.pendingProps);case 24:ci(s,nt,n.memoizedState.cache)}return On(n,s,a)}function hm(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)ot=!0;else{if(!Cc(n,a)&&(s.flags&128)===0)return ot=!1,vS(n,s,a);ot=(n.flags&131072)!==0}else ot=!1,Me&&(s.flags&1048576)!==0&&$h(s,qs,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ki(s.elementType),s.type=n,typeof n=="function")Ru(n)?(u=Wi(n,u),s.tag=1,s=lm(null,s,n,u,a)):(s.tag=0,s=gc(null,s,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===J){s.tag=11,s=tm(null,s,n,u,a);break e}else if(g===Q){s.tag=14,s=nm(null,s,n,u,a);break e}}throw s=Je(n)||n,Error(o(306,s,""))}}return s;case 0:return gc(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Wi(u,s.pendingProps),lm(n,s,u,g,a);case 3:e:{if(ht(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var v=s.memoizedState;g=v.element,Bu(n,s),Ys(s,u,null,a);var S=s.memoizedState;if(u=S.cache,ci(s,nt,u),u!==v.cache&&Ou(s,[nt],a,!0),$s(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=um(n,s,u,a);break e}else if(u!==g){g=en(Error(o(424)),s),Gs(g),s=um(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=rn(n.firstChild),mt=s,Me=!0,li=null,on=!0,a=op(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fi(),u===g){s=On(n,s,a);break e}yt(n,s,u,a)}s=s.child}return s;case 26:return ka(n,s),n===null?(a=Ag(s.type,null,s.pendingProps,null))?s.memoizedState=a:Me||(a=s.type,n=s.pendingProps,u=ja(me.current).createElement(a),u[pt]=s,u[It]=n,vt(u,a,n),ut(u),s.stateNode=u):s.memoizedState=Ag(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ki(s),n===null&&Me&&(u=s.stateNode=Sg(s.type,s.pendingProps,me.current),mt=s,on=!0,g=Ve,Ci(s.type)?(nf=g,Ve=rn(u.firstChild)):Ve=g),yt(n,s,s.pendingProps.children,a),ka(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((g=u=Ve)&&(u=KS(u,s.type,s.pendingProps,on),u!==null?(s.stateNode=u,mt=s,Ve=rn(u.firstChild),on=!1,g=!0):g=!1),g||ui(s)),ki(s),g=s.type,v=s.pendingProps,S=n!==null?n.memoizedProps:null,u=v.children,Zc(g,v)?u=null:S!==null&&Zc(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Xu(n,s,uS,null,null,a),dr._currentValue=g),ka(n,s),yt(n,s,u,a),s.child;case 6:return n===null&&Me&&((n=a=Ve)&&(a=QS(a,s.pendingProps,on),a!==null?(s.stateNode=a,mt=s,Ve=null,n=!0):n=!1),n||ui(s)),null;case 13:return cm(n,s,a);case 4:return ht(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Xi(s,null,u,a):yt(n,s,u,a),s.child;case 11:return tm(n,s,s.type,s.pendingProps,a);case 7:return yt(n,s,s.pendingProps,a),s.child;case 8:return yt(n,s,s.pendingProps.children,a),s.child;case 12:return yt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,ci(s,s.type,u.value),yt(n,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Yi(s),g=gt(g),u=u(g),s.flags|=1,yt(n,s,u,a),s.child;case 14:return nm(n,s,s.type,s.pendingProps,a);case 15:return im(n,s,s.type,s.pendingProps,a);case 19:return dm(n,s,a);case 31:return yS(n,s,a);case 22:return om(n,s,a,s.pendingProps);case 24:return Yi(s),u=gt(nt),n===null?(g=Hu(),g===null&&(g=Ge,v=qu(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),s.memoizedState={parent:u,cache:g},zu(s),ci(s,nt,g)):((n.lanes&a)!==0&&(Bu(n,s),Ys(s,null,null,a),$s()),g=n.memoizedState,v=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ci(s,nt,u)):(u=v.cache,ci(s,nt,u),u!==g.cache&&Ou(s,[nt],a,!0))),yt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function qn(n){n.flags|=4}function Ac(n,s,a,u,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Hm())n.flags|=8192;else throw Qi=Sa,Vu}else n.flags&=-16777217}function pm(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ng(s))if(Hm())n.flags|=8192;else throw Qi=Sa,Vu}function qa(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?ea():536870912,n.lanes|=s,Fo|=s)}function Ws(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ze(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function _S(n,s,a){var u=s.pendingProps;switch(Du(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(s),null;case 1:return ze(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Pn(nt),Ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Io(s)?qn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pu())),ze(s),null;case 26:var g=s.type,v=s.memoizedState;return n===null?(qn(s),v!==null?(ze(s),pm(s,v)):(ze(s),Ac(s,g,null,u,a))):v?v!==n.memoizedState?(qn(s),ze(s),pm(s,v)):(ze(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&qn(s),ze(s),Ac(s,g,n,u,a)),null;case 27:if(Es(s),a=me.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&qn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}n=j.current,Io(s)?Jh(s):(n=Sg(g,u,a),s.stateNode=n,qn(s))}return ze(s),null;case 5:if(Es(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&qn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return ze(s),null}if(v=j.current,Io(s))Jh(s);else{var S=ja(me.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}v[pt]=s,v[It]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(vt(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&qn(s)}}return ze(s),Ac(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&qn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=me.current,Io(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,g=mt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[pt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||cg(n.nodeValue,a)),n||ui(s,!0)}else n=ja(n).createTextNode(u),n[pt]=s,s.stateNode=n}return ze(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=Io(s),a!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[pt]=s}else Fi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),n=!1}else a=Pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?($t(s),s):($t(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ze(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Io(s),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[pt]=s}else Fi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ze(s),g=!1}else g=Pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?($t(s),s):($t(s),null)}return $t(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),qa(s,s.updateQueue),ze(s),null);case 4:return Ke(),n===null&&Yc(s.stateNode.containerInfo),ze(s),null;case 10:return Pn(s.type),ze(s),null;case 19:if(F(je),u=s.memoizedState,u===null)return ze(s),null;if(g=(s.flags&128)!==0,v=u.rendering,v===null)if(g)Ws(u,!1);else{if(We!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=ba(n),v!==null){for(s.flags|=128,Ws(u,!1),n=v.updateQueue,s.updateQueue=n,qa(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)zh(a,n),a=a.sibling;return G(je,je.current&1|2),Me&&Dn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&bt()>Ba&&(s.flags|=128,g=!0,Ws(u,!1),s.lanes=4194304)}else{if(!g)if(n=ba(v),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,qa(s,n),Ws(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Me)return ze(s),null}else 2*bt()-u.renderingStartTime>Ba&&a!==536870912&&(s.flags|=128,g=!0,Ws(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(n=u.last,n!==null?n.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=bt(),n.sibling=null,a=je.current,G(je,g?a&1|2:a&1),Me&&Dn(s,u.treeForkCount),n):(ze(s),null);case 22:case 23:return $t(s),Ju(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ze(s),s.subtreeFlags&6&&(s.flags|=8192)):ze(s),a=s.updateQueue,a!==null&&qa(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&F(Ji),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Pn(nt),ze(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function TS(n,s){switch(Du(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Pn(nt),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Es(s),null;case 31:if(s.memoizedState!==null){if($t(s),s.alternate===null)throw Error(o(340));Fi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if($t(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Fi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return F(je),null;case 4:return Ke(),null;case 10:return Pn(s.type),null;case 22:case 23:return $t(s),Ju(),n!==null&&F(Ji),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Pn(nt),null;case 25:return null;default:return null}}function mm(n,s){switch(Du(s),s.tag){case 3:Pn(nt),Ke();break;case 26:case 27:case 5:Es(s);break;case 4:Ke();break;case 31:s.memoizedState!==null&&$t(s);break;case 13:$t(s);break;case 19:F(je);break;case 10:Pn(s.type);break;case 22:case 23:$t(s),Ju(),n!==null&&F(Ji);break;case 24:Pn(nt)}}function js(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var v=a.create,S=a.inst;u=v(),S.destroy=u}a=a.next}while(a!==g)}}catch(A){Le(s,s.return,A)}}function gi(n,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=s;var N=a,O=A;try{O()}catch(z){Le(g,N,z)}}}u=u.next}while(u!==v)}}catch(z){Le(s,s.return,z)}}function gm(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{rp(s,a)}catch(u){Le(n,n.return,u)}}}function ym(n,s,a){a.props=Wi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Le(n,s,u)}}function er(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Le(n,s,g)}}function Cn(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Le(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Le(n,s,g)}else a.current=null}function vm(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Le(n,n.return,g)}}function bc(n,s,a){try{var u=n.stateNode;zS(u,n.type,a,s),u[It]=s}catch(g){Le(n,n.return,g)}}function _m(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ci(n.type)||n.tag===4}function Mc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_m(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ci(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Nn));else if(u!==4&&(u===27&&Ci(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(wc(n,s,a),n=n.sibling;n!==null;)wc(n,s,a),n=n.sibling}function Ga(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&Ci(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ga(n,s,a),n=n.sibling;n!==null;)Ga(n,s,a),n=n.sibling}function Tm(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);vt(s,u,a),s[pt]=n,s[It]=a}catch(v){Le(n,n.return,v)}}var Gn=!1,st=!1,Rc=!1,Sm=typeof WeakSet=="function"?WeakSet:Set,ct=null;function SS(n,s){if(n=n.containerInfo,Qc=rl,n=Uh(n),Su(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,N=-1,O=0,z=0,Y=n,q=null;t:for(;;){for(var V;Y!==a||g!==0&&Y.nodeType!==3||(A=S+g),Y!==v||u!==0&&Y.nodeType!==3||(N=S+u),Y.nodeType===3&&(S+=Y.nodeValue.length),(V=Y.firstChild)!==null;)q=Y,Y=V;for(;;){if(Y===n)break t;if(q===a&&++O===g&&(A=S),q===v&&++z===u&&(N=S),(V=Y.nextSibling)!==null)break;Y=q,q=Y.parentNode}Y=V}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xc={focusedElem:n,selectionRange:a},rl=!1,ct=s;ct!==null;)if(s=ct,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ct=n;else for(;ct!==null;){switch(s=ct,v=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,a=s,g=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ne=Wi(a.type,g);n=u.getSnapshotBeforeUpdate(ne,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(ue){Le(a,a.return,ue)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)jc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,ct=n;break}ct=s.return}}function Em(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Vn(n,a),u&4&&js(5,a);break;case 1:if(Vn(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(S){Le(a,a.return,S)}else{var g=Wi(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Le(a,a.return,S)}}u&64&&gm(a),u&512&&er(a,a.return);break;case 3:if(Vn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{rp(n,s)}catch(S){Le(a,a.return,S)}}break;case 27:s===null&&u&4&&Tm(a);case 26:case 5:Vn(n,a),s===null&&u&4&&vm(a),u&512&&er(a,a.return);break;case 12:Vn(n,a);break;case 31:Vn(n,a),u&4&&bm(n,a);break;case 13:Vn(n,a),u&4&&Mm(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=xS.bind(null,a),XS(n,a))));break;case 22:if(u=a.memoizedState!==null||Gn,!u){s=s!==null&&s.memoizedState!==null||st,g=Gn;var v=st;Gn=u,(st=s)&&!v?zn(n,a,(a.subtreeFlags&8772)!==0):Vn(n,a),Gn=g,st=v}break;case 30:break;default:Vn(n,a)}}function Cm(n){var s=n.alternate;s!==null&&(n.alternate=null,Cm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ou(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $e=null,Ut=!1;function Hn(n,s,a){for(a=a.child;a!==null;)Am(n,s,a),a=a.sibling}function Am(n,s,a){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Oi,a)}catch{}switch(a.tag){case 26:st||Cn(a,s),Hn(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:st||Cn(a,s);var u=$e,g=Ut;Ci(a.type)&&($e=a.stateNode,Ut=!1),Hn(n,s,a),ur(a.stateNode),$e=u,Ut=g;break;case 5:st||Cn(a,s);case 6:if(u=$e,g=Ut,$e=null,Hn(n,s,a),$e=u,Ut=g,$e!==null)if(Ut)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(a.stateNode)}catch(v){Le(a,s,v)}else try{$e.removeChild(a.stateNode)}catch(v){Le(a,s,v)}break;case 18:$e!==null&&(Ut?(n=$e,gg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wo(n)):gg($e,a.stateNode));break;case 4:u=$e,g=Ut,$e=a.stateNode.containerInfo,Ut=!0,Hn(n,s,a),$e=u,Ut=g;break;case 0:case 11:case 14:case 15:gi(2,a,s),st||gi(4,a,s),Hn(n,s,a);break;case 1:st||(Cn(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&ym(a,s,u)),Hn(n,s,a);break;case 21:Hn(n,s,a);break;case 22:st=(u=st)||a.memoizedState!==null,Hn(n,s,a),st=u;break;default:Hn(n,s,a)}}function bm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Wo(n)}catch(a){Le(s,s.return,a)}}}function Mm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wo(n)}catch(a){Le(s,s.return,a)}}function ES(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Sm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Sm),s;default:throw Error(o(435,n.tag))}}function Ha(n,s){var a=ES(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=IS.bind(null,n,u);u.then(g,g)}})}function Pt(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],v=n,S=s,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Ci(A.type)){$e=A.stateNode,Ut=!1;break e}break;case 5:$e=A.stateNode,Ut=!1;break e;case 3:case 4:$e=A.stateNode.containerInfo,Ut=!0;break e}A=A.return}if($e===null)throw Error(o(160));Am(v,S,g),$e=null,Ut=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wm(s,n),s=s.sibling}var hn=null;function wm(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pt(s,n),Lt(n),u&4&&(gi(3,n,n.return),js(3,n),gi(5,n,n.return));break;case 1:Pt(s,n),Lt(n),u&512&&(st||a===null||Cn(a,a.return)),u&64&&Gn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=hn;if(Pt(s,n),Lt(n),u&512&&(st||a===null||Cn(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[ws]||v[pt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),vt(v,u,a),v[pt]=n,ut(v),u=v;break e;case"link":var S=wg("link","href",g).get(u+(a.href||""));if(S){for(var A=0;A<S.length;A++)if(v=S[A],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;case"meta":if(S=wg("meta","content",g).get(u+(a.content||""))){for(A=0;A<S.length;A++)if(v=S[A],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(A,1);break t}}v=g.createElement(u),vt(v,u,a),g.head.appendChild(v);break;default:throw Error(o(468,u))}v[pt]=n,ut(v),u=v}n.stateNode=u}else Rg(g,n.type,n.stateNode);else n.stateNode=Mg(g,u,n.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?Rg(g,n.type,n.stateNode):Mg(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&bc(n,n.memoizedProps,a.memoizedProps)}break;case 27:Pt(s,n),Lt(n),u&512&&(st||a===null||Cn(a,a.return)),a!==null&&u&4&&bc(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Pt(s,n),Lt(n),u&512&&(st||a===null||Cn(a,a.return)),n.flags&32){g=n.stateNode;try{So(g,"")}catch(ne){Le(n,n.return,ne)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,bc(n,g,a!==null?a.memoizedProps:g)),u&1024&&(Rc=!0);break;case 6:if(Pt(s,n),Lt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ne){Le(n,n.return,ne)}}break;case 3:if(nl=null,g=hn,hn=el(s.containerInfo),Pt(s,n),hn=g,Lt(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Wo(s.containerInfo)}catch(ne){Le(n,n.return,ne)}Rc&&(Rc=!1,Rm(n));break;case 4:u=hn,hn=el(n.stateNode.containerInfo),Pt(s,n),Lt(n),hn=u;break;case 12:Pt(s,n),Lt(n);break;case 31:Pt(s,n),Lt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ha(n,u)));break;case 13:Pt(s,n),Lt(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(za=bt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ha(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,O=Gn,z=st;if(Gn=O||g,st=z||N,Pt(s,n),st=z,Gn=O,Lt(n),u&8192)e:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||N||Gn||st||ji(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(v=N.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=N.stateNode;var Y=N.memoizedProps.style,q=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ne){Le(N,N.return,ne)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ne){Le(N,N.return,ne)}}}else if(s.tag===18){if(a===null){N=s;try{var V=N.stateNode;g?yg(V,!0):yg(N.stateNode,!1)}catch(ne){Le(N,N.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ha(n,a))));break;case 19:Pt(s,n),Lt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ha(n,u)));break;case 30:break;case 21:break;default:Pt(s,n),Lt(n)}}function Lt(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(_m(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,v=Mc(n);Ga(n,v,g);break;case 5:var S=a.stateNode;a.flags&32&&(So(S,""),a.flags&=-33);var A=Mc(n);Ga(n,A,S);break;case 3:case 4:var N=a.stateNode.containerInfo,O=Mc(n);wc(n,O,N);break;default:throw Error(o(161))}}catch(z){Le(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Rm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Rm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Vn(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Em(n,s.alternate,s),s=s.sibling}function ji(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:gi(4,s,s.return),ji(s);break;case 1:Cn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&ym(s,s.return,a),ji(s);break;case 27:ur(s.stateNode);case 26:case 5:Cn(s,s.return),ji(s);break;case 22:s.memoizedState===null&&ji(s);break;case 30:ji(s);break;default:ji(s)}n=n.sibling}}function zn(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=n,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:zn(g,v,a),js(4,v);break;case 1:if(zn(g,v,a),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(O){Le(u,u.return,O)}if(u=v,g=u.updateQueue,g!==null){var A=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)sp(N[g],A)}catch(O){Le(u,u.return,O)}}a&&S&64&&gm(v),er(v,v.return);break;case 27:Tm(v);case 26:case 5:zn(g,v,a),a&&u===null&&S&4&&vm(v),er(v,v.return);break;case 12:zn(g,v,a);break;case 31:zn(g,v,a),a&&S&4&&bm(g,v);break;case 13:zn(g,v,a),a&&S&4&&Mm(g,v);break;case 22:v.memoizedState===null&&zn(g,v,a),er(v,v.return);break;case 30:break;default:zn(g,v,a)}s=s.sibling}}function Nc(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Hs(a))}function xc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Hs(n))}function pn(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Nm(n,s,a,u),s=s.sibling}function Nm(n,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:pn(n,s,a,u),g&2048&&js(9,s);break;case 1:pn(n,s,a,u);break;case 3:pn(n,s,a,u),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Hs(n)));break;case 12:if(g&2048){pn(n,s,a,u),n=s.stateNode;try{var v=s.memoizedProps,S=v.id,A=v.onPostCommit;typeof A=="function"&&A(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Le(s,s.return,N)}}else pn(n,s,a,u);break;case 31:pn(n,s,a,u);break;case 13:pn(n,s,a,u);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?pn(n,s,a,u):tr(n,s):v._visibility&2?pn(n,s,a,u):(v._visibility|=2,Vo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Nc(S,s);break;case 24:pn(n,s,a,u),g&2048&&xc(s.alternate,s);break;default:pn(n,s,a,u)}}function Vo(n,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=n,S=s,A=a,N=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Vo(v,S,A,N,g),js(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Vo(v,S,A,N,g):tr(v,S):(z._visibility|=2,Vo(v,S,A,N,g)),g&&O&2048&&Nc(S.alternate,S);break;case 24:Vo(v,S,A,N,g),g&&O&2048&&xc(S.alternate,S);break;default:Vo(v,S,A,N,g)}s=s.sibling}}function tr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,g=u.flags;switch(u.tag){case 22:tr(a,u),g&2048&&Nc(u.alternate,u);break;case 24:tr(a,u),g&2048&&xc(u.alternate,u);break;default:tr(a,u)}s=s.sibling}}var nr=8192;function zo(n,s,a){if(n.subtreeFlags&nr)for(n=n.child;n!==null;)xm(n,s,a),n=n.sibling}function xm(n,s,a){switch(n.tag){case 26:zo(n,s,a),n.flags&nr&&n.memoizedState!==null&&lE(a,hn,n.memoizedState,n.memoizedProps);break;case 5:zo(n,s,a);break;case 3:case 4:var u=hn;hn=el(n.stateNode.containerInfo),zo(n,s,a),hn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=nr,nr=16777216,zo(n,s,a),nr=u):zo(n,s,a));break;default:zo(n,s,a)}}function Im(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ir(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ct=u,Um(u,n)}Im(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Dm(n),n=n.sibling}function Dm(n){switch(n.tag){case 0:case 11:case 15:ir(n),n.flags&2048&&gi(9,n,n.return);break;case 3:ir(n);break;case 12:ir(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Va(n)):ir(n);break;default:ir(n)}}function Va(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];ct=u,Um(u,n)}Im(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:gi(8,s,s.return),Va(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Va(s));break;default:Va(s)}n=n.sibling}}function Um(n,s){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:gi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,ct=u;else e:for(a=n;ct!==null;){u=ct;var g=u.sibling,v=u.return;if(Cm(u),u===a){ct=null;break e}if(g!==null){g.return=v,ct=g;break e}ct=v}}}var CS={getCacheForType:function(n){var s=gt(nt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return gt(nt).controller.signal}},AS=typeof WeakMap=="function"?WeakMap:Map,De=0,Ge=null,ve=null,Se=0,Pe=0,Yt=null,yi=!1,Bo=!1,Ic=!1,Bn=0,We=0,vi=0,eo=0,Dc=0,Jt=0,Fo=0,or=null,kt=null,Uc=!1,za=0,Pm=0,Ba=1/0,Fa=null,_i=null,at=0,Ti=null,$o=null,Fn=0,Pc=0,Lc=null,Lm=null,sr=0,kc=null;function Kt(){return(De&2)!==0&&Se!==0?Se&-Se:H.T!==null?zc():Zd()}function km(){if(Jt===0)if((Se&536870912)===0||Me){var n=fe;fe<<=1,(fe&3932160)===0&&(fe=262144),Jt=n}else Jt=536870912;return n=Ft.current,n!==null&&(n.flags|=32),Jt}function Ot(n,s,a){(n===Ge&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)&&(Yo(n,0),Si(n,Se,Jt,!1)),Ms(n,a),((De&2)===0||n!==Ge)&&(n===Ge&&((De&2)===0&&(eo|=a),We===4&&Si(n,Se,Jt,!1)),An(n))}function Om(n,s,a){if((De&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Rt(n,s),g=u?wS(n,s):qc(n,s,!0),v=u;do{if(g===0){Bo&&!u&&Si(n,s,0,!1);break}else{if(a=n.current.alternate,v&&!bS(a)){g=qc(n,s,!1),v=!1;continue}if(g===2){if(v=s,n.errorRecoveryDisabledLanes&v)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var A=n;g=or;var N=A.current.memoizedState.isDehydrated;if(N&&(Yo(A,S).flags|=256),S=qc(A,S,!1),S!==2){if(Ic&&!N){A.errorRecoveryDisabledLanes|=v,eo|=v,g=4;break e}v=kt,kt=g,v!==null&&(kt===null?kt=v:kt.push.apply(kt,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Yo(n,0),Si(n,s,0,!0);break}e:{switch(u=n,v=g,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Si(u,s,Jt,!yi);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=za+300-bt(),10<g)){if(Si(u,s,Jt,!yi),Et(u,0,!0)!==0)break e;Fn=s,u.timeoutHandle=pg(qm.bind(null,u,a,kt,Fa,Uc,s,Jt,eo,Fo,yi,v,"Throttled",-0,0),g);break e}qm(u,a,kt,Fa,Uc,s,Jt,eo,Fo,yi,v,null,-0,0)}}break}while(!0);An(n)}function qm(n,s,a,u,g,v,S,A,N,O,z,Y,q,V){if(n.timeoutHandle=-1,Y=s.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},xm(s,v,Y);var ne=(v&62914560)===v?za-bt():(v&4194048)===v?Pm-bt():0;if(ne=uE(Y,ne),ne!==null){Fn=v,n.cancelPendingCommit=ne(Ym.bind(null,n,s,v,a,u,g,S,A,N,z,Y,null,q,V)),Si(n,v,S,!O);return}}Ym(n,s,v,a,u,g,S,A,N)}function bS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],v=g.getSnapshot;g=g.value;try{if(!zt(v(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Si(n,s,a,u){s&=~Dc,s&=~eo,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var g=s;0<g;){var v=31-wt(g),S=1<<v;u[v]=-1,g&=~S}a!==0&&Kd(n,a,s)}function $a(){return(De&6)===0?(rr(0),!1):!0}function Oc(){if(ve!==null){if(Pe===0)var n=ve.return;else n=ve,Un=$i=null,ju(n),ko=null,zs=0,n=ve;for(;n!==null;)mm(n.alternate,n),n=n.return;ve=null}}function Yo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,$S(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Fn=0,Oc(),Ge=n,ve=a=In(n.current,null),Se=s,Pe=0,Yt=null,yi=!1,Bo=Rt(n,s),Ic=!1,Fo=Jt=Dc=eo=vi=We=0,kt=or=null,Uc=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var g=31-wt(u),v=1<<g;s|=n[g],u&=~v}return Bn=s,da(),a}function Gm(n,s){ge=null,H.H=Xs,s===Lo||s===Ta?(s=tp(),Pe=3):s===Vu?(s=tp(),Pe=4):Pe=s===mc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yt=s,ve===null&&(We=1,Pa(n,en(s,n.current)))}function Hm(){var n=Ft.current;return n===null?!0:(Se&4194048)===Se?sn===null:(Se&62914560)===Se||(Se&536870912)!==0?n===sn:!1}function Vm(){var n=H.H;return H.H=Xs,n===null?Xs:n}function zm(){var n=H.A;return H.A=CS,n}function Ya(){We=4,yi||(Se&4194048)!==Se&&Ft.current!==null||(Bo=!0),(vi&134217727)===0&&(eo&134217727)===0||Ge===null||Si(Ge,Se,Jt,!1)}function qc(n,s,a){var u=De;De|=2;var g=Vm(),v=zm();(Ge!==n||Se!==s)&&(Fa=null,Yo(n,s)),s=!1;var S=We;e:do try{if(Pe!==0&&ve!==null){var A=ve,N=Yt;switch(Pe){case 8:Oc(),S=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(s=!0);var O=Pe;if(Pe=0,Yt=null,Jo(n,A,N,O),a&&Bo){S=0;break e}break;default:O=Pe,Pe=0,Yt=null,Jo(n,A,N,O)}}MS(),S=We;break}catch(z){Gm(n,z)}while(!0);return s&&n.shellSuspendCounter++,Un=$i=null,De=u,H.H=g,H.A=v,ve===null&&(Ge=null,Se=0,da()),S}function MS(){for(;ve!==null;)Bm(ve)}function wS(n,s){var a=De;De|=2;var u=Vm(),g=zm();Ge!==n||Se!==s?(Fa=null,Ba=bt()+500,Yo(n,s)):Bo=Rt(n,s);e:do try{if(Pe!==0&&ve!==null){s=ve;var v=Yt;t:switch(Pe){case 1:Pe=0,Yt=null,Jo(n,s,v,1);break;case 2:case 9:if(jh(v)){Pe=0,Yt=null,Fm(s);break}s=function(){Pe!==2&&Pe!==9||Ge!==n||(Pe=7),An(n)},v.then(s,s);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:jh(v)?(Pe=0,Yt=null,Fm(s)):(Pe=0,Yt=null,Jo(n,s,v,7));break;case 5:var S=null;switch(ve.tag){case 26:S=ve.memoizedState;case 5:case 27:var A=ve;if(S?Ng(S):A.stateNode.complete){Pe=0,Yt=null;var N=A.sibling;if(N!==null)ve=N;else{var O=A.return;O!==null?(ve=O,Ja(O)):ve=null}break t}}Pe=0,Yt=null,Jo(n,s,v,5);break;case 6:Pe=0,Yt=null,Jo(n,s,v,6);break;case 8:Oc(),We=6;break e;default:throw Error(o(462))}}RS();break}catch(z){Gm(n,z)}while(!0);return Un=$i=null,H.H=u,H.A=g,De=a,ve!==null?0:(Ge=null,Se=0,da(),We)}function RS(){for(;ve!==null&&!Kr();)Bm(ve)}function Bm(n){var s=hm(n.alternate,n,Bn);n.memoizedProps=n.pendingProps,s===null?Ja(n):ve=s}function Fm(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=am(a,s,s.pendingProps,s.type,void 0,Se);break;case 11:s=am(a,s,s.pendingProps,s.type.render,s.ref,Se);break;case 5:ju(s);default:mm(a,s),s=ve=zh(s,Bn),s=hm(a,s,Bn)}n.memoizedProps=n.pendingProps,s===null?Ja(n):ve=s}function Jo(n,s,a,u){Un=$i=null,ju(s),ko=null,zs=0;var g=s.return;try{if(gS(n,g,s,a,Se)){We=1,Pa(n,en(a,n.current)),ve=null;return}}catch(v){if(g!==null)throw ve=g,v;We=1,Pa(n,en(a,n.current)),ve=null;return}s.flags&32768?(Me||u===1?n=!0:Bo||(Se&536870912)!==0?n=!1:(yi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ft.current,u!==null&&u.tag===13&&(u.flags|=16384))),$m(s,n)):Ja(s)}function Ja(n){var s=n;do{if((s.flags&32768)!==0){$m(s,yi);return}n=s.return;var a=_S(s.alternate,s,Bn);if(a!==null){ve=a;return}if(s=s.sibling,s!==null){ve=s;return}ve=s=n}while(s!==null);We===0&&(We=5)}function $m(n,s){do{var a=TS(n.alternate,n);if(a!==null){a.flags&=32767,ve=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ve=n;return}ve=n=a}while(n!==null);We=6,ve=null}function Ym(n,s,a,u,g,v,S,A,N){n.cancelPendingCommit=null;do Ka();while(at!==0);if((De&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=Mu,aT(n,a,v,S,A,N),n===Ge&&(ve=Ge=null,Se=0),$o=s,Ti=n,Fn=a,Pc=v,Lc=g,Lm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,DS(ho,function(){return Zm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,g=Z.p,Z.p=2,S=De,De|=4;try{SS(n,s,a)}finally{De=S,Z.p=g,H.T=u}}at=1,Jm(),Km(),Qm()}}function Jm(){if(at===1){at=0;var n=Ti,s=$o,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var g=De;De|=4;try{wm(s,n);var v=Xc,S=Uh(n.containerInfo),A=v.focusedElem,N=v.selectionRange;if(S!==A&&A&&A.ownerDocument&&Dh(A.ownerDocument.documentElement,A)){if(N!==null&&Su(A)){var O=N.start,z=N.end;if(z===void 0&&(z=O),"selectionStart"in A)A.selectionStart=O,A.selectionEnd=Math.min(z,A.value.length);else{var Y=A.ownerDocument||document,q=Y&&Y.defaultView||window;if(q.getSelection){var V=q.getSelection(),ne=A.textContent.length,ue=Math.min(N.start,ne),qe=N.end===void 0?ue:Math.min(N.end,ne);!V.extend&&ue>qe&&(S=qe,qe=ue,ue=S);var L=Ih(A,ue),I=Ih(A,qe);if(L&&I&&(V.rangeCount!==1||V.anchorNode!==L.node||V.anchorOffset!==L.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var k=Y.createRange();k.setStart(L.node,L.offset),V.removeAllRanges(),ue>qe?(V.addRange(k),V.extend(I.node,I.offset)):(k.setEnd(I.node,I.offset),V.addRange(k))}}}}for(Y=[],V=A;V=V.parentNode;)V.nodeType===1&&Y.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Y.length;A++){var $=Y[A];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}rl=!!Qc,Xc=Qc=null}finally{De=g,Z.p=u,H.T=a}}n.current=s,at=2}}function Km(){if(at===2){at=0;var n=Ti,s=$o,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var g=De;De|=4;try{Em(n,s.alternate,s)}finally{De=g,Z.p=u,H.T=a}}at=3}}function Qm(){if(at===4||at===3){at=0,Qr();var n=Ti,s=$o,a=Fn,u=Lm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?at=5:(at=0,$o=Ti=null,Xm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(_i=null),nu(a),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Oi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,g=Z.p,Z.p=2,H.T=null;try{for(var v=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];v(A.value,{componentStack:A.stack})}}finally{H.T=s,Z.p=g}}(Fn&3)!==0&&Ka(),An(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===kc?sr++:(sr=0,kc=n):sr=0,rr(0)}}function Xm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Hs(s)))}function Ka(){return Jm(),Km(),Qm(),Zm()}function Zm(){if(at!==5)return!1;var n=Ti,s=Pc;Pc=0;var a=nu(Fn),u=H.T,g=Z.p;try{Z.p=32>a?32:a,H.T=null,a=Lc,Lc=null;var v=Ti,S=Fn;if(at=0,$o=Ti=null,Fn=0,(De&6)!==0)throw Error(o(331));var A=De;if(De|=4,Dm(v.current),Nm(v,v.current,S,a),De=A,rr(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Oi,v)}catch{}return!0}finally{Z.p=g,H.T=u,Xm(n,s)}}function Wm(n,s,a){s=en(a,s),s=pc(n.stateNode,s,2),n=hi(n,s,2),n!==null&&(Ms(n,2),An(n))}function Le(n,s,a){if(n.tag===3)Wm(n,n,a);else for(;s!==null;){if(s.tag===3){Wm(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_i===null||!_i.has(u))){n=en(a,n),a=jp(2),u=hi(s,a,2),u!==null&&(em(a,u,s,n),Ms(u,2),An(u));break}}s=s.return}}function Gc(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new AS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Ic=!0,g.add(a),n=NS.bind(null,n,s,a),s.then(n,n))}function NS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Ge===n&&(Se&a)===a&&(We===4||We===3&&(Se&62914560)===Se&&300>bt()-za?(De&2)===0&&Yo(n,0):Dc|=a,Fo===Se&&(Fo=0)),An(n)}function jm(n,s){s===0&&(s=ea()),n=zi(n,s),n!==null&&(Ms(n,s),An(n))}function xS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),jm(n,a)}function IS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),jm(n,a)}function DS(n,s){return fo(n,s)}var Qa=null,Ko=null,Hc=!1,Xa=!1,Vc=!1,Ei=0;function An(n){n!==Ko&&n.next===null&&(Ko===null?Qa=Ko=n:Ko=Ko.next=n),Xa=!0,Hc||(Hc=!0,PS())}function rr(n,s){if(!Vc&&Xa){Vc=!0;do for(var a=!1,u=Qa;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var S=u.suspendedLanes,A=u.pingedLanes;v=(1<<31-wt(42|n)+1)-1,v&=g&~(S&~A),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,ig(u,v))}else v=Se,v=Et(u,u===Ge?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Rt(u,v)||(a=!0,ig(u,v));u=u.next}while(a);Vc=!1}}function US(){eg()}function eg(){Xa=Hc=!1;var n=0;Ei!==0&&FS()&&(n=Ei);for(var s=bt(),a=null,u=Qa;u!==null;){var g=u.next,v=tg(u,s);v===0?(u.next=null,a===null?Qa=g:a.next=g,g===null&&(Ko=a)):(a=u,(n!==0||(v&3)!==0)&&(Xa=!0)),u=g}at!==0&&at!==5||rr(n),Ei!==0&&(Ei=0)}function tg(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var S=31-wt(v),A=1<<S,N=g[S];N===-1?((A&a)===0||(A&u)!==0)&&(g[S]=eu(A,s)):N<=s&&(n.expiredLanes|=A),v&=~A}if(s=Ge,a=Se,a=Et(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&bs(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Rt(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&bs(u),nu(a)){case 2:case 8:a=Zr;break;case 32:a=ho;break;case 268435456:a=jr;break;default:a=ho}return u=ng.bind(null,n),a=fo(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&bs(u),n.callbackPriority=2,n.callbackNode=null,2}function ng(n,s){if(at!==0&&at!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ka()&&n.callbackNode!==a)return null;var u=Se;return u=Et(n,n===Ge?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Om(n,u,s),tg(n,bt()),n.callbackNode!=null&&n.callbackNode===a?ng.bind(null,n):null)}function ig(n,s){if(Ka())return null;Om(n,s,!0)}function PS(){YS(function(){(De&6)!==0?fo(Xr,US):eg()})}function zc(){if(Ei===0){var n=Uo;n===0&&(n=K,K<<=1,(K&261888)===0&&(K=256)),Ei=n}return Ei}function og(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oa(""+n)}function sg(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function LS(n,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var v=og((g[It]||null).action),S=u.submitter;S&&(s=(s=S[It]||null)?og(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var A=new la("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ei!==0){var N=S?sg(g,S):new FormData(g);lc(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(A.preventDefault(),N=S?sg(g,S):new FormData(g),lc(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var Bc=0;Bc<bu.length;Bc++){var Fc=bu[Bc],kS=Fc.toLowerCase(),OS=Fc[0].toUpperCase()+Fc.slice(1);dn(kS,"on"+OS)}dn(kh,"onAnimationEnd"),dn(Oh,"onAnimationIteration"),dn(qh,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(jT,"onTransitionRun"),dn(eS,"onTransitionStart"),dn(tS,"onTransitionCancel"),dn(Gh,"onTransitionEnd"),_o("onMouseEnter",["mouseout","mouseover"]),_o("onMouseLeave",["mouseout","mouseover"]),_o("onPointerEnter",["pointerout","pointerover"]),_o("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ar));function rg(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var S=u.length-1;0<=S;S--){var A=u[S],N=A.instance,O=A.currentTarget;if(A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){fa(z)}g.currentTarget=null,v=N}else for(S=0;S<u.length;S++){if(A=u[S],N=A.instance,O=A.currentTarget,A=A.listener,N!==v&&g.isPropagationStopped())break e;v=A,g.currentTarget=O;try{v(g)}catch(z){fa(z)}g.currentTarget=null,v=N}}}}function _e(n,s){var a=s[iu];a===void 0&&(a=s[iu]=new Set);var u=n+"__bubble";a.has(u)||(ag(s,n,2,!1),a.add(u))}function $c(n,s,a){var u=0;s&&(u|=4),ag(a,n,u,s)}var Za="_reactListening"+Math.random().toString(36).slice(2);function Yc(n){if(!n[Za]){n[Za]=!0,eh.forEach(function(a){a!=="selectionchange"&&(qS.has(a)||$c(a,!1,n),$c(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Za]||(s[Za]=!0,$c("selectionchange",!1,s))}}function ag(n,s,a,u){switch(kg(s)){case 2:var g=dE;break;case 8:g=hE;break;default:g=lf}a=g.bind(null,s,a,n),g=void 0,!du||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function Jc(n,s,a,u,g){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=go(A),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=v=S;continue e}A=A.parentNode}}u=u.return}dh(function(){var O=v,z=cu(a),Y=[];e:{var q=Hh.get(n);if(q!==void 0){var V=la,ne=n;switch(n){case"keypress":if(ra(a)===0)break e;case"keydown":case"keyup":V=IT;break;case"focusin":ne="focus",V=gu;break;case"focusout":ne="blur",V=gu;break;case"beforeblur":case"afterblur":V=gu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=_T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=PT;break;case kh:case Oh:case qh:V=ET;break;case Gh:V=kT;break;case"scroll":case"scrollend":V=yT;break;case"wheel":V=qT;break;case"copy":case"cut":case"paste":V=AT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=yh;break;case"toggle":case"beforetoggle":V=HT}var ue=(s&4)!==0,qe=!ue&&(n==="scroll"||n==="scrollend"),L=ue?q!==null?q+"Capture":null:q;ue=[];for(var I=O,k;I!==null;){var $=I;if(k=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||k===null||L===null||($=Ns(I,L),$!=null&&ue.push(lr(I,$,k))),qe)break;I=I.return}0<ue.length&&(q=new V(q,ne,null,a,z),Y.push({event:q,listeners:ue}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",V=n==="mouseout"||n==="pointerout",q&&a!==uu&&(ne=a.relatedTarget||a.fromElement)&&(go(ne)||ne[mo]))break e;if((V||q)&&(q=z.window===z?z:(q=z.ownerDocument)?q.defaultView||q.parentWindow:window,V?(ne=a.relatedTarget||a.toElement,V=O,ne=ne?go(ne):null,ne!==null&&(qe=l(ne),ue=ne.tag,ne!==qe||ue!==5&&ue!==27&&ue!==6)&&(ne=null)):(V=null,ne=O),V!==ne)){if(ue=mh,$="onMouseLeave",L="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ue=yh,$="onPointerLeave",L="onPointerEnter",I="pointer"),qe=V==null?q:Rs(V),k=ne==null?q:Rs(ne),q=new ue($,I+"leave",V,a,z),q.target=qe,q.relatedTarget=k,$=null,go(z)===O&&(ue=new ue(L,I+"enter",ne,a,z),ue.target=k,ue.relatedTarget=qe,$=ue),qe=$,V&&ne)t:{for(ue=GS,L=V,I=ne,k=0,$=L;$;$=ue($))k++;$=0;for(var ae=I;ae;ae=ue(ae))$++;for(;0<k-$;)L=ue(L),k--;for(;0<$-k;)I=ue(I),$--;for(;k--;){if(L===I||I!==null&&L===I.alternate){ue=L;break t}L=ue(L),I=ue(I)}ue=null}else ue=null;V!==null&&lg(Y,q,V,ue,!1),ne!==null&&qe!==null&&lg(Y,qe,ne,ue,!0)}}e:{if(q=O?Rs(O):window,V=q.nodeName&&q.nodeName.toLowerCase(),V==="select"||V==="input"&&q.type==="file")var Re=bh;else if(Ch(q))if(Mh)Re=XT;else{Re=KT;var se=JT}else V=q.nodeName,!V||V.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&lu(O.elementType)&&(Re=bh):Re=QT;if(Re&&(Re=Re(n,O))){Ah(Y,Re,a,z);break e}se&&se(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&au(q,"number",q.value)}switch(se=O?Rs(O):window,n){case"focusin":(Ch(se)||se.contentEditable==="true")&&(bo=se,Eu=O,Os=null);break;case"focusout":Os=Eu=bo=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,Ph(Y,a,z);break;case"selectionchange":if(WT)break;case"keydown":case"keyup":Ph(Y,a,z)}var ye;if(vu)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ao?Sh(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(vh&&a.locale!=="ko"&&(Ao||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ao&&(ye=hh()):(ri=z,hu="value"in ri?ri.value:ri.textContent,Ao=!0)),se=Wa(O,Ee),0<se.length&&(Ee=new gh(Ee,n,null,a,z),Y.push({event:Ee,listeners:se}),ye?Ee.data=ye:(ye=Eh(a),ye!==null&&(Ee.data=ye)))),(ye=zT?BT(n,a):FT(n,a))&&(Ee=Wa(O,"onBeforeInput"),0<Ee.length&&(se=new gh("onBeforeInput","beforeinput",null,a,z),Y.push({event:se,listeners:Ee}),se.data=ye)),LS(Y,n,O,a,z)}rg(Y,s)})}function lr(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Wa(n,s){for(var a=s+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Ns(n,a),g!=null&&u.unshift(lr(n,g,v)),g=Ns(n,s),g!=null&&u.push(lr(n,g,v))),n.tag===3)return u;n=n.return}return[]}function GS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function lg(n,s,a,u,g){for(var v=s._reactName,S=[];a!==null&&a!==u;){var A=a,N=A.alternate,O=A.stateNode;if(A=A.tag,N!==null&&N===u)break;A!==5&&A!==26&&A!==27||O===null||(N=O,g?(O=Ns(a,v),O!=null&&S.unshift(lr(a,O,N))):g||(O=Ns(a,v),O!=null&&S.push(lr(a,O,N)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var HS=/\r\n?/g,VS=/\u0000|\uFFFD/g;function ug(n){return(typeof n=="string"?n:""+n).replace(HS,`
`).replace(VS,"")}function cg(n,s){return s=ug(s),ug(n)===s}function Oe(n,s,a,u,g,v){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||So(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&So(n,""+u);break;case"className":na(n,"class",u);break;case"tabIndex":na(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":na(n,a,u);break;case"style":ch(n,u,v);break;case"data":if(s!=="object"){na(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=oa(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&Oe(n,s,"name",g.name,g,null),Oe(n,s,"formEncType",g.formEncType,g,null),Oe(n,s,"formMethod",g.formMethod,g,null),Oe(n,s,"formTarget",g.formTarget,g,null)):(Oe(n,s,"encType",g.encType,g,null),Oe(n,s,"method",g.method,g,null),Oe(n,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=oa(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=Nn);break;case"onScroll":u!=null&&_e("scroll",n);break;case"onScrollEnd":u!=null&&_e("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=oa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":_e("beforetoggle",n),_e("toggle",n),ta(n,"popover",u);break;case"xlinkActuate":Rn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Rn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Rn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Rn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Rn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Rn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Rn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ta(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mT.get(a)||a,ta(n,a,u))}}function Kc(n,s,a,u,g,v){switch(a){case"style":ch(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));n.innerHTML=a}}break;case"children":typeof u=="string"?So(n,u):(typeof u=="number"||typeof u=="bigint")&&So(n,""+u);break;case"onScroll":u!=null&&_e("scroll",n);break;case"onScrollEnd":u!=null&&_e("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!th.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),v=n[It]||null,v=v!=null?v[a]:null,typeof v=="function"&&n.removeEventListener(s,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):ta(n,a,u)}}}function vt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",n),_e("load",n);var u=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var S=a[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Oe(n,s,v,S,a,null)}}g&&Oe(n,s,"srcSet",a.srcSet,a,null),u&&Oe(n,s,"src",a.src,a,null);return;case"input":_e("invalid",n);var A=v=S=g=null,N=null,O=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":g=z;break;case"type":S=z;break;case"checked":N=z;break;case"defaultChecked":O=z;break;case"value":v=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Oe(n,s,u,z,a,null)}}rh(n,v,A,N,O,S,g,!1);return;case"select":_e("invalid",n),u=S=v=null;for(g in a)if(a.hasOwnProperty(g)&&(A=a[g],A!=null))switch(g){case"value":v=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:Oe(n,s,g,A,a,null)}s=v,a=S,n.multiple=!!u,s!=null?To(n,!!u,s,!1):a!=null&&To(n,!!u,a,!0);return;case"textarea":_e("invalid",n),v=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(A=a[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":v=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:Oe(n,s,S,A,a,null)}lh(n,u,g,v);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Oe(n,s,N,u,a,null)}return;case"dialog":_e("beforetoggle",n),_e("toggle",n),_e("cancel",n),_e("close",n);break;case"iframe":case"object":_e("load",n);break;case"video":case"audio":for(u=0;u<ar.length;u++)_e(ar[u],n);break;case"image":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"embed":case"source":case"link":_e("error",n),_e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Oe(n,s,O,u,a,null)}return;default:if(lu(s)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&Kc(n,s,z,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&Oe(n,s,A,u,a,null))}function zS(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,A=null,N=null,O=null,z=null;for(V in a){var Y=a[V];if(a.hasOwnProperty(V)&&Y!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=Y;default:u.hasOwnProperty(V)||Oe(n,s,V,null,u,Y)}}for(var q in u){var V=u[q];if(Y=a[q],u.hasOwnProperty(q)&&(V!=null||Y!=null))switch(q){case"type":v=V;break;case"name":g=V;break;case"checked":O=V;break;case"defaultChecked":z=V;break;case"value":S=V;break;case"defaultValue":A=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,s));break;default:V!==Y&&Oe(n,s,q,V,u,Y)}}ru(n,S,A,N,O,z,v,g);return;case"select":V=S=A=q=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":V=N;default:u.hasOwnProperty(v)||Oe(n,s,v,null,u,N)}for(g in u)if(v=u[g],N=a[g],u.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":q=v;break;case"defaultValue":A=v;break;case"multiple":S=v;default:v!==N&&Oe(n,s,g,v,u,N)}s=A,a=S,u=V,q!=null?To(n,!!a,q,!1):!!u!=!!a&&(s!=null?To(n,!!a,s,!0):To(n,!!a,a?[]:"",!1));return;case"textarea":V=q=null;for(A in a)if(g=a[A],a.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Oe(n,s,A,null,u,g)}for(S in u)if(g=u[S],v=a[S],u.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":q=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==v&&Oe(n,s,S,g,u,v)}ah(n,q,V);return;case"option":for(var ne in a)if(q=a[ne],a.hasOwnProperty(ne)&&q!=null&&!u.hasOwnProperty(ne))switch(ne){case"selected":n.selected=!1;break;default:Oe(n,s,ne,null,u,q)}for(N in u)if(q=u[N],V=a[N],u.hasOwnProperty(N)&&q!==V&&(q!=null||V!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Oe(n,s,N,q,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in a)q=a[ue],a.hasOwnProperty(ue)&&q!=null&&!u.hasOwnProperty(ue)&&Oe(n,s,ue,null,u,q);for(O in u)if(q=u[O],V=a[O],u.hasOwnProperty(O)&&q!==V&&(q!=null||V!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,s));break;default:Oe(n,s,O,q,u,V)}return;default:if(lu(s)){for(var qe in a)q=a[qe],a.hasOwnProperty(qe)&&q!==void 0&&!u.hasOwnProperty(qe)&&Kc(n,s,qe,void 0,u,q);for(z in u)q=u[z],V=a[z],!u.hasOwnProperty(z)||q===V||q===void 0&&V===void 0||Kc(n,s,z,q,u,V);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!u.hasOwnProperty(L)&&Oe(n,s,L,null,u,q);for(Y in u)q=u[Y],V=a[Y],!u.hasOwnProperty(Y)||q===V||q==null&&V==null||Oe(n,s,Y,q,u,V)}function fg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],v=g.transferSize,S=g.initiatorType,A=g.duration;if(v&&A&&fg(S)){for(S=0,A=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],O=N.startTime;if(O>A)break;var z=N.transferSize,Y=N.initiatorType;z&&fg(Y)&&(N=N.responseEnd,S+=z*(N<A?1:(A-O)/(N-O)))}if(--u,s+=8*(v+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qc=null,Xc=null;function ja(n){return n.nodeType===9?n:n.ownerDocument}function dg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Zc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wc=null;function FS(){var n=window.event;return n&&n.type==="popstate"?n===Wc?!1:(Wc=n,!0):(Wc=null,!1)}var pg=typeof setTimeout=="function"?setTimeout:void 0,$S=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,YS=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(n){return mg.resolve(null).then(n).catch(JS)}:pg;function JS(n){setTimeout(function(){throw n})}function Ci(n){return n==="head"}function gg(n,s){var a=s,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Wo(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ur(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ur(a);for(var v=a.firstChild;v;){var S=v.nextSibling,A=v.nodeName;v[ws]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}else a==="body"&&ur(n.ownerDocument.body);a=g}while(a);Wo(s)}function yg(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function jc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jc(a),ou(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function KS(n,s,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ws])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=rn(n.nextSibling),n===null)break}return null}function QS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=rn(n.nextSibling),n===null))return null;return n}function vg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=rn(n.nextSibling),n===null))return null;return n}function ef(n){return n.data==="$?"||n.data==="$~"}function tf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function XS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function rn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var nf=null;function _g(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return rn(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function Tg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Sg(n,s,a){switch(s=ja(a),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function ur(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ou(n)}var an=new Map,Eg=new Set;function el(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var $n=Z.d;Z.d={f:ZS,r:WS,D:jS,C:eE,L:tE,m:nE,X:oE,S:iE,M:sE};function ZS(){var n=$n.f(),s=$a();return n||s}function WS(n){var s=yo(n);s!==null&&s.tag===5&&s.type==="form"?Gp(s):$n.r(n)}var Qo=typeof document>"u"?null:document;function Cg(n,s,a){var u=Qo;if(u&&typeof s=="string"&&s){var g=Wt(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Eg.has(g)||(Eg.add(g),n={rel:n,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),vt(s,"link",n),ut(s),u.head.appendChild(s)))}}function jS(n){$n.D(n),Cg("dns-prefetch",n,null)}function eE(n,s){$n.C(n,s),Cg("preconnect",n,s)}function tE(n,s,a){$n.L(n,s,a);var u=Qo;if(u&&n&&s){var g='link[rel="preload"][as="'+Wt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Wt(a.imageSizes)+'"]')):g+='[href="'+Wt(n)+'"]';var v=g;switch(s){case"style":v=Xo(n);break;case"script":v=Zo(n)}an.has(v)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),an.set(v,n),u.querySelector(g)!==null||s==="style"&&u.querySelector(cr(v))||s==="script"&&u.querySelector(fr(v))||(s=u.createElement("link"),vt(s,"link",n),ut(s),u.head.appendChild(s)))}}function nE(n,s){$n.m(n,s);var a=Qo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Wt(u)+'"][href="'+Wt(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Zo(n)}if(!an.has(v)&&(n=_({rel:"modulepreload",href:n},s),an.set(v,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fr(v)))return}u=a.createElement("link"),vt(u,"link",n),ut(u),a.head.appendChild(u)}}}function iE(n,s,a){$n.S(n,s,a);var u=Qo;if(u&&n){var g=vo(u).hoistableStyles,v=Xo(n);s=s||"default";var S=g.get(v);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(cr(v)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=an.get(v))&&of(n,a);var N=S=u.createElement("link");ut(N),vt(N,"link",n),N._p=new Promise(function(O,z){N.onload=O,N.onerror=z}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,tl(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(v,S)}}}function oE(n,s){$n.X(n,s);var a=Qo;if(a&&n){var u=vo(a).hoistableScripts,g=Zo(n),v=u.get(g);v||(v=a.querySelector(fr(g)),v||(n=_({src:n,async:!0},s),(s=an.get(g))&&sf(n,s),v=a.createElement("script"),ut(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function sE(n,s){$n.M(n,s);var a=Qo;if(a&&n){var u=vo(a).hoistableScripts,g=Zo(n),v=u.get(g);v||(v=a.querySelector(fr(g)),v||(n=_({src:n,async:!0,type:"module"},s),(s=an.get(g))&&sf(n,s),v=a.createElement("script"),ut(v),vt(v,"link",n),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Ag(n,s,a,u){var g=(g=me.current)?el(g):null;if(!g)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Xo(a.href),a=vo(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Xo(a.href);var v=vo(g).hoistableStyles,S=v.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,S),(v=g.querySelector(cr(n)))&&!v._p&&(S.instance=v,S.state.loading=5),an.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},an.set(n,a),v||rE(g,n,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Zo(a),a=vo(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Xo(n){return'href="'+Wt(n)+'"'}function cr(n){return'link[rel="stylesheet"]['+n+"]"}function bg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function rE(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),vt(s,"link",a),ut(s),n.head.appendChild(s))}function Zo(n){return'[src="'+Wt(n)+'"]'}function fr(n){return"script[async]"+n}function Mg(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Wt(a.href)+'"]');if(u)return s.instance=u,ut(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ut(u),vt(u,"style",g),tl(u,a.precedence,n),s.instance=u;case"stylesheet":g=Xo(a.href);var v=n.querySelector(cr(g));if(v)return s.state.loading|=4,s.instance=v,ut(v),v;u=bg(a),(g=an.get(g))&&of(u,g),v=(n.ownerDocument||n).createElement("link"),ut(v);var S=v;return S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),s.state.loading|=4,tl(v,a.precedence,n),s.instance=v;case"script":return v=Zo(a.src),(g=n.querySelector(fr(v)))?(s.instance=g,ut(g),g):(u=a,(g=an.get(v))&&(u=_({},a),sf(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),ut(g),vt(g,"link",u),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,tl(u,a.precedence,n));return s.instance}function tl(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===s)v=A;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function of(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function sf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var nl=null;function wg(n,s,a){if(nl===null){var u=new Map,g=nl=new Map;g.set(a,u)}else g=nl,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var v=a[g];if(!(v[ws]||v[pt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=n+S;var A=u.get(S);A?A.push(v):u.set(S,[v])}}return u}function Rg(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function aE(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ng(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function lE(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Xo(u.href),v=s.querySelector(cr(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=il.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=v,ut(v);return}v=s.ownerDocument||s,u=bg(u),(g=an.get(g))&&of(u,g),v=v.createElement("link"),ut(v);var S=v;S._p=new Promise(function(A,N){S.onload=A,S.onerror=N}),vt(v,"link",u),a.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=il.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var rf=0;function uE(n,s){return n.stylesheets&&n.count===0&&sl(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&sl(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+s);0<n.imgBytes&&rf===0&&(rf=62500*BS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&sl(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>rf?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ol=null;function sl(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ol=new Map,s.forEach(cE,n),ol=null,il.call(n))}function cE(n,s){if(!(s.state.loading&4)){var a=ol.get(n);if(a)var u=a.get(null);else{a=new Map,ol.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),v=a.get(S)||u,v===u&&a.set(null,g),a.set(S,g),this.count++,u=il.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var dr={$$typeof:P,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function fE(n,s,a,u,g,v,S,A,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=po(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.hiddenUpdates=po(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function xg(n,s,a,u,g,v,S,A,N,O,z,Y){return n=new fE(n,s,a,S,N,O,z,Y,A),s=1,v===!0&&(s|=24),v=Bt(3,null,null,s),n.current=v,v.stateNode=n,s=qu(),s.refCount++,n.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:s},zu(v),n}function Ig(n){return n?(n=Ro,n):Ro}function Dg(n,s,a,u,g,v){g=Ig(g),u.context===null?u.context=g:u.pendingContext=g,u=di(s),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=hi(n,u,s),a!==null&&(Ot(a,n,s),Fs(a,n,s))}function Ug(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function af(n,s){Ug(n,s),(n=n.alternate)&&Ug(n,s)}function Pg(n){if(n.tag===13||n.tag===31){var s=zi(n,67108864);s!==null&&Ot(s,n,67108864),af(n,67108864)}}function Lg(n){if(n.tag===13||n.tag===31){var s=Kt();s=tu(s);var a=zi(n,s);a!==null&&Ot(a,n,s),af(n,s)}}var rl=!0;function dE(n,s,a,u){var g=H.T;H.T=null;var v=Z.p;try{Z.p=2,lf(n,s,a,u)}finally{Z.p=v,H.T=g}}function hE(n,s,a,u){var g=H.T;H.T=null;var v=Z.p;try{Z.p=8,lf(n,s,a,u)}finally{Z.p=v,H.T=g}}function lf(n,s,a,u){if(rl){var g=uf(u);if(g===null)Jc(n,s,u,al,a),Og(n,u);else if(mE(g,n,s,a,u))u.stopPropagation();else if(Og(n,u),s&4&&-1<pE.indexOf(n)){for(;g!==null;){var v=yo(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ie(v.pendingLanes);if(S!==0){var A=v;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var N=1<<31-wt(S);A.entanglements[1]|=N,S&=~N}An(v),(De&6)===0&&(Ba=bt()+500,rr(0))}}break;case 31:case 13:A=zi(v,2),A!==null&&Ot(A,v,2),$a(),af(v,2)}if(v=uf(u),v===null&&Jc(n,s,u,al,a),v===g)break;g=v}g!==null&&u.stopPropagation()}else Jc(n,s,u,null,a)}}function uf(n){return n=cu(n),cf(n)}var al=null;function cf(n){if(al=null,n=go(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return al=n,null}function kg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ql()){case Xr:return 2;case Zr:return 8;case ho:case Wr:return 32;case jr:return 268435456;default:return 32}default:return 32}}var ff=!1,Ai=null,bi=null,Mi=null,hr=new Map,pr=new Map,wi=[],pE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Og(n,s){switch(n){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":hr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(s.pointerId)}}function mr(n,s,a,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},s!==null&&(s=yo(s),s!==null&&Pg(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function mE(n,s,a,u,g){switch(s){case"focusin":return Ai=mr(Ai,n,s,a,u,g),!0;case"dragenter":return bi=mr(bi,n,s,a,u,g),!0;case"mouseover":return Mi=mr(Mi,n,s,a,u,g),!0;case"pointerover":var v=g.pointerId;return hr.set(v,mr(hr.get(v)||null,n,s,a,u,g)),!0;case"gotpointercapture":return v=g.pointerId,pr.set(v,mr(pr.get(v)||null,n,s,a,u,g)),!0}return!1}function qg(n){var s=go(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,Wd(n.priority,function(){Lg(a)});return}}else if(s===31){if(s=f(a),s!==null){n.blockedOn=s,Wd(n.priority,function(){Lg(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ll(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=uf(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);uu=u,a.target.dispatchEvent(u),uu=null}else return s=yo(a),s!==null&&Pg(s),n.blockedOn=a,!1;s.shift()}return!0}function Gg(n,s,a){ll(n)&&a.delete(s)}function gE(){ff=!1,Ai!==null&&ll(Ai)&&(Ai=null),bi!==null&&ll(bi)&&(bi=null),Mi!==null&&ll(Mi)&&(Mi=null),hr.forEach(Gg),pr.forEach(Gg)}function ul(n,s){n.blockedOn===s&&(n.blockedOn=null,ff||(ff=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gE)))}var cl=null;function Hg(n){cl!==n&&(cl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cl===n&&(cl=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],g=n[s+2];if(typeof u!="function"){if(cf(u||a)===null)continue;break}var v=yo(a);v!==null&&(n.splice(s,3),s-=3,lc(v,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Wo(n){function s(N){return ul(N,n)}Ai!==null&&ul(Ai,n),bi!==null&&ul(bi,n),Mi!==null&&ul(Mi,n),hr.forEach(s),pr.forEach(s);for(var a=0;a<wi.length;a++){var u=wi[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<wi.length&&(a=wi[0],a.blockedOn===null);)qg(a),a.blockedOn===null&&wi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],v=a[u+1],S=g[It]||null;if(typeof v=="function")S||Hg(a);else if(S){var A=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[It]||null)A=S.formAction;else if(cf(g)!==null)continue}else A=S.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),Hg(a)}}}function Vg(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function df(n){this._internalRoot=n}fl.prototype.render=df.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Kt();Dg(a,u,n,s,null,null)},fl.prototype.unmount=df.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Dg(n.current,2,null,n,null,null),$a(),s[mo]=null}};function fl(n){this._internalRoot=n}fl.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wi.length&&s!==0&&s<wi[a].priority;a++);wi.splice(a,0,n),a===0&&qg(n)}};var zg=e.version;if(zg!=="19.2.0")throw Error(o(527,zg,"19.2.0"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=h(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var yE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Oi=dl.inject(yE),Mt=dl}catch{}}return yr.createRoot=function(n,s){if(!r(n))throw Error(o(299));var a=!1,u="",g=Qp,v=Xp,S=Zp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=xg(n,1,!1,null,null,a,u,null,g,v,S,Vg),n[mo]=s.current,Yc(n),new df(s)},yr.hydrateRoot=function(n,s,a){if(!r(n))throw Error(o(299));var u=!1,g="",v=Qp,S=Xp,A=Zp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=xg(n,1,!0,s,a??null,u,g,N,v,S,A,Vg),s.context=Ig(null),a=s.current,u=Kt(),u=tu(u),g=di(u),g.callback=null,hi(a,g,u),a=u,s.current.lanes=a,Ms(s,a),An(s),n[mo]=s.current,Yc(n),new fl(s)},yr.version="19.2.0",yr}var Wg;function wE(){if(Wg)return mf.exports;Wg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mf.exports=ME(),mf.exports}var RE=wE();var jg="popstate";function NE(t={}){function e(o,r){let{pathname:l,search:c,hash:f}=o.location;return Nf("",{pathname:l,search:c,hash:f},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(o,r){return typeof r=="string"?r:kr(r)}return IE(e,i,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xE(){return Math.random().toString(36).substring(2,10)}function ey(t,e){return{usr:t.state,key:t.key,idx:e}}function Nf(t,e,i=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ps(e):e,state:i,key:e&&e.key||o||xE()}}function kr({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ps(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function IE(t,e,i,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,f="POP",p=null,h=y();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let w=y(),R=w==null?null:w-h;h=w,p&&p({action:f,location:M.location,delta:R})}function T(w,R){f="PUSH";let D=Nf(M.location,w,R);h=y()+1;let P=ey(D,h),J=M.createHref(D);try{c.pushState(P,"",J)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(J)}l&&p&&p({action:f,location:M.location,delta:1})}function C(w,R){f="REPLACE";let D=Nf(M.location,w,R);h=y();let P=ey(D,h),J=M.createHref(D);c.replaceState(P,"",J),l&&p&&p({action:f,location:M.location,delta:0})}function b(w){return DE(w)}let M={get action(){return f},get location(){return t(r,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(jg,_),p=w,()=>{r.removeEventListener(jg,_),p=null}},createHref(w){return e(r,w)},createURL:b,encodeLocation(w){let R=b(w);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:T,replace:C,go(w){return c.go(w)}};return M}function DE(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(i,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:kr(t);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function E0(t,e,i="/"){return UE(t,e,i,!1)}function UE(t,e,i,o){let r=typeof e=="string"?ps(e):e,l=jn(r.pathname||"/",i);if(l==null)return null;let c=C0(t);PE(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let h=$E(l);f=BE(c[p],h,o)}return f}function C0(t,e=[],i=[],o="",r=!1){let l=(c,f,p=r,h)=>{let y={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Qe(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=Zn([o,y.relativePath]),T=i.concat(y);c.children&&c.children.length>0&&(Qe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),C0(c.children,e,T,_,p)),!(c.path==null&&!c.index)&&e.push({path:_,score:VE(_,c.index),routesMeta:T})};return t.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let p of A0(c.path))l(c,f,!0,p)}),e}function A0(t){let e=t.split("/");if(e.length===0)return[];let[i,...o]=e,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=A0(o.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),r&&f.push(...c),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function PE(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:zE(e.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var LE=/^:[\w-]+$/,kE=3,OE=2,qE=1,GE=10,HE=-2,ty=t=>t==="*";function VE(t,e){let i=t.split("/"),o=i.length;return i.some(ty)&&(o+=HE),e&&(o+=OE),i.filter(r=>!ty(r)).reduce((r,l)=>r+(LE.test(l)?kE:l===""?qE:GE),o)}function zE(t,e){return t.length===e.length&&t.slice(0,-1).every((o,r)=>o===e[r])?t[t.length-1]-e[e.length-1]:0}function BE(t,e,i=!1){let{routesMeta:o}=t,r={},l="/",c=[];for(let f=0;f<o.length;++f){let p=o[f],h=f===o.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=wl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),T=p.route;if(!_&&h&&i&&!o[o.length-1].route.index&&(_=wl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(r,_.params),c.push({params:r,pathname:Zn([l,_.pathname]),pathnameBase:XE(Zn([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=Zn([l,_.pathnameBase]))}return c}function wl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,o]=FE(t.path,t.caseSensitive,t.end),r=e.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),f=r.slice(1);return{params:o.reduce((h,{paramName:y,isOptional:_},T)=>{if(y==="*"){let b=f[T]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const C=f[T];return _&&!C?h[y]=void 0:h[y]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function FE(t,e=!1,i=!0){cn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(o.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function $E(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function jn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,o=t.charAt(i);return o&&o!=="/"?null:t.slice(i)||"/"}var YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=t=>YE.test(t);function KE(t,e="/"){let{pathname:i,search:o="",hash:r=""}=typeof t=="string"?ps(t):t,l;if(i)if(JE(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),cn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=ny(i.substring(1),"/"):l=ny(i,e)}else l=e;return{pathname:l,search:ZE(o),hash:WE(r)}}function ny(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function _f(t,e,i,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QE(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function b0(t){let e=QE(t);return e.map((i,o)=>o===e.length-1?i.pathname:i.pathnameBase)}function M0(t,e,i,o=!1){let r;typeof t=="string"?r=ps(t):(r={...t},Qe(!r.pathname||!r.pathname.includes("?"),_f("?","pathname","search",r)),Qe(!r.pathname||!r.pathname.includes("#"),_f("#","pathname","hash",r)),Qe(!r.search||!r.search.includes("#"),_f("#","search","hash",r)));let l=t===""||r.pathname==="",c=l?"/":r.pathname,f;if(c==null)f=i;else{let _=e.length-1;if(!o&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}f=_>=0?e[_]:"/"}let p=KE(r,f),h=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var Zn=t=>t.join("/").replace(/\/\/+/g,"/"),XE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var w0=["POST","PUT","PATCH","DELETE"];new Set(w0);var eC=["GET",...w0];new Set(eC);var ms=U.createContext(null);ms.displayName="DataRouter";var Gl=U.createContext(null);Gl.displayName="DataRouterState";U.createContext(!1);var R0=U.createContext({isTransitioning:!1});R0.displayName="ViewTransition";var tC=U.createContext(new Map);tC.displayName="Fetchers";var nC=U.createContext(null);nC.displayName="Await";var wn=U.createContext(null);wn.displayName="Navigation";var qr=U.createContext(null);qr.displayName="Location";var ni=U.createContext({outlet:null,matches:[],isDataRoute:!1});ni.displayName="Route";var yd=U.createContext(null);yd.displayName="RouteError";function iC(t,{relative:e}={}){Qe(Gr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=U.useContext(wn),{hash:r,pathname:l,search:c}=Hr(t,{relative:e}),f=l;return i!=="/"&&(f=l==="/"?i:Zn([i,l])),o.createHref({pathname:f,search:c,hash:r})}function Gr(){return U.useContext(qr)!=null}function Pi(){return Qe(Gr(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(qr).location}var N0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x0(t){U.useContext(wn).static||U.useLayoutEffect(t)}function Hl(){let{isDataRoute:t}=U.useContext(ni);return t?gC():oC()}function oC(){Qe(Gr(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(ms),{basename:e,navigator:i}=U.useContext(wn),{matches:o}=U.useContext(ni),{pathname:r}=Pi(),l=JSON.stringify(b0(o)),c=U.useRef(!1);return x0(()=>{c.current=!0}),U.useCallback((p,h={})=>{if(cn(c.current,N0),!c.current)return;if(typeof p=="number"){i.go(p);return}let y=M0(p,JSON.parse(l),r,h.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Zn([e,y.pathname])),(h.replace?i.replace:i.push)(y,h.state,h)},[e,i,l,r,t])}U.createContext(null);function Hr(t,{relative:e}={}){let{matches:i}=U.useContext(ni),{pathname:o}=Pi(),r=JSON.stringify(b0(i));return U.useMemo(()=>M0(t,JSON.parse(r),o,e==="path"),[t,r,o,e])}function sC(t,e){return I0(t,e)}function I0(t,e,i,o,r){Qe(Gr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(wn),{matches:c}=U.useContext(ni),f=c[c.length-1],p=f?f.params:{},h=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let D=_&&_.path||"";D0(h,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let T=Pi(),C;if(e){let D=typeof e=="string"?ps(e):e;Qe(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),C=D}else C=T;let b=C.pathname||"/",M=b;if(y!=="/"){let D=y.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let w=E0(t,{pathname:M});cn(_||w!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),cn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=cC(w&&w.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:Zn([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:Zn([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,i,o,r);return e&&R?U.createElement(qr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},R):R}function rC(){let t=mC(),e=jE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),i?U.createElement("pre",{style:r},i):null,c)}var aC=U.createElement(rC,null),lC=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?U.createElement(ni.Provider,{value:this.props.routeContext},U.createElement(yd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:t,match:e,children:i}){let o=U.useContext(ms);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(ni.Provider,{value:t},i)}function cC(t,e=[],i=null,o=null,r=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);Qe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:T,errors:C}=i,b=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!C||C[_.route.id]===void 0);if(_.route.lazy||b){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=i&&o?(y,_)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,T)=>{let C,b=!1,M=null,w=null;i&&(C=c&&_.route.id?c[_.route.id]:void 0,M=_.route.errorElement||aC,f&&(p<0&&T===0?(D0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):p===T&&(b=!0,w=_.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,T+1)),D=()=>{let P;return C?P=M:b?P=w:_.route.Component?P=U.createElement(_.route.Component,null):_.route.element?P=_.route.element:P=y,U.createElement(uC,{match:_,routeContext:{outlet:y,matches:R,isDataRoute:i!=null},children:P})};return i&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?U.createElement(lC,{location:i.location,revalidation:i.revalidation,component:M,error:C,children:D(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:h}):D()},null)}function vd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fC(t){let e=U.useContext(ms);return Qe(e,vd(t)),e}function dC(t){let e=U.useContext(Gl);return Qe(e,vd(t)),e}function hC(t){let e=U.useContext(ni);return Qe(e,vd(t)),e}function _d(t){let e=hC(t),i=e.matches[e.matches.length-1];return Qe(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function pC(){return _d("useRouteId")}function mC(){let t=U.useContext(yd),e=dC("useRouteError"),i=_d("useRouteError");return t!==void 0?t:e.errors?.[i]}function gC(){let{router:t}=fC("useNavigate"),e=_d("useNavigate"),i=U.useRef(!1);return x0(()=>{i.current=!0}),U.useCallback(async(r,l={})=>{cn(i.current,N0),i.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...l}))},[t,e])}var iy={};function D0(t,e,i){!e&&!iy[t]&&(iy[t]=!0,cn(!1,i))}U.memo(yC);function yC({routes:t,future:e,state:i,unstable_onError:o}){return I0(t,void 0,i,o,e)}function jo(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vC({basename:t="/",children:e=null,location:i,navigationType:o="POP",navigator:r,static:l=!1}){Qe(!Gr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=U.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=ps(i));let{pathname:p="/",search:h="",hash:y="",state:_=null,key:T="default"}=i,C=U.useMemo(()=>{let b=jn(p,c);return b==null?null:{location:{pathname:b,search:h,hash:y,state:_,key:T},navigationType:o}},[c,p,h,y,_,T,o]);return cn(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:U.createElement(wn.Provider,{value:f},U.createElement(qr.Provider,{children:e,value:C}))}function _C({children:t,location:e}){return sC(xf(t),e)}function xf(t,e=[]){let i=[];return U.Children.forEach(t,(o,r)=>{if(!U.isValidElement(o))return;let l=[...e,r];if(o.type===U.Fragment){i.push.apply(i,xf(o.props.children,l));return}Qe(o.type===jo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=xf(o.props.children,l)),i.push(c)}),i}var vl="get",_l="application/x-www-form-urlencoded";function Vl(t){return t!=null&&typeof t.tagName=="string"}function TC(t){return Vl(t)&&t.tagName.toLowerCase()==="button"}function SC(t){return Vl(t)&&t.tagName.toLowerCase()==="form"}function EC(t){return Vl(t)&&t.tagName.toLowerCase()==="input"}function CC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AC(t,e){return t.button===0&&(!e||e==="_self")&&!CC(t)}function If(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,i)=>{let o=t[i];return e.concat(Array.isArray(o)?o.map(r=>[i,r]):[[i,o]])},[]))}function bC(t,e){let i=If(t);return e&&e.forEach((o,r)=>{i.has(r)||e.getAll(r).forEach(l=>{i.append(r,l)})}),i}var hl=null;function MC(){if(hl===null)try{new FormData(document.createElement("form"),0),hl=!1}catch{hl=!0}return hl}var wC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tf(t){return t!=null&&!wC.has(t)?(cn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_l}"`),null):t}function RC(t,e){let i,o,r,l,c;if(SC(t)){let f=t.getAttribute("action");o=f?jn(f,e):null,i=t.getAttribute("method")||vl,r=Tf(t.getAttribute("enctype"))||_l,l=new FormData(t)}else if(TC(t)||EC(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(o=p?jn(p,e):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||vl,r=Tf(t.getAttribute("formenctype"))||Tf(f.getAttribute("enctype"))||_l,l=new FormData(f,t),!MC()){let{name:h,type:y,value:_}=t;if(y==="image"){let T=h?`${h}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else h&&l.append(h,_)}}else{if(Vl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=vl,o=null,r=_l,c=t}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Td(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NC(t,e,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return o.pathname==="/"?o.pathname=`_root.${i}`:e&&jn(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function xC(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DC(t,e,i){let o=await Promise.all(t.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await xC(l,i);return c.links?c.links():[]}return[]}));return kC(o.flat(1).filter(IC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function oy(t,e,i,o,r,l){let c=(p,h)=>i[h]?p.route.id!==i[h].route.id:!0,f=(p,h)=>i[h].pathname!==p.pathname||i[h].route.path?.endsWith("*")&&i[h].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,h)=>c(p,h)||f(p,h)):l==="data"?e.filter((p,h)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function UC(t,e,{includeHydrateFallback:i}={}){return PC(t.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function PC(t){return[...new Set(t)]}function LC(t){let e={},i=Object.keys(t).sort();for(let o of i)e[o]=t[o];return e}function kC(t,e){let i=new Set;return new Set(e),t.reduce((o,r)=>{let l=JSON.stringify(LC(r));return i.has(l)||(i.add(l),o.push({key:l,link:r})),o},[])}function U0(){let t=U.useContext(ms);return Td(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function OC(){let t=U.useContext(Gl);return Td(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sd=U.createContext(void 0);Sd.displayName="FrameworkContext";function P0(){let t=U.useContext(Sd);return Td(t,"You must render this element inside a <HydratedRouter> element"),t}function qC(t,e){let i=U.useContext(Sd),[o,r]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:_}=e,T=U.useRef(null);U.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let M=R=>{R.forEach(D=>{c(D.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return T.current&&w.observe(T.current),()=>{w.disconnect()}}},[t]),U.useEffect(()=>{if(o){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[o]);let C=()=>{r(!0)},b=()=>{r(!1),c(!1)};return i?t!=="intent"?[l,T,{}]:[l,T,{onFocus:vr(f,C),onBlur:vr(p,b),onMouseEnter:vr(h,C),onMouseLeave:vr(y,b),onTouchStart:vr(_,C)}]:[!1,T,{}]}function vr(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function GC({page:t,...e}){let{router:i}=U0(),o=U.useMemo(()=>E0(i.routes,t,i.basename),[i.routes,t,i.basename]);return o?U.createElement(VC,{page:t,matches:o,...e}):null}function HC(t){let{manifest:e,routeModules:i}=P0(),[o,r]=U.useState([]);return U.useEffect(()=>{let l=!1;return DC(t,e,i).then(c=>{l||r(c)}),()=>{l=!0}},[t,e,i]),o}function VC({page:t,matches:e,...i}){let o=Pi(),{manifest:r,routeModules:l}=P0(),{basename:c}=U0(),{loaderData:f,matches:p}=OC(),h=U.useMemo(()=>oy(t,e,p,r,o,"data"),[t,e,p,r,o]),y=U.useMemo(()=>oy(t,e,p,r,o,"assets"),[t,e,p,r,o]),_=U.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let b=new Set,M=!1;if(e.forEach(R=>{let D=r.routes[R.route.id];!D||!D.hasLoader||(!h.some(P=>P.route.id===R.route.id)&&R.route.id in f&&l[R.route.id]?.shouldRevalidate||D.hasClientLoader?M=!0:b.add(R.route.id))}),b.size===0)return[];let w=NC(t,c,"data");return M&&b.size>0&&w.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[w.pathname+w.search]},[c,f,o,r,h,e,t,l]),T=U.useMemo(()=>UC(y,r),[y,r]),C=HC(y);return U.createElement(U.Fragment,null,_.map(b=>U.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),T.map(b=>U.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),C.map(({key:b,link:M})=>U.createElement("link",{key:b,nonce:i.nonce,...M})))}function zC(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var L0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L0&&(window.__reactRouterVersion="7.9.6")}catch{}function BC({basename:t,children:e,window:i}){let o=U.useRef();o.current==null&&(o.current=NE({window:i,v5Compat:!0}));let r=o.current,[l,c]=U.useState({action:r.action,location:r.location}),f=U.useCallback(p=>{U.startTransition(()=>c(p))},[c]);return U.useLayoutEffect(()=>r.listen(f),[r,f]),U.createElement(vC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:r})}var k0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O0=U.forwardRef(function({onClick:e,discover:i="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:f,target:p,to:h,preventScrollReset:y,viewTransition:_,...T},C){let{basename:b}=U.useContext(wn),M=typeof h=="string"&&k0.test(h),w,R=!1;if(typeof h=="string"&&M&&(w=h,L0))try{let ee=new URL(window.location.href),le=h.startsWith("//")?new URL(ee.protocol+h):new URL(h),pe=jn(le.pathname,b);le.origin===ee.origin&&pe!=null?h=pe+le.search+le.hash:R=!0}catch{cn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=iC(h,{relative:r}),[P,J,B]=qC(o,T),W=YC(h,{replace:c,state:f,target:p,preventScrollReset:y,relative:r,viewTransition:_});function Q(ee){e&&e(ee),ee.defaultPrevented||W(ee)}let re=U.createElement("a",{...T,...B,href:w||D,onClick:R||l?e:Q,ref:zC(C,J),target:p,"data-discover":!M&&i==="render"?"true":void 0});return P&&!M?U.createElement(U.Fragment,null,re,U.createElement(GC,{page:D})):re});O0.displayName="Link";var q0=U.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:f,children:p,...h},y){let _=Hr(c,{relative:h.relative}),T=Pi(),C=U.useContext(Gl),{navigator:b,basename:M}=U.useContext(wn),w=C!=null&&WC(_)&&f===!0,R=b.encodeLocation?b.encodeLocation(_).pathname:_.pathname,D=T.pathname,P=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(D=D.toLowerCase(),P=P?P.toLowerCase():null,R=R.toLowerCase()),P&&M&&(P=jn(P,M)||P);const J=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=D===R||!r&&D.startsWith(R)&&D.charAt(J)==="/",W=P!=null&&(P===R||!r&&P.startsWith(R)&&P.charAt(R.length)==="/"),Q={isActive:B,isPending:W,isTransitioning:w},re=B?e:void 0,ee;typeof o=="function"?ee=o(Q):ee=[o,B?"active":null,W?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let le=typeof l=="function"?l(Q):l;return U.createElement(O0,{...h,"aria-current":re,className:ee,ref:y,style:le,to:c,viewTransition:f},typeof p=="function"?p(Q):p)});q0.displayName="NavLink";var FC=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:o,replace:r,state:l,method:c=vl,action:f,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:_,...T},C)=>{let b=XC(),M=ZC(f,{relative:h}),w=c.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&k0.test(f),D=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let J=P.nativeEvent.submitter,B=J?.getAttribute("formmethod")||c;b(J||P.currentTarget,{fetcherKey:e,method:B,navigate:i,replace:r,state:l,relative:h,preventScrollReset:y,viewTransition:_})};return U.createElement("form",{ref:C,method:w,action:M,onSubmit:o?p:D,...T,"data-discover":!R&&t==="render"?"true":void 0})});FC.displayName="Form";function $C(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G0(t){let e=U.useContext(ms);return Qe(e,$C(t)),e}function YC(t,{target:e,replace:i,state:o,preventScrollReset:r,relative:l,viewTransition:c}={}){let f=Hl(),p=Pi(),h=Hr(t,{relative:l});return U.useCallback(y=>{if(AC(y,e)){y.preventDefault();let _=i!==void 0?i:kr(p)===kr(h);f(t,{replace:_,state:o,preventScrollReset:r,relative:l,viewTransition:c})}},[p,f,h,i,o,e,t,r,l,c])}function JC(t){cn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(If(t)),i=U.useRef(!1),o=Pi(),r=U.useMemo(()=>bC(o.search,i.current?null:e.current),[o.search]),l=Hl(),c=U.useCallback((f,p)=>{const h=If(typeof f=="function"?f(new URLSearchParams(r)):f);i.current=!0,l("?"+h,p)},[l,r]);return[r,c]}var KC=0,QC=()=>`__${String(++KC)}__`;function XC(){let{router:t}=G0("useSubmit"),{basename:e}=U.useContext(wn),i=pC();return U.useCallback(async(o,r={})=>{let{action:l,method:c,encType:f,formData:p,body:h}=RC(o,e);if(r.navigate===!1){let y=r.fetcherKey||QC();await t.fetch(y,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||f,flushSync:r.flushSync})}else await t.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:p,body:h,formMethod:r.method||c,formEncType:r.encType||f,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,i])}function ZC(t,{relative:e}={}){let{basename:i}=U.useContext(wn),o=U.useContext(ni);Qe(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...Hr(t||".",{relative:e})},c=Pi();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Zn([i,l.pathname])),kr(l)}function WC(t,{relative:e}={}){let i=U.useContext(R0);Qe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=G0("useViewTransitionState"),r=Hr(t,{relative:e});if(!i.isTransitioning)return!1;let l=jn(i.currentLocation.pathname,o)||i.currentLocation.pathname,c=jn(i.nextLocation.pathname,o)||i.nextLocation.pathname;return wl(r.pathname,c)!=null||wl(r.pathname,l)!=null}function Tt(t){if(typeof t=="number")return(Math.abs(t*2654435761)>>>0).toString(16);if(typeof t=="boolean")return t?"1":"0";if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="string"){let e=2166136261;for(let i=0;i<t.length;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e=e>>>0;return e.toString(16)}if(Array.isArray(t)){let e=2166136261;for(let i=0;i<t.length;i++){e^=(i+1)*2654435761;const o=Tt(t[i]);for(let r=0;r<o.length;r++)e^=o.charCodeAt(r),e*=16777619,e=e>>>0}return e.toString(16)}if(typeof t=="object"){let e=2166136261;const i=Object.keys(t).sort();for(let o=0;o<i.length;o++){const r=i[o],l=Tt(r);e^=parseInt(l,16),e*=16777619,e=e>>>0;const c=Tt(t[r]);e^=parseInt(c,16),e*=16777619,e=e>>>0}return e.toString(16)}return Tt(String(t))}const tt={Remove:"remove",Replace:"replace",Add:"add"},H0=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),jC=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),Tl=Symbol.iterator,Xt={mutable:"mutable",immutable:"immutable"},Ed={};function wr(t,e){return t instanceof Map?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function sy(t,e){if(e in t){let i=Reflect.getPrototypeOf(t);for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,e);if(o)return o;i=Reflect.getPrototypeOf(i)}}}function Cd(t){return Object.getPrototypeOf(t)===Set.prototype}function Ad(t){return Object.getPrototypeOf(t)===Map.prototype}function Qt(t){var e;return(e=t.copy)!==null&&e!==void 0?e:t.original}function Ii(t){return!!Ce(t)}function Ce(t){return typeof t!="object"?null:t?.[H0]}function bd(t){var e;const i=Ce(t);return i?(e=i.copy)!==null&&e!==void 0?e:i.original:t}function yn(t,e){if(!t||typeof t!="object")return!1;let i;return Object.getPrototypeOf(t)===Object.prototype||Array.isArray(t)||t instanceof Map||t instanceof Set||!!e?.mark&&((i=e.mark(t,Xt))===Xt.immutable||typeof i=="function")}function V0(t,e=[]){if(Object.hasOwnProperty.call(t,"key")){const i=t.parent.copy,o=Ce(ei(i,t.key));if(o!==null&&o?.original!==t.original)return null;const r=t.parent.type===3,l=r?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(r&&i.size>l||wr(i,l)))return null;e.push(l)}if(t.parent)return V0(t.parent,e);e.reverse();try{eA(t.copy,e)}catch{return null}return e}function lo(t){return Array.isArray(t)?1:t instanceof Map?2:t instanceof Set?3:0}function ei(t,e){return lo(t)===2?t.get(e):t[e]}function Vr(t,e,i){lo(t)===2?t.set(e,i):t[e]=i}function Sf(t,e){const i=Ce(t);return(i?Qt(i):t)[e]}function Wn(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Df(t){if(t)for(;t.finalities.revoke.length>0;)t.finalities.revoke.pop()()}function ro(t,e){return e?t:[""].concat(t).map(i=>{const o=`${i}`;return o.indexOf("/")===-1&&o.indexOf("~")===-1?o:o.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function eA(t,e){for(let i=0;i<e.length-1;i+=1){const o=e[i];if(t=ei(lo(t)===3?Array.from(t):t,o),typeof t!="object")throw new Error(`Cannot resolve patch at '${e.join("/")}'.`)}return t}function tA(t){const e=Object.create(Object.getPrototypeOf(t));return Reflect.ownKeys(t).forEach(i=>{let o=Reflect.getOwnPropertyDescriptor(t,i);if(o.enumerable&&o.configurable&&o.writable){e[i]=t[i];return}o.writable||(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(o={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]}),Reflect.defineProperty(e,i,o)}),e}const nA=Object.prototype.propertyIsEnumerable;function z0(t,e){let i;if(Array.isArray(t))return Array.prototype.concat.call(t);if(t instanceof Set){if(!Cd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t.values())}return Set.prototype.difference?Set.prototype.difference.call(t,new Set):new Set(t.values())}else if(t instanceof Map){if(!Ad(t)){const o=Object.getPrototypeOf(t).constructor;return new o(t)}return new Map(t)}else if(e?.mark&&(i=e.mark(t,Xt),i!==void 0)&&i!==Xt.mutable){if(i===Xt.immutable)return tA(t);if(typeof i=="function"){if(e.enablePatches||e.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return i()}throw new Error(`Unsupported mark result: ${i}`)}else if(typeof t=="object"&&Object.getPrototypeOf(t)===Object.prototype){const o={};return Object.keys(t).forEach(r=>{o[r]=t[r]}),Object.getOwnPropertySymbols(t).forEach(r=>{nA.call(t,r)&&(o[r]=t[r])}),o}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function xt(t){t.copy||(t.copy=z0(t.original,t.options))}function Er(t){if(!yn(t))return bd(t);if(Array.isArray(t))return t.map(Er);if(t instanceof Map){const i=Array.from(t.entries()).map(([o,r])=>[o,Er(r)]);if(!Ad(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Map(i)}if(t instanceof Set){const i=Array.from(t).map(Er);if(!Cd(t)){const o=Object.getPrototypeOf(t).constructor;return new o(i)}return new Set(i)}const e=Object.create(Object.getPrototypeOf(t));for(const i in t)e[i]=Er(t[i]);return e}function Sl(t){return Ii(t)?Er(t):t}function Mn(t){var e;t.assignedMap=(e=t.assignedMap)!==null&&e!==void 0?e:new Map,t.operated||(t.operated=!0,t.parent&&Mn(t.parent))}function ry(){throw new Error("Cannot modify frozen object")}function es(t,e,i,o,r){{i=i??new WeakMap,o=o??[],r=r??[];const c=i.has(t)?i.get(t):t;if(o.length>0){const f=o.indexOf(c);if(c&&typeof c=="object"&&f!==-1)throw o[0]===c?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${r.slice(0,f).map((p,h)=>{if(typeof p=="symbol")return`[${p.toString()}]`;const y=o[h];return typeof p=="object"&&(y instanceof Map||y instanceof Set)?Array.from(y.keys()).indexOf(p):p}).join("/")}`);o.push(c),r.push(e)}else o.push(c)}if(Object.isFrozen(t)||Ii(t)){o.pop(),r.pop();return}switch(lo(t)){case 2:for(const[f,p]of t)es(f,f,i,o,r),es(p,f,i,o,r);t.set=t.clear=t.delete=ry;break;case 3:for(const f of t)es(f,f,i,o,r);t.add=t.clear=t.delete=ry;break;case 1:Object.freeze(t);let c=0;for(const f of t)es(f,c,i,o,r),c+=1;break;default:Object.freeze(t),Object.keys(t).forEach(f=>{const p=t[f];es(p,f,i,o,r)})}o.pop(),r.pop()}function Md(t,e){const i=lo(t);if(i===0)Reflect.ownKeys(t).forEach(o=>{e(o,t[o],t)});else if(i===1){let o=0;for(const r of t)e(o,r,t),o+=1}else t.forEach((o,r)=>e(r,o,t))}function B0(t,e,i){if(Ii(t)||!yn(t,i)||e.has(t)||Object.isFrozen(t))return;const o=t instanceof Set,r=o?new Map:void 0;if(e.add(t),Md(t,(l,c)=>{var f;if(Ii(c)){const p=Ce(c);xt(p);const h=!((f=p.assignedMap)===null||f===void 0)&&f.size||p.operated?p.copy:p.original;Vr(o?r:t,l,h)}else B0(c,e,i)}),r){const l=t,c=Array.from(l);l.clear(),c.forEach(f=>{l.add(r.has(f)?r.get(f):f)})}}function iA(t,e){const i=t.type===3?t.setMap:t.copy;t.finalities.revoke.length>1&&t.assignedMap.get(e)&&i&&B0(ei(i,e),t.finalities.handledSet,t.options)}function Uf(t){t.type===3&&t.copy&&(t.copy.clear(),t.setMap.forEach(e=>{t.copy.add(bd(e))}))}function Pf(t,e,i,o){if(t.operated&&t.assignedMap&&t.assignedMap.size>0&&!t.finalized){if(i&&o){const l=V0(t);l&&e(t,l,i,o)}t.finalized=!0}}function wd(t,e,i,o){const r=Ce(i);r&&(r.callbacks||(r.callbacks=[]),r.callbacks.push((l,c)=>{var f;const p=t.type===3?t.setMap:t.copy;if(Wn(ei(p,e),i)){let h=r.original;r.copy&&(h=r.copy),Uf(t),Pf(t,o,l,c),t.options.enableAutoFreeze&&(t.options.updatedValues=(f=t.options.updatedValues)!==null&&f!==void 0?f:new WeakMap,t.options.updatedValues.set(h,r.original)),Vr(p,e,h)}}),t.options.enableAutoFreeze&&r.finalities!==t.finalities&&(t.options.enableAutoFreeze=!1)),yn(i,t.options)&&t.finalities.draft.push(()=>{const l=t.type===3?t.setMap:t.copy;Wn(ei(l,e),i)&&iA(t,e)})}function oA(t,e,i,o,r){let{original:l,assignedMap:c,options:f}=t,p=t.copy;p.length<l.length&&([l,p]=[p,l],[i,o]=[o,i]);for(let h=0;h<l.length;h+=1)if(c.get(h.toString())&&p[h]!==l[h]){const y=e.concat([h]),_=ro(y,r);i.push({op:tt.Replace,path:_,value:Sl(p[h])}),o.push({op:tt.Replace,path:_,value:Sl(l[h])})}for(let h=l.length;h<p.length;h+=1){const y=e.concat([h]),_=ro(y,r);i.push({op:tt.Add,path:_,value:Sl(p[h])})}if(l.length<p.length){const{arrayLengthAssignment:h=!0}=f.enablePatches;if(h){const y=e.concat(["length"]),_=ro(y,r);o.push({op:tt.Replace,path:_,value:l.length})}else for(let y=p.length;l.length<y;y-=1){const _=e.concat([y-1]),T=ro(_,r);o.push({op:tt.Remove,path:T})}}}function sA({original:t,copy:e,assignedMap:i},o,r,l,c){i.forEach((f,p)=>{const h=ei(t,p),y=Sl(ei(e,p)),_=f?wr(t,p)?tt.Replace:tt.Add:tt.Remove;if(Wn(h,y)&&_===tt.Replace)return;const T=o.concat(p),C=ro(T,c);r.push(_===tt.Remove?{op:_,path:C}:{op:_,path:C,value:y}),l.push(_===tt.Add?{op:tt.Remove,path:C}:_===tt.Remove?{op:tt.Add,path:C,value:h}:{op:tt.Replace,path:C,value:h})})}function rA({original:t,copy:e},i,o,r,l){let c=0;t.forEach(f=>{if(!e.has(f)){const p=i.concat([c]),h=ro(p,l);o.push({op:tt.Remove,path:h,value:f}),r.unshift({op:tt.Add,path:h,value:f})}c+=1}),c=0,e.forEach(f=>{if(!t.has(f)){const p=i.concat([c]),h=ro(p,l);o.push({op:tt.Add,path:h,value:f}),r.unshift({op:tt.Remove,path:h,value:f})}c+=1})}function Or(t,e,i,o){const{pathAsArray:r=!0}=t.options.enablePatches;switch(t.type){case 0:case 2:return sA(t,e,i,o,r);case 1:return oA(t,e,i,o,r);case 3:return rA(t,e,i,o,r)}}const Rl=(t,e,i=!1)=>{if(typeof t=="object"&&t!==null&&(!yn(t,e)||i))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},Lf={get size(){return Qt(Ce(this)).size},has(t){return Qt(Ce(this)).has(t)},set(t,e){const i=Ce(this),o=Qt(i);return(!o.has(t)||!Wn(o.get(t),e))&&(xt(i),Mn(i),i.assignedMap.set(t,!0),i.copy.set(t,e),wd(i,t,e,Or)),this},delete(t){if(!this.has(t))return!1;const e=Ce(this);return xt(e),Mn(e),e.original.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.copy.delete(t),!0},clear(){const t=Ce(this);if(this.size){xt(t),Mn(t),t.assignedMap=new Map;for(const[e]of t.original)t.assignedMap.set(e,!1);t.copy.clear()}},forEach(t,e){const i=Ce(this);Qt(i).forEach((o,r)=>{t.call(e,this.get(r),r,this)})},get(t){var e,i;const o=Ce(this),r=Qt(o).get(t),l=((i=(e=o.options).mark)===null||i===void 0?void 0:i.call(e,r,Xt))===Xt.mutable;if(o.options.strict&&Rl(r,o.options,l),l||o.finalized||!yn(r,o.options)||r!==o.original.get(t))return r;const c=Ed.createDraft({original:r,parentDraft:o,key:t,finalities:o.finalities,options:o.options});return xt(o),o.copy.set(t,c),c},keys(){return Qt(Ce(this)).keys()},values(){const t=this.keys();return{[Tl]:()=>this.values(),next:()=>{const e=t.next();return e.done?e:{done:!1,value:this.get(e.value)}}}},entries(){const t=this.keys();return{[Tl]:()=>this.entries(),next:()=>{const e=t.next();if(e.done)return e;const i=this.get(e.value);return{done:!1,value:[e.value,i]}}}},[Tl](){return this.entries()}},aA=Reflect.ownKeys(Lf),ay=(t,e,{isValuesIterator:i})=>()=>{var o,r;const l=e.next();if(l.done)return l;const c=l.value;let f=t.setMap.get(c);const p=Ce(f),h=((r=(o=t.options).mark)===null||r===void 0?void 0:r.call(o,f,Xt))===Xt.mutable;if(t.options.strict&&Rl(c,t.options,h),!h&&!p&&yn(c,t.options)&&!t.finalized&&t.original.has(c)){const y=Ed.createDraft({original:c,parentDraft:t,key:c,finalities:t.finalities,options:t.options});t.setMap.set(c,y),f=y}else p&&(f=p.proxy);return{done:!1,value:i?f:[f,f]}},Nl={get size(){return Ce(this).setMap.size},has(t){const e=Ce(this);if(e.setMap.has(t))return!0;xt(e);const i=Ce(t);return!!(i&&e.setMap.has(i.original))},add(t){const e=Ce(this);return this.has(t)||(xt(e),Mn(e),e.assignedMap.set(t,!0),e.setMap.set(t,t),wd(e,t,t,Or)),this},delete(t){if(!this.has(t))return!1;const e=Ce(this);xt(e),Mn(e);const i=Ce(t);return i&&e.setMap.has(i.original)?(e.assignedMap.set(i.original,!1),e.setMap.delete(i.original)):(!i&&e.setMap.has(t)?e.assignedMap.set(t,!1):e.assignedMap.delete(t),e.setMap.delete(t))},clear(){if(!this.size)return;const t=Ce(this);xt(t),Mn(t);for(const e of t.original)t.assignedMap.set(e,!1);t.setMap.clear()},values(){const t=Ce(this);xt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:ay(t,e,{isValuesIterator:!0})}},entries(){const t=Ce(this);xt(t);const e=t.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:ay(t,e,{isValuesIterator:!1})}},keys(){return this.values()},[Tl](){return this.values()},forEach(t,e){const i=this.values();let o=i.next();for(;!o.done;)t.call(e,o.value,o.value,this),o=i.next()}};Set.prototype.difference&&Object.assign(Nl,{intersection(t){return Set.prototype.intersection.call(new Set(this.values()),t)},union(t){return Set.prototype.union.call(new Set(this.values()),t)},difference(t){return Set.prototype.difference.call(new Set(this.values()),t)},symmetricDifference(t){return Set.prototype.symmetricDifference.call(new Set(this.values()),t)},isSubsetOf(t){return Set.prototype.isSubsetOf.call(new Set(this.values()),t)},isSupersetOf(t){return Set.prototype.isSupersetOf.call(new Set(this.values()),t)},isDisjointFrom(t){return Set.prototype.isDisjointFrom.call(new Set(this.values()),t)}});const lA=Reflect.ownKeys(Nl),F0={get(t,e,i){var o,r;const l=(o=t.copy)===null||o===void 0?void 0:o[e];if(l&&t.finalities.draftsCache.has(l))return l;if(e===H0)return t;let c;if(t.options.mark){const h=e==="size"&&(t.original instanceof Map||t.original instanceof Set)?Reflect.get(t.original,e):Reflect.get(t.original,e,i);if(c=t.options.mark(h,Xt),c===Xt.mutable)return t.options.strict&&Rl(h,t.options,!0),h}const f=Qt(t);if(f instanceof Map&&aA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Lf,"size").get.call(t.proxy):Lf[e].bind(t.proxy);if(f instanceof Set&&lA.includes(e))return e==="size"?Object.getOwnPropertyDescriptor(Nl,"size").get.call(t.proxy):Nl[e].bind(t.proxy);if(!wr(f,e)){const h=sy(f,e);return h?"value"in h?h.value:(r=h.get)===null||r===void 0?void 0:r.call(t.proxy):void 0}const p=f[e];if(t.options.strict&&Rl(p,t.options),t.finalized||!yn(p,t.options))return p;if(p===Sf(t.original,e)){if(xt(t),t.copy[e]=Rd({original:t.original[e],parentDraft:t,key:t.type===1?Number(e):e,finalities:t.finalities,options:t.options}),typeof c=="function"){const h=Ce(t.copy[e]);return xt(h),Mn(h),h.copy}return t.copy[e]}return Ii(p)&&t.finalities.draftsCache.add(p),p},set(t,e,i){var o;if(t.type===3||t.type===2)throw new Error("Map/Set draft does not support any property assignment.");let r;if(t.type===1&&e!=="length"&&!(Number.isInteger(r=Number(e))&&r>=0&&(e===0||r===0||String(r)===String(e))))throw new Error("Only supports setting array indices and the 'length' property.");const l=sy(Qt(t),e);if(l?.set)return l.set.call(t.proxy,i),!0;const c=Sf(Qt(t),e),f=Ce(c);return f&&Wn(f.original,i)?(t.copy[e]=i,t.assignedMap=(o=t.assignedMap)!==null&&o!==void 0?o:new Map,t.assignedMap.set(e,!1),!0):(Wn(i,c)&&(i!==void 0||wr(t.original,e))||(xt(t),Mn(t),wr(t.original,e)&&Wn(i,t.original[e])?t.assignedMap.delete(e):t.assignedMap.set(e,!0),t.copy[e]=i,wd(t,e,i,Or)),!0)},has(t,e){return e in Qt(t)},ownKeys(t){return Reflect.ownKeys(Qt(t))},getOwnPropertyDescriptor(t,e){const i=Qt(t),o=Reflect.getOwnPropertyDescriptor(i,e);return o&&{writable:!0,configurable:t.type!==1||e!=="length",enumerable:o.enumerable,value:i[e]}},getPrototypeOf(t){return Reflect.getPrototypeOf(t.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(t,e){var i;return t.type===1?F0.set.call(this,t,e,void 0,t.proxy):(Sf(t.original,e)!==void 0||e in t.original?(xt(t),Mn(t),t.assignedMap.set(e,!1)):(t.assignedMap=(i=t.assignedMap)!==null&&i!==void 0?i:new Map,t.assignedMap.delete(e)),t.copy&&delete t.copy[e],!0)}};function Rd(t){const{original:e,parentDraft:i,key:o,finalities:r,options:l}=t,c=lo(e),f={type:c,finalized:!1,parent:i,original:e,copy:null,proxy:null,finalities:r,options:l,setMap:c===3?new Map(e.entries()):void 0};(o||"key"in t)&&(f.key=o);const{proxy:p,revoke:h}=Proxy.revocable(c===1?Object.assign([],f):f,F0);if(r.revoke.push(h),f.proxy=p,i){const y=i;y.finalities.draft.push((_,T)=>{var C,b;const M=Ce(p);let w=y.type===3?y.setMap:y.copy;const R=ei(w,o),D=Ce(R);if(D){let P=D.original;D.operated&&(P=bd(R)),Uf(D),Pf(D,Or,_,T),y.options.enableAutoFreeze&&(y.options.updatedValues=(C=y.options.updatedValues)!==null&&C!==void 0?C:new WeakMap,y.options.updatedValues.set(P,D.original)),Vr(w,o,P)}(b=M.callbacks)===null||b===void 0||b.forEach(P=>{P(_,T)})})}else{const y=Ce(p);y.finalities.draft.push((_,T)=>{Uf(y),Pf(y,Or,_,T)})}return p}Ed.createDraft=Rd;function uA(t,e,i,o,r){var l;const c=Ce(t),f=(l=c?.original)!==null&&l!==void 0?l:t,p=!!e.length;if(c?.operated)for(;c.finalities.draft.length>0;)c.finalities.draft.pop()(i,o);const h=p?e[0]:c?c.operated?c.copy:c.original:t;return c&&Df(c),r&&es(h,h,c?.options.updatedValues),[h,i&&p?[{op:tt.Replace,path:[],value:e[0]}]:i,o&&p?[{op:tt.Replace,path:[],value:f}]:o]}function cA(t,e){var i;const o={draft:[],revoke:[],handledSet:new WeakSet,draftsCache:new WeakSet};let r,l;e.enablePatches&&(r=[],l=[]);const f=((i=e.mark)===null||i===void 0?void 0:i.call(e,t,Xt))===Xt.mutable||!yn(t,e)?t:Rd({original:t,parentDraft:null,finalities:o,options:e});return[f,(p=[])=>{const[h,y,_]=uA(f,p,r,l,e.enableAutoFreeze);return e.enablePatches?[h,y,_]:h}]}function kf(t){const{rootDraft:e,value:i,useRawReturn:o=!1,isRoot:r=!0}=t;Md(i,(l,c,f)=>{const p=Ce(c);if(p&&e&&p.finalities===e.finalities){t.isContainDraft=!0;const h=p.original;if(f instanceof Set){const y=Array.from(f);f.clear(),y.forEach(_=>f.add(l===_?h:_))}else Vr(f,l,h)}else typeof c=="object"&&c!==null&&(t.value=c,t.isRoot=!1,kf(t))}),r&&(t.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function $0(t){var e;const i=Ce(t);if(!yn(t,i?.options))return t;const o=lo(t);if(i&&!i.operated)return i.original;let r;function l(){r=o===2?Ad(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):o===3?Array.from(i.setMap.values()):z0(t,i?.options)}if(i){i.finalized=!0;try{l()}finally{i.finalized=!1}}else r=t;if(Md(r,(c,f)=>{if(i&&Wn(ei(i.original,c),f))return;const p=$0(f);p!==f&&(r===t&&l(),Vr(r,c,p))}),o===3){const c=(e=i?.original)!==null&&e!==void 0?e:r;return Cd(c)?new Set(r):new(Object.getPrototypeOf(c)).constructor(r)}return r}function ly(t){if(!Ii(t))throw new Error(`current() is only used for Draft, parameter: ${t}`);return $0(t)}const fA=t=>function e(i,o,r){var l,c,f;if(typeof i=="function"&&typeof o!="function")return function(B,...W){return e(B,Q=>i.call(this,Q,...W),o)};const p=i,h=o;let y=r;if(typeof o!="function"&&(y=o),y!==void 0&&Object.prototype.toString.call(y)!=="[object Object]")throw new Error(`Invalid options: ${y}, 'options' should be an object.`);y=Object.assign(Object.assign({},t),y);const _=Ii(p)?ly(p):p,T=Array.isArray(y.mark)?((B,W)=>{for(const Q of y.mark){if(typeof Q!="function")throw new Error(`Invalid mark: ${Q}, 'mark' should be a function.`);const re=Q(B,W);if(re)return re}}):y.mark,C=(l=y.enablePatches)!==null&&l!==void 0?l:!1,b=(c=y.strict)!==null&&c!==void 0?c:!1,w={enableAutoFreeze:(f=y.enableAutoFreeze)!==null&&f!==void 0?f:!1,mark:T,strict:b,enablePatches:C};if(!yn(_,w)&&typeof _=="object"&&_!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[R,D]=cA(_,w);if(typeof o!="function"){if(!yn(_,w))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[R,D]}let P;try{P=h(R)}catch(B){throw Df(Ce(R)),B}const J=B=>{const W=Ce(R);if(!Ii(B)){if(B!==void 0&&!Wn(B,R)&&W?.operated)throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const re=B?.[jC];if(re){const ee=re[0];return w.strict&&typeof B=="object"&&B!==null&&kf({rootDraft:W,value:B,useRawReturn:!0}),D([ee])}if(B!==void 0)return typeof B=="object"&&B!==null&&kf({rootDraft:W,value:B}),D([B])}if(B===R||B===void 0)return D([]);const Q=Ce(B);if(w===Q.options){if(Q.operated)throw new Error("Cannot return a modified child draft.");return D([ly(B)])}return D([B])};return P instanceof Promise?P.then(J,B=>{throw Df(Ce(R)),B}):J(P)},xl=fA();Object.prototype.constructor.toString();function Y0(t,e){const i=Object.keys(t),o=Object.keys(e);return i.length===o.length&&Object.keys(t).every(r=>e.hasOwnProperty(r))}function uy(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(i=>e.hasOwnProperty(i)&&t[i]===e[i])}function El(t,e){return typeof t!="object"||typeof e!="object"||t===null||e===null?t===e:Y0(t,e)?Object.keys(t).every(i=>El(t[i],e[i])):!1}function Nd(t){if(!Cr(t))return t;const e={};for(const[i,o]of Object.entries(t))o!==void 0&&(e[i]=o);return e}function J0(t,e){if(!Cr(t)||!Cr(e))return e;const i=Object.assign({},t);for(const o of Object.keys(e)){if(e[o]===void 0)continue;if(e[o]===null){delete i[o];continue}const r=Cr(t[o])&&Cr(e[o]);i[o]=r?J0(t[o],e[o]):e[o]}return i}function Cr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function dA(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let l=0;l<e.length-1;l++){const c=e[l];(!(c in o)||typeof o[c]!="object")&&(o[c]=typeof e[l+1]=="number"?[]:{}),o=o[c]}const r=e[e.length-1];Array.isArray(o)&&typeof r=="number"?o.splice(r,0,i):o[r]=i}function cy(t,e,i){if(!t||e.length===0)return;let o=t||{};for(let r=0;r<e.length-1;r++){const l=e[r];(!(l in o)||typeof o[l]!="object")&&(o[l]=typeof e[r+1]=="number"?[]:{}),o=o[l]}o[e[e.length-1]]=i}function K0(t,e){if(!t||e.length===0)return;const[i,...o]=e;if(i in t){if(o.length===0){Array.isArray(t)?t.splice(i,1):delete t[i];return}K0(t[i],o),hA(t[i])&&delete t[i]}}function hA(t){return t&&Object.keys(t).length===0}const fy=/ZULU|YEKT|YEKST|YAPT|YAKT|YAKST|XJT|WGT|WGST|WFT|WETDST|WET|WDT|WAT|WAST|WAKT|WADT|VUT|VOLT|VLAT|VLAST|VET|UZT|UZST|UYT|UYST|UTC|UT|ULAT|ULAST|UCT|TVT|TRUT|TOT|TMT|TKT|TJT|TFT|TAHT|SGT|SCT|SAST|SADT|RET|PYT|PYST|PWT|PST|PONT|PMST|PMDT|PKT|PKST|PHT|PGT|PETT|PETST|PET|PDT|OMST|OMSST|NZT|NZST|NZDT|NUT|NST|NPT|NOVT|NOVST|NFT|NDT|MYT|MVT|MUT|MUST|MST|MSK|MSD|MPT|MMT|MHT|MEZ|METDST|MET|MESZ|MEST|MDT|MAWT|MART|MAGT|MAGST|LKT|LINT|LIGT|LHST|LHDT|KST|KRAT|KRAST|KOST|KGT|KGST|KDT|JST|JAYT|IST|IRT|IRKT|IRKST|IOT|IDT|ICT|HST|HKT|GYT|GMT|GILT|GFT|GET|GEST|GAMT|GALT|FNT|FNST|FKT|FKST|FJT|FJST|FET|EST|EGT|EGST|EETDST|EET|EEST|EDT|EAT|EAST|EASST|DDUT|DAVT|CXT|CST|COT|CLT|CLST|CKT|CHUT|CHAST|CHADT|CETDST|CET|CEST|CDT|CCT|CAST|CADT|BTT|BST|BRT|BRST|BRA|BOT|BORT|BNT|BDT|BDST|AZT|AZST|AZOT|AZOST|AWST|AWSST|AST|ART|ARST|ANAT|ANAST|AMT|AMST|ALMT|ALMST|AKST|AKDT|AFT|AEST|AESST|AEDT|ADT|ACWST|ACT|ACST|ACSST|ACDT$/,pA={ZULU:0,YEKT:18e3,YEKST:21600,YAPT:36e3,YAKT:32400,YAKST:32400,XJT:21600,WGT:-10800,WGST:-7200,WFT:43200,WETDST:3600,WET:0,WDT:32400,WAT:3600,WAST:25200,WAKT:43200,WADT:28800,VUT:39600,VOLT:10800,VLAT:36e3,VLAST:36e3,VET:-14400,UZT:18e3,UZST:21600,UYT:-10800,UYST:-7200,UTC:0,UT:0,ULAT:28800,ULAST:32400,UCT:0,TVT:43200,TRUT:36e3,TOT:46800,TMT:18e3,TKT:46800,TJT:18e3,TFT:18e3,TAHT:-36e3,SGT:28800,SCT:14400,SAST:7200,SADT:37800,RET:14400,PYT:-14400,PYST:-10800,PWT:32400,PST:-28800,PONT:39600,PMST:-10800,PMDT:-7200,PKT:18e3,PKST:21600,PHT:28800,PGT:36e3,PETT:43200,PETST:43200,PET:-18e3,PDT:-25200,OMST:21600,OMSST:21600,NZT:43200,NZST:43200,NZDT:46800,NUT:-39600,NST:-12600,NPT:20700,NOVT:25200,NOVST:25200,NFT:-12600,NDT:-9e3,MYT:28800,MVT:18e3,MUT:14400,MUST:18e3,MST:-25200,MSK:10800,MSD:14400,MPT:36e3,MMT:23400,MHT:43200,MEZ:3600,METDST:7200,MET:3600,MESZ:7200,MEST:7200,MDT:-21600,MAWT:18e3,MART:-34200,MAGT:39600,MAGST:39600,LKT:19800,LINT:50400,LIGT:36e3,LHST:37800,LHDT:37800,KST:32400,KRAT:25200,KRAST:25200,KOST:39600,KGT:21600,KGST:21600,KDT:36e3,JST:32400,JAYT:32400,IST:7200,IRT:12600,IRKT:28800,IRKST:28800,IOT:21600,IDT:10800,ICT:25200,HST:-36e3,HKT:28800,GYT:-14400,GMT:0,GILT:43200,GFT:-10800,GET:14400,GEST:14400,GAMT:-32400,GALT:-21600,FNT:-7200,FNST:-3600,FKT:-10800,FKST:-10800,FJT:43200,FJST:46800,FET:10800,EST:-18e3,EGT:-3600,EGST:0,EETDST:10800,EET:7200,EEST:10800,EDT:-14400,EAT:10800,EAST:-21600,EASST:-21600,DDUT:36e3,DAVT:25200,CXT:25200,CST:-21600,COT:-18e3,CLT:-14400,CLST:-10800,CKT:-36e3,CHUT:36e3,CHAST:45900,CHADT:49500,CETDST:7200,CET:3600,CEST:7200,CDT:-18e3,CCT:28800,CAST:34200,CADT:37800,BTT:21600,BST:3600,BRT:-10800,BRST:-7200,BRA:-10800,BOT:-14400,BORT:28800,BNT:28800,BDT:21600,BDST:7200,AZT:14400,AZST:14400,AZOT:-3600,AZOST:0,AWST:28800,AWSST:32400,AST:-14400,ART:-10800,ARST:-10800,ANAT:43200,ANAST:43200,AMT:-14400,AMST:14400,ALMT:21600,ALMST:25200,AKST:-32400,AKDT:-28800,AFT:16200,AEST:36e3,AESST:39600,AEDT:39600,ADT:-10800,ACWST:31500,ACT:-18e3,ACST:34200,ACSST:37800,ACDT:37800};function mA(t){return new Date(t)}function gA(t){return new Date(t+"Z")}const yA=/^(\d+)[\./-](\d+)[\./-](\d+)$/;function vA(t){const e=t.match(yA);if(!e)return null;const[i,o,r,l]=e;return o<=0||r<=0||l<=0?null:o>999?new Date(Date.UTC(o,r-1,l,0,0,0,0)):new Date(Date.UTC(l,o-1,r,0,0,0,0))}function _A(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function TA(t){const[e,i]=t.split(" ");return new Date(e+"T"+i+"Z")}function SA(t){return new Date(t)}function EA(t){const e=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!t.match(e))throw new Error(`Unable to parse \`${t}\` as a date.`);const o=new Date(t+" UTC");return new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0,0))}function CA(t){const e=/^(.+T.+)([+-])(\d{2})$/,i=t.match(e);if(i){const[,o,r,l]=i,c=`${o}${r}${l}:00`;return new Date(c)}return null}function AA(t){const[e,i]=t.split(", "),[o,r,l]=e.split("/").map(Number),c=i.match(/(\d{1,2}):(\d{2}):(\d{2}) (AM|PM)/);if(!c)throw new Error(`Unable to parse time from: ${t}`);let[,f,p,h,y]=c;return f=Number(f),p=Number(p),h=Number(h),y==="PM"&&f!==12?f+=12:y==="AM"&&f===12&&(f=0),new Date(Date.UTC(l,o-1,r,f,p,h))}function bA(t){switch(t){case"epoch":return new Date(0);case"infinity":case"-infinity":case"today":case"tomorrow":case"yesterday":return null}}function MA(t){const e=t.match(fy);if(!e)return null;const[i]=e,o=pA[i],r=new Date(t.replace(fy,"Z"));return new Date(r.getTime()-o*1e3)}const wA=[vA,TA,EA,AA,SA,gA,CA,_A,mA,bA,MA];function RA(t,e){try{const i=t(e);return i instanceof Date&&!isNaN(i.getTime())?i:null}catch{return null}}function Of(t){for(const e of wA){const i=RA(e,t);if(i)return i}return null}function NA(t){try{const e=JSON.parse(t);return typeof e=="string"?Of(e):null}catch{return null}}function zl(t){if(t!==void 0){if(t===null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Of(t)||NA(t)||Of(t.trim());if(!e)throw new Error(`Unable to parse \`${t}\` as a date.`);return e}else if(typeof t=="number")return new Date(t);throw new Error(`Invalid date value \`${t}\`. Expected a date, number, or string, got type ${typeof t}.`)}}function xA(t){return t.cardinality==="one"}function xd(t){return t["value-type"]==="ref"}function Id(t){return t["value-type"]==="blob"}function gs(t,e){return t[e]}function ys(t,e){return e.reduce((i,o)=>i&&i.get(o),t)}function gn(t,e){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.delete(e[0]);return}const[i,...o]=e;t.has(i)&&gn(t.get(i),o)}function Gt(t,e,i){if(e.length===0)throw new Error("path must have at least one element");if(e.length===1){t.set(e[0],i);return}const[o,...r]=e;let l=t.get(o);l||(l=new Map,t.set(o,l)),Gt(l,r,i)}function Q0(t,e,i){const o=new Map,r=new Map,l=new Map;for(const c of e){let[f,p,h,y]=c;const _=gs(t,p);if(!_){console.warn("no such attr",f,t);continue}_["checked-data-type"]==="date"&&i&&(h=zl(h),c[2]=h),xd(_)&&Gt(l,[h,p,f],c),Gt(o,[f,p,h],c),Gt(r,[p,f,h],c)}return{eav:o,aev:r,vae:l}}function X0(t){const e=new Map,i=new Map,o=new Map,r=new Map;for(const l of Object.values(t)){const c=l["forward-identity"],[f,p,h]=c,y=l["reverse-identity"];if(Gt(o,[p,h],l),Id(l)&&Gt(e,[p,h],l),l["primary?"]&&Gt(i,[p],l),y){const[_,T,C]=y;Gt(r,[T,C],l)}}return{blobAttrs:e,primaryKeys:i,forwardIdents:o,revIdents:r}}function Z0(t){return{__type:t.__type,attrs:t.attrs,triples:Ht(t.eav,3),cardinalityInference:t.cardinalityInference,linkIndex:t.linkIndex,useDateObjects:t.useDateObjects}}function W0(t){return Cl(t.attrs,t.triples,t.cardinalityInference,t.linkIndex,t.useDateObjects)}function IA(t,e){return ys(t.eav,[e])!==void 0}function Dd(t){t.attrIndexes=X0(t.attrs)}function Cl(t,e,i,o,r){const l=Q0(t,e,r);return l.useDateObjects=r,l.attrs=t,l.attrIndexes=X0(t),l.cardinalityInference=i,l.linkIndex=o,l.__type="store",l}function zr(t,e){var i,o;let r;if(Array.isArray(e[0])){const[c,f]=e[0],p=t.aev.get(c);if(!p)return null;r=(i=Ht(p,2).find(y=>y[2]===f))===null||i===void 0?void 0:i[0]}else r=e[0];if(!r)return null;const l=e[2];if(Array.isArray(l)&&l.length===2&&t.aev.get(l[0])){const[c,f]=l,p=t.aev.get(c);if(!p)return null;const y=(o=Ht(p,2).find(M=>M[2]===f))===null||o===void 0?void 0:o[0];if(!y)return null;const[_,T,C,...b]=e;return[r,T,y,...b]}else{const[c,...f]=e;return[r,...f]}}function j0(t,e){const i=zr(t,e);if(!i)return;const[o,r,l]=i,c=gs(t.attrs,r);c&&(gn(t.eav,[o,r,l]),gn(t.aev,[r,o,l]),xd(c)&&gn(t.vae,[l,r,o]))}let DA=0;function e_(t,e,i){const[o,r,l]=i;let c;const f=ys(t.ea,[o,r,l]);return f&&(c=f[3]),c||Date.now()*10+DA++}function t_(t,e){var i;const o=zr(t,e);if(!o)return;let[r,l,c]=o;const f=gs(t.attrs,l);if(!f)return;f["checked-data-type"]==="date"&&t.useDateObjects&&(c=zl(c));const p=ys(t.eav,[r,l,c]),h=(i=p?.[3])!==null&&i!==void 0?i:e_(t,f,o),y=[r,l,c,h];xA(f)?(Gt(t.eav,[r,l],new Map([[c,y]])),Gt(t.aev,[l,r],new Map([[c,y]]))):(Gt(t.eav,[r,l,c],y),Gt(t.aev,[l,r,c],y)),xd(f)&&Gt(t.vae,[c,l,r],y)}function UA(t,e){var i;const o=zr(t,e);if(!o)return;const[r,l,c]=o,f=gs(t.attrs,l);if(!f)return;if(!Id(f))throw new Error("merge operation is not supported for links");const p=ys(t.eav,[r,l]);if(!p)return;const h=(i=p.values().next())===null||i===void 0?void 0:i.value;if(!h)return;const y=h[2],_=J0(y,c),T=[r,l,_,e_(t,f,h)];Gt(t.eav,[r,l],new Map([[_,T]]))}function qf(t,e){var i,o;const[r,l]=e,c=zr(t,[r]);if(!c)return;const[f]=c,p=t.eav.get(f);if(p){for(const y of p.keys()){const _=t.attrs[y];_&&_["on-delete-reverse"]==="cascade"&&Ht(p.get(y),1).forEach(([T,C,b])=>{var M;return qf(t,[b,(M=_["reverse-identity"])===null||M===void 0?void 0:M[1]])}),(!l||!_||((i=_["forward-identity"])===null||i===void 0?void 0:i[1])===l)&&(gn(t.aev,[y,f]),gn(t.eav,[f,y]))}p.size===0&&gn(t.eav,[f])}const h=t.vae.get(f)&&Ht(t.vae.get(f),2);h&&h.forEach(y=>{var _,T,C;const[b,M,w]=y,R=t.attrs[M];(!l||!R||((_=R["reverse-identity"])===null||_===void 0?void 0:_[1])===l)&&(gn(t.eav,[b,M,w]),gn(t.aev,[M,b,w]),gn(t.vae,[w,M,b])),R&&R["on-delete"]==="cascade"&&((T=R["reverse-identity"])===null||T===void 0?void 0:T[1])===l&&qf(t,[b,(C=R["forward-identity"])===null||C===void 0?void 0:C[1]])}),((o=t.vae.get(f))===null||o===void 0?void 0:o.size)===0&&gn(t.vae,[f])}function n_(t,e){const i=Q0(t.attrs,e,t.useDateObjects);Object.keys(i).forEach(o=>{t[o]=i[o]})}function PA(t,[e]){t.attrs[e.id]=e,Dd(t)}function i_(t){return Ht(t.eav,3)}function LA(t,[e]){if(!t.attrs[e])return;const i=i_(t).filter(([o,r])=>r!==e);delete t.attrs[e],Dd(t),n_(t,i)}function kA(t,[e]){const i=t.attrs[e.id];i&&(t.attrs[e.id]=Object.assign(Object.assign({},i),e),Dd(t),n_(t,i_(t)))}function OA(t,e){const[i,...o]=e;switch(i){case"add-triple":t_(t,o);break;case"deep-merge-triple":UA(t,o);break;case"retract-triple":j0(t,o);break;case"delete-entity":qf(t,o);break;case"add-attr":PA(t,o);break;case"delete-attr":LA(t,o);break;case"update-attr":kA(t,o);break;case"restore-attr":break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${i}`)}}function Ht(t,e,i=[]){if(!t||e===0)return i;if(e===1){for(const o of t.values())i.push(o);return i}for(const o of t.values())Ht(o,e-1,i);return i}function pl(t,e,i){var o,r;const l=[];if(i?.hasOwnProperty("$not")){for(const f of e.keys())i.$not!==f&&l.push(e.get(f));return l}if(i?.hasOwnProperty("$isNull")){const{attrId:f,isNull:p,reverse:h}=i.$isNull;if(h)for(const y of e.keys()){const _=t.vae.get(y),T=!_||((o=_.get(f))===null||o===void 0?void 0:o.get(null))||!_.get(f);(p?T:!T)&&l.push(e.get(y))}else{const y=t.aev.get(f);for(const _ of e.keys()){const T=!y||((r=y.get(_))===null||r===void 0?void 0:r.get(null))||!y.get(_);(p?T:!T)&&l.push(e.get(_))}}return l}if(i?.$comparator)return Ht(e,1).filter(i.$op);const c=i.in||i.$in||[i];for(const f of c){const p=e.get(f);p&&l.push(p)}return l}function qA(t,e,i){let o="";return t!==void 0&&(o+="e"),e!==void 0&&(o+="a"),i!==void 0&&(o+="v"),o}function GA(t,[e,i,o]){var r,l;switch(qA(e,i,o)){case"e":{const f=t.eav.get(e);return Ht(f,2)}case"ea":{const f=(r=t.eav.get(e))===null||r===void 0?void 0:r.get(i);return Ht(f,1)}case"eav":{const f=(l=t.eav.get(e))===null||l===void 0?void 0:l.get(i);return f?pl(t,f,o):[]}case"ev":{const f=t.eav.get(e);if(!f)return[];const p=[];for(const h of f.values())p.push(...pl(t,h,o));return p}case"a":{const f=t.aev.get(i);return Ht(f,2)}case"av":{const f=t.aev.get(i);if(!f)return[];const p=[];for(const h of f.values())p.push(...pl(t,h,o));return p}case"v":{const f=[];for(const p of t.eav.values())for(const h of p.values())f.push(...pl(t,h,o));return f}default:return Ht(t.eav,3)}}function HA(t,e,i){var o;const r={};for(const[l,c]of e.entries()){const f=(o=t.eav.get(i))===null||o===void 0?void 0:o.get(c.id),p=Ht(f,1);for(const h of p)r[l]=h[2]}return r}function Di(t,e,i){var o;return(o=t.attrIndexes.forwardIdents.get(e))===null||o===void 0?void 0:o.get(i)}function o_(t,e,i){var o;return(o=t.attrIndexes.revIdents.get(e))===null||o===void 0?void 0:o.get(i)}function VA(t,e){return t.attrIndexes.blobAttrs.get(e)}function s_(t,e){var i;const o=t.attrIndexes.primaryKeys.get(e);return o||((i=t.attrIndexes.forwardIdents.get(e))===null||i===void 0?void 0:i.get("id"))}function zA(t,e){const i=zr(t,e);if(!i)return;const[o,r,l]=i;if(gs(t.attrs,r))return ys(t.eav,[o,r])}function BA(t,e){const i=e.filter(([o,r,l,c,f])=>{if(o!=="add-triple"&&o!=="deep-merge-triple")return!0;const p=f?.mode;if(p!=="create"&&p!=="update")return!0;let h=!1;const y=gs(t.attrs,l);if(y){const _=s_(t,y["forward-identity"][1]);h=!!zA(t,[r,_.id,r])}return!(p==="create"&&h||p==="update"&&!h)});return xl(t,o=>{i.forEach(r=>{OA(o,r)})})}function FA(t){return typeof t=="string"&&t.startsWith("?")}function $A(t,e,i){if(i.hasOwnProperty(t)){const o=i[t];return r_(o,e,i)}return Object.assign(Object.assign({},i),{[t]:e})}function dy(t,e,i){return t===e?i:null}function YA(t){switch(typeof t){case"string":return t.startsWith("?")?$A:dy;default:return dy}}const JA=["in","$in","$not","$isNull","$comparator"];function KA(t){for(const e of JA)if(t.hasOwnProperty(e))return!0;return!1}function r_(t,e,i){return i?typeof t=="object"?KA(t)?i:null:YA(t)(t,e,i):null}function QA(t,e,i){return t.reduce((o,r,l)=>{const c=e[l];return r_(r,c,o)},i)}function XA(t,e,i){return jA(t,e,i).map(o=>QA(e,o,i)).filter(o=>o)}function ZA(t,e,i){return e.or?e.or.patterns.flatMap(o=>Gf(t,o,i)):e.and?e.and.patterns.reduce((o,r)=>Gf(t,r,o),i):i.flatMap(o=>XA(t,e,o))}function Gf(t,e,i=[{}]){return e.reduce((o,r)=>ZA(t,r,o),i)}function Ud(t,e){return Array.isArray(e)?e.map(i=>Ud(t,i)):FA(e)?t[e]:e}function WA(t,{find:e,where:i}){return Gf(t,i).map(r=>Ud(r,e))}function jA(t,e,i){return GA(t,Ud(i,e))}const eb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function fs(t){return typeof t=="string"&&eb.test(t)}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function tb(t,e=0){return(_t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]).toLowerCase()}let Ef;const nb=new Uint8Array(16);function ib(){if(!Ef){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ef=crypto.getRandomValues.bind(crypto)}return Ef(nb)}const ob=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hy={randomUUID:ob};function sb(t,e,i){if(hy.randomUUID&&!t)return hy.randomUUID();t=t||{};const o=t.random??t.rng?.()??ib();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,tb(o)}function py(t){const e=t.replace(/-/g,""),i=[];for(let o=0;o<e.length;o+=2)i.push(parseInt(e.substring(o,o+2),16));return i}function rb(t,e){for(let i=0;i<t.length;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return 0}function ab(t,e){return rb(py(t),py(e))}function dt(){return sb()}function lb(t,e){return t.localeCompare(e)}function ub(){let t=lb;if(typeof Intl=="object"&&Intl.hasOwnProperty("Collator"))try{t=Intl.Collator("en-US").compare}catch{}return t}const cb=ub();let fb=0;function Rr(t){return Bl(`_${t}`,fb++)}function Bl(t,e){return`?${t}-${e}`}class ds extends Error{constructor(e){super(e),this.name="AttrNotFoundError"}}function db(t,e){const i=s_(t,e);if(!i)throw new ds(`Could not find id attr for ${e}`);return i}function my(t,e,i,o){return[hb(t,e,i,o)]}function hb(t,e,i,o){return[t(i,o),db(e,i).id,t(i,o),t("time",o)]}function pb(t,e,i){return t.map(o=>o===e?i:o)}function a_(t,e,i,o,r){const l=Di(e,i,r),c=o_(e,i,r),f=l||c;if(!f)throw new ds(`Could not find attr for ${[i,r]}`);if(f["value-type"]!=="ref")throw new Error(`Attr ${f.id} is not a ref`);const[p,h]=f["forward-identity"],[y,_]=f["reverse-identity"],T=o+1,C=l?[t(h,o),f.id,t(_,T),Rr("time")]:[t(h,T),f.id,t(_,o),Rr("time")];return[l?_:h,T,C,f,!!l]}function gy(t,e){if(typeof e!="string")return function(c){return!1};const o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),r=new RegExp(`^${o}$`,t?void 0:"i");return function(c){return typeof c!="string"?!1:r.test(c)}}function mb(t,e){if(typeof e!="object"||e.hasOwnProperty("$in")||e.hasOwnProperty("in"))return e;const i=t["checked-data-type"]==="date";if(e.hasOwnProperty("$gt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>new Date(e.$gt)}:function(r){return r[2]>e.$gt}};if(e.hasOwnProperty("$gte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])>=new Date(e.$gte)}:function(r){return r[2]>=e.$gte}};if(e.hasOwnProperty("$lt"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<new Date(e.$lt)}:function(r){return r[2]<e.$lt}};if(e.hasOwnProperty("$lte"))return{$comparator:!0,$op:i?function(r){return new Date(r[2])<=new Date(e.$lte)}:function(r){return r[2]<=e.$lte}};if(e.hasOwnProperty("$like")){const o=gy(!0,e.$like);return{$comparator:!0,$op:function(l){return o(l[2])}}}if(e.hasOwnProperty("$ilike")){const o=gy(!1,e.$ilike);return{$comparator:!0,$op:function(l){return o(l[2])}}}return e}function gb(t,e,i,o,r,l){const c=Di(e,i,r),f=o_(e,i,r),p=c||f;if(!p)throw new ds(`No attr for etype = ${i} label = ${r}`);if(l?.hasOwnProperty("$isNull")){const h=Di(e,i,"id");if(!h)throw new ds(`No attr for etype = ${i} label = id`);return[t(i,o),h.id,{$isNull:{attrId:p.id,isNull:l.$isNull,reverse:!c}},Rr("time")]}return c?[t(i,o),p.id,mb(p,l),Rr("time")]:[l,p.id,t(i,o),Rr("time")]}function yb(t,e,i,o,r){const[l,c,f]=r.reduce((p,h)=>{const[y,_,T]=p,[C,b,M]=a_(t,e,y,_,h);return[C,b,[...T,M]]},[i,o,[]]);return[l,c,f]}function Hf(t,e,i,o,r,l){const c=r.slice(0,r.length-1),f=r[r.length-1],[p,h,y]=yb(t,e,i,o,c),_=gb(t,e,p,h,f,l);return y.concat([_])}function vb(t,e){return e?[e].concat(t):t}function _b([t,e]){return t==="or"&&Array.isArray(e)}function Tb([t,e]){return t==="and"&&Array.isArray(e)}function Sb(t,e,i){return(o,r)=>{const l=t(o,r);return e==l?l:`${l}-${i}`}}function yy(t,e,i,o,r,l){const c=t(o,r),f=l.map((p,h)=>{const y=Sb(t,c,h);return l_(y,i,o,r,p)});return{[e]:{patterns:f,joinSym:c}}}function Eb(t){const e=[];for(let i=1;i<=t.length;i++)e.push(t.slice(0,i));return e}function vy(t,e,i,o,r){return Eb(r).map(l=>Hf(t,e,i,o,l,{$isNull:!0}))}function l_(t,e,i,o,r){return Object.entries(r).flatMap(([l,c])=>{if(_b([l,c]))return yy(t,"or",e,i,o,c);if(Tb([l,c]))return yy(t,"and",e,i,o,c);if(l==="$entityIdStartsWith")return[];const f=l.split(".");if(c?.hasOwnProperty("$ne")&&(c=Object.assign(Object.assign({},c),{$not:c.$ne}),delete c.$ne),c?.hasOwnProperty("$not")){const p=Hf(t,e,i,o,f,c),h=vy(t,e,i,o,f);return[{or:{patterns:[p,...h],joinSym:t(i,o)}}]}return c?.hasOwnProperty("$isNull")&&c.$isNull===!0&&f.length>1?[{or:{patterns:vy(t,e,i,o,f),joinSym:t(i,o)}}]:Hf(t,e,i,o,f,c)})}function Cb(t,e,i,o){const r=Bl;return o?l_(r,t,e,i,o).concat(my(r,t,e,i)):my(r,t,e,i)}function Ab(t,e,i){return[t(e,i),t("time",i)]}function bb(t,e,i,o,r,l){const[c,f,p,h,y]=a_(t,e,i,o,r),_=pb(p,t(i,o),l);return[c,f,_,h,y]}function Mb(t,e,{etype:i,level:o,form:r},l){const c=Object.keys(r).filter(f=>f!=="$");return c.length?Object.entries(l).map(function([p,h]){return c.map(function(T){var C,b,M;const w=!!(e.cardinalityInference&&(!((M=(b=(C=e.linkIndex)===null||C===void 0?void 0:C[i])===null||b===void 0?void 0:b[T])===null||M===void 0)&&M.isSingular));try{const[R,D,P]=bb(t,e,i,o,T,p),J=c_(e,{etype:R,level:D,form:r[T],join:P}),B=w?J[0]:J;return{[T]:B}}catch(R){if(R instanceof ds)return{[T]:w?void 0:[]};throw R}}).reduce(function(T,C){return Object.assign(Object.assign({},T),C)},h)}):Object.values(l)}function wb(t,e,i){return i==="string"?cb(t,e):t>e?1:-1}function Ar(t,e,i,o,r){return e===o||e==null&&o==null?ab(t,i):o==null?1:e==null?-1:wb(e,o,r)}function Il([t,e],[i,o],r){return Ar(t,e,i,o,r)}function Vf(t){return t==null?t:new Date(t).getTime()}function Rb(t,e,i,o){var r;const[l,c,f,p]=t,h=i==="desc"?1:-1;if(((r=e["forward-identity"])===null||r===void 0?void 0:r[2])==="id")return Il(o,[l,p],null)===h;const[y,_]=o,T=e["checked-data-type"],C=T==="date"?Vf(_):_,b=T==="date"?Vf(f):f;return Il([y,C],[l,b],T)===h}function Nb(t,e){const i=e[1];return t.attrs[i]}function xb(t,e,i){const o=Object.keys(i)[0];return Di(t,e,o)}function Ib(t,e,i,o){if(i)return Nb(t,i);if(o)return xb(t,e,o)}function Db(t,e,i){var o,r;if(!Array.isArray(i.fields))return VA(t,e);const l=new Map;for(const c of i.fields){const f=Di(t,e,c),p=(o=f?.["forward-identity"])===null||o===void 0?void 0:o[2];p&&Id(f)&&l.set(p,f)}if(!l.has("id")){const c=Di(t,e,"id"),f=(r=c?.["forward-identity"])===null||r===void 0?void 0:r[2];f&&l.set(f,c)}return l}function Ub(t,{etype:e,pageInfo:i,dq:o,form:r}){var l,c;const f=(l=r?.$)===null||l===void 0?void 0:l.order,p=u_(r),h=Pb(r);let y=WA(t,o);const _=i?.["start-cursor"],T=Ib(t,e,_,f);if(T&&((c=T?.["forward-identity"])===null||c===void 0?void 0:c[2])!=="id"){const M=T["checked-data-type"]==="date",w=T.id;y=y.map(([R])=>{var D,P,J,B,W;let Q=(W=(B=(J=(P=(D=t.eav.get(R))===null||D===void 0?void 0:D.get(w))===null||P===void 0?void 0:P.values())===null||J===void 0?void 0:J.next())===null||B===void 0?void 0:B.value)===null||W===void 0?void 0:W[2];return M&&(Q=Vf(Q)),[R,Q]})}y.sort(h==="asc"?function(w,R){return Il(w,R,T?.["checked-data-type"])}:function(w,R){return Il(R,w,T?.["checked-data-type"])});let C={};const b=Db(t,e,o);for(const M of y){const[w]=M;if(C[w]||!p&&_&&T&&Rb(_,T,h,M))continue;const R=HA(t,b,w);R&&(C[w]=R)}return C}function Pb(t){var e;const i=(e=t.$)===null||e===void 0?void 0:e.order;return i&&i[Object.keys(i)[0]]||"asc"}function u_(t){var e,i,o;const r=(e=t.$)===null||e===void 0?void 0:e.offset,l=(i=t.$)===null||i===void 0?void 0:i.before,c=(o=t.$)===null||o===void 0?void 0:o.after;return!r&&!l&&!c}function Lb(t,{etype:e,level:i,form:o,join:r,pageInfo:l}){var c,f,p,h,y;if(!u_(o)&&(!l||!l["start-cursor"]))return[];const _=vb(Cb(t,e,i,(c=o.$)===null||c===void 0?void 0:c.where),r),T=Ab(Bl,e,i),C=(f=o.$)===null||f===void 0?void 0:f.fields,b=Ub(t,{etype:e,pageInfo:l,form:o,dq:{where:_,find:T,fields:C}}),M=((p=o.$)===null||p===void 0?void 0:p.limit)||((h=o.$)===null||h===void 0?void 0:h.first)||((y=o.$)===null||y===void 0?void 0:y.last);if(M!=null){i>0&&console.warn("WARNING: Limits in child queries are only run client-side. Data returned from the server will not have a limit.");const w=Object.entries(b);return w.length<=M?b:Object.fromEntries(w.slice(0,M))}return b}function kb(t,e){try{return Lb(t,e)}catch(i){if(i instanceof ds)return{};throw i}}function c_(t,e){const i=kb(t,e);return Mb(Bl,t,e,i)}function Ob(t){const e={};for(const[i,o]of Object.entries(t))e[i]={startCursor:o["start-cursor"],endCursor:o["end-cursor"],hasNextPage:o["has-next-page?"],hasPreviousPage:o["has-previous-page?"]};return e}function f_({store:t,pageInfo:e,aggregate:i},o){const l={data:Object.keys(o).reduce(function(f,p){return i?.[p]||p==="$$ruleParams"||(f[p]=c_(t,{etype:p,form:o[p],level:0,pageInfo:e?.[p]})),f},{})};return e&&(l.pageInfo=Ob(e)),i&&(l.aggregate=i),l}function qb(){const e={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(e))}const Gb=qb();function zf(t,e,i){const o={__etype:t,__ops:i};return new Proxy(o,{get:(r,l)=>{if(l==="__ops")return i;if(l==="__etype")return t;if(Gb.has(l))return(c,f)=>zf(t,e,[...i,f?[l,t,e,c,f]:[l,t,e,c]])}})}function Dl(t){return t.startsWith("lookup__")}function d_(t){const[e,i,...o]=t.split("__");return[i,JSON.parse(o.join("__"))]}function Hb(t){return new Proxy({__etype:t},{get(e,i){if(i==="__etype")return t;const o=i;return Dl(o)?zf(t,d_(o),[]):zf(t,o,[])}})}function Pd(){return new Proxy({},{get(t,e){return Hb(e)}})}Pd();function Vb(t){return t.__ops}function zb(t,e){const{attrIdMap:i,refSwapAttrIds:o}=t,r=[];for(const c of e){const f=i[c];if(f)r.push(f);else if(Array.isArray(c)&&c.length==2&&i[c[0]]){const[p,h]=c;r.push([i[p],h])}else r.push(c)}const[l]=e;if((l==="add-triple"||l==="retract-triple")&&o.has(e[2])){const c=r[1];r[1]=r[3],r[3]=c}return r}function St(t,e,i){return Object.values(t).find(o=>{const[r,l,c]=o["forward-identity"];return l===e&&c===i})}function ao(t,e,i){return Object.values(t).find(o=>{const r=o["reverse-identity"];if(!r)return!1;const[l,c,f]=r;return c===e&&f===i})}function Bb(t){if(Array.isArray(t))return t;const e=Object.entries(t);if(e.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return e[0]}function Bf(t,e,i){return i.indexOf(".")!==-1&&!St(t,e,i)}function Ff(t){const[e,i,...o]=t.split(".");if(o.length>0||i!=="id")throw new Error(`${t} is not a valid lookup attribute.`);return e}function Fb(t,e,i){if(!Bf(t,e,i))return St(t,e,i);const o=Ff(i),r=St(t,e,o)||ao(t,e,o);if(r&&r["value-type"]!=="ref")throw new Error(`${i} does not reference a valid link attribute.`);return r}function $f(t){return typeof t=="string"&&!Dl(t)?null:typeof t=="string"&&Dl(t)?d_(t):Bb(t)}function Vt(t,e,i){const o=$f(i);if(o===null)return i;const[r,l]=o,c=Fb(t,e,r);if(!c||!c["unique?"])throw new Error(`${r} is not a unique attribute.`);return[c.id,l]}function h_(t,e,i,o){const r=Vt(t,e,i);return Array.isArray(r)?[["add-triple",r,St(t,e,"id").id,r]].concat(o):o}function $b({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const f=Array.isArray(c)?c:[c],p=St(t,e,l),h=ao(t,e,l);return f.map(y=>p?["add-triple",Vt(t,e,i),p.id,Vt(t,p["reverse-identity"][1],y)]:["add-triple",Vt(t,h["forward-identity"][1],y),h.id,Vt(t,e,i)])});return h_(t,e,i,r)}function Yb({attrs:t},[e,i,o]){const r=Object.entries(o).flatMap(([l,c])=>{const f=Array.isArray(c)?c:[c],p=St(t,e,l),h=ao(t,e,l);return f.map(y=>p?["retract-triple",Vt(t,e,i),p.id,Vt(t,p["reverse-identity"][1],y)]:["retract-triple",Vt(t,h["forward-identity"][1],y),h.id,Vt(t,e,i)])});return h_(t,e,i,r)}function Jb(t,e,i){if(Array.isArray(i)){const[o,r]=i;for(const l of t||[]){const c=l?.aev.get(o);if(c){for(const[f,p,h]of Ht(c,2))if(h===r)return!0}}}else for(const o of t||[]){const r=o?.eav.get(i);if(r){for(const l of r.keys())if(o.attrs[l]["forward-identity"][1]==e)return!0}}return!1}function p_({stores:t,attrs:e},[i,o,r,l]){return l?.upsert===!1?{mode:"update"}:l?.upsert===!0?null:Jb(t,i,o)?{mode:"update"}:null}function Kb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=Nd(c),h=Vt(o,r,l);return[["id",h]].concat(Object.entries(p)).map(([_,T])=>{const C=St(o,r,_);return C["checked-data-type"]==="date"&&t.useDateObjects&&(T=zl(T)),["add-triple",h,C.id,T,{mode:"create"}]})}function Qb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=Nd(c),h=Vt(o,r,l),y=p_(t,[r,h,c,f]);return[["id",h]].concat(Object.entries(p)).map(([T,C])=>{const b=St(o,r,T);return b["checked-data-type"]==="date"&&t.useDateObjects&&(C=zl(C)),["add-triple",h,b.id,C,...y?[y]:[]]})}function Xb({attrs:t},[e,i]){return[["delete-entity",Vt(t,e,i),e]]}function Zb(t,e){const{stores:i,attrs:o}=t,[r,l,c,f]=e,p=Nd(c),h=Vt(o,r,l),y=p_(t,[r,h,c,f]),_=Object.entries(p).map(([C,b])=>{const M=St(o,r,C);return["deep-merge-triple",h,M.id,b,...y?[y]:[]]});return[["add-triple",h,St(o,r,"id").id,h,...y?[y]:[]]].concat(_)}function Wb({attrs:t},[e,i,o]){return[["rule-params",Vt(t,e,i),e,o]]}function jb(t){const[e,i,o,r,l]=t;if(!r)return t;const c=Object.assign({},r);return delete c.id,[e,i,o,c,...l?[l]:[]]}function eM(t,e){const[i,...o]=jb(e);switch(i){case"merge":return Zb(t,o);case"create":return Kb(t,o);case"update":return Qb(t,o);case"link":return $b(t,o);case"unlink":return Yb(t,o);case"delete":return Xb(t,o);case"ruleParams":return Wb(t,o);default:throw new Error(`unsupported action ${i}`)}}function tM(t){switch(t){case"string":case"date":case"boolean":case"number":return t;default:return}}function nM(t,e,i){var o,r;const l=(r=(o=t.entities[e])===null||o===void 0?void 0:o.attrs)===null||r===void 0?void 0:r[i];if(i==="id")return null;if(!l)throw new Error(`${e}.${i} does not exist in your schema`);const{unique:c,indexed:f}=l?.config,p=tM(l?.valueType);return{"index?":f,"unique?":c,"checked-data-type":p}}function ml(t,e,i,o){const r=t?nM(t,e,i):null,l=dt(),f=[dt(),e,i];return Object.assign(Object.assign({id:l,"forward-identity":f,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}function iM(t,e,i){return Object.values(t.links).find(r=>r.forward.on===e&&r.forward.label===i||r.reverse.on===e&&r.reverse.label===i)}function oM(t,e,i){const o=iM(t,e,i);if(!o)throw new Error(`Couldn't find the link ${e}.${i} in your schema`);const{forward:r,reverse:l}=o;return{"forward-identity":[dt(),r.on,r.label],"reverse-identity":[dt(),l.on,l.label],cardinality:r.has==="one"?"one":"many","unique?":l.has==="one","on-delete":r.onDelete,"on-delete-reverse":l.onDelete}}function _y(t,e,i,o){const r=t?oM(t,e,i):null,l=dt(),c=[dt(),e,i],f=[dt(),i,e];return Object.assign(Object.assign({id:l,"forward-identity":c,"reverse-identity":f,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},r||{}),o||{})}const sM=new Set(["create","update","merge","link","unlink"]),rM=new Set(["link","unlink"]),aM=new Set(["create","update","merge"]),lM=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Yf={"unique?":!0,"index?":!0},uM=Object.assign(Object.assign({},Yf),{cardinality:"one"});function cM(t){const e=[],[i,o,r,l]=t;if(!lM.has(i))return e;const c=$f(r);if(c&&e.push({etype:o,lookupPair:c}),i==="link")for(const[f,p]of Object.entries(l)){const h=Array.isArray(p)?p:[p];for(const y of h){const _=$f(y);_&&e.push({etype:o,lookupPair:_,linkLabel:f})}}return e}function fM({attrs:t,schema:e},i){var o,r;const[l,c,f]=[new Set,Object.assign({},t),[]];function p(_){c[_.id]=_,f.push(["add-attr",_]),l.add(_.id)}function h(_){_?.isUnsynced&&!l.has(_.id)&&(f.push(["add-attr",_]),l.add(_.id))}function y(_,T){const C=St(c,_,T),b=ao(c,_,T);h(C),h(b),!C&&!b&&p(_y(e,_,T,uM))}for(const _ of i)for(const{etype:T,lookupPair:C,linkLabel:b}of cM(_)){const M=C[0];if(b){y(T,b);const w=St(c,T,b),R=ao(c,T,b);h(w),h(R);const D=((o=w?.["reverse-identity"])===null||o===void 0?void 0:o[1])||((r=R?.["forward-identity"])===null||r===void 0?void 0:r[1])||b;if(Bf(c,D,M))y(D,Ff(M));else{const P=St(c,D,M);P||p(ml(e,D,M,Yf)),h(P)}}else if(Bf(c,T,M))y(T,Ff(M));else{const w=St(c,T,M);w||p(ml(e,T,M,Yf)),h(w)}}for(const _ of i){const[T,C,b,M]=_;if(sM.has(T)){const w=St(c,C,"id");h(w),w||p(ml(e,C,"id",{"unique?":!0}));for(const R of Object.keys(M)){const D=St(c,C,R);if(h(D),aM.has(T)&&(D||p(ml(e,C,R,R==="id"?{"unique?":!0}:null))),rM.has(T)){const P=ao(c,C,R);!D&&!P&&p(_y(e,C,R)),h(P)}}}}return[c,f]}function dM(t,e){const o=(Array.isArray(e)?e:[e]).flatMap(p=>Vb(p)),[r,l]=fM(t,o),c=Object.assign(Object.assign({},t),{attrs:r}),f=o.flatMap(p=>eM(c,p));return[...l,...f]}var bn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function Ty(t,e){typeof requestIdleCallback>"u"?t():requestIdleCallback(t,{timeout:e})}const Nr="__meta";class hM{constructor(e,i){}}class Jf{constructor(e){var i,o;this._subs=[],this._nextSave=null,this._nextGc=null,this._pendingSaveKeys=new Set,this._loadedKeys=new Set,this._version=0,this._meta={isLoading:!0,onLoadCbs:[],value:null,error:null,attempts:0},this._persister=e.persister,this._merge=e.merge,this.serialize=e.serialize,this.parse=e.parse,this._objectSize=e.objectSize,this._log=e.logger,this._saveThrottleMs=(i=e.saveThrottleMs)!==null&&i!==void 0?i:100,this._idleCallbackMaxWaitMs=(o=e.idleCallbackMaxWaitMs)!==null&&o!==void 0?o:1e3,this._gcOpts=e.gc,this.currentValue={},this._loadedKeys=new Set,this._loadingKeys={},this._initMeta(),e.preloadEntryCount&&this._preloadEntries(e.preloadEntryCount)}_initMeta(){return bn(this,void 0,void 0,function*(){var e,i,o;this._meta.loadingPromise&&(yield this._meta.loadingPromise);try{const r=this._persister.getItem(Nr);this._meta.loadingPromise=r;const l=yield r;this._meta.isLoading=!1,this._meta.error=null,this._meta.loadingPromise=null,this._meta.attempts=0;const c=(i=(e=this._meta.value)===null||e===void 0?void 0:e.objects)!==null&&i!==void 0?i:{},f=l??{},p=(o=f.objects)!==null&&o!==void 0?o:{};this._meta.value=Object.assign(Object.assign({},f),{objects:Object.assign(Object.assign({},c),p)})}catch(r){this._meta.error=r,this._meta.attempts++,this._meta.loadingPromise=null}})}_getMeta(){return bn(this,void 0,void 0,function*(){return this._meta.value?this._meta.value:this._meta.loadingPromise?(yield this._meta.loadingPromise,this._meta.value):(this._initMeta(),yield this._meta.loadingPromise,this._meta.value)})}_refreshMeta(){return bn(this,void 0,void 0,function*(){return yield this._initMeta(),this._meta.value})}_preloadEntries(e){return bn(this,void 0,void 0,function*(){const i=yield this.waitForMetaToLoad();if(!i)return;const o=Object.entries(i.objects);o.sort(([r,l],[c,f])=>f.updatedAt-l.updatedAt);for(const[r]of o.slice(0,e))this._loadKey(r)})}_getFromStorage(e){return bn(this,void 0,void 0,function*(){try{const i=yield this._persister.getItem(e);return i&&this.parse(e,i)}catch(i){return console.error(`Unable to read from storage for key=${e}`,i),null}})}waitForKeyToLoad(e){return bn(this,void 0,void 0,function*(){return this._loadedKeys.has(e)?this.currentValue[e]:(yield this._loadingKeys[e]||this._loadKey(e),this.currentValue[e])})}waitForMetaToLoad(){return bn(this,void 0,void 0,function*(){return this._getMeta()})}unloadKey(e){this._loadedKeys.delete(e),delete this._loadingKeys[e],delete this.currentValue[e]}_loadKey(e){return bn(this,void 0,void 0,function*(){if(this._loadedKeys.has(e)||e in this._loadingKeys)return;const i=this._getFromStorage(e);this._loadingKeys[e]=i;const o=yield i;if(delete this._loadingKeys[e],this._loadedKeys.add(e),o){const r=this._merge(e,o,this.currentValue[e]);r&&(this.currentValue[e]=r)}this.onKeyLoaded&&this.onKeyLoaded(e)})}_writeToStorage(e){var i,o;const r=[],l=e?.skipGc;if(this._meta.isLoading){const C=new Promise((b,M)=>{var w;setTimeout(()=>this._enqueuePersist(e?Object.assign(Object.assign({},e),{attempts:(e.attempts||0)+1}):{attempts:1}).then(b).catch(M),10+((w=e?.attempts)!==null&&w!==void 0?w:0)*1e3)});return r.push(C),Promise.all(r).then(b=>b.reduce((M,w)=>M+w,0))}const c=this._meta.value;if(!c)return Promise.resolve(0);const f=[],p=[];for(const C of this._pendingSaveKeys)C in this.currentValue?p.push(C):(f.push(C),delete c.objects[C]);for(const C of f){const b=this._persister.removeItem(C);r.push(b.then(()=>1)),this._loadedKeys.delete(C),this._pendingSaveKeys.delete(C)}const h=[],y=[[Nr,c]],_=(i=c.objects)!==null&&i!==void 0?i:{};c.objects=_;for(const C of p)if(this._loadedKeys.has(C)){const b=this.serialize(C,this.currentValue[C]);y.push([C,b]);const M=this._objectSize(b),w=(o=_[C])!==null&&o!==void 0?o:{createdAt:Date.now(),updatedAt:Date.now(),size:M};w.updatedAt=Date.now(),w.size=M,_[C]=w,this._pendingSaveKeys.delete(C)}else h.push(C);const T=this._persister.multiSet(y);r.push(T.then(()=>1));for(const C of h){const b=this._loadKey(C).then(()=>this._enqueuePersist(e));r.push(b)}return l||this.gc(),Promise.all(r).then(C=>C.reduce((b,M)=>b+M,0))}flush(){return bn(this,void 0,void 0,function*(){return this._nextSave?(clearTimeout(this._nextSave),this._nextSave=null,this._writeToStorage()):void 0})}_gc(){return bn(this,void 0,void 0,function*(){if(!this._gcOpts)return;const e=new Set(yield this._persister.getAllKeys());e.delete(Nr);const i=new Set(Object.keys(this.currentValue));for(const T of Object.keys(this._loadingKeys))i.add(T);for(const T of this._loadedKeys)i.add(T);const o=yield this._refreshMeta();if(!o){this._log.info("Could not gc because we were not able to load meta");return}const r=[],l={gcOpts:this._gcOpts,keys:e,sacredKeys:i,removed:[],metaRemoved:[],removedMissingCount:0,removedOldCount:0,removedThresholdCount:0,removedSizeCount:0};for(const T of e)i.has(T)||T in o.objects||(this._log.info("Lost track of key in meta",T),r.push(this._persister.removeItem(T)),l.removed.push(T),l.removedMissingCount++);const c=Date.now();for(const[T,C]of Object.entries(o.objects))!i.has(T)&&C.updatedAt<c-this._gcOpts.maxAgeMs&&(r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedOldCount++);const f=Object.entries(o.objects);f.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const p=f.filter(([T])=>!i.has(T));if(f.length>this._gcOpts.maxEntries)for(const[T]of p.slice(0,f.length-this._gcOpts.maxEntries))r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedThresholdCount++;const h=Object.entries(o.objects);h.sort(([T,C],[b,M])=>C.updatedAt-M.updatedAt);const y=h.filter(([T])=>!i.has(T));let _=h.reduce((T,[C,b])=>T+b.size,0);for(;_>0&&_>this._gcOpts.maxSize&&y.length;){const[[T,C]]=y.splice(0,1);_-=C.size,r.push(this._persister.removeItem(T)),delete o.objects[T],l.removed.push(T),l.removedSizeCount++}for(const T of Object.keys(o.objects))!e.has(T)&&!i.has(T)&&delete o.objects[T];return(l.removed.length||l.metaRemoved.length)&&r.push(this._enqueuePersist({skipGc:!0})),this._log.info("Completed GC",l),yield Promise.all(r),l})}gc(){this._nextGc||(this._nextGc=setTimeout(()=>{Ty(()=>{this._nextGc=null,this._gc()},30*1e3)},1e3*60+Math.random()*500))}_enqueuePersist(e){return new Promise((i,o)=>{if(this._nextSave){i(0);return}this._nextSave=setTimeout(()=>{Ty(()=>{this._nextSave=null,this._writeToStorage(e).then(i).catch(o)},this._idleCallbackMaxWaitMs)},this._saveThrottleMs)})}version(){return this._version}updateInPlace(e){this._version++;const[i,o]=xl(this.currentValue,e,{enablePatches:!0});for(const r of o){const l=r.path[0];l&&typeof l=="string"&&(this._pendingSaveKeys.add(l),this._loadedKeys.has(l)||this._loadKey(l))}for(const r of Object.keys(i))if(!i[r])debugger;this.currentValue=i,this._enqueuePersist();for(const r of this._subs)r(this.currentValue);return i}subscribe(e){return this._subs.push(e),e(this.currentValue),()=>{this._subs=this._subs.filter(i=>i!==e)}}}var Qn=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};const pM=6,mM=["kv","querySubs","syncSubs"];function gM(t){return function(i){console.error("Error in IndexedDB event",{source:t,event:i})}}function yM(t){return Qn(this,void 0,void 0,function*(){return new Promise(e=>{const i=indexedDB.open(t);i.onerror=o=>{e(null)},i.onsuccess=o=>{const l=o.target.result;e(l)},i.onupgradeneeded=o=>{var r;(r=o.target.transaction)===null||r===void 0||r.abort(),e(null)}})})}function vM(t,e,i){return Qn(this,void 0,void 0,function*(){const o=typeof e=="string"?JSON.parse(e):e;if(!o)return;const r=new Set;return new Promise((l,c)=>{var f,p,h,y;const _={};for(const[b,M]of Object.entries(o)){const w=typeof M=="string"?JSON.parse(M):M;if(w.lastAccessed){const D={createdAt:w.lastAccessed,updatedAt:w.lastAccessed,size:(y=(h=(p=(f=w.result)===null||f===void 0?void 0:f.store)===null||p===void 0?void 0:p.triples)===null||h===void 0?void 0:h.length)!==null&&y!==void 0?y:0};_[b]=D}const R=i.put(w,b);r.add(R)}const T={objects:_},C=i.put(T,Nr);r.add(C);for(const b of r)b.onsuccess=()=>{r.delete(b),r.size===0&&l()},b.onerror=M=>{c(M)}})})}function Sy(t,e,i){return Qn(this,void 0,void 0,function*(){const o=i.put(e,t);return new Promise((r,l)=>{o.onsuccess=()=>r(),o.onerror=c=>l(c)})})}function _M(t,e){return Qn(this,void 0,void 0,function*(){const i=yield yM(`instant_${t}_5`);if(!i)return;const o=yield new Promise((y,_)=>{const b=i.transaction(["kv"],"readonly").objectStore("kv").openCursor();b.onerror=w=>{_(w)};const M=[];b.onsuccess=()=>{const w=b.result;if(w){const R=w.key,D=w.value;M.push([R,D]),w.continue()}else y(M)},b.onerror=w=>{_(w)}}),r=e.transaction(["kv","querySubs"],"readwrite"),l=r.objectStore("kv"),c=r.objectStore("querySubs"),f=[],p={objects:{}};for(const[y,_]of o)switch(y){case"querySubs":{const T=vM(y,_,c);f.push(T);break}default:{const T=Sy(y,_,l);f.push(T);const C={createdAt:Date.now(),updatedAt:Date.now(),size:0};p.objects[y]=C;break}}const h=Sy(Nr,p,l);f.push(h),yield Promise.all(f),yield new Promise((y,_)=>{r.oncomplete=T=>y(T),r.onerror=T=>_(T),r.onabort=T=>_(T)})})}const Ey=new Map;class m_ extends hM{constructor(e,i){super(e,i),this.dbName=`instant_${e}_${pM}`,this._storeName=i,this._appId=e,this._dbPromise=this._init()}_init(){return new Promise((e,i)=>{let o=!1;const r=indexedDB.open(this.dbName,1);r.onerror=l=>{i(l)},r.onsuccess=l=>{const f=l.target.result;if(o){const p=_M(this._appId,f).catch(h=>{gM("Error upgrading store from version 5 to 6.")(h)});Ey.set(this.dbName,p),p.then(()=>e(f)).catch(()=>e(f))}else{const p=Ey.get(this.dbName);p?p.then(()=>e(f)).catch(()=>e(f)):e(f)}},r.onupgradeneeded=l=>{o=!0,this._upgradeStore(l)}})}_upgradeStore(e){const o=e.target.result;for(const r of mM)o.objectStoreNames.contains(r)||o.createObjectStore(r)}getItem(e){return Qn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const f=i.transaction([this._storeName],"readonly").objectStore(this._storeName).get(e);f.onerror=p=>{r(p)},f.onsuccess=p=>{f.result?o(f.result):o(null)}})})}setItem(e,i){return Qn(this,void 0,void 0,function*(){const o=yield this._dbPromise;return new Promise((r,l)=>{const p=o.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(i,e);p.onerror=h=>{l(h)},p.onsuccess=h=>{r()}})})}multiSet(e){return Qn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const l=i.transaction([this._storeName],"readwrite"),c=l.objectStore(this._storeName),f=new Set;for(const[p,h]of e){const y=c.put(h,p);f.add(y)}for(const p of f)p.onerror=h=>{l.abort(),r(h)},p.onsuccess=h=>{f.delete(p),f.size===0&&o()}})})}removeItem(e){return Qn(this,void 0,void 0,function*(){const i=yield this._dbPromise;return new Promise((o,r)=>{const f=i.transaction([this._storeName],"readwrite").objectStore(this._storeName).delete(e);f.onerror=p=>{r(p)},f.onsuccess=p=>{o()}})})}getAllKeys(){return Qn(this,void 0,void 0,function*(){const e=yield this._dbPromise;return new Promise((i,o)=>{const c=e.transaction([this._storeName],"readonly").objectStore(this._storeName).getAllKeys();c.onerror=f=>{o(f)},c.onsuccess=f=>{i(c.result.filter(p=>typeof p=="string"))}})})}}var TM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};class g_{static getIsOnline(){return TM(this,void 0,void 0,function*(){return navigator.onLine})}static listen(e){const i=()=>{e(!0)},o=()=>{e(!1)};return addEventListener("online",i),addEventListener("offline",o),()=>{removeEventListener("online",i),removeEventListener("offline",o)}}}class hs extends Error{constructor(e,i){super(e),this.hint=i;const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,hs),this.name="InstantError"}get[Symbol.toStringTag](){return"InstantError"}}var SM=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};class Fl extends hs{constructor(e){var i;const o=((i=e.body)===null||i===void 0?void 0:i.message)||`API Error (${e.status})`;super(o,e.body.hint);const r=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,Fl),this.name="InstantAPIError",this.status=e.status,this.body=e.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function vn(t,e){return SM(this,void 0,void 0,function*(){const i=yield fetch(t,e),o=yield i.json();return i.status===200?Promise.resolve(o):Promise.reject(new Fl({status:i.status,body:o}))})}var vs=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function EM({apiURI:t,appId:e,email:i}){return vn(`${t}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":e,email:i})})}function CM(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i,email:o,code:r,refreshToken:l}){return yield vn(`${e}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object.assign({"app-id":i,email:o,code:r},l?{"refresh-token":l}:{}))})})}function AM(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield vn(`${e}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i,"refresh-token":o})})})}function bM(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i}){return yield vn(`${e}/runtime/auth/sign_in_guest`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":i})})})}function Cy(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i,code:o,codeVerifier:r,refreshToken:l}){return yield vn(`${e}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,code:o,code_verifier:r,refresh_token:l})})})}function MM(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i,nonce:o,idToken:r,clientName:l,refreshToken:c}){return yield vn(`${e}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,nonce:o,id_token:r,client_name:l,refresh_token:c})})})}function wM(t){return vs(this,arguments,void 0,function*({apiURI:e,appId:i,refreshToken:o}){return yield vn(`${e}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:i,refresh_token:o})})})}var Br=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function RM(t){return Br(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,file:r,refreshToken:l,contentType:c,contentDisposition:f}){const p={app_id:i,path:o,authorization:`Bearer ${l}`,"content-type":c||r.type};return f&&(p["content-disposition"]=f),yield vn(`${e}/storage/upload`,{method:"PUT",headers:p,body:r})})}function NM(t){return Br(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield vn(`${e}/storage/files?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}function xM(t){return Br(this,arguments,void 0,function*({apiURI:e,appId:i,fileName:o,refreshToken:r,metadata:l={}}){const{data:c}=yield vn(`${e}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({app_id:i,filename:o})});return c})}function IM(t,e){return Br(this,void 0,void 0,function*(){return(yield fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}})).ok})}function DM(t){return Br(this,arguments,void 0,function*({apiURI:e,appId:i,path:o,refreshToken:r}){const{data:l}=yield vn(`${e}/storage/signed-download-url?app_id=${i}&filename=${encodeURIComponent(o)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${r}`}});return l})}let Ld=!1,y_=!1,v_=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(Ld=!!window.localStorage.getItem("devBackend"),y_=!!window.localStorage.getItem("__instantLogging"),v_=!!window.localStorage.getItem("__devtoolLocalDash"));function Ay(t,e){if(!e)return t;const i={};return e.forEach(o=>{i[o]=t[o]}),i}function UM(t,e,i){var o,r;const l={peers:{}};if(e&&"user"in e?e.user:!0){const f=Ay((o=t.user)!==null&&o!==void 0?o:{},e?.keys);l.user=Object.assign(Object.assign({},f),{peerId:i})}for(const f of Object.keys((r=t.peers)!==null&&r!==void 0?r:{})){const p=e?.peers===void 0,h=Array.isArray(e?.peers)&&e?.peers.includes(f);if(p||h){const y=Ay(t.peers[f],e?.keys);l.peers[f]=Object.assign(Object.assign({},y),{peerId:f})}}return l}function PM(t,e){if(t.isLoading!==e.isLoading||t.error!==e.error||(t.user||e.user)&&(!t.user||!e.user||!uy(t.user,e.user))||!Y0(t.peers,e.peers))return!0;for(const o of Object.keys(t.peers))if(!uy(t.peers[o],e.peers[o]))return!0;return!1}class by{constructor(){this.promise=new Promise((e,i)=>{this._resolve=e,this._reject=i})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function __(t,e=[]){t.forEach(i=>{const{data:o}=i,{"datalog-result":r}=o,{"join-rows":l}=r;for(const c of l)for(const f of c)e.push(f);__(i["child-nodes"],e)})}function My(t){const e=[];return __(t,e),e}function wy(t){return Object.values(t.links).reduce((e,i)=>{var o,r,l,c;return(o=e[l=i.forward.on])!==null&&o!==void 0||(e[l]={}),e[i.forward.on][i.forward.label]={isForward:!0,isSingular:i.forward.has==="one",link:i},(r=e[c=i.reverse.on])!==null&&r!==void 0||(e[c]={}),e[i.reverse.on][i.reverse.label]={isForward:!1,isSingular:i.reverse.has==="one",link:i},e},{})}const kd="v0.22.73";function LM(t,e){return{info:t?(...i)=>console.info(...i,e()):()=>{},debug:t?(...i)=>console.debug(...i,e()):()=>{},error:t?(...i)=>console.error(...i,e()):()=>{}}}class Xn{constructor(e,i,o,r={indexed:!1,unique:!1}){this.valueType=e,this.required=i,this.isIndexed=o,this.config=r,this.metadata={}}clientRequired(){return new Xn(this.valueType,!1,this.isIndexed,this.config)}optional(){return new Xn(this.valueType,!1,this.isIndexed,this.config)}unique(){return new Xn(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new Xn(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class Fe extends Error{constructor(e,i){const o=i?`At path '${i}': ${e}`:e;super(o),this.name="QueryValidationError"}}const Ry=["where","order","limit","last","first","offset","after","before","fields","aggregate"],kM=t=>t.valueType||"unknown",T_=(t,e,i=!1)=>{if(i||t==null)return!0;switch(e){case"string":return typeof t=="string";case"number":return typeof t=="number"&&!isNaN(t);case"boolean":return typeof t=="boolean";case"date":return t instanceof Date||typeof t=="string"||typeof t=="number";default:return!0}},OM=(t,e,i,o,r,l,c)=>{const f=l.valueType==="json",p=(h,y,_)=>{if(!T_(_,y,f))throw new Fe(`Invalid value for operator '${h}' on attribute '${o}' in entity '${r}'. Expected ${y}, but received: ${typeof _}`,c)};switch(t){case"in":case"$in":if(!Array.isArray(e))throw new Fe(`Operator '${t}' for attribute '${o}' in entity '${r}' must be an array, but received: ${typeof e}`,c);for(const h of e)p(t,i,h);break;case"$not":case"$ne":case"$gt":case"$lt":case"$gte":case"$lte":p(t,i,e);break;case"$like":case"$ilike":if(p(t,"string",e),t==="$ilike"&&!l.isIndexed)throw new Fe(`Operator '${t}' can only be used with indexed attributes, but '${o}' in entity '${r}' is not indexed`,c);break;case"$isNull":p(t,"boolean",e);break;default:throw new Fe(`Unknown operator '${t}' for attribute '${o}' in entity '${r}'`,c)}},rs=(t,e,i,o,r)=>{const l=kM(i),c=i.valueType==="json";if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(c)return;const p=t;for(const[h,y]of Object.entries(p))OM(h,y,l,e,o,i,`${r}.${h}`)}else if(!T_(t,l,c))throw new Fe(`Invalid value for attribute '${e}' in entity '${o}'. Expected ${l}, but received: ${typeof t}`,r)},qM=(t,e,i,o,r)=>{const l=t.split(".");if(l.length<2)throw new Fe(`Invalid dot notation path '${t}'. Must contain at least one dot.`,r);let c=i;for(let y=0;y<l.length-1;y++){const _=l[y],T=o.entities[c];if(!T)throw new Fe(`Entity '${c}' does not exist in schema while traversing dot notation path '${t}'.`,r);const C=T.links[_];if(!C){const b=Object.keys(T.links);throw new Fe(`Link '${_}' does not exist on entity '${c}' in dot notation path '${t}'. Available links: ${b.length>0?b.join(", "):"none"}`,r)}c=C.entityName}const f=l[l.length-1],p=o.entities[c];if(!p)throw new Fe(`Target entity '${c}' does not exist in schema for dot notation path '${t}'.`,r);if(f==="id"){if(typeof e=="string"&&!fs(e))throw new Fe(`Invalid value for id field in entity '${c}'. Expected a UUID, but received: ${e}`,r);rs(e,t,new Xn("string",!1,!0),i,r);return}const h=p.attrs[f];if(Object.keys(p.links).includes(f)){if(typeof e=="string"&&!fs(e))throw new Fe(`Invalid value for link '${f}' in entity '${c}'. Expected a UUID, but received: ${e}`,r);rs(e,t,new Xn("string",!1,!0),i,r);return}if(!h){const y=Object.keys(p.attrs);throw new Fe(`Attribute '${f}' does not exist on entity '${c}' in dot notation path '${t}'. Available attributes: ${y.length>0?y.join(", ")+", id":"id"}`,r)}rs(e,t,h,i,r)},S_=(t,e,i,o)=>{for(const[r,l]of Object.entries(t)){if(r==="or"||r==="and"){if(Array.isArray(l))for(const h of l)typeof h=="object"&&h!==null&&S_(h,e,i,`${o}.${r}[${h}]`);continue}if(r==="id"){rs(l,"id",new Xn("string",!1,!0),e,`${o}.id`);continue}if(r.includes(".")){qM(r,l,e,i,`${o}.${r}`);continue}const c=i.entities[e];if(!c)continue;const f=c.attrs[r],p=c.links[r];if(!f&&!p){const h=Object.keys(c.attrs),y=Object.keys(c.links);throw new Fe(`Attribute or link '${r}' does not exist on entity '${e}'. Available attributes: ${h.length>0?h.join(", "):"none"}. Available links: ${y.length>0?y.join(", "):"none"}`,`${o}.${r}`)}if(f)rs(l,r,f,e,`${o}.${r}`);else if(p){if(typeof l=="string"&&!fs(l))throw new Fe(`Invalid value for link '${r}' in entity '${e}'. Expected a UUID, but received: ${l}`,`${o}.${r}`);const h=new Xn("string",!1,!0);rs(l,r,h,e,`${o}.${r}`)}}},GM=(t,e,i,o,r=0)=>{for(const c of Object.keys(t))if(!Ry.includes(c))throw new Fe(`Invalid query parameter '${c}' in $ object. Valid parameters are: ${Ry.join(", ")}. Found: ${c}`,o);const l=["offset","before","after","first","last"];for(const c of l)if(t[c]!==void 0&&r>0)throw new Fe(`'${c}' can only be used on top-level namespaces. It cannot be used in nested queries.`,o);if(t.where&&i){if(typeof t.where!="object"||t.where===null)throw new Fe(`'where' clause must be an object in entity '${e}', but received: ${typeof t.where}`,o?`${o}.where`:void 0);S_(t.where,e,i,o?`${o}.where`:"where")}},E_=(t,e,i,o,r=0)=>{var l;if(!t||typeof t!="object")throw new Fe(`Query part for entity '${e}' must be an object, but received: ${typeof t}`,o);for(const c of Object.keys(t))if(c!=="$"){if(i&&!(c in i.entities[e].links)){const p=Object.keys(i.entities[e].links);throw new Fe(`Link '${c}' does not exist on entity '${e}'. Available links: ${p.length>0?p.join(", "):"none"}`,`${o}.${c}`)}const f=t[c];if(typeof f=="object"&&f!==null){const p=(l=i?.entities[e].links[c])===null||l===void 0?void 0:l.entityName;p&&E_(f,p,i,`${o}.${c}`,r+1)}}else{const f=t[c];if(typeof f!="object"||f===null)throw new Fe(`Query parameter '$' must be an object in entity '${e}', but received: ${typeof f}`,`${o}.$`);GM(f,e,i,`${o}.$`,r)}},Ny=(t,e)=>{if(typeof t!="object"||t===null)throw new Fe(`Query must be an object, but received: ${typeof t}${t===null?" (null)":""}`);if(Array.isArray(t))throw new Fe(`Query must be an object, but received: ${typeof t}`);const i=t;for(const o of Object.keys(i)){if(Array.isArray(t[o]))throw new Fe(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(typeof o!="string")throw new Fe(`Query keys must be strings, but found key of type: ${typeof o}`,o);if(o!=="$$ruleParams"){if(e&&!e.entities[o]){const r=Object.keys(e.entities);throw new Fe(`Entity '${o}' does not exist in schema. Available entities: ${r.length>0?r.join(", "):"none"}`,o)}E_(i[o],o,e,o,0)}}},xy=t=>typeof t!="string"?!1:Dl(t)?!0:fs(t);class ln extends Error{constructor(e){super(e),this.name="TransactionValidationError"}}const C_=t=>t.length>0?t.join(", "):"none",HM=(t,e)=>new ln(`Entity '${t}' does not exist in schema. Available entities: ${C_(e)}`),Iy={string:t=>typeof t=="string",number:t=>typeof t=="number"&&!isNaN(t),boolean:t=>typeof t=="boolean",date:t=>t instanceof Date||typeof t=="string"||typeof t=="number",json:()=>!0},VM=(t,e)=>{var i,o;return t==null?!0:(o=(i=Iy[e.valueType])===null||i===void 0?void 0:i.call(Iy,t))!==null&&o!==void 0?o:!1},A_=(t,e)=>{const i=e.entities[t];if(!i)throw HM(t,Object.keys(e.entities));return i},Cf=(t,e,i)=>{const o=A_(t,i);if(typeof e!="object"||e===null)throw new ln(`Arguments for data operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(r==="id")continue;const c=o.attrs[r];if(c&&!VM(l,c))throw new ln(`Invalid value for attribute '${r}' in entity '${t}'. Expected ${c.valueType}, but received: ${typeof l}`)}},Dy=(t,e,i)=>{const o=A_(t,i);if(typeof e!="object"||e===null)throw new ln(`Arguments for link operation on entity '${t}' must be an object, but received: ${typeof e}`);for(const[r,l]of Object.entries(e)){if(!o.links[r]){const f=Object.keys(o.links);throw new ln(`Link '${r}' does not exist on entity '${t}'. Available links: ${C_(f)}`)}if(l!=null){if(Array.isArray(l)){for(const f of l)if(!xy(f))throw new ln(`Invalid entity ID in link '${r}' for entity '${t}'. Expected a UUID or a lookup, but received: ${f}`)}else if(!xy(l))throw new ln(`Invalid UUID in link '${r}' for entity '${t}'. Expected a UUID, but received: ${l}`)}}},zM={create:Cf,update:Cf,merge:Cf,link:Dy,unlink:Dy,delete:()=>{}},BM=(t,e)=>{if(!e)return;const[i,o,r,l]=t;if(!Array.isArray(r)&&!fs(r))throw new ln(`Invalid id for entity '${o}'. Expected a UUID, but received: ${r}`);if(typeof o!="string")throw new ln(`Entity name must be a string, but received: ${typeof o}`);const c=zM[i];c&&l!==void 0&&c(o,l,e)},FM=(t,e)=>{const i=Array.isArray(t)?t:[t];for(const o of i){if(!o||typeof o!="object")throw new ln(`Transaction chunk must be an object, but received: ${typeof o}`);if(!Array.isArray(o.__ops))throw new ln(`Transaction chunk must have __ops array, but received: ${typeof o.__ops}`);for(const r of o.__ops){if(!Array.isArray(r))throw new ln(`Transaction operation must be an array, but received: ${typeof r}`);BM(r,e)}}};var Uy=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};let b_=0;class Py{constructor(e){this.type="ws",this.id=`${this.type}_${b_++}`,this.conn=new WebSocket(e),this.conn.onopen=i=>{this.onopen&&this.onopen({target:this})},this.conn.onmessage=i=>{this.onmessage&&this.onmessage({target:this,message:JSON.parse(i.data.toString())})},this.conn.onclose=i=>{this.onclose&&this.onclose({target:this})},this.conn.onerror=i=>{this.onerror&&this.onerror({target:this})}}close(){this.conn.close()}isOpen(){var e;return this.conn.readyState===((e=WebSocket.OPEN)!==null&&e!==void 0?e:1)}isConnecting(){var e;return this.conn.readyState===((e=WebSocket.CONNECTING)!==null&&e!==void 0?e:0)}send(e){return this.conn.send(JSON.stringify(e))}}class $M{constructor(e,i){this.type="sse",this.initParams=null,this.sendQueue=[],this.closeFired=!1,this.sseInitTimeout=void 0,this.id=`${this.type}_${b_++}`,this.url=i,this.ES=e,this.conn=new e(i),this.sseInitTimeout=setTimeout(()=>{this.initParams||this.handleError()},1e4),this.conn.onmessage=o=>{const r=JSON.parse(o.data);if(r.op==="sse-init"){this.initParams={machineId:r["machine-id"],sessionId:r["session-id"],sseToken:r["sse-token"]},this.onopen&&this.onopen({target:this}),clearTimeout(this.sseInitTimeout);return}this.onmessage&&this.onmessage({target:this,message:r})},this.conn.onerror=o=>{this.handleError()}}handleError(){try{this.onerror&&this.onerror({target:this})}finally{this.handleClose()}}handleClose(){this.conn.close(),this.onclose&&!this.closeFired&&(this.closeFired=!0,this.onclose({target:this}))}postMessages(e){return Uy(this,void 0,void 0,function*(){var i,o,r;try{(yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({machine_id:(i=this.initParams)===null||i===void 0?void 0:i.machineId,session_id:(o=this.initParams)===null||o===void 0?void 0:o.sessionId,sse_token:(r=this.initParams)===null||r===void 0?void 0:r.sseToken,messages:e})})).ok||this.handleError()}catch{this.handleError()}})}flushQueue(){return Uy(this,void 0,void 0,function*(){if(this.sendPromise||!this.sendQueue.length)return;const e=this.sendQueue;this.sendQueue=[];const i=this.postMessages(e);this.sendPromise=i,i.then(()=>{this.sendPromise=null,this.flushQueue()})})}send(e){if(!this.isOpen()||!this.initParams)throw this.isConnecting()?new Error("Failed to execute 'send' on 'EventSource': Still in CONNECTING state."):this.conn.readyState===this.ES.CLOSED?new Error("EventSource is already in CLOSING or CLOSED state."):new Error("EventSource is in invalid state.");this.sendQueue.push(e),this.flushQueue()}isOpen(){return this.conn.readyState===this.ES.OPEN&&this.initParams!==null}isConnecting(){return this.conn.readyState===this.ES.CONNECTING||this.conn.readyState===this.ES.OPEN&&this.initParams===null}close(){this.handleClose()}}var Ly=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};function YM(t,e){const i=t.values;if(i)for(const o of i.entities||[])o.store.useDateObjects=e,o.store.attrs=i.attrs,o.store=W0(o.store);return t}function JM(t,e){var i,o;if(!((i=e.values)===null||i===void 0)&&i.entities){const r=[];for(const l of(o=e.values)===null||o===void 0?void 0:o.entities){const c=Z0(l.store);delete c.attrs,r.push(Object.assign(Object.assign({},l),{store:c}))}return Object.assign(Object.assign({},e),{values:Object.assign(Object.assign({},e.values),{entities:r})})}else return e}function KM(t,e,i){var o,r;const l=(o=e?.state)===null||o===void 0?void 0:o.txId,c=(r=i?.state)===null||r===void 0?void 0:r.txId;return l&&(!c||l>c)?e:c&&(!l||c>l)?i:e||i}function Af(t,e){return f_({store:e,pageInfo:null,aggregate:null},t.query).data[t.table][0]}function ky(t,e,i){var o;const r=(o=Di(e,t.table,"id"))===null||o===void 0?void 0:o.id;if(!r)return-1;const l=ys(e.eav,[i,r,i]);return l?l[3]:-1}function Oy(t,e){for(const{action:i,triple:o}of e)switch(i){case"added":t_(t,o);break;case"removed":j0(t,o);break}}function QM(t,e){var i,o,r,l;const c={};for(const{action:f,triple:p}of e){const[h,y,_]=p,T=(o=(i=t.attrs[y])===null||i===void 0?void 0:i["forward-identity"])===null||o===void 0?void 0:o[2];if(!T)continue;const C=(r=c[h])!==null&&r!==void 0?r:{};c[h]=C;const b=(l=C[T])!==null&&l!==void 0?l:{};switch(C[T]=b,f){case"added":b.newValue=_;break;case"removed":b.oldValue===void 0&&(b.oldValue=_);break}}for(const f of Object.keys(c)){const{oldValue:p,newValue:h}=c[f];p===h&&delete c[f]}return c}function gl(t,e){return{[t.table]:e.map(i=>i.entity)}}function XM(t,e){var i;if(t.orderFieldType)return t.orderFieldType;const o=t.orderField==="serverCreatedAt"?"number":(i=Di(e([]),t.table,t.orderField))===null||i===void 0?void 0:i["checked-data-type"];return t.orderFieldType=o,o}function ZM(t,e,i){const o=e;if(t.orderField==="serverCreatedAt"){i.sort(t.orderDirection==="asc"?function(c,f){return Ar(c.entity.id,c.serverCreatedAt,f.entity.id,f.serverCreatedAt,o)}:function(c,f){return Ar(f.entity.id,f.serverCreatedAt,c.entity.id,c.serverCreatedAt,o)});return}const r=t.orderField;i.sort(t.orderDirection==="asc"?function(c,f){return Ar(c.entity.id,c.entity[r],f.entity.id,f.entity[r],o)}:function(c,f){return Ar(f.entity.id,f.entity[r],c.entity.id,c.entity[r],o)})}var to;(function(t){t.InitialSyncBatch="InitialSyncBatch",t.InitialSyncComplete="InitialSyncComplete",t.LoadFromStorage="LoadFromStorage",t.SyncTransaction="SyncTransaction",t.Error="Error"})(to||(to={}));class WM{constructor(e,i,o,r,l){this.callbacks={},this.idToHash={},this.trySend=e,this.config=o,this.log=r,this.createStore=l,this.subs=new Jf({persister:i,merge:KM,serialize:JM,parse:(c,f)=>YM(f,this.config.useDateObjects),objectSize:c=>{var f;return((f=c.values)===null||f===void 0?void 0:f.entities.length)||0},logger:r,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}})}beforeUnload(){this.subs.flush()}subscribe(e,i){const o=Tt(e);return this.callbacks[o]=this.callbacks[o]||[],this.callbacks[o].push(i),this.initSubscription(e,o,i),r=>{this.unsubscribe(o,i,r?.keepSubscription)}}unsubscribe(e,i,o){const r=(this.callbacks[e]||[]).filter(l=>l!==i);if(this.callbacks[e]=r,!r.length){delete this.callbacks[e];const l=this.subs.currentValue[e];l?.state&&this.clearSubscriptionData(l.state.subscriptionId,!!o),o||this.subs.updateInPlace(c=>{delete c[e]})}}sendStart(e){this.trySend(dt(),{op:"start-sync",q:e})}sendResync(e,i,o){this.idToHash[i.subscriptionId]=e.hash,this.trySend(i.subscriptionId,{op:"resync-table","subscription-id":i.subscriptionId,"tx-id":o,token:i.token})}sendRemove(e,i){this.trySend(dt(),{op:"remove-sync","subscription-id":e.subscriptionId,"keep-subscription":i})}initSubscription(e,i,o){return Ly(this,void 0,void 0,function*(){var r,l,c,f;yield this.subs.waitForKeyToLoad(i);const p=this.subs.currentValue[i];if(p&&p.state&&p.state.txId){this.sendResync(p,p.state,p.state.txId),!((r=p.values)===null||r===void 0)&&r.entities&&o&&o({type:to.LoadFromStorage,data:gl(p,(l=p.values)===null||l===void 0?void 0:l.entities)});return}const h=Object.keys(e)[0],y=((f=(c=e[h])===null||c===void 0?void 0:c.$)===null||f===void 0?void 0:f.order)||{serverCreatedAt:"asc"},[_,T]=Object.entries(y)[0];this.subs.updateInPlace(C=>{C[i]={query:e,hash:i,table:h,orderDirection:T,orderField:_,createdAt:Date.now(),updatedAt:Date.now()}}),this.sendStart(e)})}flushPending(){return Ly(this,void 0,void 0,function*(){for(const e of Object.keys(this.callbacks)){yield this.subs.waitForKeyToLoad(e);const i=this.subs.currentValue[e];i?yield this.initSubscription(i.query,i.hash):this.log.error("Missing sub for hash in flushPending",e)}})}onStartSyncOk(e){const i=e["subscription-id"],o=e.q,r=Tt(o);this.idToHash[i]=r,this.subs.updateInPlace(l=>{const c=l[r];if(!c)return this.log.error("Missing sub for hash",r,"subscription-id",i,"query",o),l;c.state={subscriptionId:i,token:e.token}})}notifyCbs(e,i){for(const o of this.callbacks[e]||[])o(i)}onSyncLoadBatch(e){var i;const o=e["subscription-id"],r=e["join-rows"],l=this.idToHash[o];if(!l){this.log.error("Missing hash for subscription",e);return}const c=[],f=this.subs.currentValue[l];if(!f){this.log.error("Missing sub for hash",l,e);return}const p=(i=f.values)!==null&&i!==void 0?i:{entities:[],attrs:this.createStore([]).attrs};f.values=p;const h=p.entities;for(const y of r){const _=this.createStore(y);p.attrs=_.attrs;const T=Af(f,_);h.push({store:_,entity:T,serverCreatedAt:ky(f,_,T.id)}),c.push(T)}this.subs.updateInPlace(y=>{y[l]=f,y[l].updatedAt=Date.now()}),f.values&&this.notifyCbs(l,{type:to.InitialSyncBatch,data:gl(f,f.values.entities),batch:c})}onSyncInitFinish(e){var i;const o=e["subscription-id"],r=this.idToHash[o];if(!r){this.log.error("Missing hash for subscription",e);return}this.subs.updateInPlace(c=>{const f=c[r];if(!f){this.log.error("Missing sub for hash",r,e);return}const p=f.state;if(!p)return this.log.error("Sub never set init, missing result",f,e),c;p.txId=e["tx-id"],f.updatedAt=Date.now()});const l=this.subs.currentValue[r];l&&this.notifyCbs(r,{type:to.InitialSyncComplete,data:gl(l,((i=l.values)===null||i===void 0?void 0:i.entities)||[])})}onSyncUpdateTriples(e){var i,o,r;const l=e["subscription-id"],c=this.idToHash[l];if(!c){this.log.error("Missing hash for subscription",e);return}const f=this.subs.currentValue[c];if(!f){this.log.error("Missing sub for hash",c,e);return}const p=f.state;if(!p){this.log.error("Missing state for sub",f,e);return}for(const h of e.txes){if(p.txId&&p.txId>=h["tx-id"])continue;p.txId=h["tx-id"];const y=[],_={};for(const D of h.changes){const P=(i=_[D.triple[0]])!==null&&i!==void 0?i:[];_[D.triple[0]]=P,P.push(D)}const T=(o=f.values)!==null&&o!==void 0?o:{entities:[],attrs:this.createStore([]).attrs},C=T.entities;f.values=T;const b=[];e:for(const[D,P]of Object.entries(_))for(let J=0;J<C.length;J++){const B=C[J];if(IA(B.store,D)){Oy(B.store,P);const W=Af(f,B.store),Q=QM(B.store,P)[D];W?(b.push({oldEntity:B.entity,newEntity:W,changedFields:Q||{}}),B.entity=W):y.push(J),delete _[D];continue e}}const M=[];for(const[D,P]of Object.entries(_)){const J=this.createStore([]);T.attrs=J.attrs,Oy(J,P);const B=Af(f,J);if(!B){this.log.error("No entity found after applying change",{sub:f,changes:P,store:J});continue}C.push({store:J,entity:B,serverCreatedAt:ky(f,J,B.id)}),M.push(B)}const w=[];for(const D of y.sort().reverse())w.push(C[D].entity),C.splice(D,1);const R=XM(f,this.createStore);ZM(f,R,C),this.notifyCbs(c,{type:to.SyncTransaction,data:gl(f,(r=f.values)===null||r===void 0?void 0:r.entities),added:M,removed:w,updated:b})}this.subs.updateInPlace(h=>{h[c]=f,h[c].updatedAt=Date.now()})}clearSubscriptionData(e,i){const o=this.idToHash[e];if(o){delete this.idToHash[e];const r=this.subs.currentValue[o];if(r.state&&this.sendRemove(r.state,i),i?this.subs.unloadKey(o):this.subs.updateInPlace(l=>{delete l[o]}),r)return r}}onStartSyncError(e){const i=Tt(e["original-event"].q),o={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa.",status:e.status,type:e.type,hint:e.hint},r=Object.keys(e["original-event"].q)[0];this.notifyCbs(i,{type:to.Error,data:{[r]:[]},error:o})}onResyncError(e){const i=e["original-event"]["subscription-id"],o=this.clearSubscriptionData(i,!1);o&&this.initSubscription(o.query,o.hash)}}var rt=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})},jM=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]]);return i};const Yn={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},ew=3e4,tw=3e4,nw=200,iw={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},bf="_instant_oauth_redirect",_r="currentUser";function ow({transportType:t,appId:e,apiURI:i,wsURI:o,EventSourceImpl:r}){if(!r)return new Py(`${o}?app_id=${e}`);switch(t){case"ws":return new Py(`${o}?app_id=${e}`);case"sse":return new $M(r,`${i}/runtime/sse?app_id=${e}`);default:throw new Error("Unknown transport type "+t)}}function sw(){return typeof window<"u"||typeof chrome<"u"}const qy={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function rw(t,e){var i;const o=typeof t=="string"?JSON.parse(t):t;if(!((i=o?.result)===null||i===void 0)&&i.store){const r=o.result.store;o.result.store=W0(Object.assign(Object.assign({},r),{useDateObjects:e}))}return o}function aw(t,e){var i;const o=Object.assign({},e);return!((i=e.result)===null||i===void 0)&&i.store&&(o.result=Object.assign(Object.assign({},e.result),{store:Z0(e.result.store)})),o}function lw(t,e){switch(t){case"pendingMutations":return new Map(typeof e=="string"?JSON.parse(e):e);default:return e}}function uw(t,e){switch(t){case"pendingMutations":return[...e.entries()];default:return e}}function cw(t,e,i){const o=e?.result,r=i?.result;return o&&!r&&i&&(i.result=o),i||e}function Gy(t){return[...t].sort((e,i)=>{const[o,r]=e,[l,c]=i,f=r.order||0,p=c.order||0;return f==p?o<l?-1:o>l?1:0:f-p})}class fw{constructor(e,i=m_,o=g_,r,l){var c,f,p;if(this._isOnline=!0,this._isShutdown=!1,this.status=Yn.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._transportType="ws",this._wsOk=null,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._inFlightMutationEventIds=new Set,this._onMergeKv=(h,y,_)=>{var T,C;switch(h){case"pendingMutations":{const b=(T=y?.entries())!==null&&T!==void 0?T:[],M=(C=_?.entries())!==null&&C!==void 0?C:[],w=new Map([...b,...M]);return(y?this._rewriteMutationsSorted(this.attrs,y):[]).forEach(([D,P])=>{var J;!(!((J=_?.pendingMutations)===null||J===void 0)&&J.has(D))&&!P["tx-id"]&&this._sendMutation(D,P)}),w}default:return _||y}},this.getPreviousResult=h=>{const y=Tt(h);return this.dataForQuery(y)},this.notifyOne=h=>{var y,_;const T=(y=this.queryCbs[h])!==null&&y!==void 0?y:[],C=(_=this._dataForQueryCache[h])===null||_===void 0?void 0:_.data,b=this.dataForQuery(h);b&&(El(b,C)||T.forEach(M=>M.cb(b)))},this.notifyOneQueryOnce=h=>{var y;const _=(y=this.queryOnceDfds[h])!==null&&y!==void 0?y:[],T=this.dataForQuery(h);_.forEach(C=>{this._completeQueryOnce(C.q,h,C.dfd),C.dfd.resolve(T)})},this.notifyQueryError=(h,y)=>{(this.queryCbs[h]||[]).forEach(T=>T.cb({error:y}))},this.pushTx=h=>{this.config.disableValidation||FM(h,this.config.schema);try{const y=dM({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(_=>{var T;return(T=_?.result)===null||T===void 0?void 0:T.store}),useDateObjects:this.config.useDateObjects},h);return this.pushOps(y)}catch(y){return this.pushOps([],y)}},this.pushOps=(h,y)=>{const _=dt(),T=[...this._pendingMutations().values()],C=Math.max(0,...T.map(w=>w.order||0))+1,b={op:"transact","tx-steps":h,created:Date.now(),error:y,order:C};this._updatePendingMutations(w=>{w.set(_,b)});const M=new by;return this.mutationDeferredStore.set(_,M),this._sendMutation(_,b),this.notifyAll(),M.promise},this._transportOnOpen=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][open]",y.id,"skip; this is no longer the current transport");return}this._log.info("[socket][open]",this._transport.id),this._setStatus(Yn.OPENED),this.getCurrentUser().then(_=>{var T;this._trySend(dt(),{op:"init","app-id":this.config.appId,"refresh-token":(T=_.user)===null||T===void 0?void 0:T.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(_=>{this._log.error("[socket][error]",y.id,_)})},this._transportOnMessage=h=>{const y=h.target,_=h.message;if(this._transport!==y){this._log.info("[socket][message]",y.id,_,"skip; this is no longer the current transport");return}!this._wsOk&&y.type==="ws"&&(this._wsOk=!0),this._transportType="ws",this._handleReceive(y.id,h.message)},this._transportOnError=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][error]",y.id,"skip; this is no longer the current transport");return}this._log.error("[socket][error]",y.id,h)},this._scheduleReconnect=()=>{!this._wsOk&&this._transportType!=="sse"&&(this._transportType="sse",this._reconnectTimeoutMs=0),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",this._transport.id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this._transportOnClose=h=>{const y=h.target;if(this._transport!==y){this._log.info("[socket][close]",y.id,"skip; this is no longer the current transport");return}this._setStatus(Yn.CLOSED);for(const _ of Object.values(this._rooms))_.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",y.id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",y.id,"schedule reconnect, ms =",this._reconnectTimeoutMs),this._scheduleReconnect()},this._EventSource=l,this.config=Object.assign(Object.assign({},iw),e),this.queryCacheLimit=(c=this.config.queryCacheLimit)!==null&&c!==void 0?c:10,this._pendingTxCleanupTimeout=(f=this.config.pendingTxCleanupTimeout)!==null&&f!==void 0?f:tw,this._pendingMutationCleanupThreshold=(p=this.config.pendingMutationCleanupThreshold)!==null&&p!==void 0?p:nw,this._log=LM(e.verbose||Ld||y_,()=>this._reactorStats()),this.versions=Object.assign(Object.assign({},r||{}),{"@instantdb/core":kd}),this.config.schema&&(this._linkIndex=wy(this.config.schema)),!!sw()){if(!e.appId)throw new Error("Instant must be initialized with an appId.");if(!fs(e.appId))throw new Error(`Instant must be initialized with a valid appId. \`${e.appId}\` is not a valid uuid.`);typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",h=>rt(this,void 0,void 0,function*(){var y;try{if(((y=h.data)===null||y===void 0?void 0:y.type)==="auth"){const _=yield this.getCurrentUser();this.updateUser(_.user)}}catch(_){this._log.error("[error] handle broadcast channel",_)}}))),this._initStorage(i),this._syncTable=new WM(this._trySendAuthed.bind(this),new i(this.config.appId,"syncSubs"),{useDateObjects:this.config.useDateObjects},this._log,h=>Cl(this.attrs,h,this.config.enableCardinalityInference,this._linkIndex,this.config.useDateObjects)),this._oauthCallbackResponse=this._oauthLoginInit(),this.getCurrentUser(),o.getIsOnline().then(h=>{this._isOnline=h,this._startSocket(),o.listen(y=>{y!==this._isOnline&&(this._log.info("[network] online =",y),this._isOnline=y,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Yn.CLOSED),this._setStatus(Yn.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload))}}updateSchema(e){this.config=Object.assign(Object.assign({},this.config),{schema:e,cardinalityInference:!!e}),this._linkIndex=e?wy(this.config.schema):null}_reactorStats(){return{inFlightMutationCount:this._inFlightMutationEventIds.size,pendingMutationCount:this._pendingMutations().size,transportType:this._transportType}}_onQuerySubLoaded(e){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyOne(e))}_initStorage(e){this.querySubs=new Jf({persister:new e(this.config.appId,"querySubs"),merge:cw,serialize:aw,parse:(i,o)=>rw(o,this.config.useDateObjects),objectSize:i=>{var o,r,l,c;return(c=(l=(r=(o=i.result)===null||o===void 0?void 0:o.store)===null||r===void 0?void 0:r.triples)===null||l===void 0?void 0:l.length)!==null&&c!==void 0?c:0},logger:this._log,preloadEntryCount:10,gc:{maxAgeMs:1e3*60*60*24*7*52,maxEntries:1e3,maxSize:1e6}}),this.querySubs.onKeyLoaded=i=>this._onQuerySubLoaded(i),this.kv=new Jf({persister:new e(this.config.appId,"kv"),merge:this._onMergeKv,serialize:uw,parse:lw,objectSize:()=>0,logger:this._log,saveThrottleMs:100,idleCallbackMaxWaitMs:100,gc:null}),this.kv.onKeyLoaded=i=>{i==="pendingMutations"&&this.notifyAll()},this.kv.waitForKeyToLoad("pendingMutations"),this.kv.waitForKeyToLoad(_r),this._beforeUnloadCbs.push(()=>{this.kv.flush(),this.querySubs.flush()})}_beforeUnload(){for(const e of this._beforeUnloadCbs)e();this._syncTable.beforeUnload()}_finishTransaction(e,i,o){const r=this.mutationDeferredStore.get(i);this.mutationDeferredStore.delete(i);const l=e!=="error"&&e!=="timeout";if(!r&&!l&&console.error("Mutation failed",Object.assign({status:e,eventId:i},o)),!!r)if(l)r.resolve({status:e,eventId:i});else if(o?.type){const{status:c}=o,f=jM(o,["status"]);r.reject(new Fl({body:f,status:c??0}))}else r.reject(new hs(o?.message||"Unknown error",o?.hint))}_setStatus(e,i){this.status=e,this._errorMessage=i,this.notifyConnectionStatusSubs(e)}_flushEnqueuedRoomData(e){var i,o;const r=(o=(i=this._presence[e])===null||i===void 0?void 0:i.result)===null||o===void 0?void 0:o.user,l=this._broadcastQueue[e];if(this._broadcastQueue[e]=[],r&&this._trySetPresence(e,r),l)for(const c of l){const{topic:f,roomType:p,data:h}=c;this._tryBroadcast(e,p,f,h)}}_handleReceive(e,i){var o,r,l,c,f,p;const h=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(qy[i.op]||this._log.info("[receive]",e,i.op,i),i.op){case"init-ok":{this._setStatus(Yn.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(i.attrs),this._flushPendingMessages(),this._sessionId=i["session-id"];for(const T of Object.keys(this._rooms)){const C=(r=(o=this._presence[T])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.user;this._tryJoinRoom(T,C)}break}case"add-query-exists":{this.notifyOneQueryOnce(Tt(i.q));break}case"add-query-ok":{const{q:T,result:C}=i,b=Tt(T);if(!this._hasQueryListeners()&&!this.querySubs.currentValue[b])break;const M=(c=(l=C?.[0])===null||l===void 0?void 0:l.data)===null||c===void 0?void 0:c["page-info"],w=(p=(f=C?.[0])===null||f===void 0?void 0:f.data)===null||p===void 0?void 0:p.aggregate,R=My(C),D=Cl(this.attrs,R,h,this._linkIndex,this.config.useDateObjects);this.querySubs.updateInPlace(P=>{if(!P[b]){this._log.info("Missing value in querySubs",{hash:b,q:T});return}P[b].result={store:D,pageInfo:M,aggregate:w,processedTxId:i["processed-tx-id"]}}),this._cleanupPendingMutationsQueries(),this.notifyOne(b),this.notifyOneQueryOnce(b),this._cleanupPendingMutationsTimeout();break}case"start-sync-ok":{this._syncTable.onStartSyncOk(i);break}case"sync-load-batch":{this._syncTable.onSyncLoadBatch(i);break}case"sync-init-finish":{this._syncTable.onSyncInitFinish(i);break}case"sync-update-triples":{this._syncTable.onSyncUpdateTriples(i);break}case"refresh-ok":{const{computations:T,attrs:C}=i,b=i["processed-tx-id"];C&&this._setAttrs(C),this._cleanupPendingMutationsTimeout();const M=this._rewriteMutations(this.attrs,this._pendingMutations(),b);M!==this._pendingMutations()&&this.kv.updateInPlace(D=>{D.pendingMutations=M});const w=Gy(M.entries()),R=T.map(D=>{var P,J,B,W;const Q=D["instaql-query"],re=D["instaql-result"],ee=Tt(Q),le=My(re),pe=Cl(this.attrs,le,h,this._linkIndex,this.config.useDateObjects),oe=this._applyOptimisticUpdates(pe,w,b),Ae=(J=(P=re?.[0])===null||P===void 0?void 0:P.data)===null||J===void 0?void 0:J["page-info"],Je=(W=(B=re?.[0])===null||B===void 0?void 0:B.data)===null||W===void 0?void 0:W.aggregate;return{q:Q,hash:ee,store:oe,pageInfo:Ae,aggregate:Je}});R.forEach(({hash:D,q:P,store:J,pageInfo:B,aggregate:W})=>{this.querySubs.updateInPlace(Q=>{if(!Q[D]){this._log.error("Missing value in querySubs",{hash:D,q:P});return}Q[D].result={store:J,pageInfo:B,aggregate:W,processedTxId:b}})}),this._cleanupPendingMutationsQueries(),R.forEach(({hash:D})=>{this.notifyOne(D)});break}case"transact-ok":{const{"client-event-id":T,"tx-id":C}=i;this._inFlightMutationEventIds.delete(T);const M=this._rewriteMutations(this.attrs,this._pendingMutations()).get(T);if(!M)break;this._updatePendingMutations(R=>{R.set(T,Object.assign(Object.assign({},R.get(T)),{"tx-id":C,confirmed:Date.now()}))});const w=M["tx-steps"].filter(([R,...D])=>R==="add-attr").map(([R,D])=>D).concat(Object.values(this.attrs));this._setAttrs(w),this._finishTransaction("synced",T),this._cleanupPendingMutationsTimeout();break}case"patch-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._patchPresencePeers(T,i.edits),this._notifyPresenceSubs(T);break}case"refresh-presence":{const T=i["room-id"];this._trySetRoomConnected(T,!0),this._setPresencePeers(T,i.data),this._notifyPresenceSubs(T);break}case"server-broadcast":{const T=i["room-id"],C=i.topic;this._trySetRoomConnected(T,!0),this._notifyBroadcastSubs(T,C,i);break}case"join-room-ok":{const T=i["room-id"];if(!this._rooms[T]){this._roomsPendingLeave[T]&&(this._tryLeaveRoom(T),delete this._roomsPendingLeave[T]);break}this._trySetRoomConnected(T,!0),this._flushEnqueuedRoomData(T);break}case"leave-room-ok":{const T=i["room-id"];this._trySetRoomConnected(T,!1);break}case"join-room-error":const y=i["room-id"],_=this._rooms[y];_&&(_.error=i.error),this._notifyPresenceSubs(y);break;case"error":this._handleReceiveError(i);break;default:this._log.info("Uknown op",i.op,i);break}}_pendingMutations(){var e;return(e=this.kv.currentValue.pendingMutations)!==null&&e!==void 0?e:new Map}_updatePendingMutations(e){this.kv.updateInPlace(i=>{var o;const r=(o=i.pendingMutations)!==null&&o!==void 0?o:new Map;i.pendingMutations=r,e(r)})}_handleMutationError(e,i,o){const r=this._pendingMutations().get(i);if(r&&(e!=="timeout"||!r["tx-id"])){this._updatePendingMutations(c=>(c.delete(i),c)),this._inFlightMutationEventIds.delete(i);const l={message:o.message,hint:o.hint};this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(l),this._finishTransaction(e,i,o)}}_handleReceiveError(e){var i,o,r,l,c,f,p;console.log("error",e);const h=e["client-event-id"];this._inFlightMutationEventIds.delete(h);const y=this._pendingMutations().get(h),_={message:e.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(e.hint&&(_.hint=e.hint),y){this._handleMutationError("error",h,e);return}if(!((i=e["original-event"])===null||i===void 0)&&i.hasOwnProperty("q")&&((o=e["original-event"])===null||o===void 0?void 0:o.op)==="add-query"){const b=(r=e["original-event"])===null||r===void 0?void 0:r.q,M=Tt(b);this.notifyQueryError(Tt(b),_),this.notifyQueryOnceError(b,M,h,_);return}if(((l=e["original-event"])===null||l===void 0?void 0:l.op)==="init"){if(e.type==="record-not-found"&&((c=e.hint)===null||c===void 0?void 0:c["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Yn.ERRORED,_),this.notifyAll();return}if(((f=e["original-event"])===null||f===void 0?void 0:f.op)==="resync-table"){this._syncTable.onResyncError(e);return}if(((p=e["original-event"])===null||p===void 0?void 0:p.op)==="start-sync"){this._syncTable.onStartSyncError(e);return}const C=Object.assign({},e);delete C.message,delete C.hint,console.error(e.message,C),e.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,e.hint)}notifyQueryOnceError(e,i,o,r){var l;const c=(l=this.queryOnceDfds[i])===null||l===void 0?void 0:l.find(f=>f.eventId===o);c&&(c.dfd.reject(r),this._completeQueryOnce(e,i,c.dfd))}_setAttrs(e){this.attrs=e.reduce((i,o)=>(i[o.id]=o,i),{}),this.notifyAttrsSubs()}_startQuerySub(e,i){const o=dt();return this.querySubs.updateInPlace(r=>{r[i]=r[i]||{q:e,result:null,eventId:o},r[i].lastAccessed=Date.now()}),this._trySendAuthed(o,{op:"add-query",q:e}),o}subscribeTable(e,i){return this._syncTable.subscribe(e,i)}subscribeQuery(e,i,o){var r;this.config.disableValidation||Ny(e,this.config.schema),o&&"ruleParams"in o&&(e=Object.assign({$$ruleParams:o.ruleParams},e));const l=Tt(e),c=this.getPreviousResult(e);return c&&i(c),this.queryCbs[l]=(r=this.queryCbs[l])!==null&&r!==void 0?r:[],this.queryCbs[l].push({q:e,cb:i}),this._startQuerySub(e,l),()=>{this._unsubQuery(e,l,i)}}queryOnce(e,i){var o;this.config.disableValidation||Ny(e,this.config.schema),i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const r=new by;if(!this._isOnline)return r.reject(new Error("We can't run `queryOnce`, because the device is offline.")),r.promise;if(!this.querySubs)return r.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),r.promise;const l=Tt(e),c=this._startQuerySub(e,l);return this.queryOnceDfds[l]=(o=this.queryOnceDfds[l])!==null&&o!==void 0?o:[],this.queryOnceDfds[l].push({q:e,dfd:r,eventId:c}),setTimeout(()=>r.reject(new Error("Query timed out")),ew),r.promise}_completeQueryOnce(e,i,o){this.queryOnceDfds[i]&&(this.queryOnceDfds[i]=this.queryOnceDfds[i].filter(r=>r.dfd!==o),this._cleanupQuery(e,i))}_unsubQuery(e,i,o){this.queryCbs[i]&&(this.queryCbs[i]=this.queryCbs[i].filter(r=>r.cb!==o),this._cleanupQuery(e,i))}_hasQueryListeners(e){var i,o;return!!(!((i=this.queryCbs[e])===null||i===void 0)&&i.length||!((o=this.queryOnceDfds[e])===null||o===void 0)&&o.length)}_cleanupQuery(e,i){this._hasQueryListeners(i)||(delete this.queryCbs[i],delete this.queryOnceDfds[i],delete this._dataForQueryCache[i],this.querySubs.unloadKey(i),this._trySendAuthed(dt(),{op:"remove-query",q:e}))}_rewriteMutations(e,i,o){if(!e)return i;if(!i)return new Map;const r=y=>{const[_,T,C]=y["forward-identity"];return St(e,T,C)},l=y=>{const[_,T,C]=y["forward-identity"];return ao(e,T,C)},c={attrIdMap:{},refSwapAttrIds:new Set};let f=!1;const p=(y,_)=>{const T=[];for(const C of y){const[b]=C;if(b==="add-attr"){const[w,R]=C,D=r(R);if(D&&R.id!==D.id){c.attrIdMap[R.id]=D.id,f=!0;continue}if(R["value-type"]==="ref"){const P=l(R);if(P){c.attrIdMap[R.id]=P.id,c.refSwapAttrIds.add(R.id),f=!0;continue}}}if(o&&_&&o>=_&&b==="add-attr"||b==="update-attr"||b==="delete-attr"){f=!0;continue}const M=f?zb(c,C):C;T.push(M)}return f?T:y},h=new Map;for(const[y,_]of i.entries())h.set(y,Object.assign(Object.assign({},_),{"tx-steps":p(_["tx-steps"],_["tx-id"])}));return f?h:i}_rewriteMutationsSorted(e,i){return Gy(this._rewriteMutations(e,i).entries())}optimisticAttrs(){var e;const i=[...this._pendingMutations().values()].flatMap(f=>f["tx-steps"]),o=new Set(i.filter(([f,p])=>f==="delete-attr").map(([f,p])=>p)),r=[];for(const[f,p]of i)if(f==="add-attr")r.push(p);else if(f==="update-attr"&&p.id&&(!((e=this.attrs)===null||e===void 0)&&e[p.id])){const h=Object.assign(Object.assign({},this.attrs[p.id]),p);r.push(h)}const l=[...Object.values(this.attrs||{}),...r].filter(f=>!o.has(f.id));return Object.fromEntries(l.map(f=>[f.id,f]))}dataForQuery(e){const i=this._errorMessage;if(i)return{error:i};if(!this.querySubs||!this.kv.currentValue.pendingMutations)return;const o=this.querySubs.version(),r=this.querySubs.currentValue,l=this.kv.version(),c=this._pendingMutations(),{q:f,result:p}=r[e]||{};if(!p)return;const h=this._dataForQueryCache[e];if(h&&o===h.querySubVersion&&l===h.pendingMutationsVersion)return h.data;const{store:y,pageInfo:_,aggregate:T,processedTxId:C}=p,b=this._rewriteMutationsSorted(y.attrs,c),M=this._applyOptimisticUpdates(y,b,C),w=f_({store:M,pageInfo:_,aggregate:T},f);return this._dataForQueryCache[e]={querySubVersion:o,pendingMutationsVersion:l,data:w},w}_applyOptimisticUpdates(e,i,o){for(const[r,l]of i)(!l["tx-id"]||o&&l["tx-id"]>o)&&(e=BA(e,l["tx-steps"]));return e}notifyAll(){Object.keys(this.queryCbs).forEach(e=>{this.querySubs.waitForKeyToLoad(e).then(()=>this.notifyOne(e)).catch(()=>this.notifyOne(e))})}loadedNotifyAll(){this.kv.waitForKeyToLoad("pendingMutations").then(()=>this.notifyAll()).catch(()=>this.notifyAll())}shutdown(){var e;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(e=this._transport)===null||e===void 0||e.close()}_sendMutation(e,i){if(i.error){this._handleMutationError("error",e,{message:i.error.message});return}if(this.status!==Yn.AUTHENTICATED){this._finishTransaction("enqueued",e);return}const o=Math.max(6e3,Math.min(this._inFlightMutationEventIds.size+1,this._pendingMutations().size+1)*6e3);this._isOnline?(this._trySend(e,i),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",e,{message:"transaction timed out"})},o)):this._finishTransaction("enqueued",e)}_flushPendingMessages(){Object.keys(this.queryCbs).map(r=>this.querySubs.currentValue[r]).filter(r=>r).forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:r,q:l})=>{this._trySendAuthed(r,{op:"add-query",q:l})}),this._rewriteMutationsSorted(this.attrs,this._pendingMutations()).forEach(([r,l])=>{l["tx-id"]||this._sendMutation(r,l)}),this._syncTable.flushPending()}_cleanupPendingMutationsQueries(){let e=Number.MAX_SAFE_INTEGER;for(const{result:i}of Object.values(this.querySubs.currentValue))i?.processedTxId&&(e=Math.min(e,i?.processedTxId));this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r["tx-id"]&&r["tx-id"]<=e&&i.delete(o)})}_cleanupPendingMutationsTimeout(){if(this._pendingMutations().size<this._pendingMutationCleanupThreshold)return;const e=Date.now();this._updatePendingMutations(i=>{for(const[o,r]of Array.from(i.entries()))r.confirmed&&r.confirmed+this._pendingTxCleanupTimeout<e&&i.delete(o)})}_trySendAuthed(...e){this.status===Yn.AUTHENTICATED&&this._trySend(...e)}_trySend(e,i,o){if(this._transport.isOpen()){switch(qy[i.op]||this._log.info("[send]",this._transport.id,i.op,i),i.op){case"transact":{this._inFlightMutationEventIds.add(e);break}case"init":this._inFlightMutationEventIds.clear()}this._transport.send(Object.assign({"client-event-id":e},i))}}_startSocket(){if(this._wsOk=null,this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._transport&&this._transport.isConnecting()){this._log.info("[socket][start]",this._transport.id,"maintained as current transport, we were still in a connecting state");return}const e=this._transport;this._transport=ow({transportType:this._transportType,appId:this.config.appId,apiURI:this.config.apiURI,wsURI:this.config.websocketURI,EventSourceImpl:this._EventSource}),this._transport.onopen=this._transportOnOpen,this._transport.onmessage=this._transportOnMessage,this._transport.onclose=this._transportOnClose,this._transport.onerror=this._transportOnError,this._log.info("[socket][start]",this._transport.id),e?.isOpen()&&(this._log.info("[socket][start]",this._transport.id,"close previous transport id = ",e.id),e.close())}getLocalId(e){return rt(this,void 0,void 0,function*(){const i=`localToken_${e}`;if(this.kv.currentValue[i])return this.kv.currentValue[i];const o=yield this.kv.waitForKeyToLoad(i);if(o)return o;const r=dt();return this.kv.updateInPlace(l=>{l[i]||(l[i]=r)}),yield this.kv.waitForKeyToLoad(i)})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const e=new URL(window.location.href);if(e.searchParams.get(bf)){const i=e.toString();e.searchParams.delete(bf),e.searchParams.delete("code"),e.searchParams.delete("error");const o=e.pathname+(e.searchParams.size?"?"+e.searchParams:"")+e.hash;if(history.replaceState(history.state,"",o),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let r=!1;const l=c=>{var f;r||(r=!0,navigation.removeEventListener("navigate",l),!c.userInitiated&&c.navigationType==="replace"&&((f=c.destination)===null||f===void 0?void 0:f.url)===i&&history.replaceState(history.state,"",o))};navigation.addEventListener("navigate",l)}}}_oauthLoginInit(){return rt(this,void 0,void 0,function*(){var e,i,o,r;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const l=new URLSearchParams(window.location.search);if(!l.get(bf))return null;const c=l.get("error");if(c)return this._replaceUrlAfterOAuth(),{error:{message:c}};const f=l.get("code");if(!f)return null;this._replaceUrlAfterOAuth();try{const p=yield this._getCurrentUser(),h=p?.type==="guest",{user:y}=yield Cy({apiURI:this.config.apiURI,appId:this.config.appId,code:f,refreshToken:h?p.refresh_token:void 0});return this.setCurrentUser(y),null}catch(p){return((e=p?.body)===null||e===void 0?void 0:e.type)==="record-not-found"&&((o=(i=p?.body)===null||i===void 0?void 0:i.hint)===null||o===void 0?void 0:o["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((r=p?.body)===null||r===void 0?void 0:r.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return rt(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(e){return this.mutationErrorCbs.push(e),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(i=>i!==e)}}subscribeAuth(e){this.authCbs.push(e);const i=this._currentUserCached;i.isLoading||e(this._currentUserCached);let o=!1;return this.getCurrentUser().then(r=>{o||El(r,i)||e(r)}),()=>{o=!0,this.authCbs=this.authCbs.filter(r=>r!==e)}}getAuth(){return rt(this,void 0,void 0,function*(){const{user:e,error:i}=yield this.getCurrentUser();if(i)throw new hs("Could not get current user: "+i.message);return e})}subscribeConnectionStatus(e){return this.connectionStatusCbs.push(e),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(i=>i!==e)}}subscribeAttrs(e){return this.attrsCbs.push(e),this.attrs&&e(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(i=>i!==e)}}notifyAuthSubs(e){this.authCbs.forEach(i=>i(e))}notifyMutationErrorSubs(e){this.mutationErrorCbs.forEach(i=>i(e))}notifyAttrsSubs(){if(!this.attrs)return;const e=this.optimisticAttrs();this.attrsCbs.forEach(i=>i(e))}notifyConnectionStatusSubs(e){this.connectionStatusCbs.forEach(i=>i(e))}setCurrentUser(e){return rt(this,void 0,void 0,function*(){this.kv.updateInPlace(i=>{i[_r]=e}),yield this.kv.waitForKeyToLoad(_r)})}getCurrentUserCached(){return this._currentUserCached}_getCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(_r);return typeof e=="string"?JSON.parse(e):e})}getCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this._waitForOAuthCallbackResponse();if(e?.error){const i={error:e.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}try{const o={user:yield this._getCurrentUser(),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}catch(i){return{user:void 0,isLoading:!1,error:{message:i?.message||"Error loading user"}}}})}_hasCurrentUser(){return rt(this,void 0,void 0,function*(){const e=yield this.kv.waitForKeyToLoad(_r);return typeof e=="string"?JSON.parse(e)!=null:e!=null})}changeCurrentUser(e){return rt(this,void 0,void 0,function*(){var i;const{user:o}=yield this.getCurrentUser();if(!El(o,e)){yield this.setCurrentUser(e),this.updateUser(e);try{(i=this._broadcastChannel)===null||i===void 0||i.postMessage({type:"auth"})}catch(r){console.error("Error posting message to broadcast channel",r)}}})}updateUser(e){const i={error:void 0,user:e};this._currentUserCached=Object.assign({isLoading:!1},i),this._dataForQueryCache={},this.querySubs.updateInPlace(o=>{Object.keys(o).forEach(r=>{delete o[r].result})}),this._reconnectTimeoutMs=0,this._transport.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(i)}sendMagicCode({email:e}){return EM({apiURI:this.config.apiURI,appId:this.config.appId,email:e})}signInWithMagicCode(e){return rt(this,arguments,void 0,function*({email:i,code:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",f=yield CM({apiURI:this.config.apiURI,appId:this.config.appId,email:i,code:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(f.user),f})}signInWithCustomToken(e){return rt(this,void 0,void 0,function*(){const i=yield AM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:e});return yield this.changeCurrentUser(i.user),i})}signInAsGuest(){return rt(this,void 0,void 0,function*(){const e=yield bM({apiURI:this.config.apiURI,appId:this.config.appId});return yield this.changeCurrentUser(e.user),e})}potentiallyInvalidateToken(e,i){var o;const r=(o=e?.user)===null||o===void 0?void 0:o.refresh_token;if(!r)return;if(i.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}wM({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:r}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(c=>{})}signOut(e){return rt(this,void 0,void 0,function*(){const i=yield this.getCurrentUser();this.potentiallyInvalidateToken(i,e),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:e,redirectURL:i}){const{apiURI:o,appId:r}=this.config;return`${o}/runtime/oauth/start?app_id=${r}&client_name=${e}&redirect_uri=${i}`}exchangeCodeForToken(e){return rt(this,arguments,void 0,function*({code:i,codeVerifier:o}){var r;const l=yield this.getCurrentUser(),c=((r=l?.user)===null||r===void 0?void 0:r.type)==="guest",f=yield Cy({apiURI:this.config.apiURI,appId:this.config.appId,code:i,codeVerifier:o,refreshToken:c?l.user.refresh_token:void 0});return yield this.changeCurrentUser(f.user),f})}issuerURI(){const{apiURI:e,appId:i}=this.config;return`${e}/runtime/${i}`}signInWithIdToken(e){return rt(this,arguments,void 0,function*({idToken:i,clientName:o,nonce:r}){var l;const c=yield this.getCurrentUser(),f=(l=c?.user)===null||l===void 0?void 0:l.refresh_token,p=yield MM({apiURI:this.config.apiURI,appId:this.config.appId,idToken:i,clientName:o,nonce:r,refreshToken:f});return yield this.changeCurrentUser(p.user),p})}joinRoom(e,i){let o=!1;this._rooms[e]||(o=!0,this._rooms[e]={isConnected:!1,error:void 0}),this._presence[e]=this._presence[e]||{};const r=this._presence[e].result;return i&&!r&&(this._presence[e].result=this._presence[e].result||{},this._presence[e].result.user=i,this._notifyPresenceSubs(e)),o&&this._tryJoinRoom(e,i),()=>{this._cleanupRoom(e)}}_cleanupRoom(e){var i,o,r,l;if(!(!((o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0)&&o.length)&&!Object.keys((r=this._broadcastSubs[e])!==null&&r!==void 0?r:{}).length){const c=(l=this._rooms[e])===null||l===void 0?void 0:l.isConnected;delete this._rooms[e],delete this._presence[e],delete this._broadcastSubs[e],c?this._tryLeaveRoom(e):this._roomsPendingLeave[e]=!0}}getPresence(e,i,o={}){const r=this._rooms[i],l=this._presence[i];return!r||!l||!l.result?null:Object.assign(Object.assign({},UM(l.result,o,this._sessionId)),{isLoading:!r.isConnected,error:r.error})}publishPresence(e,i,o){const r=this._rooms[i],l=this._presence[i];if(!r||!l)return;l.result=l.result||{};const c=Object.assign(Object.assign({},l.result.user),o);l.result.user=c,r.isConnected&&(this._trySetPresence(i,c),this._notifyPresenceSubs(i))}_trySetPresence(e,i){this._trySendAuthed(dt(),{op:"set-presence","room-id":e,data:i})}_tryJoinRoom(e,i){this._trySendAuthed(dt(),{op:"join-room","room-id":e,data:i}),delete this._roomsPendingLeave[e]}_tryLeaveRoom(e){this._trySendAuthed(dt(),{op:"leave-room","room-id":e})}_trySetRoomConnected(e,i){const o=this._rooms[e];o&&(o.isConnected=i)}subscribePresence(e,i,o,r){const l=this.joinRoom(i,o.initialPresence||o.initialData),c=Object.assign(Object.assign({},o),{roomId:i,cb:r,prev:null});return this._presence[i]=this._presence[i]||{},this._presence[i].handlers=this._presence[i].handlers||[],this._presence[i].handlers.push(c),this._notifyPresenceSub(i,c),()=>{var f,p,h;this._presence[i].handlers=(h=(p=(f=this._presence[i])===null||f===void 0?void 0:f.handlers)===null||p===void 0?void 0:p.filter(y=>y!==c))!==null&&h!==void 0?h:[],l()}}_notifyPresenceSubs(e){var i,o;(o=(i=this._presence[e])===null||i===void 0?void 0:i.handlers)===null||o===void 0||o.forEach(r=>{this._notifyPresenceSub(e,r)})}_notifyPresenceSub(e,i){const o=this.getPresence("",e,i);o&&(i.prev&&!PM(o,i.prev)||(i.prev=o,i.cb(o)))}_patchPresencePeers(e,i){var o,r,l;const c=((r=(o=this._presence[e])===null||o===void 0?void 0:o.result)===null||r===void 0?void 0:r.peers)||{};let f=Object.fromEntries(Object.entries(c).map(([h,y])=>[h,{data:y}]));(l=this._presence[e])===null||l===void 0||l.result;const p=xl(f,h=>{for(let[y,_,T]of i)switch(_){case"+":dA(h,y,T);break;case"r":cy(h,y,T);break;case"-":K0(h,y);break}delete h[this._sessionId]});this._setPresencePeers(e,p)}_setPresencePeers(e,i){const o=Object.assign({},i);delete o[this._sessionId];const r=Object.fromEntries(Object.entries(o).map(([l,c])=>[l,c.data]));this._presence=xl(this._presence,l=>{cy(l,[e,"result","peers"],r)})}publishTopic({roomType:e,roomId:i,topic:o,data:r}){var l;const c=this._rooms[i];if(c){if(!c.isConnected){this._broadcastQueue[i]=(l=this._broadcastQueue[i])!==null&&l!==void 0?l:[],this._broadcastQueue[i].push({topic:o,roomType:e,data:r});return}this._tryBroadcast(i,e,o,r)}}_tryBroadcast(e,i,o,r){this._trySendAuthed(dt(),{op:"client-broadcast","room-id":e,roomType:i,topic:o,data:r})}subscribeTopic(e,i,o){const r=this.joinRoom(e);return this._broadcastSubs[e]=this._broadcastSubs[e]||{},this._broadcastSubs[e][i]=this._broadcastSubs[e][i]||[],this._broadcastSubs[e][i].push(o),this._presence[e]=this._presence[e]||{},()=>{this._broadcastSubs[e][i]=this._broadcastSubs[e][i].filter(l=>l!==o),this._broadcastSubs[e][i].length||delete this._broadcastSubs[e][i],r()}}_notifyBroadcastSubs(e,i,o){var r,l,c;(c=(l=(r=this._broadcastSubs)===null||r===void 0?void 0:r[e])===null||l===void 0?void 0:l[i])===null||c===void 0||c.forEach(f=>{var p,h,y,_,T,C;const b=(p=o.data)===null||p===void 0?void 0:p.data,M=o.data["peer-id"]===this._sessionId?(y=(h=this._presence[e])===null||h===void 0?void 0:h.result)===null||y===void 0?void 0:y.user:(C=(T=(_=this._presence[e])===null||_===void 0?void 0:_.result)===null||T===void 0?void 0:T.peers)===null||C===void 0?void 0:C[o.data["peer-id"]];return f(b,M)})}uploadFile(e,i,o){return rt(this,void 0,void 0,function*(){var r;const l=yield this.getCurrentUser(),c=(r=l?.user)===null||r===void 0?void 0:r.refresh_token;return RM(Object.assign(Object.assign({},o),{apiURI:this.config.apiURI,appId:this.config.appId,path:e,file:i,refreshToken:c}))})}deleteFile(e){return rt(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield NM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}upload(e,i){return rt(this,void 0,void 0,function*(){var o;const r=yield this.getCurrentUser(),l=(o=r?.user)===null||o===void 0?void 0:o.refresh_token,c=e||i.name,f=yield xM({apiURI:this.config.apiURI,appId:this.config.appId,fileName:c,refreshToken:l});return yield IM(f,i)})}getDownloadUrl(e){return rt(this,void 0,void 0,function*(){var i;const o=yield this.getCurrentUser(),r=(i=o?.user)===null||i===void 0?void 0:i.refresh_token;return yield DM({apiURI:this.config.apiURI,appId:this.config.appId,path:e,refreshToken:r})})}}let yl;function dw(t,e){yl?.dispose();const i=vw(e),o=mw(e,f),r=pw(hw(t));function l(y){var _;y.source===r.element.contentWindow&&((_=y.data)===null||_===void 0?void 0:_.type)==="close"&&i.isVisible()&&f()}function c(y){const _=y.shiftKey&&y.ctrlKey&&y.key==="0",T=y.key==="Escape"||y.key==="Esc";(_||T&&i.isVisible())&&f()}function f(){i.isVisible()?i.element.style.display="none":(i.element.style.display="block",i.element.contains(r.element)||i.element.appendChild(r.element))}function p(){i.element.remove(),o.element.remove(),removeEventListener("keydown",c),removeEventListener("message",l)}function h(){document.body.appendChild(i.element),document.body.appendChild(o.element),addEventListener("keydown",c),addEventListener("message",l),yl={dispose:p}}return h()}function hw(t){return`${Ld||v_?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${t}`}function pw(t){const e=document.createElement("iframe");return e.src=t,e.className="instant-devtool-iframe",Object.assign(e.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:e}}function mw(t,e){const i=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,o=document.createElement("button");return o.innerHTML=i,o.className="instant-devtool-toggler",Object.assign(o.style,Object.assign(Object.assign({position:"fixed"},gw(t.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),o.addEventListener("click",e),{element:o}}function gw(t){switch(t){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function yw(t){switch(t){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function vw(t){const e=document.createElement("div");Object.assign(e.style,Object.assign(Object.assign({position:"fixed"},yw(t.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),e.style.display="none",e.className="instant-devtool-container";function i(){return e.style.display!=="none"}return{element:e,isVisible:i}}const _w={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function Tw(){var t;return globalThis.__instantDbSchemaHashStore=(t=globalThis.__instantDbSchemaHashStore)!==null&&t!==void 0?t:new WeakMap,globalThis.__instantDbSchemaHashStore}function Sw(){var t;return globalThis.__instantDbStore=(t=globalThis.__instantDbStore)!==null&&t!==void 0?t:{},globalThis.__instantDbStore}function Kf(t){const e=t.__adminToken;return t.appId+"_"+(t.websocketURI||"default_ws_uri")+"_"+(t.apiURI||"default_api_uri")+"_"+(e||"client_only")+"_"+t.useDateObjects}const Qf=Sw(),Hy=Tw();class Ew{constructor(e){this.db=e,this.sendMagicCode=i=>this.db.sendMagicCode(i),this.signInWithMagicCode=i=>this.db.signInWithMagicCode(i),this.signInWithToken=i=>this.db.signInWithCustomToken(i),this.signInAsGuest=()=>this.db.signInAsGuest(),this.createAuthorizationURL=i=>this.db.createAuthorizationURL(i),this.signInWithIdToken=i=>this.db.signInWithIdToken(i),this.exchangeOAuthCode=i=>this.db.exchangeCodeForToken(i),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(i={invalidateToken:!0})=>this.db.signOut(i)}}class Cw{constructor(e){this.db=e,this.uploadFile=(i,o,r={})=>this.db.uploadFile(i,o,r),this.delete=i=>this.db.deleteFile(i),this.upload=(i,o)=>this.db.upload(i,o),this.put=this.upload,this.getDownloadUrl=i=>this.db.getDownloadUrl(i)}}function Aw(t){return JSON.parse(JSON.stringify(t))}class bw{constructor(e){this.tx=Pd(),this._reactor=e,this.auth=new Ew(this._reactor),this.storage=new Cw(this._reactor)}transact(e){return this._reactor.pushTx(e)}getLocalId(e){return this._reactor.getLocalId(e)}subscribeQuery(e,i,o){return this._reactor.subscribeQuery(e,i,o)}subscribeAuth(e){return this._reactor.subscribeAuth(e)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(e){return this._reactor.subscribeConnectionStatus(e)}joinRoom(e="_defaultRoomType",i="_defaultRoomId",o){return{leaveRoom:this._reactor.joinRoom(i,o?.initialPresence),subscribeTopic:(l,c)=>this._reactor.subscribeTopic(i,l,c),subscribePresence:(l,c)=>this._reactor.subscribePresence(e,i,l,c),publishTopic:(l,c)=>this._reactor.publishTopic({roomType:e,roomId:i,topic:l,data:c}),publishPresence:l=>this._reactor.publishPresence(e,i,l),getPresence:l=>this._reactor.getPresence(e,i,l)}}shutdown(){delete Qf[Kf(this._reactor.config)],this._reactor.shutdown()}queryOnce(e,i){return this._reactor.queryOnce(e,i)}_syncTableExperimental(e,i){return this._reactor.subscribeTable(e,i)}}function Vy(t){if(!t)return"0";const e=Hy.get(t);if(e)return e;const i=Tt(t);return Hy.set(t,i),i}function Mw(t,e){return Vy(t._reactor.config.schema)!==Vy(e)}function ww(t,e,i,o,r){const l=Qf[Kf(t)];if(l)return Mw(l,t.schema)&&l._reactor.updateSchema(t.schema),l;const c=new fw(Object.assign(Object.assign(Object.assign({},_w),t),{cardinalityInference:!!t.schema}),e||m_,i||g_,Object.assign(Object.assign({},o||{}),{"@instantdb/core":kd}),r),f=new bw(c);return Qf[Kf(t)]=f,Rw(t.appId,t.devtool),f}function Rw(t,e){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof e=="boolean"&&!e)return;const i=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof e=="object"?e:{});i.allowedHosts.includes(window.location.hostname)&&dw(t,i)}const Nw={isLoading:!0,data:void 0,pageInfo:void 0,error:void 0};function zy(t){return Object.assign({isLoading:!t,data:void 0,pageInfo:void 0,error:void 0},t||{})}function xw(t,e,i){e&&i&&"ruleParams"in i&&(e=Object.assign({$$ruleParams:i.ruleParams},e));const o=e?Aw(e):null,r=Tt(o),l=U.useRef(zy(t._reactor.getPreviousResult(o))),c=U.useCallback(p=>(l.current=zy(t._reactor.getPreviousResult(o)),o?t.subscribeQuery(o,y=>{l.current=Object.assign({isLoading:!y,data:void 0,pageInfo:void 0,error:void 0},y),p()}):()=>{}),[r]);return{state:U.useSyncExternalStore(c,()=>l.current,()=>Nw),query:o}}function Iw(){const t=U.useRef(null);U.useEffect(()=>{i()},[]);function e(o,r){clearTimeout(t.current),t.current=setTimeout(r,o)}function i(){clearTimeout(t.current)}return{set:e,clear:i}}const Dw=1e3;function Uw(t,e,i){const o=U.useRef(i);o.current=i,U.useEffect(()=>t.core._reactor.subscribeTopic(t.id,e,(l,c)=>{o.current(l,c)}),[t.id,e])}function Pw(t,e){return U.useEffect(()=>t.core._reactor.joinRoom(t.id),[t.id]),U.useCallback(o=>{t.core._reactor.publishTopic({roomType:t.type,roomId:t.id,topic:e,data:o})},[t.id,e])}function Lw(t,e={}){var i,o;const[r,l]=U.useState(()=>{var p;return(p=t.core._reactor.getPresence(t.type,t.id,e))!==null&&p!==void 0?p:{peers:{},isLoading:!0}});U.useEffect(()=>t.core._reactor.subscribePresence(t.type,t.id,e,h=>{l(h)}),[t.id,e.user,(i=e.peers)===null||i===void 0?void 0:i.join(),(o=e.keys)===null||o===void 0?void 0:o.join()]);const c=U.useCallback(p=>{t.core._reactor.publishPresence(t.type,t.id,p)},[t.type,t.id]);return U.useMemo(()=>Object.assign(Object.assign({},r),{publishPresence:c}),[r,c])}function kw(t,e,i){U.useEffect(()=>t.core._reactor.joinRoom(t.id,e),[t.id]),U.useEffect(()=>t.core._reactor.publishPresence(t.type,t.id,e),[t.type,t.id,i??JSON.stringify(e)])}function Ow(t,e,i={}){const o=Iw(),r=no.usePresence(t,{keys:[e]}),l=U.useMemo(()=>{var y;const _=t._core._reactor.getPresence(t.type,t.id);return i?.writeOnly?[]:Object.values((y=_?.peers)!==null&&y!==void 0?y:{}).filter(T=>T[e]===!0)},[i?.writeOnly,r]),c=U.useCallback(y=>{var _;t.core._reactor.publishPresence(t.type,t.id,{[e]:y}),y&&(i?.timeout===null||i?.timeout===0||o.set((_=i?.timeout)!==null&&_!==void 0?_:Dw,()=>{t.core._reactor.publishPresence(t.type,t.id,{[e]:null})}))},[t.type,t.id,e,i?.timeout,o]),f=U.useCallback(y=>{const T=!(i?.stopOnEnter&&y.key==="Enter");c(T)},[i.stopOnEnter,c]),p=U.useCallback(()=>{c(!1)},[c]),h=U.useMemo(()=>({onKeyDown:f,onBlur:p}),[f,p]);return{active:l,setActive:c,inputProps:h}}const no={useTopicEffect:Uw,usePublishTopic:Pw,usePresence:Lw,useSyncPresence:kw,useTypingIndicator:Ow};class qw{constructor(e,i,o){this.useTopicEffect=(r,l)=>{no.useTopicEffect(this,r,l)},this.usePublishTopic=r=>no.usePublishTopic(this,r),this.usePresence=(r={})=>no.usePresence(this,r),this.useSyncPresence=(r,l)=>no.useSyncPresence(this,r,l),this.useTypingIndicator=(r,l={})=>no.useTypingIndicator(this,r,l),this.core=e,this._core=this.core,this.type=i,this.id=o}}var Gw=function(t,e,i,o){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(y){try{h(o.next(y))}catch(_){c(_)}}function p(y){try{h(o.throw(y))}catch(_){c(_)}}function h(y){y.done?l(y.value):r(y.value).then(f,p)}h((o=o.apply(t,e||[])).next())})};const Hw={isLoading:!0,user:void 0,error:void 0};class Vw{constructor(e,i){this.tx=Pd(),this.getLocalId=o=>this.core.getLocalId(o),this.useLocalId=o=>{const[r,l]=U.useState(null);return U.useEffect(()=>{Gw(this,void 0,void 0,function*(){const f=yield this.getLocalId(o);l(f)})},[o]),r},this.rooms=no,this.transact=o=>this.core.transact(o),this.useQuery=(o,r)=>xw(this.core,o,r).state,this.useAuth=()=>{const o=U.useRef(this.core._reactor._currentUserCached),r=U.useCallback(c=>this.core.subscribeAuth(p=>{o.current=Object.assign({isLoading:!1},p),c()}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>Hw)},this.useUser=()=>{const{user:o}=this.useAuth();if(!o)throw new hs("useUser must be used within an auth-protected route");return o},this.useConnectionStatus=()=>{const o=U.useRef(this.core._reactor.status),r=U.useCallback(c=>this.core.subscribeConnectionStatus(p=>{p!==o.current&&(o.current=p,c())}),[]);return U.useSyncExternalStore(r,()=>o.current,()=>"connecting")},this.queryOnce=(o,r)=>this.core.queryOnce(o,r),this.SignedIn=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||!r.user?null:E.jsx(E.Fragment,{children:o})},this.SignedOut=({children:o})=>{const r=this.useAuth();return r.isLoading||r.error||r.user?null:E.jsx(E.Fragment,{children:o})},this.core=ww(e,this.constructor.Storage,this.constructor.NetworkListener,i,this.constructor.EventSourceImpl),this._core=this.core,this.auth=this.core.auth,this.storage=this.core.storage}room(e="_defaultRoomType",i="_defaultRoomId"){return new qw(this.core,e,i)}getAuth(){return this.core.getAuth()}}class By extends Error{constructor(e,i){super(e),this.name="ParseError",this.type=i.type,this.field=i.field,this.value=i.value,this.line=i.line}}function Mf(t){}function zw(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Mf,onError:i=Mf,onRetry:o=Mf,onComment:r}=t;let l="",c=!0,f,p="",h="";function y(M){const w=c?M.replace(/^\xEF\xBB\xBF/,""):M,[R,D]=Bw(`${l}${w}`);for(const P of R)_(P);l=D,c=!1}function _(M){if(M===""){C();return}if(M.startsWith(":")){r&&r(M.slice(M.startsWith(": ")?2:1));return}const w=M.indexOf(":");if(w!==-1){const R=M.slice(0,w),D=M[w+1]===" "?2:1,P=M.slice(w+D);T(R,P,M);return}T(M,"",M)}function T(M,w,R){switch(M){case"event":h=w;break;case"data":p=`${p}${w}
`;break;case"id":f=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?o(parseInt(w,10)):i(new By(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:R}));break;default:i(new By(`Unknown field "${M.length>20?`${M.slice(0,20)}`:M}"`,{type:"unknown-field",field:M,value:w,line:R}));break}}function C(){p.length>0&&e({id:f,event:h||void 0,data:p.endsWith(`
`)?p.slice(0,-1):p}),f=void 0,p="",h=""}function b(M={}){l&&M.consume&&_(l),c=!0,f=void 0,p="",h="",l=""}return{feed:y,reset:b}}function Bw(t){const e=[];let i="",o=0;for(;o<t.length;){const r=t.indexOf("\r",o),l=t.indexOf(`
`,o);let c=-1;if(r!==-1&&l!==-1?c=Math.min(r,l):r!==-1?r===t.length-1?c=-1:c=r:l!==-1&&(c=l),c===-1){i=t.slice(o);break}else{const f=t.slice(o,c);e.push(f),o=c+1,t[o-1]==="\r"&&t[o]===`
`&&o++}}return[e,i]}class Fy extends Event{constructor(e,i){var o,r;super(e),this.code=(o=i?.code)!=null?o:void 0,this.message=(r=i?.message)!=null?r:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,i,o){return o($y(this),i)}[Symbol.for("Deno.customInspect")](e,i){return e($y(this),i)}}function Fw(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function Xf(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Xf).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Xf(t.cause)}`:t.message:`${t}`}function $y(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var M_=t=>{throw TypeError(t)},Od=(t,e,i)=>e.has(t)||M_("Cannot "+i),Te=(t,e,i)=>(Od(t,e,"read from private field"),i?i.call(t):e.get(t)),lt=(t,e,i)=>e.has(t)?M_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ye=(t,e,i,o)=>(Od(t,e,"write to private field"),e.set(t,i),i),Kn=(t,e,i)=>(Od(t,e,"access private method"),i),qt,io,ts,Al,Ul,xr,os,Ir,Ni,ns,as,is,br,mn,Zf,Wf,jf,Yy,ed,td,Mr,nd,id;class Dr extends EventTarget{constructor(e,i){var o,r;super(),lt(this,mn),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,lt(this,qt),lt(this,io),lt(this,ts),lt(this,Al),lt(this,Ul),lt(this,xr),lt(this,os),lt(this,Ir,null),lt(this,Ni),lt(this,ns),lt(this,as,null),lt(this,is,null),lt(this,br,null),lt(this,Wf,async l=>{var c;Te(this,ns).reset();const{body:f,redirected:p,status:h,headers:y}=l;if(h===204){Kn(this,mn,Mr).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(p?Ye(this,ts,new URL(l.url)):Ye(this,ts,void 0),h!==200){Kn(this,mn,Mr).call(this,`Non-200 status code (${h})`,h);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){Kn(this,mn,Mr).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(Te(this,qt)===this.CLOSED)return;Ye(this,qt,this.OPEN);const _=new Event("open");if((c=Te(this,br))==null||c.call(this,_),this.dispatchEvent(_),typeof f!="object"||!f||!("getReader"in f)){Kn(this,mn,Mr).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const T=new TextDecoder,C=f.getReader();let b=!0;do{const{done:M,value:w}=await C.read();w&&Te(this,ns).feed(T.decode(w,{stream:!M})),M&&(b=!1,Te(this,ns).reset(),Kn(this,mn,nd).call(this))}while(b)}),lt(this,jf,l=>{Ye(this,Ni,void 0),!(l.name==="AbortError"||l.type==="aborted")&&Kn(this,mn,nd).call(this,Xf(l))}),lt(this,ed,l=>{typeof l.id=="string"&&Ye(this,Ir,l.id);const c=new MessageEvent(l.event||"message",{data:l.data,origin:Te(this,ts)?Te(this,ts).origin:Te(this,io).origin,lastEventId:l.id||""});Te(this,is)&&(!l.event||l.event==="message")&&Te(this,is).call(this,c),this.dispatchEvent(c)}),lt(this,td,l=>{Ye(this,xr,l)}),lt(this,id,()=>{Ye(this,os,void 0),Te(this,qt)===this.CONNECTING&&Kn(this,mn,Zf).call(this)});try{if(e instanceof URL)Ye(this,io,e);else if(typeof e=="string")Ye(this,io,new URL(e,$w()));else throw new Error("Invalid URL")}catch{throw Fw("An invalid or illegal string was specified")}Ye(this,ns,zw({onEvent:Te(this,ed),onRetry:Te(this,td)})),Ye(this,qt,this.CONNECTING),Ye(this,xr,3e3),Ye(this,Ul,(o=i?.fetch)!=null?o:globalThis.fetch),Ye(this,Al,(r=i?.withCredentials)!=null?r:!1),Kn(this,mn,Zf).call(this)}get readyState(){return Te(this,qt)}get url(){return Te(this,io).href}get withCredentials(){return Te(this,Al)}get onerror(){return Te(this,as)}set onerror(e){Ye(this,as,e)}get onmessage(){return Te(this,is)}set onmessage(e){Ye(this,is,e)}get onopen(){return Te(this,br)}set onopen(e){Ye(this,br,e)}addEventListener(e,i,o){const r=i;super.addEventListener(e,r,o)}removeEventListener(e,i,o){const r=i;super.removeEventListener(e,r,o)}close(){Te(this,os)&&clearTimeout(Te(this,os)),Te(this,qt)!==this.CLOSED&&(Te(this,Ni)&&Te(this,Ni).abort(),Ye(this,qt,this.CLOSED),Ye(this,Ni,void 0))}}qt=new WeakMap,io=new WeakMap,ts=new WeakMap,Al=new WeakMap,Ul=new WeakMap,xr=new WeakMap,os=new WeakMap,Ir=new WeakMap,Ni=new WeakMap,ns=new WeakMap,as=new WeakMap,is=new WeakMap,br=new WeakMap,mn=new WeakSet,Zf=function(){Ye(this,qt,this.CONNECTING),Ye(this,Ni,new AbortController),Te(this,Ul)(Te(this,io),Kn(this,mn,Yy).call(this)).then(Te(this,Wf)).catch(Te(this,jf))},Wf=new WeakMap,jf=new WeakMap,Yy=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Te(this,Ir)?{"Last-Event-ID":Te(this,Ir)}:void 0},cache:"no-store",signal:(t=Te(this,Ni))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},ed=new WeakMap,td=new WeakMap,Mr=function(t,e){var i;Te(this,qt)!==this.CLOSED&&Ye(this,qt,this.CLOSED);const o=new Fy("error",{code:e,message:t});(i=Te(this,as))==null||i.call(this,o),this.dispatchEvent(o)},nd=function(t,e){var i;if(Te(this,qt)===this.CLOSED)return;Ye(this,qt,this.CONNECTING);const o=new Fy("error",{code:e,message:t});(i=Te(this,as))==null||i.call(this,o),this.dispatchEvent(o),Ye(this,os,setTimeout(Te(this,id),Te(this,xr)))},id=new WeakMap,Dr.CONNECTING=0,Dr.OPEN=1,Dr.CLOSED=2;Object.defineProperty(Dr,Symbol.for("eventsource.supports-fetch-override"),{value:!0,writable:!1,configurable:!1,enumerable:!1});function $w(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}class w_ extends Vw{}w_.EventSourceImpl=Dr;function Yw(t){return new w_(t,{"@instantdb/react":kd})}const Jw="fb13a3d0-35ab-493b-9aa6-64a77363fe93",Ue=Yw({appId:Jw}),od={calories_min:1600,calories_max:2e3,purines_min:0,purines_max:400,protein_target:50,carbs_target:250,fat_target:65,fiber_target:25,sodium_max:2300,sugar_max:50,hydration_target:2e3},Kw={calories:{icon:"",unit:"kcal",label:"Calories"},purines:{icon:"",unit:"mg",label:"Purines"},protein:{icon:"",unit:"g",label:"Protein"},carbs:{icon:"",unit:"g",label:"Carbs"},fat:{icon:"",unit:"g",label:"Fat"},fiber:{icon:"",unit:"g",label:"Fiber"},sodium:{icon:"",unit:"mg",label:"Sodium"},sugar:{icon:"",unit:"g",label:"Sugar"},hydration:{icon:"",unit:"ml",label:"Water"}};function Qw(t,e,i,o){const r=10*t+6.25*e-5*i;return o==="male"?r+5:r-161}const Xw={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};function Zw(t,e,i,o,r){const l=Qw(t,e,i,o),c=Xw[r]||1.55;return Math.round(l*c)}function Ww(t=[]){return t.includes("kidney_disease")?150:t.includes("gout")?200:400}function jw(t,e){const i=t*30;return Math.round(i+({sedentary:0,light:200,moderate:400,active:600,very_active:800}[e]||0))}function eR(t){const{weight_kg:e,height_cm:i,age:o,sex:r,activity_level:l,dietary_conditions:c=[]}=t,f=Zw(e,i,o,r,l),p=Ww(c),h=jw(e,l),_=Math.round(e*({sedentary:.8,light:.9,moderate:1,active:1.2,very_active:1.4}[l]||1));let T=.5;c.includes("diabetes")&&(T=.4);const C=Math.round(f*T/4),b=Math.round(f*.275/9);let M=r==="female"?25:38;o>50&&(M=r==="female"?21:30);let w=2300;c.includes("kidney_disease")&&(w=1500);let R=r==="female"?25:36;return(c.includes("diabetes")||c.includes("gout"))&&(R=Math.round(R*.6)),{calories_min:Math.round(f*.85),calories_max:f,purines_min:0,purines_max:p,protein_target:_,carbs_target:C,fat_target:b,fiber_target:M,sodium_max:w,sugar_max:R,hydration_target:h}}function tR(t){const e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`}function Jy(){return tR(new Date)}function nR(t){t=t.replace(/^#/,"");const e=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,o=parseInt(t.substring(4,6),16)/255,r=Math.max(e,i,o),l=Math.min(e,i,o);let c,f,p=(r+l)/2;if(r===l)c=f=0;else{const h=r-l;switch(f=p>.5?h/(2-r-l):h/(r+l),r){case e:c=((i-o)/h+(i<o?6:0))/6;break;case i:c=((o-e)/h+2)/6;break;case o:c=((e-i)/h+4)/6;break}}return{h:Math.round(c*360),s:Math.round(f*100),l:Math.round(p*100)}}function ft(t,e,i){e/=100,i/=100;const o=(1-Math.abs(2*i-1))*e,r=o*(1-Math.abs(t/60%2-1)),l=i-o/2;let c=0,f=0,p=0;return 0<=t&&t<60?(c=o,f=r,p=0):60<=t&&t<120?(c=r,f=o,p=0):120<=t&&t<180?(c=0,f=o,p=r):180<=t&&t<240?(c=0,f=r,p=o):240<=t&&t<300?(c=r,f=0,p=o):300<=t&&t<360&&(c=o,f=0,p=r),c=Math.round((c+l)*255).toString(16).padStart(2,"0"),f=Math.round((f+l)*255).toString(16).padStart(2,"0"),p=Math.round((p+l)*255).toString(16).padStart(2,"0"),`#${c}${f}${p}`}function oo(t,e=!1){const i=nR(t);return e?{primary:t,primaryLight:ft(i.h,i.s*.8,Math.min(i.l+15,80)),primaryDark:ft(i.h,i.s,Math.max(i.l-15,20)),background:ft(i.h,i.s*.2,12),surface:ft(i.h,i.s*.15,18),surfaceVariant:ft(i.h,i.s*.2,25),secondary:ft((i.h+180)%360,i.s*.7,60),text:ft(i.h,i.s*.1,95),textSecondary:ft(i.h,i.s*.15,70),border:ft(i.h,i.s*.2,30),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}:{primary:t,primaryLight:ft(i.h,i.s*.6,Math.min(i.l+20,90)),primaryDark:ft(i.h,i.s,Math.max(i.l-20,30)),background:ft(i.h,i.s*.3,97),surface:ft(i.h,i.s*.1,100),surfaceVariant:ft(i.h,i.s*.2,95),secondary:ft((i.h+180)%360,i.s*.7,i.l),text:ft(i.h,i.s*.5,15),textSecondary:ft(i.h,i.s*.3,40),border:ft(i.h,i.s*.2,85),success:"#66BB6A",warning:"#FFA726",danger:"#EF5350"}}const Ur={emerald:{name:"Emerald Dragon",description:"Bright, cheerful, default",seedColor:"#66BB6A",isDark:!1},midnight:{name:"Midnight Dragon",description:"Sleek, easy on eyes",seedColor:"#7B2CBF",isDark:!0},crystal:{name:"Crystal Dragon",description:"High contrast, accessible",seedColor:"#2196F3",isDark:!1}};function so(t){const e=document.documentElement;Object.entries(t).forEach(([i,o])=>{const r=`--color-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`;e.style.setProperty(r,o)})}function iR(t,e,i){return t>i?"danger":t>i*.8||e&&t<e*.8?"warning":"success"}const R_=U.createContext(null),Tr={id:"local-user",name:"Dragon Keeper",profile:{sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]},thresholds:od,theme:{preset:"emerald",seed_color_hex:"#66BB6A"},badges:[],stats:{total_meals_logged:0,current_streak_days:0,longest_streak_days:0,meals_saved_to_stash:0}};function oR({children:t}){const[e,i]=U.useState(null),[o,r]=U.useState(!0),[l,c]=U.useState(!1),{isLoading:f,error:p,data:h}=Ue.useQuery({users:{}});U.useEffect(()=>{if(!f){if(h?.users&&h.users.length>0){const M=h.users[0];if(i({...Tr,...M,profile:{...Tr.profile,...M.profile},thresholds:{...Tr.thresholds,...M.thresholds},theme:{...Tr.theme,...M.theme}}),c(!0),M.theme?.preset){const w=Ur[M.theme.preset];if(w){const R=oo(w.seedColor,w.isDark);so(R)}else if(M.theme.seed_color_hex){const R=oo(M.theme.seed_color_hex,!1);so(R)}}}else{i(Tr),c(!1);const M=Ur.emerald,w=oo(M.seedColor,M.isDark);so(w)}r(!1)}},[f,h]);const b={user:e,isLoading:o||f,isAuthenticated:l,error:p,updateProfile:async M=>{const w={...e,profile:{...e.profile,...M}};i(w),e.id&&e.id!=="local-user"&&await Ue.transact([Ue.tx.users[e.id].update({profile:w.profile})])},updateThresholds:async M=>{const w={...e,thresholds:{...e.thresholds,...M}};i(w),e.id&&e.id!=="local-user"&&await Ue.transact([Ue.tx.users[e.id].update({thresholds:w.thresholds})])},updateTheme:async(M,w=null)=>{const R={preset:M,seed_color_hex:w||e.theme.seed_color_hex},D={...e,theme:R};if(i(D),M==="custom"&&w){const P=oo(w,!1);so(P)}else{const P=Ur[M];if(P){const J=oo(P.seedColor,P.isDark);so(J)}}e.id&&e.id!=="local-user"&&await Ue.transact([Ue.tx.users[e.id].update({theme:R})])},saveUser:async(M=null)=>{const w=M||e;if(e.id==="local-user"){const R=crypto.randomUUID(),D={...w,id:R};return await Ue.transact([Ue.tx.users[R].update({id:R,name:D.name,profile:D.profile,thresholds:D.thresholds,theme:D.theme,badges:D.badges||[],stats:D.stats||{},created_at:Date.now()})]),i(D),c(!0),R}else return await Ue.transact([Ue.tx.users[e.id].update({name:w.name,profile:w.profile,thresholds:w.thresholds,theme:w.theme,updated_at:Date.now()})]),e.id},setUser:i};return E.jsx(R_.Provider,{value:b,children:t})}function Fr(){const t=U.useContext(R_);if(!t)throw new Error("useUser must be used within a UserProvider");return t}const sR=[{path:"/",icon:"",label:"Diary"},{path:"/charts",icon:"",label:"Scroll"},{path:"/oracle",icon:"",label:"Oracle"},{path:"/settings",icon:"",label:"Lair"}];function rR(){return E.jsx("nav",{className:"nav-bar",children:sR.map(t=>E.jsxs(q0,{to:t.path,className:({isActive:e})=>`nav-item ${e?"active":""}`,children:[E.jsx("span",{className:"nav-icon",children:t.icon}),E.jsx("span",{className:"nav-label",children:t.label})]},t.path))})}function Ui({title:t,subtitle:e,action:i,showBack:o,onBack:r}){return E.jsx("header",{className:"header",children:E.jsxs("div",{className:"header-content",children:[o&&E.jsx("button",{className:"header-back",onClick:r,"aria-label":"Go back",children:""}),E.jsxs("div",{className:"header-title-group",children:[E.jsxs("h1",{className:"header-title",children:[E.jsx("span",{className:"header-dragon",children:""})," ",t]}),e&&E.jsx("p",{className:"header-subtitle",children:e})]}),i&&E.jsx("div",{className:"header-action",children:i})]})})}function Jn({nutrient:t,value:e,target:i,min:o=0,max:r,showLabel:l=!0,compact:c=!1}){const f=Kw[t]||{icon:"",unit:"",label:t},p=r||i,h=Math.min(e/p*100,100),y=iR(e,o,p);return E.jsxs("div",{className:`nutrient-progress ${c?"compact":""}`,children:[l&&E.jsxs("div",{className:"nutrient-header",children:[E.jsxs("span",{className:"nutrient-label",children:[E.jsx("span",{className:"nutrient-icon",children:f.icon}),E.jsx("span",{className:"nutrient-name",children:f.label})]}),E.jsxs("span",{className:"nutrient-value",children:[E.jsx("span",{className:"current",children:Math.round(e)}),E.jsx("span",{className:"separator",children:"/"}),E.jsx("span",{className:"target",children:Math.round(p)}),E.jsx("span",{className:"unit",children:f.unit})]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${y}`,style:{width:`${h}%`}})}),!c&&E.jsxs("div",{className:"nutrient-footer",children:[E.jsxs("span",{className:`status-indicator ${y}`,children:[y==="success"&&"",y==="warning"&&"",y==="danger"&&""]}),E.jsxs("span",{className:"percentage",children:[Math.round(h),"%"]})]})]})}const Ky={curious:{emoji:"",animation:"sniff",message:"Your dragon is looking for food..."},happy:{emoji:"",animation:"bounce",message:"Your dragon is happy!"},satisfied:{emoji:"",animation:"pulse",message:"Your dragon is satisfied and content."},stuffed:{emoji:"",animation:"wobble",message:"Your dragon ate too much!"},sick:{emoji:"",animation:"shake",message:"Your dragon isn't feeling well..."},celebrating:{emoji:"",animation:"celebrate",message:"Your dragon is celebrating! "},hoarding:{emoji:"",animation:"hoard",message:"Saved to your dragon's hoard!"}};function Pl({state:t="happy",showMessage:e=!0,size:i="medium"}){const o=Ky[t]||Ky.happy;return E.jsxs("div",{className:`ember-mascot ${i}`,children:[E.jsxs("div",{className:`ember-emoji ${o.animation}`,children:[o.emoji,t==="sick"&&E.jsx("span",{className:"ember-effect",children:""}),t==="celebrating"&&E.jsx("span",{className:"ember-effect",children:""}),t==="happy"&&E.jsx("span",{className:"ember-effect",children:""})]}),e&&E.jsx("p",{className:"ember-message",children:o.message})]})}function aR(t,e){if(!t||!e)return"curious";const i=t.calories/e.calories_max,o=t.purines/e.purines_max;return o>1?"sick":i>1?"stuffed":o>.8||i>.8?"satisfied":t.calories===0?"curious":"happy"}const sd=()=>{const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${e}-${i}-${o}`},Qy={breakfast:1,lunch:2,dinner:3,snack:4,hydration:5};function N_(t=null){const{user:e}=Fr(),i=e?.id,o=t?{meals:{$:{where:{user_id:i,date:t}}}}:{meals:{$:{where:{user_id:i}}}},{isLoading:r,error:l,data:c}=Ue.useQuery(i?o:null),f=c?.meals||[];return{meals:U.useMemo(()=>[...f].sort((C,b)=>{const M=Qy[C.meal_type]||99,w=Qy[b.meal_type]||99;return M-w}),[f]),isLoading:r,error:l,addMeal:async C=>{if(!i)return null;const b=crypto.randomUUID(),M={id:b,user_id:i,date:C.date||sd(),timestamp:Date.now(),meal_type:C.meal_type||"snack",meal_name:C.meal_name||"Unnamed Meal",ingredients:C.ingredients||[],total_nutrients:C.total_nutrients||{},hydration_ml:C.hydration_ml||0,image_urls:C.image_urls||[],analysis_method:C.analysis_method||"manual"};return await Ue.transact([Ue.tx.meals[b].update(M)]),b},updateMeal:async(C,b)=>{await Ue.transact([Ue.tx.meals[C].update({...b,updated_at:Date.now()})])},deleteMeal:async C=>{await Ue.transact([Ue.tx.meals[C].delete()])},getDailyTotals:(C=t||sd())=>f.filter(w=>w.date===C).reduce((w,R)=>(R.total_nutrients&&Object.keys(R.total_nutrients).forEach(D=>{w[D]=(w[D]||0)+(R.total_nutrients[D]||0)}),w.hydration=(w.hydration||0)+(R.hydration_ml||0),w),{})}}function x_(t=sd()){const{user:e}=Fr(),i=e?.id,{isLoading:o,data:r}=Ue.useQuery(i?{hydration:{$:{where:{user_id:i,date:t}}}}:null),c=(r?.hydration||[])[0],f=c?.amount_ml||0,p=async y=>{if(i)if(c)await Ue.transact([Ue.tx.hydration[c.id].update({amount_ml:Math.max(0,y),updated_at:Date.now()})]);else{const _=crypto.randomUUID();await Ue.transact([Ue.tx.hydration[_].update({id:_,user_id:i,date:t,amount_ml:Math.max(0,y),created_at:Date.now(),updated_at:Date.now()})])}};return{totalHydration:f,isLoading:o,setHydration:p,adjustHydration:async y=>{if(!i)return;const _=Math.max(0,f+y);await p(_)}}}function qd(){const{user:t}=Fr(),e=t?.id,{isLoading:i,error:o,data:r}=Ue.useQuery(e?{customItems:{$:{where:{user_id:e}}}}:null),l=r?.customItems||[],c=l.filter(T=>T.type==="meal"),f=l.filter(T=>T.type==="ingredient"),p=l.filter(T=>T.type==="container");return{savedMeals:c,customIngredients:f,bottles:p,items:l,isLoading:i,error:o,addToStash:async T=>{if(!e)return null;const C=crypto.randomUUID();return await Ue.transact([Ue.tx.customItems[C].update({id:C,user_id:e,type:T.type,name:T.name,icon:T.icon||null,ingredients:T.ingredients||[],total_nutrients:T.total_nutrients||{},capacity_ml:T.capacity_ml||0,use_count:T.use_count||0,created_at:Date.now()})]),C},removeFromStash:async T=>{await Ue.transact([Ue.tx.customItems[T].delete()])},updateStashItem:async(T,C)=>{await Ue.transact([Ue.tx.customItems[T].update({...C,updated_at:Date.now()})])}}}let lR,uR;function cR(){return{geminiUrl:lR,vertexUrl:uR}}function fR(t,e,i,o){var r,l;if(!t?.baseUrl){const c=cR();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}class ii{}function te(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(i))for(let h=0;h<p.length;h++){const y=p[h];m(y,e.slice(l+1),i[h])}else for(const h of p)m(h,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];m(p[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(o+1),i)):i}else return i}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function dR(t,e){for(const[i,o]of Object.entries(e)){const r=i.split("."),l=o.split("."),c=new Set;let f=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const h=l[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}rd(t,r,l,0,c)}}function rd(t,e,i,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),f=t;if(c in f&&Array.isArray(f[c]))for(const p of f[c])rd(p,e,i,o+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,f=Object.keys(c).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of f)p[h]=c[h];for(const[h,y]of Object.entries(p)){const _=[];for(const T of i.slice(o))T==="*"?_.push(h):_.push(T);m(c,_,y)}for(const h of f)delete c[h]}}else{const c=t;l in c&&rd(c[l],e,i,o+1,r)}}function Gd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function hR(t){const e={},i=d(t,["operationName"]);i!=null&&m(e,["operationName"],i);const o=d(t,["resourceName"]);return o!=null&&m(e,["_url","resourceName"],o),e}function pR(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],gR(c)),e}function mR(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],yR(c)),e}function gR(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vR(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function yR(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>_R(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function vR(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],bR(i)),e}function _R(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],MR(i)),e}function TR(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function SR(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function ER(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],CR(c)),e}function CR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function I_(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],AR(c)),e}function AR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function bR(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Gd(o));const r=d(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function MR(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Gd(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}var Xy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xy||(Xy={}));var Zy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zy||(Zy={}));var Wy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Wy||(Wy={}));var xi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xi||(xi={}));var jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var ev;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ev||(ev={}));var tv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(tv||(tv={}));var nv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nv||(nv={}));var iv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(iv||(iv={}));var ov;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ov||(ov={}));var sv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(sv||(sv={}));var rv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(rv||(rv={}));var av;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(av||(av={}));var lv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(lv||(lv={}));var uv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(uv||(uv={}));var cv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cv||(cv={}));var fv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fv||(fv={}));var dv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(dv||(dv={}));var hv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(hv||(hv={}));var Ll;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ll||(Ll={}));var pv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(pv||(pv={}));var mv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(mv||(mv={}));var gv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gv||(gv={}));var ad;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ad||(ad={}));var yv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(yv||(yv={}));var vv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vv||(vv={}));var _v;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(_v||(_v={}));var Tv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Tv||(Tv={}));var Sv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Sv||(Sv={}));var Ev;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ev||(Ev={}));var Cv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Cv||(Cv={}));var Av;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Av||(Av={}));var bv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(bv||(bv={}));var Mv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Mv||(Mv={}));var wv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wv||(wv={}));var Rv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rv||(Rv={}));var Nv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Nv||(Nv={}));var xv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xv||(xv={}));var Iv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Iv||(Iv={}));var Dv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Dv||(Dv={}));var Uv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Uv||(Uv={}));var Pv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Pv||(Pv={}));var Lv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Lv||(Lv={}));var kv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(kv||(kv={}));var Ov;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ov||(Ov={}));var qv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(qv||(qv={}));var Gv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Gv||(Gv={}));var Hv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Hv||(Hv={}));var Vv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Vv||(Vv={}));var zv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zv||(zv={}));var Bv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bv||(Bv={}));var Fv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fv||(Fv={}));var $v;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($v||($v={}));var Yv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Yv||(Yv={}));var ss;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ss||(ss={}));class ld{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sr{get text(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const _=[];for(const T of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[C,b]of Object.entries(T))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(C);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const _ of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,C]of Object.entries(_))T!=="inlineData"&&(C!==null||C!==void 0)&&y.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(h+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,o,r,l,c,f,p;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if(h?.length!==0)return h}get executableCode(){var e,i,o,r,l,c,f,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,o,r,l,c,f,p,h;if(((r=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(y?.length!==0)return(h=y?.[0])===null||h===void 0?void 0:h.output}}class Jv{}class Kv{}class wR{}class RR{}class NR{}class xR{}class Qv{}class Xv{}class Zv{}class IR{}class kl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new kl;let r;const l=e;return i?r=mR(l):r=pR(l),Object.assign(o,r),o}}class Wv{}class jv{}class e0{}class DR{}class UR{}class PR{}class Hd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Hd,l=ER(e);return Object.assign(o,l),o}}class LR{}class kR{}class OR{}class t0{}class qR{get text(){var e,i,o;let r="",l=!1;const c=[];for(const f of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,o;let r="";const l=[];for(const c of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class GR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Vd,l=I_(e);return Object.assign(o,l),o}}function xe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function D_(t,e){const i=xe(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function U_(t){return Array.isArray(t)?t.map(e=>Ol(e)):[Ol(t)]}function Ol(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function P_(t){const e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function L_(t){const e=Ol(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function n0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function k_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>n0(e)):[n0(t)]}function ud(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function i0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function o0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function At(t){if(t==null)throw new Error("ContentUnion is required");return ud(t)?t:{role:"user",parts:k_(t)}}function zd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=At(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=At(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>At(i)):[At(e)]}function un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(i0(t)||o0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[At(t)]}const e=[],i=[],o=ud(t[0]);for(const r of t){const l=ud(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(i0(r)||o0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||e.push({role:"user",parts:k_(i)}),e}function HR(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(xi).includes(i[0].toUpperCase())?i[0].toUpperCase():xi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(xi).includes(o.toUpperCase())?o.toUpperCase():xi.TYPE_UNSPECIFIED})}}function ls(t){const e={},i=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&HR(t.type,e);for(const[c,f]of Object.entries(t))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(xi).includes(f.toUpperCase())?f.toUpperCase():xi.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ls(f);else if(o.includes(c)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(ls(h))}e[c]=p}else if(r.includes(c)){const p={};for(const[h,y]of Object.entries(f))p[h]=ls(y);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Bd(t){return ls(t)}function Fd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function $d(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function _s(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ls(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ls(e.response));return t}function Ts(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function VR(t,e,i,o=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function oi(t,e){if(typeof e!="string")throw new Error("name must be a string");return VR(t,e,"cachedContents")}function O_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Li(t){return Gd(t)}function zR(t){return t!=null&&typeof t=="object"&&"name"in t}function BR(t){return t!=null&&typeof t=="object"&&"video"in t}function FR(t){return t!=null&&typeof t=="object"&&"uri"in t}function q_(t){var e;let i;if(zR(t)&&(i=t.name),!(FR(t)&&(i=t.uri,i===void 0))&&!(BR(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function G_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function H_(t){for(const e of["models","tunedModels","publisherModels"])if($R(t,e))return t[e];return[]}function $R(t,e){return t!==null&&typeof t=="object"&&e in t}function YR(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function JR(t,e={}){const i=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=YR(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function V_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function KR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function z_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ss(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function B_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function QR(t){const e={},i=d(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>NN(c))),m(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function XR(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function ZR(t){const e={},i=d(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsDestination","outputUriPrefix"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bl(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata","displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["metadata","state"]);r!=null&&m(e,["state"],B_(r));const l=d(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(t,["metadata","output"]);return h!=null&&m(e,["dest"],QR(z_(h))),e}function cd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["state"]);r!=null&&m(e,["state"],B_(r));const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["createTime"]);c!=null&&m(e,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=d(t,["model"]);y!=null&&m(e,["model"],y);const _=d(t,["inputConfig"]);_!=null&&m(e,["src"],WR(_));const T=d(t,["outputConfig"]);T!=null&&m(e,["dest"],XR(z_(T)));const C=d(t,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function WR(t){const e={},i=d(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const o=d(t,["gcsSource","uris"]);o!=null&&m(e,["gcsUri"],o);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function jR(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&m(i,["fileName"],o);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>RN(t,c))),m(i,["requests","requests"],l)}return i}function eN(t){const e={},i=d(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const o=d(t,["gcsUri"]);o!=null&&m(e,["gcsSource","uris"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function iN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function oN(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],sN(o));const r=d(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=d(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=d(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function sN(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function F_(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>kN(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function rN(t,e){const i={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&m(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function aN(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],ZR(KR(r))),i}function s0(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["src"]);r!=null&&m(i,["batch","inputConfig"],jR(t,V_(t,r)));const l=d(e,["config"]);return l!=null&&rN(l,i),i}function lN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],xe(t,o));const r=d(e,["src"]);r!=null&&m(i,["inputConfig"],eN(V_(t,r)));const l=d(e,["config"]);return l!=null&&aN(l,i),i}function uN(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["batch","displayName"],o),i}function cN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["src"]);r!=null&&m(i,["batch","inputConfig"],yN(t,r));const l=d(e,["config"]);return l!=null&&uN(l,i),i}function fN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function dN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function hN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function pN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function mN(t,e){const i={},o=d(e,["contents"]);if(o!=null){let l=zd(t,o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(m(i,["_self"],gN(r,i)),dR(i,{"requests[].*":"requests[].request.*"})),i}function gN(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function yN(t,e){const i={},o=d(e,["fileName"]);o!=null&&m(i,["file_name"],o);const r=d(e,["inlinedRequests"]);return r!=null&&m(i,["requests"],mN(t,r)),i}function vN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function _N(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TN(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SN(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],F_(At(r)));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=d(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Bd(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(i!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(Ae=>ON(Ae))),m(i,["safetySettings"],oe)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let oe=Ts(J);Array.isArray(oe)&&(oe=oe.map(Ae=>GN(_s(Ae)))),m(i,["tools"],oe)}const B=d(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],qN(B)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=d(e,["cachedContent"]);i!==void 0&&W!=null&&m(i,["cachedContent"],oi(t,W));const Q=d(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const re=d(e,["mediaResolution"]);re!=null&&m(o,["mediaResolution"],re);const ee=d(e,["speechConfig"]);if(ee!=null&&m(o,["speechConfig"],Fd(ee)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=d(e,["thinkingConfig"]);le!=null&&m(o,["thinkingConfig"],le);const pe=d(e,["imageConfig"]);return pe!=null&&m(o,["imageConfig"],wN(pe)),o}function EN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>oN(h))),m(e,["candidates"],p)}const r=d(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function CN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function AN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],Ss(t,o)),i}function bN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function MN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function wN(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function RN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["request","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let f=un(r);Array.isArray(f)&&(f=f.map(p=>F_(p))),m(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&m(i,["request","generationConfig"],SN(t,c,d(i,["request"],{}))),i}function NN(t){const e={},i=d(t,["response"]);i!=null&&m(e,["response"],EN(i));const o=d(t,["error"]);return o!=null&&m(e,["error"],o),e}function xN(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function IN(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function DN(t){const e={},i=d(t,["config"]);return i!=null&&xN(i,e),e}function UN(t){const e={},i=d(t,["config"]);return i!=null&&IN(i,e),e}function PN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bl(c))),m(e,["batchJobs"],l)}return e}function LN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>cd(c))),m(e,["batchJobs"],l)}return e}function kN(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],vN(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],_N(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],tN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function ON(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function qN(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],TN(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function GN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],bN(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],MN(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}var ti;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ti||(ti={}));class uo{constructor(e,i,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,r)}init(e,i,o){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class HN extends ii{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new uo(ti.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=s0(this.apiClient,e),o=i._url,r=te("{model}:batchGenerateContent",o),f=i.batch.inputConfig.requests,p=f.requests,h=[];for(const y of p){const _=Object.assign({},y);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const C=_.request;C.systemInstruction=T,_.request=C}h.push(_)}return f.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=lN(this.apiClient,e);return f=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>cd(y))}else{const h=s0(this.apiClient,e);return f=te("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>bl(y))}}async createEmbeddingsInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cN(this.apiClient,e);return l=te("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>bl(p))}}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=AN(this.apiClient,e);return f=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>cd(y))}else{const h=CN(this.apiClient,e);return f=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>bl(y))}}async cancel(e){var i,o,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=iN(this.apiClient,e);c=te("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nN(this.apiClient,e);c=te("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=UN(e);return f=te("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=LN(y),T=new t0;return Object.assign(T,_),T})}else{const h=DN(e);return f=te("batches",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=PN(y),T=new t0;return Object.assign(T,_),T})}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=dN(this.apiClient,e);return f=te("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>pN(y))}else{const h=fN(this.apiClient,e);return f=te("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>hN(y))}}}function VN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function r0(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>cx(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function zN(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let y=un(c);Array.isArray(y)&&(y=y.map(_=>r0(_))),m(e,["contents"],y)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],r0(At(f)));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(_=>dx(_))),m(e,["tools"],y)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],fx(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function BN(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=un(c);Array.isArray(_)&&(_=_.map(T=>T)),m(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],At(f));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>hx(T))),m(e,["tools"],_)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=d(t,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),i}function FN(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],D_(t,o));const r=d(e,["config"]);return r!=null&&zN(r,i),i}function $N(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["model"],D_(t,o));const r=d(e,["config"]);return r!=null&&BN(r,i),i}function YN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],oi(t,o)),i}function JN(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],oi(t,o)),i}function KN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function QN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function XN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function ZN(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WN(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jN(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function ex(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],oi(t,o)),i}function tx(t,e){const i={},o=d(e,["name"]);return o!=null&&m(i,["_url","name"],oi(t,o)),i}function nx(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function ix(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function ox(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function sx(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function rx(t){const e={},i=d(t,["config"]);return i!=null&&ox(i,e),e}function ax(t){const e={},i=d(t,["config"]);return i!=null&&sx(i,e),e}function lx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function ux(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function cx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],XN(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],ZN(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],VN(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function fx(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],WN(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function dx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],nx(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],ix(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function hx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>jN(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function px(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function mx(t,e){const i={},o=d(t,["ttl"]);e!==void 0&&o!=null&&m(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),i}function gx(t,e){const i={},o=d(e,["name"]);o!=null&&m(i,["_url","name"],oi(t,o));const r=d(e,["config"]);return r!=null&&px(r,i),i}function yx(t,e){const i={},o=d(e,["name"]);o!=null&&m(i,["_url","name"],oi(t,o));const r=d(e,["config"]);return r!=null&&mx(r,i),i}class vx extends ii{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new uo(ti.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=$N(this.apiClient,e);return f=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=FN(this.apiClient,e);return f=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=tx(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=ex(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=JN(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=QN(y),T=new jv;return Object.assign(T,_),T})}else{const h=YN(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=KN(y),T=new jv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=yx(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>y)}else{const h=gx(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>y)}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=ax(e);return f=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=ux(y),T=new e0;return Object.assign(T,_),T})}else{const h=rx(e);return f=te("cachedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=lx(y),T=new e0;return Object.assign(T,_),T})}}}function a0(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function us(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(C){return function(b){return Promise.resolve(b).then(C,_)}}function f(C,b){o[C]&&(r[C]=function(M){return new Promise(function(w,R){l.push([C,M,w,R])>1||p(C,M)})},b&&(r[C]=b(r[C])))}function p(C,b){try{h(o[C](b))}catch(M){T(l[0][3],M)}}function h(C){C.value instanceof Be?Promise.resolve(C.value.v).then(y,_):T(l[0][2],C)}function y(C){p("next",C)}function _(C){p("throw",C)}function T(C,b){C(b),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Pr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof a0=="function"?a0(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(l){i[l]=t[l]&&function(c){return new Promise(function(f,p){c=t[l](c),r(f,p,c.done,c.value)})}}function r(l,c,f,p){Promise.resolve(p).then(function(h){l({value:h,done:f})},c)}}function _x(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:$_(i)}function $_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Tx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function l0(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<i&&t[o].role==="model";)r.push(t[o]),l&&!$_(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Sx{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Ex(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ex{constructor(e,i,o,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Tx(l)}async sendMessage(e){var i;await this.sendPromise;const o=At(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,f;const p=await r,h=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,y=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];y!=null&&(T=(f=y.slice(_))!==null&&f!==void 0?f:[]);const C=h?[h]:[];this.recordHistory(o,C,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const o=At(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const i=e?l0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var o,r;return us(this,arguments,function*(){var c,f,p,h;const y=[];try{for(var _=!0,T=Pr(e),C;C=yield Be(T.next()),c=C.done,!c;_=!0){h=C.value,_=!1;const b=h;if(_x(b)){const M=(r=(o=b.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;M!==void 0&&y.push(M)}yield yield Be(b)}}catch(b){f={error:b}}finally{try{!_&&!c&&(p=T.return)&&(yield Be(p.call(T)))}finally{if(f)throw f.error}}this.recordHistory(i,y)})}recordHistory(e,i,o){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...l0(o)):this.history.push(e),this.history.push(...r)}}class $l extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$l.prototype)}}function Cx(t){const e={},i=d(t,["file"]);return i!=null&&m(e,["file"],i),e}function Ax(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function bx(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],q_(i)),e}function Mx(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function wx(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],q_(i)),e}function Rx(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function Nx(t){const e={},i=d(t,["config"]);return i!=null&&Rx(i,e),e}function xx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}class Ix extends ii{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new uo(ti.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Nx(e);return l=te("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=xx(p),y=new LR;return Object.assign(y,h),y})}}async createInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Cx(e);return l=te("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=Ax(p),y=new kR;return Object.assign(y,h),y})}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wx(e);return l=te("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bx(e);return l=te("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=Mx(p),y=new OR;return Object.assign(y,h),y})}}}function Ml(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Dx(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Kx(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function Ux(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Px(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lx(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function kx(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=d(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=d(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=d(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=d(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=d(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=d(t,["seed"]);R!=null&&m(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],Y_(D));const P=d(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=d(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=d(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const W=d(t,["topK"]);W!=null&&m(e,["topK"],W);const Q=d(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ox(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function qx(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function Gx(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],$d(_));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Dx(At(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let W=Ts(M);Array.isArray(W)&&(W=W.map(Q=>Xx(_s(Q)))),m(e,["setup","tools"],W)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Qx(w));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Hx(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],kx(o));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],Y_($d(_)));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],At(b));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let W=Ts(M);Array.isArray(W)&&(W=W.map(Q=>Zx(_s(Q)))),m(e,["setup","tools"],W)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function Vx(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],xe(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],Gx(r,i)),i}function zx(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],xe(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],Hx(r,i)),i}function Bx(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function Fx(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["weightedPrompts"],o)}return e}function $x(t){const e={},i=d(t,["media"]);if(i!=null){let h=U_(i);Array.isArray(h)&&(h=h.map(y=>Ml(y))),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],Ml(L_(o)));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],Ml(P_(l)));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Yx(t){const e={},i=d(t,["media"]);if(i!=null){let h=U_(i);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const o=d(t,["audio"]);o!=null&&m(e,["audio"],L_(o));const r=d(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&m(e,["video"],P_(l));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Jx(t){const e={},i=d(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const o=d(t,["serverContent"]);o!=null&&m(e,["serverContent"],o);const r=d(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],Wx(c));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(t,["sessionResumptionUpdate"]);return p!=null&&m(e,["sessionResumptionUpdate"],p),e}function Kx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],Ux(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],Px(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],Ml(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Qx(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Y_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=d(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Xx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],Ox(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],qx(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Zx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>Lx(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function Wx(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const o=d(t,["cachedContentTokenCount"]);o!=null&&m(e,["cachedContentTokenCount"],o);const r=d(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(t,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["promptTokensDetails"],C)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["cacheTokensDetails"],C)}const y=d(t,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["responseTokensDetails"],C)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(b=>b)),m(e,["toolUsePromptTokensDetails"],C)}const T=d(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function jx(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function eI(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const o=d(t,["citationMetadata"]);o!=null&&m(e,["citationMetadata"],tI(o));const r=d(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=d(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),m(e,["safetyRatings"],T)}const _=d(t,["urlContextMetadata"]);return _!=null&&m(e,["urlContextMetadata"],_),e}function tI(t){const e={},i=d(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),m(e,["citations"],o)}return e}function nI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let l=un(r);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function iI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["tokensInfo"],r)}return e}function oI(t){const e={},i=d(t,["values"]);i!=null&&m(e,["values"],i);const o=d(t,["statistics"]);return o!=null&&m(e,["statistics"],sI(o)),e}function sI(t){const e={},i=d(t,["truncated"]);i!=null&&m(e,["truncated"],i);const o=d(t,["token_count"]);return o!=null&&m(e,["tokenCount"],o),e}function Yl(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>pD(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function rI(t){const e={},i=d(t,["controlType"]);i!=null&&m(e,["controlType"],i);const o=d(t,["enableControlImageComputation"]);return o!=null&&m(e,["computeControl"],o),e}function aI(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lI(t,e){const i={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&m(e,["systemInstruction"],At(o));const r=d(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>Z_(f))),m(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],jI(l)),i}function uI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let c=un(r);Array.isArray(c)&&(c=c.map(f=>Yl(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&aI(l),i}function cI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let c=un(r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&lI(l,i),i}function fI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);o!=null&&m(e,["totalTokens"],o);const r=d(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function dI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["totalTokens"]);return o!=null&&m(e,["totalTokens"],o),e}function hI(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],xe(t,o)),i}function pI(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],xe(t,o)),i}function mI(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function gI(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function yI(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=d(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=d(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=d(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=d(t,["editMode"]);e!==void 0&&D!=null&&m(e,["parameters","editMode"],D);const P=d(t,["baseSteps"]);return e!==void 0&&P!=null&&m(e,["parameters","editConfig","baseSteps"],P),i}function vI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>TD(p))),m(i,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&yI(c,i),i}function _I(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Jl(l))),m(e,["generatedImages"],r)}return e}function TI(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function SI(t,e){const i={},o=d(t,["taskType"]);e!==void 0&&o!=null&&m(e,["instances[]","task_type"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),i}function EI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let f=zd(t,r);Array.isArray(f)&&(f=f.map(p=>p)),m(i,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&TI(l,i);const c=d(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],xe(t,c)),i}function CI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let c=zd(t,r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&SI(l,i),i}function AI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function bI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>oI(c))),m(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function MI(t){const e={},i=d(t,["endpoint"]);i!=null&&m(e,["name"],i);const o=d(t,["deployedModelId"]);return o!=null&&m(e,["deployedModelId"],o),e}function wI(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function RI(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NI(t){const e={},i=d(t,["mode"]);i!=null&&m(e,["mode"],i);const o=d(t,["allowedFunctionNames"]);if(o!=null&&m(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xI(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const o=d(t,["name"]);o!=null&&m(e,["name"],o);const r=d(t,["parameters"]);r!=null&&m(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function II(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],Yl(At(r)));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=d(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Bd(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&m(o,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=d(e,["safetySettings"]);if(i!==void 0&&P!=null){let oe=P;Array.isArray(oe)&&(oe=oe.map(Ae=>SD(Ae))),m(i,["safetySettings"],oe)}const J=d(e,["tools"]);if(i!==void 0&&J!=null){let oe=Ts(J);Array.isArray(oe)&&(oe=oe.map(Ae=>RD(_s(Ae)))),m(i,["tools"],oe)}const B=d(e,["toolConfig"]);if(i!==void 0&&B!=null&&m(i,["toolConfig"],wD(B)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=d(e,["cachedContent"]);i!==void 0&&W!=null&&m(i,["cachedContent"],oi(t,W));const Q=d(e,["responseModalities"]);Q!=null&&m(o,["responseModalities"],Q);const re=d(e,["mediaResolution"]);re!=null&&m(o,["mediaResolution"],re);const ee=d(e,["speechConfig"]);if(ee!=null&&m(o,["speechConfig"],Fd(ee)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=d(e,["thinkingConfig"]);le!=null&&m(o,["thinkingConfig"],le);const pe=d(e,["imageConfig"]);return pe!=null&&m(o,["imageConfig"],oD(pe)),o}function DI(t,e,i){const o={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&m(i,["systemInstruction"],At(r));const l=d(e,["temperature"]);l!=null&&m(o,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(o,["topP"],c);const f=d(e,["topK"]);f!=null&&m(o,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(o,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(o,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&m(o,["stopSequences"],y);const _=d(e,["responseLogprobs"]);_!=null&&m(o,["responseLogprobs"],_);const T=d(e,["logprobs"]);T!=null&&m(o,["logprobs"],T);const C=d(e,["presencePenalty"]);C!=null&&m(o,["presencePenalty"],C);const b=d(e,["frequencyPenalty"]);b!=null&&m(o,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&m(o,["seed"],M);const w=d(e,["responseMimeType"]);w!=null&&m(o,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&m(o,["responseSchema"],Bd(R));const D=d(e,["responseJsonSchema"]);D!=null&&m(o,["responseJsonSchema"],D);const P=d(e,["routingConfig"]);P!=null&&m(o,["routingConfig"],P);const J=d(e,["modelSelectionConfig"]);J!=null&&m(o,["modelConfig"],J);const B=d(e,["safetySettings"]);if(i!==void 0&&B!=null){let H=B;Array.isArray(H)&&(H=H.map(Z=>Z)),m(i,["safetySettings"],H)}const W=d(e,["tools"]);if(i!==void 0&&W!=null){let H=Ts(W);Array.isArray(H)&&(H=H.map(Z=>Z_(_s(Z)))),m(i,["tools"],H)}const Q=d(e,["toolConfig"]);i!==void 0&&Q!=null&&m(i,["toolConfig"],Q);const re=d(e,["labels"]);i!==void 0&&re!=null&&m(i,["labels"],re);const ee=d(e,["cachedContent"]);i!==void 0&&ee!=null&&m(i,["cachedContent"],oi(t,ee));const le=d(e,["responseModalities"]);le!=null&&m(o,["responseModalities"],le);const pe=d(e,["mediaResolution"]);pe!=null&&m(o,["mediaResolution"],pe);const oe=d(e,["speechConfig"]);oe!=null&&m(o,["speechConfig"],X_(Fd(oe)));const Ae=d(e,["audioTimestamp"]);Ae!=null&&m(o,["audioTimestamp"],Ae);const Je=d(e,["thinkingConfig"]);Je!=null&&m(o,["thinkingConfig"],Je);const Xe=d(e,["imageConfig"]);return Xe!=null&&m(o,["imageConfig"],sD(Xe)),o}function u0(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let c=un(r);Array.isArray(c)&&(c=c.map(f=>Yl(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],II(t,l,i)),i}function c0(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["contents"]);if(r!=null){let c=un(r);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],DI(t,l,i)),i}function f0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(h=>eI(h))),m(e,["candidates"],p)}const r=d(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function d0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(y=>y)),m(e,["candidates"],h)}const r=d(t,["createTime"]);r!=null&&m(e,["createTime"],r);const l=d(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const f=d(t,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function UI(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const y=d(t,["language"]);e!==void 0&&y!=null&&m(e,["parameters","language"],y);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const T=d(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=d(t,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function PI(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&m(e,["parameters","includeSafetyAttributes"],_);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const C=d(t,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M);const w=d(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const R=d(t,["labels"]);e!==void 0&&R!=null&&m(e,["labels"],R);const D=d(t,["imageSize"]);e!==void 0&&D!=null&&m(e,["parameters","sampleImageSize"],D);const P=d(t,["enhancePrompt"]);return e!==void 0&&P!=null&&m(e,["parameters","enhancePrompt"],P),i}function LI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&UI(l,i),i}function kI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&PI(l,i),i}function OI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>QI(c))),m(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],K_(r)),e}function qI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Jl(c))),m(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],Q_(r)),e}function GI(t,e){const i={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=d(t,["lastFrame"]);e!==void 0&&y!=null&&m(e,["instances[0]","lastFrame"],Kl(y));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(C=>VD(C))),m(e,["instances[0]","referenceImages"],T)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function HI(t,e){const i={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const l=d(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&m(e,["parameters","pubsubTopic"],_);const T=d(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const C=d(t,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const b=d(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&m(e,["instances[0]","lastFrame"],_n(M));const w=d(t,["referenceImages"]);if(e!==void 0&&w!=null){let P=w;Array.isArray(P)&&(P=P.map(J=>zD(J))),m(e,["instances[0]","referenceImages"],P)}const R=d(t,["mask"]);e!==void 0&&R!=null&&m(e,["instances[0]","mask"],HD(R));const D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&m(e,["parameters","compressionQuality"],D),i}function VI(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],$I(c)),e}function zI(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],YI(c)),e}function BI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],Kl(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],W_(c));const f=d(e,["source"]);f!=null&&JI(f,i);const p=d(e,["config"]);return p!=null&&GI(p,i),i}function FI(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["prompt"]);r!=null&&m(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],_n(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],j_(c));const f=d(e,["source"]);f!=null&&KI(f,i);const p=d(e,["config"]);return p!=null&&HI(p,i),i}function $I(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ZI(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function YI(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>WI(c))),m(e,["generatedVideos"],l)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&m(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function JI(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],Kl(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],W_(l)),i}function KI(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_n(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],j_(l)),i}function QI(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],rD(i));const o=d(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=d(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],K_(r)),e}function Jl(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],J_(i));const o=d(t,["raiFilteredReason"]);o!=null&&m(e,["raiFilteredReason"],o);const r=d(t,["_self"]);r!=null&&m(e,["safetyAttributes"],Q_(r));const l=d(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function XI(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["mask"],J_(i));const o=d(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(e,["labels"],r)}return e}function ZI(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],qD(i)),e}function WI(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],GD(i)),e}function jI(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const o=d(t,["responseJsonSchema"]);o!=null&&m(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=d(t,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const _=d(t,["presencePenalty"]);_!=null&&m(e,["presencePenalty"],_);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const C=d(t,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const b=d(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&m(e,["responseSchema"],M);const w=d(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const R=d(t,["seed"]);R!=null&&m(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&m(e,["speechConfig"],X_(D));const P=d(t,["stopSequences"]);P!=null&&m(e,["stopSequences"],P);const J=d(t,["temperature"]);J!=null&&m(e,["temperature"],J);const B=d(t,["thinkingConfig"]);B!=null&&m(e,["thinkingConfig"],B);const W=d(t,["topK"]);W!=null&&m(e,["topK"],W);const Q=d(t,["topP"]);if(Q!=null&&m(e,["topP"],Q),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eD(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],xe(t,o)),i}function tD(t,e){const i={},o=d(e,["model"]);return o!=null&&m(i,["_url","name"],xe(t,o)),i}function nD(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function iD(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function oD(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);if(o!=null&&m(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sD(t){const e={},i=d(t,["aspectRatio"]);i!=null&&m(e,["aspectRatio"],i);const o=d(t,["imageSize"]);o!=null&&m(e,["imageSize"],o);const r=d(t,["outputMimeType"]);r!=null&&m(e,["imageOutputOptions","mimeType"],r);const l=d(t,["outputCompressionQuality"]);return l!=null&&m(e,["imageOutputOptions","compressionQuality"],l),e}function rD(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Li(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function J_(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],Li(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Kl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Li(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function _n(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Li(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function aD(t,e,i){const o={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],G_(t,f)),o}function lD(t,e,i){const o={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&m(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],G_(t,f)),o}function uD(t,e){const i={},o=d(e,["config"]);return o!=null&&aD(t,o,i),i}function cD(t,e){const i={},o=d(e,["config"]);return o!=null&&lD(t,o,i),i}function fD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let l=H_(r);Array.isArray(l)&&(l=l.map(c=>fd(c))),m(e,["models"],l)}return e}function dD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let l=H_(r);Array.isArray(l)&&(l=l.map(c=>dd(c))),m(e,["models"],l)}return e}function hD(t){const e={},i=d(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const o=d(t,["segmentationClasses"]);o!=null&&m(e,["maskClasses"],o);const r=d(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function fd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);r!=null&&m(e,["description"],r);const l=d(t,["version"]);l!=null&&m(e,["version"],l);const c=d(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],ND(c));const f=d(t,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const y=d(t,["temperature"]);y!=null&&m(e,["temperature"],y);const _=d(t,["maxTemperature"]);_!=null&&m(e,["maxTemperature"],_);const T=d(t,["topP"]);T!=null&&m(e,["topP"],T);const C=d(t,["topK"]);C!=null&&m(e,["topK"],C);const b=d(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function dd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["displayName"]);o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);r!=null&&m(e,["description"],r);const l=d(t,["versionId"]);l!=null&&m(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>MI(T))),m(e,["endpoints"],_)}const f=d(t,["labels"]);f!=null&&m(e,["labels"],f);const p=d(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],xD(p));const h=d(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const y=d(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["checkpoints"],_)}return e}function pD(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],wI(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],RI(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],jx(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function mD(t){const e={},i=d(t,["productImage"]);return i!=null&&m(e,["image"],_n(i)),e}function gD(t,e){const i={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const r=d(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const y=d(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","compressionQuality"],_);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const C=d(t,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),i}function yD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["source"]);r!=null&&_D(r,i);const l=d(e,["config"]);return l!=null&&gD(l,i),i}function vD(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Jl(r))),m(e,["generatedImages"],o)}return e}function _D(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],_n(r));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>mD(f))),m(e,["instances[0]","productImages"],c)}return i}function TD(t){const e={},i=d(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],_n(i));const o=d(t,["referenceId"]);o!=null&&m(e,["referenceId"],o);const r=d(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const l=d(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],hD(l));const c=d(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],rI(c));const f=d(t,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function K_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function Q_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const o=d(t,["safetyAttributes","scores"]);o!=null&&m(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function SD(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&m(e,["threshold"],o),e}function ED(t){const e={},i=d(t,["image"]);return i!=null&&m(e,["image"],_n(i)),e}function CD(t,e){const i={},o=d(t,["mode"]);e!==void 0&&o!=null&&m(e,["parameters","mode"],o);const r=d(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function AD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["source"]);r!=null&&MD(r,i);const l=d(e,["config"]);return l!=null&&CD(l,i),i}function bD(t){const e={},i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>XI(r))),m(e,["generatedMasks"],o)}return e}function MD(t,e){const i={},o=d(t,["prompt"]);e!==void 0&&o!=null&&m(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_n(r));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],ED(l)),i}function X_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const o=d(t,["voiceConfig"]);if(o!=null&&m(e,["voiceConfig"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function wD(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&m(e,["functionCallingConfig"],NI(i));const o=d(t,["retrievalConfig"]);return o!=null&&m(e,["retrievalConfig"],o),e}function RD(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],nD(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],iD(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Z_(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(T=>xI(T))),m(e,["functionDeclarations"],_)}const o=d(t,["retrieval"]);o!=null&&m(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(t,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const y=d(t,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function ND(t){const e={},i=d(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function xD(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function ID(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function DD(t,e){const i={},o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function UD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","name"],xe(t,o));const r=d(e,["config"]);return r!=null&&ID(r,i),i}function PD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["config"]);return r!=null&&DD(r,i),i}function LD(t,e){const i={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=d(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=d(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=d(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const C=d(t,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),i}function kD(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["_url","model"],xe(t,o));const r=d(e,["image"]);r!=null&&m(i,["instances[0]","image"],_n(r));const l=d(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&LD(c,i),i}function OD(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Jl(l))),m(e,["generatedImages"],r)}return e}function qD(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["encodedVideo"]);o!=null&&m(e,["videoBytes"],Li(o));const r=d(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function GD(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const o=d(t,["bytesBase64Encoded"]);o!=null&&m(e,["videoBytes"],Li(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function HD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["_self"],_n(i));const o=d(t,["maskMode"]);return o!=null&&m(e,["maskMode"],o),e}function VD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],Kl(i));const o=d(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function zD(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],_n(i));const o=d(t,["referenceType"]);return o!=null&&m(e,["referenceType"],o),e}function W_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const o=d(t,["videoBytes"]);o!=null&&m(e,["encodedVideo"],Li(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function j_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["videoBytes"]);o!=null&&m(e,["bytesBase64Encoded"],Li(o));const r=d(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}const BD="Content-Type",FD="X-Server-Timeout",$D="User-Agent",hd="x-goog-api-client",YD="1.30.0",JD=`google-genai-sdk/${YD}`,KD="v1beta1",QD="v1beta",h0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class XD{constructor(e){var i,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:KD,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:QD,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const r=[this.getRequestUrlInternal(i)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&ZD(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await p0(r),new ld(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async r=>(await p0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var i;return us(this,arguments,function*(){const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:p}=yield Be(r.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(p,{stream:!0});try{const _=JSON.parse(h);if("error"in _){const T=JSON.parse(JSON.stringify(_.error)),C=T.status,b=T.code,M=`got status: ${C}. ${JSON.stringify(_)}`;if(b>=400&&b<600)throw new $l({message:M,status:b})}}catch(_){if(_.name==="ApiError")throw _}c+=h;let y=c.match(h0);for(;y;){const _=y[1];try{const T=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Be(new ld(T)),c=c.slice(y[0].length),y=c.match(h0)}catch(T){throw new Error(`exception parsing stream chunk ${_}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=JD+" "+this.clientOptions.userAgentExtra;return e[$D]=i,e[hd]=i,e[BD]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(FD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const f=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const p={file:r},h=this.getFileName(e),y=te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,p,i?.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var r;const l=this.clientOptions.uploader,c=await l.stat(i),f=String(c.size),p=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(i),_={};o?.customMetadata&&(_.customMetadata=o.customMetadata),o?.chunkingConfig&&(_.chunkingConfig=o.chunkingConfig);const T=await this.fetchUploadUrl(h,f,p,y,_,o?.httpOptions);return l.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,r,l,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(f=h?.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function p0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw i>=400&&i<600?new $l({message:r,status:i}):new Error(r)}}function ZD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const f=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const h=c[p],y=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?f[p]=o(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const r=o(i,e);t.body=JSON.stringify(r)}const WD="mcp_used/unknown";let jD=!1;function eT(t){for(const e of t)if(e1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jD}function tT(t){var e;const i=(e=t[hd])!==null&&e!==void 0?e:"";t[hd]=(i+` ${WD}`).trimStart()}function e1(t){return t!==null&&typeof t=="object"&&t instanceof Yd}function t1(t,e=100){return us(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield Be(t.listTools({cursor:o}));for(const c of l.tools)yield yield Be(c),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Yd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Yd(e,i)}async initialize(){var e,i,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const y of this.mcpClients)try{for(var f=!0,p=(i=void 0,Pr(t1(y))),h;h=await p.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(_){i={error:_}}finally{try{!f&&!e&&(o=p.return)&&await o.call(p)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),JR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);i.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return i}}async function n1(t,e,i){const o=new GR;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(o,r),e(o)}class i1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=r1(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const y=new Promise(P=>{h=P}),_=e.callbacks,T=function(){h({})},C=this.apiClient,b={onopen:T,onmessage:P=>{n1(C,_.onmessage,P)},onerror:(i=_?.onerror)!==null&&i!==void 0?i:function(P){},onclose:(o=_?.onclose)!==null&&o!==void 0?o:function(P){}},M=this.webSocketFactory.create(p,s1(c),b);M.connect(),await y;const D={setup:{model:xe(this.apiClient,e.model)}};return M.send(JSON.stringify(D)),new o1(M,this.apiClient)}}class o1{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Fx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Bx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(ss.PLAY)}pause(){this.sendPlaybackControl(ss.PAUSE)}stop(){this.sendPlaybackControl(ss.STOP)}resetContext(){this.sendPlaybackControl(ss.RESET_CONTEXT)}close(){this.conn.close()}}function s1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function r1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const a1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function l1(t,e,i){const o=new qR;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=Jx(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class u1{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new i1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,r,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&eT(e.config.tools)&&tT(_);const T=h1(_);if(this.apiClient.isVertexAI())y=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const ee=this.apiClient.getApiKey();let le="BidiGenerateContent",pe="key";ee?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",pe="access_token"),y=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${le}?${pe}=${ee}`}let C=()=>{};const b=new Promise(ee=>{C=ee}),M=e.callbacks,w=function(){var ee;(ee=M?.onopen)===null||ee===void 0||ee.call(M),C({})},R=this.apiClient,D={onopen:w,onmessage:ee=>{l1(R,M.onmessage,ee)},onerror:(i=M?.onerror)!==null&&i!==void 0?i:function(ee){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(ee){}},P=this.webSocketFactory.create(y,d1(T),D);P.connect(),await b;let J=xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const ee=this.apiClient.getProject(),le=this.apiClient.getLocation();J=`projects/${ee}/locations/${le}/`+J}let B={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ll.AUDIO]}:e.config.responseModalities=[Ll.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],Q=[];for(const ee of W)if(this.isCallableTool(ee)){const le=ee;Q.push(await le.tool())}else Q.push(ee);Q.length>0&&(e.config.tools=Q);const re={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=zx(this.apiClient,re):B=Vx(this.apiClient,re),delete B.config,P.send(JSON.stringify(B)),new f1(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const c1={turnComplete:!0};class f1{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=un(i.turns),e.isVertexAI()||(o=o.map(r=>Yl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(a1)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},c1),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Yx(e)}:i={realtimeInput:$x(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function d1(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function h1(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}const m0=10;function g0(t){var e,i,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(cs(c)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function cs(t){return"callTool"in t&&typeof t.callTool=="function"}function p1(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>cs(r)))!==null&&o!==void 0?o:!1}function y0(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(cs(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function v0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class m1 extends ii{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,r,l,c,f;const p=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!p1(i)||g0(i.config))return await this.generateContentInternal(p);const h=y0(i);if(h.length>0){const M=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let y,_;const T=un(p.contents),C=(l=(r=(o=p.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:m0;let b=0;for(;b<C&&(y=await this.generateContentInternal(p),!(!y.functionCalls||y.functionCalls.length===0));){const M=y.candidates[0].content,w=[];for(const R of(f=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(cs(R)){const P=await R.callTool(y.functionCalls);w.push(...P)}b++,_={role:"user",parts:w},p.contents=un(p.contents),p.contents.push(M),p.contents.push(_),v0(p.config)&&(T.push(M),T.push(_))}return v0(p.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async i=>{var o,r,l,c,f;if(this.maybeMoveToResponseJsonSchem(i),g0(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const p=y0(i);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(o=i?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(f=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const p of o.generatedImages)p&&p?.safetyAttributes&&((r=p?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=p?.safetyAttributes:c.push(p);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async i=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new uo(ti.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var o,r,l,c,f,p;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(f=i.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>cs(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&eT(e.config.tools)){const p=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),tT(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var i,o,r;const l=new Map;for(const c of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(cs(c)){const f=c,p=await f.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var i,o,r;const l=(r=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:m0;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,y,_){var T,C;return us(this,arguments,function*(){for(var b,M,w,R;f<l;){c&&(f++,c=!1);const B=yield Be(h.processParamsMaybeAddMcpUsage(_)),W=yield Be(h.generateContentStreamInternal(B)),Q=[],re=[];try{for(var D=!0,P=(M=void 0,Pr(W)),J;J=yield Be(P.next()),b=J.done,!b;D=!0){R=J.value,D=!1;const ee=R;if(yield yield Be(ee),ee.candidates&&(!((T=ee.candidates[0])===null||T===void 0)&&T.content)){re.push(ee.candidates[0].content);for(const le of(C=ee.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(f<l&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(le.functionCall.name)){const pe=yield Be(y.get(le.functionCall.name).callTool([le.functionCall]));Q.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(ee){M={error:ee}}finally{try{!D&&!b&&(w=P.return)&&(yield Be(w.call(P)))}finally{if(M)throw M.error}}if(Q.length>0){c=!0;const ee=new Sr;ee.candidates=[{content:{role:"user",parts:Q}}],yield yield Be(ee);const le=[];le.push(...re),le.push({role:"user",parts:Q});const pe=un(_.contents).concat(le);_.contents=pe}else break}})})(this,p,e)}async generateContentInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=c0(this.apiClient,e);return f=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=d0(y),T=new Sr;return Object.assign(T,_),T})}else{const h=u0(this.apiClient,e);return f=te("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=f0(y),T=new Sr;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=c0(this.apiClient,e);return f=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return us(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=Pr(_),D;D=yield Be(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=d0(yield Be(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Sr;Object.assign(B,J),yield yield Be(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Be(b.call(R)))}finally{if(C)throw C.error}}})})}else{const h=u0(this.apiClient,e);return f=te("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return us(this,arguments,function*(){var T,C,b,M;try{for(var w=!0,R=Pr(_),D;D=yield Be(R.next()),T=D.done,!T;w=!0){M=D.value,w=!1;const P=M,J=f0(yield Be(P.json()));J.sdkHttpResponse={headers:P.headers};const B=new Sr;Object.assign(B,J),yield yield Be(B)}}catch(P){C={error:P}}finally{try{!w&&!T&&(b=R.return)&&(yield Be(b.call(R)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=CI(this.apiClient,e);return f=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=bI(y),T=new Jv;return Object.assign(T,_),T})}else{const h=EI(this.apiClient,e);return f=te("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=AI(y),T=new Jv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=kI(this.apiClient,e);return f=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=qI(y),T=new Kv;return Object.assign(T,_),T})}else{const h=LI(this.apiClient,e);return f=te("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=OI(y),T=new Kv;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=vI(this.apiClient,e);return l=te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=_I(p),y=new wR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=kD(this.apiClient,e);return l=te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=OD(p),y=new RR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=yD(this.apiClient,e);return l=te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=vD(p),y=new NR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=AD(this.apiClient,e);return l=te("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=bD(p),y=new xR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=tD(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>dd(y))}else{const h=eD(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>fd(y))}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=cD(this.apiClient,e);return f=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dD(y),T=new Qv;return Object.assign(T,_),T})}else{const h=uD(this.apiClient,e);return f=te("{models_url}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fD(y),T=new Qv;return Object.assign(T,_),T})}}async update(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=PD(this.apiClient,e);return f=te("{model}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>dd(y))}else{const h=UD(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>fd(y))}}async delete(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=pI(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=gI(y),T=new Xv;return Object.assign(T,_),T})}else{const h=hI(this.apiClient,e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mI(y),T=new Xv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=cI(this.apiClient,e);return f=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=dI(y),T=new Zv;return Object.assign(T,_),T})}else{const h=uI(this.apiClient,e);return f=te("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=fI(y),T=new Zv;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=nI(this.apiClient,e);return l=te("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>{const h=iI(p),y=new IR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=FI(this.apiClient,e);return f=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c.then(y=>{const _=zI(y),T=new kl;return Object.assign(T,_),T})}else{const h=BI(this.apiClient,e);return f=te("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const _=VI(y),T=new kl;return Object.assign(T,_),T})}}}class g1 extends ii{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=SR(e);return f=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),c}else{const h=TR(e);return f=te("{operationName}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}}async fetchPredictVideosOperationInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=hR(e);return l=te("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function y1(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function v1(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>w1(l))),m(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&m(e,["role"],o),e}function _1(t,e,i){const o={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&m(i,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&m(i,["bidiGenerateContentSetup"],M1(t,f));const p=d(e,["lockAdditionalFields"]);return i!==void 0&&p!=null&&m(i,["fieldMask"],p),o}function T1(t,e){const i={},o=d(e,["config"]);return o!=null&&m(i,["config"],_1(t,o,i)),i}function S1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function E1(t){const e={},i=d(t,["id"]);i!=null&&m(e,["id"],i);const o=d(t,["args"]);o!=null&&m(e,["args"],o);const r=d(t,["name"]);if(r!=null&&m(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function A1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function b1(t,e){const i={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=d(t,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","speechConfig"],$d(_));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const C=d(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],v1(At(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let W=Ts(M);Array.isArray(W)&&(W=W.map(Q=>N1(_s(Q)))),m(e,["setup","tools"],W)}const w=d(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],R1(w));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&m(e,["setup","outputAudioTranscription"],D);const P=d(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&m(e,["setup","realtimeInputConfig"],P);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&m(e,["setup","contextWindowCompression"],J);const B=d(t,["proactivity"]);return e!==void 0&&B!=null&&m(e,["setup","proactivity"],B),i}function M1(t,e){const i={},o=d(e,["model"]);o!=null&&m(i,["setup","model"],xe(t,o));const r=d(e,["config"]);return r!=null&&m(i,["config"],b1(r,i)),i}function w1(t){const e={},i=d(t,["mediaResolution"]);i!=null&&m(e,["mediaResolution"],i);const o=d(t,["codeExecutionResult"]);o!=null&&m(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],S1(l));const c=d(t,["functionCall"]);c!=null&&m(e,["functionCall"],E1(c));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],y1(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const y=d(t,["thought"]);y!=null&&m(e,["thought"],y);const _=d(t,["thoughtSignature"]);_!=null&&m(e,["thoughtSignature"],_);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function R1(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N1(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(_=>_)),m(e,["functionDeclarations"],y)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&m(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],C1(f));const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],A1(p));const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function x1(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function I1(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=x1(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>c.includes(h)?`generationConfig.${h}`:h));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class D1 extends ii{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=T1(this.apiClient,e);l=te("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=I1(f,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}function U1(t,e){const i={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&m(e,["displayName"],o),i}function P1(t){const e={},i=d(t,["config"]);return i!=null&&U1(i,e),e}function L1(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function k1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&L1(o,e),e}function O1(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function q1(t,e){const i={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),i}function G1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["metadata"]);o!=null&&m(e,["metadata"],o);const r=d(t,["done"]);r!=null&&m(e,["done"],r);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],V1(c)),e}function H1(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=d(t,["fileName"]);o!=null&&m(e,["fileName"],o);const r=d(t,["config"]);return r!=null&&q1(r,e),e}function V1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["parent"]);o!=null&&m(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function z1(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function B1(t){const e={},i=d(t,["config"]);return i!=null&&z1(i,e),e}function F1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function $1(t,e){const i={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["mimeType"],o);const r=d(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function Y1(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const o=d(t,["config"]);return o!=null&&$1(o,e),e}function J1(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function K1(t,e){const i={},o=d(t,["force"]);return e!==void 0&&o!=null&&m(e,["_query","force"],o),i}function Q1(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const o=d(t,["config"]);return o!=null&&K1(o,e),e}function X1(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function Z1(t,e){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),i}function W1(t){const e={},i=d(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const o=d(t,["config"]);return o!=null&&Z1(o,e),e}function j1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(e,["nextPageToken"],o);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}class eU extends ii{constructor(e){super(),this.apiClient=e,this.list=async i=>new uo(ti.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=X1(e);return l=te("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W1(e);return l=te("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=j1(p),y=new DR;return Object.assign(y,h),y})}}}class tU extends ii{constructor(e,i=new eU(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new uo(ti.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P1(e);return l=te("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O1(e);return l=te("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var i,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k1(e);r=te("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=B1(e);return l=te("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=F1(p),y=new UR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Y1(e);return l=te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=J1(p),y=new PR;return Object.assign(y,h),y})}}async importFile(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=H1(e);return l=te("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>{const h=G1(p),y=new Hd;return Object.assign(y,h),y})}}}function nU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function iU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function oU(t,e,i){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&m(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function sU(t,e,i){const o={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=d(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec"],_0(C))}else if(r==="PREFERENCE_TUNING"){const C=d(t,["validationDataset"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec"],_0(C))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=d(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(f==="PREFERENCE_TUNING"){const C=d(t,["epochCount"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const C=d(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(p==="PREFERENCE_TUNING"){const C=d(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=d(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=d(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let y=d(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=d(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(y==="PREFERENCE_TUNING"){const C=d(t,["adapterSize"]);e!==void 0&&C!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const T=d(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),o}function rU(t,e){const i={},o=d(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&yU(l);const c=d(t,["config"]);return c!=null&&oU(c,i),i}function aU(t,e){const i={},o=d(t,["baseModel"]);o!=null&&m(i,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&m(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&vU(l,i,e);const c=d(t,["config"]);return c!=null&&sU(c,i,e),i}function lU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function uU(t,e){const i={},o=d(t,["name"]);return o!=null&&m(i,["_url","name"],o),i}function cU(t,e,i){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function fU(t,e,i){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),o}function dU(t,e){const i={},o=d(t,["config"]);return o!=null&&cU(o,i),i}function hU(t,e){const i={},o=d(t,["config"]);return o!=null&&fU(o,i),i}function pU(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>nT(f))),m(i,["tuningJobs"],c)}return i}function mU(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&m(i,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>pd(f))),m(i,["tuningJobs"],c)}return i}function gU(t,e){const i={},o=d(t,["name"]);o!=null&&m(i,["model"],o);const r=d(t,["name"]);return r!=null&&m(i,["endpoint"],r),i}function yU(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),m(i,["examples","examples"],r)}return i}function vU(t,e,i){const o={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function nT(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["state"]);l!=null&&m(i,["state"],O_(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["tuningTask","startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["tuningTask","completeTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=d(t,["description"]);y!=null&&m(i,["description"],y);const _=d(t,["baseModel"]);_!=null&&m(i,["baseModel"],_);const T=d(t,["_self"]);return T!=null&&m(i,["tunedModel"],gU(T)),i}function pd(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["state"]);l!=null&&m(i,["state"],O_(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(i,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(i,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(i,["updateTime"],h);const y=d(t,["error"]);y!=null&&m(i,["error"],y);const _=d(t,["description"]);_!=null&&m(i,["description"],_);const T=d(t,["baseModel"]);T!=null&&m(i,["baseModel"],T);const C=d(t,["tunedModel"]);C!=null&&m(i,["tunedModel"],C);const b=d(t,["preTunedModel"]);b!=null&&m(i,["preTunedModel"],b);const M=d(t,["supervisedTuningSpec"]);M!=null&&m(i,["supervisedTuningSpec"],M);const w=d(t,["preferenceOptimizationSpec"]);w!=null&&m(i,["preferenceOptimizationSpec"],w);const R=d(t,["tuningDataStats"]);R!=null&&m(i,["tuningDataStats"],R);const D=d(t,["encryptionSpec"]);D!=null&&m(i,["encryptionSpec"],D);const P=d(t,["partnerModelTuningSpec"]);P!=null&&m(i,["partnerModelTuningSpec"],P);const J=d(t,["customBaseModel"]);J!=null&&m(i,["customBaseModel"],J);const B=d(t,["experiment"]);B!=null&&m(i,["experiment"],B);const W=d(t,["labels"]);W!=null&&m(i,["labels"],W);const Q=d(t,["outputUri"]);Q!=null&&m(i,["outputUri"],Q);const re=d(t,["pipelineJob"]);re!=null&&m(i,["pipelineJob"],re);const ee=d(t,["serviceAccount"]);ee!=null&&m(i,["serviceAccount"],ee);const le=d(t,["tunedModelDisplayName"]);le!=null&&m(i,["tunedModelDisplayName"],le);const pe=d(t,["veoTuningSpec"]);return pe!=null&&m(i,["veoTuningSpec"],pe),i}function _U(t,e){const i={},o=d(t,["sdkHttpResponse"]);o!=null&&m(i,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&m(i,["name"],r);const l=d(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(t,["done"]);c!=null&&m(i,["done"],c);const f=d(t,["error"]);return f!=null&&m(i,["error"],f),i}function _0(t,e){const i={},o=d(t,["gcsUri"]);o!=null&&m(i,["validationDatasetUri"],o);const r=d(t,["vertexDatasetResource"]);return r!=null&&m(i,["validationDatasetUri"],r),i}class TU extends ii{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new uo(ti.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:ad.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=uU(e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>pd(y))}else{const h=lU(e);return f=te("{name}",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>nT(y))}}async listInternal(e){var i,o,r,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const h=hU(e);return f=te("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=mU(y),T=new Wv;return Object.assign(T,_),T})}else{const h=dU(e);return f=te("tunedModels",h._url),p=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:y.headers},T})),c.then(y=>{const _=pU(y),T=new Wv;return Object.assign(T,_),T})}}async cancel(e){var i,o,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=iU(e);c=te("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const p=nU(e);c=te("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=aU(e,e);return l=te("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>pd(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rU(e);return l=te("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:p.headers},y})),r.then(p=>_U(p))}}}class SU{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EU=1024*1024*8,CU=3,AU=1e3,bU=2,ql="x-goog-upload-status";async function MU(t,e,i){var o;const r=await iT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[ql])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function wU(t,e,i){var o;const r=await iT(t,e,i),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[ql])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=I_(l),f=new Vd;return Object.assign(f,c),f}async function iT(t,e,i){var o,r;let l=0,c=0,f=new ld(new Response),p="upload";for(l=t.size;c<l;){const h=Math.min(EU,l-c),y=t.slice(c,c+h);c+h>=l&&(p+=", finalize");let _=0,T=AU;for(;_<CU&&(f=await i.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((o=f?.headers)===null||o===void 0)&&o[ql]));)_++,await NU(T),T=T*bU;if(c+=h,((r=f?.headers)===null||r===void 0?void 0:r[ql])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function RU(t){return{size:t.size,type:t.type}}function NU(t){return new Promise(e=>setTimeout(e,t))}class xU{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MU(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wU(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RU(e)}}class IU{create(e,i,o){return new DU(e,i,o)}}class DU{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const T0="x-goog-api-key";class UU{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(T0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(T0,this.apiKey)}}}const PU="gl-node/";class oT{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=fR(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new UU(this.apiKey);this.apiClient=new XD({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:PU+"web",uploader:new xU,downloader:new SU}),this.models=new m1(this.apiClient),this.live=new u1(this.apiClient,r,new IU),this.batches=new HN(this.apiClient),this.chats=new Sx(this.models,this.apiClient),this.caches=new vx(this.apiClient),this.files=new Ix(this.apiClient),this.operations=new g1(this.apiClient),this.authTokens=new D1(this.apiClient),this.tunings=new TU(this.apiClient),this.fileSearchStores=new tU(this.apiClient)}}let Lr=null;function LU(t){localStorage.setItem("gemini_api_key",t),Lr=new oT({apiKey:t})}function sT(){return localStorage.getItem("gemini_api_key")}function md(){return!!sT()}function kU(){Lr=null,localStorage.removeItem("gemini_api_key")}function OU(){if(!Lr){const t=sT();if(!t)throw new Error("Gemini API key not set. Add your key in Settings.");Lr=new oT({apiKey:t})}return Lr}function qU(t){return t.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim()}async function GU(t,e=[]){const i=OU(),o=e&&e.length>0,r=t&&t.trim().length>0;let l="";r&&o?l=`The user provided a text description AND ${e.length} image(s). Use ALL information together - the text gives context, images show the actual food and/or nutrition labels.`:o?l=`The user provided ${e.length} image(s) of their meal. These may include food photos and/or nutrition labels.`:l="The user provided a text description of their meal.";const c=`Analyze this meal and provide complete nutritional breakdown.

${l}

${r?`Text description: "${t}"`:""}

Instructions:
- If you see a NUTRITION LABEL in any image, use those EXACT values for that product
- If you see FOOD in an image, identify items and estimate portions
- Combine information from text AND images to build the complete meal
- If text mentions something not visible in images, include it anyway

Return ONLY valid JSON with no markdown formatting:
{
  "meal_name": "short descriptive name (max 50 chars)",
  "ingredients": [
    {
      "name": "ingredient name",
      "quantity": number,
      "unit": "g" | "ml" | "cup" | "tbsp" | "tsp" | "oz" | "slice" | "piece",
      "grams": number,
      "nutrients": {
        "calories": number,
        "purines": number,
        "protein": number,
        "carbs": number,
        "fat": number,
        "fiber": number,
        "sodium": number,
        "sugar": number
      }
    }
  ],
  "total_nutrients": {
    "calories": number,
    "purines": number,
    "protein": number,
    "carbs": number,
    "fat": number,
    "fiber": number,
    "sodium": number,
    "sugar": number
  }
}

Rules:
- Make reasonable portion estimates if not specified (e.g., "an egg" = 50g, "a glass of juice" = 250ml)
- "grams" is the converted weight in grams for the specified quantity
- "nutrients" are the values for THAT ingredient's quantity (not per 100g)
- "total_nutrients" is the sum of all ingredients
- Use USDA database values. For purines, use medical references (high purine foods: organ meats, sardines, anchovies ~300-800mg/100g; moderate: beef, pork ~100-200mg/100g; low: eggs, dairy, most vegetables ~0-50mg/100g)
- All values: calories=kcal, purines/sodium=mg, all others=grams`;try{const f=[{text:c}];if(o)for(const y of e)f.push({inlineData:{data:y.base64,mimeType:y.mimeType||"image/jpeg"}});const h=(await i.models.generateContent({model:"gemini-2.5-flash",contents:f})).text;return JSON.parse(qU(h))}catch(f){throw console.error("Failed to analyze meal:",f),new Error(`Failed to analyze meal: ${f.message}`)}}async function HU(t,e=[]){const i=await GU(t,e),o=i.ingredients.map(r=>{const l=r.grams||100,c=100/l,f=rT(r.nutrients,c);return{name:r.name,normalized_name:VU(r.name),quantity:r.quantity,unit:r.unit,grams:l,nutrients_per_100g:f,nutrients_per_unit:r.nutrients}});return{meal_name:i.meal_name,ingredients:o,total_nutrients:i.total_nutrients}}function VU(t){return t.toLowerCase().trim().replace(/s$/,"").replace(/ies$/,"y").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")}function rT(t,e){const i={};return Object.keys(t).forEach(o=>{i[o]=Math.round(t[o]*e*10)/10}),i}function S0(t,e){const i=t.quantity||1,o=e/i,r=(t.grams||100)*o;return{...t,quantity:e,grams:r,nutrients_per_unit:rT(t.nutrients_per_unit||{},o)}}function zU(t){return t.reduce((e,i)=>(Object.keys(i.nutrients_per_unit).forEach(o=>{e[o]=(e[o]||0)+i.nutrients_per_unit[o]}),e),{})}const BU=t=>new Promise((e,i)=>{const o=new FileReader;o.onload=()=>{const r=o.result.split(",")[1];e({base64:r,mimeType:t.type||"image/jpeg",preview:o.result,name:t.name})},o.onerror=i,o.readAsDataURL(t)}),wf=[{key:"breakfast",icon:"",label:"Brekkie"},{key:"lunch",icon:"",label:"Lunch"},{key:"dinner",icon:"",label:"Dinner"},{key:"snack",icon:"",label:"Snack"}],Rf=t=>{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},FU=t=>{const e=[];for(let i=-3;i<=3;i++){const o=new Date(t);o.setDate(o.getDate()+i),e.push({date:o,dateKey:Rf(o),dayName:o.toLocaleDateString("en-US",{weekday:"short"}).charAt(0),dayNum:o.getDate(),isToday:Rf(o)===Rf(new Date)})}return e};function $U(){const{user:t,isLoading:e}=Fr(),[i,o]=U.useState(Jy()),[r,l]=U.useState(new Date),[c,f]=U.useState("breakfast"),[p,h]=U.useState(""),[y,_]=U.useState(!1),[T,C]=U.useState(!1),[b,M]=U.useState(null),[w,R]=U.useState([]),D=U.useRef(null),P=U.useRef(null),[J,B]=U.useState(null),[W,Q]=U.useState(""),[re,ee]=U.useState("snack"),[le,pe]=U.useState(""),[oe,Ae]=U.useState(null),[Je,Xe]=U.useState(""),[H,Z]=U.useState(null),[ie,X]=U.useState({}),{meals:ce,isLoading:x,addMeal:F,updateMeal:G,deleteMeal:j,getDailyTotals:de}=N_(i),{totalHydration:me,adjustHydration:we,isLoading:ht}=x_(i),{addToStash:Ke,bottles:ki}=qd(),Cs=[...[{id:"quick-250",name:"+250ml",capacity_ml:250,icon:null},{id:"quick-500",name:"+500ml",capacity_ml:500,icon:null}],...ki],$r=FU(r),He=t?.thresholds||{},co=ce.filter(K=>K.meal_type!=="hydration"),fn={...de(i)},Jr=aR(fn,He),As=e||x||ht,fo=async K=>{await we(K)},bs=K=>{o(K)},Kr=K=>{const fe=new Date(r);fe.setDate(fe.getDate()+(K==="next"?7:-7)),l(fe)},Qr=async K=>{const fe=Array.from(K.target.files||[]);if(fe.length!==0){try{const be=await Promise.all(fe.map(BU));R(Ie=>[...Ie,...be])}catch(be){console.error("Failed to read image:",be),M("Failed to read image. Please try again.")}K.target.value=""}},bt=K=>{R(fe=>fe.filter((be,Ie)=>Ie!==K))},Ql=async K=>{K.preventDefault();const fe=p.trim().length>0,be=w.length>0;if(!(!fe&&!be)){if(M(null),!md()){await F({date:i,meal_type:c,meal_name:fe?p:"Meal with photos",ingredients:[],total_nutrients:{calories:0,purines:0,protein:0,carbs:0,fat:0,fiber:0,sodium:0,sugar:0},hydration_ml:0,analysis_method:"manual"}),h(""),R([]);return}C(!0);try{const Ie=w.map(po=>({base64:po.base64,mimeType:po.mimeType})),{meal_name:Et,ingredients:Rt,total_nutrients:eu}=await HU(p,Ie),ea={date:i,meal_type:c,meal_name:Et,description:p,ingredients:Rt,total_nutrients:eu,hydration_ml:0,analysis_method:be?"ai-vision":"ai",image_count:w.length};await F(ea),h(""),R([])}catch(Ie){console.error("AI parsing failed:",Ie),M(Ie.message||"Failed to analyze meal. Try again or check your API key.")}finally{C(!1)}}},Xr=async K=>{confirm("Delete this meal?")&&await j(K)},Zr=K=>{B(K),Q(K.meal_name),ee(K.meal_type),pe(K.date)},ho=async()=>{J&&(await G(J.id,{meal_name:W,meal_type:re,date:le}),B(null))},Wr=()=>{B(null),Q(""),ee("snack"),pe("")},jr=K=>{Ae(K),Xe(Jy())},Xl=async()=>{if(!oe||!Je)return;const K={date:Je,meal_type:oe.meal_type,meal_name:oe.meal_name,description:oe.description,ingredients:oe.ingredients,total_nutrients:oe.total_nutrients,hydration_ml:0,analysis_method:"copy"};await F(K),Ae(null),alert(`Meal copied to ${Je}! `)},Zl=K=>{Z({mealId:K.id,originalIngredients:K.ingredients,ingredients:[...K.ingredients]}),X({})},Oi=(K,fe)=>{const be=parseFloat(fe)||0;X(Ie=>({...Ie,[K]:be}))},Mt=async()=>{if(!H)return;const K=H.ingredients.map((be,Ie)=>ie[Ie]!==void 0&&ie[Ie]!==be.quantity?S0(be,ie[Ie]):be),fe=zU(K);await G(H.mealId,{ingredients:K,total_nutrients:fe}),Z(null),X({})},Tn=async K=>{if(!H)return;const fe=H.ingredients.filter((Et,Rt)=>Rt!==K);Z(Et=>({...Et,ingredients:fe}));const be={...ie};delete be[K];const Ie={};Object.keys(be).forEach(Et=>{const Rt=parseInt(Et);Rt>K?Ie[Rt-1]=be[Et]:Ie[Rt]=be[Et]}),X(Ie)},wt=()=>{Z(null),X({})},Wl=async K=>{await Ke({type:"meal",name:K.meal_name,ingredients:K.ingredients||[],total_nutrients:K.total_nutrients||{},use_count:0}),alert(`"${K.meal_name}" saved to your Dragon's Hoard! `)},jl=(K=>{const[fe,be,Ie]=K.split("-").map(Number);return new Date(fe,be-1,Ie)})(i).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});return As?E.jsxs("div",{className:"page diary-page",children:[E.jsx(Ui,{title:"Dragon Keeper",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Waking up the dragon..."})]})]}):E.jsxs("div",{className:"page diary-page",children:[E.jsx(Ui,{title:"Dragon Keeper",subtitle:`Feeding log for ${jl}`}),E.jsxs("div",{className:"calendar-ribbon card",children:[E.jsx("button",{className:"cal-nav",onClick:()=>Kr("prev"),"aria-label":"Previous week",children:""}),E.jsx("div",{className:"cal-days",children:$r.map(K=>{const fe=K.dateKey===i;return E.jsxs("button",{className:`cal-day ${fe?"active":""} ${K.isToday?"today":""}`,onClick:()=>bs(K.dateKey),children:[E.jsx("span",{className:"cal-day-name",children:K.dayName}),E.jsx("span",{className:"cal-day-num",children:K.dayNum}),K.isToday&&E.jsx("span",{className:"cal-day-indicator",children:""})]},K.dateKey)})}),E.jsx("button",{className:"cal-nav",onClick:()=>Kr("next"),"aria-label":"Next week",children:""})]}),E.jsx("div",{className:"meal-type-selector",children:wf.map(K=>E.jsxs("button",{className:`meal-type-btn ${c===K.key?"active":""}`,onClick:()=>f(K.key),children:[E.jsx("span",{className:"meal-icon",children:K.icon}),E.jsx("span",{className:"meal-label",children:K.label})]},K.key))}),E.jsxs("form",{className:"meal-input-section card",onSubmit:Ql,children:[E.jsx("label",{className:"input-label",children:"What did your dragon eat? "}),E.jsx("div",{className:"input-row",children:E.jsx("input",{type:"text",placeholder:w.length>0?"Add context or just tap Log It!":"e.g., grilled chicken with rice...",value:p,onChange:K=>h(K.target.value),disabled:T})}),w.length>0&&E.jsx("div",{className:"attached-images",children:w.map((K,fe)=>E.jsxs("div",{className:"attached-image",children:[E.jsx("img",{src:K.preview,alt:`Attached ${fe+1}`}),E.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>bt(fe),"aria-label":"Remove image",children:""})]},fe))}),b&&E.jsx("div",{className:"ai-error",children:E.jsxs("span",{children:[" ",b]})}),E.jsx("input",{type:"file",ref:D,accept:"image/*",capture:"environment",onChange:Qr,style:{display:"none"}}),E.jsx("input",{type:"file",ref:P,accept:"image/*",multiple:!0,onChange:Qr,style:{display:"none"}}),E.jsxs("div",{className:"input-actions",children:[E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,onClick:()=>D.current?.click(),title:"Take a photo",children:""}),E.jsx("button",{type:"button",className:"btn btn-secondary",disabled:T,onClick:()=>P.current?.click(),title:"Choose from gallery",children:""}),E.jsx("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:T||!p.trim()&&w.length===0,children:T?E.jsx(E.Fragment,{children:" Analyzing..."}):E.jsx(E.Fragment,{children:"Log It! "})})]}),!md()&&E.jsx("p",{className:"no-api-hint text-muted text-sm",children:" Set up AI in Settings  Dragon's Intelligence to auto-analyze meals!"})]}),E.jsxs("div",{className:"hydration-section card",children:[E.jsxs("div",{className:"hydration-header",children:[E.jsx("span",{className:"hydration-title",children:" Dragon's Hydration"}),E.jsxs("span",{className:"hydration-value",children:[me,"/",He.hydration_target||2e3,"ml"]})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:`progress-bar-fill ${me>=(He.hydration_target||2e3)?"success":"warning"}`,style:{width:`${Math.min(me/(He.hydration_target||2e3)*100,100)}%`}})}),E.jsxs("div",{className:"hydration-buttons",children:[E.jsx("button",{className:"btn btn-secondary btn-danger-outline",onClick:()=>fo(-250),children:"250"}),Cs.map(K=>E.jsxs("button",{className:"btn btn-secondary",onClick:()=>fo(K.capacity_ml),children:[K.icon||"",K.icon?" ":"",K.name||`+${K.capacity_ml}ml`]},K.id))]})]}),E.jsxs("section",{className:"meals-section",children:[E.jsx("h2",{className:"section-title",children:"Today's Feast"}),co.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx(Pl,{state:"curious"}),E.jsx("p",{children:"No meals logged yet today!"}),E.jsx("p",{className:"text-muted",children:"Feed your dragon to get started."})]}):E.jsx("div",{className:"meals-list",children:co.map(K=>E.jsxs("div",{className:"meal-card card",children:[E.jsxs("div",{className:"meal-header",children:[E.jsx("span",{className:"meal-type-badge",children:wf.find(fe=>fe.key===K.meal_type)?.icon||""}),E.jsx("h3",{className:"meal-name",children:K.meal_name})]}),K.ingredients&&K.ingredients.length>0&&E.jsx("div",{className:"meal-ingredients-section",children:H?.mealId===K.id?E.jsxs("div",{className:"ingredients-edit-mode",children:[E.jsx("ul",{className:"meal-ingredients editing",children:H.ingredients.map((fe,be)=>{const Ie=ie[be]!==void 0?ie[be]:fe.quantity,Et=ie[be]!==void 0?S0(fe,ie[be]):fe;return E.jsxs("li",{className:"ingredient-edit-row",children:[E.jsxs("span",{className:"ing-name",children:[" ",fe.name]}),E.jsx("input",{type:"number",className:"ing-qty-input",value:Ie,onChange:Rt=>Oi(be,Rt.target.value),min:"0",step:"0.1"}),E.jsx("span",{className:"ing-unit",children:fe.unit}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(Et.nutrients_per_unit?.calories||0),"  ",Math.round(Et.nutrients_per_unit?.purines||0)]}),E.jsx("button",{className:"btn-icon btn-delete-ing",onClick:()=>Tn(be),title:"Remove ingredient",children:""})]},be)})}),E.jsxs("div",{className:"ingredient-edit-actions",children:[E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:wt,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary btn-sm",onClick:Mt,children:" Save Changes"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("ul",{className:"meal-ingredients",children:K.ingredients.map((fe,be)=>E.jsxs("li",{children:[E.jsxs("span",{className:"ing-name",children:[" ",fe.name]}),E.jsxs("span",{className:"ing-qty",children:["(",fe.quantity||"?",fe.unit||"g",")"]}),E.jsxs("span",{className:"ing-nutrients",children:["",Math.round(fe.nutrients_per_unit?.calories||0),"  ",Math.round(fe.nutrients_per_unit?.purines||0)]})]},be))}),E.jsx("button",{type:"button",className:"btn btn-secondary btn-sm btn-edit-ingredients",onClick:fe=>{fe.preventDefault(),fe.stopPropagation(),Zl(K)},children:" Edit quantities"})]})}),E.jsxs("div",{className:"meal-nutrients meal-totals",children:[E.jsx("span",{className:"total-label",children:"Total:"}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.calories||0)," cal"]}),E.jsxs("span",{children:[" ",Math.round(K.total_nutrients?.purines||0),"mg"]})]}),E.jsxs("div",{className:"meal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>Zr(K),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>jr(K),children:" Copy"}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>Xr(K.id),children:""}),E.jsx("button",{className:"btn btn-secondary",onClick:()=>Wl(K),children:" Stash"})]})]},K.id))})]}),E.jsxs("section",{className:"daily-status card",children:[E.jsxs("div",{className:"status-header",onClick:()=>_(!y),children:[E.jsx("h3",{children:" Dragon's Daily Status"}),E.jsx(Pl,{state:Jr,showMessage:!1,size:"small"}),E.jsx("span",{className:"toggle-hint",children:y?"":""})]}),E.jsx(Jn,{nutrient:"calories",value:fn.calories||0,target:He.calories_max||2e3,min:He.calories_min||1500,max:He.calories_max||2e3}),E.jsx(Jn,{nutrient:"purines",value:fn.purines||0,target:He.purines_max||400,max:He.purines_max||400}),y&&E.jsxs("div",{className:"all-nutrients animate-fade-in",children:[E.jsx(Jn,{nutrient:"protein",value:fn.protein||0,target:He.protein_target||60,compact:!0}),E.jsx(Jn,{nutrient:"carbs",value:fn.carbs||0,target:He.carbs_target||250,compact:!0}),E.jsx(Jn,{nutrient:"fat",value:fn.fat||0,target:He.fat_target||65,compact:!0}),E.jsx(Jn,{nutrient:"fiber",value:fn.fiber||0,target:He.fiber_target||30,compact:!0}),E.jsx(Jn,{nutrient:"sodium",value:fn.sodium||0,target:He.sodium_max||2300,max:He.sodium_max||2300,compact:!0}),E.jsx(Jn,{nutrient:"sugar",value:fn.sugar||0,target:He.sugar_max||50,max:He.sugar_max||50,compact:!0}),E.jsx(Jn,{nutrient:"hydration",value:me,target:He.hydration_target||2e3,compact:!0})]})]}),J&&E.jsx("div",{className:"modal-overlay",onClick:Wr,children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Edit Meal"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Name"}),E.jsx("input",{type:"text",value:W,onChange:K=>Q(K.target.value),placeholder:"e.g., Grilled Chicken"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Meal Type"}),E.jsx("select",{value:re,onChange:K=>ee(K.target.value),children:wf.map(K=>E.jsxs("option",{value:K.key,children:[K.icon," ",K.label]},K.key))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Date (move to different day)"}),E.jsx("input",{type:"date",value:le,onChange:K=>pe(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:Wr,children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:ho,children:" Save"})]})]})}),oe&&E.jsx("div",{className:"modal-overlay",onClick:()=>Ae(null),children:E.jsxs("div",{className:"modal-content card",onClick:K=>K.stopPropagation(),children:[E.jsx("h2",{children:" Copy Meal"}),E.jsxs("p",{children:['Copy "',oe.meal_name,'" to another date:']}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Target Date"}),E.jsx("input",{type:"date",value:Je,onChange:K=>Xe(K.target.value)})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:()=>Ae(null),children:"Cancel"}),E.jsx("button",{className:"btn btn-primary",onClick:Xl,children:" Copy Meal"})]})]})})]})}function YU(){return E.jsxs("div",{className:"page charts-page",children:[E.jsx(Ui,{title:"Dragon's Scroll",subtitle:"View your nutrition history"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Pl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon's Scroll will show beautiful charts of your nutrition history."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" View by week, month, or custom range"}),E.jsx("li",{children:" Daily, weekly, or monthly grouping"}),E.jsx("li",{children:" Filter by nutrient type"}),E.jsx("li",{children:" Export your data"})]})]})]})}function JU(){return E.jsxs("div",{className:"page oracle-page",children:[E.jsx(Ui,{title:"Dragon Oracle",subtitle:"Get meal recommendations"}),E.jsxs("div",{className:"coming-soon card",children:[E.jsx(Pl,{state:"curious"}),E.jsx("h2",{children:"Coming Soon!"}),E.jsx("p",{className:"text-muted",children:"The Dragon Oracle will suggest meals based on your remaining nutrition budget."}),E.jsxs("ul",{className:"feature-list",children:[E.jsx("li",{children:" Familiar meals you love"}),E.jsx("li",{children:" Twisted versions of favorites"}),E.jsx("li",{children:" Wild new adventures"}),E.jsx("li",{children:" AI-powered recommendations"})]})]})]})}function KU(){const t=Hl(),{user:e,isLoading:i,updateProfile:o,updateThresholds:r,updateTheme:l,saveUser:c}=Fr(),{savedMeals:f,bottles:p}=qd(),[h,y]=U.useState({name:"Dragon Keeper",sex:"male",age:30,weight_kg:75,height_cm:175,activity_level:"moderate",dietary_conditions:[]}),[_,T]=U.useState(od),[C,b]=U.useState("emerald"),[M,w]=U.useState("#66BB6A"),[R,D]=U.useState(!1),[P,J]=U.useState(!1),[B,W]=U.useState(""),[Q,re]=U.useState(!1),[ee,le]=U.useState(md()?"saved":"none");U.useEffect(()=>{e&&(y({name:e.name||"Dragon Keeper",...e.profile}),T(e.thresholds||od),b(e.theme?.preset||"emerald"),w(e.theme?.seed_color_hex||"#66BB6A"))},[e]);const pe=()=>{const X=eR(h);T(X),J(!0)},oe=(X,ce)=>{T(x=>({...x,[X]:Number(ce)})),J(!0)},Ae=X=>{y(ce=>({...ce,...X})),J(!0)},Je=async X=>{b(X);const ce=Ur[X],x=oo(ce.seedColor,ce.isDark);so(x),await l(X,ce.seedColor)},Xe=async X=>{w(X),b("custom");const ce=oo(X,!1);so(ce),await l("custom",X)},H=()=>{B.trim()&&(LU(B.trim()),le("saved"),W(""),re(!1),alert("AI API key saved! Your dragon can now analyze meals. "))},Z=()=>{confirm("Remove your AI API key? Your dragon won't be able to analyze meals.")&&(kU(),le("none"),W(""))},ie=async()=>{const X={...e,name:h.name,profile:{sex:h.sex,age:h.age,weight_kg:h.weight_kg,height_cm:h.height_cm,activity_level:h.activity_level,dietary_conditions:h.dietary_conditions},thresholds:_};await o(X.profile),await r(_),await c(X),J(!1),alert("Dragon's settings saved! ")};return i?E.jsxs("div",{className:"page settings-page",children:[E.jsx(Ui,{title:"Dragon's Lair",subtitle:"Loading..."}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the lair..."})]})]}):E.jsxs("div",{className:"page settings-page",children:[E.jsx(Ui,{title:"Dragon's Lair",subtitle:"Configure your dragon's needs"}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Keeper's Profile"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:h.name,onChange:X=>Ae({name:X.target.value})})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Sex"}),E.jsxs("select",{value:h.sex,onChange:X=>Ae({sex:X.target.value}),children:[E.jsx("option",{value:"male",children:"Male"}),E.jsx("option",{value:"female",children:"Female"}),E.jsx("option",{value:"other",children:"Other"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Age"}),E.jsx("input",{type:"number",value:h.age,onChange:X=>Ae({age:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Weight (kg)"}),E.jsx("input",{type:"number",value:h.weight_kg,onChange:X=>Ae({weight_kg:parseInt(X.target.value)})})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Height (cm)"}),E.jsx("input",{type:"number",value:h.height_cm,onChange:X=>Ae({height_cm:parseInt(X.target.value)})})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Activity Level"}),E.jsxs("select",{value:h.activity_level,onChange:X=>Ae({activity_level:X.target.value}),children:[E.jsx("option",{value:"sedentary",children:"Sedentary (little exercise)"}),E.jsx("option",{value:"light",children:"Light (1-3 days/week)"}),E.jsx("option",{value:"moderate",children:"Moderate (3-5 days/week)"}),E.jsx("option",{value:"active",children:"Active (6-7 days/week)"}),E.jsx("option",{value:"very_active",children:"Very Active (intense daily)"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Dietary Conditions"}),E.jsx("div",{className:"checkbox-group",children:["gout","diabetes","kidney_disease","vegetarian","vegan"].map(X=>E.jsxs("label",{className:"checkbox-label",children:[E.jsx("input",{type:"checkbox",checked:h.dietary_conditions?.includes(X)||!1,onChange:ce=>{const x=ce.target.checked?[...h.dietary_conditions||[],X]:(h.dietary_conditions||[]).filter(F=>F!==X);Ae({dietary_conditions:x})}}),E.jsx("span",{children:X.replace("_"," ")})]},X))})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:pe,children:"Calculate Dragon's Needs "}),P&&E.jsx("button",{className:"btn btn-primary w-full mt-sm",onClick:ie,children:" Save All Changes"})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Hoard"}),E.jsx("p",{className:"text-muted",children:"Manage your saved meals and custom bottles."}),E.jsxs("div",{className:"stash-buttons",children:[E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash"),children:[" Saved Meals (",f?.length||0,")"]}),E.jsxs("button",{className:"btn btn-secondary",onClick:()=>t("/stash?tab=bottles"),children:[" Custom Bottles (",p?.length||0,")"]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsxs("div",{className:"section-header-row",children:[E.jsx("h2",{className:"section-title",children:" Nutrition Thresholds"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>D(!R),children:R?"Done":"Edit"})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Calories"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.calories_min,onChange:X=>oe("calories_min",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"-"}),E.jsx("input",{type:"number",value:_.calories_max,onChange:X=>oe("calories_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"kcal"})]}):E.jsxs("span",{className:"threshold-value",children:[_.calories_min," - ",_.calories_max," kcal"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Purines"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.purines_max,onChange:X=>oe("purines_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.purines_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Protein"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.protein_target,onChange:X=>oe("protein_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.protein_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Carbs"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.carbs_target,onChange:X=>oe("carbs_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.carbs_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fat"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fat_target,onChange:X=>oe("fat_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fat_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Fiber"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.fiber_target,onChange:X=>oe("fiber_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.fiber_target," g target"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sodium"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sodium_max,onChange:X=>oe("sodium_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"mg max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sodium_max," mg max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Sugar"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.sugar_max,onChange:X=>oe("sugar_max",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"g max"})]}):E.jsxs("span",{className:"threshold-value",children:[_.sugar_max," g max"]})]}),E.jsxs("div",{className:"threshold-row",children:[E.jsx("span",{className:"threshold-label",children:" Hydration"}),R?E.jsxs("div",{className:"threshold-inputs",children:[E.jsx("input",{type:"number",value:_.hydration_target,onChange:X=>oe("hydration_target",X.target.value),className:"threshold-input"}),E.jsx("span",{children:"ml target"})]}):E.jsxs("span",{className:"threshold-value",children:[_.hydration_target," ml target"]})]}),R&&E.jsx("p",{className:"text-muted text-center mt-sm",children:`Tip: Use "Calculate Dragon's Needs" to auto-fill based on your profile.`})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Scale Theme"}),E.jsx("div",{className:"theme-presets",children:Object.entries(Ur).map(([X,ce])=>E.jsxs("button",{className:`theme-preset ${C===X?"active":""}`,onClick:()=>Je(X),style:{"--preset-color":ce.seedColor},children:[E.jsx("span",{className:"preset-swatch",style:{background:ce.seedColor}}),E.jsx("span",{className:"preset-name",children:ce.name}),E.jsx("span",{className:"preset-desc",children:ce.description})]},X))}),E.jsxs("div",{className:"custom-color-section",children:[E.jsx("label",{children:"Custom Dragon Scale Color"}),E.jsxs("div",{className:"color-picker-row",children:[E.jsx("input",{type:"color",value:M,onChange:X=>Xe(X.target.value),className:"color-picker"}),E.jsx("input",{type:"text",value:M,onChange:X=>Xe(X.target.value),className:"color-input",placeholder:"#66BB6A"})]})]}),E.jsxs("div",{className:"theme-preview card",children:[E.jsx("p",{className:"preview-label",children:"Preview"}),E.jsxs("div",{className:"preview-content",children:[E.jsx("div",{className:"preview-text",children:"Sample text"}),E.jsx("button",{className:"btn btn-primary",children:"Button"}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress-bar-fill success",style:{width:"60%"}})})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon Statistics"}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.total_meals_logged||0}),E.jsx("span",{className:"stat-label",children:"Meals logged"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.stats?.current_streak_days||0}),E.jsx("span",{className:"stat-label",children:"Day streak "})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:(f?.length||0)+(p?.length||0)}),E.jsx("span",{className:"stat-label",children:"In hoard"})]}),E.jsxs("div",{className:"stat-item",children:[E.jsx("span",{className:"stat-value",children:e?.badges?.length||0}),E.jsx("span",{className:"stat-label",children:"Badges"})]})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" Dragon's Intelligence"}),E.jsx("p",{className:"text-muted mb-md",children:"Connect your dragon to Google's AI to automatically analyze meals from text descriptions or photos."}),ee==="saved"?E.jsxs("div",{className:"api-key-status",children:[E.jsx("div",{className:"status-badge success",children:E.jsx("span",{children:" AI Connected"})}),E.jsx("p",{className:"text-muted text-sm mt-sm",children:"Your dragon can analyze meals. Key stored locally on this device."}),E.jsx("button",{className:"btn btn-secondary btn-danger-outline mt-sm",onClick:Z,children:" Remove API Key"})]}):E.jsxs("div",{className:"api-key-form",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Google AI Studio API Key"}),E.jsxs("div",{className:"input-with-toggle",children:[E.jsx("input",{type:Q?"text":"password",value:B,onChange:X=>W(X.target.value),placeholder:"AIza...",className:"api-key-input"}),E.jsx("button",{type:"button",className:"toggle-visibility",onClick:()=>re(!Q),children:Q?"":""})]}),E.jsxs("p",{className:"input-help",children:["Get your free key at"," ",E.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio "})]})]}),E.jsx("button",{className:"btn btn-primary w-full",onClick:H,disabled:!B.trim(),children:" Save API Key"})]})]}),E.jsxs("section",{className:"settings-section card",children:[E.jsx("h2",{className:"section-title",children:" About"}),E.jsxs("p",{className:"text-center text-muted",children:["Purine Control v1.0.0",E.jsx("br",{}),`"The Dragon Keeper's Nutrition Tracker"`]}),E.jsx("p",{className:"text-center text-muted mt-md",children:"Made with  for your dragon"})]})]})}const QU=[{id:"default-1",name:"Water Glass",capacity_ml:250,icon:"",type:"container"},{id:"default-2",name:"Water Bottle",capacity_ml:500,icon:"",type:"container"},{id:"default-3",name:"Dragon Chalice",capacity_ml:750,icon:"",type:"container"}],XU=[{key:"meals",label:" Saved Meals",icon:""},{key:"bottles",label:" Bottles",icon:""}],ZU=["","","","","","","",""];function WU(){const t=Hl(),[e,i]=JC(),o=e.get("tab")||"meals",[r,l]=U.useState(o),[c,f]=U.useState(""),[p,h]=U.useState(!1),[y,_]=U.useState(null),[T,C]=U.useState(""),[b,M]=U.useState(""),[w,R]=U.useState(250),[D,P]=U.useState({calories:0,purines:0,protein:0,carbs:0,fat:0}),{savedMeals:J,bottles:B,isLoading:W,addToStash:Q,removeFromStash:re,updateStashItem:ee}=qd(),{adjustHydration:le}=x_(),{addMeal:pe}=N_(),oe=[...QU,...B],Ae=G=>{l(G),i({tab:G})},Je=async G=>{const j=G.capacity_ml||G.amount_ml;await le(j),alert(`Added ${j}ml to hydration! `)},Xe=async G=>{await pe({meal_type:"snack",meal_name:G.name,ingredients:G.ingredients||[],total_nutrients:G.total_nutrients||{}}),G.id&&!G.id.startsWith("default-")&&await ee(G.id,{use_count:(G.use_count||0)+1}),alert(`${G.name} added to diary! `),t("/")},H=async G=>{confirm("Remove this item from your hoard?")&&await re(G)},Z=()=>{C(""),M(""),R(250),P({calories:0,purines:0,protein:0,carbs:0,fat:0}),_(null),h(!1)},ie=()=>{Z(),h(!0)},X=G=>{_(G),C(G.name||""),M(G.icon||""),R(G.capacity_ml||G.amount_ml||250),P(G.nutrients||G.total_nutrients||{calories:0,purines:0,protein:0,carbs:0,fat:0}),h(!0)},ce=async()=>{if(!T.trim()){alert("Please enter a name");return}const G=y?.id?.startsWith("default-");if(y&&!G){const j={name:T};r==="bottles"&&(j.icon=b,j.capacity_ml=w),await ee(y.id,j),alert("Item updated! ")}else{const j=r==="meals"?"meal":"container",de={type:j,name:T,icon:b,capacity_ml:j==="container"?w:void 0,ingredients:j==="meal"?y?.ingredients||[]:void 0,total_nutrients:j==="meal"?D:void 0,use_count:0};await Q(de),alert(G?"Custom bottle created! ":"Added to your hoard! ")}Z()},x=J.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase())),F=oe.filter(G=>G.name?.toLowerCase().includes(c.toLowerCase()));return W?E.jsxs("div",{className:"page stash-page",children:[E.jsx(Ui,{title:"Dragon's Hoard",subtitle:"Loading...",showBack:!0,onBack:()=>t("/settings")}),E.jsxs("div",{className:"loading-state card",children:[E.jsx("div",{className:"spinner"}),E.jsx("p",{children:"Opening the hoard..."})]})]}):E.jsxs("div",{className:"page stash-page",children:[E.jsx(Ui,{title:"Dragon's Hoard",subtitle:"Your saved meals and custom ingredients",showBack:!0,onBack:()=>t("/settings")}),E.jsx("div",{className:"stash-tabs",children:XU.map(G=>E.jsx("button",{className:`stash-tab ${r===G.key?"active":""}`,onClick:()=>Ae(G.key),children:G.label},G.key))}),E.jsx("div",{className:"stash-search",children:E.jsx("input",{type:"text",placeholder:`Search ${r==="meals"?"meals":"ingredients"}...`,value:c,onChange:G=>f(G.target.value)})}),r==="meals"&&E.jsxs("section",{className:"stash-content",children:[x.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No saved meals yet!"}),E.jsx("p",{className:"text-muted",children:"Save meals from your diary to reuse them."})]}):E.jsx("div",{className:"stash-list",children:x.map(G=>E.jsxs("div",{className:"stash-item card",children:[E.jsxs("div",{className:"stash-item-header",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"use-count",children:["Used ",G.use_count||0,"x"]})]}),E.jsx("p",{className:"stash-item-ingredients",children:Array.isArray(G.ingredients)?G.ingredients.map(j=>typeof j=="string"?j:j.name).join(", "):"No ingredients"}),E.jsxs("div",{className:"stash-item-nutrients",children:[E.jsxs("span",{children:[" ",G.total_nutrients?.calories||0," cal"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.purines||0,"mg"]}),E.jsxs("span",{children:[" ",G.total_nutrients?.protein||0,"g"]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Xe(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:" Edit"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>H(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ie,children:" Create New Meal"})]}),r==="bottles"&&E.jsxs("section",{className:"stash-content",children:[E.jsx("p",{className:"text-muted",children:"Custom hydration containers for quick logging."}),F.length===0?E.jsxs("div",{className:"empty-state card",children:[E.jsx("p",{children:" No custom bottles yet!"}),E.jsx("p",{className:"text-muted",children:"Add your favorite containers."})]}):E.jsx("div",{className:"stash-list",children:F.map(G=>E.jsxs("div",{className:"stash-item card bottle-item",children:[E.jsxs("div",{className:"bottle-info",children:[E.jsx("span",{className:"bottle-icon",children:G.icon||""}),E.jsxs("div",{className:"bottle-details",children:[E.jsx("h3",{children:G.name}),E.jsxs("span",{className:"bottle-amount",children:[G.capacity_ml||G.amount_ml," ml"]})]})]}),E.jsxs("div",{className:"stash-item-actions",children:[E.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Je(G),children:" Use"}),E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>X(G),children:""}),!G.id.startsWith("default-")&&E.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>H(G.id),children:""})]})]},G.id))}),E.jsx("button",{className:"btn btn-secondary w-full mt-md",onClick:ie,children:" Add Custom Bottle"})]}),p&&E.jsx("div",{className:"modal-overlay",onClick:Z,children:E.jsxs("div",{className:"modal-content card",onClick:G=>G.stopPropagation(),children:[E.jsxs("h2",{children:[y?" Edit":" Create"," ",r==="meals"?"Meal":r==="ingredients"?"Ingredient":"Bottle"]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:T,onChange:G=>C(G.target.value),placeholder:`e.g., ${r==="meals"?"Chicken Salad":r==="ingredients"?"Olive Oil":"Sports Bottle"}`})]}),r==="bottles"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Icon"}),E.jsx("div",{className:"icon-picker",children:ZU.map(G=>E.jsx("button",{type:"button",className:`icon-btn ${b===G?"active":""}`,onClick:()=>M(G),children:G},G))})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Capacity (ml)"}),E.jsx("input",{type:"number",value:w,onChange:G=>R(parseInt(G.target.value)||0),min:"0",step:"50"})]})]}),E.jsxs("div",{className:"modal-actions",children:[E.jsx("button",{className:"btn btn-secondary",onClick:Z,children:"Cancel"}),E.jsxs("button",{className:"btn btn-primary",onClick:ce,children:[" ",y?"Update":"Save"]})]})]})})]})}function jU(){return E.jsx(oR,{children:E.jsx(BC,{basename:"/purine-control",children:E.jsxs("div",{className:"app",children:[E.jsxs(_C,{children:[E.jsx(jo,{path:"/",element:E.jsx($U,{})}),E.jsx(jo,{path:"/charts",element:E.jsx(YU,{})}),E.jsx(jo,{path:"/oracle",element:E.jsx(JU,{})}),E.jsx(jo,{path:"/settings",element:E.jsx(KU,{})}),E.jsx(jo,{path:"/stash",element:E.jsx(WU,{})})]}),E.jsx(rR,{})]})})})}RE.createRoot(document.getElementById("root")).render(E.jsx(U.StrictMode,{children:E.jsx(jU,{})}));
